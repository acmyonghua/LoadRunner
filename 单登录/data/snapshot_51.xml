<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="51">
  <HTTPTask id="88" hostname="map.jitmarketing.cn" path="/js/EXTJS/ext-all.js" url="http://map.jitmarketing.cn:8083/js/EXTJS/ext-all.js" ip="222.73.180.225" port="8083" connectionId="15" origin="Primary" frame="1" startTime="168381379" endTime="168381410">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Accept" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdCwgKi8qO3E9MC44</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL21hcC5qaXRtYXJrZXRpbmcuY246ODA4My9kZWZhdWx0LmFzcHg=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>emgtQ04=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgOS4wOyBXaW5kb3dzIE5UIDYuMTsgV09XNjQ7IFRyaWRlbnQvNS4wKQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWFwLmppdG1hcmtldGluZy5jbjo4MDgz</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9qcy9FWFRKUy9leHQtYWxsLmpzIEhUVFAvMS4xDQpBY2NlcHQ6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsICovKjtxPTAuOA0KUmVmZXJlcjogaHR0cDovL21hcC5qaXRtYXJrZXRpbmcuY246ODA4My9kZWZhdWx0LmFzcHgNCkFjY2VwdC1MYW5ndWFnZTogemgtQ04NClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDkuMDsgV2luZG93cyBOVCA2LjE7IFdPVzY0OyBUcmlkZW50LzUuMCkNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KSG9zdDogbWFwLmppdG1hcmtldGluZy5jbjo4MDgzDQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24veC1qYXZhc2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2VkLCAxOSBTZXAgMjAxMiAwMDo0MjoxOCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjAxMWZhOWVmZjk1Y2QxOjAi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TWljcm9zb2Z0LUlJUy83LjA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2VkLCAxMCBKdWwgMjAxMyAwNToyNDoxMyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTI5MTkxOQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3gtamF2YXNjcmlwdA0KTGFzdC1Nb2RpZmllZDogV2VkLCAxOSBTZXAgMjAxMiAwMDo0MjoxOCBHTVQNCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpFVGFnOiAiMDExZmE5ZWZmOTVjZDE6MCINClNlcnZlcjogTWljcm9zb2Z0LUlJUy83LjANClgtUG93ZXJlZC1CeTogQVNQLk5FVA0KRGF0ZTogV2VkLCAxMCBKdWwgMjAxMyAwNToyNDoxMyBHTVQNCkNvbnRlbnQtTGVuZ3RoOiAxMjkxOTE5DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyoKRXh0IEpTIDQuMSAtIEphdmFTY3JpcHQgTGlicmFyeQpDb3B5cmlnaHQgKGMpIDIwMDYtMjAxMiwgU2VuY2hhIEluYy4KQWxsIHJpZ2h0cyByZXNlcnZlZC4KbGljZW5zaW5nQHNlbmNoYS5jb20KCmh0dHA6Ly93d3cuc2VuY2hhLmNvbS9saWNlbnNlCgpPcGVuIFNvdXJjZSBMaWNlbnNlCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpUaGlzIHZlcnNpb24gb2YgRXh0IEpTIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgT3BlbiBTb3VyY2UgR1BMIDMuMCBsaWNlbnNlLiAKCmh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9ncGwuaHRtbAoKVGhlcmUgYXJlIHNldmVyYWwgRkxPU1MgZXhjZXB0aW9ucyBhdmFpbGFibGUgZm9yIHVzZSB3aXRoIHRoaXMgcmVsZWFzZSBmb3IKb3BlbiBzb3VyY2UgYXBwbGljYXRpb25zIHRoYXQgYXJlIGRpc3RyaWJ1dGVkIHVuZGVyIGEgbGljZW5zZSBvdGhlciB0aGFuIEdQTC4KCiogT3BlbiBTb3VyY2UgTGljZW5zZSBFeGNlcHRpb24gZm9yIEFwcGxpY2F0aW9ucwoKICBodHRwOi8vd3d3LnNlbmNoYS5jb20vcHJvZHVjdHMvZmxvc3MtZXhjZXB0aW9uLnBocAoKKiBPcGVuIFNvdXJjZSBMaWNlbnNlIEV4Y2VwdGlvbiBmb3IgRGV2ZWxvcG1lbnQKCiAgaHR0cDovL3d3dy5zZW5jaGEuY29tL3Byb2R1Y3RzL3V4LWV4Y2VwdGlvbi5waHAKCgpBbHRlcm5hdGUgTGljZW5zaW5nCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpDb21tZXJjaWFsIGFuZCBPRU0gTGljZW5zZXMgYXJlIGF2YWlsYWJsZSBmb3IgYW4gYWx0ZXJuYXRlIGRvd25sb2FkIG9mIEV4dCBKUy4KVGhpcyBpcyB0aGUgYXBwcm9wcmlhdGUgb3B0aW9uIGlmIHlvdSBhcmUgY3JlYXRpbmcgcHJvcHJpZXRhcnkgYXBwbGljYXRpb25zIGFuZCB5b3UgYXJlIApub3QgcHJlcGFyZWQgdG8gZGlzdHJpYnV0ZSBhbmQgc2hhcmUgdGhlIHNvdXJjZSBjb2RlIG9mIHlvdXIgYXBwbGljYXRpb24gdW5kZXIgdGhlIApHUEwgdjMgbGljZW5zZS4gUGxlYXNlIHZpc2l0IGh0dHA6Ly93d3cuc2VuY2hhLmNvbS9saWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCgotLQoKVGhpcyBsaWJyYXJ5IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsIEFORCBOT04tSU5GUklOR0VNRU5UIE9GIFRISVJELVBBUlRZIElOVEVMTEVDVFVBTCBQUk9QRVJUWSBSSUdIVFMuICBTZWUgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiovCnZhciBFeHQ9RXh0fHx7fTtFeHQuX3N0YXJ0VGltZT1uZXcgRGF0ZSgpLmdldFRpbWUoKTsoZnVuY3Rpb24oKXt2YXIgaD10aGlzLGE9T2JqZWN0LnByb3RvdHlwZSxqPWEudG9TdHJpbmcsYj10cnVlLGc9e3RvU3RyaW5nOjF9LGU9ZnVuY3Rpb24oKXt9LGQ9ZnVuY3Rpb24oKXt2YXIgaT1kLmNhbGxlci5jYWxsZXI7cmV0dXJuIGkuJG93bmVyLnByb3RvdHlwZVtpLiRuYW1lXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGM7RXh0Lmdsb2JhbD1oO2ZvcihjIGluIGcpe2I9bnVsbH1pZihiKXtiPVsiaGFzT3duUHJvcGVydHkiLCJ2YWx1ZU9mIiwiaXNQcm90b3R5cGVPZiIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwidG9Mb2NhbGVTdHJpbmciLCJ0b1N0cmluZyIsImNvbnN0cnVjdG9yIl19RXh0LmVudW1lcmFibGVzPWI7RXh0LmFwcGx5PWZ1bmN0aW9uKG8sbixxKXtpZihxKXtFeHQuYXBwbHkobyxxKX1pZihvJiZuJiZ0eXBlb2Ygbj09PSJvYmplY3QiKXt2YXIgcCxtLGw7Zm9yKHAgaW4gbil7b1twXT1uW3BdfWlmKGIpe2ZvcihtPWIubGVuZ3RoO20tLTspe2w9YlttXTtpZihuLmhhc093blByb3BlcnR5KGwpKXtvW2xdPW5bbF19fX19cmV0dXJuIG99O0V4dC5idWlsZFNldHRpbmdzPUV4dC5hcHBseSh7YmFzZUNTU1ByZWZpeDoieC0iLHNjb3BlUmVzZXRDU1M6ZmFsc2V9LEV4dC5idWlsZFNldHRpbmdzfHx7fSk7RXh0LmFwcGx5KEV4dCx7bmFtZTpFeHQuc2FuZGJveE5hbWV8fCJFeHQiLGVtcHR5Rm46ZSxlbXB0eVN0cmluZzpuZXcgU3RyaW5nKCksYmFzZUNTU1ByZWZpeDpFeHQuYnVpbGRTZXR0aW5ncy5iYXNlQ1NTUHJlZml4LGFwcGx5SWY6ZnVuY3Rpb24oayxpKXt2YXIgbDtpZihrKXtmb3IobCBpbiBpKXtpZihrW2xdPT09dW5kZWZpbmVkKXtrW2xdPWlbbF19fX1yZXR1cm4ga30saXRlcmF0ZTpmdW5jdGlvbihpLGwsayl7aWYoRXh0LmlzRW1wdHkoaSkpe3JldHVybn1pZihrPT09dW5kZWZpbmVkKXtrPWl9aWYoRXh0LmlzSXRlcmFibGUoaSkpe0V4dC5BcnJheS5lYWNoLmNhbGwoRXh0LkFycmF5LGksbCxrKX1lbHNle0V4dC5PYmplY3QuZWFjaC5jYWxsKEV4dC5PYmplY3QsaSxsLGspfX19KTtFeHQuYXBwbHkoRXh0LHtleHRlbmQ6KGZ1bmN0aW9uKCl7dmFyIGk9YS5jb25zdHJ1Y3RvcixrPWZ1bmN0aW9uKG4pe2Zvcih2YXIgbCBpbiBuKXtpZighbi5oYXNPd25Qcm9wZXJ0eShsKSl7Y29udGludWV9dGhpc1tsXT1uW2xdfX07cmV0dXJuIGZ1bmN0aW9uKGwscSxvKXtpZihFeHQuaXNPYmplY3QocSkpe289cTtxPWw7bD1vLmNvbnN0cnVjdG9yIT09aT9vLmNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7cS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fXZhciBuPWZ1bmN0aW9uKCl7fSxtLHA9cS5wcm90b3R5cGU7bi5wcm90b3R5cGU9cDttPWwucHJvdG90eXBlPW5ldyBuKCk7bS5jb25zdHJ1Y3Rvcj1sO2wuc3VwZXJjbGFzcz1wO2lmKHAuY29uc3RydWN0b3I9PT1pKXtwLmNvbnN0cnVjdG9yPXF9bC5vdmVycmlkZT1mdW5jdGlvbihyKXtFeHQub3ZlcnJpZGUobCxyKX07bS5vdmVycmlkZT1rO20ucHJvdG89bTtsLm92ZXJyaWRlKG8pO2wuZXh0ZW5kPWZ1bmN0aW9uKHIpe3JldHVybiBFeHQuZXh0ZW5kKGwscil9O3JldHVybiBsfX0oKSksb3ZlcnJpZGU6ZnVuY3Rpb24obSxuKXtpZihtLiRpc0NsYXNzKXttLm92ZXJyaWRlKG4pfWVsc2V7aWYodHlwZW9mIG09PSJmdW5jdGlvbiIpe0V4dC5hcHBseShtLnByb3RvdHlwZSxuKX1lbHNle3ZhciBpPW0uc2VsZixrLGw7aWYoaSYmaS4kaXNDbGFzcyl7Zm9yKGsgaW4gbil7aWYobi5oYXNPd25Qcm9wZXJ0eShrKSl7bD1uW2tdO2lmKHR5cGVvZiBsPT0iZnVuY3Rpb24iKXtsLiRuYW1lPWs7bC4kb3duZXI9aTtsLiRwcmV2aW91cz1tLmhhc093blByb3BlcnR5KGspP21ba106ZH1tW2tdPWx9fX1lbHNle0V4dC5hcHBseShtLG4pfX19cmV0dXJuIG19fSk7RXh0LmFwcGx5KEV4dCx7dmFsdWVGcm9tOmZ1bmN0aW9uKGwsaSxrKXtyZXR1cm4gRXh0LmlzRW1wdHkobCxrKT9pOmx9LHR5cGVPZjpmdW5jdGlvbihrKXt2YXIgaSxsO2lmKGs9PT1udWxsKXtyZXR1cm4ibnVsbCJ9aT10eXBlb2YgaztpZihpPT09InVuZGVmaW5lZCJ8fGk9PT0ic3RyaW5nInx8aT09PSJudW1iZXIifHxpPT09ImJvb2xlYW4iKXtyZXR1cm4gaX1sPWouY2FsbChrKTtzd2l0Y2gobCl7Y2FzZSJbb2JqZWN0IEFycmF5XSI6cmV0dXJuImFycmF5IjtjYXNlIltvYmplY3QgRGF0ZV0iOnJldHVybiJkYXRlIjtjYXNlIltvYmplY3QgQm9vbGVhbl0iOnJldHVybiJib29sZWFuIjtjYXNlIltvYmplY3QgTnVtYmVyXSI6cmV0dXJuIm51bWJlciI7Y2FzZSJbb2JqZWN0IFJlZ0V4cF0iOnJldHVybiJyZWdleHAifWlmKGk9PT0iZnVuY3Rpb24iKXtyZXR1cm4iZnVuY3Rpb24ifWlmKGk9PT0ib2JqZWN0Iil7aWYoay5ub2RlVHlwZSE9PXVuZGVmaW5lZCl7aWYoay5ub2RlVHlwZT09PTMpe3JldHVybigvXFMvKS50ZXN0KGsubm9kZVZhbHVlKT8idGV4dG5vZGUiOiJ3aGl0ZXNwYWNlIn1lbHNle3JldHVybiJlbGVtZW50In19cmV0dXJuIm9iamVjdCJ9fSxpc0VtcHR5OmZ1bmN0aW9uKGksayl7cmV0dXJuKGk9PT1udWxsKXx8KGk9PT11bmRlZmluZWQpfHwoIWs/aT09PSIiOmZhbHNlKXx8KEV4dC5pc0FycmF5KGkpJiZpLmxlbmd0aD09PTApfSxpc0FycmF5OigiaXNBcnJheSIgaW4gQXJyYXkpP0FycmF5LmlzQXJyYXk6ZnVuY3Rpb24oaSl7cmV0dXJuIGouY2FsbChpKT09PSJbb2JqZWN0IEFycmF5XSJ9LGlzRGF0ZTpmdW5jdGlvbihpKXtyZXR1cm4gai5jYWxsKGkpPT09IltvYmplY3QgRGF0ZV0ifSxpc09iamVjdDooai5jYWxsKG51bGwpPT09IltvYmplY3QgT2JqZWN0XSIpP2Z1bmN0aW9uKGkpe3JldHVybiBpIT09bnVsbCYmaSE9PXVuZGVmaW5lZCYmai5jYWxsKGkpPT09IltvYmplY3QgT2JqZWN0XSImJmkub3duZXJEb2N1bWVudD09PXVuZGVmaW5lZH06ZnVuY3Rpb24oaSl7cmV0dXJuIGouY2FsbChpKT09PSJbb2JqZWN0IE9iamVjdF0ifSxpc1NpbXBsZU9iamVjdDpmdW5jdGlvbihpKXtyZXR1cm4gaSBpbnN0YW5jZW9mIE9iamVjdCYmaS5jb25zdHJ1Y3Rvcj09PU9iamVjdH0saXNQcmltaXRpdmU6ZnVuY3Rpb24oayl7dmFyIGk9dHlwZW9mIGs7cmV0dXJuIGk9PT0ic3RyaW5nInx8aT09PSJudW1iZXIifHxpPT09ImJvb2xlYW4ifSxpc0Z1bmN0aW9uOih0eXBlb2YgZG9jdW1lbnQhPT0idW5kZWZpbmVkIiYmdHlwZW9mIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5Iik9PT0iZnVuY3Rpb24iKT9mdW5jdGlvbihpKXtyZXR1cm4gai5jYWxsKGkpPT09IltvYmplY3QgRnVuY3Rpb25dIn06ZnVuY3Rpb24oaSl7cmV0dXJuIHR5cGVvZiBpPT09ImZ1bmN0aW9uIn0saXNOdW1iZXI6ZnVuY3Rpb24oaSl7cmV0dXJuIHR5cGVvZiBpPT09Im51bWJlciImJmlzRmluaXRlKGkpfSxpc051bWVyaWM6ZnVuY3Rpb24oaSl7cmV0dXJuICFpc05hTihwYXJzZUZsb2F0KGkpKSYmaXNGaW5pdGUoaSl9LGlzU3RyaW5nOmZ1bmN0aW9uKGkpe3JldHVybiB0eXBlb2YgaT09PSJzdHJpbmcifSxpc0Jvb2xlYW46ZnVuY3Rpb24oaSl7cmV0dXJuIHR5cGVvZiBpPT09ImJvb2xlYW4ifSxpc0VsZW1lbnQ6ZnVuY3Rpb24oaSl7cmV0dXJuIGk/aS5ub2RlVHlwZT09PTE6ZmFsc2V9LGlzVGV4dE5vZGU6ZnVuY3Rpb24oaSl7cmV0dXJuIGk/aS5ub2RlTmFtZT09PSIjdGV4dCI6ZmFsc2V9LGlzRGVmaW5lZDpmdW5jdGlvbihpKXtyZXR1cm4gdHlwZW9mIGkhPT0idW5kZWZpbmVkIn0saXNJdGVyYWJsZTpmdW5jdGlvbihrKXt2YXIgaT10eXBlb2YgayxsPWZhbHNlO2lmKGsmJmkhPSJzdHJpbmciKXtpZihpPT0iZnVuY3Rpb24iKXtpZihFeHQuaXNTYWZhcmkpe2w9ayBpbnN0YW5jZW9mIE5vZGVMaXN0fHxrIGluc3RhbmNlb2YgSFRNTENvbGxlY3Rpb259fWVsc2V7bD10cnVlfX1yZXR1cm4gbD9rLmxlbmd0aCE9PXVuZGVmaW5lZDpmYWxzZX19KTtFeHQuYXBwbHkoRXh0LHtjbG9uZTpmdW5jdGlvbihxKXt2YXIgcCxvLG0sbCxyLG47aWYocT09PW51bGx8fHE9PT11bmRlZmluZWQpe3JldHVybiBxfWlmKHEubm9kZVR5cGUmJnEuY2xvbmVOb2RlKXtyZXR1cm4gcS5jbG9uZU5vZGUodHJ1ZSl9cD1qLmNhbGwocSk7aWYocD09PSJbb2JqZWN0IERhdGVdIil7cmV0dXJuIG5ldyBEYXRlKHEuZ2V0VGltZSgpKX1pZihwPT09IltvYmplY3QgQXJyYXldIil7bz1xLmxlbmd0aDtyPVtdO3doaWxlKG8tLSl7cltvXT1FeHQuY2xvbmUocVtvXSl9fWVsc2V7aWYocD09PSJbb2JqZWN0IE9iamVjdF0iJiZxLmNvbnN0cnVjdG9yPT09T2JqZWN0KXtyPXt9O2ZvcihuIGluIHEpe3Jbbl09RXh0LmNsb25lKHFbbl0pfWlmKGIpe2ZvcihtPWIubGVuZ3RoO20tLTspe2w9YlttXTtyW2xdPXFbbF19fX19cmV0dXJuIHJ8fHF9LGdldFVuaXF1ZUdsb2JhbE5hbWVzcGFjZTpmdW5jdGlvbigpe3ZhciBsPXRoaXMudW5pcXVlR2xvYmFsTmFtZXNwYWNlLGs7aWYobD09PXVuZGVmaW5lZCl7az0wO2Rve2w9IkV4dEJveCIrKCsrayl9d2hpbGUoRXh0Lmdsb2JhbFtsXSE9PXVuZGVmaW5lZCk7RXh0Lmdsb2JhbFtsXT1FeHQ7dGhpcy51bmlxdWVHbG9iYWxOYW1lc3BhY2U9bH1yZXR1cm4gbH0sZnVuY3Rpb25GYWN0b3J5Q2FjaGU6e30sY2FjaGVhYmxlRnVuY3Rpb25GYWN0b3J5OmZ1bmN0aW9uKCl7dmFyIG89dGhpcyxsPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksaz1vLmZ1bmN0aW9uRmFjdG9yeUNhY2hlLGksbSxuO2lmKEV4dC5pc1NhbmRib3hlZCl7bj1sLmxlbmd0aDtpZihuPjApe24tLTtsW25dPSJ2YXIgRXh0PXdpbmRvdy4iK0V4dC5uYW1lKyI7IitsW25dfX1pPWwuam9pbigiIik7bT1rW2ldO2lmKCFtKXttPUZ1bmN0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5hcHBseShGdW5jdGlvbi5wcm90b3R5cGUsbCk7a1tpXT1tfXJldHVybiBtfSxmdW5jdGlvbkZhY3Rvcnk6ZnVuY3Rpb24oKXt2YXIgbD10aGlzLGk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxrO2lmKEV4dC5pc1NhbmRib3hlZCl7az1pLmxlbmd0aDtpZihrPjApe2stLTtpW2tdPSJ2YXIgRXh0PXdpbmRvdy4iK0V4dC5uYW1lKyI7IitpW2tdfX1yZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yLmFwcGx5KEZ1bmN0aW9uLnByb3RvdHlwZSxpKX0sTG9nZ2VyOnt2ZXJib3NlOmUsbG9nOmUsaW5mbzplLHdhcm46ZSxlcnJvcjpmdW5jdGlvbihpKXt0aHJvdyBuZXcgRXJyb3IoaSl9LGRlcHJlY2F0ZTplfX0pO0V4dC50eXBlPUV4dC50eXBlT2Z9KCkpO0V4dC5nbG9iYWxFdmFsPUV4dC5nbG9iYWwuZXhlY1NjcmlwdD9mdW5jdGlvbihhKXtleGVjU2NyaXB0KGEpfTpmdW5jdGlvbigkJGNvZGUpeyhmdW5jdGlvbigpe2V2YWwoJCRjb2RlKX0oKSl9OyhmdW5jdGlvbigpe3ZhciBhPSI0LjEuMS4xIixiO0V4dC5WZXJzaW9uPWI9RXh0LmV4dGVuZChPYmplY3Qse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGMpe3ZhciBlLGQ7aWYoYyBpbnN0YW5jZW9mIGIpe3JldHVybiBjfXRoaXMudmVyc2lvbj10aGlzLnNob3J0VmVyc2lvbj1TdHJpbmcoYykudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fL2csIi4iKS5yZXBsYWNlKC9bXC0rXS9nLCIiKTtkPXRoaXMudmVyc2lvbi5zZWFyY2goLyhbXlxkXC5dKS8pO2lmKGQhPT0tMSl7dGhpcy5yZWxlYXNlPXRoaXMudmVyc2lvbi5zdWJzdHIoZCxjLmxlbmd0aCk7dGhpcy5zaG9ydFZlcnNpb249dGhpcy52ZXJzaW9uLnN1YnN0cigwLGQpfXRoaXMuc2hvcnRWZXJzaW9uPXRoaXMuc2hvcnRWZXJzaW9uLnJlcGxhY2UoL1teXGRdL2csIiIpO2U9dGhpcy52ZXJzaW9uLnNwbGl0KCIuIik7dGhpcy5tYWpvcj1wYXJzZUludChlLnNoaWZ0KCl8fDAsMTApO3RoaXMubWlub3I9cGFyc2VJbnQoZS5zaGlmdCgpfHwwLDEwKTt0aGlzLnBhdGNoPXBhcnNlSW50KGUuc2hpZnQoKXx8MCwxMCk7dGhpcy5idWlsZD1wYXJzZUludChlLnNoaWZ0KCl8fDAsMTApO3JldHVybiB0aGlzfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZlcnNpb259LHZhbHVlT2Y6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52ZXJzaW9ufSxnZXRNYWpvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1ham9yfHwwfSxnZXRNaW5vcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbm9yfHwwfSxnZXRQYXRjaDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhdGNofHwwfSxnZXRCdWlsZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1aWxkfHwwfSxnZXRSZWxlYXNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVsZWFzZXx8IiJ9LGlzR3JlYXRlclRoYW46ZnVuY3Rpb24oYyl7cmV0dXJuIGIuY29tcGFyZSh0aGlzLnZlcnNpb24sYyk9PT0xfSxpc0dyZWF0ZXJUaGFuT3JFcXVhbDpmdW5jdGlvbihjKXtyZXR1cm4gYi5jb21wYXJlKHRoaXMudmVyc2lvbixjKT49MH0saXNMZXNzVGhhbjpmdW5jdGlvbihjKXtyZXR1cm4gYi5jb21wYXJlKHRoaXMudmVyc2lvbixjKT09PS0xfSxpc0xlc3NUaGFuT3JFcXVhbDpmdW5jdGlvbihjKXtyZXR1cm4gYi5jb21wYXJlKHRoaXMudmVyc2lvbixjKTw9MH0sZXF1YWxzOmZ1bmN0aW9uKGMpe3JldHVybiBiLmNvbXBhcmUodGhpcy52ZXJzaW9uLGMpPT09MH0sbWF0Y2g6ZnVuY3Rpb24oYyl7Yz1TdHJpbmcoYyk7cmV0dXJuIHRoaXMudmVyc2lvbi5zdWJzdHIoMCxjLmxlbmd0aCk9PT1jfSx0b0FycmF5OmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMuZ2V0TWFqb3IoKSx0aGlzLmdldE1pbm9yKCksdGhpcy5nZXRQYXRjaCgpLHRoaXMuZ2V0QnVpbGQoKSx0aGlzLmdldFJlbGVhc2UoKV19LGdldFNob3J0VmVyc2lvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNob3J0VmVyc2lvbn0sZ3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0dyZWF0ZXJUaGFuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0xlc3NUaGFuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ3RFcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzR3JlYXRlclRoYW5PckVxdWFsLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbHRFcTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzTGVzc1RoYW5PckVxdWFsLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KTtFeHQuYXBwbHkoYix7cmVsZWFzZVZhbHVlTWFwOntkZXY6LTYsYWxwaGE6LTUsYTotNSxiZXRhOi00LGI6LTQscmM6LTMsIiMiOi0yLHA6LTEscGw6LTF9LGdldENvbXBvbmVudFZhbHVlOmZ1bmN0aW9uKGMpe3JldHVybiAhYz8wOihpc05hTihjKT90aGlzLnJlbGVhc2VWYWx1ZU1hcFtjXXx8YzpwYXJzZUludChjLDEwKSl9LGNvbXBhcmU6ZnVuY3Rpb24oaCxnKXt2YXIgZCxlLGM7aD1uZXcgYihoKS50b0FycmF5KCk7Zz1uZXcgYihnKS50b0FycmF5KCk7Zm9yKGM9MDtjPE1hdGgubWF4KGgubGVuZ3RoLGcubGVuZ3RoKTtjKyspe2Q9dGhpcy5nZXRDb21wb25lbnRWYWx1ZShoW2NdKTtlPXRoaXMuZ2V0Q29tcG9uZW50VmFsdWUoZ1tjXSk7aWYoZDxlKXtyZXR1cm4gLTF9ZWxzZXtpZihkPmUpe3JldHVybiAxfX19cmV0dXJuIDB9fSk7RXh0LmFwcGx5KEV4dCx7dmVyc2lvbnM6e30sbGFzdFJlZ2lzdGVyZWRWZXJzaW9uOm51bGwsc2V0VmVyc2lvbjpmdW5jdGlvbihkLGMpe0V4dC52ZXJzaW9uc1tkXT1uZXcgYihjKTtFeHQubGFzdFJlZ2lzdGVyZWRWZXJzaW9uPUV4dC52ZXJzaW9uc1tkXTtyZXR1cm4gdGhpc30sZ2V0VmVyc2lvbjpmdW5jdGlvbihjKXtpZihjPT09dW5kZWZpbmVkKXtyZXR1cm4gRXh0Lmxhc3RSZWdpc3RlcmVkVmVyc2lvbn1yZXR1cm4gRXh0LnZlcnNpb25zW2NdfSxkZXByZWNhdGU6ZnVuY3Rpb24oYyxlLGcsZCl7aWYoYi5jb21wYXJlKEV4dC5nZXRWZXJzaW9uKGMpLGUpPDEpe2cuY2FsbChkKX19fSk7RXh0LnNldFZlcnNpb24oImNvcmUiLGEpfSgpKTtFeHQuU3RyaW5nPShmdW5jdGlvbigpe3ZhciBpPS9eW1x4MDlceDBhXHgwYlx4MGNceDBkXHgyMFx4YTBcdTE2ODBcdTE4MGVcdTIwMDBcdTIwMDFcdTIwMDJcdTIwMDNcdTIwMDRcdTIwMDVcdTIwMDZcdTIwMDdcdTIwMDhcdTIwMDlcdTIwMGFcdTIwMjhcdTIwMjlcdTIwMmZcdTIwNWZcdTMwMDBdK3xbXHgwOVx4MGFceDBiXHgwY1x4MGRceDIwXHhhMFx1MTY4MFx1MTgwZVx1MjAwMFx1MjAwMVx1MjAwMlx1MjAwM1x1MjAwNFx1MjAwNVx1MjAwNlx1MjAwN1x1MjAwOFx1MjAwOVx1MjAwYVx1MjAyOFx1MjAyOVx1MjAyZlx1MjA1Zlx1MzAwMF0rJC9nLG09LygnfFxcKS9nLGg9L1x7KFxkKylcfS9nLGI9LyhbLS4qKz9cXiR7fSgpfFxbXF1cL1xcXSkvZyxuPS9eXHMrfFxzKyQvZyxqPS9ccysvLGw9LyheW15hLXpdKnxbXlx3XSkvZ2ksZCxhLGcsYyxlPWZ1bmN0aW9uKHAsbyl7cmV0dXJuIGRbb119LGs9ZnVuY3Rpb24ocCxvKXtyZXR1cm4obyBpbiBhKT9hW29dOlN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoby5zdWJzdHIoMiksMTApKX07cmV0dXJue2NyZWF0ZVZhck5hbWU6ZnVuY3Rpb24obyl7cmV0dXJuIG8ucmVwbGFjZShsLCIiKX0saHRtbEVuY29kZTpmdW5jdGlvbihvKXtyZXR1cm4oIW8pP286U3RyaW5nKG8pLnJlcGxhY2UoZyxlKX0saHRtbERlY29kZTpmdW5jdGlvbihvKXtyZXR1cm4oIW8pP286U3RyaW5nKG8pLnJlcGxhY2UoYyxrKX0sYWRkQ2hhcmFjdGVyRW50aXRpZXM6ZnVuY3Rpb24ocCl7dmFyIG89W10scz1bXSxxLHI7Zm9yKHEgaW4gcCl7cj1wW3FdO2FbcV09cjtkW3JdPXE7by5wdXNoKHIpO3MucHVzaChxKX1nPW5ldyBSZWdFeHAoIigiK28uam9pbigifCIpKyIpIiwiZyIpO2M9bmV3IFJlZ0V4cCgiKCIrcy5qb2luKCJ8IikrInwmI1swLTldezEsNX07KSIsImciKX0scmVzZXRDaGFyYWN0ZXJFbnRpdGllczpmdW5jdGlvbigpe2Q9e307YT17fTt0aGlzLmFkZENoYXJhY3RlckVudGl0aWVzKHsiJmFtcDsiOiImIiwiJmd0OyI6Ij4iLCImbHQ7IjoiPCIsIiZxdW90OyI6JyInLCImIzM5OyI6IicifSl9LHVybEFwcGVuZDpmdW5jdGlvbihwLG8pe2lmKCFFeHQuaXNFbXB0eShvKSl7cmV0dXJuIHArKHAuaW5kZXhPZigiPyIpPT09LTE/Ij8iOiImIikrb31yZXR1cm4gcH0sdHJpbTpmdW5jdGlvbihvKXtyZXR1cm4gby5yZXBsYWNlKGksIiIpfSxjYXBpdGFsaXplOmZ1bmN0aW9uKG8pe3JldHVybiBvLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK28uc3Vic3RyKDEpfSx1bmNhcGl0YWxpemU6ZnVuY3Rpb24obyl7cmV0dXJuIG8uY2hhckF0KDApLnRvTG93ZXJDYXNlKCkrby5zdWJzdHIoMSl9LGVsbGlwc2lzOmZ1bmN0aW9uKHEsbyxyKXtpZihxJiZxLmxlbmd0aD5vKXtpZihyKXt2YXIgcz1xLnN1YnN0cigwLG8tMikscD1NYXRoLm1heChzLmxhc3RJbmRleE9mKCIgIikscy5sYXN0SW5kZXhPZigiLiIpLHMubGFzdEluZGV4T2YoIiEiKSxzLmxhc3RJbmRleE9mKCI/IikpO2lmKHAhPT0tMSYmcD49KG8tMTUpKXtyZXR1cm4gcy5zdWJzdHIoMCxwKSsiLi4uIn19cmV0dXJuIHEuc3Vic3RyKDAsby0zKSsiLi4uIn1yZXR1cm4gcX0sZXNjYXBlUmVnZXg6ZnVuY3Rpb24obyl7cmV0dXJuIG8ucmVwbGFjZShiLCJcXCQxIil9LGVzY2FwZTpmdW5jdGlvbihvKXtyZXR1cm4gby5yZXBsYWNlKG0sIlxcJDEiKX0sdG9nZ2xlOmZ1bmN0aW9uKHAscSxvKXtyZXR1cm4gcD09PXE/bzpxfSxsZWZ0UGFkOmZ1bmN0aW9uKHAscSxyKXt2YXIgbz1TdHJpbmcocCk7cj1yfHwiICI7d2hpbGUoby5sZW5ndGg8cSl7bz1yK299cmV0dXJuIG99LGZvcm1hdDpmdW5jdGlvbihwKXt2YXIgbz1FeHQuQXJyYXkudG9BcnJheShhcmd1bWVudHMsMSk7cmV0dXJuIHAucmVwbGFjZShoLGZ1bmN0aW9uKHEscil7cmV0dXJuIG9bcl19KX0scmVwZWF0OmZ1bmN0aW9uKHMscixwKXtmb3IodmFyIG89W10scT1yO3EtLTspe28ucHVzaChzKX1yZXR1cm4gby5qb2luKHB8fCIiKX0sc3BsaXRXb3JkczpmdW5jdGlvbihvKXtpZihvJiZ0eXBlb2Ygbz09InN0cmluZyIpe3JldHVybiBvLnJlcGxhY2UobiwiIikuc3BsaXQoail9cmV0dXJuIG98fFtdfX19KCkpO0V4dC5TdHJpbmcucmVzZXRDaGFyYWN0ZXJFbnRpdGllcygpO0V4dC5odG1sRW5jb2RlPUV4dC5TdHJpbmcuaHRtbEVuY29kZTtFeHQuaHRtbERlY29kZT1FeHQuU3RyaW5nLmh0bWxEZWNvZGU7RXh0LnVybEFwcGVuZD1FeHQuU3RyaW5nLnVybEFwcGVuZDtFeHQuTnVtYmVyPW5ldyBmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz0oMC45KS50b0ZpeGVkKCkhPT0iMSIsYT1NYXRoO0V4dC5hcHBseSh0aGlzLHtjb25zdHJhaW46ZnVuY3Rpb24oaCxnLGUpe3ZhciBkPXBhcnNlRmxvYXQoaCk7cmV0dXJuKGQ8Zyk/ZzooKGQ+ZSk/ZTpkKX0sc25hcDpmdW5jdGlvbihoLGUsZyxpKXt2YXIgZDtpZihoPT09dW5kZWZpbmVkfHxoPGcpe3JldHVybiBnfHwwfWlmKGUpe2Q9aCVlO2lmKGQhPT0wKXtoLT1kO2lmKGQqMj49ZSl7aCs9ZX1lbHNle2lmKGQqMjwtZSl7aC09ZX19fX1yZXR1cm4gYi5jb25zdHJhaW4oaCxnLGkpfSxzbmFwSW5SYW5nZTpmdW5jdGlvbihoLGQsZyxpKXt2YXIgZTtnPShnfHwwKTtpZihoPT09dW5kZWZpbmVkfHxoPGcpe3JldHVybiBnfWlmKGQmJihlPSgoaC1nKSVkKSkpe2gtPWU7ZSo9MjtpZihlPj1kKXtoKz1kfX1pZihpIT09dW5kZWZpbmVkKXtpZihoPihpPWIuc25hcEluUmFuZ2UoaSxkLGcpKSl7aD1pfX1yZXR1cm4gaH0sdG9GaXhlZDpjP2Z1bmN0aW9uKGcsZCl7ZD1kfHwwO3ZhciBlPWEucG93KDEwLGQpO3JldHVybihhLnJvdW5kKGcqZSkvZSkudG9GaXhlZChkKX06ZnVuY3Rpb24oZSxkKXtyZXR1cm4gZS50b0ZpeGVkKGQpfSxmcm9tOmZ1bmN0aW9uKGUsZCl7aWYoaXNGaW5pdGUoZSkpe2U9cGFyc2VGbG9hdChlKX1yZXR1cm4gIWlzTmFOKGUpP2U6ZH0scmFuZG9tSW50OmZ1bmN0aW9uKGUsZCl7cmV0dXJuIGEuZmxvb3IoYS5yYW5kb20oKSooZC1lKzEpK2UpfX0pO0V4dC5udW09ZnVuY3Rpb24oKXtyZXR1cm4gYi5mcm9tLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19OyhmdW5jdGlvbigpe3ZhciBnPUFycmF5LnByb3RvdHlwZSxvPWcuc2xpY2UscT0oZnVuY3Rpb24oKXt2YXIgQT1bXSxlLHo9MjA7aWYoIUEuc3BsaWNlKXtyZXR1cm4gZmFsc2V9d2hpbGUoei0tKXtBLnB1c2goIkEiKX1BLnNwbGljZSgxNSwwLCJGIiwiRiIsIkYiLCJGIiwiRiIsIkYiLCJGIiwiRiIsIkYiLCJGIiwiRiIsIkYiLCJGIiwiRiIsIkYiLCJGIiwiRiIsIkYiLCJGIiwiRiIsIkYiKTtlPUEubGVuZ3RoO0Euc3BsaWNlKDEzLDAsIlhYWCIpO2lmKGUrMSE9QS5sZW5ndGgpe3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0oKSksaj0iZm9yRWFjaCIgaW4gZyx1PSJtYXAiIGluIGcscD0iaW5kZXhPZiIgaW4gZyx5PSJldmVyeSIgaW4gZyxjPSJzb21lIiBpbiBnLGQ9ImZpbHRlciIgaW4gZyxuPShmdW5jdGlvbigpe3ZhciBlPVsxLDIsMyw0LDVdLnNvcnQoZnVuY3Rpb24oKXtyZXR1cm4gMH0pO3JldHVybiBlWzBdPT09MSYmZVsxXT09PTImJmVbMl09PT0zJiZlWzNdPT09NCYmZVs0XT09PTV9KCkpLGs9dHJ1ZSxhLHcsdCx2O3RyeXtpZih0eXBlb2YgZG9jdW1lbnQhPT0idW5kZWZpbmVkIil7by5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IikpfX1jYXRjaChzKXtrPWZhbHNlfWZ1bmN0aW9uIG0oeixlKXtyZXR1cm4oZTwwKT9NYXRoLm1heCgwLHoubGVuZ3RoK2UpOk1hdGgubWluKHoubGVuZ3RoLGUpfWZ1bmN0aW9uIHgoRyxGLHosSil7dmFyIEs9Sj9KLmxlbmd0aDowLEI9Ry5sZW5ndGgsSD1tKEcsRiksRSxJLEEsZSxDLEQ7aWYoSD09PUIpe2lmKEspe0cucHVzaC5hcHBseShHLEopfX1lbHNle0U9TWF0aC5taW4oeixCLUgpO0k9SCtFO0E9SStLLUU7ZT1CLUk7Qz1CLUU7aWYoQTxJKXtmb3IoRD0wO0Q8ZTsrK0Qpe0dbQStEXT1HW0krRF19fWVsc2V7aWYoQT5JKXtmb3IoRD1lO0QtLTspe0dbQStEXT1HW0krRF19fX1pZihLJiZIPT09Qyl7Ry5sZW5ndGg9QztHLnB1c2guYXBwbHkoRyxKKX1lbHNle0cubGVuZ3RoPUMrSztmb3IoRD0wO0Q8SzsrK0Qpe0dbSCtEXT1KW0RdfX19cmV0dXJuIEd9ZnVuY3Rpb24gaShCLGUsQSx6KXtpZih6JiZ6Lmxlbmd0aCl7aWYoZTxCLmxlbmd0aCl7Qi5zcGxpY2UuYXBwbHkoQixbZSxBXS5jb25jYXQoeikpfWVsc2V7Qi5wdXNoLmFwcGx5KEIseil9fWVsc2V7Qi5zcGxpY2UoZSxBKX1yZXR1cm4gQn1mdW5jdGlvbiBiKEEsZSx6KXtyZXR1cm4geChBLGUseil9ZnVuY3Rpb24gcihBLGUseil7QS5zcGxpY2UoZSx6KTtyZXR1cm4gQX1mdW5jdGlvbiBsKEMsZSxBKXt2YXIgQj1tKEMsZSksej1DLnNsaWNlKGUsbShDLEIrQSkpO2lmKGFyZ3VtZW50cy5sZW5ndGg8NCl7eChDLEIsQSl9ZWxzZXt4KEMsQixBLG8uY2FsbChhcmd1bWVudHMsMykpfXJldHVybiB6fWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGUuc3BsaWNlLmFwcGx5KGUsby5jYWxsKGFyZ3VtZW50cywxKSl9dz1xP3I6Yjt0PXE/aTp4O3Y9cT9oOmw7YT1FeHQuQXJyYXk9e2VhY2g6ZnVuY3Rpb24oRCxCLEEsZSl7RD1hLmZyb20oRCk7dmFyIHosQz1ELmxlbmd0aDtpZihlIT09dHJ1ZSl7Zm9yKHo9MDt6PEM7eisrKXtpZihCLmNhbGwoQXx8RFt6XSxEW3pdLHosRCk9PT1mYWxzZSl7cmV0dXJuIHp9fX1lbHNle2Zvcih6PUMtMTt6Pi0xO3otLSl7aWYoQi5jYWxsKEF8fERbel0sRFt6XSx6LEQpPT09ZmFsc2Upe3JldHVybiB6fX19cmV0dXJuIHRydWV9LGZvckVhY2g6aj9mdW5jdGlvbihBLHosZSl7cmV0dXJuIEEuZm9yRWFjaCh6LGUpfTpmdW5jdGlvbihDLEEseil7dmFyIGU9MCxCPUMubGVuZ3RoO2Zvcig7ZTxCO2UrKyl7QS5jYWxsKHosQ1tlXSxlLEMpfX0saW5kZXhPZjpwP2Z1bmN0aW9uKEEsZSx6KXtyZXR1cm4gQS5pbmRleE9mKGUseil9OmZ1bmN0aW9uKEMsQSxCKXt2YXIgZSx6PUMubGVuZ3RoO2ZvcihlPShCPDApP01hdGgubWF4KDAseitCKTpCfHwwO2U8ejtlKyspe2lmKENbZV09PT1BKXtyZXR1cm4gZX19cmV0dXJuIC0xfSxjb250YWluczpwP2Z1bmN0aW9uKHosZSl7cmV0dXJuIHouaW5kZXhPZihlKSE9PS0xfTpmdW5jdGlvbihCLEEpe3ZhciBlLHo7Zm9yKGU9MCx6PUIubGVuZ3RoO2U8ejtlKyspe2lmKEJbZV09PT1BKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfSx0b0FycmF5OmZ1bmN0aW9uKEEsQyxlKXtpZighQXx8IUEubGVuZ3RoKXtyZXR1cm5bXX1pZih0eXBlb2YgQT09PSJzdHJpbmciKXtBPUEuc3BsaXQoIiIpfWlmKGspe3JldHVybiBvLmNhbGwoQSxDfHwwLGV8fEEubGVuZ3RoKX12YXIgQj1bXSx6O0M9Q3x8MDtlPWU/KChlPDApP0EubGVuZ3RoK2U6ZSk6QS5sZW5ndGg7Zm9yKHo9Qzt6PGU7eisrKXtCLnB1c2goQVt6XSl9cmV0dXJuIEJ9LHBsdWNrOmZ1bmN0aW9uKEQsZSl7dmFyIHo9W10sQSxDLEI7Zm9yKEE9MCxDPUQubGVuZ3RoO0E8QztBKyspe0I9RFtBXTt6LnB1c2goQltlXSl9cmV0dXJuIHp9LG1hcDp1P2Z1bmN0aW9uKEEseixlKXtyZXR1cm4gQS5tYXAoeixlKX06ZnVuY3Rpb24oRCxDLEIpe3ZhciBBPVtdLHo9MCxlPUQubGVuZ3RoO2Zvcig7ejxlO3orKyl7QVt6XT1DLmNhbGwoQixEW3pdLHosRCl9cmV0dXJuIEF9LGV2ZXJ5Onk/ZnVuY3Rpb24oQSx6LGUpe3JldHVybiBBLmV2ZXJ5KHosZSl9OmZ1bmN0aW9uKEMsQSx6KXt2YXIgZT0wLEI9Qy5sZW5ndGg7Zm9yKDtlPEI7KytlKXtpZighQS5jYWxsKHosQ1tlXSxlLEMpKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfSxzb21lOmM/ZnVuY3Rpb24oQSx6LGUpe3JldHVybiBBLnNvbWUoeixlKX06ZnVuY3Rpb24oQyxBLHope3ZhciBlPTAsQj1DLmxlbmd0aDtmb3IoO2U8QjsrK2Upe2lmKEEuY2FsbCh6LENbZV0sZSxDKSl7cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX0sY2xlYW46ZnVuY3Rpb24oQyl7dmFyIHo9W10sZT0wLEI9Qy5sZW5ndGgsQTtmb3IoO2U8QjtlKyspe0E9Q1tlXTtpZighRXh0LmlzRW1wdHkoQSkpe3oucHVzaChBKX19cmV0dXJuIHp9LHVuaXF1ZTpmdW5jdGlvbihDKXt2YXIgQj1bXSxlPTAsQT1DLmxlbmd0aCx6O2Zvcig7ZTxBO2UrKyl7ej1DW2VdO2lmKGEuaW5kZXhPZihCLHopPT09LTEpe0IucHVzaCh6KX19cmV0dXJuIEJ9LGZpbHRlcjpkP2Z1bmN0aW9uKEEseixlKXtyZXR1cm4gQS5maWx0ZXIoeixlKX06ZnVuY3Rpb24oRCxCLEEpe3ZhciB6PVtdLGU9MCxDPUQubGVuZ3RoO2Zvcig7ZTxDO2UrKyl7aWYoQi5jYWxsKEEsRFtlXSxlLEQpKXt6LnB1c2goRFtlXSl9fXJldHVybiB6fSxmcm9tOmZ1bmN0aW9uKEEseil7aWYoQT09PXVuZGVmaW5lZHx8QT09PW51bGwpe3JldHVybltdfWlmKEV4dC5pc0FycmF5KEEpKXtyZXR1cm4oeik/by5jYWxsKEEpOkF9dmFyIGU9dHlwZW9mIEE7aWYoQSYmQS5sZW5ndGghPT11bmRlZmluZWQmJmUhPT0ic3RyaW5nIiYmKGUhPT0iZnVuY3Rpb24ifHwhQS5hcHBseSkpe3JldHVybiBhLnRvQXJyYXkoQSl9cmV0dXJuW0FdfSxyZW1vdmU6ZnVuY3Rpb24oQSx6KXt2YXIgZT1hLmluZGV4T2YoQSx6KTtpZihlIT09LTEpe3coQSxlLDEpfXJldHVybiBBfSxpbmNsdWRlOmZ1bmN0aW9uKHosZSl7aWYoIWEuY29udGFpbnMoeixlKSl7ei5wdXNoKGUpfX0sY2xvbmU6ZnVuY3Rpb24oZSl7cmV0dXJuIG8uY2FsbChlKX0sbWVyZ2U6ZnVuY3Rpb24oKXt2YXIgZT1vLmNhbGwoYXJndW1lbnRzKSxCPVtdLHosQTtmb3Ioej0wLEE9ZS5sZW5ndGg7ejxBO3orKyl7Qj1CLmNvbmNhdChlW3pdKX1yZXR1cm4gYS51bmlxdWUoQil9LGludGVyc2VjdDpmdW5jdGlvbigpe3ZhciBlPVtdLEE9by5jYWxsKGFyZ3VtZW50cyksTCxKLEYsSSxNLEIseixILEssQyxHLEUsRDtpZighQS5sZW5ndGgpe3JldHVybiBlfUw9QS5sZW5ndGg7Zm9yKEc9TT0wO0c8TDtHKyspe0I9QVtHXTtpZighSXx8Qi5sZW5ndGg8SS5sZW5ndGgpe0k9QjtNPUd9fUk9YS51bmlxdWUoSSk7dyhBLE0sMSk7ej1JLmxlbmd0aDtMPUEubGVuZ3RoO2ZvcihHPTA7Rzx6O0crKyl7SD1JW0ddO0M9MDtmb3IoRT0wO0U8TDtFKyspe0o9QVtFXTtGPUoubGVuZ3RoO2ZvcihEPTA7RDxGO0QrKyl7Sz1KW0RdO2lmKEg9PT1LKXtDKys7YnJlYWt9fX1pZihDPT09TCl7ZS5wdXNoKEgpfX1yZXR1cm4gZX0sZGlmZmVyZW5jZTpmdW5jdGlvbih6LGUpe3ZhciBFPW8uY2FsbCh6KSxDPUUubGVuZ3RoLEIsQSxEO2ZvcihCPTAsRD1lLmxlbmd0aDtCPEQ7QisrKXtmb3IoQT0wO0E8QztBKyspe2lmKEVbQV09PT1lW0JdKXt3KEUsQSwxKTtBLS07Qy0tfX19cmV0dXJuIEV9LHNsaWNlOihbMSwyXS5zbGljZSgxLHVuZGVmaW5lZCkubGVuZ3RoP2Z1bmN0aW9uKEEseixlKXtyZXR1cm4gby5jYWxsKEEseixlKX06ZnVuY3Rpb24oQSx6LGUpe2lmKHR5cGVvZiB6PT09InVuZGVmaW5lZCIpe3JldHVybiBvLmNhbGwoQSl9aWYodHlwZW9mIGU9PT0idW5kZWZpbmVkIil7cmV0dXJuIG8uY2FsbChBLHopfXJldHVybiBvLmNhbGwoQSx6LGUpfSksc29ydDpuP2Z1bmN0aW9uKHosZSl7aWYoZSl7cmV0dXJuIHouc29ydChlKX1lbHNle3JldHVybiB6LnNvcnQoKX19OmZ1bmN0aW9uKEYsRSl7dmFyIEM9Ri5sZW5ndGgsQj0wLEQsZSxBLHo7Zm9yKDtCPEM7QisrKXtBPUI7Zm9yKGU9QisxO2U8QztlKyspe2lmKEUpe0Q9RShGW2VdLEZbQV0pO2lmKEQ8MCl7QT1lfX1lbHNle2lmKEZbZV08RltBXSl7QT1lfX19aWYoQSE9PUIpe3o9RltCXTtGW0JdPUZbQV07RltBXT16fX1yZXR1cm4gRn0sZmxhdHRlbjpmdW5jdGlvbihBKXt2YXIgej1bXTtmdW5jdGlvbiBlKEIpe3ZhciBELEUsQztmb3IoRD0wLEU9Qi5sZW5ndGg7RDxFO0QrKyl7Qz1CW0RdO2lmKEV4dC5pc0FycmF5KEMpKXtlKEMpfWVsc2V7ei5wdXNoKEMpfX1yZXR1cm4gen1yZXR1cm4gZShBKX0sbWluOmZ1bmN0aW9uKEQsQyl7dmFyIHo9RFswXSxlLEIsQTtmb3IoZT0wLEI9RC5sZW5ndGg7ZTxCO2UrKyl7QT1EW2VdO2lmKEMpe2lmKEMoeixBKT09PTEpe3o9QX19ZWxzZXtpZihBPHope3o9QX19fXJldHVybiB6fSxtYXg6ZnVuY3Rpb24oRCxDKXt2YXIgZT1EWzBdLHosQixBO2Zvcih6PTAsQj1ELmxlbmd0aDt6PEI7eisrKXtBPURbel07aWYoQyl7aWYoQyhlLEEpPT09LTEpe2U9QX19ZWxzZXtpZihBPmUpe2U9QX19fXJldHVybiBlfSxtZWFuOmZ1bmN0aW9uKGUpe3JldHVybiBlLmxlbmd0aD4wP2Euc3VtKGUpL2UubGVuZ3RoOnVuZGVmaW5lZH0sc3VtOmZ1bmN0aW9uKEMpe3ZhciB6PTAsZSxCLEE7Zm9yKGU9MCxCPUMubGVuZ3RoO2U8QjtlKyspe0E9Q1tlXTt6Kz1BfXJldHVybiB6fSx0b01hcDpmdW5jdGlvbihDLGUsQSl7dmFyIEI9e30sej1DLmxlbmd0aDtpZighZSl7d2hpbGUoei0tKXtCW0Nbel1dPXorMX19ZWxzZXtpZih0eXBlb2YgZT09InN0cmluZyIpe3doaWxlKHotLSl7QltDW3pdW2VdXT16KzF9fWVsc2V7d2hpbGUoei0tKXtCW2UuY2FsbChBLENbel0pXT16KzF9fX1yZXR1cm4gQn0sZXJhc2U6dyxpbnNlcnQ6ZnVuY3Rpb24oQSx6LGUpe3JldHVybiB0KEEseiwwLGUpfSxyZXBsYWNlOnQsc3BsaWNlOnYscHVzaDpmdW5jdGlvbihCKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoLEE9MSx6O2lmKEI9PT11bmRlZmluZWQpe0I9W119ZWxzZXtpZighRXh0LmlzQXJyYXkoQikpe0I9W0JdfX1mb3IoO0E8ZTtBKyspe3o9YXJndW1lbnRzW0FdO0FycmF5LnByb3RvdHlwZS5wdXNoW0V4dC5pc0FycmF5KHopPyJhcHBseSI6ImNhbGwiXShCLHopfXJldHVybiBCfX07RXh0LmVhY2g9YS5lYWNoO2EudW5pb249YS5tZXJnZTtFeHQubWluPWEubWluO0V4dC5tYXg9YS5tYXg7RXh0LnN1bT1hLnN1bTtFeHQubWVhbj1hLm1lYW47RXh0LmZsYXR0ZW49YS5mbGF0dGVuO0V4dC5jbGVhbj1hLmNsZWFuO0V4dC51bmlxdWU9YS51bmlxdWU7RXh0LnBsdWNrPWEucGx1Y2s7RXh0LnRvQXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gYS50b0FycmF5LmFwcGx5KGEsYXJndW1lbnRzKX19KCkpO0V4dC5GdW5jdGlvbj17ZmxleFNldHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oZCxjKXt2YXIgZSxnO2lmKGQ9PT1udWxsKXtyZXR1cm4gdGhpc31pZih0eXBlb2YgZCE9PSJzdHJpbmciKXtmb3IoZSBpbiBkKXtpZihkLmhhc093blByb3BlcnR5KGUpKXthLmNhbGwodGhpcyxlLGRbZV0pfX1pZihFeHQuZW51bWVyYWJsZXMpe2ZvcihnPUV4dC5lbnVtZXJhYmxlcy5sZW5ndGg7Zy0tOyl7ZT1FeHQuZW51bWVyYWJsZXNbZ107aWYoZC5oYXNPd25Qcm9wZXJ0eShlKSl7YS5jYWxsKHRoaXMsZSxkW2VdKX19fX1lbHNle2EuY2FsbCh0aGlzLGQsYyl9cmV0dXJuIHRoaXN9fSxiaW5kOmZ1bmN0aW9uKGQsYyxiLGEpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0yKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZC5hcHBseShjLGFyZ3VtZW50cyl9fXZhciBnPWQsZT1BcnJheS5wcm90b3R5cGUuc2xpY2U7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGg9Ynx8YXJndW1lbnRzO2lmKGE9PT10cnVlKXtoPWUuY2FsbChhcmd1bWVudHMsMCk7aD1oLmNvbmNhdChiKX1lbHNle2lmKHR5cGVvZiBhPT0ibnVtYmVyIil7aD1lLmNhbGwoYXJndW1lbnRzLDApO0V4dC5BcnJheS5pbnNlcnQoaCxhLGIpfX1yZXR1cm4gZy5hcHBseShjfHxFeHQuZ2xvYmFsLGgpfX0scGFzczpmdW5jdGlvbihjLGEsYil7aWYoIUV4dC5pc0FycmF5KGEpKXtpZihFeHQuaXNJdGVyYWJsZShhKSl7YT1FeHQuQXJyYXkuY2xvbmUoYSl9ZWxzZXthPWEhPT11bmRlZmluZWQ/W2FdOltdfX1yZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1bXS5jb25jYXQoYSk7ZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKTtyZXR1cm4gYy5hcHBseShifHx0aGlzLGQpfX0sYWxpYXM6ZnVuY3Rpb24oYixhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYlthXS5hcHBseShiLGFyZ3VtZW50cyl9fSxjbG9uZTpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxjcmVhdGVJbnRlcmNlcHRvcjpmdW5jdGlvbihkLGMsYixhKXt2YXIgZT1kO2lmKCFFeHQuaXNGdW5jdGlvbihjKSl7cmV0dXJuIGR9ZWxzZXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaD10aGlzLGc9YXJndW1lbnRzO2MudGFyZ2V0PWg7Yy5tZXRob2Q9ZDtyZXR1cm4oYy5hcHBseShifHxofHxFeHQuZ2xvYmFsLGcpIT09ZmFsc2UpP2QuYXBwbHkoaHx8RXh0Lmdsb2JhbCxnKTphfHxudWxsfX19LGNyZWF0ZURlbGF5ZWQ6ZnVuY3Rpb24oZSxjLGQsYixhKXtpZihkfHxiKXtlPUV4dC5GdW5jdGlvbi5iaW5kKGUsZCxiLGEpfXJldHVybiBmdW5jdGlvbigpe3ZhciBoPXRoaXMsZz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmFwcGx5KGgsZyl9LGMpfX0sZGVmZXI6ZnVuY3Rpb24oZSxjLGQsYixhKXtlPUV4dC5GdW5jdGlvbi5iaW5kKGUsZCxiLGEpO2lmKGM+MCl7cmV0dXJuIHNldFRpbWVvdXQoRXh0LnN1cHBvcnRzLlRpbWVvdXRBY3R1YWxMYXRlbmVzcz9mdW5jdGlvbigpe2UoKX06ZSxjKX1lKCk7cmV0dXJuIDB9LGNyZWF0ZVNlcXVlbmNlOmZ1bmN0aW9uKGIsYyxhKXtpZighYyl7cmV0dXJuIGJ9ZWxzZXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1iLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjLmFwcGx5KGF8fHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZH19fSxjcmVhdGVCdWZmZXJlZDpmdW5jdGlvbihlLGIsZCxjKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaD1jfHxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCksZz1kfHx0aGlzO2lmKGEpe2NsZWFyVGltZW91dChhKX1hPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLmFwcGx5KGcsaCl9LGIpfX0sY3JlYXRlVGhyb3R0bGVkOmZ1bmN0aW9uKGUsYixkKXt2YXIgZyxhLGMsaSxoPWZ1bmN0aW9uKCl7ZS5hcHBseShkfHx0aGlzLGMpO2c9bmV3IERhdGUoKS5nZXRUaW1lKCl9O3JldHVybiBmdW5jdGlvbigpe2E9bmV3IERhdGUoKS5nZXRUaW1lKCktZztjPWFyZ3VtZW50cztjbGVhclRpbWVvdXQoaSk7aWYoIWd8fChhPj1iKSl7aCgpfWVsc2V7aT1zZXRUaW1lb3V0KGgsYi1hKX19fSxpbnRlcmNlcHRCZWZvcmU6ZnVuY3Rpb24oYixhLGQsYyl7dmFyIGU9YlthXXx8RXh0LmVtcHR5Rm47cmV0dXJuKGJbYV09ZnVuY3Rpb24oKXt2YXIgZz1kLmFwcGx5KGN8fHRoaXMsYXJndW1lbnRzKTtlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZ30pfSxpbnRlcmNlcHRBZnRlcjpmdW5jdGlvbihiLGEsZCxjKXt2YXIgZT1iW2FdfHxFeHQuZW1wdHlGbjtyZXR1cm4oYlthXT1mdW5jdGlvbigpe2UuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBkLmFwcGx5KGN8fHRoaXMsYXJndW1lbnRzKX0pfX07RXh0LmRlZmVyPUV4dC5GdW5jdGlvbi5hbGlhcyhFeHQuRnVuY3Rpb24sImRlZmVyIik7RXh0LnBhc3M9RXh0LkZ1bmN0aW9uLmFsaWFzKEV4dC5GdW5jdGlvbiwicGFzcyIpO0V4dC5iaW5kPUV4dC5GdW5jdGlvbi5hbGlhcyhFeHQuRnVuY3Rpb24sImJpbmQiKTsoZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbigpe30sYj1FeHQuT2JqZWN0PXtjaGFpbjpmdW5jdGlvbihkKXthLnByb3RvdHlwZT1kO3ZhciBjPW5ldyBhKCk7YS5wcm90b3R5cGU9bnVsbDtyZXR1cm4gY30sdG9RdWVyeU9iamVjdHM6ZnVuY3Rpb24oZSxrLGQpe3ZhciBjPWIudG9RdWVyeU9iamVjdHMsaj1bXSxnLGg7aWYoRXh0LmlzQXJyYXkoaykpe2ZvcihnPTAsaD1rLmxlbmd0aDtnPGg7ZysrKXtpZihkKXtqPWouY29uY2F0KGMoZSsiWyIrZysiXSIsa1tnXSx0cnVlKSl9ZWxzZXtqLnB1c2goe25hbWU6ZSx2YWx1ZTprW2ddfSl9fX1lbHNle2lmKEV4dC5pc09iamVjdChrKSl7Zm9yKGcgaW4gayl7aWYoay5oYXNPd25Qcm9wZXJ0eShnKSl7aWYoZCl7aj1qLmNvbmNhdChjKGUrIlsiK2crIl0iLGtbZ10sdHJ1ZSkpfWVsc2V7ai5wdXNoKHtuYW1lOmUsdmFsdWU6a1tnXX0pfX19fWVsc2V7ai5wdXNoKHtuYW1lOmUsdmFsdWU6a30pfX1yZXR1cm4gan0sdG9RdWVyeVN0cmluZzpmdW5jdGlvbihnLGQpe3ZhciBoPVtdLGU9W10sbCxrLG0sYyxuO2ZvcihsIGluIGcpe2lmKGcuaGFzT3duUHJvcGVydHkobCkpe2g9aC5jb25jYXQoYi50b1F1ZXJ5T2JqZWN0cyhsLGdbbF0sZCkpfX1mb3Ioaz0wLG09aC5sZW5ndGg7azxtO2srKyl7Yz1oW2tdO249Yy52YWx1ZTtpZihFeHQuaXNFbXB0eShuKSl7bj0iIn1lbHNle2lmKEV4dC5pc0RhdGUobikpe249RXh0LkRhdGUudG9TdHJpbmcobil9fWUucHVzaChlbmNvZGVVUklDb21wb25lbnQoYy5uYW1lKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhuKSkpfXJldHVybiBlLmpvaW4oIiYiKX0sZnJvbVF1ZXJ5U3RyaW5nOmZ1bmN0aW9uKGQscil7dmFyIG09ZC5yZXBsYWNlKC9eXD8vLCIiKS5zcGxpdCgiJiIpLHU9e30scyxrLHcsbixxLGcsbyxwLGMsaCx0LGwsdixlO2ZvcihxPTAsZz1tLmxlbmd0aDtxPGc7cSsrKXtvPW1bcV07aWYoby5sZW5ndGg+MCl7az1vLnNwbGl0KCI9Iik7dz1kZWNvZGVVUklDb21wb25lbnQoa1swXSk7bj0oa1sxXSE9PXVuZGVmaW5lZCk/ZGVjb2RlVVJJQ29tcG9uZW50KGtbMV0pOiIiO2lmKCFyKXtpZih1Lmhhc093blByb3BlcnR5KHcpKXtpZighRXh0LmlzQXJyYXkodVt3XSkpe3Vbd109W3Vbd11dfXVbd10ucHVzaChuKX1lbHNle3Vbd109bn19ZWxzZXtoPXcubWF0Y2goLyhcWyk6PyhbXlxdXSopXF0vZyk7dD13Lm1hdGNoKC9eKFteXFtdKykvKTt3PXRbMF07bD1bXTtpZihoPT09bnVsbCl7dVt3XT1uO2NvbnRpbnVlfWZvcihwPTAsYz1oLmxlbmd0aDtwPGM7cCsrKXt2PWhbcF07dj0odi5sZW5ndGg9PT0yKT8iIjp2LnN1YnN0cmluZygxLHYubGVuZ3RoLTEpO2wucHVzaCh2KX1sLnVuc2hpZnQodyk7cz11O2ZvcihwPTAsYz1sLmxlbmd0aDtwPGM7cCsrKXt2PWxbcF07aWYocD09PWMtMSl7aWYoRXh0LmlzQXJyYXkocykmJnY9PT0iIil7cy5wdXNoKG4pfWVsc2V7c1t2XT1ufX1lbHNle2lmKHNbdl09PT11bmRlZmluZWR8fHR5cGVvZiBzW3ZdPT09InN0cmluZyIpe2U9bFtwKzFdO3Nbdl09KEV4dC5pc051bWVyaWMoZSl8fGU9PT0iIik/W106e319cz1zW3ZdfX19fX1yZXR1cm4gdX0sZWFjaDpmdW5jdGlvbihjLGUsZCl7Zm9yKHZhciBnIGluIGMpe2lmKGMuaGFzT3duUHJvcGVydHkoZykpe2lmKGUuY2FsbChkfHxjLGcsY1tnXSxjKT09PWZhbHNlKXtyZXR1cm59fX19LG1lcmdlOmZ1bmN0aW9uKGspe3ZhciBoPTEsaj1hcmd1bWVudHMubGVuZ3RoLGM9Yi5tZXJnZSxlPUV4dC5jbG9uZSxnLG0sbCxkO2Zvcig7aDxqO2grKyl7Zz1hcmd1bWVudHNbaF07Zm9yKG0gaW4gZyl7bD1nW21dO2lmKGwmJmwuY29uc3RydWN0b3I9PT1PYmplY3Qpe2Q9a1ttXTtpZihkJiZkLmNvbnN0cnVjdG9yPT09T2JqZWN0KXtjKGQsbCl9ZWxzZXtrW21dPWUobCl9fWVsc2V7a1ttXT1sfX19cmV0dXJuIGt9LG1lcmdlSWY6ZnVuY3Rpb24oYyl7dmFyIGg9MSxqPWFyZ3VtZW50cy5sZW5ndGgsZT1FeHQuY2xvbmUsZCxnLGs7Zm9yKDtoPGo7aCsrKXtkPWFyZ3VtZW50c1toXTtmb3IoZyBpbiBkKXtpZighKGcgaW4gYykpe2s9ZFtnXTtpZihrJiZrLmNvbnN0cnVjdG9yPT09T2JqZWN0KXtjW2ddPWUoayl9ZWxzZXtjW2ddPWt9fX19cmV0dXJuIGN9LGdldEtleTpmdW5jdGlvbihjLGUpe2Zvcih2YXIgZCBpbiBjKXtpZihjLmhhc093blByb3BlcnR5KGQpJiZjW2RdPT09ZSl7cmV0dXJuIGR9fXJldHVybiBudWxsfSxnZXRWYWx1ZXM6ZnVuY3Rpb24oZCl7dmFyIGM9W10sZTtmb3IoZSBpbiBkKXtpZihkLmhhc093blByb3BlcnR5KGUpKXtjLnB1c2goZFtlXSl9fXJldHVybiBjfSxnZXRLZXlzOih0eXBlb2YgT2JqZWN0LmtleXM9PSJmdW5jdGlvbiIpP2Z1bmN0aW9uKGMpe2lmKCFjKXtyZXR1cm5bXX1yZXR1cm4gT2JqZWN0LmtleXMoYyl9OmZ1bmN0aW9uKGMpe3ZhciBkPVtdLGU7Zm9yKGUgaW4gYyl7aWYoYy5oYXNPd25Qcm9wZXJ0eShlKSl7ZC5wdXNoKGUpfX1yZXR1cm4gZH0sZ2V0U2l6ZTpmdW5jdGlvbihjKXt2YXIgZD0wLGU7Zm9yKGUgaW4gYyl7aWYoYy5oYXNPd25Qcm9wZXJ0eShlKSl7ZCsrfX1yZXR1cm4gZH0sY2xhc3NpZnk6ZnVuY3Rpb24oZyl7dmFyIGU9ZyxpPVtdLGQ9e30sYz1mdW5jdGlvbigpe3ZhciBrPTAsbD1pLmxlbmd0aCxtO2Zvcig7azxsO2srKyl7bT1pW2tdO3RoaXNbbV09bmV3IGRbbV0oKX19LGgsajtmb3IoaCBpbiBnKXtpZihnLmhhc093blByb3BlcnR5KGgpKXtqPWdbaF07aWYoaiYmai5jb25zdHJ1Y3Rvcj09PU9iamVjdCl7aS5wdXNoKGgpO2RbaF09Yi5jbGFzc2lmeShqKX19fWMucHJvdG90eXBlPWU7cmV0dXJuIGN9fTtFeHQubWVyZ2U9RXh0Lk9iamVjdC5tZXJnZTtFeHQubWVyZ2VJZj1FeHQuT2JqZWN0Lm1lcmdlSWY7RXh0LnVybEVuY29kZT1mdW5jdGlvbigpe3ZhciBjPUV4dC5BcnJheS5mcm9tKGFyZ3VtZW50cyksZD0iIjtpZigodHlwZW9mIGNbMV09PT0ic3RyaW5nIikpe2Q9Y1sxXSsiJiI7Y1sxXT1mYWxzZX1yZXR1cm4gZCtiLnRvUXVlcnlTdHJpbmcuYXBwbHkoYixjKX07RXh0LnVybERlY29kZT1mdW5jdGlvbigpe3JldHVybiBiLmZyb21RdWVyeVN0cmluZy5hcHBseShiLGFyZ3VtZW50cyl9fSgpKTsoZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGQpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZC5yZXBsYWNlKC9ceyhcZCspXH0vZyxmdW5jdGlvbihlLGcpe3JldHVybiBjW2ddfSl9RXh0LkRhdGU9e25vdzpEYXRlLm5vd3x8ZnVuY3Rpb24oKXtyZXR1cm4gK25ldyBEYXRlKCl9LHRvU3RyaW5nOmZ1bmN0aW9uKGMpe3ZhciBkPUV4dC5TdHJpbmcubGVmdFBhZDtyZXR1cm4gYy5nZXRGdWxsWWVhcigpKyItIitkKGMuZ2V0TW9udGgoKSsxLDIsIjAiKSsiLSIrZChjLmdldERhdGUoKSwyLCIwIikrIlQiK2QoYy5nZXRIb3VycygpLDIsIjAiKSsiOiIrZChjLmdldE1pbnV0ZXMoKSwyLCIwIikrIjoiK2QoYy5nZXRTZWNvbmRzKCksMiwiMCIpfSxnZXRFbGFwc2VkOmZ1bmN0aW9uKGQsYyl7cmV0dXJuIE1hdGguYWJzKGQtKGN8fG5ldyBEYXRlKCkpKX0sdXNlU3RyaWN0OmZhbHNlLGZvcm1hdENvZGVUb1JlZ2V4OmZ1bmN0aW9uKGQsYyl7dmFyIGU9YS5wYXJzZUNvZGVzW2RdO2lmKGUpe2U9dHlwZW9mIGU9PSJmdW5jdGlvbiI/ZSgpOmU7YS5wYXJzZUNvZGVzW2RdPWV9cmV0dXJuIGU/RXh0LmFwcGx5SWYoe2M6ZS5jP2IoZS5jLGN8fCJ7MH0iKTplLmN9LGUpOntnOjAsYzpudWxsLHM6RXh0LlN0cmluZy5lc2NhcGVSZWdleChkKX19LHBhcnNlRnVuY3Rpb25zOntNUzpmdW5jdGlvbihkLGMpe3ZhciBlPW5ldyBSZWdFeHAoIlxcL0RhdGVcXCgoWy0rXSk/KFxcZCspKD86WystXVxcZHs0fSk/XFwpXFwvIiksZz0oZHx8IiIpLm1hdGNoKGUpO3JldHVybiBnP25ldyBEYXRlKCgoZ1sxXXx8IiIpK2dbMl0pKjEpOm51bGx9fSxwYXJzZVJlZ2V4ZXM6W10sZm9ybWF0RnVuY3Rpb25zOntNUzpmdW5jdGlvbigpe3JldHVybiJcXC9EYXRlKCIrdGhpcy5nZXRUaW1lKCkrIilcXC8ifX0seTJrWWVhcjo1MCxNSUxMSToibXMiLFNFQ09ORDoicyIsTUlOVVRFOiJtaSIsSE9VUjoiaCIsREFZOiJkIixNT05USDoibW8iLFlFQVI6InkiLGRlZmF1bHRzOnt9LGRheU5hbWVzOlsiU3VuZGF5IiwiTW9uZGF5IiwiVHVlc2RheSIsIldlZG5lc2RheSIsIlRodXJzZGF5IiwiRnJpZGF5IiwiU2F0dXJkYXkiXSxtb250aE5hbWVzOlsiSmFudWFyeSIsIkZlYnJ1YXJ5IiwiTWFyY2giLCJBcHJpbCIsIk1heSIsIkp1bmUiLCJKdWx5IiwiQXVndXN0IiwiU2VwdGVtYmVyIiwiT2N0b2JlciIsIk5vdmVtYmVyIiwiRGVjZW1iZXIiXSxtb250aE51bWJlcnM6e0phbnVhcnk6MCxKYW46MCxGZWJydWFyeToxLEZlYjoxLE1hcmNoOjIsTWFyOjIsQXByaWw6MyxBcHI6MyxNYXk6NCxKdW5lOjUsSnVuOjUsSnVseTo2LEp1bDo2LEF1Z3VzdDo3LEF1Zzo3LFNlcHRlbWJlcjo4LFNlcDo4LE9jdG9iZXI6OSxPY3Q6OSxOb3ZlbWJlcjoxMCxOb3Y6MTAsRGVjZW1iZXI6MTEsRGVjOjExfSxkZWZhdWx0Rm9ybWF0OiJtL2QvWSIsZ2V0U2hvcnRNb250aE5hbWU6ZnVuY3Rpb24oYyl7cmV0dXJuIEV4dC5EYXRlLm1vbnRoTmFtZXNbY10uc3Vic3RyaW5nKDAsMyl9LGdldFNob3J0RGF5TmFtZTpmdW5jdGlvbihjKXtyZXR1cm4gRXh0LkRhdGUuZGF5TmFtZXNbY10uc3Vic3RyaW5nKDAsMyl9LGdldE1vbnRoTnVtYmVyOmZ1bmN0aW9uKGMpe3JldHVybiBFeHQuRGF0ZS5tb250aE51bWJlcnNbYy5zdWJzdHJpbmcoMCwxKS50b1VwcGVyQ2FzZSgpK2Muc3Vic3RyaW5nKDEsMykudG9Mb3dlckNhc2UoKV19LGZvcm1hdENvbnRhaW5zSG91ckluZm86KGZ1bmN0aW9uKCl7dmFyIGQ9LyhcXC4pL2csYz0vKFtnR2hIaXN1Y1VPUFpdfE1TKS87cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBjLnRlc3QoZS5yZXBsYWNlKGQsIiIpKX19KCkpLGZvcm1hdENvbnRhaW5zRGF0ZUluZm86KGZ1bmN0aW9uKCl7dmFyIGQ9LyhcXC4pL2csYz0vKFtkanptbll5Y1VdfE1TKS87cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiBjLnRlc3QoZS5yZXBsYWNlKGQsIiIpKX19KCkpLHVuZXNjYXBlRm9ybWF0OihmdW5jdGlvbigpe3ZhciBjPS9cXC9naTtyZXR1cm4gZnVuY3Rpb24oZCl7cmV0dXJuIGQucmVwbGFjZShjLCIiKX19KCkpLGZvcm1hdENvZGVzOntkOiJFeHQuU3RyaW5nLmxlZnRQYWQodGhpcy5nZXREYXRlKCksIDIsICcwJykiLEQ6IkV4dC5EYXRlLmdldFNob3J0RGF5TmFtZSh0aGlzLmdldERheSgpKSIsajoidGhpcy5nZXREYXRlKCkiLGw6IkV4dC5EYXRlLmRheU5hbWVzW3RoaXMuZ2V0RGF5KCldIixOOiIodGhpcy5nZXREYXkoKSA/IHRoaXMuZ2V0RGF5KCkgOiA3KSIsUzoiRXh0LkRhdGUuZ2V0U3VmZml4KHRoaXMpIix3OiJ0aGlzLmdldERheSgpIix6OiJFeHQuRGF0ZS5nZXREYXlPZlllYXIodGhpcykiLFc6IkV4dC5TdHJpbmcubGVmdFBhZChFeHQuRGF0ZS5nZXRXZWVrT2ZZZWFyKHRoaXMpLCAyLCAnMCcpIixGOiJFeHQuRGF0ZS5tb250aE5hbWVzW3RoaXMuZ2V0TW9udGgoKV0iLG06IkV4dC5TdHJpbmcubGVmdFBhZCh0aGlzLmdldE1vbnRoKCkgKyAxLCAyLCAnMCcpIixNOiJFeHQuRGF0ZS5nZXRTaG9ydE1vbnRoTmFtZSh0aGlzLmdldE1vbnRoKCkpIixuOiIodGhpcy5nZXRNb250aCgpICsgMSkiLHQ6IkV4dC5EYXRlLmdldERheXNJbk1vbnRoKHRoaXMpIixMOiIoRXh0LkRhdGUuaXNMZWFwWWVhcih0aGlzKSA/IDEgOiAwKSIsbzoiKHRoaXMuZ2V0RnVsbFllYXIoKSArIChFeHQuRGF0ZS5nZXRXZWVrT2ZZZWFyKHRoaXMpID09IDEgJiYgdGhpcy5nZXRNb250aCgpID4gMCA/ICsxIDogKEV4dC5EYXRlLmdldFdlZWtPZlllYXIodGhpcykgPj0gNTIgJiYgdGhpcy5nZXRNb250aCgpIDwgMTEgPyAtMSA6IDApKSkiLFk6IkV4dC5TdHJpbmcubGVmdFBhZCh0aGlzLmdldEZ1bGxZZWFyKCksIDQsICcwJykiLHk6IignJyArIHRoaXMuZ2V0RnVsbFllYXIoKSkuc3Vic3RyaW5nKDIsIDQpIixhOiIodGhpcy5nZXRIb3VycygpIDwgMTIgPyAnYW0nIDogJ3BtJykiLEE6Iih0aGlzLmdldEhvdXJzKCkgPCAxMiA/ICdBTScgOiAnUE0nKSIsZzoiKCh0aGlzLmdldEhvdXJzKCkgJSAxMikgPyB0aGlzLmdldEhvdXJzKCkgJSAxMiA6IDEyKSIsRzoidGhpcy5nZXRIb3VycygpIixoOiJFeHQuU3RyaW5nLmxlZnRQYWQoKHRoaXMuZ2V0SG91cnMoKSAlIDEyKSA/IHRoaXMuZ2V0SG91cnMoKSAlIDEyIDogMTIsIDIsICcwJykiLEg6IkV4dC5TdHJpbmcubGVmdFBhZCh0aGlzLmdldEhvdXJzKCksIDIsICcwJykiLGk6IkV4dC5TdHJpbmcubGVmdFBhZCh0aGlzLmdldE1pbnV0ZXMoKSwgMiwgJzAnKSIsczoiRXh0LlN0cmluZy5sZWZ0UGFkKHRoaXMuZ2V0U2Vjb25kcygpLCAyLCAnMCcpIix1OiJFeHQuU3RyaW5nLmxlZnRQYWQodGhpcy5nZXRNaWxsaXNlY29uZHMoKSwgMywgJzAnKSIsTzoiRXh0LkRhdGUuZ2V0R01UT2Zmc2V0KHRoaXMpIixQOiJFeHQuRGF0ZS5nZXRHTVRPZmZzZXQodGhpcywgdHJ1ZSkiLFQ6IkV4dC5EYXRlLmdldFRpbWV6b25lKHRoaXMpIixaOiIodGhpcy5nZXRUaW1lem9uZU9mZnNldCgpICogLTYwKSIsYzpmdW5jdGlvbigpe3ZhciBrLGgsZyxkLGo7Zm9yKGs9IlktbS1kVEg6aTpzUCIsaD1bXSxnPTAsZD1rLmxlbmd0aDtnPGQ7KytnKXtqPWsuY2hhckF0KGcpO2gucHVzaChqPT0iVCI/IidUJyI6YS5nZXRGb3JtYXRDb2RlKGopKX1yZXR1cm4gaC5qb2luKCIgKyAiKX0sVToiTWF0aC5yb3VuZCh0aGlzLmdldFRpbWUoKSAvIDEwMDApIn0saXNWYWxpZDpmdW5jdGlvbihvLGMsbixrLGcsaixlKXtrPWt8fDA7Zz1nfHwwO2o9anx8MDtlPWV8fDA7dmFyIGw9YS5hZGQobmV3IERhdGUobzwxMDA/MTAwOm8sYy0xLG4sayxnLGosZSksYS5ZRUFSLG88MTAwP28tMTAwOjApO3JldHVybiBvPT1sLmdldEZ1bGxZZWFyKCkmJmM9PWwuZ2V0TW9udGgoKSsxJiZuPT1sLmdldERhdGUoKSYmaz09bC5nZXRIb3VycygpJiZnPT1sLmdldE1pbnV0ZXMoKSYmaj09bC5nZXRTZWNvbmRzKCkmJmU9PWwuZ2V0TWlsbGlzZWNvbmRzKCl9LHBhcnNlOmZ1bmN0aW9uKGQsZyxjKXt2YXIgZT1hLnBhcnNlRnVuY3Rpb25zO2lmKGVbZ109PW51bGwpe2EuY3JlYXRlUGFyc2VyKGcpfXJldHVybiBlW2ddKGQsRXh0LmlzRGVmaW5lZChjKT9jOmEudXNlU3RyaWN0KX0scGFyc2VEYXRlOmZ1bmN0aW9uKGQsZSxjKXtyZXR1cm4gYS5wYXJzZShkLGUsYyl9LGdldEZvcm1hdENvZGU6ZnVuY3Rpb24oZCl7dmFyIGM9YS5mb3JtYXRDb2Rlc1tkXTtpZihjKXtjPXR5cGVvZiBjPT0iZnVuY3Rpb24iP2MoKTpjO2EuZm9ybWF0Q29kZXNbZF09Y31yZXR1cm4gY3x8KCInIitFeHQuU3RyaW5nLmVzY2FwZShkKSsiJyIpfSxjcmVhdGVGb3JtYXQ6ZnVuY3Rpb24oaCl7dmFyIGc9W10sYz1mYWxzZSxlPSIiLGQ7Zm9yKGQ9MDtkPGgubGVuZ3RoOysrZCl7ZT1oLmNoYXJBdChkKTtpZighYyYmZT09IlxcIil7Yz10cnVlfWVsc2V7aWYoYyl7Yz1mYWxzZTtnLnB1c2goIiciK0V4dC5TdHJpbmcuZXNjYXBlKGUpKyInIil9ZWxzZXtnLnB1c2goYS5nZXRGb3JtYXRDb2RlKGUpKX19fWEuZm9ybWF0RnVuY3Rpb25zW2hdPUV4dC5mdW5jdGlvbkZhY3RvcnkoInJldHVybiAiK2cuam9pbigiKyIpKX0sY3JlYXRlUGFyc2VyOihmdW5jdGlvbigpe3ZhciBjPVsidmFyIGR0LCB5LCBtLCBkLCBoLCBpLCBzLCBtcywgbywgeiwgenosIHUsIHYsIiwiZGVmID0gRXh0LkRhdGUuZGVmYXVsdHMsIiwicmVzdWx0cyA9IFN0cmluZyhpbnB1dCkubWF0Y2goRXh0LkRhdGUucGFyc2VSZWdleGVzW3swfV0pOyIsImlmKHJlc3VsdHMpeyIsInsxfSIsImlmKHUgIT0gbnVsbCl7IiwidiA9IG5ldyBEYXRlKHUgKiAxMDAwKTsiLCJ9ZWxzZXsiLCJkdCA9IEV4dC5EYXRlLmNsZWFyVGltZShuZXcgRGF0ZSk7IiwieSA9IEV4dC5OdW1iZXIuZnJvbSh5LCBFeHQuTnVtYmVyLmZyb20oZGVmLnksIGR0LmdldEZ1bGxZZWFyKCkpKTsiLCJtID0gRXh0Lk51bWJlci5mcm9tKG0sIEV4dC5OdW1iZXIuZnJvbShkZWYubSAtIDEsIGR0LmdldE1vbnRoKCkpKTsiLCJkID0gRXh0Lk51bWJlci5mcm9tKGQsIEV4dC5OdW1iZXIuZnJvbShkZWYuZCwgZHQuZ2V0RGF0ZSgpKSk7IiwiaCAgPSBFeHQuTnVtYmVyLmZyb20oaCwgRXh0Lk51bWJlci5mcm9tKGRlZi5oLCBkdC5nZXRIb3VycygpKSk7IiwiaSAgPSBFeHQuTnVtYmVyLmZyb20oaSwgRXh0Lk51bWJlci5mcm9tKGRlZi5pLCBkdC5nZXRNaW51dGVzKCkpKTsiLCJzICA9IEV4dC5OdW1iZXIuZnJvbShzLCBFeHQuTnVtYmVyLmZyb20oZGVmLnMsIGR0LmdldFNlY29uZHMoKSkpOyIsIm1zID0gRXh0Lk51bWJlci5mcm9tKG1zLCBFeHQuTnVtYmVyLmZyb20oZGVmLm1zLCBkdC5nZXRNaWxsaXNlY29uZHMoKSkpOyIsImlmKHogPj0gMCAmJiB5ID49IDApeyIsInYgPSBFeHQuRGF0ZS5hZGQobmV3IERhdGUoeSA8IDEwMCA/IDEwMCA6IHksIDAsIDEsIGgsIGksIHMsIG1zKSwgRXh0LkRhdGUuWUVBUiwgeSA8IDEwMCA/IHkgLSAxMDAgOiAwKTsiLCJ2ID0gIXN0cmljdD8gdiA6IChzdHJpY3QgPT09IHRydWUgJiYgKHogPD0gMzY0IHx8IChFeHQuRGF0ZS5pc0xlYXBZZWFyKHYpICYmIHogPD0gMzY1KSk/IEV4dC5EYXRlLmFkZCh2LCBFeHQuRGF0ZS5EQVksIHopIDogbnVsbCk7IiwifWVsc2UgaWYoc3RyaWN0ID09PSB0cnVlICYmICFFeHQuRGF0ZS5pc1ZhbGlkKHksIG0gKyAxLCBkLCBoLCBpLCBzLCBtcykpeyIsInYgPSBudWxsOyIsIn1lbHNleyIsInYgPSBFeHQuRGF0ZS5hZGQobmV3IERhdGUoeSA8IDEwMCA/IDEwMCA6IHksIG0sIGQsIGgsIGksIHMsIG1zKSwgRXh0LkRhdGUuWUVBUiwgeSA8IDEwMCA/IHkgLSAxMDAgOiAwKTsiLCJ9IiwifSIsIn0iLCJpZih2KXsiLCJpZih6eiAhPSBudWxsKXsiLCJ2ID0gRXh0LkRhdGUuYWRkKHYsIEV4dC5EYXRlLlNFQ09ORCwgLXYuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwIC0genopOyIsIn1lbHNlIGlmKG8peyIsInYgPSBFeHQuRGF0ZS5hZGQodiwgRXh0LkRhdGUuTUlOVVRFLCAtdi5nZXRUaW1lem9uZU9mZnNldCgpICsgKHNuID09ICcrJz8gLTEgOiAxKSAqIChociAqIDYwICsgbW4pKTsiLCJ9IiwifSIsInJldHVybiB2OyJdLmpvaW4oIlxuIik7cmV0dXJuIGZ1bmN0aW9uKG8pe3ZhciBlPWEucGFyc2VSZWdleGVzLmxlbmd0aCxwPTEsZz1bXSxuPVtdLGw9ZmFsc2UsZD0iIixqPTAsaz1vLmxlbmd0aCxtPVtdLGg7Zm9yKDtqPGs7KytqKXtkPW8uY2hhckF0KGopO2lmKCFsJiZkPT0iXFwiKXtsPXRydWV9ZWxzZXtpZihsKXtsPWZhbHNlO24ucHVzaChFeHQuU3RyaW5nLmVzY2FwZShkKSl9ZWxzZXtoPWEuZm9ybWF0Q29kZVRvUmVnZXgoZCxwKTtwKz1oLmc7bi5wdXNoKGgucyk7aWYoaC5nJiZoLmMpe2lmKGguY2FsY0F0RW5kKXttLnB1c2goaC5jKX1lbHNle2cucHVzaChoLmMpfX19fX1nPWcuY29uY2F0KG0pO2EucGFyc2VSZWdleGVzW2VdPW5ldyBSZWdFeHAoIl4iK24uam9pbigiIikrIiQiLCJpIik7YS5wYXJzZUZ1bmN0aW9uc1tvXT1FeHQuZnVuY3Rpb25GYWN0b3J5KCJpbnB1dCIsInN0cmljdCIsYihjLGUsZy5qb2luKCIiKSkpfX0oKSkscGFyc2VDb2Rlczp7ZDp7ZzoxLGM6ImQgPSBwYXJzZUludChyZXN1bHRzW3swfV0sIDEwKTtcbiIsczoiKDNbMC0xXXxbMS0yXVswLTldfDBbMS05XSkifSxqOntnOjEsYzoiZCA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApO1xuIixzOiIoM1swLTFdfFsxLTJdWzAtOV18WzEtOV0pIn0sRDpmdW5jdGlvbigpe2Zvcih2YXIgYz1bXSxkPTA7ZDw3O2MucHVzaChhLmdldFNob3J0RGF5TmFtZShkKSksKytkKXt9cmV0dXJue2c6MCxjOm51bGwsczoiKD86IitjLmpvaW4oInwiKSsiKSJ9fSxsOmZ1bmN0aW9uKCl7cmV0dXJue2c6MCxjOm51bGwsczoiKD86IithLmRheU5hbWVzLmpvaW4oInwiKSsiKSJ9fSxOOntnOjAsYzpudWxsLHM6IlsxLTddIn0sUzp7ZzowLGM6bnVsbCxzOiIoPzpzdHxuZHxyZHx0aCkifSx3OntnOjAsYzpudWxsLHM6IlswLTZdIn0sejp7ZzoxLGM6InogPSBwYXJzZUludChyZXN1bHRzW3swfV0sIDEwKTtcbiIsczoiKFxcZHsxLDN9KSJ9LFc6e2c6MCxjOm51bGwsczoiKD86XFxkezJ9KSJ9LEY6ZnVuY3Rpb24oKXtyZXR1cm57ZzoxLGM6Im0gPSBwYXJzZUludChFeHQuRGF0ZS5nZXRNb250aE51bWJlcihyZXN1bHRzW3swfV0pLCAxMCk7XG4iLHM6IigiK2EubW9udGhOYW1lcy5qb2luKCJ8IikrIikifX0sTTpmdW5jdGlvbigpe2Zvcih2YXIgYz1bXSxkPTA7ZDwxMjtjLnB1c2goYS5nZXRTaG9ydE1vbnRoTmFtZShkKSksKytkKXt9cmV0dXJuIEV4dC5hcHBseUlmKHtzOiIoIitjLmpvaW4oInwiKSsiKSJ9LGEuZm9ybWF0Q29kZVRvUmVnZXgoIkYiKSl9LG06e2c6MSxjOiJtID0gcGFyc2VJbnQocmVzdWx0c1t7MH1dLCAxMCkgLSAxO1xuIixzOiIoMVswLTJdfDBbMS05XSkifSxuOntnOjEsYzoibSA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApIC0gMTtcbiIsczoiKDFbMC0yXXxbMS05XSkifSx0OntnOjAsYzpudWxsLHM6Iig/OlxcZHsyfSkifSxMOntnOjAsYzpudWxsLHM6Iig/OjF8MCkifSxvOmZ1bmN0aW9uKCl7cmV0dXJuIGEuZm9ybWF0Q29kZVRvUmVnZXgoIlkiKX0sWTp7ZzoxLGM6InkgPSBwYXJzZUludChyZXN1bHRzW3swfV0sIDEwKTtcbiIsczoiKFxcZHs0fSkifSx5OntnOjEsYzoidmFyIHR5ID0gcGFyc2VJbnQocmVzdWx0c1t7MH1dLCAxMCk7XG55ID0gdHkgPiBFeHQuRGF0ZS55MmtZZWFyID8gMTkwMCArIHR5IDogMjAwMCArIHR5O1xuIixzOiIoXFxkezEsMn0pIn0sYTp7ZzoxLGM6ImlmICgvKGFtKS9pLnRlc3QocmVzdWx0c1t7MH1dKSkge1xuaWYgKCFoIHx8IGggPT0gMTIpIHsgaCA9IDA7IH1cbn0gZWxzZSB7IGlmICghaCB8fCBoIDwgMTIpIHsgaCA9IChoIHx8IDApICsgMTI7IH19IixzOiIoYW18cG18QU18UE0pIixjYWxjQXRFbmQ6dHJ1ZX0sQTp7ZzoxLGM6ImlmICgvKGFtKS9pLnRlc3QocmVzdWx0c1t7MH1dKSkge1xuaWYgKCFoIHx8IGggPT0gMTIpIHsgaCA9IDA7IH1cbn0gZWxzZSB7IGlmICghaCB8fCBoIDwgMTIpIHsgaCA9IChoIHx8IDApICsgMTI7IH19IixzOiIoQU18UE18YW18cG0pIixjYWxjQXRFbmQ6dHJ1ZX0sZzp7ZzoxLGM6ImggPSBwYXJzZUludChyZXN1bHRzW3swfV0sIDEwKTtcbiIsczoiKDFbMC0yXXxbMC05XSkifSxHOntnOjEsYzoiaCA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApO1xuIixzOiIoMlswLTNdfDFbMC05XXxbMC05XSkifSxoOntnOjEsYzoiaCA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApO1xuIixzOiIoMVswLTJdfDBbMS05XSkifSxIOntnOjEsYzoiaCA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApO1xuIixzOiIoMlswLTNdfFswLTFdWzAtOV0pIn0saTp7ZzoxLGM6ImkgPSBwYXJzZUludChyZXN1bHRzW3swfV0sIDEwKTtcbiIsczoiKFswLTVdWzAtOV0pIn0sczp7ZzoxLGM6InMgPSBwYXJzZUludChyZXN1bHRzW3swfV0sIDEwKTtcbiIsczoiKFswLTVdWzAtOV0pIn0sdTp7ZzoxLGM6Im1zID0gcmVzdWx0c1t7MH1dOyBtcyA9IHBhcnNlSW50KG1zLCAxMCkvTWF0aC5wb3coMTAsIG1zLmxlbmd0aCAtIDMpO1xuIixzOiIoXFxkKykifSxPOntnOjEsYzpbIm8gPSByZXN1bHRzW3swfV07IiwidmFyIHNuID0gby5zdWJzdHJpbmcoMCwxKSwiLCJociA9IG8uc3Vic3RyaW5nKDEsMykqMSArIE1hdGguZmxvb3Ioby5zdWJzdHJpbmcoMyw1KSAvIDYwKSwiLCJtbiA9IG8uc3Vic3RyaW5nKDMsNSkgJSA2MDsiLCJvID0gKCgtMTIgPD0gKGhyKjYwICsgbW4pLzYwKSAmJiAoKGhyKjYwICsgbW4pLzYwIDw9IDE0KSk/IChzbiArIEV4dC5TdHJpbmcubGVmdFBhZChociwgMiwgJzAnKSArIEV4dC5TdHJpbmcubGVmdFBhZChtbiwgMiwgJzAnKSkgOiBudWxsO1xuIl0uam9pbigiXG4iKSxzOiIoWystXVxcZHs0fSkifSxQOntnOjEsYzpbIm8gPSByZXN1bHRzW3swfV07IiwidmFyIHNuID0gby5zdWJzdHJpbmcoMCwxKSwiLCJociA9IG8uc3Vic3RyaW5nKDEsMykqMSArIE1hdGguZmxvb3Ioby5zdWJzdHJpbmcoNCw2KSAvIDYwKSwiLCJtbiA9IG8uc3Vic3RyaW5nKDQsNikgJSA2MDsiLCJvID0gKCgtMTIgPD0gKGhyKjYwICsgbW4pLzYwKSAmJiAoKGhyKjYwICsgbW4pLzYwIDw9IDE0KSk/IChzbiArIEV4dC5TdHJpbmcubGVmdFBhZChociwgMiwgJzAnKSArIEV4dC5TdHJpbmcubGVmdFBhZChtbiwgMiwgJzAnKSkgOiBudWxsO1xuIl0uam9pbigiXG4iKSxzOiIoWystXVxcZHsyfTpcXGR7Mn0pIn0sVDp7ZzowLGM6bnVsbCxzOiJbQS1aXXsxLDR9In0sWjp7ZzoxLGM6Inp6ID0gcmVzdWx0c1t7MH1dICogMTtcbnp6ID0gKC00MzIwMCA8PSB6eiAmJiB6eiA8PSA1MDQwMCk/IHp6IDogbnVsbDtcbiIsczoiKFsrLV0/XFxkezEsNX0pIn0sYzpmdW5jdGlvbigpe3ZhciBlPVtdLGM9W2EuZm9ybWF0Q29kZVRvUmVnZXgoIlkiLDEpLGEuZm9ybWF0Q29kZVRvUmVnZXgoIm0iLDIpLGEuZm9ybWF0Q29kZVRvUmVnZXgoImQiLDMpLGEuZm9ybWF0Q29kZVRvUmVnZXgoIkgiLDQpLGEuZm9ybWF0Q29kZVRvUmVnZXgoImkiLDUpLGEuZm9ybWF0Q29kZVRvUmVnZXgoInMiLDYpLHtjOiJtcyA9IHJlc3VsdHNbN10gfHwgJzAnOyBtcyA9IHBhcnNlSW50KG1zLCAxMCkvTWF0aC5wb3coMTAsIG1zLmxlbmd0aCAtIDMpO1xuIn0se2M6WyJpZihyZXN1bHRzWzhdKSB7IiwiaWYocmVzdWx0c1s4XSA9PSAnWicpeyIsInp6ID0gMDsiLCJ9ZWxzZSBpZiAocmVzdWx0c1s4XS5pbmRleE9mKCc6JykgPiAtMSl7IixhLmZvcm1hdENvZGVUb1JlZ2V4KCJQIiw4KS5jLCJ9ZWxzZXsiLGEuZm9ybWF0Q29kZVRvUmVnZXgoIk8iLDgpLmMsIn0iLCJ9Il0uam9pbigiXG4iKX1dLGcsZDtmb3IoZz0wLGQ9Yy5sZW5ndGg7ZzxkOysrZyl7ZS5wdXNoKGNbZ10uYyl9cmV0dXJue2c6MSxjOmUuam9pbigiIiksczpbY1swXS5zLCIoPzoiLCItIixjWzFdLnMsIig/OiIsIi0iLGNbMl0ucywiKD86IiwiKD86VHwgKT8iLGNbM10ucywiOiIsY1s0XS5zLCIoPzo6IixjWzVdLnMsIik/IiwiKD86KD86XFwufCwpKFxcZCspKT8iLCIoWnwoPzpbLStdXFxkezJ9KD86Oik/XFxkezJ9KSk/IiwiKT8iLCIpPyIsIik/Il0uam9pbigiIil9fSxVOntnOjEsYzoidSA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApO1xuIixzOiIoLT9cXGQrKSJ9fSxkYXRlRm9ybWF0OmZ1bmN0aW9uKGMsZCl7cmV0dXJuIGEuZm9ybWF0KGMsZCl9LGlzRXF1YWw6ZnVuY3Rpb24oZCxjKXtpZihkJiZjKXtyZXR1cm4oZC5nZXRUaW1lKCk9PT1jLmdldFRpbWUoKSl9cmV0dXJuICEoZHx8Yyl9LGZvcm1hdDpmdW5jdGlvbihkLGUpe3ZhciBjPWEuZm9ybWF0RnVuY3Rpb25zO2lmKCFFeHQuaXNEYXRlKGQpKXtyZXR1cm4iIn1pZihjW2VdPT1udWxsKXthLmNyZWF0ZUZvcm1hdChlKX1yZXR1cm4gY1tlXS5jYWxsKGQpKyIifSxnZXRUaW1lem9uZTpmdW5jdGlvbihjKXtyZXR1cm4gYy50b1N0cmluZygpLnJlcGxhY2UoL14uKiAoPzpcKCguKilcKXwoW0EtWl17MSw0fSkoPzpbXC0rXVswLTldezR9KT8oPzogLT9cZCspPykkLywiJDEkMiIpLnJlcGxhY2UoL1teQS1aXS9nLCIiKX0sZ2V0R01UT2Zmc2V0OmZ1bmN0aW9uKGMsZCl7dmFyIGU9Yy5nZXRUaW1lem9uZU9mZnNldCgpO3JldHVybihlPjA/Ii0iOiIrIikrRXh0LlN0cmluZy5sZWZ0UGFkKE1hdGguZmxvb3IoTWF0aC5hYnMoZSkvNjApLDIsIjAiKSsoZD8iOiI6IiIpK0V4dC5TdHJpbmcubGVmdFBhZChNYXRoLmFicyhlJTYwKSwyLCIwIil9LGdldERheU9mWWVhcjpmdW5jdGlvbihnKXt2YXIgZT0wLGo9RXh0LkRhdGUuY2xvbmUoZyksYz1nLmdldE1vbnRoKCksaDtmb3IoaD0wLGouc2V0RGF0ZSgxKSxqLnNldE1vbnRoKDApO2g8YztqLnNldE1vbnRoKCsraCkpe2UrPWEuZ2V0RGF5c0luTW9udGgoail9cmV0dXJuIGUrZy5nZXREYXRlKCktMX0sZ2V0V2Vla09mWWVhcjooZnVuY3Rpb24oKXt2YXIgYz04NjQwMDAwMCxkPTcqYztyZXR1cm4gZnVuY3Rpb24oZyl7dmFyIGg9RGF0ZS5VVEMoZy5nZXRGdWxsWWVhcigpLGcuZ2V0TW9udGgoKSxnLmdldERhdGUoKSszKS9jLGU9TWF0aC5mbG9vcihoLzcpLGk9bmV3IERhdGUoZSpkKS5nZXRVVENGdWxsWWVhcigpO3JldHVybiBlLU1hdGguZmxvb3IoRGF0ZS5VVEMoaSwwLDcpL2QpKzF9fSgpKSxpc0xlYXBZZWFyOmZ1bmN0aW9uKGMpe3ZhciBkPWMuZ2V0RnVsbFllYXIoKTtyZXR1cm4gISEoKGQmMyk9PTAmJihkJTEwMHx8KGQlNDAwPT0wJiZkKSkpfSxnZXRGaXJzdERheU9mTW9udGg6ZnVuY3Rpb24oZCl7dmFyIGM9KGQuZ2V0RGF5KCktKGQuZ2V0RGF0ZSgpLTEpKSU3O3JldHVybihjPDApPyhjKzcpOmN9LGdldExhc3REYXlPZk1vbnRoOmZ1bmN0aW9uKGMpe3JldHVybiBhLmdldExhc3REYXRlT2ZNb250aChjKS5nZXREYXkoKX0sZ2V0Rmlyc3REYXRlT2ZNb250aDpmdW5jdGlvbihjKXtyZXR1cm4gbmV3IERhdGUoYy5nZXRGdWxsWWVhcigpLGMuZ2V0TW9udGgoKSwxKX0sZ2V0TGFzdERhdGVPZk1vbnRoOmZ1bmN0aW9uKGMpe3JldHVybiBuZXcgRGF0ZShjLmdldEZ1bGxZZWFyKCksYy5nZXRNb250aCgpLGEuZ2V0RGF5c0luTW9udGgoYykpfSxnZXREYXlzSW5Nb250aDooZnVuY3Rpb24oKXt2YXIgYz1bMzEsMjgsMzEsMzAsMzEsMzAsMzEsMzEsMzAsMzEsMzAsMzFdO3JldHVybiBmdW5jdGlvbihlKXt2YXIgZD1lLmdldE1vbnRoKCk7cmV0dXJuIGQ9PTEmJmEuaXNMZWFwWWVhcihlKT8yOTpjW2RdfX0oKSksZ2V0U3VmZml4OmZ1bmN0aW9uKGMpe3N3aXRjaChjLmdldERhdGUoKSl7Y2FzZSAxOmNhc2UgMjE6Y2FzZSAzMTpyZXR1cm4ic3QiO2Nhc2UgMjpjYXNlIDIyOnJldHVybiJuZCI7Y2FzZSAzOmNhc2UgMjM6cmV0dXJuInJkIjtkZWZhdWx0OnJldHVybiJ0aCJ9fSxjbG9uZTpmdW5jdGlvbihjKXtyZXR1cm4gbmV3IERhdGUoYy5nZXRUaW1lKCkpfSxpc0RTVDpmdW5jdGlvbihjKXtyZXR1cm4gbmV3IERhdGUoYy5nZXRGdWxsWWVhcigpLDAsMSkuZ2V0VGltZXpvbmVPZmZzZXQoKSE9Yy5nZXRUaW1lem9uZU9mZnNldCgpfSxjbGVhclRpbWU6ZnVuY3Rpb24oZSxqKXtpZihqKXtyZXR1cm4gRXh0LkRhdGUuY2xlYXJUaW1lKEV4dC5EYXRlLmNsb25lKGUpKX12YXIgaD1lLmdldERhdGUoKSxnLGk7ZS5zZXRIb3VycygwKTtlLnNldE1pbnV0ZXMoMCk7ZS5zZXRTZWNvbmRzKDApO2Uuc2V0TWlsbGlzZWNvbmRzKDApO2lmKGUuZ2V0RGF0ZSgpIT1oKXtmb3IoZz0xLGk9YS5hZGQoZSxFeHQuRGF0ZS5IT1VSLGcpO2kuZ2V0RGF0ZSgpIT1oO2crKyxpPWEuYWRkKGUsRXh0LkRhdGUuSE9VUixnKSl7fWUuc2V0RGF0ZShoKTtlLnNldEhvdXJzKGkuZ2V0SG91cnMoKSl9cmV0dXJuIGV9LGFkZDpmdW5jdGlvbihoLGcsaSl7dmFyIGo9RXh0LkRhdGUuY2xvbmUoaCksYz1FeHQuRGF0ZSxlO2lmKCFnfHxpPT09MCl7cmV0dXJuIGp9c3dpdGNoKGcudG9Mb3dlckNhc2UoKSl7Y2FzZSBFeHQuRGF0ZS5NSUxMSTpqLnNldE1pbGxpc2Vjb25kcyhqLmdldE1pbGxpc2Vjb25kcygpK2kpO2JyZWFrO2Nhc2UgRXh0LkRhdGUuU0VDT05EOmouc2V0U2Vjb25kcyhqLmdldFNlY29uZHMoKStpKTticmVhaztjYXNlIEV4dC5EYXRlLk1JTlVURTpqLnNldE1pbnV0ZXMoai5nZXRNaW51dGVzKCkraSk7YnJlYWs7Y2FzZSBFeHQuRGF0ZS5IT1VSOmouc2V0SG91cnMoai5nZXRIb3VycygpK2kpO2JyZWFrO2Nhc2UgRXh0LkRhdGUuREFZOmouc2V0RGF0ZShqLmdldERhdGUoKStpKTticmVhaztjYXNlIEV4dC5EYXRlLk1PTlRIOmU9aC5nZXREYXRlKCk7aWYoZT4yOCl7ZT1NYXRoLm1pbihlLEV4dC5EYXRlLmdldExhc3REYXRlT2ZNb250aChFeHQuRGF0ZS5hZGQoRXh0LkRhdGUuZ2V0Rmlyc3REYXRlT2ZNb250aChoKSxFeHQuRGF0ZS5NT05USCxpKSkuZ2V0RGF0ZSgpKX1qLnNldERhdGUoZSk7ai5zZXRNb250aChoLmdldE1vbnRoKCkraSk7YnJlYWs7Y2FzZSBFeHQuRGF0ZS5ZRUFSOmU9aC5nZXREYXRlKCk7aWYoZT4yOCl7ZT1NYXRoLm1pbihlLEV4dC5EYXRlLmdldExhc3REYXRlT2ZNb250aChFeHQuRGF0ZS5hZGQoRXh0LkRhdGUuZ2V0Rmlyc3REYXRlT2ZNb250aChoKSxFeHQuRGF0ZS5ZRUFSLGkpKS5nZXREYXRlKCkpfWouc2V0RGF0ZShlKTtqLnNldEZ1bGxZZWFyKGguZ2V0RnVsbFllYXIoKStpKTticmVha31yZXR1cm4gan0sYmV0d2VlbjpmdW5jdGlvbihkLGcsYyl7dmFyIGU9ZC5nZXRUaW1lKCk7cmV0dXJuIGcuZ2V0VGltZSgpPD1lJiZlPD1jLmdldFRpbWUoKX0sY29tcGF0OmZ1bmN0aW9uKCl7dmFyIGQ9d2luZG93LkRhdGUsYyxsLGo9WyJ1c2VTdHJpY3QiLCJmb3JtYXRDb2RlVG9SZWdleCIsInBhcnNlRnVuY3Rpb25zIiwicGFyc2VSZWdleGVzIiwiZm9ybWF0RnVuY3Rpb25zIiwieTJrWWVhciIsIk1JTExJIiwiU0VDT05EIiwiTUlOVVRFIiwiSE9VUiIsIkRBWSIsIk1PTlRIIiwiWUVBUiIsImRlZmF1bHRzIiwiZGF5TmFtZXMiLCJtb250aE5hbWVzIiwibW9udGhOdW1iZXJzIiwiZ2V0U2hvcnRNb250aE5hbWUiLCJnZXRTaG9ydERheU5hbWUiLCJnZXRNb250aE51bWJlciIsImZvcm1hdENvZGVzIiwiaXNWYWxpZCIsInBhcnNlRGF0ZSIsImdldEZvcm1hdENvZGUiLCJjcmVhdGVGb3JtYXQiLCJjcmVhdGVQYXJzZXIiLCJwYXJzZUNvZGVzIl0saD1bImRhdGVGb3JtYXQiLCJmb3JtYXQiLCJnZXRUaW1lem9uZSIsImdldEdNVE9mZnNldCIsImdldERheU9mWWVhciIsImdldFdlZWtPZlllYXIiLCJpc0xlYXBZZWFyIiwiZ2V0Rmlyc3REYXlPZk1vbnRoIiwiZ2V0TGFzdERheU9mTW9udGgiLCJnZXREYXlzSW5Nb250aCIsImdldFN1ZmZpeCIsImNsb25lIiwiaXNEU1QiLCJjbGVhclRpbWUiLCJhZGQiLCJiZXR3ZWVuIl0saT1qLmxlbmd0aCxlPWgubGVuZ3RoLGcsayxtO2ZvcihtPTA7bTxpO20rKyl7Zz1qW21dO2RbZ109YVtnXX1mb3IoYz0wO2M8ZTtjKyspe2s9aFtjXTtkLnByb3RvdHlwZVtrXT1mdW5jdGlvbigpe3ZhciBuPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7bi51bnNoaWZ0KHRoaXMpO3JldHVybiBhW2tdLmFwcGx5KGEsbil9fX19O3ZhciBhPUV4dC5EYXRlfSgpKTsoZnVuY3Rpb24oYSl7dmFyIGM9W10sYj1mdW5jdGlvbigpe307RXh0LmFwcGx5KGIseyRjbGFzc05hbWU6IkV4dC5CYXNlIiwkaXNDbGFzczp0cnVlLGNyZWF0ZTpmdW5jdGlvbigpe3JldHVybiBFeHQuY3JlYXRlLmFwcGx5KEV4dCxbdGhpc10uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSkpfSxleHRlbmQ6ZnVuY3Rpb24oail7dmFyIGQ9ai5wcm90b3R5cGUsbSxnLGgsayxlLGw7Zz10aGlzLnByb3RvdHlwZT1FeHQuT2JqZWN0LmNoYWluKGQpO2cuc2VsZj10aGlzO3RoaXMuc3VwZXJjbGFzcz1nLnN1cGVyY2xhc3M9ZDtpZighai4kaXNDbGFzcyl7bT1FeHQuQmFzZS5wcm90b3R5cGU7Zm9yKGggaW4gbSl7aWYoaCBpbiBnKXtnW2hdPW1baF19fX1sPWQuJGluaGVyaXRhYmxlU3RhdGljcztpZihsKXtmb3IoaD0wLGs9bC5sZW5ndGg7aDxrO2grKyl7ZT1sW2hdO2lmKCF0aGlzLmhhc093blByb3BlcnR5KGUpKXt0aGlzW2VdPWpbZV19fX1pZihqLiRvbkV4dGVuZGVkKXt0aGlzLiRvbkV4dGVuZGVkPWouJG9uRXh0ZW5kZWQuc2xpY2UoKX1nLmNvbmZpZz1uZXcgZy5jb25maWdDbGFzcygpO2cuaW5pdENvbmZpZ0xpc3Q9Zy5pbml0Q29uZmlnTGlzdC5zbGljZSgpO2cuaW5pdENvbmZpZ01hcD1FeHQuY2xvbmUoZy5pbml0Q29uZmlnTWFwKTtnLmNvbmZpZ01hcD1FeHQuT2JqZWN0LmNoYWluKGcuY29uZmlnTWFwKX0sJG9uRXh0ZW5kZWQ6W10sdHJpZ2dlckV4dGVuZGVkOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcy4kb25FeHRlbmRlZCxlPWcubGVuZ3RoLGQsaDtpZihlPjApe2ZvcihkPTA7ZDxlO2QrKyl7aD1nW2RdO2guZm4uYXBwbHkoaC5zY29wZXx8dGhpcyxhcmd1bWVudHMpfX19LG9uRXh0ZW5kZWQ6ZnVuY3Rpb24oZSxkKXt0aGlzLiRvbkV4dGVuZGVkLnB1c2goe2ZuOmUsc2NvcGU6ZH0pO3JldHVybiB0aGlzfSxhZGRDb25maWc6ZnVuY3Rpb24oaCxsKXt2YXIgbj10aGlzLnByb3RvdHlwZSxtPUV4dC5DbGFzcy5jb25maWdOYW1lQ2FjaGUsaT1uLmNvbmZpZ01hcCxqPW4uaW5pdENvbmZpZ0xpc3QsZz1uLmluaXRDb25maWdNYXAsaz1uLmNvbmZpZyxkLGUsbztmb3IoZSBpbiBoKXtpZihoLmhhc093blByb3BlcnR5KGUpKXtpZighaVtlXSl7aVtlXT10cnVlfW89aFtlXTtkPW1bZV0uaW5pdGlhbGl6ZWQ7aWYoIWdbZV0mJm8hPT1udWxsJiYhbltkXSl7Z1tlXT10cnVlO2oucHVzaChlKX19fWlmKGwpe0V4dC5tZXJnZShrLGgpfWVsc2V7RXh0Lm1lcmdlSWYoayxoKX1uLmNvbmZpZ0NsYXNzPUV4dC5PYmplY3QuY2xhc3NpZnkoayl9LGFkZFN0YXRpY3M6ZnVuY3Rpb24oZCl7dmFyIGcsZTtmb3IoZSBpbiBkKXtpZihkLmhhc093blByb3BlcnR5KGUpKXtnPWRbZV07aWYodHlwZW9mIGc9PSJmdW5jdGlvbiImJiFnLiRpc0NsYXNzJiZnIT09RXh0LmVtcHR5Rm4mJmchPT1FeHQuaWRlbnRpdHlGbil7Zy4kb3duZXI9dGhpcztnLiRuYW1lPWV9dGhpc1tlXT1nfX1yZXR1cm4gdGhpc30sYWRkSW5oZXJpdGFibGVTdGF0aWNzOmZ1bmN0aW9uKGUpe3ZhciBpLGQsaD10aGlzLnByb3RvdHlwZSxnLGo7aT1oLiRpbmhlcml0YWJsZVN0YXRpY3M7ZD1oLiRoYXNJbmhlcml0YWJsZVN0YXRpY3M7aWYoIWkpe2k9aC4kaW5oZXJpdGFibGVTdGF0aWNzPVtdO2Q9aC4kaGFzSW5oZXJpdGFibGVTdGF0aWNzPXt9fWZvcihnIGluIGUpe2lmKGUuaGFzT3duUHJvcGVydHkoZykpe2o9ZVtnXTt0aGlzW2ddPWo7aWYoIWRbZ10pe2RbZ109dHJ1ZTtpLnB1c2goZyl9fX1yZXR1cm4gdGhpc30sYWRkTWVtYmVyczpmdW5jdGlvbihlKXt2YXIgaD10aGlzLnByb3RvdHlwZSxkPUV4dC5lbnVtZXJhYmxlcyxsPVtdLGosayxnLG07Zm9yKGcgaW4gZSl7bC5wdXNoKGcpfWlmKGQpe2wucHVzaC5hcHBseShsLGQpfWZvcihqPTAsaz1sLmxlbmd0aDtqPGs7aisrKXtnPWxbal07aWYoZS5oYXNPd25Qcm9wZXJ0eShnKSl7bT1lW2ddO2lmKHR5cGVvZiBtPT0iZnVuY3Rpb24iJiYhbS4kaXNDbGFzcyYmbSE9PUV4dC5lbXB0eUZuKXttLiRvd25lcj10aGlzO20uJG5hbWU9Z31oW2ddPW19fXJldHVybiB0aGlzfSxhZGRNZW1iZXI6ZnVuY3Rpb24oZCxlKXtpZih0eXBlb2YgZT09ImZ1bmN0aW9uIiYmIWUuJGlzQ2xhc3MmJmUhPT1FeHQuZW1wdHlGbil7ZS4kb3duZXI9dGhpcztlLiRuYW1lPWR9dGhpcy5wcm90b3R5cGVbZF09ZTtyZXR1cm4gdGhpc30saW1wbGVtZW50OmZ1bmN0aW9uKCl7dGhpcy5hZGRNZW1iZXJzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYm9ycm93OmZ1bmN0aW9uKGosZyl7dmFyIG49dGhpcy5wcm90b3R5cGUsbT1qLnByb3RvdHlwZSxoLGssZSxsLGQ7Zz1FeHQuQXJyYXkuZnJvbShnKTtmb3IoaD0wLGs9Zy5sZW5ndGg7aDxrO2grKyl7ZT1nW2hdO2Q9bVtlXTtpZih0eXBlb2YgZD09ImZ1bmN0aW9uIil7bD1FeHQuRnVuY3Rpb24uY2xvbmUoZCk7bC4kb3duZXI9dGhpcztsLiRuYW1lPWU7bltlXT1sfWVsc2V7bltlXT1kfX1yZXR1cm4gdGhpc30sb3ZlcnJpZGU6ZnVuY3Rpb24oZSl7dmFyIG09dGhpcyxvPUV4dC5lbnVtZXJhYmxlcyxrPW0ucHJvdG90eXBlLGg9RXh0LkZ1bmN0aW9uLmNsb25lLGQsaixnLG4sbCxpO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0yKXtkPWU7ZT17fTtlW2RdPWFyZ3VtZW50c1sxXTtvPW51bGx9ZG97bD1bXTtuPW51bGw7Zm9yKGQgaW4gZSl7aWYoZD09InN0YXRpY3MiKXtuPWVbZF19ZWxzZXtpZihkPT0iY29uZmlnIil7bS5hZGRDb25maWcoZVtkXSx0cnVlKX1lbHNle2wucHVzaChkKX19fWlmKG8pe2wucHVzaC5hcHBseShsLG8pfWZvcihqPWwubGVuZ3RoO2otLTspe2Q9bFtqXTtpZihlLmhhc093blByb3BlcnR5KGQpKXtnPWVbZF07aWYodHlwZW9mIGc9PSJmdW5jdGlvbiImJiFnLiRjbGFzc05hbWUmJmchPT1FeHQuZW1wdHlGbil7aWYodHlwZW9mIGcuJG93bmVyIT0idW5kZWZpbmVkIil7Zz1oKGcpfWcuJG93bmVyPW07Zy4kbmFtZT1kO2k9a1tkXTtpZihpKXtnLiRwcmV2aW91cz1pfX1rW2RdPWd9fWs9bTtlPW59d2hpbGUoZSk7cmV0dXJuIHRoaXN9LGNhbGxQYXJlbnQ6ZnVuY3Rpb24oZCl7dmFyIGU7cmV0dXJuKGU9dGhpcy5jYWxsUGFyZW50LmNhbGxlcikmJihlLiRwcmV2aW91c3x8KChlPWUuJG93bmVyP2U6ZS5jYWxsZXIpJiZlLiRvd25lci5zdXBlcmNsYXNzLnNlbGZbZS4kbmFtZV0pKS5hcHBseSh0aGlzLGR8fGMpfSxjYWxsU3VwZXI6ZnVuY3Rpb24oZCl7dmFyIGU7cmV0dXJuKGU9dGhpcy5jYWxsU3VwZXIuY2FsbGVyKSYmKChlPWUuJG93bmVyP2U6ZS5jYWxsZXIpJiZlLiRvd25lci5zdXBlcmNsYXNzLnNlbGZbZS4kbmFtZV0pLmFwcGx5KHRoaXMsZHx8Yyl9LG1peGluOmZ1bmN0aW9uKGcsaSl7dmFyIGQ9aS5wcm90b3R5cGUsZT10aGlzLnByb3RvdHlwZSxoO2lmKHR5cGVvZiBkLm9uQ2xhc3NNaXhlZEluIT0idW5kZWZpbmVkIil7ZC5vbkNsYXNzTWl4ZWRJbi5jYWxsKGksdGhpcyl9aWYoIWUuaGFzT3duUHJvcGVydHkoIm1peGlucyIpKXtpZigibWl4aW5zIiBpbiBlKXtlLm1peGlucz1FeHQuT2JqZWN0LmNoYWluKGUubWl4aW5zKX1lbHNle2UubWl4aW5zPXt9fX1mb3IoaCBpbiBkKXtpZihoPT09Im1peGlucyIpe0V4dC5tZXJnZShlLm1peGlucyxkW2hdKX1lbHNle2lmKHR5cGVvZiBlW2hdPT0idW5kZWZpbmVkIiYmaCE9Im1peGluSWQiJiZoIT0iY29uZmlnIil7ZVtoXT1kW2hdfX19aWYoImNvbmZpZyIgaW4gZCl7dGhpcy5hZGRDb25maWcoZC5jb25maWcsZmFsc2UpfWUubWl4aW5zW2ddPWR9LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmdldENsYXNzTmFtZSh0aGlzKX0sY3JlYXRlQWxpYXM6YShmdW5jdGlvbihlLGQpe3RoaXMub3ZlcnJpZGUoZSxmdW5jdGlvbigpe3JldHVybiB0aGlzW2RdLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSksYWRkWHR5cGU6ZnVuY3Rpb24oaSl7dmFyIGU9dGhpcy5wcm90b3R5cGUsaD1lLnh0eXBlc01hcCxnPWUueHR5cGVzLGQ9ZS54dHlwZXNDaGFpbjtpZighZS5oYXNPd25Qcm9wZXJ0eSgieHR5cGVzTWFwIikpe2g9ZS54dHlwZXNNYXA9RXh0Lm1lcmdlKHt9LGUueHR5cGVzTWFwfHx7fSk7Zz1lLnh0eXBlcz1lLnh0eXBlcz9bXS5jb25jYXQoZS54dHlwZXMpOltdO2Q9ZS54dHlwZXNDaGFpbj1lLnh0eXBlc0NoYWluP1tdLmNvbmNhdChlLnh0eXBlc0NoYWluKTpbXTtlLnh0eXBlPWl9aWYoIWhbaV0pe2hbaV09dHJ1ZTtnLnB1c2goaSk7ZC5wdXNoKGkpO0V4dC5DbGFzc01hbmFnZXIuc2V0QWxpYXModGhpcywid2lkZ2V0LiIraSl9cmV0dXJuIHRoaXN9fSk7Yi5pbXBsZW1lbnQoe2lzSW5zdGFuY2U6dHJ1ZSwkY2xhc3NOYW1lOiJFeHQuQmFzZSIsY29uZmlnQ2xhc3M6RXh0LmVtcHR5Rm4saW5pdENvbmZpZ0xpc3Q6W10sY29uZmlnTWFwOnt9LGluaXRDb25maWdNYXA6e30sc3RhdGljczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuc3RhdGljcy5jYWxsZXIsZD10aGlzLnNlbGY7aWYoIWUpe3JldHVybiBkfXJldHVybiBlLiRvd25lcn0sY2FsbFBhcmVudDpmdW5jdGlvbihlKXt2YXIgZyxkPShnPXRoaXMuY2FsbFBhcmVudC5jYWxsZXIpJiYoZy4kcHJldmlvdXN8fCgoZz1nLiRvd25lcj9nOmcuY2FsbGVyKSYmZy4kb3duZXIuc3VwZXJjbGFzc1tnLiRuYW1lXSkpO3JldHVybiBkLmFwcGx5KHRoaXMsZXx8Yyl9LGNhbGxTdXBlcjpmdW5jdGlvbihlKXt2YXIgZyxkPShnPXRoaXMuY2FsbFN1cGVyLmNhbGxlcikmJigoZz1nLiRvd25lcj9nOmcuY2FsbGVyKSYmZy4kb3duZXIuc3VwZXJjbGFzc1tnLiRuYW1lXSk7cmV0dXJuIGQuYXBwbHkodGhpcyxlfHxjKX0sc2VsZjpiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGluaXRDb25maWc6ZnVuY3Rpb24oZyl7dmFyIG09ZyxsPUV4dC5DbGFzcy5jb25maWdOYW1lQ2FjaGUsaj1uZXcgdGhpcy5jb25maWdDbGFzcygpLHA9dGhpcy5pbml0Q29uZmlnTGlzdCxoPXRoaXMuY29uZmlnTWFwLG8sayxuLGUsZDt0aGlzLmluaXRDb25maWc9RXh0LmVtcHR5Rm47dGhpcy5pbml0aWFsQ29uZmlnPW18fHt9O3RoaXMuY29uZmlnPWc9KG0pP0V4dC5tZXJnZShqLGcpOmo7aWYobSl7cD1wLnNsaWNlKCk7Zm9yKGUgaW4gbSl7aWYoaFtlXSl7aWYobVtlXSE9PW51bGwpe3AucHVzaChlKTt0aGlzW2xbZV0uaW5pdGlhbGl6ZWRdPWZhbHNlfX19fWZvcihrPTAsbj1wLmxlbmd0aDtrPG47aysrKXtlPXBba107bz1sW2VdO2Q9by5pbml0aWFsaXplZDtpZighdGhpc1tkXSl7dGhpc1tkXT10cnVlO3RoaXNbby5zZXRdLmNhbGwodGhpcyxnW2VdKX19cmV0dXJuIHRoaXN9LGhhc0NvbmZpZzpmdW5jdGlvbihkKXtyZXR1cm4gQm9vbGVhbih0aGlzLmNvbmZpZ01hcFtkXSl9LHNldENvbmZpZzpmdW5jdGlvbihoLGwpe2lmKCFoKXtyZXR1cm4gdGhpc312YXIgZz1FeHQuQ2xhc3MuY29uZmlnTmFtZUNhY2hlLGQ9dGhpcy5jb25maWcsaz10aGlzLmNvbmZpZ01hcCxqPXRoaXMuaW5pdGlhbENvbmZpZyxlLGk7bD1Cb29sZWFuKGwpO2ZvcihlIGluIGgpe2lmKGwmJmouaGFzT3duUHJvcGVydHkoZSkpe2NvbnRpbnVlfWk9aFtlXTtkW2VdPWk7aWYoa1tlXSl7dGhpc1tnW2VdLnNldF0oaSl9fXJldHVybiB0aGlzfSxnZXRDb25maWc6ZnVuY3Rpb24oZSl7dmFyIGQ9RXh0LkNsYXNzLmNvbmZpZ05hbWVDYWNoZTtyZXR1cm4gdGhpc1tkW2VdLmdldF0oKX0sZ2V0SW5pdGlhbENvbmZpZzpmdW5jdGlvbihlKXt2YXIgZD10aGlzLmNvbmZpZztpZighZSl7cmV0dXJuIGR9ZWxzZXtyZXR1cm4gZFtlXX19LG9uQ29uZmlnVXBkYXRlOmZ1bmN0aW9uKGssbSxuKXt2YXIgbz10aGlzLnNlbGYsZyxqLGQsaCxsLGU7az1FeHQuQXJyYXkuZnJvbShrKTtuPW58fHRoaXM7Zm9yKGc9MCxqPWsubGVuZ3RoO2c8ajtnKyspe2Q9a1tnXTtoPSJ1cGRhdGUiK0V4dC5TdHJpbmcuY2FwaXRhbGl6ZShkKTtsPXRoaXNbaF18fEV4dC5lbXB0eUZuO2U9ZnVuY3Rpb24oKXtsLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtuW21dLmFwcGx5KG4sYXJndW1lbnRzKX07ZS4kbmFtZT1oO2UuJG93bmVyPW87dGhpc1toXT1lfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVzdHJveT1FeHQuZW1wdHlGbn19KTtiLnByb3RvdHlwZS5jYWxsT3ZlcnJpZGRlbj1iLnByb3RvdHlwZS5jYWxsUGFyZW50O0V4dC5CYXNlPWJ9KEV4dC5GdW5jdGlvbi5mbGV4U2V0dGVyKSk7KGZ1bmN0aW9uKCl7dmFyIGMsYj1FeHQuQmFzZSxnPVtdLGUsZDtmb3IoZSBpbiBiKXtpZihiLmhhc093blByb3BlcnR5KGUpKXtnLnB1c2goZSl9fWQ9Zy5sZW5ndGg7ZnVuY3Rpb24gYShpKXtmdW5jdGlvbiBoKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpfHxudWxsfXJldHVybiBofUV4dC5DbGFzcz1jPWZ1bmN0aW9uKGksaixoKXtpZih0eXBlb2YgaSE9ImZ1bmN0aW9uIil7aD1qO2o9aTtpPW51bGx9aWYoIWope2o9e319aT1jLmNyZWF0ZShpLGopO2MucHJvY2VzcyhpLGosaCk7cmV0dXJuIGl9O0V4dC5hcHBseShjLHtvbkJlZm9yZUNyZWF0ZWQ6ZnVuY3Rpb24oaSxqLGgpe2kuYWRkTWVtYmVycyhqKTtoLm9uQ3JlYXRlZC5jYWxsKGksaSl9LGNyZWF0ZTpmdW5jdGlvbihoLGwpe3ZhciBqLGs7aWYoIWgpe2g9YSgpfWZvcihrPTA7azxkO2srKyl7aj1nW2tdO2hbal09YltqXX1yZXR1cm4gaH0scHJvY2VzczpmdW5jdGlvbihoLHEsbSl7dmFyIGw9cS5wcmVwcm9jZXNzb3JzfHxjLmRlZmF1bHRQcmVwcm9jZXNzb3JzLHQ9dGhpcy5wcmVwcm9jZXNzb3JzLHc9e29uQmVmb3JlQ3JlYXRlZDp0aGlzLm9uQmVmb3JlQ3JlYXRlZH0sdj1bXSx4LHAsbyx1LG4scyxyLGs7ZGVsZXRlIHEucHJlcHJvY2Vzc29ycztmb3Iobz0wLHU9bC5sZW5ndGg7bzx1O28rKyl7eD1sW29dO2lmKHR5cGVvZiB4PT0ic3RyaW5nIil7eD10W3hdO3A9eC5wcm9wZXJ0aWVzO2lmKHA9PT10cnVlKXt2LnB1c2goeC5mbil9ZWxzZXtpZihwKXtmb3Iobj0wLHM9cC5sZW5ndGg7bjxzO24rKyl7cj1wW25dO2lmKHEuaGFzT3duUHJvcGVydHkocikpe3YucHVzaCh4LmZuKTticmVha319fX19ZWxzZXt2LnB1c2goeCl9fXcub25DcmVhdGVkPW0/bTpFeHQuZW1wdHlGbjt3LnByZXByb2Nlc3NvcnM9djt0aGlzLmRvUHJvY2VzcyhoLHEsdyl9LGRvUHJvY2VzczpmdW5jdGlvbihpLGwsaCl7dmFyIGs9dGhpcyxqPWgucHJlcHJvY2Vzc29ycy5zaGlmdCgpO2lmKCFqKXtoLm9uQmVmb3JlQ3JlYXRlZC5hcHBseShrLGFyZ3VtZW50cyk7cmV0dXJufWlmKGouY2FsbChrLGksbCxoLGsuZG9Qcm9jZXNzKSE9PWZhbHNlKXtrLmRvUHJvY2VzcyhpLGwsaCl9fSxwcmVwcm9jZXNzb3JzOnt9LHJlZ2lzdGVyUHJlcHJvY2Vzc29yOmZ1bmN0aW9uKGksbCxqLGgsayl7aWYoIWgpe2g9Imxhc3QifWlmKCFqKXtqPVtpXX10aGlzLnByZXByb2Nlc3NvcnNbaV09e25hbWU6aSxwcm9wZXJ0aWVzOmp8fGZhbHNlLGZuOmx9O3RoaXMuc2V0RGVmYXVsdFByZXByb2Nlc3NvclBvc2l0aW9uKGksaCxrKTtyZXR1cm4gdGhpc30sZ2V0UHJlcHJvY2Vzc29yOmZ1bmN0aW9uKGgpe3JldHVybiB0aGlzLnByZXByb2Nlc3NvcnNbaF19LGdldFByZXByb2Nlc3NvcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmVwcm9jZXNzb3JzfSxkZWZhdWx0UHJlcHJvY2Vzc29yczpbXSxnZXREZWZhdWx0UHJlcHJvY2Vzc29yczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRlZmF1bHRQcmVwcm9jZXNzb3JzfSxzZXREZWZhdWx0UHJlcHJvY2Vzc29yczpmdW5jdGlvbihoKXt0aGlzLmRlZmF1bHRQcmVwcm9jZXNzb3JzPUV4dC5BcnJheS5mcm9tKGgpO3JldHVybiB0aGlzfSxzZXREZWZhdWx0UHJlcHJvY2Vzc29yUG9zaXRpb246ZnVuY3Rpb24oaixsLGspe3ZhciBoPXRoaXMuZGVmYXVsdFByZXByb2Nlc3NvcnMsaTtpZih0eXBlb2YgbD09InN0cmluZyIpe2lmKGw9PT0iZmlyc3QiKXtoLnVuc2hpZnQoaik7cmV0dXJuIHRoaXN9ZWxzZXtpZihsPT09Imxhc3QiKXtoLnB1c2goaik7cmV0dXJuIHRoaXN9fWw9KGw9PT0iYWZ0ZXIiKT8xOi0xfWk9RXh0LkFycmF5LmluZGV4T2YoaCxrKTtpZihpIT09LTEpe0V4dC5BcnJheS5zcGxpY2UoaCxNYXRoLm1heCgwLGkrbCksMCxqKX1yZXR1cm4gdGhpc30sY29uZmlnTmFtZUNhY2hlOnt9LGdldENvbmZpZ05hbWVNYXA6ZnVuY3Rpb24oail7dmFyIGk9dGhpcy5jb25maWdOYW1lQ2FjaGUsaz1pW2pdLGg7aWYoIWspe2g9ai5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStqLnN1YnN0cigxKTtrPWlbal09e2ludGVybmFsOmosaW5pdGlhbGl6ZWQ6Il9pcyIraCsiSW5pdGlhbGl6ZWQiLGFwcGx5OiJhcHBseSIraCx1cGRhdGU6InVwZGF0ZSIraCxzZXQ6InNldCIraCxnZXQ6ImdldCIraCxkb1NldDoiZG9TZXQiK2gsY2hhbmdlRXZlbnQ6ai50b0xvd2VyQ2FzZSgpKyJjaGFuZ2UifX1yZXR1cm4ga319KTtjLnJlZ2lzdGVyUHJlcHJvY2Vzc29yKCJleHRlbmQiLGZ1bmN0aW9uKGosbil7dmFyIG09RXh0LkJhc2Usbz1tLnByb3RvdHlwZSxwPW4uZXh0ZW5kLGwsaCxrO2RlbGV0ZSBuLmV4dGVuZDtpZihwJiZwIT09T2JqZWN0KXtsPXB9ZWxzZXtsPW19aD1sLnByb3RvdHlwZTtpZighbC4kaXNDbGFzcyl7Zm9yKGsgaW4gbyl7aWYoIWhba10pe2hba109b1trXX19fWouZXh0ZW5kKGwpO2oudHJpZ2dlckV4dGVuZGVkLmFwcGx5KGosYXJndW1lbnRzKTtpZihuLm9uQ2xhc3NFeHRlbmRlZCl7ai5vbkV4dGVuZGVkKG4ub25DbGFzc0V4dGVuZGVkLGopO2RlbGV0ZSBuLm9uQ2xhc3NFeHRlbmRlZH19LHRydWUpO2MucmVnaXN0ZXJQcmVwcm9jZXNzb3IoInN0YXRpY3MiLGZ1bmN0aW9uKGgsaSl7aC5hZGRTdGF0aWNzKGkuc3RhdGljcyk7ZGVsZXRlIGkuc3RhdGljc30pO2MucmVnaXN0ZXJQcmVwcm9jZXNzb3IoImluaGVyaXRhYmxlU3RhdGljcyIsZnVuY3Rpb24oaCxpKXtoLmFkZEluaGVyaXRhYmxlU3RhdGljcyhpLmluaGVyaXRhYmxlU3RhdGljcyk7ZGVsZXRlIGkuaW5oZXJpdGFibGVTdGF0aWNzfSk7Yy5yZWdpc3RlclByZXByb2Nlc3NvcigiY29uZmlnIixmdW5jdGlvbihoLGspe3ZhciBqPWsuY29uZmlnLGk9aC5wcm90b3R5cGU7ZGVsZXRlIGsuY29uZmlnO0V4dC5PYmplY3QuZWFjaChqLGZ1bmN0aW9uKG4sdyl7dmFyIHU9Yy5nZXRDb25maWdOYW1lTWFwKG4pLHE9dS5pbnRlcm5hbCxsPXUuaW5pdGlhbGl6ZWQsdj11LmFwcGx5LG89dS51cGRhdGUsdD11LnNldCxtPXUuZ2V0LHk9KHQgaW4gaSl8fGsuaGFzT3duUHJvcGVydHkodCkscD0odiBpbiBpKXx8ay5oYXNPd25Qcm9wZXJ0eSh2KSxyPShvIGluIGkpfHxrLmhhc093blByb3BlcnR5KG8pLHgscztpZih3PT09bnVsbHx8KCF5JiYhcCYmIXIpKXtpW3FdPXc7aVtsXT10cnVlfWVsc2V7aVtsXT1mYWxzZX1pZigheSl7a1t0XT1mdW5jdGlvbihCKXt2YXIgQT10aGlzW3FdLHo9dGhpc1t2XSxDPXRoaXNbb107aWYoIXRoaXNbbF0pe3RoaXNbbF09dHJ1ZX1pZih6KXtCPXouY2FsbCh0aGlzLEIsQSl9aWYodHlwZW9mIEIhPSJ1bmRlZmluZWQiKXt0aGlzW3FdPUI7aWYoQyYmQiE9PUEpe0MuY2FsbCh0aGlzLEIsQSl9fXJldHVybiB0aGlzfX1pZighKG0gaW4gaSl8fGsuaGFzT3duUHJvcGVydHkobSkpe3M9a1ttXXx8ZmFsc2U7aWYocyl7eD1mdW5jdGlvbigpe3JldHVybiBzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZWxzZXt4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbcV19fWtbbV09ZnVuY3Rpb24oKXt2YXIgejtpZighdGhpc1tsXSl7dGhpc1tsXT10cnVlO3RoaXNbdF0odGhpcy5jb25maWdbbl0pfXo9dGhpc1ttXTtpZigiJHByZXZpb3VzIiBpbiB6KXt6LiRwcmV2aW91cz14fWVsc2V7dGhpc1ttXT14fXJldHVybiB4LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSk7aC5hZGRDb25maWcoaix0cnVlKX0pO2MucmVnaXN0ZXJQcmVwcm9jZXNzb3IoIm1peGlucyIsZnVuY3Rpb24obCxwLGgpe3ZhciBqPXAubWl4aW5zLG0sayxuLG87ZGVsZXRlIHAubWl4aW5zO0V4dC5GdW5jdGlvbi5pbnRlcmNlcHRCZWZvcmUoaCwib25DcmVhdGVkIixmdW5jdGlvbigpe2lmKGogaW5zdGFuY2VvZiBBcnJheSl7Zm9yKG49MCxvPWoubGVuZ3RoO248bztuKyspe2s9altuXTttPWsucHJvdG90eXBlLm1peGluSWR8fGsuJGNsYXNzTmFtZTtsLm1peGluKG0sayl9fWVsc2V7Zm9yKHZhciBpIGluIGope2lmKGouaGFzT3duUHJvcGVydHkoaSkpe2wubWl4aW4oaSxqW2ldKX19fX0pfSk7RXh0LmV4dGVuZD1mdW5jdGlvbihqLGssaSl7aWYoYXJndW1lbnRzLmxlbmd0aD09PTImJkV4dC5pc09iamVjdChrKSl7aT1rO2s9ajtqPW51bGx9dmFyIGg7aWYoIWspe3Rocm93IG5ldyBFcnJvcigiW0V4dC5leHRlbmRdIEF0dGVtcHRpbmcgdG8gZXh0ZW5kIGZyb20gYSBjbGFzcyB3aGljaCBoYXMgbm90IGJlZW4gbG9hZGVkIG9uIHRoZSBwYWdlLiIpfWkuZXh0ZW5kPWs7aS5wcmVwcm9jZXNzb3JzPVsiZXh0ZW5kIiwic3RhdGljcyIsImluaGVyaXRhYmxlU3RhdGljcyIsIm1peGlucyIsImNvbmZpZyJdO2lmKGope2g9bmV3IGMoaixpKTtoLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1qfWVsc2V7aD1uZXcgYyhpKX1oLnByb3RvdHlwZS5vdmVycmlkZT1mdW5jdGlvbihuKXtmb3IodmFyIGwgaW4gbil7aWYobi5oYXNPd25Qcm9wZXJ0eShsKSl7dGhpc1tsXT1uW2xdfX19O3JldHVybiBofX0oKSk7KGZ1bmN0aW9uKGMsZSxoLGQsZyl7ZnVuY3Rpb24gYSgpe2Z1bmN0aW9uIGkoKXtyZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fG51bGx9cmV0dXJuIGl9dmFyIGI9RXh0LkNsYXNzTWFuYWdlcj17Y2xhc3Nlczp7fSxleGlzdENhY2hlOnt9LG5hbWVzcGFjZVJld3JpdGVzOlt7ZnJvbToiRXh0LiIsdG86RXh0fV0sbWFwczp7YWx0ZXJuYXRlVG9OYW1lOnt9LGFsaWFzVG9OYW1lOnt9LG5hbWVUb0FsaWFzZXM6e30sbmFtZVRvQWx0ZXJuYXRlczp7fX0sZW5hYmxlTmFtZXNwYWNlUGFyc2VDYWNoZTp0cnVlLG5hbWVzcGFjZVBhcnNlQ2FjaGU6e30saW5zdGFudGlhdG9yczpbXSxpc0NyZWF0ZWQ6ZnVuY3Rpb24obil7dmFyIG09dGhpcy5leGlzdENhY2hlLGwsbyxrLGoscDtpZih0aGlzLmNsYXNzZXNbbl18fG1bbl0pe3JldHVybiB0cnVlfWo9ZztwPXRoaXMucGFyc2VOYW1lc3BhY2Uobik7Zm9yKGw9MCxvPXAubGVuZ3RoO2w8bztsKyspe2s9cFtsXTtpZih0eXBlb2YgayE9InN0cmluZyIpe2o9a31lbHNle2lmKCFqfHwhaltrXSl7cmV0dXJuIGZhbHNlfWo9altrXX19bVtuXT10cnVlO3RoaXMudHJpZ2dlckNyZWF0ZWQobik7cmV0dXJuIHRydWV9LGNyZWF0ZWRMaXN0ZW5lcnM6W10sbmFtZUNyZWF0ZWRMaXN0ZW5lcnM6e30sdHJpZ2dlckNyZWF0ZWQ6ZnVuY3Rpb24ocyl7dmFyIHU9dGhpcy5jcmVhdGVkTGlzdGVuZXJzLG09dGhpcy5uYW1lQ3JlYXRlZExpc3RlbmVycyxuPXRoaXMubWFwcy5uYW1lVG9BbHRlcm5hdGVzW3NdLHQ9W3NdLHAscixvLHEsbCxrO2ZvcihwPTAscj11Lmxlbmd0aDtwPHI7cCsrKXtsPXVbcF07bC5mbi5jYWxsKGwuc2NvcGUscyl9aWYobil7dC5wdXNoLmFwcGx5KHQsbil9Zm9yKHA9MCxyPXQubGVuZ3RoO3A8cjtwKyspe2s9dFtwXTt1PW1ba107aWYodSl7Zm9yKG89MCxxPXUubGVuZ3RoO288cTtvKyspe2w9dVtvXTtsLmZuLmNhbGwobC5zY29wZSxrKX1kZWxldGUgbVtrXX19fSxvbkNyZWF0ZWQ6ZnVuY3Rpb24obSxsLGspe3ZhciBqPXRoaXMuY3JlYXRlZExpc3RlbmVycyxpPXRoaXMubmFtZUNyZWF0ZWRMaXN0ZW5lcnMsbj17Zm46bSxzY29wZTpsfTtpZihrKXtpZih0aGlzLmlzQ3JlYXRlZChrKSl7bS5jYWxsKGwsayk7cmV0dXJufWlmKCFpW2tdKXtpW2tdPVtdfWlba10ucHVzaChuKX1lbHNle2oucHVzaChuKX19LHBhcnNlTmFtZXNwYWNlOmZ1bmN0aW9uKGwpe3ZhciBqPXRoaXMubmFtZXNwYWNlUGFyc2VDYWNoZSxtLG8scSxrLHQscyxyLG4scDtpZih0aGlzLmVuYWJsZU5hbWVzcGFjZVBhcnNlQ2FjaGUpe2lmKGouaGFzT3duUHJvcGVydHkobCkpe3JldHVybiBqW2xdfX1tPVtdO289dGhpcy5uYW1lc3BhY2VSZXdyaXRlcztxPWc7az1sO2ZvcihuPTAscD1vLmxlbmd0aDtuPHA7bisrKXt0PW9bbl07cz10LmZyb207cj10LnRvO2lmKGs9PT1zfHxrLnN1YnN0cmluZygwLHMubGVuZ3RoKT09PXMpe2s9ay5zdWJzdHJpbmcocy5sZW5ndGgpO2lmKHR5cGVvZiByIT0ic3RyaW5nIil7cT1yfWVsc2V7bT1tLmNvbmNhdChyLnNwbGl0KCIuIikpfWJyZWFrfX1tLnB1c2gocSk7bT1tLmNvbmNhdChrLnNwbGl0KCIuIikpO2lmKHRoaXMuZW5hYmxlTmFtZXNwYWNlUGFyc2VDYWNoZSl7altsXT1tfXJldHVybiBtfSxzZXROYW1lc3BhY2U6ZnVuY3Rpb24obSxwKXt2YXIgaz1nLHE9dGhpcy5wYXJzZU5hbWVzcGFjZShtKSxvPXEubGVuZ3RoLTEsaj1xW29dLG4sbDtmb3Iobj0wO248bztuKyspe2w9cVtuXTtpZih0eXBlb2YgbCE9InN0cmluZyIpe2s9bH1lbHNle2lmKCFrW2xdKXtrW2xdPXt9fWs9a1tsXX19a1tqXT1wO3JldHVybiBrW2pdfSxjcmVhdGVOYW1lc3BhY2VzOmZ1bmN0aW9uKCl7dmFyIGs9ZyxwLG0sbixsLG8scTtmb3Iobj0wLG89YXJndW1lbnRzLmxlbmd0aDtuPG87bisrKXtwPXRoaXMucGFyc2VOYW1lc3BhY2UoYXJndW1lbnRzW25dKTtmb3IobD0wLHE9cC5sZW5ndGg7bDxxO2wrKyl7bT1wW2xdO2lmKHR5cGVvZiBtIT0ic3RyaW5nIil7az1tfWVsc2V7aWYoIWtbbV0pe2tbbV09e319az1rW21dfX19cmV0dXJuIGt9LHNldDpmdW5jdGlvbihpLG0pe3ZhciBsPXRoaXMsbz1sLm1hcHMsbj1vLm5hbWVUb0FsdGVybmF0ZXMsaz1sLmdldE5hbWUobSksajtsLmNsYXNzZXNbaV09bC5zZXROYW1lc3BhY2UoaSxtKTtpZihrJiZrIT09aSl7by5hbHRlcm5hdGVUb05hbWVbaV09aztqPW5ba118fChuW2tdPVtdKTtqLnB1c2goaSl9cmV0dXJuIHRoaXN9LGdldDpmdW5jdGlvbihsKXt2YXIgbj10aGlzLmNsYXNzZXMsaixwLGssbSxvO2lmKG5bbF0pe3JldHVybiBuW2xdfWo9ZztwPXRoaXMucGFyc2VOYW1lc3BhY2UobCk7Zm9yKG09MCxvPXAubGVuZ3RoO208bzttKyspe2s9cFttXTtpZih0eXBlb2YgayE9InN0cmluZyIpe2o9a31lbHNle2lmKCFqfHwhaltrXSl7cmV0dXJuIG51bGx9aj1qW2tdfX1yZXR1cm4gan0sc2V0QWxpYXM6ZnVuY3Rpb24oaSxqKXt2YXIgbD10aGlzLm1hcHMuYWxpYXNUb05hbWUsbT10aGlzLm1hcHMubmFtZVRvQWxpYXNlcyxrO2lmKHR5cGVvZiBpPT0ic3RyaW5nIil7az1pfWVsc2V7az10aGlzLmdldE5hbWUoaSl9aWYoaiYmbFtqXSE9PWspe2xbal09a31pZighbVtrXSl7bVtrXT1bXX1pZihqKXtFeHQuQXJyYXkuaW5jbHVkZShtW2tdLGopfXJldHVybiB0aGlzfSxhZGROYW1lQWxpYXNNYXBwaW5nczpmdW5jdGlvbihqKXt2YXIgbz10aGlzLm1hcHMuYWxpYXNUb05hbWUscD10aGlzLm1hcHMubmFtZVRvQWxpYXNlcyxtLG4sbCxrO2ZvcihtIGluIGope249cFttXXx8KHBbbV09W10pO2ZvcihrPTA7azxqW21dLmxlbmd0aDtrKyspe2w9alttXVtrXTtpZighb1tsXSl7b1tsXT1tO24ucHVzaChsKX19fXJldHVybiB0aGlzfSxhZGROYW1lQWx0ZXJuYXRlTWFwcGluZ3M6ZnVuY3Rpb24obSl7dmFyIGo9dGhpcy5tYXBzLmFsdGVybmF0ZVRvTmFtZSxwPXRoaXMubWFwcy5uYW1lVG9BbHRlcm5hdGVzLGwsbixvLGs7Zm9yKGwgaW4gbSl7bj1wW2xdfHwocFtsXT1bXSk7Zm9yKGs9MDtrPG1bbF0ubGVuZ3RoO2srKyl7bz1tW2xdO2lmKCFqW29dKXtqW29dPWw7bi5wdXNoKG8pfX19cmV0dXJuIHRoaXN9LGdldEJ5QWxpYXM6ZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuZ2V0KHRoaXMuZ2V0TmFtZUJ5QWxpYXMoaSkpfSxnZXROYW1lQnlBbGlhczpmdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5tYXBzLmFsaWFzVG9OYW1lW2ldfHwiIn0sZ2V0TmFtZUJ5QWx0ZXJuYXRlOmZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLm1hcHMuYWx0ZXJuYXRlVG9OYW1lW2ldfHwiIn0sZ2V0QWxpYXNlc0J5TmFtZTpmdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5tYXBzLm5hbWVUb0FsaWFzZXNbaV18fFtdfSxnZXROYW1lOmZ1bmN0aW9uKGkpe3JldHVybiBpJiZpLiRjbGFzc05hbWV8fCIifSxnZXRDbGFzczpmdW5jdGlvbihpKXtyZXR1cm4gaSYmaS5zZWxmfHxudWxsfSxjcmVhdGU6ZnVuY3Rpb24oaixsLGkpe3ZhciBrPWEoKTtpZih0eXBlb2YgbD09ImZ1bmN0aW9uIil7bD1sKGspfWwuJGNsYXNzTmFtZT1qO3JldHVybiBuZXcgYyhrLGwsZnVuY3Rpb24oKXt2YXIgbT1sLnBvc3Rwcm9jZXNzb3JzfHxiLmRlZmF1bHRQb3N0cHJvY2Vzc29ycyx0PWIucG9zdHByb2Nlc3NvcnMsdT1bXSxzLG8scixuLHEscCx2O2RlbGV0ZSBsLnBvc3Rwcm9jZXNzb3JzO2ZvcihvPTAscj1tLmxlbmd0aDtvPHI7bysrKXtzPW1bb107aWYodHlwZW9mIHM9PSJzdHJpbmciKXtzPXRbc107cD1zLnByb3BlcnRpZXM7aWYocD09PXRydWUpe3UucHVzaChzLmZuKX1lbHNle2lmKHApe2ZvcihuPTAscT1wLmxlbmd0aDtuPHE7bisrKXt2PXBbbl07aWYobC5oYXNPd25Qcm9wZXJ0eSh2KSl7dS5wdXNoKHMuZm4pO2JyZWFrfX19fX1lbHNle3UucHVzaChzKX19bC5wb3N0cHJvY2Vzc29ycz11O2wuY3JlYXRlZEZuPWk7Yi5wcm9jZXNzQ3JlYXRlKGosdGhpcyxsKX0pfSxwcm9jZXNzQ3JlYXRlOmZ1bmN0aW9uKGwsaixuKXt2YXIgbT10aGlzLGk9bi5wb3N0cHJvY2Vzc29ycy5zaGlmdCgpLGs9bi5jcmVhdGVkRm47aWYoIWkpe2lmKGwpe20uc2V0KGwsail9aWYoayl7ay5jYWxsKGosail9aWYobCl7bS50cmlnZ2VyQ3JlYXRlZChsKX1yZXR1cm59aWYoaS5jYWxsKG0sbCxqLG4sbS5wcm9jZXNzQ3JlYXRlKSE9PWZhbHNlKXttLnByb2Nlc3NDcmVhdGUobCxqLG4pfX0sY3JlYXRlT3ZlcnJpZGU6ZnVuY3Rpb24obCxwLGope3ZhciBvPXRoaXMsbj1wLm92ZXJyaWRlLGs9cC5yZXF1aXJlcyxpPXAudXNlcyxtPWZ1bmN0aW9uKCl7dmFyIHEscjtpZihrKXtyPWs7az1udWxsO0V4dC5Mb2FkZXIucmVxdWlyZShyLG0pfWVsc2V7cT1vLmdldChuKTtkZWxldGUgcC5vdmVycmlkZTtkZWxldGUgcC5yZXF1aXJlcztkZWxldGUgcC51c2VzO0V4dC5vdmVycmlkZShxLHApO28udHJpZ2dlckNyZWF0ZWQobCk7aWYoaSl7RXh0LkxvYWRlci5hZGRVc2VkQ2xhc3NlcyhpKX1pZihqKXtqLmNhbGwocSl9fX07by5leGlzdENhY2hlW2xdPXRydWU7by5vbkNyZWF0ZWQobSxvLG4pO3JldHVybiBvfSxpbnN0YW50aWF0ZUJ5QWxpYXM6ZnVuY3Rpb24oKXt2YXIgaj1hcmd1bWVudHNbMF0saT1oLmNhbGwoYXJndW1lbnRzKSxrPXRoaXMuZ2V0TmFtZUJ5QWxpYXMoaik7aWYoIWspe2s9dGhpcy5tYXBzLmFsaWFzVG9OYW1lW2pdO0V4dC5zeW5jUmVxdWlyZShrKX1pWzBdPWs7cmV0dXJuIHRoaXMuaW5zdGFudGlhdGUuYXBwbHkodGhpcyxpKX0saW5zdGFudGlhdGU6ZnVuY3Rpb24oKXt2YXIgaz1hcmd1bWVudHNbMF0sbT10eXBlb2YgayxqPWguY2FsbChhcmd1bWVudHMsMSksbD1rLG4saTtpZihtIT0iZnVuY3Rpb24iKXtpZihtIT0ic3RyaW5nIiYmai5sZW5ndGg9PT0wKXtqPVtrXTtrPWsueGNsYXNzfWk9dGhpcy5nZXQoayl9ZWxzZXtpPWt9aWYoIWkpe249dGhpcy5nZXROYW1lQnlBbGlhcyhrKTtpZihuKXtrPW47aT10aGlzLmdldChrKX19aWYoIWkpe249dGhpcy5nZXROYW1lQnlBbHRlcm5hdGUoayk7aWYobil7az1uO2k9dGhpcy5nZXQoayl9fWlmKCFpKXtFeHQuc3luY1JlcXVpcmUoayk7aT10aGlzLmdldChrKX1yZXR1cm4gdGhpcy5nZXRJbnN0YW50aWF0b3Ioai5sZW5ndGgpKGksail9LGR5bkluc3RhbnRpYXRlOmZ1bmN0aW9uKGosaSl7aT1kKGksdHJ1ZSk7aS51bnNoaWZ0KGopO3JldHVybiB0aGlzLmluc3RhbnRpYXRlLmFwcGx5KHRoaXMsaSl9LGdldEluc3RhbnRpYXRvcjpmdW5jdGlvbihtKXt2YXIgbD10aGlzLmluc3RhbnRpYXRvcnMsbixrLGo7bj1sW21dO2lmKCFuKXtrPW07aj1bXTtmb3Ioaz0wO2s8bTtrKyspe2oucHVzaCgiYVsiK2srIl0iKX1uPWxbbV09bmV3IEZ1bmN0aW9uKCJjIiwiYSIsInJldHVybiBuZXcgYygiK2ouam9pbigiLCIpKyIpIil9cmV0dXJuIG59LHBvc3Rwcm9jZXNzb3JzOnt9LGRlZmF1bHRQb3N0cHJvY2Vzc29yczpbXSxyZWdpc3RlclBvc3Rwcm9jZXNzb3I6ZnVuY3Rpb24oaixtLGssaSxsKXtpZighaSl7aT0ibGFzdCJ9aWYoIWspe2s9W2pdfXRoaXMucG9zdHByb2Nlc3NvcnNbal09e25hbWU6aixwcm9wZXJ0aWVzOmt8fGZhbHNlLGZuOm19O3RoaXMuc2V0RGVmYXVsdFBvc3Rwcm9jZXNzb3JQb3NpdGlvbihqLGksbCk7cmV0dXJuIHRoaXN9LHNldERlZmF1bHRQb3N0cHJvY2Vzc29yczpmdW5jdGlvbihpKXt0aGlzLmRlZmF1bHRQb3N0cHJvY2Vzc29ycz1kKGkpO3JldHVybiB0aGlzfSxzZXREZWZhdWx0UG9zdHByb2Nlc3NvclBvc2l0aW9uOmZ1bmN0aW9uKGosbSxsKXt2YXIgaz10aGlzLmRlZmF1bHRQb3N0cHJvY2Vzc29ycyxpO2lmKHR5cGVvZiBtPT0ic3RyaW5nIil7aWYobT09PSJmaXJzdCIpe2sudW5zaGlmdChqKTtyZXR1cm4gdGhpc31lbHNle2lmKG09PT0ibGFzdCIpe2sucHVzaChqKTtyZXR1cm4gdGhpc319bT0obT09PSJhZnRlciIpPzE6LTF9aT1FeHQuQXJyYXkuaW5kZXhPZihrLGwpO2lmKGkhPT0tMSl7RXh0LkFycmF5LnNwbGljZShrLE1hdGgubWF4KDAsaSttKSwwLGopfXJldHVybiB0aGlzfSxnZXROYW1lc0J5RXhwcmVzc2lvbjpmdW5jdGlvbihxKXt2YXIgbz10aGlzLm1hcHMubmFtZVRvQWxpYXNlcyxyPVtdLGosbixsLGsscyxtLHA7aWYocS5pbmRleE9mKCIqIikhPT0tMSl7cT1xLnJlcGxhY2UoL1wqL2csIiguKj8pIik7cz1uZXcgUmVnRXhwKCJeIitxKyIkIik7Zm9yKGogaW4gbyl7aWYoby5oYXNPd25Qcm9wZXJ0eShqKSl7bD1vW2pdO2lmKGouc2VhcmNoKHMpIT09LTEpe3IucHVzaChqKX1lbHNle2ZvcihtPTAscD1sLmxlbmd0aDttPHA7bSsrKXtuPWxbbV07aWYobi5zZWFyY2gocykhPT0tMSl7ci5wdXNoKGopO2JyZWFrfX19fX19ZWxzZXtrPXRoaXMuZ2V0TmFtZUJ5QWxpYXMocSk7aWYoayl7ci5wdXNoKGspfWVsc2V7az10aGlzLmdldE5hbWVCeUFsdGVybmF0ZShxKTtpZihrKXtyLnB1c2goayl9ZWxzZXtyLnB1c2gocSl9fX1yZXR1cm4gcn19O2IucmVnaXN0ZXJQb3N0cHJvY2Vzc29yKCJhbGlhcyIsZnVuY3Rpb24obCxrLG8pe3ZhciBqPW8uYWxpYXMsbSxuO2ZvcihtPTAsbj1qLmxlbmd0aDttPG47bSsrKXtlPWpbbV07dGhpcy5zZXRBbGlhcyhrLGUpfX0sWyJ4dHlwZSIsImFsaWFzIl0pO2IucmVnaXN0ZXJQb3N0cHJvY2Vzc29yKCJzaW5nbGV0b24iLGZ1bmN0aW9uKGosaSxsLGspe2suY2FsbCh0aGlzLGosbmV3IGkoKSxsKTtyZXR1cm4gZmFsc2V9KTtiLnJlZ2lzdGVyUG9zdHByb2Nlc3NvcigiYWx0ZXJuYXRlQ2xhc3NOYW1lIixmdW5jdGlvbihrLGosbyl7dmFyIG09by5hbHRlcm5hdGVDbGFzc05hbWUsbCxuLHA7aWYoIShtIGluc3RhbmNlb2YgQXJyYXkpKXttPVttXX1mb3IobD0wLG49bS5sZW5ndGg7bDxuO2wrKyl7cD1tW2xdO3RoaXMuc2V0KHAsail9fSk7RXh0LmFwcGx5KEV4dCx7Y3JlYXRlOmUoYiwiaW5zdGFudGlhdGUiKSx3aWRnZXQ6ZnVuY3Rpb24oayxqKXt2YXIgbz1rLGwsbSxpLG47aWYodHlwZW9mIG8hPSJzdHJpbmciKXtqPWs7bz1qLnh0eXBlfWVsc2V7aj1qfHx7fX1pZihqLmlzQ29tcG9uZW50KXtyZXR1cm4gan1sPSJ3aWRnZXQuIitvO209Yi5nZXROYW1lQnlBbGlhcyhsKTtpZighbSl7bj10cnVlfWk9Yi5nZXQobSk7aWYobnx8IWkpe3JldHVybiBiLmluc3RhbnRpYXRlQnlBbGlhcyhsLGopfXJldHVybiBuZXcgaShqKX0sY3JlYXRlQnlBbGlhczplKGIsImluc3RhbnRpYXRlQnlBbGlhcyIpLGRlZmluZTpmdW5jdGlvbihqLGssaSl7aWYoay5vdmVycmlkZSl7cmV0dXJuIGIuY3JlYXRlT3ZlcnJpZGUuYXBwbHkoYixhcmd1bWVudHMpfXJldHVybiBiLmNyZWF0ZS5hcHBseShiLGFyZ3VtZW50cyl9LGdldENsYXNzTmFtZTplKGIsImdldE5hbWUiKSxnZXREaXNwbGF5TmFtZTpmdW5jdGlvbihpKXtpZihpKXtpZihpLmRpc3BsYXlOYW1lKXtyZXR1cm4gaS5kaXNwbGF5TmFtZX1pZihpLiRuYW1lJiZpLiRjbGFzcyl7cmV0dXJuIEV4dC5nZXRDbGFzc05hbWUoaS4kY2xhc3MpKyIjIitpLiRuYW1lfWlmKGkuJGNsYXNzTmFtZSl7cmV0dXJuIGkuJGNsYXNzTmFtZX19cmV0dXJuIkFub255bW91cyJ9LGdldENsYXNzOmUoYiwiZ2V0Q2xhc3MiKSxuYW1lc3BhY2U6ZShiLCJjcmVhdGVOYW1lc3BhY2VzIil9KTtFeHQuY3JlYXRlV2lkZ2V0PUV4dC53aWRnZXQ7RXh0Lm5zPUV4dC5uYW1lc3BhY2U7Yy5yZWdpc3RlclByZXByb2Nlc3NvcigiY2xhc3NOYW1lIixmdW5jdGlvbihpLGope2lmKGouJGNsYXNzTmFtZSl7aS4kY2xhc3NOYW1lPWouJGNsYXNzTmFtZX19LHRydWUsImZpcnN0Iik7Yy5yZWdpc3RlclByZXByb2Nlc3NvcigiYWxpYXMiLGZ1bmN0aW9uKHUsbyl7dmFyIHM9dS5wcm90b3R5cGUsbD1kKG8ueHR5cGUpLGo9ZChvLmFsaWFzKSx2PSJ3aWRnZXQuIix0PXYubGVuZ3RoLHA9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwocy54dHlwZXNDaGFpbnx8W10pLG09RXh0Lm1lcmdlKHt9LHMueHR5cGVzTWFwfHx7fSksbixyLHEsaztmb3Iobj0wLHI9ai5sZW5ndGg7bjxyO24rKyl7cT1qW25dO2lmKHEuc3Vic3RyaW5nKDAsdCk9PT12KXtrPXEuc3Vic3RyaW5nKHQpO0V4dC5BcnJheS5pbmNsdWRlKGwsayl9fXUueHR5cGU9by54dHlwZT1sWzBdO28ueHR5cGVzPWw7Zm9yKG49MCxyPWwubGVuZ3RoO248cjtuKyspe2s9bFtuXTtpZighbVtrXSl7bVtrXT10cnVlO3AucHVzaChrKX19by54dHlwZXNDaGFpbj1wO28ueHR5cGVzTWFwPW07RXh0LkZ1bmN0aW9uLmludGVyY2VwdEFmdGVyKG8sIm9uQ2xhc3NDcmVhdGVkIixmdW5jdGlvbigpe3ZhciBpPXMubWl4aW5zLHgsdztmb3IoeCBpbiBpKXtpZihpLmhhc093blByb3BlcnR5KHgpKXt3PWlbeF07bD13Lnh0eXBlcztpZihsKXtmb3Iobj0wLHI9bC5sZW5ndGg7bjxyO24rKyl7az1sW25dO2lmKCFtW2tdKXttW2tdPXRydWU7cC5wdXNoKGspfX19fX19KTtmb3Iobj0wLHI9bC5sZW5ndGg7bjxyO24rKyl7az1sW25dO0V4dC5BcnJheS5pbmNsdWRlKGosditrKX1vLmFsaWFzPWp9LFsieHR5cGUiLCJhbGlhcyJdKX0oRXh0LkNsYXNzLEV4dC5GdW5jdGlvbi5hbGlhcyxBcnJheS5wcm90b3R5cGUuc2xpY2UsRXh0LkFycmF5LmZyb20sRXh0Lmdsb2JhbCkpO0V4dC5Mb2FkZXI9bmV3IGZ1bmN0aW9uKCl7dmFyIGo9dGhpcyxiPUV4dC5DbGFzc01hbmFnZXIscj1FeHQuQ2xhc3MsZT1FeHQuRnVuY3Rpb24uZmxleFNldHRlcixtPUV4dC5GdW5jdGlvbi5hbGlhcyxhPUV4dC5GdW5jdGlvbi5wYXNzLGQ9RXh0LkZ1bmN0aW9uLmRlZmVyLGg9RXh0LkFycmF5LmVyYXNlLGw9WyJleHRlbmQiLCJtaXhpbnMiLCJyZXF1aXJlcyJdLHQ9e30saz1bXSxjPS9cL1wuXC8vZyxnPS9cLi9nO0V4dC5hcHBseShqLHtpc0luSGlzdG9yeTp0LGhpc3Rvcnk6ayxjb25maWc6e2VuYWJsZWQ6ZmFsc2Usc2NyaXB0Q2hhaW5EZWxheTpmYWxzZSxkaXNhYmxlQ2FjaGluZzp0cnVlLGRpc2FibGVDYWNoaW5nUGFyYW06Il9kYyIsZ2FyYmFnZUNvbGxlY3Q6ZmFsc2UscGF0aHM6e0V4dDoiLiJ9LHByZXNlcnZlU2NyaXB0czp0cnVlLHNjcmlwdENoYXJzZXQ6dW5kZWZpbmVkfSxzZXRDb25maWc6ZnVuY3Rpb24odyx4KXtpZihFeHQuaXNPYmplY3QodykmJmFyZ3VtZW50cy5sZW5ndGg9PT0xKXtFeHQubWVyZ2Uoai5jb25maWcsdyl9ZWxzZXtqLmNvbmZpZ1t3XT0oRXh0LmlzT2JqZWN0KHgpKT9FeHQubWVyZ2Uoai5jb25maWdbd10seCk6eH1yZXR1cm4gan0sZ2V0Q29uZmlnOmZ1bmN0aW9uKHcpe2lmKHcpe3JldHVybiBqLmNvbmZpZ1t3XX1yZXR1cm4gai5jb25maWd9LHNldFBhdGg6ZShmdW5jdGlvbih3LHgpe2ouY29uZmlnLnBhdGhzW3ddPXg7cmV0dXJuIGp9KSxhZGRDbGFzc1BhdGhNYXBwaW5nczpmdW5jdGlvbih4KXt2YXIgdztmb3IodyBpbiB4KXtqLmNvbmZpZy5wYXRoc1t3XT14W3ddfXJldHVybiBqfSxnZXRQYXRoOmZ1bmN0aW9uKHcpe3ZhciB5PSIiLHo9ai5jb25maWcucGF0aHMseD1qLmdldFByZWZpeCh3KTtpZih4Lmxlbmd0aD4wKXtpZih4PT09dyl7cmV0dXJuIHpbeF19eT16W3hdO3c9dy5zdWJzdHJpbmcoeC5sZW5ndGgrMSl9aWYoeS5sZW5ndGg+MCl7eSs9Ii8ifXJldHVybiB5LnJlcGxhY2UoYywiLyIpK3cucmVwbGFjZShnLCIvIikrIi5qcyJ9LGdldFByZWZpeDpmdW5jdGlvbih4KXt2YXIgej1qLmNvbmZpZy5wYXRocyx5LHc9IiI7aWYoei5oYXNPd25Qcm9wZXJ0eSh4KSl7cmV0dXJuIHh9Zm9yKHkgaW4geil7aWYoei5oYXNPd25Qcm9wZXJ0eSh5KSYmeSsiLiI9PT14LnN1YnN0cmluZygwLHkubGVuZ3RoKzEpKXtpZih5Lmxlbmd0aD53Lmxlbmd0aCl7dz15fX19cmV0dXJuIHd9LGlzQUNsYXNzTmFtZVdpdGhBS25vd25QcmVmaXg6ZnVuY3Rpb24odyl7dmFyIHg9ai5nZXRQcmVmaXgodyk7cmV0dXJuIHghPT0iIiYmeCE9PXd9LHJlcXVpcmU6ZnVuY3Rpb24oeSx4LHcseil7aWYoeCl7eC5jYWxsKHcpfX0sc3luY1JlcXVpcmU6ZnVuY3Rpb24oKXt9LGV4Y2x1ZGU6ZnVuY3Rpb24odyl7cmV0dXJue3JlcXVpcmU6ZnVuY3Rpb24oeix5LHgpe3JldHVybiBqLnJlcXVpcmUoeix5LHgsdyl9LHN5bmNSZXF1aXJlOmZ1bmN0aW9uKHoseSx4KXtyZXR1cm4gai5zeW5jUmVxdWlyZSh6LHkseCx3KX19fSxvblJlYWR5OmZ1bmN0aW9uKHoseSxBLHcpe3ZhciB4O2lmKEEhPT1mYWxzZSYmRXh0Lm9uRG9jdW1lbnRSZWFkeSl7eD16O3o9ZnVuY3Rpb24oKXtFeHQub25Eb2N1bWVudFJlYWR5KHgseSx3KX19ei5jYWxsKHkpfX0pO3ZhciBvPVtdLHA9e30scz17fSxxPXt9LG49e30sdT1bXSx2PVtdLGk9e307RXh0LmFwcGx5KGose2RvY3VtZW50SGVhZDp0eXBlb2YgZG9jdW1lbnQhPSJ1bmRlZmluZWQiJiYoZG9jdW1lbnQuaGVhZHx8ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXSksaXNMb2FkaW5nOmZhbHNlLHF1ZXVlOm8saXNDbGFzc0ZpbGVMb2FkZWQ6cCxpc0ZpbGVMb2FkZWQ6cyxyZWFkeUxpc3RlbmVyczp1LG9wdGlvbmFsUmVxdWlyZXM6dixyZXF1aXJlc01hcDppLG51bVBlbmRpbmdGaWxlczowLG51bUxvYWRlZEZpbGVzOjAsaGFzRmlsZUxvYWRFcnJvcjpmYWxzZSxjbGFzc05hbWVUb0ZpbGVQYXRoTWFwOnEsc2NyaXB0c0xvYWRpbmc6MCxzeW5jTW9kZUVuYWJsZWQ6ZmFsc2Usc2NyaXB0RWxlbWVudHM6bixyZWZyZXNoUXVldWU6ZnVuY3Rpb24oKXt2YXIgQT1vLmxlbmd0aCx4LHosdyx5O2lmKCFBJiYhai5zY3JpcHRzTG9hZGluZyl7cmV0dXJuIGoudHJpZ2dlclJlYWR5KCl9Zm9yKHg9MDt4PEE7eCsrKXt6PW9beF07aWYoeil7eT16LnJlcXVpcmVzO2lmKHkubGVuZ3RoPmoubnVtTG9hZGVkRmlsZXMpe2NvbnRpbnVlfWZvcih3PTA7dzx5Lmxlbmd0aDspe2lmKGIuaXNDcmVhdGVkKHlbd10pKXtoKHksdywxKX1lbHNle3crK319aWYoei5yZXF1aXJlcy5sZW5ndGg9PT0wKXtoKG8seCwxKTt6LmNhbGxiYWNrLmNhbGwoei5zY29wZSk7ai5yZWZyZXNoUXVldWUoKTticmVha319fXJldHVybiBqfSxpbmplY3RTY3JpcHRFbGVtZW50OmZ1bmN0aW9uKHcsRCxBLEYseSl7dmFyIEU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0IiksQj1mYWxzZSx4PWouY29uZmlnLEM9ZnVuY3Rpb24oKXtpZighQil7Qj10cnVlO0Uub25sb2FkPUUub25yZWFkeXN0YXRlY2hhbmdlPUUub25lcnJvcj1udWxsO2lmKHR5cGVvZiB4LnNjcmlwdENoYWluRGVsYXk9PSJudW1iZXIiKXtkKEQseC5zY3JpcHRDaGFpbkRlbGF5LEYpfWVsc2V7RC5jYWxsKEYpfWouY2xlYW51cFNjcmlwdEVsZW1lbnQoRSx4LnByZXNlcnZlU2NyaXB0cz09PWZhbHNlLHguZ2FyYmFnZUNvbGxlY3QpfX0sej1mdW5jdGlvbihHKXtkKEEsMSxGKTtqLmNsZWFudXBTY3JpcHRFbGVtZW50KEUseC5wcmVzZXJ2ZVNjcmlwdHM9PT1mYWxzZSx4LmdhcmJhZ2VDb2xsZWN0KX07RS50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiO0Uub25lcnJvcj16O3k9eXx8eC5zY3JpcHRDaGFyc2V0O2lmKHkpe0UuY2hhcnNldD15fWlmKCJhZGRFdmVudExpc3RlbmVyIiBpbiBFKXtFLm9ubG9hZD1DfWVsc2V7aWYoInJlYWR5U3RhdGUiIGluIEUpe0Uub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYodGhpcy5yZWFkeVN0YXRlPT0ibG9hZGVkInx8dGhpcy5yZWFkeVN0YXRlPT0iY29tcGxldGUiKXtDKCl9fX1lbHNle0Uub25sb2FkPUN9fUUuc3JjPXc7KGouZG9jdW1lbnRIZWFkfHxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdKS5hcHBlbmRDaGlsZChFKTtyZXR1cm4gRX0scmVtb3ZlU2NyaXB0RWxlbWVudDpmdW5jdGlvbih3KXtpZihuW3ddKXtqLmNsZWFudXBTY3JpcHRFbGVtZW50KG5bd10sdHJ1ZSwhIWouZ2V0Q29uZmlnKCJnYXJiYWdlQ29sbGVjdCIpKTtkZWxldGUgblt3XX1yZXR1cm4gan0sY2xlYW51cFNjcmlwdEVsZW1lbnQ6ZnVuY3Rpb24oeSx4LHope3ZhciBBO3kub25sb2FkPXkub25yZWFkeXN0YXRlY2hhbmdlPXkub25lcnJvcj1udWxsO2lmKHgpe0V4dC5yZW1vdmVOb2RlKHkpO2lmKHope2ZvcihBIGluIHkpe3RyeXt5W0FdPW51bGw7ZGVsZXRlIHlbQV19Y2F0Y2godyl7fX19fXJldHVybiBqfSxsb2FkU2NyaXB0OmZ1bmN0aW9uKEYpe3ZhciB6PWouZ2V0Q29uZmlnKCkseT10eXBlb2YgRj09InN0cmluZyIseD15P0Y6Ri51cmwsQj0heSYmRi5vbkVycm9yLEM9IXkmJkYub25Mb2FkLEU9IXkmJkYuc2NvcGUsRD1mdW5jdGlvbigpe2oubnVtUGVuZGluZ0ZpbGVzLS07ai5zY3JpcHRzTG9hZGluZy0tO2lmKEIpe0IuY2FsbChFLCJGYWlsZWQgbG9hZGluZyAnIit4KyInLCBwbGVhc2UgdmVyaWZ5IHRoYXQgdGhlIGZpbGUgZXhpc3RzIil9aWYoai5udW1QZW5kaW5nRmlsZXMrai5zY3JpcHRzTG9hZGluZz09PTApe2oucmVmcmVzaFF1ZXVlKCl9fSxBPWZ1bmN0aW9uKCl7ai5udW1QZW5kaW5nRmlsZXMtLTtqLnNjcmlwdHNMb2FkaW5nLS07aWYoQyl7Qy5jYWxsKEUpfWlmKGoubnVtUGVuZGluZ0ZpbGVzK2ouc2NyaXB0c0xvYWRpbmc9PT0wKXtqLnJlZnJlc2hRdWV1ZSgpfX0sdztqLmlzTG9hZGluZz10cnVlO2oubnVtUGVuZGluZ0ZpbGVzKys7ai5zY3JpcHRzTG9hZGluZysrO3c9ei5kaXNhYmxlQ2FjaGluZz8oeCsiPyIrei5kaXNhYmxlQ2FjaGluZ1BhcmFtKyI9IitFeHQuRGF0ZS5ub3coKSk6eDtuW3hdPWouaW5qZWN0U2NyaXB0RWxlbWVudCh3LEEsRCl9LGxvYWRTY3JpcHRGaWxlOmZ1bmN0aW9uKHgsRSxDLEgsdyl7aWYoc1t4XSl7cmV0dXJuIGp9dmFyIHo9ai5nZXRDb25maWcoKSxJPXgrKHouZGlzYWJsZUNhY2hpbmc/KCI/Iit6LmRpc2FibGVDYWNoaW5nUGFyYW0rIj0iK0V4dC5EYXRlLm5vdygpKToiIikseT1mYWxzZSxHLEEsRixCPSIiO0g9SHx8ajtqLmlzTG9hZGluZz10cnVlO2lmKCF3KXtGPWZ1bmN0aW9uKCl7fTtuW3hdPWouaW5qZWN0U2NyaXB0RWxlbWVudChJLEUsRixIKX1lbHNle2lmKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCE9InVuZGVmaW5lZCIpe0c9bmV3IFhNTEh0dHBSZXF1ZXN0KCl9ZWxzZXtHPW5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpfXRyeXtHLm9wZW4oIkdFVCIsSSxmYWxzZSk7Ry5zZW5kKG51bGwpfWNhdGNoKEQpe3k9dHJ1ZX1BPShHLnN0YXR1cz09PTEyMjMpPzIwNDooRy5zdGF0dXM9PT0wJiYoc2VsZi5sb2NhdGlvbnx8e30pLnByb3RvY29sPT0iZmlsZToiKT8yMDA6Ry5zdGF0dXM7eT15fHwoQT09PTApO2lmKHkpe31lbHNle2lmKChBPj0yMDAmJkE8MzAwKXx8KEE9PT0zMDQpKXtpZighRXh0LmlzSUUpe0I9IlxuLy9AIHNvdXJjZVVSTD0iK3h9RXh0Lmdsb2JhbEV2YWwoRy5yZXNwb25zZVRleHQrQik7RS5jYWxsKEgpfWVsc2V7fX1HPW51bGx9fSxzeW5jUmVxdWlyZTpmdW5jdGlvbigpe3ZhciB3PWouc3luY01vZGVFbmFibGVkO2lmKCF3KXtqLnN5bmNNb2RlRW5hYmxlZD10cnVlfWoucmVxdWlyZS5hcHBseShqLGFyZ3VtZW50cyk7aWYoIXcpe2ouc3luY01vZGVFbmFibGVkPWZhbHNlfWoucmVmcmVzaFF1ZXVlKCl9LHJlcXVpcmU6ZnVuY3Rpb24oTyxGLHosQil7dmFyIEg9e30seT17fSxFPVtdLFE9W10sTj1bXSx4PVtdLEQsUCxKLEksdyxDLE0sTCxLLEcsQTtpZihCKXtCPSh0eXBlb2YgQj09PSJzdHJpbmciKT9bQl06Qjtmb3IoTD0wLEc9Qi5sZW5ndGg7TDxHO0wrKyl7dz1CW0xdO2lmKHR5cGVvZiB3PT0ic3RyaW5nIiYmdy5sZW5ndGg+MCl7RT1iLmdldE5hbWVzQnlFeHByZXNzaW9uKHcpO2ZvcihLPTAsQT1FLmxlbmd0aDtLPEE7SysrKXtIW0VbS11dPXRydWV9fX19Tz0odHlwZW9mIE89PT0ic3RyaW5nIik/W09dOihPP086W10pO2lmKEYpe2lmKEYubGVuZ3RoPjApe0Q9ZnVuY3Rpb24oKXt2YXIgUz1bXSxSLFQ7Zm9yKFI9MCxUPXgubGVuZ3RoO1I8VDtSKyspe1MucHVzaChiLmdldCh4W1JdKSl9cmV0dXJuIEYuYXBwbHkodGhpcyxTKX19ZWxzZXtEPUZ9fWVsc2V7RD1FeHQuZW1wdHlGbn16PXp8fEV4dC5nbG9iYWw7Zm9yKEw9MCxHPU8ubGVuZ3RoO0w8RztMKyspe0k9T1tMXTtpZih0eXBlb2YgST09InN0cmluZyImJkkubGVuZ3RoPjApe1E9Yi5nZXROYW1lc0J5RXhwcmVzc2lvbihJKTtBPVEubGVuZ3RoO2ZvcihLPTA7SzxBO0srKyl7TT1RW0tdO2lmKEhbTV0hPT10cnVlKXt4LnB1c2goTSk7aWYoIWIuaXNDcmVhdGVkKE0pJiYheVtNXSl7eVtNXT10cnVlO04ucHVzaChNKX19fX19aWYoTi5sZW5ndGg+MCl7aWYoIWouY29uZmlnLmVuYWJsZWQpe3Rocm93IG5ldyBFcnJvcigiRXh0LkxvYWRlciBpcyBub3QgZW5hYmxlZCwgc28gZGVwZW5kZW5jaWVzIGNhbm5vdCBiZSByZXNvbHZlZCBkeW5hbWljYWxseS4gTWlzc2luZyByZXF1aXJlZCBjbGFzcyIrKChOLmxlbmd0aD4xKT8iZXMiOiIiKSsiOiAiK04uam9pbigiLCAiKSl9fWVsc2V7RC5jYWxsKHopO3JldHVybiBqfVA9ai5zeW5jTW9kZUVuYWJsZWQ7aWYoIVApe28ucHVzaCh7cmVxdWlyZXM6Ti5zbGljZSgpLGNhbGxiYWNrOkQsc2NvcGU6en0pfUc9Ti5sZW5ndGg7Zm9yKEw9MDtMPEc7TCsrKXtDPU5bTF07Sj1qLmdldFBhdGgoQyk7aWYoUCYmcC5oYXNPd25Qcm9wZXJ0eShDKSl7ai5udW1QZW5kaW5nRmlsZXMtLTtqLnJlbW92ZVNjcmlwdEVsZW1lbnQoSik7ZGVsZXRlIHBbQ119aWYoIXAuaGFzT3duUHJvcGVydHkoQykpe3BbQ109ZmFsc2U7cVtDXT1KO2oubnVtUGVuZGluZ0ZpbGVzKys7ai5sb2FkU2NyaXB0RmlsZShKLGEoai5vbkZpbGVMb2FkZWQsW0MsSl0saiksYShqLm9uRmlsZUxvYWRFcnJvcixbQyxKXSxqKSxqLFApfX1pZihQKXtELmNhbGwoeik7aWYoRz09PTEpe3JldHVybiBiLmdldChDKX19cmV0dXJuIGp9LG9uRmlsZUxvYWRlZDpmdW5jdGlvbih4LHcpe2oubnVtTG9hZGVkRmlsZXMrKztwW3hdPXRydWU7c1t3XT10cnVlO2oubnVtUGVuZGluZ0ZpbGVzLS07aWYoai5udW1QZW5kaW5nRmlsZXM9PT0wKXtqLnJlZnJlc2hRdWV1ZSgpfX0sb25GaWxlTG9hZEVycm9yOmZ1bmN0aW9uKHkseCx3LHope2oubnVtUGVuZGluZ0ZpbGVzLS07ai5oYXNGaWxlTG9hZEVycm9yPXRydWV9LGFkZFVzZWRDbGFzc2VzOmZ1bmN0aW9uKHkpe3ZhciB3LHgsejtpZih5KXt5PSh0eXBlb2YgeT09InN0cmluZyIpP1t5XTp5O2Zvcih4PTAsej15Lmxlbmd0aDt4PHo7eCsrKXt3PXlbeF07aWYodHlwZW9mIHc9PSJzdHJpbmciJiYhRXh0LkFycmF5LmNvbnRhaW5zKHYsdykpe3YucHVzaCh3KX19fXJldHVybiBqfSx0cmlnZ2VyUmVhZHk6ZnVuY3Rpb24oKXt2YXIgeCx3LHk9djtpZihqLmlzTG9hZGluZyl7ai5pc0xvYWRpbmc9ZmFsc2U7aWYoeS5sZW5ndGghPT0wKXt5PXkuc2xpY2UoKTt2Lmxlbmd0aD0wO2oucmVxdWlyZSh5LGoudHJpZ2dlclJlYWR5LGopO3JldHVybiBqfX13aGlsZSh1Lmxlbmd0aCYmIWouaXNMb2FkaW5nKXt4PXUuc2hpZnQoKTt4LmZuLmNhbGwoeC5zY29wZSl9cmV0dXJuIGp9LG9uUmVhZHk6ZnVuY3Rpb24oeix5LEEsdyl7dmFyIHg7aWYoQSE9PWZhbHNlJiZFeHQub25Eb2N1bWVudFJlYWR5KXt4PXo7ej1mdW5jdGlvbigpe0V4dC5vbkRvY3VtZW50UmVhZHkoeCx5LHcpfX1pZighai5pc0xvYWRpbmcpe3ouY2FsbCh5KX1lbHNle3UucHVzaCh7Zm46eixzY29wZTp5fSl9fSxoaXN0b3J5UHVzaDpmdW5jdGlvbih3KXtpZih3JiZwLmhhc093blByb3BlcnR5KHcpJiYhdFt3XSl7dFt3XT10cnVlO2sucHVzaCh3KX1yZXR1cm4gan19KTtFeHQuZGlzYWJsZUNhY2hlQnVzdGVyPWZ1bmN0aW9uKHgseSl7dmFyIHc9bmV3IERhdGUoKTt3LnNldFRpbWUody5nZXRUaW1lKCkrKHg/MTAqMzY1Oi0xKSoyNCo2MCo2MCoxMDAwKTt3PXcudG9HTVRTdHJpbmcoKTtkb2N1bWVudC5jb29raWU9ImV4dC1jYWNoZT0xOyBleHBpcmVzPSIrdysiOyBwYXRoPSIrKHl8fCIvIil9O0V4dC5yZXF1aXJlPW0oaiwicmVxdWlyZSIpO0V4dC5zeW5jUmVxdWlyZT1tKGosInN5bmNSZXF1aXJlIik7RXh0LmV4Y2x1ZGU9bShqLCJleGNsdWRlIik7RXh0Lm9uUmVhZHk9ZnVuY3Rpb24oeSx4LHcpe2oub25SZWFkeSh5LHgsdHJ1ZSx3KX07ci5yZWdpc3RlclByZXByb2Nlc3NvcigibG9hZGVyIixmdW5jdGlvbihNLEEsTCxLKXt2YXIgSD10aGlzLEY9W10sdyxHPWIuZ2V0TmFtZShNKSx6LHksRSxELEosQyx4LEksQjtmb3Ioej0wLEU9bC5sZW5ndGg7ejxFO3orKyl7Qz1sW3pdO2lmKEEuaGFzT3duUHJvcGVydHkoQykpe3g9QVtDXTtpZih0eXBlb2YgeD09InN0cmluZyIpe0YucHVzaCh4KX1lbHNle2lmKHggaW5zdGFuY2VvZiBBcnJheSl7Zm9yKHk9MCxEPXgubGVuZ3RoO3k8RDt5Kyspe0o9eFt5XTtpZih0eXBlb2YgSj09InN0cmluZyIpe0YucHVzaChKKX19fWVsc2V7aWYodHlwZW9mIHghPSJmdW5jdGlvbiIpe2Zvcih5IGluIHgpe2lmKHguaGFzT3duUHJvcGVydHkoeSkpe0o9eFt5XTtpZih0eXBlb2YgSj09InN0cmluZyIpe0YucHVzaChKKX19fX19fX19aWYoRi5sZW5ndGg9PT0wKXtyZXR1cm59ai5yZXF1aXJlKEYsZnVuY3Rpb24oKXtmb3Ioej0wLEU9bC5sZW5ndGg7ejxFO3orKyl7Qz1sW3pdO2lmKEEuaGFzT3duUHJvcGVydHkoQykpe3g9QVtDXTtpZih0eXBlb2YgeD09InN0cmluZyIpe0FbQ109Yi5nZXQoeCl9ZWxzZXtpZih4IGluc3RhbmNlb2YgQXJyYXkpe2Zvcih5PTAsRD14Lmxlbmd0aDt5PEQ7eSsrKXtKPXhbeV07aWYodHlwZW9mIEo9PSJzdHJpbmciKXtBW0NdW3ldPWIuZ2V0KEopfX19ZWxzZXtpZih0eXBlb2YgeCE9ImZ1bmN0aW9uIil7Zm9yKHZhciBOIGluIHgpe2lmKHguaGFzT3duUHJvcGVydHkoTikpe0o9eFtOXTtpZih0eXBlb2YgSj09InN0cmluZyIpe0FbQ11bTl09Yi5nZXQoSil9fX19fX19fUsuY2FsbChILE0sQSxMKX0pO3JldHVybiBmYWxzZX0sdHJ1ZSwiYWZ0ZXIiLCJjbGFzc05hbWUiKTtiLnJlZ2lzdGVyUG9zdHByb2Nlc3NvcigidXNlcyIsZnVuY3Rpb24oeSx4LHope3ZhciB3PXoudXNlcztpZih3KXtqLmFkZFVzZWRDbGFzc2VzKHcpfX0pO2Iub25DcmVhdGVkKGouaGlzdG9yeVB1c2gpfTtpZihFeHQuX2NsYXNzUGF0aE1ldGFkYXRhKXtFeHQuTG9hZGVyLmFkZENsYXNzUGF0aE1hcHBpbmdzKEV4dC5fY2xhc3NQYXRoTWV0YWRhdGEpO0V4dC5fY2xhc3NQYXRoTWV0YWRhdGE9bnVsbH0oZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IiksYj1hW2EubGVuZ3RoLTFdLGQ9Yi5zcmMsYz1kLnN1YnN0cmluZygwLGQubGFzdEluZGV4T2YoIi8iKSsxKSxlPUV4dC5Mb2FkZXI7ZS5zZXRDb25maWcoe2VuYWJsZWQ6dHJ1ZSxkaXNhYmxlQ2FjaGluZzp0cnVlLHBhdGhzOntFeHQ6Yysic3JjIn19KX0pKCk7RXh0Ll9lbmRUaW1lPW5ldyBEYXRlKCkuZ2V0VGltZSgpO2lmKEV4dC5fYmVmb3JlcmVhZHloYW5kbGVyKXtFeHQuX2JlZm9yZXJlYWR5aGFuZGxlcigpfUV4dC5FcnJvcj1FeHQuZXh0ZW5kKEVycm9yLHtzdGF0aWNzOntpZ25vcmU6ZmFsc2UscmFpc2U6ZnVuY3Rpb24oYSl7YT1hfHx7fTtpZihFeHQuaXNTdHJpbmcoYSkpe2E9e21zZzphfX12YXIgYz10aGlzLnJhaXNlLmNhbGxlcixiO2lmKGMpe2lmKGMuJG5hbWUpe2Euc291cmNlTWV0aG9kPWMuJG5hbWV9aWYoYy4kb3duZXIpe2Euc291cmNlQ2xhc3M9Yy4kb3duZXIuJGNsYXNzTmFtZX19aWYoRXh0LkVycm9yLmhhbmRsZShhKSE9PXRydWUpe2I9RXh0LkVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpO0V4dC5sb2coe21zZzpiLGxldmVsOiJlcnJvciIsZHVtcDphLHN0YWNrOnRydWV9KTt0aHJvdyBuZXcgRXh0LkVycm9yKGEpfX0saGFuZGxlOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5FcnJvci5pZ25vcmV9fSxuYW1lOiJFeHQuRXJyb3IiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe2lmKEV4dC5pc1N0cmluZyhhKSl7YT17bXNnOmF9fXZhciBiPXRoaXM7RXh0LmFwcGx5KGIsYSk7Yi5tZXNzYWdlPWIubWVzc2FnZXx8Yi5tc2d9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxiPWMuc291cmNlQ2xhc3M/Yy5zb3VyY2VDbGFzczoiIixhPWMuc291cmNlTWV0aG9kPyIuIitjLnNvdXJjZU1ldGhvZCsiKCk6ICI6IiIsZD1jLm1zZ3x8IihObyBkZXNjcmlwdGlvbiBwcm92aWRlZCkiO3JldHVybiBiK2ErZH19KTtFeHQuZGVwcmVjYXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gRXh0LmVtcHR5Rm59O0V4dC5KU09OPShuZXcgKGZ1bmN0aW9uKCl7dmFyIG1lPXRoaXMsZW5jb2RpbmdGdW5jdGlvbixkZWNvZGluZ0Z1bmN0aW9uLHVzZU5hdGl2ZT1udWxsLHVzZUhhc093bj0hIXt9Lmhhc093blByb3BlcnR5LGlzTmF0aXZlPWZ1bmN0aW9uKCl7aWYodXNlTmF0aXZlPT09bnVsbCl7dXNlTmF0aXZlPUV4dC5VU0VfTkFUSVZFX0pTT04mJndpbmRvdy5KU09OJiZKU09OLnRvU3RyaW5nKCk9PSJbb2JqZWN0IEpTT05dIn1yZXR1cm4gdXNlTmF0aXZlfSxwYWQ9ZnVuY3Rpb24obil7cmV0dXJuIG48MTA/IjAiK246bn0sZG9EZWNvZGU9ZnVuY3Rpb24oanNvbil7cmV0dXJuIGV2YWwoIigiK2pzb24rIikiKX0sZG9FbmNvZGU9ZnVuY3Rpb24obyxuZXdsaW5lKXtpZihvPT09bnVsbHx8bz09PXVuZGVmaW5lZCl7cmV0dXJuIm51bGwifWVsc2V7aWYoRXh0LmlzRGF0ZShvKSl7cmV0dXJuIEV4dC5KU09OLmVuY29kZURhdGUobyl9ZWxzZXtpZihFeHQuaXNTdHJpbmcobykpe3JldHVybiBFeHQuSlNPTi5lbmNvZGVTdHJpbmcobyl9ZWxzZXtpZih0eXBlb2Ygbz09Im51bWJlciIpe3JldHVybiBpc0Zpbml0ZShvKT9TdHJpbmcobyk6Im51bGwifWVsc2V7aWYoRXh0LmlzQm9vbGVhbihvKSl7cmV0dXJuIFN0cmluZyhvKX1lbHNle2lmKG8udG9KU09OKXtyZXR1cm4gby50b0pTT04oKX1lbHNle2lmKEV4dC5pc0FycmF5KG8pKXtyZXR1cm4gZW5jb2RlQXJyYXkobyxuZXdsaW5lKX1lbHNle2lmKEV4dC5pc09iamVjdChvKSl7cmV0dXJuIGVuY29kZU9iamVjdChvLG5ld2xpbmUpfWVsc2V7aWYodHlwZW9mIG89PT0iZnVuY3Rpb24iKXtyZXR1cm4ibnVsbCJ9fX19fX19fX1yZXR1cm4idW5kZWZpbmVkIn0sbT17IlxiIjoiXFxiIiwiXHQiOiJcXHQiLCJcbiI6IlxcbiIsIlxmIjoiXFxmIiwiXHIiOiJcXHIiLCciJzonXFwiJywiXFwiOiJcXFxcIiwiXHgwYiI6IlxcdTAwMGIifSxjaGFyVG9SZXBsYWNlPS9bXFxcIlx4MDAtXHgxZlx4N2YtXHVmZmZmXS9nLGVuY29kZVN0cmluZz1mdW5jdGlvbihzKXtyZXR1cm4nIicrcy5yZXBsYWNlKGNoYXJUb1JlcGxhY2UsZnVuY3Rpb24oYSl7dmFyIGM9bVthXTtyZXR1cm4gdHlwZW9mIGM9PT0ic3RyaW5nIj9jOiJcXHUiKygiMDAwMCIrYS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpfSkrJyInfSxlbmNvZGVBcnJheT1mdW5jdGlvbihvLG5ld2xpbmUpe3ZhciBhPVsiWyIsIiJdLGxlbj1vLmxlbmd0aCxpO2ZvcihpPTA7aTxsZW47aSs9MSl7YS5wdXNoKEV4dC5KU09OLmVuY29kZVZhbHVlKG9baV0pLCIsIil9YVthLmxlbmd0aC0xXT0iXSI7cmV0dXJuIGEuam9pbigiIil9LGVuY29kZU9iamVjdD1mdW5jdGlvbihvLG5ld2xpbmUpe3ZhciBhPVsieyIsIiJdLGk7Zm9yKGkgaW4gbyl7aWYoIXVzZUhhc093bnx8by5oYXNPd25Qcm9wZXJ0eShpKSl7YS5wdXNoKEV4dC5KU09OLmVuY29kZVZhbHVlKGkpLCI6IixFeHQuSlNPTi5lbmNvZGVWYWx1ZShvW2ldKSwiLCIpfX1hW2EubGVuZ3RoLTFdPSJ9IjtyZXR1cm4gYS5qb2luKCIiKX07bWUuZW5jb2RlU3RyaW5nPWVuY29kZVN0cmluZzttZS5lbmNvZGVWYWx1ZT1kb0VuY29kZTttZS5lbmNvZGVEYXRlPWZ1bmN0aW9uKG8pe3JldHVybiciJytvLmdldEZ1bGxZZWFyKCkrIi0iK3BhZChvLmdldE1vbnRoKCkrMSkrIi0iK3BhZChvLmdldERhdGUoKSkrIlQiK3BhZChvLmdldEhvdXJzKCkpKyI6IitwYWQoby5nZXRNaW51dGVzKCkpKyI6IitwYWQoby5nZXRTZWNvbmRzKCkpKyciJ307bWUuZW5jb2RlPWZ1bmN0aW9uKG8pe2lmKCFlbmNvZGluZ0Z1bmN0aW9uKXtlbmNvZGluZ0Z1bmN0aW9uPWlzTmF0aXZlKCk/SlNPTi5zdHJpbmdpZnk6bWUuZW5jb2RlVmFsdWV9cmV0dXJuIGVuY29kaW5nRnVuY3Rpb24obyl9O21lLmRlY29kZT1mdW5jdGlvbihqc29uLHNhZmUpe2lmKCFkZWNvZGluZ0Z1bmN0aW9uKXtkZWNvZGluZ0Z1bmN0aW9uPWlzTmF0aXZlKCk/SlNPTi5wYXJzZTpkb0RlY29kZX10cnl7cmV0dXJuIGRlY29kaW5nRnVuY3Rpb24oanNvbil9Y2F0Y2goZSl7aWYoc2FmZT09PXRydWUpe3JldHVybiBudWxsfUV4dC5FcnJvci5yYWlzZSh7c291cmNlQ2xhc3M6IkV4dC5KU09OIixzb3VyY2VNZXRob2Q6ImRlY29kZSIsbXNnOiJZb3UncmUgdHJ5aW5nIHRvIGRlY29kZSBhbiBpbnZhbGlkIEpTT04gU3RyaW5nOiAiK2pzb259KX19fSkoKSk7RXh0LmVuY29kZT1FeHQuSlNPTi5lbmNvZGU7RXh0LmRlY29kZT1FeHQuSlNPTi5kZWNvZGU7RXh0LmFwcGx5KEV4dCx7dXNlckFnZW50Om5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxjYWNoZTp7fSxpZFNlZWQ6MTAwMCx3aW5kb3dJZDoiZXh0LXdpbmRvdyIsZG9jdW1lbnRJZDoiZXh0LWRvY3VtZW50Iixpc1JlYWR5OmZhbHNlLGVuYWJsZUdhcmJhZ2VDb2xsZWN0b3I6dHJ1ZSxlbmFibGVMaXN0ZW5lckNvbGxlY3Rpb246dHJ1ZSxhZGRDYWNoZUVudHJ5OmZ1bmN0aW9uKGUsYixkKXtkPWR8fGIuZG9tO3ZhciBhPWV8fChiJiZiLmlkKXx8ZC5pZCxjPUV4dC5jYWNoZVthXXx8KEV4dC5jYWNoZVthXT17ZGF0YTp7fSxldmVudHM6e30sZG9tOmQsc2tpcEdhcmJhZ2VDb2xsZWN0aW9uOiEhKGQuZ2V0RWxlbWVudEJ5SWR8fGQubmF2aWdhdG9yKX0pO2lmKGIpe2IuJGNhY2hlPWM7Yy5lbD1ifXJldHVybiBjfSx1cGRhdGVDYWNoZUVudHJ5OmZ1bmN0aW9uKGEsYil7YS5kb209YjtpZihhLmVsKXthLmVsLmRvbT1ifXJldHVybiBhfSxpZDpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXMsZD0iIjthPUV4dC5nZXREb20oYSx0cnVlKXx8e307aWYoYT09PWRvY3VtZW50KXthLmlkPWIuZG9jdW1lbnRJZH1lbHNle2lmKGE9PT13aW5kb3cpe2EuaWQ9Yi53aW5kb3dJZH19aWYoIWEuaWQpe2lmKGIuaXNTYW5kYm94ZWQpe2Q9RXh0LnNhbmRib3hOYW1lLnRvTG93ZXJDYXNlKCkrIi0ifWEuaWQ9ZCsoY3x8ImV4dC1nZW4iKSsoKytFeHQuaWRTZWVkKX1yZXR1cm4gYS5pZH0sZXNjYXBlSWQ6KGZ1bmN0aW9uKCl7dmFyIGM9L15bYS16QS1aX11bYS16QS1aMC05X1wtXSokL2ksZD0vKFtcV117MX0pL2csYj0vXihcZCkvZyxhPWZ1bmN0aW9uKGgsZyl7cmV0dXJuIlxcIitnfSxlPWZ1bmN0aW9uKGgsZyl7cmV0dXJuIlxcMDAiK2cuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikrIiAifTtyZXR1cm4gZnVuY3Rpb24oZyl7cmV0dXJuIGMudGVzdChnKT9nOmcucmVwbGFjZShkLGEpLnJlcGxhY2UoYixlKX19KCkpLGdldEJvZHk6KGZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGF8fChhPUV4dC5nZXQoZG9jdW1lbnQuYm9keSkpfX0oKSksZ2V0SGVhZDooZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYXx8KGE9RXh0LmdldChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdKSl9fSgpKSxnZXREb2M6KGZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGF8fChhPUV4dC5nZXQoZG9jdW1lbnQpKX19KCkpLGdldENtcDpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LkNvbXBvbmVudE1hbmFnZXIuZ2V0KGEpfSxnZXRPcmllbnRhdGlvbjpmdW5jdGlvbigpe3JldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ+d2luZG93LmlubmVyV2lkdGg/InBvcnRyYWl0IjoibGFuZHNjYXBlIn0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBjPWFyZ3VtZW50cy5sZW5ndGgsYixhO2ZvcihiPTA7YjxjO2IrKyl7YT1hcmd1bWVudHNbYl07aWYoYSl7aWYoRXh0LmlzQXJyYXkoYSkpe3RoaXMuZGVzdHJveS5hcHBseSh0aGlzLGEpfWVsc2V7aWYoRXh0LmlzRnVuY3Rpb24oYS5kZXN0cm95KSl7YS5kZXN0cm95KCl9ZWxzZXtpZihhLmRvbSl7YS5yZW1vdmUoKX19fX19fSxjYWxsYmFjazpmdW5jdGlvbihkLGMsYixhKXtpZihFeHQuaXNGdW5jdGlvbihkKSl7Yj1ifHxbXTtjPWN8fHdpbmRvdztpZihhKXtFeHQuZGVmZXIoZCxhLGMsYil9ZWxzZXtkLmFwcGx5KGMsYil9fX0saHRtbEVuY29kZTpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LlN0cmluZy5odG1sRW5jb2RlKGEpfSxodG1sRGVjb2RlOmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuU3RyaW5nLmh0bWxEZWNvZGUoYSl9LHVybEFwcGVuZDpmdW5jdGlvbihhLGIpe3JldHVybiBFeHQuU3RyaW5nLnVybEFwcGVuZChhLGIpfX0pO0V4dC5ucz1FeHQubmFtZXNwYWNlO3dpbmRvdy51bmRlZmluZWQ9d2luZG93LnVuZGVmaW5lZDsoZnVuY3Rpb24oKXt2YXIgbz1mdW5jdGlvbihlKXtyZXR1cm4gZS50ZXN0KEV4dC51c2VyQWdlbnQpfSx0PWRvY3VtZW50LmNvbXBhdE1vZGU9PSJDU1MxQ29tcGF0IixGPWZ1bmN0aW9uKFIsUSl7dmFyIGU7cmV0dXJuKFImJihlPVEuZXhlYyhFeHQudXNlckFnZW50KSkpP3BhcnNlRmxvYXQoZVsxXSk6MH0scD1kb2N1bWVudC5kb2N1bWVudE1vZGUsYT1vKC9vcGVyYS8pLHY9YSYmbygvdmVyc2lvblwvMTBcLjUvKSxLPW8oL1xiY2hyb21lXGIvKSx6PW8oL3dlYmtpdC8pLGM9IUsmJm8oL3NhZmFyaS8pLEk9YyYmbygvYXBwbGV3ZWJraXRcLzQvKSxHPWMmJm8oL3ZlcnNpb25cLzMvKSxEPWMmJm8oL3ZlcnNpb25cLzQvKSxqPWMmJm8oL3ZlcnNpb25cLzVcLjAvKSxDPWMmJm8oL3ZlcnNpb25cLzUvKSxpPSFhJiZvKC9tc2llLyksSj1pJiYoKG8oL21zaWUgNy8pJiZwIT04JiZwIT05KXx8cD09NyksSD1pJiYoKG8oL21zaWUgOC8pJiZwIT03JiZwIT05KXx8cD09OCksRT1pJiYoKG8oL21zaWUgOS8pJiZwIT03JiZwIT04KXx8cD09OSksTT1pJiZvKC9tc2llIDYvKSxiPSF6JiZvKC9nZWNrby8pLFA9YiYmbygvcnY6MVwuOS8pLE89YiYmbygvcnY6MlwuMC8pLE49YiYmbygvcnY6NVwuLykscj1iJiZvKC9ydjoxMFwuLykseT1QJiZvKC9ydjoxXC45XC4wLyksdz1QJiZvKC9ydjoxXC45XC4xLyksdT1QJiZvKC9ydjoxXC45XC4yLyksZz1vKC93aW5kb3dzfHdpbjMyLyksQj1vKC9tYWNpbnRvc2h8bWFjIG9zIHgvKSx4PW8oL2xpbnV4LyksbD1udWxsLG09Rih0cnVlLC9cYmNocm9tZVwvKFxkK1wuXGQrKS8pLGg9Rih0cnVlLC9cYmZpcmVmb3hcLyhcZCtcLlxkKykvKSxuPUYoaSwvbXNpZSAoXGQrXC5cZCspLykscz1GKGEsL3ZlcnNpb25cLyhcZCtcLlxkKykvKSxkPUYoYywvdmVyc2lvblwvKFxkK1wuXGQrKS8pLEE9Rih6LC93ZWJraXRcLyhcZCtcLlxkKykvKSxxPS9eaHR0cHMvaS50ZXN0KHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCksazt0cnl7ZG9jdW1lbnQuZXhlY0NvbW1hbmQoIkJhY2tncm91bmRJbWFnZUNhY2hlIixmYWxzZSx0cnVlKX1jYXRjaChMKXt9az1mdW5jdGlvbigpe307ay5pbmZvPWsud2Fybj1rLmVycm9yPUV4dC5lbXB0eUZuO0V4dC5zZXRWZXJzaW9uKCJleHRqcyIsIjQuMS4xLjEiKTtFeHQuYXBwbHkoRXh0LHtTU0xfU0VDVVJFX1VSTDpxJiZpPyJqYXZhc2NyaXB0OicnIjoiYWJvdXQ6YmxhbmsiLHNjb3BlUmVzZXRDU1M6RXh0LmJ1aWxkU2V0dGluZ3Muc2NvcGVSZXNldENTUyxyZXNldENsczpFeHQuYnVpbGRTZXR0aW5ncy5iYXNlQ1NTUHJlZml4KyJyZXNldCIsZW5hYmxlTmVzdGVkTGlzdGVuZXJSZW1vdmFsOmZhbHNlLFVTRV9OQVRJVkVfSlNPTjpmYWxzZSxnZXREb206ZnVuY3Rpb24oUixRKXtpZighUnx8IWRvY3VtZW50KXtyZXR1cm4gbnVsbH1pZihSLmRvbSl7cmV0dXJuIFIuZG9tfWVsc2V7aWYodHlwZW9mIFI9PSJzdHJpbmciKXt2YXIgUz1FeHQuZ2V0RWxlbWVudEJ5SWQoUik7aWYoUyYmaSYmUSl7aWYoUj09Uy5nZXRBdHRyaWJ1dGUoImlkIikpe3JldHVybiBTfWVsc2V7cmV0dXJuIG51bGx9fXJldHVybiBTfWVsc2V7cmV0dXJuIFJ9fX0scmVtb3ZlTm9kZTpNfHxKfHxIPyhmdW5jdGlvbigpe3ZhciBlO3JldHVybiBmdW5jdGlvbihTKXtpZihTJiZTLnRhZ05hbWUudG9VcHBlckNhc2UoKSE9IkJPRFkiKXsoRXh0LmVuYWJsZU5lc3RlZExpc3RlbmVyUmVtb3ZhbCk/RXh0LkV2ZW50TWFuYWdlci5wdXJnZUVsZW1lbnQoUyk6RXh0LkV2ZW50TWFuYWdlci5yZW1vdmVBbGwoUyk7dmFyIFE9RXh0LmNhY2hlLFI9Uy5pZDtpZihRW1JdKXtkZWxldGUgUVtSXS5kb207ZGVsZXRlIFFbUl19aWYoSCYmUy5wYXJlbnROb2RlKXtTLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoUyl9ZT1lfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtlLmFwcGVuZENoaWxkKFMpO2UuaW5uZXJIVE1MPSIifX19KCkpOmZ1bmN0aW9uKFIpe2lmKFImJlIucGFyZW50Tm9kZSYmUi50YWdOYW1lLnRvVXBwZXJDYXNlKCkhPSJCT0RZIil7KEV4dC5lbmFibGVOZXN0ZWRMaXN0ZW5lclJlbW92YWwpP0V4dC5FdmVudE1hbmFnZXIucHVyZ2VFbGVtZW50KFIpOkV4dC5FdmVudE1hbmFnZXIucmVtb3ZlQWxsKFIpO3ZhciBlPUV4dC5jYWNoZSxRPVIuaWQ7aWYoZVtRXSl7ZGVsZXRlIGVbUV0uZG9tO2RlbGV0ZSBlW1FdfVIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChSKX19LGlzU3RyaWN0OnQsaXNJRVF1aXJrczppJiYhdCxpc09wZXJhOmEsaXNPcGVyYTEwXzU6dixpc1dlYktpdDp6LGlzQ2hyb21lOkssaXNTYWZhcmk6Yyxpc1NhZmFyaTM6Ryxpc1NhZmFyaTQ6RCxpc1NhZmFyaTU6Qyxpc1NhZmFyaTVfMDpqLGlzU2FmYXJpMjpJLGlzSUU6aSxpc0lFNjpNLGlzSUU3OkosaXNJRTg6SCxpc0lFOTpFLGlzR2Vja286Yixpc0dlY2tvMzpQLGlzR2Vja280Ok8saXNHZWNrbzU6Tixpc0dlY2tvMTA6cixpc0ZGM18wOnksaXNGRjNfNTp3LGlzRkYzXzY6dSxpc0ZGNDo0PD1oJiZoPDUsaXNGRjU6NTw9aCYmaDw2LGlzRkYxMDoxMDw9aCYmaDwxMSxpc0xpbnV4OngsaXNXaW5kb3dzOmcsaXNNYWM6QixjaHJvbWVWZXJzaW9uOm0sZmlyZWZveFZlcnNpb246aCxpZVZlcnNpb246bixvcGVyYVZlcnNpb246cyxzYWZhcmlWZXJzaW9uOmQsd2ViS2l0VmVyc2lvbjpBLGlzU2VjdXJlOnEsQkxBTktfSU1BR0VfVVJMOihNfHxKKT8iLy93d3cuc2VuY2hhLmNvbS9zLmdpZiI6ImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUQvQU1EQXdBQUFBQ0g1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlDUkFFQU93PT0iLHZhbHVlOmZ1bmN0aW9uKFIsZSxRKXtyZXR1cm4gRXh0LmlzRW1wdHkoUixRKT9lOlJ9LGVzY2FwZVJlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoLyhbLS4qKz9cXiR7fSgpfFxbXF1cL1xcXSkvZywiXFwkMSIpfSxhZGRCZWhhdmlvcnM6ZnVuY3Rpb24oVCl7aWYoIUV4dC5pc1JlYWR5KXtFeHQub25SZWFkeShmdW5jdGlvbigpe0V4dC5hZGRCZWhhdmlvcnMoVCl9KX1lbHNle3ZhciBRPXt9LFMsZSxSO2ZvcihlIGluIFQpe2lmKChTPWUuc3BsaXQoIkAiKSlbMV0pe1I9U1swXTtpZighUVtSXSl7UVtSXT1FeHQuc2VsZWN0KFIpfVFbUl0ub24oU1sxXSxUW2VdKX19UT1udWxsfX0sZ2V0U2Nyb2xsYmFyU2l6ZTpmdW5jdGlvbihRKXtpZighRXh0LmlzUmVhZHkpe3JldHVybnt9fWlmKFF8fCFsKXt2YXIgZT1kb2N1bWVudC5ib2R5LFI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Ui5zdHlsZS53aWR0aD1SLnN0eWxlLmhlaWdodD0iMTAwcHgiO1Iuc3R5bGUub3ZlcmZsb3c9InNjcm9sbCI7Ui5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2UuYXBwZW5kQ2hpbGQoUik7bD17d2lkdGg6Ui5vZmZzZXRXaWR0aC1SLmNsaWVudFdpZHRoLGhlaWdodDpSLm9mZnNldEhlaWdodC1SLmNsaWVudEhlaWdodH07ZS5yZW1vdmVDaGlsZChSKX1yZXR1cm4gbH0sZ2V0U2Nyb2xsQmFyV2lkdGg6ZnVuY3Rpb24oUSl7dmFyIGU9RXh0LmdldFNjcm9sbGJhclNpemUoUSk7cmV0dXJuIGUud2lkdGgrMn0sY29weVRvOmZ1bmN0aW9uKFEsUyxVLFQpe2lmKHR5cGVvZiBVPT0ic3RyaW5nIil7VT1VLnNwbGl0KC9bLDtcc10vKX12YXIgVixSPVUubGVuZ3RoLGU7Zm9yKFY9MDtWPFI7VisrKXtlPVVbVl07aWYoVHx8Uy5oYXNPd25Qcm9wZXJ0eShlKSl7UVtlXT1TW2VdfX1yZXR1cm4gUX0sZGVzdHJveU1lbWJlcnM6ZnVuY3Rpb24oUyl7Zm9yKHZhciBSPTEsUT1hcmd1bWVudHMsZT1RLmxlbmd0aDtSPGU7UisrKXtFeHQuZGVzdHJveShTW1FbUl1dKTtkZWxldGUgU1tRW1JdXX19LGxvZzprLHBhcnRpdGlvbjpmdW5jdGlvbihlLFQpe3ZhciBVPVtbXSxbXV0sUSxTLFI9ZS5sZW5ndGg7Zm9yKFE9MDtRPFI7USsrKXtTPWVbUV07VVsoVCYmVChTLFEsZSkpfHwoIVQmJlMpPzA6MV0ucHVzaChTKX1yZXR1cm4gVX0saW52b2tlOmZ1bmN0aW9uKGUsVCl7dmFyIFY9W10sVT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMiksUSxTLFI9ZS5sZW5ndGg7Zm9yKFE9MDtRPFI7USsrKXtTPWVbUV07aWYoUyYmdHlwZW9mIFNbVF09PSJmdW5jdGlvbiIpe1YucHVzaChTW1RdLmFwcGx5KFMsVSkpfWVsc2V7Vi5wdXNoKHVuZGVmaW5lZCl9fXJldHVybiBWfSx6aXA6ZnVuY3Rpb24oKXt2YXIgVz1FeHQucGFydGl0aW9uKGFyZ3VtZW50cyxmdW5jdGlvbihYKXtyZXR1cm4gdHlwZW9mIFghPSJmdW5jdGlvbiJ9KSxUPVdbMF0sVj1XWzFdWzBdLGU9RXh0Lm1heChFeHQucGx1Y2soVCwibGVuZ3RoIikpLFM9W10sVSxSLFE7Zm9yKFU9MDtVPGU7VSsrKXtTW1VdPVtdO2lmKFYpe1NbVV09Vi5hcHBseShWLEV4dC5wbHVjayhULFUpKX1lbHNle2ZvcihSPTAsUT1ULmxlbmd0aDtSPFE7UisrKXtTW1VdLnB1c2goVFtSXVtVXSl9fX1yZXR1cm4gU30sdG9TZW50ZW5jZTpmdW5jdGlvbihRLGUpe3ZhciBUPVEubGVuZ3RoLFMsUjtpZihUPD0xKXtyZXR1cm4gUVswXX1lbHNle1M9US5zbGljZSgwLFQtMSk7Uj1RW1QtMV07cmV0dXJuIEV4dC51dGlsLkZvcm1hdC5mb3JtYXQoInswfSB7MX0gezJ9IixTLmpvaW4oIiwgIiksZXx8ImFuZCIsUil9fSx1c2VTaGltczpNfSl9KCkpO0V4dC5hcHBsaWNhdGlvbj1mdW5jdGlvbihhKXtFeHQucmVxdWlyZSgiRXh0LmFwcC5BcHBsaWNhdGlvbiIpO0V4dC5vblJlYWR5KGZ1bmN0aW9uKCl7bmV3IEV4dC5hcHAuQXBwbGljYXRpb24oYSl9KX07KGZ1bmN0aW9uKCl7RXh0Lm5zKCJFeHQudXRpbCIpO0V4dC51dGlsLkZvcm1hdD17fTt2YXIgZz1FeHQudXRpbC5Gb3JtYXQsZT0vPFwvP1tePl0rPi9naSxjPS8oPzo8c2NyaXB0Lio/PikoKFxufFxyfC4pKj8pKD86PFwvc2NyaXB0PikvaWcsYj0vXHI/XG4vZyxkPS9bXlxkXC5dL2csYTtFeHQuYXBwbHkoZyx7dGhvdXNhbmRTZXBhcmF0b3I6IiwiLGRlY2ltYWxTZXBhcmF0b3I6Ii4iLGN1cnJlbmN5UHJlY2lzaW9uOjIsY3VycmVuY3lTaWduOiIkIixjdXJyZW5jeUF0RW5kOmZhbHNlLHVuZGVmOmZ1bmN0aW9uKGgpe3JldHVybiBoIT09dW5kZWZpbmVkP2g6IiJ9LGRlZmF1bHRWYWx1ZTpmdW5jdGlvbihpLGgpe3JldHVybiBpIT09dW5kZWZpbmVkJiZpIT09IiI/aTpofSxzdWJzdHI6ImFiIi5zdWJzdHIoLTEpIT0iYiI/ZnVuY3Rpb24oaSxrLGgpe3ZhciBqPVN0cmluZyhpKTtyZXR1cm4oazwwKT9qLnN1YnN0cihNYXRoLm1heChqLmxlbmd0aCtrLDApLGgpOmouc3Vic3RyKGssaCl9OmZ1bmN0aW9uKGksaixoKXtyZXR1cm4gU3RyaW5nKGkpLnN1YnN0cihqLGgpfSxsb3dlcmNhc2U6ZnVuY3Rpb24oaCl7cmV0dXJuIFN0cmluZyhoKS50b0xvd2VyQ2FzZSgpfSx1cHBlcmNhc2U6ZnVuY3Rpb24oaCl7cmV0dXJuIFN0cmluZyhoKS50b1VwcGVyQ2FzZSgpfSx1c01vbmV5OmZ1bmN0aW9uKGgpe3JldHVybiBnLmN1cnJlbmN5KGgsIiQiLDIpfSxjdXJyZW5jeTpmdW5jdGlvbihrLG0saixoKXt2YXIgbz0iIixuPSIsMCIsbD0wO2s9ay0wO2lmKGs8MCl7az0taztvPSItIn1qPUV4dC5pc0RlZmluZWQoaik/ajpnLmN1cnJlbmN5UHJlY2lzaW9uO24rPW4rKGo+MD8iLiI6IiIpO2Zvcig7bDxqO2wrKyl7bis9IjAifWs9Zy5udW1iZXIoayxuKTtpZigoaHx8Zy5jdXJyZW5jeUF0RW5kKT09PXRydWUpe3JldHVybiBFeHQuU3RyaW5nLmZvcm1hdCgiezB9ezF9ezJ9IixvLGssbXx8Zy5jdXJyZW5jeVNpZ24pfWVsc2V7cmV0dXJuIEV4dC5TdHJpbmcuZm9ybWF0KCJ7MH17MX17Mn0iLG8sbXx8Zy5jdXJyZW5jeVNpZ24sayl9fSxkYXRlOmZ1bmN0aW9uKGgsaSl7aWYoIWgpe3JldHVybiIifWlmKCFFeHQuaXNEYXRlKGgpKXtoPW5ldyBEYXRlKERhdGUucGFyc2UoaCkpfXJldHVybiBFeHQuRGF0ZS5kYXRlRm9ybWF0KGgsaXx8RXh0LkRhdGUuZGVmYXVsdEZvcm1hdCl9LGRhdGVSZW5kZXJlcjpmdW5jdGlvbihoKXtyZXR1cm4gZnVuY3Rpb24oaSl7cmV0dXJuIGcuZGF0ZShpLGgpfX0sc3RyaXBUYWdzOmZ1bmN0aW9uKGgpe3JldHVybiAhaD9oOlN0cmluZyhoKS5yZXBsYWNlKGUsIiIpfSxzdHJpcFNjcmlwdHM6ZnVuY3Rpb24oaCl7cmV0dXJuICFoP2g6U3RyaW5nKGgpLnJlcGxhY2UoYywiIil9LGZpbGVTaXplOmZ1bmN0aW9uKGgpe2lmKGg8MTAyNCl7cmV0dXJuIGgrIiBieXRlcyJ9ZWxzZXtpZihoPDEwNDg1NzYpe3JldHVybihNYXRoLnJvdW5kKCgoaCoxMCkvMTAyNCkpLzEwKSsiIEtCIn1lbHNle3JldHVybihNYXRoLnJvdW5kKCgoaCoxMCkvMTA0ODU3NikpLzEwKSsiIE1CIn19fSxtYXRoOihmdW5jdGlvbigpe3ZhciBoPXt9O3JldHVybiBmdW5jdGlvbihqLGkpe2lmKCFoW2ldKXtoW2ldPUV4dC5mdW5jdGlvbkZhY3RvcnkoInYiLCJyZXR1cm4gdiAiK2krIjsiKX1yZXR1cm4gaFtpXShqKX19KCkpLHJvdW5kOmZ1bmN0aW9uKGosaSl7dmFyIGg9TnVtYmVyKGopO2lmKHR5cGVvZiBpPT0ibnVtYmVyIil7aT1NYXRoLnBvdygxMCxpKTtoPU1hdGgucm91bmQoaippKS9pfXJldHVybiBofSxudW1iZXI6ZnVuY3Rpb24oeSxzKXtpZighcyl7cmV0dXJuIHl9eT1FeHQuTnVtYmVyLmZyb20oeSxOYU4pO2lmKGlzTmFOKHkpKXtyZXR1cm4iIn12YXIgQT1nLnRob3VzYW5kU2VwYXJhdG9yLHE9Zy5kZWNpbWFsU2VwYXJhdG9yLHo9ZmFsc2Uscj15PDAsayxoLHgsdyxwLHQsbyxsLHU7eT1NYXRoLmFicyh5KTtpZihzLnN1YnN0cihzLmxlbmd0aC0yKT09Ii9pIil7aWYoIWEpe2E9bmV3IFJlZ0V4cCgiW15cXGRcXCIrZy5kZWNpbWFsU2VwYXJhdG9yKyJdIiwiZyIpfXM9cy5zdWJzdHIoMCxzLmxlbmd0aC0yKTt6PXRydWU7az1zLmluZGV4T2YoQSkhPS0xO2g9cy5yZXBsYWNlKGEsIiIpLnNwbGl0KHEpfWVsc2V7az1zLmluZGV4T2YoIiwiKSE9LTE7aD1zLnJlcGxhY2UoZCwiIikuc3BsaXQoIi4iKX1pZihoLmxlbmd0aD4yKXt9ZWxzZXtpZihoLmxlbmd0aD4xKXt5PUV4dC5OdW1iZXIudG9GaXhlZCh5LGhbMV0ubGVuZ3RoKX1lbHNle3k9RXh0Lk51bWJlci50b0ZpeGVkKHksMCl9fXg9eS50b1N0cmluZygpO2g9eC5zcGxpdCgiLiIpO2lmKGspe3c9aFswXTtwPVtdO3Q9dy5sZW5ndGg7bz1NYXRoLmZsb29yKHQvMyk7bD13Lmxlbmd0aCUzfHwzO2Zvcih1PTA7dTx0O3UrPWwpe2lmKHUhPT0wKXtsPTN9cFtwLmxlbmd0aF09dy5zdWJzdHIodSxsKTtvLT0xfXg9cC5qb2luKEEpO2lmKGhbMV0pe3grPXEraFsxXX19ZWxzZXtpZihoWzFdKXt4PWhbMF0rcStoWzFdfX1pZihyKXtyPXgucmVwbGFjZSgvW14xLTldL2csIiIpIT09IiJ9cmV0dXJuKHI/Ii0iOiIiKStzLnJlcGxhY2UoL1tcZCw/XC4/XSsvLHgpfSxudW1iZXJSZW5kZXJlcjpmdW5jdGlvbihoKXtyZXR1cm4gZnVuY3Rpb24oaSl7cmV0dXJuIGcubnVtYmVyKGksaCl9fSxwbHVyYWw6ZnVuY3Rpb24oaCxpLGope3JldHVybiBoKyIgIisoaD09MT9pOihqP2o6aSsicyIpKX0sbmwyYnI6ZnVuY3Rpb24oaCl7cmV0dXJuIEV4dC5pc0VtcHR5KGgpPyIiOmgucmVwbGFjZShiLCI8YnIvPiIpfSxjYXBpdGFsaXplOkV4dC5TdHJpbmcuY2FwaXRhbGl6ZSxlbGxpcHNpczpFeHQuU3RyaW5nLmVsbGlwc2lzLGZvcm1hdDpFeHQuU3RyaW5nLmZvcm1hdCxodG1sRGVjb2RlOkV4dC5TdHJpbmcuaHRtbERlY29kZSxodG1sRW5jb2RlOkV4dC5TdHJpbmcuaHRtbEVuY29kZSxsZWZ0UGFkOkV4dC5TdHJpbmcubGVmdFBhZCx0cmltOkV4dC5TdHJpbmcudHJpbSxwYXJzZUJveDpmdW5jdGlvbihpKXtpPUV4dC5pc0VtcHR5KGkpPyIiOmk7aWYoRXh0LmlzTnVtYmVyKGkpKXtpPWkudG9TdHJpbmcoKX12YXIgaj1pLnNwbGl0KCIgIiksaD1qLmxlbmd0aDtpZihoPT0xKXtqWzFdPWpbMl09alszXT1qWzBdfWVsc2V7aWYoaD09Mil7alsyXT1qWzBdO2pbM109alsxXX1lbHNle2lmKGg9PTMpe2pbM109alsxXX19fXJldHVybnt0b3A6cGFyc2VJbnQoalswXSwxMCl8fDAscmlnaHQ6cGFyc2VJbnQoalsxXSwxMCl8fDAsYm90dG9tOnBhcnNlSW50KGpbMl0sMTApfHwwLGxlZnQ6cGFyc2VJbnQoalszXSwxMCl8fDB9fSxlc2NhcGVSZWdleDpmdW5jdGlvbihoKXtyZXR1cm4gaC5yZXBsYWNlKC8oW1wtLiorP1xeJHt9KCl8XFtcXVwvXFxdKS9nLCJcXCQxIil9fSl9KCkpO0V4dC5kZWZpbmUoIkV4dC51dGlsLlRhc2tSdW5uZXIiLHtpbnRlcnZhbDoxMCx0aW1lcklkOm51bGwsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZih0eXBlb2YgYT09Im51bWJlciIpe2IuaW50ZXJ2YWw9YX1lbHNle2lmKGEpe0V4dC5hcHBseShiLGEpfX1iLnRhc2tzPVtdO2IudGltZXJGbj1FeHQuRnVuY3Rpb24uYmluZChiLm9uVGljayxiKX0sbmV3VGFzazpmdW5jdGlvbihiKXt2YXIgYT1uZXcgRXh0LnV0aWwuVGFza1J1bm5lci5UYXNrKGIpO2EubWFuYWdlcj10aGlzO3JldHVybiBhfSxzdGFydDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGI9bmV3IERhdGUoKS5nZXRUaW1lKCk7aWYoIWEucGVuZGluZyl7Yy50YXNrcy5wdXNoKGEpO2EucGVuZGluZz10cnVlfWEuc3RvcHBlZD1mYWxzZTthLnRhc2tTdGFydFRpbWU9YjthLnRhc2tSdW5UaW1lPWEuZmlyZU9uU3RhcnQhPT1mYWxzZT8wOmEudGFza1N0YXJ0VGltZTthLnRhc2tSdW5Db3VudD0wO2lmKCFjLmZpcmluZyl7aWYoYS5maXJlT25TdGFydCE9PWZhbHNlKXtjLnN0YXJ0VGltZXIoMCxiKX1lbHNle2Muc3RhcnRUaW1lcihhLmludGVydmFsLGIpfX1yZXR1cm4gYX0sc3RvcDpmdW5jdGlvbihhKXtpZighYS5zdG9wcGVkKXthLnN0b3BwZWQ9dHJ1ZTtpZihhLm9uU3RvcCl7YS5vblN0b3AuY2FsbChhLnNjb3BlfHxhLGEpfX1yZXR1cm4gYX0sc3RvcEFsbDpmdW5jdGlvbigpe0V4dC5lYWNoKHRoaXMudGFza3MsdGhpcy5zdG9wLHRoaXMpfSxmaXJpbmc6ZmFsc2UsbmV4dEV4cGlyZXM6MWUrOTksb25UaWNrOmZ1bmN0aW9uKCl7dmFyIG09dGhpcyxlPW0udGFza3MsYT1uZXcgRGF0ZSgpLmdldFRpbWUoKSxuPTFlKzk5LGs9ZS5sZW5ndGgsYyxvLGgsYixkLGc7bS50aW1lcklkPW51bGw7bS5maXJpbmc9dHJ1ZTtmb3IoaD0wO2g8a3x8aDwoaz1lLmxlbmd0aCk7KytoKXtiPWVbaF07aWYoIShnPWIuc3RvcHBlZCkpe2M9Yi50YXNrUnVuVGltZStiLmludGVydmFsO2lmKGM8PWEpe2Q9MTt0cnl7ZD1iLnJ1bi5hcHBseShiLnNjb3BlfHxiLGIuYXJnc3x8WysrYi50YXNrUnVuQ291bnRdKX1jYXRjaChqKXt0cnl7aWYoYi5vbkVycm9yKXtkPWIub25FcnJvci5jYWxsKGIuc2NvcGV8fGIsYixqKX19Y2F0Y2gobCl7fX1iLnRhc2tSdW5UaW1lPWE7aWYoZD09PWZhbHNlfHxiLnRhc2tSdW5Db3VudD09PWIucmVwZWF0KXttLnN0b3AoYik7Zz10cnVlfWVsc2V7Zz1iLnN0b3BwZWQ7Yz1hK2IuaW50ZXJ2YWx9fWlmKCFnJiZiLmR1cmF0aW9uJiZiLmR1cmF0aW9uPD0oYS1iLnRhc2tTdGFydFRpbWUpKXttLnN0b3AoYik7Zz10cnVlfX1pZihnKXtiLnBlbmRpbmc9ZmFsc2U7aWYoIW8pe289ZS5zbGljZSgwLGgpfX1lbHNle2lmKG8pe28ucHVzaChiKX1pZihuPmMpe249Y319fWlmKG8pe20udGFza3M9b31tLmZpcmluZz1mYWxzZTtpZihtLnRhc2tzLmxlbmd0aCl7bS5zdGFydFRpbWVyKG4tYSxuZXcgRGF0ZSgpLmdldFRpbWUoKSl9fSxzdGFydFRpbWVyOmZ1bmN0aW9uKGUsYyl7dmFyIGQ9dGhpcyxiPWMrZSxhPWQudGltZXJJZDtpZihhJiZkLm5leHRFeHBpcmVzLWI+ZC5pbnRlcnZhbCl7Y2xlYXJUaW1lb3V0KGEpO2E9bnVsbH1pZighYSl7aWYoZTxkLmludGVydmFsKXtlPWQuaW50ZXJ2YWx9ZC50aW1lcklkPXNldFRpbWVvdXQoZC50aW1lckZuLGUpO2QubmV4dEV4cGlyZXM9Yn19fSxmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLnByb3RvdHlwZTthLmRlc3Ryb3k9YS5zdG9wQWxsO0V4dC51dGlsLlRhc2tNYW5hZ2VyPUV4dC5UYXNrTWFuYWdlcj1uZXcgYigpO2IuVGFzaz1uZXcgRXh0LkNsYXNzKHtpc1Rhc2s6dHJ1ZSxzdG9wcGVkOnRydWUsZmlyZU9uU3RhcnQ6ZmFsc2UsY29uc3RydWN0b3I6ZnVuY3Rpb24oYyl7RXh0LmFwcGx5KHRoaXMsYyl9LHJlc3RhcnQ6ZnVuY3Rpb24oYyl7aWYoYyE9PXVuZGVmaW5lZCl7dGhpcy5pbnRlcnZhbD1jfXRoaXMubWFuYWdlci5zdGFydCh0aGlzKX0sc3RhcnQ6ZnVuY3Rpb24oYyl7aWYodGhpcy5zdG9wcGVkKXt0aGlzLnJlc3RhcnQoYyl9fSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5tYW5hZ2VyLnN0b3AodGhpcyl9fSk7YT1iLlRhc2sucHJvdG90eXBlO2EuZGVzdHJveT1hLnN0b3B9KTtFeHQuZGVmaW5lKCJFeHQucGVyZi5BY2N1bXVsYXRvciIsKGZ1bmN0aW9uKCl7dmFyIGM9bnVsbCxoPUV4dC5nbG9iYWwuY2hyb21lLGQsYj1mdW5jdGlvbigpe2I9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCl9O3ZhciBsLG07aWYoRXh0LmlzQ2hyb21lJiZoJiZoLkludGVydmFsKXtsPW5ldyBoLkludGVydmFsKCk7bC5zdGFydCgpO2I9ZnVuY3Rpb24oKXtyZXR1cm4gbC5taWNyb3NlY29uZHMoKS8xMDAwfX1lbHNle2lmKHdpbmRvdy5BY3RpdmVYT2JqZWN0KXt0cnl7bT1uZXcgQWN0aXZlWE9iamVjdCgiU2VuY2hhVG9vbGJveC5Ub29sYm94Iik7RXh0LnNlbmNoYVRvb2xib3g9bTtiPWZ1bmN0aW9uKCl7cmV0dXJuIG0ubWlsbGlzZWNvbmRzfX1jYXRjaChuKXt9fWVsc2V7aWYoRGF0ZS5ub3cpe2I9RGF0ZS5ub3d9fX1FeHQucGVyZi5nZXRUaW1lc3RhbXA9RXh0LnBlcmYuQWNjdW11bGF0b3IuZ2V0VGltZXN0YW1wPWI7cmV0dXJuIGIoKX07ZnVuY3Rpb24gaShtLGwpe20uc3VtKz1sO20ubWluPU1hdGgubWluKG0ubWluLGwpO20ubWF4PU1hdGgubWF4KG0ubWF4LGwpfWZ1bmN0aW9uIGUobyl7dmFyIG09bz9vOihiKCktdGhpcy50aW1lKSxuPXRoaXMsbD1uLmFjY3VtOysrbC5jb3VudDtpZighLS1sLmRlcHRoKXtpKGwudG90YWwsbSl9aShsLnB1cmUsbS1uLmNoaWxkVGltZSk7Yz1uLnBhcmVudDtpZihjKXsrK2MuYWNjdW0uY2hpbGRDb3VudDtjLmNoaWxkVGltZSs9bX19ZnVuY3Rpb24gYSgpe3JldHVybnttaW46TnVtYmVyLk1BWF9WQUxVRSxtYXg6MCxzdW06MH19ZnVuY3Rpb24gaihtLGwpe3JldHVybiBmdW5jdGlvbigpe3ZhciBvPW0uZW50ZXIoKSxuPWwuYXBwbHkodGhpcyxhcmd1bWVudHMpO28ubGVhdmUoKTtyZXR1cm4gbn19ZnVuY3Rpb24gayhsKXtyZXR1cm4gTWF0aC5yb3VuZChsKjEwMCkvMTAwfWZ1bmN0aW9uIGcobixtLGwscCl7dmFyIG89e2F2ZzowLG1pbjpwLm1pbixtYXg6cC5tYXgsc3VtOjB9O2lmKG4pe2w9bHx8MDtvLnN1bT1wLnN1bS1tKmw7by5hdmc9by5zdW0vbn1yZXR1cm4gb31yZXR1cm57Y29uc3RydWN0b3I6ZnVuY3Rpb24obCl7dmFyIG09dGhpczttLmNvdW50PW0uY2hpbGRDb3VudD1tLmRlcHRoPW0ubWF4RGVwdGg9MDttLnB1cmU9YSgpO20udG90YWw9YSgpO20ubmFtZT1sfSxzdGF0aWNzOntnZXRUaW1lc3RhbXA6Yn0sZm9ybWF0OmZ1bmN0aW9uKGwpe2lmKCFkKXtkPW5ldyBFeHQuWFRlbXBsYXRlKFsie25hbWV9IC0ge2NvdW50fSBjYWxsKHMpIiwnPHRwbCBpZj0iY291bnQiPicsJzx0cGwgaWY9ImNoaWxkQ291bnQiPicsIiAoe2NoaWxkQ291bnR9IGNoaWxkcmVuKSIsIjwvdHBsPiIsJzx0cGwgaWY9ImRlcHRoIC0gMSI+JywiICh7ZGVwdGh9IGRlZXApIiwiPC90cGw+IiwnPHRwbCBmb3I9InRpbWVzIj4nLCIsIHt0eXBlfToge1t0aGlzLnRpbWUodmFsdWVzLnN1bSldfSBtc2VjICgiLCJhdmc9e1t0aGlzLnRpbWUodmFsdWVzLnN1bSAvIHBhcmVudC5jb3VudCldfSIsIikiLCI8L3RwbD4iLCI8L3RwbD4iXS5qb2luKCIiKSx7dGltZTpmdW5jdGlvbihuKXtyZXR1cm4gTWF0aC5yb3VuZChuKjEwMCkvMTAwfX0pfXZhciBtPXRoaXMuZ2V0RGF0YShsKTttLm5hbWU9dGhpcy5uYW1lO20ucHVyZS50eXBlPSJQdXJlIjttLnRvdGFsLnR5cGU9IlRvdGFsIjttLnRpbWVzPVttLnB1cmUsbS50b3RhbF07cmV0dXJuIGQuYXBwbHkobSl9LGdldERhdGE6ZnVuY3Rpb24obCl7dmFyIG09dGhpcztyZXR1cm57Y291bnQ6bS5jb3VudCxjaGlsZENvdW50Om0uY2hpbGRDb3VudCxkZXB0aDptLm1heERlcHRoLHB1cmU6ZyhtLmNvdW50LG0uY2hpbGRDb3VudCxsLG0ucHVyZSksdG90YWw6ZyhtLmNvdW50LG0uY2hpbGRDb3VudCxsLG0udG90YWwpfX0sZW50ZXI6ZnVuY3Rpb24oKXt2YXIgbD10aGlzLG09e2FjY3VtOmwsbGVhdmU6ZSxjaGlsZFRpbWU6MCxwYXJlbnQ6Y307KytsLmRlcHRoO2lmKGwubWF4RGVwdGg8bC5kZXB0aCl7bC5tYXhEZXB0aD1sLmRlcHRofWM9bTttLnRpbWU9YigpO3JldHVybiBtfSxtb25pdG9yOmZ1bmN0aW9uKG4sbSxsKXt2YXIgbz10aGlzLmVudGVyKCk7aWYobCl7bi5hcHBseShtLGwpfWVsc2V7bi5jYWxsKG0pfW8ubGVhdmUoKX0scmVwb3J0OmZ1bmN0aW9uKCl7RXh0LmxvZyh0aGlzLmZvcm1hdCgpKX0sdGFwOmZ1bmN0aW9uKHQsdil7dmFyIHU9dGhpcyxvPXR5cGVvZiB2PT0ic3RyaW5nIj9bdl06dixzLHcscSxwLG4sbSxsLHI7cj1mdW5jdGlvbigpe2lmKHR5cGVvZiB0PT0ic3RyaW5nIil7cz1FeHQuZ2xvYmFsO3A9dC5zcGxpdCgiLiIpO2ZvcihxPTAsbj1wLmxlbmd0aDtxPG47KytxKXtzPXNbcFtxXV19fWVsc2V7cz10fWZvcihxPTAsbj1vLmxlbmd0aDtxPG47KytxKXttPW9bcV07dz1tLmNoYXJBdCgwKT09IiEiO2lmKHcpe209bS5zdWJzdHJpbmcoMSl9ZWxzZXt3PSEobSBpbiBzLnByb3RvdHlwZSl9bD13P3M6cy5wcm90b3R5cGU7bFttXT1qKHUsbFttXSl9fTtFeHQuQ2xhc3NNYW5hZ2VyLm9uQ3JlYXRlZChyLHUsdCk7cmV0dXJuIHV9fX0oKSksZnVuY3Rpb24oKXtFeHQucGVyZi5nZXRUaW1lc3RhbXA9dGhpcy5nZXRUaW1lc3RhbXB9KTtFeHQuZGVmaW5lKCJFeHQucGVyZi5Nb25pdG9yIix7c2luZ2xldG9uOnRydWUsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuUGVyZiIscmVxdWlyZXM6WyJFeHQucGVyZi5BY2N1bXVsYXRvciJdLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dGhpcy5hY2N1bXVsYXRvcnM9W107dGhpcy5hY2N1bXVsYXRvcnNCeU5hbWU9e319LGNhbGlicmF0ZTpmdW5jdGlvbigpe3ZhciBiPW5ldyBFeHQucGVyZi5BY2N1bXVsYXRvcigiJCIpLGc9Yi50b3RhbCxjPUV4dC5wZXJmLkFjY3VtdWxhdG9yLmdldFRpbWVzdGFtcCxlPTAsaCxhLGQ7ZD1jKCk7ZG97aD1iLmVudGVyKCk7aC5sZWF2ZSgpOysrZX13aGlsZShnLnN1bTwxMDApO2E9YygpO3JldHVybihhLWQpL2V9LGdldDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLGE9Yy5hY2N1bXVsYXRvcnNCeU5hbWVbYl07aWYoIWEpe2MuYWNjdW11bGF0b3JzQnlOYW1lW2JdPWE9bmV3IEV4dC5wZXJmLkFjY3VtdWxhdG9yKGIpO2MuYWNjdW11bGF0b3JzLnB1c2goYSl9cmV0dXJuIGF9LGVudGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldChhKS5lbnRlcigpfSxtb25pdG9yOmZ1bmN0aW9uKGEsYyxiKXt0aGlzLmdldChhKS5tb25pdG9yKGMsYil9LHJlcG9ydDpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYj1jLmFjY3VtdWxhdG9ycyxhPWMuY2FsaWJyYXRlKCk7Yi5zb3J0KGZ1bmN0aW9uKGUsZCl7cmV0dXJuKGUubmFtZTxkLm5hbWUpPy0xOigoZC5uYW1lPGUubmFtZSk/MTowKX0pO2MudXBkYXRlR0MoKTtFeHQubG9nKCJDYWxpYnJhdGlvbjogIitNYXRoLnJvdW5kKGEqMTAwKS8xMDArIiBtc2VjL3NhbXBsZSIpO0V4dC5lYWNoKGIsZnVuY3Rpb24oZCl7RXh0LmxvZyhkLmZvcm1hdChhKSl9KX0sZ2V0RGF0YTpmdW5jdGlvbihjKXt2YXIgYj17fSxhPXRoaXMuYWNjdW11bGF0b3JzO0V4dC5lYWNoKGEsZnVuY3Rpb24oZCl7aWYoY3x8ZC5jb3VudCl7YltkLm5hbWVdPWQuZ2V0RGF0YSgpfX0pO3JldHVybiBifSxyZXNldDpmdW5jdGlvbigpe0V4dC5lYWNoKHRoaXMuYWNjdW11bGF0b3JzLGZ1bmN0aW9uKGEpe3ZhciBiPWE7Yi5jb3VudD1iLmNoaWxkQ291bnQ9Yi5kZXB0aD1iLm1heERlcHRoPTA7Yi5wdXJlPXttaW46TnVtYmVyLk1BWF9WQUxVRSxtYXg6MCxzdW06MH07Yi50b3RhbD17bWluOk51bWJlci5NQVhfVkFMVUUsbWF4OjAsc3VtOjB9fSl9LHVwZGF0ZUdDOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hY2N1bXVsYXRvcnNCeU5hbWUuR0MsYj1FeHQuc2VuY2hhVG9vbGJveCxjO2lmKGEpe2EuY291bnQ9Yi5nYXJiYWdlQ29sbGVjdGlvbkNvdW50ZXJ8fDA7aWYoYS5jb3VudCl7Yz1hLnB1cmU7YS50b3RhbC5zdW09Yy5zdW09Yi5nYXJiYWdlQ29sbGVjdGlvbk1pbGxpc2Vjb25kcztjLm1pbj1jLm1heD1jLnN1bS9hLmNvdW50O2M9YS50b3RhbDtjLm1pbj1jLm1heD1jLnN1bS9hLmNvdW50fX19LHdhdGNoR0M6ZnVuY3Rpb24oKXtFeHQucGVyZi5nZXRUaW1lc3RhbXAoKTt2YXIgYT1FeHQuc2VuY2hhVG9vbGJveDtpZihhKXt0aGlzLmdldCgiR0MiKTthLndhdGNoR2FyYmFnZUNvbGxlY3RvcihmYWxzZSl9fSxzZXR1cDpmdW5jdGlvbihjKXtpZighYyl7Yz17cmVuZGVyOnsiRXh0LkFic3RyYWN0Q29tcG9uZW50IjoicmVuZGVyIn0sbGF5b3V0OnsiRXh0LmxheW91dC5Db250ZXh0IjoicnVuIn19fXRoaXMuY3VycmVudENvbmZpZz1jO3ZhciBkLGcsYixlLGE7Zm9yKGQgaW4gYyl7aWYoYy5oYXNPd25Qcm9wZXJ0eShkKSl7Zz1jW2RdO2I9RXh0LlBlcmYuZ2V0KGQpO2ZvcihlIGluIGcpe2lmKGcuaGFzT3duUHJvcGVydHkoZSkpe2E9Z1tlXTtiLnRhcChlLGEpfX19fXRoaXMud2F0Y2hHQygpfX0pO0V4dC5pcz17aW5pdDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLnBsYXRmb3JtcyxlPWMubGVuZ3RoLGQsYTtiPWJ8fHdpbmRvdy5uYXZpZ2F0b3I7Zm9yKGQ9MDtkPGU7ZCsrKXthPWNbZF07dGhpc1thLmlkZW50aXR5XT1hLnJlZ2V4LnRlc3QoYlthLnByb3BlcnR5XSl9dGhpcy5EZXNrdG9wPXRoaXMuTWFjfHx0aGlzLldpbmRvd3N8fCh0aGlzLkxpbnV4JiYhdGhpcy5BbmRyb2lkKTt0aGlzLlRhYmxldD10aGlzLmlQYWQ7dGhpcy5QaG9uZT0hdGhpcy5EZXNrdG9wJiYhdGhpcy5UYWJsZXQ7dGhpcy5pT1M9dGhpcy5pUGhvbmV8fHRoaXMuaVBhZHx8dGhpcy5pUG9kO3RoaXMuU3RhbmRhbG9uZT0hIXdpbmRvdy5uYXZpZ2F0b3Iuc3RhbmRhbG9uZX0scGxhdGZvcm1zOlt7cHJvcGVydHk6InBsYXRmb3JtIixyZWdleDovaVBob25lL2ksaWRlbnRpdHk6ImlQaG9uZSJ9LHtwcm9wZXJ0eToicGxhdGZvcm0iLHJlZ2V4Oi9pUG9kL2ksaWRlbnRpdHk6ImlQb2QifSx7cHJvcGVydHk6InVzZXJBZ2VudCIscmVnZXg6L2lQYWQvaSxpZGVudGl0eToiaVBhZCJ9LHtwcm9wZXJ0eToidXNlckFnZW50IixyZWdleDovQmxhY2tiZXJyeS9pLGlkZW50aXR5OiJCbGFja2JlcnJ5In0se3Byb3BlcnR5OiJ1c2VyQWdlbnQiLHJlZ2V4Oi9BbmRyb2lkL2ksaWRlbnRpdHk6IkFuZHJvaWQifSx7cHJvcGVydHk6InBsYXRmb3JtIixyZWdleDovTWFjL2ksaWRlbnRpdHk6Ik1hYyJ9LHtwcm9wZXJ0eToicGxhdGZvcm0iLHJlZ2V4Oi9XaW4vaSxpZGVudGl0eToiV2luZG93cyJ9LHtwcm9wZXJ0eToicGxhdGZvcm0iLHJlZ2V4Oi9MaW51eC9pLGlkZW50aXR5OiJMaW51eCJ9XX07RXh0LmlzLmluaXQoKTsoZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihkLGMpe3ZhciBiPWQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyxlPShiP2IuZ2V0Q29tcHV0ZWRTdHlsZShkLG51bGwpOmQuY3VycmVudFN0eWxlKXx8ZC5zdHlsZTtyZXR1cm4gZVtjXX07RXh0LnN1cHBvcnRzPXtpbml0OmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxlPWRvY3VtZW50LGM9ZC50ZXN0cyxpPWMubGVuZ3RoLGg9aSYmRXh0LmlzUmVhZHkmJmUuY3JlYXRlRWxlbWVudCgiZGl2IiksZyxiPVtdO2lmKGgpe2guaW5uZXJIVE1MPVsnPGRpdiBzdHlsZT0iaGVpZ2h0OjMwcHg7d2lkdGg6NTBweDsiPicsJzxkaXYgc3R5bGU9ImhlaWdodDoyMHB4O3dpZHRoOjIwcHg7Ij48L2Rpdj4nLCI8L2Rpdj4iLCc8ZGl2IHN0eWxlPSJ3aWR0aDogMjAwcHg7IGhlaWdodDogMjAwcHg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgcGFkZGluZzogNXB4OyI+JywnPGRpdiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7Ij48L2Rpdj4nLCI8L2Rpdj4iLCc8ZGl2IHN0eWxlPSJwb3NpdGlvbjogYWJzb2x1dGU7IGxlZnQ6IDEwJTsgdG9wOiAxMCU7Ij48L2Rpdj4nLCc8ZGl2IHN0eWxlPSJmbG9hdDpsZWZ0OyBiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50OyI+PC9kaXY+J10uam9pbigiIik7ZS5ib2R5LmFwcGVuZENoaWxkKGgpfXdoaWxlKGktLSl7Zz1jW2ldO2lmKGh8fGcuZWFybHkpe2RbZy5pZGVudGl0eV09Zy5mbi5jYWxsKGQsZSxoKX1lbHNle2IucHVzaChnKX19aWYoaCl7ZS5ib2R5LnJlbW92ZUNoaWxkKGgpfWQudGVzdHM9Yn0sUG9pbnRlckV2ZW50czoicG9pbnRlckV2ZW50cyIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLENTUzNCb3hTaGFkb3c6ImJveFNoYWRvdyIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlfHwiV2Via2l0Qm94U2hhZG93IiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGV8fCJNb3pCb3hTaGFkb3ciIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSxDbGFzc0xpc3Q6ISFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LE9yaWVudGF0aW9uQ2hhbmdlOigodHlwZW9mIHdpbmRvdy5vcmllbnRhdGlvbiE9InVuZGVmaW5lZCIpJiYoIm9ub3JpZW50YXRpb25jaGFuZ2UiIGluIHdpbmRvdykpLERldmljZU1vdGlvbjooIm9uZGV2aWNlbW90aW9uIiBpbiB3aW5kb3cpLFRvdWNoOigib250b3VjaHN0YXJ0IiBpbiB3aW5kb3cpJiYoIUV4dC5pcy5EZXNrdG9wKSxUaW1lb3V0QWN0dWFsTGF0ZW5lc3M6KGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe0V4dC5zdXBwb3J0cy5UaW1lb3V0QWN0dWFsTGF0ZW5lc3M9YXJndW1lbnRzLmxlbmd0aCE9PTB9LDApfSgpKSx0ZXN0czpbe2lkZW50aXR5OiJUcmFuc2l0aW9ucyIsZm46ZnVuY3Rpb24oaCxrKXt2YXIgZz1bIndlYmtpdCIsIk1veiIsIm8iLCJtcyIsImtodG1sIl0saj0iVHJhbnNpdGlvbkVuZCIsYj1bZ1swXStqLCJ0cmFuc2l0aW9uZW5kIixnWzJdK2osZ1szXStqLGdbNF0ral0sZT1nLmxlbmd0aCxkPTAsYz1mYWxzZTtmb3IoO2Q8ZTtkKyspe2lmKGEoayxnW2RdKyJUcmFuc2l0aW9uUHJvcGVydHkiKSl7RXh0LnN1cHBvcnRzLkNTUzNQcmVmaXg9Z1tkXTtFeHQuc3VwcG9ydHMuQ1NTM1RyYW5zaXRpb25FbmQ9YltkXTtjPXRydWU7YnJlYWt9fXJldHVybiBjfX0se2lkZW50aXR5OiJSaWdodE1hcmdpbiIsZm46ZnVuY3Rpb24oYyxkKXt2YXIgYj1jLmRlZmF1bHRWaWV3O3JldHVybiAhKGImJmIuZ2V0Q29tcHV0ZWRTdHlsZShkLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZCxudWxsKS5tYXJnaW5SaWdodCE9IjBweCIpfX0se2lkZW50aXR5OiJEaXNwbGF5Q2hhbmdlSW5wdXRTZWxlY3Rpb25CdWciLGVhcmx5OnRydWUsZm46ZnVuY3Rpb24oKXt2YXIgYj1FeHQud2ViS2l0VmVyc2lvbjtyZXR1cm4gMDxiJiZiPDUzM319LHtpZGVudGl0eToiRGlzcGxheUNoYW5nZVRleHRBcmVhU2VsZWN0aW9uQnVnIixlYXJseTp0cnVlLGZuOmZ1bmN0aW9uKCl7dmFyIGI9RXh0LndlYktpdFZlcnNpb247cmV0dXJuIDA8YiYmYjw1MzQuMjR9fSx7aWRlbnRpdHk6IlRyYW5zcGFyZW50Q29sb3IiLGZuOmZ1bmN0aW9uKGMsZCxiKXtiPWMuZGVmYXVsdFZpZXc7cmV0dXJuICEoYiYmYi5nZXRDb21wdXRlZFN0eWxlKGQubGFzdENoaWxkLG51bGwpLmJhY2tncm91bmRDb2xvciE9InRyYW5zcGFyZW50Iil9fSx7aWRlbnRpdHk6IkNvbXB1dGVkU3R5bGUiLGZuOmZ1bmN0aW9uKGMsZCxiKXtiPWMuZGVmYXVsdFZpZXc7cmV0dXJuIGImJmIuZ2V0Q29tcHV0ZWRTdHlsZX19LHtpZGVudGl0eToiU3ZnIixmbjpmdW5jdGlvbihiKXtyZXR1cm4gISFiLmNyZWF0ZUVsZW1lbnROUyYmISFiLmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCJzdmciKS5jcmVhdGVTVkdSZWN0fX0se2lkZW50aXR5OiJDYW52YXMiLGZuOmZ1bmN0aW9uKGIpe3JldHVybiAhIWIuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dH19LHtpZGVudGl0eToiVm1sIixmbjpmdW5jdGlvbihiKXt2YXIgYz1iLmNyZWF0ZUVsZW1lbnQoImRpdiIpO2MuaW5uZXJIVE1MPSI8IS0tW2lmIHZtbF0+PGJyLz48YnIvPjwhW2VuZGlmXS0tPiI7cmV0dXJuKGMuY2hpbGROb2Rlcy5sZW5ndGg9PTIpfX0se2lkZW50aXR5OiJGbG9hdCIsZm46ZnVuY3Rpb24oYixjKXtyZXR1cm4gISFjLmxhc3RDaGlsZC5zdHlsZS5jc3NGbG9hdH19LHtpZGVudGl0eToiQXVkaW9UYWciLGZuOmZ1bmN0aW9uKGIpe3JldHVybiAhIWIuY3JlYXRlRWxlbWVudCgiYXVkaW8iKS5jYW5QbGF5VHlwZX19LHtpZGVudGl0eToiSGlzdG9yeSIsZm46ZnVuY3Rpb24oKXt2YXIgYj13aW5kb3cuaGlzdG9yeTtyZXR1cm4gISEoYiYmYi5wdXNoU3RhdGUpfX0se2lkZW50aXR5OiJDU1MzRFRyYW5zZm9ybSIsZm46ZnVuY3Rpb24oKXtyZXR1cm4odHlwZW9mIFdlYktpdENTU01hdHJpeCE9InVuZGVmaW5lZCImJm5ldyBXZWJLaXRDU1NNYXRyaXgoKS5oYXNPd25Qcm9wZXJ0eSgibTQxIikpfX0se2lkZW50aXR5OiJDU1MzTGluZWFyR3JhZGllbnQiLGZuOmZ1bmN0aW9uKGgsail7dmFyIGc9ImJhY2tncm91bmQtaW1hZ2U6IixkPSItd2Via2l0LWdyYWRpZW50KGxpbmVhciwgbGVmdCB0b3AsIHJpZ2h0IGJvdHRvbSwgZnJvbShibGFjayksIHRvKHdoaXRlKSkiLGk9ImxpbmVhci1ncmFkaWVudChsZWZ0IHRvcCwgYmxhY2ssIHdoaXRlKSIsZT0iLW1vei0iK2ksYj0iLW8tIitpLGM9W2crZCxnK2ksZytlLGcrYl07ai5zdHlsZS5jc3NUZXh0PWMuam9pbigiOyIpO3JldHVybigiIitqLnN0eWxlLmJhY2tncm91bmRJbWFnZSkuaW5kZXhPZigiZ3JhZGllbnQiKSE9PS0xfX0se2lkZW50aXR5OiJDU1MzQm9yZGVyUmFkaXVzIixmbjpmdW5jdGlvbihlLGcpe3ZhciBjPVsiYm9yZGVyUmFkaXVzIiwiQm9yZGVyUmFkaXVzIiwiTW96Qm9yZGVyUmFkaXVzIiwiV2Via2l0Qm9yZGVyUmFkaXVzIiwiT0JvcmRlclJhZGl1cyIsIktodG1sQm9yZGVyUmFkaXVzIl0sZD1mYWxzZSxiO2ZvcihiPTA7YjxjLmxlbmd0aDtiKyspe2lmKGRvY3VtZW50LmJvZHkuc3R5bGVbY1tiXV0hPT11bmRlZmluZWQpe3JldHVybiB0cnVlfX1yZXR1cm4gZH19LHtpZGVudGl0eToiR2VvTG9jYXRpb24iLGZuOmZ1bmN0aW9uKCl7cmV0dXJuKHR5cGVvZiBuYXZpZ2F0b3IhPSJ1bmRlZmluZWQiJiZ0eXBlb2YgbmF2aWdhdG9yLmdlb2xvY2F0aW9uIT0idW5kZWZpbmVkIil8fCh0eXBlb2YgZ29vZ2xlIT0idW5kZWZpbmVkIiYmdHlwZW9mIGdvb2dsZS5nZWFycyE9InVuZGVmaW5lZCIpfX0se2lkZW50aXR5OiJNb3VzZUVudGVyTGVhdmUiLGZuOmZ1bmN0aW9uKGIsYyl7cmV0dXJuKCJvbm1vdXNlZW50ZXIiIGluIGMmJiJvbm1vdXNlbGVhdmUiIGluIGMpfX0se2lkZW50aXR5OiJNb3VzZVdoZWVsIixmbjpmdW5jdGlvbihiLGMpe3JldHVybigib25tb3VzZXdoZWVsIiBpbiBjKX19LHtpZGVudGl0eToiT3BhY2l0eSIsZm46ZnVuY3Rpb24oYixjKXtpZihFeHQuaXNJRTZ8fEV4dC5pc0lFN3x8RXh0LmlzSUU4KXtyZXR1cm4gZmFsc2V9Yy5maXJzdENoaWxkLnN0eWxlLmNzc1RleHQ9Im9wYWNpdHk6MC43MyI7cmV0dXJuIGMuZmlyc3RDaGlsZC5zdHlsZS5vcGFjaXR5PT0iMC43MyJ9fSx7aWRlbnRpdHk6IlBsYWNlaG9sZGVyIixmbjpmdW5jdGlvbihiKXtyZXR1cm4icGxhY2Vob2xkZXIiIGluIGIuY3JlYXRlRWxlbWVudCgiaW5wdXQiKX19LHtpZGVudGl0eToiRGlyZWN0MkRCdWciLGZuOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5pc1N0cmluZyhkb2N1bWVudC5ib2R5LnN0eWxlLm1zVHJhbnNmb3JtT3JpZ2luKX19LHtpZGVudGl0eToiQm91bmRpbmdDbGllbnRSZWN0IixmbjpmdW5jdGlvbihiLGMpe3JldHVybiBFeHQuaXNGdW5jdGlvbihjLmdldEJvdW5kaW5nQ2xpZW50UmVjdCl9fSx7aWRlbnRpdHk6IkluY2x1ZGVQYWRkaW5nSW5XaWR0aENhbGN1bGF0aW9uIixmbjpmdW5jdGlvbihiLGMpe3JldHVybiBjLmNoaWxkTm9kZXNbMV0uZmlyc3RDaGlsZC5vZmZzZXRXaWR0aD09MjEwfX0se2lkZW50aXR5OiJJbmNsdWRlUGFkZGluZ0luSGVpZ2h0Q2FsY3VsYXRpb24iLGZuOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGMuY2hpbGROb2Rlc1sxXS5maXJzdENoaWxkLm9mZnNldEhlaWdodD09MjEwfX0se2lkZW50aXR5OiJBcnJheVNvcnQiLGZuOmZ1bmN0aW9uKCl7dmFyIGI9WzEsMiwzLDQsNV0uc29ydChmdW5jdGlvbigpe3JldHVybiAwfSk7cmV0dXJuIGJbMF09PT0xJiZiWzFdPT09MiYmYlsyXT09PTMmJmJbM109PT00JiZiWzRdPT09NX19LHtpZGVudGl0eToiUmFuZ2UiLGZuOmZ1bmN0aW9uKCl7cmV0dXJuICEhZG9jdW1lbnQuY3JlYXRlUmFuZ2V9fSx7aWRlbnRpdHk6IkNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCIsZm46ZnVuY3Rpb24oKXt2YXIgYj1FeHQuc3VwcG9ydHMuUmFuZ2U/ZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTpmYWxzZTtyZXR1cm4gYiYmISFiLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudH19LHtpZGVudGl0eToiV2luZG93T25FcnJvciIsZm46ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmlzSUV8fEV4dC5pc0dlY2tvfHxFeHQud2ViS2l0VmVyc2lvbj49NTM0LjE2fX0se2lkZW50aXR5OiJUZXh0QXJlYU1heExlbmd0aCIsZm46ZnVuY3Rpb24oKXt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpO3JldHVybigibWF4bGVuZ3RoIiBpbiBiKX19LHtpZGVudGl0eToiR2V0UG9zaXRpb25QZXJjZW50YWdlIixmbjpmdW5jdGlvbihiLGMpe3JldHVybiBhKGMuY2hpbGROb2Rlc1syXSwibGVmdCIpPT0iMTAlIn19XX19KCkpO0V4dC5zdXBwb3J0cy5pbml0KCk7RXh0LnV0aWwuRGVsYXllZFRhc2s9ZnVuY3Rpb24oZCxjLGEpe3ZhciBlPXRoaXMsZyxiPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChnKTtnPW51bGw7ZC5hcHBseShjLGF8fFtdKX07dGhpcy5kZWxheT1mdW5jdGlvbihpLGssaixoKXtlLmNhbmNlbCgpO2Q9a3x8ZDtjPWp8fGM7YT1ofHxhO2c9c2V0SW50ZXJ2YWwoYixpKX07dGhpcy5jYW5jZWw9ZnVuY3Rpb24oKXtpZihnKXtjbGVhckludGVydmFsKGcpO2c9bnVsbH19fTtFeHQucmVxdWlyZSgiRXh0LnV0aWwuRGVsYXllZFRhc2siLGZ1bmN0aW9uKCl7RXh0LnV0aWwuRXZlbnQ9RXh0LmV4dGVuZChPYmplY3QsKGZ1bmN0aW9uKCl7dmFyIGI9e307ZnVuY3Rpb24gZChoLGksaixnKXtyZXR1cm4gZnVuY3Rpb24oKXtpZihqLnRhcmdldD09PWFyZ3VtZW50c1swXSl7aC5hcHBseShnLGFyZ3VtZW50cyl9fX1mdW5jdGlvbiBjKGgsaSxqLGcpe2kudGFzaz1uZXcgRXh0LnV0aWwuRGVsYXllZFRhc2soKTtyZXR1cm4gZnVuY3Rpb24oKXtpLnRhc2suZGVsYXkoai5idWZmZXIsaCxnLEV4dC5BcnJheS50b0FycmF5KGFyZ3VtZW50cykpfX1mdW5jdGlvbiBhKGgsaSxqLGcpe3JldHVybiBmdW5jdGlvbigpe3ZhciBrPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzaygpO2lmKCFpLnRhc2tzKXtpLnRhc2tzPVtdfWkudGFza3MucHVzaChrKTtrLmRlbGF5KGouZGVsYXl8fDEwLGgsZyxFeHQuQXJyYXkudG9BcnJheShhcmd1bWVudHMpKX19ZnVuY3Rpb24gZShoLGksaixnKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaz1pLmV2O2lmKGsucmVtb3ZlTGlzdGVuZXIoaS5mbixnKSYmay5vYnNlcnZhYmxlKXtrLm9ic2VydmFibGUuaGFzTGlzdGVuZXJzW2submFtZV0tLX1yZXR1cm4gaC5hcHBseShnLGFyZ3VtZW50cyl9fXJldHVybntpc0V2ZW50OnRydWUsY29uc3RydWN0b3I6ZnVuY3Rpb24oaCxnKXt0aGlzLm5hbWU9Zzt0aGlzLm9ic2VydmFibGU9aDt0aGlzLmxpc3RlbmVycz1bXX0sYWRkTGlzdGVuZXI6ZnVuY3Rpb24oaSxoLGcpe3ZhciBqPXRoaXMsaztoPWh8fGoub2JzZXJ2YWJsZTtpZighai5pc0xpc3RlbmluZyhpLGgpKXtrPWouY3JlYXRlTGlzdGVuZXIoaSxoLGcpO2lmKGouZmlyaW5nKXtqLmxpc3RlbmVycz1qLmxpc3RlbmVycy5zbGljZSgwKX1qLmxpc3RlbmVycy5wdXNoKGspfX0sY3JlYXRlTGlzdGVuZXI6ZnVuY3Rpb24oaixpLGcpe2c9Z3x8YjtpPWl8fHRoaXMub2JzZXJ2YWJsZTt2YXIgaz17Zm46aixzY29wZTppLG86Zyxldjp0aGlzfSxoPWo7aWYoZy5zaW5nbGUpe2g9ZShoLGssZyxpKX1pZihnLnRhcmdldCl7aD1kKGgsayxnLGkpfWlmKGcuZGVsYXkpe2g9YShoLGssZyxpKX1pZihnLmJ1ZmZlcil7aD1jKGgsayxnLGkpfWsuZmlyZUZuPWg7cmV0dXJuIGt9LGZpbmRMaXN0ZW5lcjpmdW5jdGlvbihsLGspe3ZhciBqPXRoaXMubGlzdGVuZXJzLGc9ai5sZW5ndGgsbSxoO3doaWxlKGctLSl7bT1qW2ddO2lmKG0pe2g9bS5zY29wZTtpZihtLmZuPT1sJiYoaD09KGt8fHRoaXMub2JzZXJ2YWJsZSkpKXtyZXR1cm4gZ319fXJldHVybiAtMX0saXNMaXN0ZW5pbmc6ZnVuY3Rpb24oaCxnKXtyZXR1cm4gdGhpcy5maW5kTGlzdGVuZXIoaCxnKSE9PS0xfSxyZW1vdmVMaXN0ZW5lcjpmdW5jdGlvbihqLGkpe3ZhciBsPXRoaXMsaCxtLGc7aD1sLmZpbmRMaXN0ZW5lcihqLGkpO2lmKGghPS0xKXttPWwubGlzdGVuZXJzW2hdO2lmKGwuZmlyaW5nKXtsLmxpc3RlbmVycz1sLmxpc3RlbmVycy5zbGljZSgwKX1pZihtLnRhc2spe20udGFzay5jYW5jZWwoKTtkZWxldGUgbS50YXNrfWc9bS50YXNrcyYmbS50YXNrcy5sZW5ndGg7aWYoZyl7d2hpbGUoZy0tKXttLnRhc2tzW2ddLmNhbmNlbCgpfWRlbGV0ZSBtLnRhc2tzfUV4dC5BcnJheS5lcmFzZShsLmxpc3RlbmVycyxoLDEpO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX0sY2xlYXJMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgaD10aGlzLmxpc3RlbmVycyxnPWgubGVuZ3RoO3doaWxlKGctLSl7dGhpcy5yZW1vdmVMaXN0ZW5lcihoW2ddLmZuLGhbZ10uc2NvcGUpfX0sZmlyZTpmdW5jdGlvbigpe3ZhciBsPXRoaXMsaj1sLmxpc3RlbmVycyxrPWoubGVuZ3RoLGgsZyxtO2lmKGs+MCl7bC5maXJpbmc9dHJ1ZTtmb3IoaD0wO2g8aztoKyspe209altoXTtnPWFyZ3VtZW50cy5sZW5ndGg/QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApOltdO2lmKG0ubyl7Zy5wdXNoKG0ubyl9aWYobSYmbS5maXJlRm4uYXBwbHkobS5zY29wZXx8bC5vYnNlcnZhYmxlLGcpPT09ZmFsc2Upe3JldHVybihsLmZpcmluZz1mYWxzZSl9fX1sLmZpcmluZz1mYWxzZTtyZXR1cm4gdHJ1ZX19fSgpKSl9KTtFeHQuZGVmaW5lKCJFeHQudXRpbC5PYnNlcnZhYmxlIix7cmVxdWlyZXM6WyJFeHQudXRpbC5FdmVudCJdLHN0YXRpY3M6e3JlbGVhc2VDYXB0dXJlOmZ1bmN0aW9uKGEpe2EuZmlyZUV2ZW50PXRoaXMucHJvdG90eXBlLmZpcmVFdmVudH0sY2FwdHVyZTpmdW5jdGlvbihjLGIsYSl7Yy5maXJlRXZlbnQ9RXh0LkZ1bmN0aW9uLmNyZWF0ZUludGVyY2VwdG9yKGMuZmlyZUV2ZW50LGIsYSl9LG9ic2VydmU6ZnVuY3Rpb24oYSxiKXtpZihhKXtpZighYS5pc09ic2VydmFibGUpe0V4dC5hcHBseUlmKGEsbmV3IHRoaXMoKSk7dGhpcy5jYXB0dXJlKGEucHJvdG90eXBlLGEuZmlyZUV2ZW50LGEpfWlmKEV4dC5pc09iamVjdChiKSl7YS5vbihiKX19cmV0dXJuIGF9LHByZXBhcmVDbGFzczpmdW5jdGlvbihkLGMpe2lmKCFkLkhhc0xpc3RlbmVycyl7dmFyIGI9RXh0LnV0aWwuT2JzZXJ2YWJsZSxlPWZ1bmN0aW9uKCl7fSxhPWQuc3VwZXJjbGFzcy5IYXNMaXN0ZW5lcnN8fChjJiZjLkhhc0xpc3RlbmVycyl8fGIuSGFzTGlzdGVuZXJzO2QucHJvdG90eXBlLkhhc0xpc3RlbmVycz1kLkhhc0xpc3RlbmVycz1lO2UucHJvdG90eXBlPWQuaGFzTGlzdGVuZXJzPW5ldyBhKCl9fX0saXNPYnNlcnZhYmxlOnRydWUsZXZlbnRzU3VzcGVuZGVkOjAsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztFeHQuYXBwbHkoYixhKTtpZighYi5oYXNMaXN0ZW5lcnMpe2IuaGFzTGlzdGVuZXJzPW5ldyBiLkhhc0xpc3RlbmVycygpfWIuZXZlbnRzPWIuZXZlbnRzfHx7fTtpZihiLmxpc3RlbmVycyl7Yi5vbihiLmxpc3RlbmVycyk7Yi5saXN0ZW5lcnM9bnVsbH1pZihiLmJ1YmJsZUV2ZW50cyl7Yi5lbmFibGVCdWJibGUoYi5idWJibGVFdmVudHMpfX0sb25DbGFzc0V4dGVuZGVkOmZ1bmN0aW9uKGEpe2lmKCFhLkhhc0xpc3RlbmVycyl7RXh0LnV0aWwuT2JzZXJ2YWJsZS5wcmVwYXJlQ2xhc3MoYSl9fSxldmVudE9wdGlvbnNSZTovXig/OnNjb3BlfGRlbGF5fGJ1ZmZlcnxzaW5nbGV8c3RvcEV2ZW50fHByZXZlbnREZWZhdWx0fHN0b3BQcm9wYWdhdGlvbnxub3JtYWxpemVkfGFyZ3N8ZGVsZWdhdGV8ZWxlbWVudHx2ZXJ0aWNhbHxob3Jpem9udGFsfGZyZWV6ZUV2ZW50KSQvLGFkZE1hbmFnZWRMaXN0ZW5lcjpmdW5jdGlvbihpLGQsZyxlLGMpe3ZhciBoPXRoaXMsYT1oLm1hbmFnZWRMaXN0ZW5lcnM9aC5tYW5hZ2VkTGlzdGVuZXJzfHxbXSxiO2lmKHR5cGVvZiBkIT09InN0cmluZyIpe2M9ZDtmb3IoZCBpbiBjKXtpZihjLmhhc093blByb3BlcnR5KGQpKXtiPWNbZF07aWYoIWguZXZlbnRPcHRpb25zUmUudGVzdChkKSl7aC5hZGRNYW5hZ2VkTGlzdGVuZXIoaSxkLGIuZm58fGIsYi5zY29wZXx8Yy5zY29wZSxiLmZuP2I6Yyl9fX19ZWxzZXthLnB1c2goe2l0ZW06aSxlbmFtZTpkLGZuOmcsc2NvcGU6ZSxvcHRpb25zOmN9KTtpLm9uKGQsZyxlLGMpfX0scmVtb3ZlTWFuYWdlZExpc3RlbmVyOmZ1bmN0aW9uKGosYyxnLGspe3ZhciBlPXRoaXMsbCxiLGgsYSxkO2lmKHR5cGVvZiBjIT09InN0cmluZyIpe2w9Yztmb3IoYyBpbiBsKXtpZihsLmhhc093blByb3BlcnR5KGMpKXtiPWxbY107aWYoIWUuZXZlbnRPcHRpb25zUmUudGVzdChjKSl7ZS5yZW1vdmVNYW5hZ2VkTGlzdGVuZXIoaixjLGIuZm58fGIsYi5zY29wZXx8bC5zY29wZSl9fX19aD1lLm1hbmFnZWRMaXN0ZW5lcnM/ZS5tYW5hZ2VkTGlzdGVuZXJzLnNsaWNlKCk6W107Zm9yKGQ9MCxhPWgubGVuZ3RoO2Q8YTtkKyspe2UucmVtb3ZlTWFuYWdlZExpc3RlbmVySXRlbShmYWxzZSxoW2RdLGosYyxnLGspfX0sZmlyZUV2ZW50OmZ1bmN0aW9uKGEpe2E9YS50b0xvd2VyQ2FzZSgpO3ZhciBlPXRoaXMsYz1lLmV2ZW50cyxkPWMmJmNbYV0sYj10cnVlO2lmKGQmJmUuaGFzTGlzdGVuZXJzW2FdKXtiPWUuY29udGludWVGaXJlRXZlbnQoYSxFeHQuQXJyYXkuc2xpY2UoYXJndW1lbnRzLDEpLGQuYnViYmxlKX1yZXR1cm4gYn0sY29udGludWVGaXJlRXZlbnQ6ZnVuY3Rpb24oYyxlLGIpe3ZhciBoPXRoaXMsYSxnLGQ9dHJ1ZTtkb3tpZihoLmV2ZW50c1N1c3BlbmRlZCl7aWYoKGE9aC5ldmVudFF1ZXVlKSl7YS5wdXNoKFtjLGUsYl0pfXJldHVybiBkfWVsc2V7Zz1oLmV2ZW50c1tjXTtpZihnJiZnIT10cnVlKXtpZigoZD1nLmZpcmUuYXBwbHkoZyxlKSk9PT1mYWxzZSl7YnJlYWt9fX19d2hpbGUoYiYmKGg9aC5nZXRCdWJibGVQYXJlbnQoKSkpO3JldHVybiBkfSxnZXRCdWJibGVQYXJlbnQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5nZXRCdWJibGVUYXJnZXQmJmIuZ2V0QnViYmxlVGFyZ2V0KCk7aWYoYSYmYS5pc09ic2VydmFibGUpe3JldHVybiBhfXJldHVybiBudWxsfSxhZGRMaXN0ZW5lcjpmdW5jdGlvbihjLGcsaSxqKXt2YXIgZT10aGlzLGIsYSxkLGg9MDtpZih0eXBlb2YgYyE9PSJzdHJpbmciKXtqPWM7Zm9yKGMgaW4gail7aWYoai5oYXNPd25Qcm9wZXJ0eShjKSl7Yj1qW2NdO2lmKCFlLmV2ZW50T3B0aW9uc1JlLnRlc3QoYykpe2UuYWRkTGlzdGVuZXIoYyxiLmZufHxiLGIuc2NvcGV8fGouc2NvcGUsYi5mbj9iOmopfX19fWVsc2V7Yz1jLnRvTG93ZXJDYXNlKCk7YT1lLmV2ZW50c1tjXTtpZihhJiZhLmlzRXZlbnQpe2g9YS5saXN0ZW5lcnMubGVuZ3RofWVsc2V7ZS5ldmVudHNbY109YT1uZXcgRXh0LnV0aWwuRXZlbnQoZSxjKX1pZih0eXBlb2YgZz09PSJzdHJpbmciKXtnPWlbZ118fGVbZ119YS5hZGRMaXN0ZW5lcihnLGksaik7aWYoYS5saXN0ZW5lcnMubGVuZ3RoIT09aCl7ZD1lLmhhc0xpc3RlbmVycztpZihkLmhhc093blByb3BlcnR5KGMpKXsrK2RbY119ZWxzZXtkW2NdPTF9fX19LHJlbW92ZUxpc3RlbmVyOmZ1bmN0aW9uKGMsZSxkKXt2YXIgaD10aGlzLGIsZyxhO2lmKHR5cGVvZiBjIT09InN0cmluZyIpe2E9Yztmb3IoYyBpbiBhKXtpZihhLmhhc093blByb3BlcnR5KGMpKXtiPWFbY107aWYoIWguZXZlbnRPcHRpb25zUmUudGVzdChjKSl7aC5yZW1vdmVMaXN0ZW5lcihjLGIuZm58fGIsYi5zY29wZXx8YS5zY29wZSl9fX19ZWxzZXtjPWMudG9Mb3dlckNhc2UoKTtnPWguZXZlbnRzW2NdO2lmKGcmJmcuaXNFdmVudCl7aWYoZy5yZW1vdmVMaXN0ZW5lcihlLGQpJiYhLS1oLmhhc0xpc3RlbmVyc1tjXSl7ZGVsZXRlIGguaGFzTGlzdGVuZXJzW2NdfX19fSxjbGVhckxpc3RlbmVyczpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZXZlbnRzLGMsYTtmb3IoYSBpbiBiKXtpZihiLmhhc093blByb3BlcnR5KGEpKXtjPWJbYV07aWYoYy5pc0V2ZW50KXtjLmNsZWFyTGlzdGVuZXJzKCl9fX10aGlzLmNsZWFyTWFuYWdlZExpc3RlbmVycygpfSxjbGVhck1hbmFnZWRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLm1hbmFnZWRMaXN0ZW5lcnN8fFtdLGM9MCxhPWIubGVuZ3RoO2Zvcig7YzxhO2MrKyl7dGhpcy5yZW1vdmVNYW5hZ2VkTGlzdGVuZXJJdGVtKHRydWUsYltjXSl9dGhpcy5tYW5hZ2VkTGlzdGVuZXJzPVtdfSxyZW1vdmVNYW5hZ2VkTGlzdGVuZXJJdGVtOmZ1bmN0aW9uKGIsYSxnLGMsZSxkKXtpZihifHwoYS5pdGVtPT09ZyYmYS5lbmFtZT09PWMmJighZXx8YS5mbj09PWUpJiYoIWR8fGEuc2NvcGU9PT1kKSkpe2EuaXRlbS51bihhLmVuYW1lLGEuZm4sYS5zY29wZSk7aWYoIWIpe0V4dC5BcnJheS5yZW1vdmUodGhpcy5tYW5hZ2VkTGlzdGVuZXJzLGEpfX19LGFkZEV2ZW50czpmdW5jdGlvbihnKXt2YXIgZT10aGlzLGQ9ZS5ldmVudHN8fChlLmV2ZW50cz17fSksYSxiLGM7aWYodHlwZW9mIGc9PSJzdHJpbmciKXtmb3IoYj1hcmd1bWVudHMsYz1iLmxlbmd0aDtjLS07KXthPWJbY107aWYoIWRbYV0pe2RbYV09dHJ1ZX19fWVsc2V7RXh0LmFwcGx5SWYoZS5ldmVudHMsZyl9fSxoYXNMaXN0ZW5lcjpmdW5jdGlvbihhKXtyZXR1cm4gISF0aGlzLmhhc0xpc3RlbmVyc1thLnRvTG93ZXJDYXNlKCldfSxzdXNwZW5kRXZlbnRzOmZ1bmN0aW9uKGEpe3RoaXMuZXZlbnRzU3VzcGVuZGVkKz0xO2lmKGEmJiF0aGlzLmV2ZW50UXVldWUpe3RoaXMuZXZlbnRRdWV1ZT1bXX19LHJlc3VtZUV2ZW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXMsZD1hLmV2ZW50UXVldWUsYyxiO2lmKGEuZXZlbnRzU3VzcGVuZGVkJiYhLS1hLmV2ZW50c1N1c3BlbmRlZCl7ZGVsZXRlIGEuZXZlbnRRdWV1ZTtpZihkKXtjPWQubGVuZ3RoO2ZvcihiPTA7YjxjO2IrKyl7YS5jb250aW51ZUZpcmVFdmVudC5hcHBseShhLGRbYl0pfX19fSxyZWxheUV2ZW50czpmdW5jdGlvbihjLGUsail7dmFyIGg9dGhpcyxhPWUubGVuZ3RoLGQ9MCxnLGI7Zm9yKDtkPGE7ZCsrKXtnPWVbZF07Yj1qP2orZzpnO2gubW9uKGMsZyxoLmNyZWF0ZVJlbGF5ZXIoYikpfX0sY3JlYXRlUmVsYXllcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGMuZmlyZUV2ZW50LmFwcGx5KGMsW2FdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzLGJ8fFswLC0xXSkpKX19LGVuYWJsZUJ1YmJsZTpmdW5jdGlvbihqKXtpZihqKXt2YXIgZz10aGlzLGg9KHR5cGVvZiBqPT0ic3RyaW5nIik/YXJndW1lbnRzOmosZT1oLmxlbmd0aCxjPWcuZXZlbnRzLGIsZCxhO2ZvcihhPTA7YTxlOysrYSl7Yj1oW2FdLnRvTG93ZXJDYXNlKCk7ZD1jW2JdO2lmKCFkfHx0eXBlb2YgZD09ImJvb2xlYW4iKXtjW2JdPWQ9bmV3IEV4dC51dGlsLkV2ZW50KGcsYil9Zy5oYXNMaXN0ZW5lcnNbYl09KGcuaGFzTGlzdGVuZXJzW2JdfHwwKSsxO2QuYnViYmxlPXRydWV9fX19LGZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxkPWEucHJvdG90eXBlLGI9ZnVuY3Rpb24oKXt9LGU9ZnVuY3Rpb24oZyl7aWYoIWcuSGFzTGlzdGVuZXJzKXt2YXIgaD1nLnByb3RvdHlwZTthLnByZXBhcmVDbGFzcyhnLHRoaXMpO2cub25FeHRlbmRlZChmdW5jdGlvbihpKXthLnByZXBhcmVDbGFzcyhpKX0pO2lmKGgub25DbGFzc01peGVkSW4pe0V4dC5vdmVycmlkZShnLHtvbkNsYXNzTWl4ZWRJbjpmdW5jdGlvbihpKXtlLmNhbGwodGhpcyxpKTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX19KX1lbHNle2gub25DbGFzc01peGVkSW49ZnVuY3Rpb24oaSl7ZS5jYWxsKHRoaXMsaSl9fX19O2IucHJvdG90eXBlPXt9O2QuSGFzTGlzdGVuZXJzPWEuSGFzTGlzdGVuZXJzPWI7YS5jcmVhdGVBbGlhcyh7b246ImFkZExpc3RlbmVyIix1bjoicmVtb3ZlTGlzdGVuZXIiLG1vbjoiYWRkTWFuYWdlZExpc3RlbmVyIixtdW46InJlbW92ZU1hbmFnZWRMaXN0ZW5lciJ9KTthLm9ic2VydmVDbGFzcz1hLm9ic2VydmU7ZnVuY3Rpb24gYyhtKXt2YXIgbD0odGhpcy5tZXRob2RFdmVudHM9dGhpcy5tZXRob2RFdmVudHN8fHt9KVttXSxpLGgsaixrPXRoaXMsZztpZighbCl7dGhpcy5tZXRob2RFdmVudHNbbV09bD17fTtsLm9yaWdpbmFsRm49dGhpc1ttXTtsLm1ldGhvZE5hbWU9bTtsLmJlZm9yZT1bXTtsLmFmdGVyPVtdO2c9ZnVuY3Rpb24ocCxvLG4pe2lmKChoPXAuYXBwbHkob3x8ayxuKSkhPT11bmRlZmluZWQpe2lmKHR5cGVvZiBoPT0ib2JqZWN0Iil7aWYoaC5yZXR1cm5WYWx1ZSE9PXVuZGVmaW5lZCl7aT1oLnJldHVyblZhbHVlfWVsc2V7aT1ofWo9ISFoLmNhbmNlbH1lbHNle2lmKGg9PT1mYWxzZSl7aj10cnVlfWVsc2V7aT1ofX19fTt0aGlzW21dPWZ1bmN0aW9uKCl7dmFyIHA9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApLG8scSxuO2k9aD11bmRlZmluZWQ7aj1mYWxzZTtmb3IocT0wLG49bC5iZWZvcmUubGVuZ3RoO3E8bjtxKyspe289bC5iZWZvcmVbcV07ZyhvLmZuLG8uc2NvcGUscCk7aWYoail7cmV0dXJuIGl9fWlmKChoPWwub3JpZ2luYWxGbi5hcHBseShrLHApKSE9PXVuZGVmaW5lZCl7aT1ofWZvcihxPTAsbj1sLmFmdGVyLmxlbmd0aDtxPG47cSsrKXtvPWwuYWZ0ZXJbcV07ZyhvLmZuLG8uc2NvcGUscCk7aWYoail7cmV0dXJuIGl9fXJldHVybiBpfX1yZXR1cm4gbH1FeHQuYXBwbHkoZCx7b25DbGFzc01peGVkSW46ZSxiZWZvcmVNZXRob2Q6ZnVuY3Rpb24oaSxoLGcpe2MuY2FsbCh0aGlzLGkpLmJlZm9yZS5wdXNoKHtmbjpoLHNjb3BlOmd9KX0sYWZ0ZXJNZXRob2Q6ZnVuY3Rpb24oaSxoLGcpe2MuY2FsbCh0aGlzLGkpLmFmdGVyLnB1c2goe2ZuOmgsc2NvcGU6Z30pfSxyZW1vdmVNZXRob2RMaXN0ZW5lcjpmdW5jdGlvbihtLGssail7dmFyIGw9dGhpcy5nZXRNZXRob2RFdmVudChtKSxoLGc7Zm9yKGg9MCxnPWwuYmVmb3JlLmxlbmd0aDtoPGc7aCsrKXtpZihsLmJlZm9yZVtoXS5mbj09ayYmbC5iZWZvcmVbaF0uc2NvcGU9PWope0V4dC5BcnJheS5lcmFzZShsLmJlZm9yZSxoLDEpO3JldHVybn19Zm9yKGg9MCxnPWwuYWZ0ZXIubGVuZ3RoO2g8ZztoKyspe2lmKGwuYWZ0ZXJbaF0uZm49PWsmJmwuYWZ0ZXJbaF0uc2NvcGU9PWope0V4dC5BcnJheS5lcmFzZShsLmFmdGVyLGgsMSk7cmV0dXJufX19LHRvZ2dsZUV2ZW50TG9nZ2luZzpmdW5jdGlvbihnKXtFeHQudXRpbC5PYnNlcnZhYmxlW2c/ImNhcHR1cmUiOiJyZWxlYXNlQ2FwdHVyZSJdKHRoaXMsZnVuY3Rpb24oaCl7aWYoRXh0LmlzRGVmaW5lZChFeHQuZ2xvYmFsLmNvbnNvbGUpKXtFeHQuZ2xvYmFsLmNvbnNvbGUubG9nKGgsYXJndW1lbnRzKX19KX19KX0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLkhhc2hNYXAiLHttaXhpbnM6e29ic2VydmFibGU6IkV4dC51dGlsLk9ic2VydmFibGUifSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXthPWF8fHt9O3ZhciBjPXRoaXMsYj1hLmtleUZuO2MuYWRkRXZlbnRzKCJhZGQiLCJjbGVhciIsInJlbW92ZSIsInJlcGxhY2UiKTtjLm1peGlucy5vYnNlcnZhYmxlLmNvbnN0cnVjdG9yLmNhbGwoYyxhKTtjLmNsZWFyKHRydWUpO2lmKGIpe2MuZ2V0S2V5PWJ9fSxnZXRDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sZ2V0RGF0YTpmdW5jdGlvbihhLGIpe2lmKGI9PT11bmRlZmluZWQpe2I9YTthPXRoaXMuZ2V0S2V5KGIpfXJldHVyblthLGJdfSxnZXRLZXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaWR9LGFkZDpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXM7aWYoYz09PXVuZGVmaW5lZCl7Yz1hO2E9Yi5nZXRLZXkoYyl9aWYoYi5jb250YWluc0tleShhKSl7cmV0dXJuIGIucmVwbGFjZShhLGMpfWIubWFwW2FdPWM7KytiLmxlbmd0aDtpZihiLmhhc0xpc3RlbmVycy5hZGQpe2IuZmlyZUV2ZW50KCJhZGQiLGIsYSxjKX1yZXR1cm4gY30scmVwbGFjZTpmdW5jdGlvbihiLGQpe3ZhciBjPXRoaXMsZT1jLm1hcCxhO2lmKGQ9PT11bmRlZmluZWQpe2Q9YjtiPWMuZ2V0S2V5KGQpfWlmKCFjLmNvbnRhaW5zS2V5KGIpKXtjLmFkZChiLGQpfWE9ZVtiXTtlW2JdPWQ7aWYoYy5oYXNMaXN0ZW5lcnMucmVwbGFjZSl7Yy5maXJlRXZlbnQoInJlcGxhY2UiLGMsYixkLGEpfXJldHVybiBkfSxyZW1vdmU6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5maW5kS2V5KGIpO2lmKGEhPT11bmRlZmluZWQpe3JldHVybiB0aGlzLnJlbW92ZUF0S2V5KGEpfXJldHVybiBmYWxzZX0scmVtb3ZlQXRLZXk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjO2lmKGIuY29udGFpbnNLZXkoYSkpe2M9Yi5tYXBbYV07ZGVsZXRlIGIubWFwW2FdOy0tYi5sZW5ndGg7aWYoYi5oYXNMaXN0ZW5lcnMucmVtb3ZlKXtiLmZpcmVFdmVudCgicmVtb3ZlIixiLGEsYyl9cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWFwW2FdfSxjbGVhcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2IubWFwPXt9O2IubGVuZ3RoPTA7aWYoYSE9PXRydWUmJmIuaGFzTGlzdGVuZXJzLmNsZWFyKXtiLmZpcmVFdmVudCgiY2xlYXIiLGIpfXJldHVybiBifSxjb250YWluc0tleTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXBbYV0hPT11bmRlZmluZWR9LGNvbnRhaW5zOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnRhaW5zS2V5KHRoaXMuZmluZEtleShhKSl9LGdldEtleXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRBcnJheSh0cnVlKX0sZ2V0VmFsdWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QXJyYXkoZmFsc2UpfSxnZXRBcnJheTpmdW5jdGlvbihkKXt2YXIgYT1bXSxiLGM9dGhpcy5tYXA7Zm9yKGIgaW4gYyl7aWYoYy5oYXNPd25Qcm9wZXJ0eShiKSl7YS5wdXNoKGQ/YjpjW2JdKX19cmV0dXJuIGF9LGVhY2g6ZnVuY3Rpb24oZCxjKXt2YXIgYT1FeHQuYXBwbHkoe30sdGhpcy5tYXApLGIsZT10aGlzLmxlbmd0aDtjPWN8fHRoaXM7Zm9yKGIgaW4gYSl7aWYoYS5oYXNPd25Qcm9wZXJ0eShiKSl7aWYoZC5jYWxsKGMsYixhW2JdLGUpPT09ZmFsc2Upe2JyZWFrfX19cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGM9bmV3IHRoaXMuc2VsZigpLGI9dGhpcy5tYXAsYTtjLnN1c3BlbmRFdmVudHMoKTtmb3IoYSBpbiBiKXtpZihiLmhhc093blByb3BlcnR5KGEpKXtjLmFkZChhLGJbYV0pfX1jLnJlc3VtZUV2ZW50cygpO3JldHVybiBjfSxmaW5kS2V5OmZ1bmN0aW9uKGIpe3ZhciBhLGM9dGhpcy5tYXA7Zm9yKGEgaW4gYyl7aWYoYy5oYXNPd25Qcm9wZXJ0eShhKSYmY1thXT09PWIpe3JldHVybiBhfX1yZXR1cm4gdW5kZWZpbmVkfX0pO0V4dC5kZWZpbmUoIkV4dC5BYnN0cmFjdE1hbmFnZXIiLHtyZXF1aXJlczpbIkV4dC51dGlsLkhhc2hNYXAiXSx0eXBlTmFtZToidHlwZSIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7RXh0LmFwcGx5KHRoaXMsYXx8e30pO3RoaXMuYWxsPW5ldyBFeHQudXRpbC5IYXNoTWFwKCk7dGhpcy50eXBlcz17fX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFsbC5nZXQoYSl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe3RoaXMuYWxsLmFkZChhKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXt0aGlzLmFsbC5yZW1vdmUoYSl9LHJlZ2lzdGVyVHlwZTpmdW5jdGlvbihiLGEpe3RoaXMudHlwZXNbYl09YTthW3RoaXMudHlwZU5hbWVdPWJ9LGlzUmVnaXN0ZXJlZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50eXBlc1thXSE9PXVuZGVmaW5lZH0sY3JlYXRlOmZ1bmN0aW9uKGEsZCl7dmFyIGI9YVt0aGlzLnR5cGVOYW1lXXx8YS50eXBlfHxkLGM9dGhpcy50eXBlc1tiXTtyZXR1cm4gbmV3IGMoYSl9LG9uQXZhaWxhYmxlOmZ1bmN0aW9uKGcsYyxiKXt2YXIgYT10aGlzLmFsbCxkLGU7aWYoYS5jb250YWluc0tleShnKSl7ZD1hLmdldChnKTtjLmNhbGwoYnx8ZCxkKX1lbHNle2U9ZnVuY3Rpb24oaixoLGkpe2lmKGg9PWcpe2MuY2FsbChifHxpLGkpO2EudW4oImFkZCIsZSl9fTthLm9uKCJhZGQiLGUpfX0sZWFjaDpmdW5jdGlvbihiLGEpe3RoaXMuYWxsLmVhY2goYixhfHx0aGlzKX0sZ2V0Q291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hbGwuZ2V0Q291bnQoKX19KTtFeHQuZGVmaW5lKCJFeHQuQ29tcG9uZW50TWFuYWdlciIse2V4dGVuZDoiRXh0LkFic3RyYWN0TWFuYWdlciIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuQ29tcG9uZW50TWdyIixzaW5nbGV0b246dHJ1ZSx0eXBlTmFtZToieHR5cGUiLGNyZWF0ZTpmdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7cmV0dXJuIEV4dC53aWRnZXQoYSl9aWYoYS5pc0NvbXBvbmVudCl7cmV0dXJuIGF9cmV0dXJuIEV4dC53aWRnZXQoYS54dHlwZXx8YixhKX0scmVnaXN0ZXJUeXBlOmZ1bmN0aW9uKGIsYSl7dGhpcy50eXBlc1tiXT1hO2FbdGhpcy50eXBlTmFtZV09YjthLnByb3RvdHlwZVt0aGlzLnR5cGVOYW1lXT1ifX0pO0V4dC5kZWZpbmUoIkV4dC5Db21wb25lbnRRdWVyeSIse3NpbmdsZXRvbjp0cnVlLHJlcXVpcmVzOlsiRXh0LkNvbXBvbmVudE1hbmFnZXIiXX0sZnVuY3Rpb24oKXt2YXIgaD10aGlzLGs9WyJ2YXIgciA9IFtdLCIsImkgPSAwLCIsIml0ID0gaXRlbXMsIiwibCA9IGl0Lmxlbmd0aCwiLCJjOyIsImZvciAoOyBpIDwgbDsgaSsrKSB7IiwiYyA9IGl0W2ldOyIsImlmIChjLnswfSkgeyIsInIucHVzaChjKTsiLCJ9IiwifSIsInJldHVybiByOyJdLmpvaW4oIiIpLGU9ZnVuY3Rpb24ocCxvKXtyZXR1cm4gby5tZXRob2QuYXBwbHkodGhpcyxbcF0uY29uY2F0KG8uYXJncykpfSxhPWZ1bmN0aW9uKHEsdSl7dmFyIG89W10scj0wLHQ9cS5sZW5ndGgscyxwPXUhPT0iPiI7Zm9yKDtyPHQ7cisrKXtzPXFbcl07aWYocy5nZXRSZWZJdGVtcyl7bz1vLmNvbmNhdChzLmdldFJlZkl0ZW1zKHApKX19cmV0dXJuIG99LGc9ZnVuY3Rpb24ocCl7dmFyIG89W10scT0wLHM9cC5sZW5ndGgscjtmb3IoO3E8cztxKyspe3I9cFtxXTt3aGlsZSghIShyPShyLm93bmVyQ3R8fHIuZmxvYXRQYXJlbnQpKSl7by5wdXNoKHIpfX1yZXR1cm4gb30sbT1mdW5jdGlvbihwLHUsdCl7aWYodT09PSIqIil7cmV0dXJuIHAuc2xpY2UoKX1lbHNle3ZhciBvPVtdLHE9MCxzPXAubGVuZ3RoLHI7Zm9yKDtxPHM7cSsrKXtyPXBbcV07aWYoci5pc1hUeXBlKHUsdCkpe28ucHVzaChyKX19cmV0dXJuIG99fSxqPWZ1bmN0aW9uKHAscyl7dmFyIHU9RXh0LkFycmF5LG89W10scT0wLHQ9cC5sZW5ndGgscjtmb3IoO3E8dDtxKyspe3I9cFtxXTtpZihyLmhhc0NscyhzKSl7by5wdXNoKHIpfX1yZXR1cm4gb30sbj1mdW5jdGlvbihxLHYscCx1KXt2YXIgbz1bXSxyPTAsdD1xLmxlbmd0aCxzO2Zvcig7cjx0O3IrKyl7cz1xW3JdO2lmKCF1PyEhc1t2XTooU3RyaW5nKHNbdl0pPT09dSkpe28ucHVzaChzKX19cmV0dXJuIG99LGQ9ZnVuY3Rpb24ocCx0KXt2YXIgbz1bXSxxPTAscz1wLmxlbmd0aCxyO2Zvcig7cTxzO3ErKyl7cj1wW3FdO2lmKHIuZ2V0SXRlbUlkKCk9PT10KXtvLnB1c2gocil9fXJldHVybiBvfSxsPWZ1bmN0aW9uKG8scCxxKXtyZXR1cm4gaC5wc2V1ZG9zW3BdKG8scSl9LGk9L14oXHM/KFs+XF5dKVxzP3xcc3wkKS8sYz0vXigjKT8oW1x3XC1dK3xcKikoPzpcKCh0cnVlfGZhbHNlKVwpKT8vLGI9W3tyZTovXlwuKFtcd1wtXSspKD86XCgodHJ1ZXxmYWxzZSlcKSk/LyxtZXRob2Q6bX0se3JlOi9eKD86W1xbXSg/OkApPyhbXHdcLV0rKVxzPyg/Oig9fC49KVxzP1snIl0/KC4qPylbIiddPyk/W1xdXSkvLG1ldGhvZDpufSx7cmU6L14jKFtcd1wtXSspLyxtZXRob2Q6ZH0se3JlOi9eXDooW1x3XC1dKykoPzpcKCgoPzpce1teXH1dK1x9KXwoPzooPyFceylbXlxzPlwvXSo/KD8hXH0pKSlcKSk/LyxtZXRob2Q6bH0se3JlOi9eKD86XHsoW15cfV0rKVx9KS8sbWV0aG9kOmt9XTtoLlF1ZXJ5PUV4dC5leHRlbmQoT2JqZWN0LHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihvKXtvPW98fHt9O0V4dC5hcHBseSh0aGlzLG8pfSxleGVjdXRlOmZ1bmN0aW9uKHApe3ZhciByPXRoaXMub3BlcmF0aW9ucyxzPTAsdD1yLmxlbmd0aCxxLG87aWYoIXApe289RXh0LkNvbXBvbmVudE1hbmFnZXIuYWxsLmdldEFycmF5KCl9ZWxzZXtpZihFeHQuaXNBcnJheShwKSl7bz1wfWVsc2V7aWYocC5pc01peGVkQ29sbGVjdGlvbil7bz1wLml0ZW1zfX19Zm9yKDtzPHQ7cysrKXtxPXJbc107aWYocS5tb2RlPT09Il4iKXtvPWcob3x8W3BdKX1lbHNle2lmKHEubW9kZSl7bz1hKG98fFtwXSxxLm1vZGUpfWVsc2V7bz1lKG98fGEoW3BdKSxxKX19aWYocz09PXQtMSl7cmV0dXJuIG99fXJldHVybltdfSxpczpmdW5jdGlvbihxKXt2YXIgcD10aGlzLm9wZXJhdGlvbnMsdD1FeHQuaXNBcnJheShxKT9xOltxXSxvPXQubGVuZ3RoLHU9cFtwLmxlbmd0aC0xXSxzLHI7dD1lKHQsdSk7aWYodC5sZW5ndGg9PT1vKXtpZihwLmxlbmd0aD4xKXtmb3Iocj0wLHM9dC5sZW5ndGg7cjxzO3IrKyl7aWYoRXh0LkFycmF5LmluZGV4T2YodGhpcy5leGVjdXRlKCksdFtyXSk9PT0tMSl7cmV0dXJuIGZhbHNlfX19cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfX0pO0V4dC5hcHBseSh0aGlzLHtjYWNoZTp7fSxwc2V1ZG9zOntub3Q6ZnVuY3Rpb24odSxvKXt2YXIgdj1FeHQuQ29tcG9uZW50UXVlcnkscz0wLHQ9dS5sZW5ndGgscj1bXSxxPS0xLHA7Zm9yKDtzPHQ7KytzKXtwPXVbc107aWYoIXYuaXMocCxvKSl7clsrK3FdPXB9fXJldHVybiByfSxmaXJzdDpmdW5jdGlvbihwKXt2YXIgbz1bXTtpZihwLmxlbmd0aD4wKXtvLnB1c2gocFswXSl9cmV0dXJuIG99LGxhc3Q6ZnVuY3Rpb24ocSl7dmFyIG89cS5sZW5ndGgscD1bXTtpZihvPjApe3AucHVzaChxW28tMV0pfXJldHVybiBwfX0scXVlcnk6ZnVuY3Rpb24ocCx3KXt2YXIgeD1wLnNwbGl0KCIsIiksbz14Lmxlbmd0aCxxPTAscj1bXSx5PVtdLHY9e30sdCxzLHU7Zm9yKDtxPG87cSsrKXtwPUV4dC5TdHJpbmcudHJpbSh4W3FdKTt0PXRoaXMuY2FjaGVbcF18fCh0aGlzLmNhY2hlW3BdPXRoaXMucGFyc2UocCkpO3I9ci5jb25jYXQodC5leGVjdXRlKHcpKX1pZihvPjEpe3M9ci5sZW5ndGg7Zm9yKHE9MDtxPHM7cSsrKXt1PXJbcV07aWYoIXZbdS5pZF0pe3kucHVzaCh1KTt2W3UuaWRdPXRydWV9fXI9eX1yZXR1cm4gcn0saXM6ZnVuY3Rpb24ocCxvKXtpZighbyl7cmV0dXJuIHRydWV9dmFyIHI9by5zcGxpdCgiLCIpLHM9ci5sZW5ndGgscT0wLHQ7Zm9yKDtxPHM7cSsrKXtvPUV4dC5TdHJpbmcudHJpbShyW3FdKTt0PXRoaXMuY2FjaGVbb118fCh0aGlzLmNhY2hlW29dPXRoaXMucGFyc2UobykpO2lmKHQuaXMocCkpe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9LHBhcnNlOmZ1bmN0aW9uKHIpe3ZhciBwPVtdLHE9Yi5sZW5ndGgsdixzLHcseCx5LHQsdSxvO3doaWxlKHImJnYhPT1yKXt2PXI7cz1yLm1hdGNoKGMpO2lmKHMpe3c9c1sxXTtpZih3PT09IiMiKXtwLnB1c2goe21ldGhvZDpkLGFyZ3M6W0V4dC5TdHJpbmcudHJpbShzWzJdKV19KX1lbHNle2lmKHc9PT0iLiIpe3AucHVzaCh7bWV0aG9kOmosYXJnczpbRXh0LlN0cmluZy50cmltKHNbMl0pXX0pfWVsc2V7cC5wdXNoKHttZXRob2Q6bSxhcmdzOltFeHQuU3RyaW5nLnRyaW0oc1syXSksQm9vbGVhbihzWzNdKV19KX19cj1yLnJlcGxhY2Uoc1swXSwiIil9d2hpbGUoISh4PXIubWF0Y2goaSkpKXtmb3IodD0wO3ImJnQ8cTt0Kyspe3U9Ylt0XTt5PXIubWF0Y2godS5yZSk7bz11Lm1ldGhvZDtpZih5KXtwLnB1c2goe21ldGhvZDpFeHQuaXNTdHJpbmcodS5tZXRob2QpP0V4dC5mdW5jdGlvbkZhY3RvcnkoIml0ZW1zIixFeHQuU3RyaW5nLmZvcm1hdC5hcHBseShFeHQuU3RyaW5nLFtvXS5jb25jYXQoeS5zbGljZSgxKSkpKTp1Lm1ldGhvZCxhcmdzOnkuc2xpY2UoMSl9KTtyPXIucmVwbGFjZSh5WzBdLCIiKTticmVha31pZih0PT09KHEtMSkpe0V4dC5FcnJvci5yYWlzZSgnSW52YWxpZCBDb21wb25lbnRRdWVyeSBzZWxlY3RvcjogIicrYXJndW1lbnRzWzBdKyciJyl9fX1pZih4WzFdKXtwLnB1c2goe21vZGU6eFsyXXx8eFsxXX0pO3I9ci5yZXBsYWNlKHhbMF0sIiIpfX1yZXR1cm4gbmV3IGguUXVlcnkoe29wZXJhdGlvbnM6cH0pfX0pfSk7RXh0LmRlZmluZSgiRXh0LnV0aWwuUHJvdG9FbGVtZW50IiwoZnVuY3Rpb24oKXt2YXIgYj1FeHQuU3RyaW5nLnNwbGl0V29yZHMsYT1FeHQuQXJyYXkudG9NYXA7cmV0dXJue2lzUHJvdG9FbDp0cnVlLGNsc1Byb3A6ImNscyIsc3R5bGVQcm9wOiJzdHlsZSIscmVtb3ZlZFByb3A6InJlbW92ZWQiLHN0eWxlSXNUZXh0OmZhbHNlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXM7RXh0LmFwcGx5KGQsYyk7ZC5jbGFzc0xpc3Q9YihkLmNscyk7ZC5jbGFzc01hcD1hKGQuY2xhc3NMaXN0KTtkZWxldGUgZC5jbHM7aWYoRXh0LmlzRnVuY3Rpb24oZC5zdHlsZSkpe2Quc3R5bGVGbj1kLnN0eWxlO2RlbGV0ZSBkLnN0eWxlfWVsc2V7aWYodHlwZW9mIGQuc3R5bGU9PSJzdHJpbmciKXtkLnN0eWxlPUV4dC5FbGVtZW50LnBhcnNlU3R5bGVzKGQuc3R5bGUpfWVsc2V7aWYoZC5zdHlsZSl7ZC5zdHlsZT1FeHQuYXBwbHkoe30sZC5zdHlsZSl9fX19LGZsdXNoOmZ1bmN0aW9uKCl7dGhpcy5mbHVzaENsYXNzTGlzdD1bXTt0aGlzLnJlbW92ZWRDbGFzc2VzPXt9O2RlbGV0ZSB0aGlzLnN0eWxlfSxhZGRDbHM6ZnVuY3Rpb24obil7dmFyIGw9dGhpcyxtPWIobiksZT1tLmxlbmd0aCxqPWwuY2xhc3NMaXN0LGQ9bC5jbGFzc01hcCxnPWwuZmx1c2hDbGFzc0xpc3QsaD0wLGs7Zm9yKDtoPGU7KytoKXtrPW1baF07aWYoIWRba10pe2Rba109dHJ1ZTtqLnB1c2goayk7aWYoZyl7Zy5wdXNoKGspO2RlbGV0ZSBsLnJlbW92ZWRDbGFzc2VzW2tdfX19cmV0dXJuIGx9LGhhc0NsczpmdW5jdGlvbihjKXtyZXR1cm4gYyBpbiB0aGlzLmNsYXNzTWFwfSxyZW1vdmVDbHM6ZnVuY3Rpb24obyl7dmFyIG49dGhpcyxsPW4uY2xhc3NMaXN0LGc9KG4uY2xhc3NMaXN0PVtdKSxqPWEoYihvKSksZT1sLmxlbmd0aCxkPW4uY2xhc3NNYXAsaz1uLnJlbW92ZWRDbGFzc2VzLGgsbTtmb3IoaD0wO2g8ZTsrK2gpe209bFtoXTtpZihqW21dKXtpZihrKXtpZihkW21dKXtrW21dPXRydWU7RXh0LkFycmF5LnJlbW92ZShuLmZsdXNoQ2xhc3NMaXN0LG0pfX1kZWxldGUgZFttXX1lbHNle2cucHVzaChtKX19cmV0dXJuIG59LHNldFN0eWxlOmZ1bmN0aW9uKGcsZSl7dmFyIGQ9dGhpcyxjPWQuc3R5bGV8fChkLnN0eWxlPXt9KTtpZih0eXBlb2YgZz09InN0cmluZyIpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXtkLnNldFN0eWxlKEV4dC5FbGVtZW50LnBhcnNlU3R5bGVzKGcpKX1lbHNle2NbZ109ZX19ZWxzZXtFeHQuYXBwbHkoYyxnKX1yZXR1cm4gZH0sd3JpdGVUbzpmdW5jdGlvbihoKXt2YXIgZT10aGlzLGc9ZS5mbHVzaENsYXNzTGlzdHx8ZS5jbGFzc0xpc3QsZD1lLnJlbW92ZWRDbGFzc2VzLGM7aWYoZS5zdHlsZUZuKXtjPUV4dC5hcHBseSh7fSxlLnN0eWxlRm4oKSk7RXh0LmFwcGx5KGMsZS5zdHlsZSl9ZWxzZXtjPWUuc3R5bGV9aFtlLmNsc1Byb3BdPWcuam9pbigiICIpO2lmKGMpe2hbZS5zdHlsZVByb3BdPWUuc3R5bGVJc1RleHQ/RXh0LkRvbUhlbHBlci5nZW5lcmF0ZVN0eWxlcyhjKTpjfWlmKGQpe2Q9RXh0Lk9iamVjdC5nZXRLZXlzKGQpO2lmKGQubGVuZ3RoKXtoW2UucmVtb3ZlZFByb3BdPWQuam9pbigiICIpfX1yZXR1cm4gaH19fSgpKSk7RXh0LkV2ZW50TWFuYWdlcj1uZXcgZnVuY3Rpb24oKXt2YXIgYT10aGlzLGQ9ZG9jdW1lbnQsYz13aW5kb3csYj1mdW5jdGlvbigpe3ZhciBrPWQuYm9keXx8ZC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdLGk9RXh0LmJhc2VDU1NQcmVmaXgsbz1baSsiYm9keSJdLGc9W10sbT1FeHQuc3VwcG9ydHMuQ1NTM0xpbmVhckdyYWRpZW50LGw9RXh0LnN1cHBvcnRzLkNTUzNCb3JkZXJSYWRpdXMsaD1bXSxqLGU7aWYoIWspe3JldHVybiBmYWxzZX1qPWsucGFyZW50Tm9kZTtmdW5jdGlvbiBuKHApe28ucHVzaChpK3ApfWlmKEV4dC5pc0lFKXtuKCJpZSIpO2lmKEV4dC5pc0lFNil7bigiaWU2Iil9ZWxzZXtuKCJpZTdwIik7aWYoRXh0LmlzSUU3KXtuKCJpZTciKX1lbHNle24oImllOHAiKTtpZihFeHQuaXNJRTgpe24oImllOCIpfWVsc2V7bigiaWU5cCIpO2lmKEV4dC5pc0lFOSl7bigiaWU5Iil9fX19aWYoRXh0LmlzSUU2fHxFeHQuaXNJRTcpe24oImllN20iKX1pZihFeHQuaXNJRTZ8fEV4dC5pc0lFN3x8RXh0LmlzSUU4KXtuKCJpZThtIil9aWYoRXh0LmlzSUU3fHxFeHQuaXNJRTgpe24oImllNzgiKX19aWYoRXh0LmlzR2Vja28pe24oImdlY2tvIik7aWYoRXh0LmlzR2Vja28zKXtuKCJnZWNrbzMiKX1pZihFeHQuaXNHZWNrbzQpe24oImdlY2tvNCIpfWlmKEV4dC5pc0dlY2tvNSl7bigiZ2Vja281Iil9fWlmKEV4dC5pc09wZXJhKXtuKCJvcGVyYSIpfWlmKEV4dC5pc1dlYktpdCl7bigid2Via2l0Iil9aWYoRXh0LmlzU2FmYXJpKXtuKCJzYWZhcmkiKTtpZihFeHQuaXNTYWZhcmkyKXtuKCJzYWZhcmkyIil9aWYoRXh0LmlzU2FmYXJpMyl7bigic2FmYXJpMyIpfWlmKEV4dC5pc1NhZmFyaTQpe24oInNhZmFyaTQiKX1pZihFeHQuaXNTYWZhcmk1KXtuKCJzYWZhcmk1Iil9aWYoRXh0LmlzU2FmYXJpNV8wKXtuKCJzYWZhcmk1XzAiKX19aWYoRXh0LmlzQ2hyb21lKXtuKCJjaHJvbWUiKX1pZihFeHQuaXNNYWMpe24oIm1hYyIpfWlmKEV4dC5pc0xpbnV4KXtuKCJsaW51eCIpfWlmKCFsKXtuKCJuYnIiKX1pZighbSl7bigibmxnIil9aWYoRXh0LnNjb3BlUmVzZXRDU1Mpe2U9RXh0LnJlc2V0RWxlbWVudFNwZWM9e2NsczppKyJyZXNldCJ9O2lmKCFtKXtoLnB1c2goaSsibmxnIil9aWYoIWwpe2gucHVzaChpKyJuYnIiKX1pZihoLmxlbmd0aCl7ZS5jbj17Y2xzOmguam9pbigiICIpfX1FeHQucmVzZXRFbGVtZW50PUV4dC5nZXRCb2R5KCkuY3JlYXRlQ2hpbGQoZSk7aWYoaC5sZW5ndGgpe0V4dC5yZXNldEVsZW1lbnQ9RXh0LmdldChFeHQucmVzZXRFbGVtZW50LmRvbS5maXJzdENoaWxkKX19ZWxzZXtFeHQucmVzZXRFbGVtZW50PUV4dC5nZXRCb2R5KCk7bigicmVzZXQiKX1pZihqKXtpZihFeHQuaXNTdHJpY3QmJihFeHQuaXNJRTZ8fEV4dC5pc0lFNykpe0V4dC5pc0JvcmRlckJveD1mYWxzZX1lbHNle0V4dC5pc0JvcmRlckJveD10cnVlfWlmKEV4dC5pc0JvcmRlckJveCl7Zy5wdXNoKGkrImJvcmRlci1ib3giKX1pZihFeHQuaXNTdHJpY3Qpe2cucHVzaChpKyJzdHJpY3QiKX1lbHNle2cucHVzaChpKyJxdWlya3MiKX1FeHQuZmx5KGosIl9pbnRlcm5hbCIpLmFkZENscyhnKX1FeHQuZmx5KGssIl9pbnRlcm5hbCIpLmFkZENscyhvKTtyZXR1cm4gdHJ1ZX07RXh0LmFwcGx5KGEse2hhc0JvdW5kT25SZWFkeTpmYWxzZSxoYXNGaXJlZFJlYWR5OmZhbHNlLGRlZmVyUmVhZHlFdmVudDoxLG9uUmVhZHlDaGFpbjpbXSxyZWFkeUV2ZW50OihmdW5jdGlvbigpe3ZhciBlPW5ldyBFeHQudXRpbC5FdmVudCgpO2UuZmlyZT1mdW5jdGlvbigpe0V4dC5fYmVmb3JlUmVhZHlUaW1lPUV4dC5fYmVmb3JlUmVhZHlUaW1lfHxuZXcgRGF0ZSgpLmdldFRpbWUoKTtlLnNlbGYucHJvdG90eXBlLmZpcmUuYXBwbHkoZSxhcmd1bWVudHMpO0V4dC5fYWZ0ZXJSZWFkeXRpbWU9bmV3IERhdGUoKS5nZXRUaW1lKCl9O3JldHVybiBlfSgpKSxpZGxlRXZlbnQ6bmV3IEV4dC51dGlsLkV2ZW50KCksaXNSZWFkeVBhdXNlZDpmdW5jdGlvbigpe3JldHVybigvWz8mXWV4dC1wYXVzZVJlYWR5RmlyZVxiL2kudGVzdChsb2NhdGlvbi5zZWFyY2gpJiYhRXh0Ll9jb250aW51ZUZpcmVSZWFkeSl9LGJpbmRSZWFkeUV2ZW50OmZ1bmN0aW9uKCl7aWYoYS5oYXNCb3VuZE9uUmVhZHkpe3JldHVybn1pZihkLnJlYWR5U3RhdGU9PSJjb21wbGV0ZSIpe2Eub25SZWFkeUV2ZW50KHt0eXBlOmQucmVhZHlTdGF0ZXx8ImJvZHkifSl9ZWxzZXtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixhLm9uUmVhZHlFdmVudCxmYWxzZSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGEub25SZWFkeUV2ZW50LGZhbHNlKTthLmhhc0JvdW5kT25SZWFkeT10cnVlfX0sb25SZWFkeUV2ZW50OmZ1bmN0aW9uKGcpe2lmKGcmJmcudHlwZSl7YS5vblJlYWR5Q2hhaW4ucHVzaChnLnR5cGUpfWlmKGEuaGFzQm91bmRPblJlYWR5KXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIixhLm9uUmVhZHlFdmVudCxmYWxzZSk7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLGEub25SZWFkeUV2ZW50LGZhbHNlKX1pZighRXh0LmlzUmVhZHkpe2EuZmlyZURvY1JlYWR5KCl9fSxmaXJlRG9jUmVhZHk6ZnVuY3Rpb24oKXtpZighRXh0LmlzUmVhZHkpe0V4dC5fcmVhZHlUaW1lPW5ldyBEYXRlKCkuZ2V0VGltZSgpO0V4dC5pc1JlYWR5PXRydWU7RXh0LnN1cHBvcnRzLmluaXQoKTthLm9uV2luZG93VW5sb2FkKCk7YS5yZWFkeUV2ZW50Lm9uUmVhZHlDaGFpbj1hLm9uUmVhZHlDaGFpbjtpZihFeHQuaXNOdW1iZXIoYS5kZWZlclJlYWR5RXZlbnQpKXtFeHQuRnVuY3Rpb24uZGVmZXIoYS5maXJlUmVhZHlFdmVudCxhLmRlZmVyUmVhZHlFdmVudCk7YS5oYXNEb2NSZWFkeVRpbWVyPXRydWV9ZWxzZXthLmZpcmVSZWFkeUV2ZW50KCl9fX0sZmlyZVJlYWR5RXZlbnQ6ZnVuY3Rpb24oKXt2YXIgZT1hLnJlYWR5RXZlbnQ7YS5oYXNEb2NSZWFkeVRpbWVyPWZhbHNlO2EuaXNGaXJpbmc9dHJ1ZTt3aGlsZShlLmxpc3RlbmVycy5sZW5ndGgmJiFhLmlzUmVhZHlQYXVzZWQoKSl7ZS5maXJlKCl9YS5pc0ZpcmluZz1mYWxzZTthLmhhc0ZpcmVkUmVhZHk9dHJ1ZX0sb25Eb2N1bWVudFJlYWR5OmZ1bmN0aW9uKGgsZyxlKXtlPWV8fHt9O2Uuc2luZ2xlPXRydWU7YS5yZWFkeUV2ZW50LmFkZExpc3RlbmVyKGgsZyxlKTtpZighKGEuaXNGaXJpbmd8fGEuaGFzRG9jUmVhZHlUaW1lcikpe2lmKEV4dC5pc1JlYWR5KXthLmZpcmVSZWFkeUV2ZW50KCl9ZWxzZXthLmJpbmRSZWFkeUV2ZW50KCl9fX0sc3RvcHBlZE1vdXNlRG93bkV2ZW50Om5ldyBFeHQudXRpbC5FdmVudCgpLHByb3BSZTovXig/OnNjb3BlfGRlbGF5fGJ1ZmZlcnxzaW5nbGV8c3RvcEV2ZW50fHByZXZlbnREZWZhdWx0fHN0b3BQcm9wYWdhdGlvbnxub3JtYWxpemVkfGFyZ3N8ZGVsZWdhdGV8ZnJlZXplRXZlbnQpJC8sZ2V0SWQ6ZnVuY3Rpb24oZSl7dmFyIGc7ZT1FeHQuZ2V0RG9tKGUpO2lmKGU9PT1kfHxlPT09Yyl7Zz1lPT09ZD9FeHQuZG9jdW1lbnRJZDpFeHQud2luZG93SWR9ZWxzZXtnPUV4dC5pZChlKX1pZighRXh0LmNhY2hlW2ddKXtFeHQuYWRkQ2FjaGVFbnRyeShnLG51bGwsZSl9cmV0dXJuIGd9LHByZXBhcmVMaXN0ZW5lckNvbmZpZzpmdW5jdGlvbihpLGcsayl7dmFyIGw9YS5wcm9wUmUsaCxqLGU7Zm9yKGggaW4gZyl7aWYoZy5oYXNPd25Qcm9wZXJ0eShoKSl7aWYoIWwudGVzdChoKSl7aj1nW2hdO2lmKHR5cGVvZiBqPT0iZnVuY3Rpb24iKXtlPVtpLGgsaixnLnNjb3BlLGddfWVsc2V7ZT1baSxoLGouZm4sai5zY29wZSxqXX1pZihrKXthLnJlbW92ZUxpc3RlbmVyLmFwcGx5KGEsZSl9ZWxzZXthLmFkZExpc3RlbmVyLmFwcGx5KGEsZSl9fX19fSxtb3VzZUVudGVyTGVhdmVSZTovbW91c2VlbnRlcnxtb3VzZWxlYXZlLyxub3JtYWxpemVFdmVudDpmdW5jdGlvbihlLGcpe2lmKGEubW91c2VFbnRlckxlYXZlUmUudGVzdChlKSYmIUV4dC5zdXBwb3J0cy5Nb3VzZUVudGVyTGVhdmUpe2lmKGcpe2c9RXh0LkZ1bmN0aW9uLmNyZWF0ZUludGVyY2VwdG9yKGcsYS5jb250YWlucyl9ZT1lPT0ibW91c2VlbnRlciI/Im1vdXNlb3ZlciI6Im1vdXNlb3V0In1lbHNle2lmKGU9PSJtb3VzZXdoZWVsIiYmIUV4dC5zdXBwb3J0cy5Nb3VzZVdoZWVsJiYhRXh0LmlzT3BlcmEpe2U9IkRPTU1vdXNlU2Nyb2xsIn19cmV0dXJue2V2ZW50TmFtZTplLGZuOmd9fSxjb250YWluczpmdW5jdGlvbihnKXt2YXIgZT1nLmJyb3dzZXJFdmVudC5jdXJyZW50VGFyZ2V0LGg9YS5nZXRSZWxhdGVkVGFyZ2V0KGcpO2lmKGUmJmUuZmlyc3RDaGlsZCl7d2hpbGUoaCl7aWYoaD09PWUpe3JldHVybiBmYWxzZX1oPWgucGFyZW50Tm9kZTtpZihoJiYoaC5ub2RlVHlwZSE9MSkpe2g9bnVsbH19fXJldHVybiB0cnVlfSxhZGRMaXN0ZW5lcjpmdW5jdGlvbihoLGUsayxqLGcpe2lmKHR5cGVvZiBlIT09InN0cmluZyIpe2EucHJlcGFyZUxpc3RlbmVyQ29uZmlnKGgsZSk7cmV0dXJufXZhciBsPWguZG9tfHxFeHQuZ2V0RG9tKGgpLG0saTtnPWd8fHt9O209YS5ub3JtYWxpemVFdmVudChlLGspO2k9YS5jcmVhdGVMaXN0ZW5lcldyYXAobCxlLG0uZm4saixnKTtpZihsLmF0dGFjaEV2ZW50KXtsLmF0dGFjaEV2ZW50KCJvbiIrbS5ldmVudE5hbWUsaSl9ZWxzZXtsLmFkZEV2ZW50TGlzdGVuZXIobS5ldmVudE5hbWUsaSxnLmNhcHR1cmV8fGZhbHNlKX1pZihsPT1kJiZlPT0ibW91c2Vkb3duIil7YS5zdG9wcGVkTW91c2VEb3duRXZlbnQuYWRkTGlzdGVuZXIoaSl9YS5nZXRFdmVudExpc3RlbmVyQ2FjaGUoaC5kb20/aDpsLGUpLnB1c2goe2ZuOmssd3JhcDppLHNjb3BlOmp9KX0scmVtb3ZlTGlzdGVuZXI6ZnVuY3Rpb24ocCxxLHIsdCl7aWYodHlwZW9mIHEhPT0ic3RyaW5nIil7YS5wcmVwYXJlTGlzdGVuZXJDb25maWcocCxxLHRydWUpO3JldHVybn12YXIgbj1FeHQuZ2V0RG9tKHApLGg9cC5kb20/cDpFeHQuZ2V0KG4pLGU9YS5nZXRFdmVudExpc3RlbmVyQ2FjaGUoaCxxKSxzPWEubm9ybWFsaXplRXZlbnQocSkuZXZlbnROYW1lLG89ZS5sZW5ndGgsbSxrLGcsbDt3aGlsZShvLS0pe2s9ZVtvXTtpZihrJiYoIXJ8fGsuZm49PXIpJiYoIXR8fGsuc2NvcGU9PT10KSl7Zz1rLndyYXA7aWYoZy50YXNrKXtjbGVhclRpbWVvdXQoZy50YXNrKTtkZWxldGUgZy50YXNrfW09Zy50YXNrcyYmZy50YXNrcy5sZW5ndGg7aWYobSl7d2hpbGUobS0tKXtjbGVhclRpbWVvdXQoZy50YXNrc1ttXSl9ZGVsZXRlIGcudGFza3N9aWYobi5kZXRhY2hFdmVudCl7bi5kZXRhY2hFdmVudCgib24iK3MsZyl9ZWxzZXtuLnJlbW92ZUV2ZW50TGlzdGVuZXIocyxnLGZhbHNlKX1pZihnJiZuPT1kJiZxPT0ibW91c2Vkb3duIil7YS5zdG9wcGVkTW91c2VEb3duRXZlbnQucmVtb3ZlTGlzdGVuZXIoZyl9RXh0LkFycmF5LmVyYXNlKGUsbywxKX19fSxyZW1vdmVBbGw6ZnVuY3Rpb24oaSl7dmFyIGo9aS5kb20/aTpFeHQuZ2V0KGkpLGcsaCxlO2lmKCFqKXtyZXR1cm59Zz0oai4kY2FjaGV8fGouZ2V0Q2FjaGUoKSk7aD1nLmV2ZW50cztmb3IoZSBpbiBoKXtpZihoLmhhc093blByb3BlcnR5KGUpKXthLnJlbW92ZUxpc3RlbmVyKGosZSl9fWcuZXZlbnRzPXt9fSxwdXJnZUVsZW1lbnQ6ZnVuY3Rpb24oaixnKXt2YXIgaz1FeHQuZ2V0RG9tKGopLGg9MCxlO2lmKGcpe2EucmVtb3ZlTGlzdGVuZXIoaixnKX1lbHNle2EucmVtb3ZlQWxsKGopfWlmKGsmJmsuY2hpbGROb2Rlcyl7Zm9yKGU9ai5jaGlsZE5vZGVzLmxlbmd0aDtoPGU7aCsrKXthLnB1cmdlRWxlbWVudChqLmNoaWxkTm9kZXNbaF0sZyl9fX0sY3JlYXRlTGlzdGVuZXJXcmFwOmZ1bmN0aW9uKGksaCxsLG0sbil7bj1ufHx7fTt2YXIgayxqLGU9L1xcL2csZz1mdW5jdGlvbihwLG8pe2lmKCFqKXtrPVsiaWYoISIrRXh0Lm5hbWUrIikge3JldHVybjt9Il07aWYobi5idWZmZXJ8fG4uZGVsYXl8fG4uZnJlZXplRXZlbnQpe2sucHVzaCgiZSA9IG5ldyBYLkV2ZW50T2JqZWN0SW1wbChlLCAiKyhuLmZyZWV6ZUV2ZW50PyJ0cnVlIjoiZmFsc2UiKSsiKTsiKX1lbHNle2sucHVzaCgiZSA9IFguRXZlbnRPYmplY3Quc2V0RXZlbnQoZSk7Iil9aWYobi5kZWxlZ2F0ZSl7ay5wdXNoKCd2YXIgcmVzdWx0LCB0ID0gZS5nZXRUYXJnZXQoIicrKG4uZGVsZWdhdGUrIiIpLnJlcGxhY2UoZSwiXFxcXCIpKyciLCB0aGlzKTsnKTtrLnB1c2goImlmKCF0KSB7cmV0dXJuO30iKX1lbHNle2sucHVzaCgidmFyIHQgPSBlLnRhcmdldCwgcmVzdWx0OyIpfWlmKG4udGFyZ2V0KXtrLnB1c2goImlmKGUudGFyZ2V0ICE9PSBvcHRpb25zLnRhcmdldCkge3JldHVybjt9Iil9aWYobi5zdG9wRXZlbnQpe2sucHVzaCgiZS5zdG9wRXZlbnQoKTsiKX1lbHNle2lmKG4ucHJldmVudERlZmF1bHQpe2sucHVzaCgiZS5wcmV2ZW50RGVmYXVsdCgpOyIpfWlmKG4uc3RvcFByb3BhZ2F0aW9uKXtrLnB1c2goImUuc3RvcFByb3BhZ2F0aW9uKCk7Iil9fWlmKG4ubm9ybWFsaXplZD09PWZhbHNlKXtrLnB1c2goImUgPSBlLmJyb3dzZXJFdmVudDsiKX1pZihuLmJ1ZmZlcil7ay5wdXNoKCIod3JhcC50YXNrICYmIGNsZWFyVGltZW91dCh3cmFwLnRhc2spKTsiKTtrLnB1c2goIndyYXAudGFzayA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7Iil9aWYobi5kZWxheSl7ay5wdXNoKCJ3cmFwLnRhc2tzID0gd3JhcC50YXNrcyB8fCBbXTsiKTtrLnB1c2goIndyYXAudGFza3MucHVzaChzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyIpfWsucHVzaCgicmVzdWx0ID0gZm4uY2FsbChzY29wZSB8fCBkb20sIGUsIHQsIG9wdGlvbnMpOyIpO2lmKG4uc2luZ2xlKXtrLnB1c2goImV2dE1nci5yZW1vdmVMaXN0ZW5lcihkb20sIGVuYW1lLCBmbiwgc2NvcGUpOyIpfWlmKGghPT0ibW91c2Vtb3ZlIil7ay5wdXNoKCJpZiAoZXZ0TWdyLmlkbGVFdmVudC5saXN0ZW5lcnMubGVuZ3RoKSB7Iik7ay5wdXNoKCJldnRNZ3IuaWRsZUV2ZW50LmZpcmUoKTsiKTtrLnB1c2goIn0iKX1pZihuLmRlbGF5KXtrLnB1c2goIn0sICIrbi5kZWxheSsiKSk7Iil9aWYobi5idWZmZXIpe2sucHVzaCgifSwgIituLmJ1ZmZlcisiKTsiKX1rLnB1c2goInJldHVybiByZXN1bHQ7Iik7aj1FeHQuY2FjaGVhYmxlRnVuY3Rpb25GYWN0b3J5KCJlIiwib3B0aW9ucyIsImZuIiwic2NvcGUiLCJlbmFtZSIsImRvbSIsIndyYXAiLCJhcmdzIiwiWCIsImV2dE1nciIsay5qb2luKCJcbiIpKX1yZXR1cm4gai5jYWxsKGkscCxuLGwsbSxoLGksZyxvLEV4dCxhKX07cmV0dXJuIGd9LGdldEV2ZW50TGlzdGVuZXJDYWNoZTpmdW5jdGlvbihpLGUpe3ZhciBoLGc7aWYoIWkpe3JldHVybltdfWlmKGkuJGNhY2hlKXtoPWkuJGNhY2hlfWVsc2V7aD1FeHQuY2FjaGVbYS5nZXRJZChpKV19Zz1oLmV2ZW50c3x8KGguZXZlbnRzPXt9KTtyZXR1cm4gZ1tlXXx8KGdbZV09W10pfSxtb3VzZUxlYXZlUmU6Lyhtb3VzZW91dHxtb3VzZWxlYXZlKS8sbW91c2VFbnRlclJlOi8obW91c2VvdmVyfG1vdXNlZW50ZXIpLyxzdG9wRXZlbnQ6ZnVuY3Rpb24oZSl7YS5zdG9wUHJvcGFnYXRpb24oZSk7YS5wcmV2ZW50RGVmYXVsdChlKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKGUpe2U9ZS5icm93c2VyRXZlbnR8fGU7aWYoZS5zdG9wUHJvcGFnYXRpb24pe2Uuc3RvcFByb3BhZ2F0aW9uKCl9ZWxzZXtlLmNhbmNlbEJ1YmJsZT10cnVlfX0scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oZyl7Zz1nLmJyb3dzZXJFdmVudHx8ZztpZihnLnByZXZlbnREZWZhdWx0KXtnLnByZXZlbnREZWZhdWx0KCl9ZWxzZXtnLnJldHVyblZhbHVlPWZhbHNlO3RyeXtpZihnLmN0cmxLZXl8fGcua2V5Q29kZT4xMTEmJmcua2V5Q29kZTwxMjQpe2cua2V5Q29kZT0tMX19Y2F0Y2goaCl7fX19LGdldFJlbGF0ZWRUYXJnZXQ6ZnVuY3Rpb24oZSl7ZT1lLmJyb3dzZXJFdmVudHx8ZTt2YXIgZz1lLnJlbGF0ZWRUYXJnZXQ7aWYoIWcpe2lmKGEubW91c2VMZWF2ZVJlLnRlc3QoZS50eXBlKSl7Zz1lLnRvRWxlbWVudH1lbHNle2lmKGEubW91c2VFbnRlclJlLnRlc3QoZS50eXBlKSl7Zz1lLmZyb21FbGVtZW50fX19cmV0dXJuIGEucmVzb2x2ZVRleHROb2RlKGcpfSxnZXRQYWdlWDpmdW5jdGlvbihlKXtyZXR1cm4gYS5nZXRQYWdlWFkoZSlbMF19LGdldFBhZ2VZOmZ1bmN0aW9uKGUpe3JldHVybiBhLmdldFBhZ2VYWShlKVsxXX0sZ2V0UGFnZVhZOmZ1bmN0aW9uKGgpe2g9aC5icm93c2VyRXZlbnR8fGg7dmFyIGc9aC5wYWdlWCxqPWgucGFnZVksaT1kLmRvY3VtZW50RWxlbWVudCxlPWQuYm9keTtpZighZyYmZyE9PTApe2c9aC5jbGllbnRYKyhpJiZpLnNjcm9sbExlZnR8fGUmJmUuc2Nyb2xsTGVmdHx8MCktKGkmJmkuY2xpZW50TGVmdHx8ZSYmZS5jbGllbnRMZWZ0fHwwKTtqPWguY2xpZW50WSsoaSYmaS5zY3JvbGxUb3B8fGUmJmUuc2Nyb2xsVG9wfHwwKS0oaSYmaS5jbGllbnRUb3B8fGUmJmUuY2xpZW50VG9wfHwwKX1yZXR1cm5bZyxqXX0sZ2V0VGFyZ2V0OmZ1bmN0aW9uKGUpe2U9ZS5icm93c2VyRXZlbnR8fGU7cmV0dXJuIGEucmVzb2x2ZVRleHROb2RlKGUudGFyZ2V0fHxlLnNyY0VsZW1lbnQpfSxyZXNvbHZlVGV4dE5vZGU6RXh0LmlzR2Vja28/ZnVuY3Rpb24oZyl7aWYoIWcpe3JldHVybn12YXIgZT1IVE1MRWxlbWVudC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnKTtpZihlPT0iW3hwY29ubmVjdCB3cmFwcGVkIG5hdGl2ZSBwcm90b3R5cGVdInx8ZT09IltvYmplY3QgWFVMRWxlbWVudF0iKXtyZXR1cm59cmV0dXJuIGcubm9kZVR5cGU9PTM/Zy5wYXJlbnROb2RlOmd9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLm5vZGVUeXBlPT0zP2UucGFyZW50Tm9kZTplfSxjdXJXaWR0aDowLGN1ckhlaWdodDowLG9uV2luZG93UmVzaXplOmZ1bmN0aW9uKGksaCxnKXt2YXIgZT1hLnJlc2l6ZUV2ZW50O2lmKCFlKXthLnJlc2l6ZUV2ZW50PWU9bmV3IEV4dC51dGlsLkV2ZW50KCk7YS5vbihjLCJyZXNpemUiLGEuZmlyZVJlc2l6ZSxudWxsLHtidWZmZXI6MTAwfSl9ZS5hZGRMaXN0ZW5lcihpLGgsZyl9LGZpcmVSZXNpemU6ZnVuY3Rpb24oKXt2YXIgZT1FeHQuRWxlbWVudC5nZXRWaWV3V2lkdGgoKSxnPUV4dC5FbGVtZW50LmdldFZpZXdIZWlnaHQoKTtpZihhLmN1ckhlaWdodCE9Z3x8YS5jdXJXaWR0aCE9ZSl7YS5jdXJIZWlnaHQ9ZzthLmN1cldpZHRoPWU7YS5yZXNpemVFdmVudC5maXJlKGUsZyl9fSxyZW1vdmVSZXNpemVMaXN0ZW5lcjpmdW5jdGlvbihoLGcpe3ZhciBlPWEucmVzaXplRXZlbnQ7aWYoZSl7ZS5yZW1vdmVMaXN0ZW5lcihoLGcpfX0sb25XaW5kb3dVbmxvYWQ6ZnVuY3Rpb24oaSxoLGcpe3ZhciBlPWEudW5sb2FkRXZlbnQ7aWYoIWUpe2EudW5sb2FkRXZlbnQ9ZT1uZXcgRXh0LnV0aWwuRXZlbnQoKTthLmFkZExpc3RlbmVyKGMsInVubG9hZCIsYS5maXJlVW5sb2FkKX1pZihpKXtlLmFkZExpc3RlbmVyKGksaCxnKX19LGZpcmVVbmxvYWQ6ZnVuY3Rpb24oKXt0cnl7ZD1jPXVuZGVmaW5lZDt2YXIgbSxoLGssaixnO2EudW5sb2FkRXZlbnQuZmlyZSgpO2lmKEV4dC5pc0dlY2tvMyl7bT1FeHQuQ29tcG9uZW50UXVlcnkucXVlcnkoImdyaWR2aWV3Iik7aD0wO2s9bS5sZW5ndGg7Zm9yKDtoPGs7aCsrKXttW2hdLnNjcm9sbFRvVG9wKCl9fWc9RXh0LmNhY2hlO2ZvcihqIGluIGcpe2lmKGcuaGFzT3duUHJvcGVydHkoaikpe2EucmVtb3ZlQWxsKGopfX19Y2F0Y2gobCl7fX0scmVtb3ZlVW5sb2FkTGlzdGVuZXI6ZnVuY3Rpb24oaCxnKXt2YXIgZT1hLnVubG9hZEV2ZW50O2lmKGUpe2UucmVtb3ZlTGlzdGVuZXIoaCxnKX19LHVzZUtleURvd246RXh0LmlzV2ViS2l0P3BhcnNlSW50KG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FwcGxlV2ViS2l0XC8oXGQrKS8pWzFdLDEwKT49NTI1OiEoKEV4dC5pc0dlY2tvJiYhRXh0LmlzV2luZG93cyl8fEV4dC5pc09wZXJhKSxnZXRLZXlFdmVudDpmdW5jdGlvbigpe3JldHVybiBhLnVzZUtleURvd24/ImtleWRvd24iOiJrZXlwcmVzcyJ9fSk7aWYoISgiYWRkRXZlbnRMaXN0ZW5lciIgaW4gZG9jdW1lbnQpJiZkb2N1bWVudC5hdHRhY2hFdmVudCl7RXh0LmFwcGx5KGEse3BvbGxTY3JvbGw6ZnVuY3Rpb24oKXt2YXIgZz10cnVlO3RyeXtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChoKXtnPWZhbHNlfWlmKGcmJmRvY3VtZW50LmJvZHkpe2Eub25SZWFkeUV2ZW50KHt0eXBlOiJkb1Njcm9sbCJ9KX1lbHNle2Euc2Nyb2xsVGltZW91dD1zZXRUaW1lb3V0KGEucG9sbFNjcm9sbCwyMCl9cmV0dXJuIGd9LHNjcm9sbFRpbWVvdXQ6bnVsbCxyZWFkeVN0YXRlc1JlOi9jb21wbGV0ZS9pLGNoZWNrUmVhZHlTdGF0ZTpmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LnJlYWR5U3RhdGU7aWYoYS5yZWFkeVN0YXRlc1JlLnRlc3QoZSkpe2Eub25SZWFkeUV2ZW50KHt0eXBlOmV9KX19LGJpbmRSZWFkeUV2ZW50OmZ1bmN0aW9uKCl7dmFyIGc9dHJ1ZTtpZihhLmhhc0JvdW5kT25SZWFkeSl7cmV0dXJufXRyeXtnPXdpbmRvdy5mcmFtZUVsZW1lbnQ9PT11bmRlZmluZWR9Y2F0Y2goaCl7Zz1mYWxzZX1pZighZ3x8IWQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKXthLnBvbGxTY3JvbGw9RXh0LmVtcHR5Rm59aWYoYS5wb2xsU2Nyb2xsKCk9PT10cnVlKXtyZXR1cm59aWYoZC5yZWFkeVN0YXRlPT0iY29tcGxldGUiKXthLm9uUmVhZHlFdmVudCh7dHlwZToiYWxyZWFkeSAiKyhkLnJlYWR5U3RhdGV8fCJib2R5Iil9KX1lbHNle2QuYXR0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsYS5jaGVja1JlYWR5U3RhdGUpO3dpbmRvdy5hdHRhY2hFdmVudCgib25sb2FkIixhLm9uUmVhZHlFdmVudCk7YS5oYXNCb3VuZE9uUmVhZHk9dHJ1ZX19LG9uUmVhZHlFdmVudDpmdW5jdGlvbihnKXtpZihnJiZnLnR5cGUpe2Eub25SZWFkeUNoYWluLnB1c2goZy50eXBlKX1pZihhLmhhc0JvdW5kT25SZWFkeSl7ZG9jdW1lbnQuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsYS5jaGVja1JlYWR5U3RhdGUpO3dpbmRvdy5kZXRhY2hFdmVudCgib25sb2FkIixhLm9uUmVhZHlFdmVudCl9aWYoRXh0LmlzTnVtYmVyKGEuc2Nyb2xsVGltZW91dCkpe2NsZWFyVGltZW91dChhLnNjcm9sbFRpbWVvdXQpO2RlbGV0ZSBhLnNjcm9sbFRpbWVvdXR9aWYoIUV4dC5pc1JlYWR5KXthLmZpcmVEb2NSZWFkeSgpfX0sb25SZWFkeUNoYWluOltdfSl9RXh0Lm9uUmVhZHk9ZnVuY3Rpb24oaCxnLGUpe0V4dC5Mb2FkZXIub25SZWFkeShoLGcsdHJ1ZSxlKX07RXh0Lm9uRG9jdW1lbnRSZWFkeT1hLm9uRG9jdW1lbnRSZWFkeTthLm9uPWEuYWRkTGlzdGVuZXI7YS51bj1hLnJlbW92ZUxpc3RlbmVyO0V4dC5vblJlYWR5KGIpfTtFeHQuZGVmaW5lKCJFeHQuRXZlbnRPYmplY3RJbXBsIix7dXNlczpbIkV4dC51dGlsLlBvaW50Il0sQkFDS1NQQUNFOjgsVEFCOjksTlVNX0NFTlRFUjoxMixFTlRFUjoxMyxSRVRVUk46MTMsU0hJRlQ6MTYsQ1RSTDoxNyxBTFQ6MTgsUEFVU0U6MTksQ0FQU19MT0NLOjIwLEVTQzoyNyxTUEFDRTozMixQQUdFX1VQOjMzLFBBR0VfRE9XTjozNCxFTkQ6MzUsSE9NRTozNixMRUZUOjM3LFVQOjM4LFJJR0hUOjM5LERPV046NDAsUFJJTlRfU0NSRUVOOjQ0LElOU0VSVDo0NSxERUxFVEU6NDYsWkVSTzo0OCxPTkU6NDksVFdPOjUwLFRIUkVFOjUxLEZPVVI6NTIsRklWRTo1MyxTSVg6NTQsU0VWRU46NTUsRUlHSFQ6NTYsTklORTo1NyxBOjY1LEI6NjYsQzo2NyxEOjY4LEU6NjksRjo3MCxHOjcxLEg6NzIsSTo3MyxKOjc0LEs6NzUsTDo3NixNOjc3LE46NzgsTzo3OSxQOjgwLFE6ODEsUjo4MixTOjgzLFQ6ODQsVTo4NSxWOjg2LFc6ODcsWDo4OCxZOjg5LFo6OTAsQ09OVEVYVF9NRU5VOjkzLE5VTV9aRVJPOjk2LE5VTV9PTkU6OTcsTlVNX1RXTzo5OCxOVU1fVEhSRUU6OTksTlVNX0ZPVVI6MTAwLE5VTV9GSVZFOjEwMSxOVU1fU0lYOjEwMixOVU1fU0VWRU46MTAzLE5VTV9FSUdIVDoxMDQsTlVNX05JTkU6MTA1LE5VTV9NVUxUSVBMWToxMDYsTlVNX1BMVVM6MTA3LE5VTV9NSU5VUzoxMDksTlVNX1BFUklPRDoxMTAsTlVNX0RJVklTSU9OOjExMSxGMToxMTIsRjI6MTEzLEYzOjExNCxGNDoxMTUsRjU6MTE2LEY2OjExNyxGNzoxMTgsRjg6MTE5LEY5OjEyMCxGMTA6MTIxLEYxMToxMjIsRjEyOjEyMyxXSEVFTF9TQ0FMRTooZnVuY3Rpb24oKXt2YXIgYTtpZihFeHQuaXNHZWNrbyl7YT0zfWVsc2V7aWYoRXh0LmlzTWFjKXtpZihFeHQuaXNTYWZhcmkmJkV4dC53ZWJLaXRWZXJzaW9uPj01MzIpe2E9MTIwfWVsc2V7YT0xMn1hKj0zfWVsc2V7YT0xMjB9fXJldHVybiBhfSgpKSxjbGlja1JlOi8oZGJsKT9jbGljay8sc2FmYXJpS2V5czp7MzoxMyw2MzIzNDozNyw2MzIzNTozOSw2MzIzMjozOCw2MzIzMzo0MCw2MzI3NjozMyw2MzI3NzozNCw2MzI3Mjo0Niw2MzI3MzozNiw2MzI3NTozNX0sYnRuTWFwOkV4dC5pc0lFP3sxOjAsNDoxLDI6Mn06ezA6MCwxOjEsMjoyfSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhLGIpe2lmKGEpe3RoaXMuc2V0RXZlbnQoYS5icm93c2VyRXZlbnR8fGEsYil9fSxzZXRFdmVudDpmdW5jdGlvbihkLGUpe3ZhciBjPXRoaXMsYixhO2lmKGQ9PWN8fChkJiZkLmJyb3dzZXJFdmVudCkpe3JldHVybiBkfWMuYnJvd3NlckV2ZW50PWQ7aWYoZCl7Yj1kLmJ1dHRvbj9jLmJ0bk1hcFtkLmJ1dHRvbl06KGQud2hpY2g/ZC53aGljaC0xOi0xKTtpZihjLmNsaWNrUmUudGVzdChkLnR5cGUpJiZiPT0tMSl7Yj0wfWE9e3R5cGU6ZC50eXBlLGJ1dHRvbjpiLHNoaWZ0S2V5OmQuc2hpZnRLZXksY3RybEtleTpkLmN0cmxLZXl8fGQubWV0YUtleXx8ZmFsc2UsYWx0S2V5OmQuYWx0S2V5LGtleUNvZGU6ZC5rZXlDb2RlLGNoYXJDb2RlOmQuY2hhckNvZGUsdGFyZ2V0OkV4dC5FdmVudE1hbmFnZXIuZ2V0VGFyZ2V0KGQpLHJlbGF0ZWRUYXJnZXQ6RXh0LkV2ZW50TWFuYWdlci5nZXRSZWxhdGVkVGFyZ2V0KGQpLGN1cnJlbnRUYXJnZXQ6ZC5jdXJyZW50VGFyZ2V0LHh5OihlP2MuZ2V0WFkoKTpudWxsKX19ZWxzZXthPXtidXR0b246LTEsc2hpZnRLZXk6ZmFsc2UsY3RybEtleTpmYWxzZSxhbHRLZXk6ZmFsc2Usa2V5Q29kZTowLGNoYXJDb2RlOjAsdGFyZ2V0Om51bGwseHk6WzAsMF19fUV4dC5hcHBseShjLGEpO3JldHVybiBjfSxzdG9wRXZlbnQ6ZnVuY3Rpb24oKXt0aGlzLnN0b3BQcm9wYWdhdGlvbigpO3RoaXMucHJldmVudERlZmF1bHQoKX0scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtpZih0aGlzLmJyb3dzZXJFdmVudCl7RXh0LkV2ZW50TWFuYWdlci5wcmV2ZW50RGVmYXVsdCh0aGlzLmJyb3dzZXJFdmVudCl9fSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJyb3dzZXJFdmVudDtpZihhKXtpZihhLnR5cGU9PSJtb3VzZWRvd24iKXtFeHQuRXZlbnRNYW5hZ2VyLnN0b3BwZWRNb3VzZURvd25FdmVudC5maXJlKHRoaXMpfUV4dC5FdmVudE1hbmFnZXIuc3RvcFByb3BhZ2F0aW9uKGEpfX0sZ2V0Q2hhckNvZGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGFyQ29kZXx8dGhpcy5rZXlDb2RlfSxnZXRLZXk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub3JtYWxpemVLZXkodGhpcy5rZXlDb2RlfHx0aGlzLmNoYXJDb2RlKX0sbm9ybWFsaXplS2V5OmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuaXNXZWJLaXQ/KHRoaXMuc2FmYXJpS2V5c1thXXx8YSk6YX0sZ2V0UGFnZVg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRYKCl9LGdldFBhZ2VZOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0WSgpfSxnZXRYOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0WFkoKVswXX0sZ2V0WTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFhZKClbMV19LGdldFhZOmZ1bmN0aW9uKCl7aWYoIXRoaXMueHkpe3RoaXMueHk9RXh0LkV2ZW50TWFuYWdlci5nZXRQYWdlWFkodGhpcy5icm93c2VyRXZlbnQpfXJldHVybiB0aGlzLnh5fSxnZXRUYXJnZXQ6ZnVuY3Rpb24oYixjLGEpe2lmKGIpe3JldHVybiBFeHQuZmx5KHRoaXMudGFyZ2V0KS5maW5kUGFyZW50KGIsYyxhKX1yZXR1cm4gYT9FeHQuZ2V0KHRoaXMudGFyZ2V0KTp0aGlzLnRhcmdldH0sZ2V0UmVsYXRlZFRhcmdldDpmdW5jdGlvbihiLGMsYSl7aWYoYil7cmV0dXJuIEV4dC5mbHkodGhpcy5yZWxhdGVkVGFyZ2V0KS5maW5kUGFyZW50KGIsYyxhKX1yZXR1cm4gYT9FeHQuZ2V0KHRoaXMucmVsYXRlZFRhcmdldCk6dGhpcy5yZWxhdGVkVGFyZ2V0fSxjb3JyZWN0V2hlZWxEZWx0YTpmdW5jdGlvbihjKXt2YXIgYj10aGlzLldIRUVMX1NDQUxFLGE9TWF0aC5yb3VuZChjL2IpO2lmKCFhJiZjKXthPShjPDApPy0xOjF9cmV0dXJuIGF9LGdldFdoZWVsRGVsdGFzOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxjPWQuYnJvd3NlckV2ZW50LGI9MCxhPTA7aWYoRXh0LmlzRGVmaW5lZChjLndoZWVsRGVsdGFYKSl7Yj1jLndoZWVsRGVsdGFYO2E9Yy53aGVlbERlbHRhWX1lbHNle2lmKGMud2hlZWxEZWx0YSl7YT1jLndoZWVsRGVsdGF9ZWxzZXtpZihjLmRldGFpbCl7YT0tYy5kZXRhaWw7aWYoYT4xMDApe2E9M31lbHNle2lmKGE8LTEwMCl7YT0tM319aWYoRXh0LmlzRGVmaW5lZChjLmF4aXMpJiZjLmF4aXM9PT1jLkhPUklaT05UQUxfQVhJUyl7Yj1hO2E9MH19fX1yZXR1cm57eDpkLmNvcnJlY3RXaGVlbERlbHRhKGIpLHk6ZC5jb3JyZWN0V2hlZWxEZWx0YShhKX19LGdldFdoZWVsRGVsdGE6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFdoZWVsRGVsdGFzKCk7cmV0dXJuIGEueX0sd2l0aGluOmZ1bmN0aW9uKGQsZSxiKXtpZihkKXt2YXIgYz1lP3RoaXMuZ2V0UmVsYXRlZFRhcmdldCgpOnRoaXMuZ2V0VGFyZ2V0KCksYTtpZihjKXthPUV4dC5mbHkoZCkuY29udGFpbnMoYyk7aWYoIWEmJmIpe2E9Yz09RXh0LmdldERvbShkKX1yZXR1cm4gYX19cmV0dXJuIGZhbHNlfSxpc05hdktleVByZXNzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPXRoaXMubm9ybWFsaXplS2V5KGIua2V5Q29kZSk7cmV0dXJuKGE+PTMzJiZhPD00MCl8fGE9PWIuUkVUVVJOfHxhPT1iLlRBQnx8YT09Yi5FU0N9LGlzU3BlY2lhbEtleTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubm9ybWFsaXplS2V5KHRoaXMua2V5Q29kZSk7cmV0dXJuKHRoaXMudHlwZT09ImtleXByZXNzIiYmdGhpcy5jdHJsS2V5KXx8dGhpcy5pc05hdktleVByZXNzKCl8fChhPT10aGlzLkJBQ0tTUEFDRSl8fChhPj0xNiYmYTw9MjApfHwoYT49NDQmJmE8PTQ2KX0sZ2V0UG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFhZKCk7cmV0dXJuIG5ldyBFeHQudXRpbC5Qb2ludChhWzBdLGFbMV0pfSxoYXNNb2RpZmllcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmN0cmxLZXl8fHRoaXMuYWx0S2V5fHx0aGlzLnNoaWZ0S2V5fHx0aGlzLm1ldGFLZXl9LGluamVjdEV2ZW50OihmdW5jdGlvbigpe3ZhciBkLGU9e30sYztpZighRXh0LmlzSUUmJmRvY3VtZW50LmNyZWF0ZUV2ZW50KXtkPXtjcmVhdGVIdG1sRXZlbnQ6ZnVuY3Rpb24oayxpLGgsZyl7dmFyIGo9ay5jcmVhdGVFdmVudCgiSFRNTEV2ZW50cyIpO2ouaW5pdEV2ZW50KGksaCxnKTtyZXR1cm4gan0sY3JlYXRlTW91c2VFdmVudDpmdW5jdGlvbih1LHMsbSxsLG8sayxpLGosZyxyLHEsbixwKXt2YXIgaD11LmNyZWF0ZUV2ZW50KCJNb3VzZUV2ZW50cyIpLHQ9dS5kZWZhdWx0Vmlld3x8d2luZG93O2lmKGguaW5pdE1vdXNlRXZlbnQpe2guaW5pdE1vdXNlRXZlbnQocyxtLGwsdCxvLGssaSxrLGksaixnLHIscSxuLHApfWVsc2V7aD11LmNyZWF0ZUV2ZW50KCJVSUV2ZW50cyIpO2guaW5pdEV2ZW50KHMsbSxsKTtoLnZpZXc9dDtoLmRldGFpbD1vO2guc2NyZWVuWD1rO2guc2NyZWVuWT1pO2guY2xpZW50WD1rO2guY2xpZW50WT1pO2guY3RybEtleT1qO2guYWx0S2V5PWc7aC5tZXRhS2V5PXE7aC5zaGlmdEtleT1yO2guYnV0dG9uPW47aC5yZWxhdGVkVGFyZ2V0PXB9cmV0dXJuIGh9LGNyZWF0ZVVJRXZlbnQ6ZnVuY3Rpb24obSxrLGksaCxqKXt2YXIgbD1tLmNyZWF0ZUV2ZW50KCJVSUV2ZW50cyIpLGc9bS5kZWZhdWx0Vmlld3x8d2luZG93O2wuaW5pdFVJRXZlbnQoayxpLGgsZyxqKTtyZXR1cm4gbH0sZmlyZUV2ZW50OmZ1bmN0aW9uKGksZyxoKXtpLmRpc3BhdGNoRXZlbnQoaCl9LGZpeFRhcmdldDpmdW5jdGlvbihnKXtpZihnPT13aW5kb3cmJiFnLmRpc3BhdGNoRXZlbnQpe3JldHVybiBkb2N1bWVudH1yZXR1cm4gZ319fWVsc2V7aWYoZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3Qpe2M9ezA6MSwxOjQsMjoyfTtkPXtjcmVhdGVIdG1sRXZlbnQ6ZnVuY3Rpb24oayxpLGgsZyl7dmFyIGo9ay5jcmVhdGVFdmVudE9iamVjdCgpO2ouYnViYmxlcz1oO2ouY2FuY2VsYWJsZT1nO3JldHVybiBqfSxjcmVhdGVNb3VzZUV2ZW50OmZ1bmN0aW9uKHQscyxtLGwsbyxrLGksaixnLHIscSxuLHApe3ZhciBoPXQuY3JlYXRlRXZlbnRPYmplY3QoKTtoLmJ1YmJsZXM9bTtoLmNhbmNlbGFibGU9bDtoLmRldGFpbD1vO2guc2NyZWVuWD1rO2guc2NyZWVuWT1pO2guY2xpZW50WD1rO2guY2xpZW50WT1pO2guY3RybEtleT1qO2guYWx0S2V5PWc7aC5zaGlmdEtleT1yO2gubWV0YUtleT1xO2guYnV0dG9uPWNbbl18fG47aC5yZWxhdGVkVGFyZ2V0PXA7cmV0dXJuIGh9LGNyZWF0ZVVJRXZlbnQ6ZnVuY3Rpb24obCxqLGgsZyxpKXt2YXIgaz1sLmNyZWF0ZUV2ZW50T2JqZWN0KCk7ay5idWJibGVzPWg7ay5jYW5jZWxhYmxlPWc7cmV0dXJuIGt9LGZpcmVFdmVudDpmdW5jdGlvbihpLGcsaCl7aS5maXJlRXZlbnQoIm9uIitnLGgpfSxmaXhUYXJnZXQ6ZnVuY3Rpb24oZyl7aWYoZz09ZG9jdW1lbnQpe3JldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnR9cmV0dXJuIGd9fX19RXh0Lk9iamVjdC5lYWNoKHtsb2FkOltmYWxzZSxmYWxzZV0sdW5sb2FkOltmYWxzZSxmYWxzZV0sc2VsZWN0Olt0cnVlLGZhbHNlXSxjaGFuZ2U6W3RydWUsZmFsc2VdLHN1Ym1pdDpbdHJ1ZSx0cnVlXSxyZXNldDpbdHJ1ZSxmYWxzZV0scmVzaXplOlt0cnVlLGZhbHNlXSxzY3JvbGw6W3RydWUsZmFsc2VdfSxmdW5jdGlvbihpLGope3ZhciBoPWpbMF0sZz1qWzFdO2VbaV09ZnVuY3Rpb24obSxrKXt2YXIgbD1kLmNyZWF0ZUh0bWxFdmVudChpLGgsZyk7ZC5maXJlRXZlbnQobSxpLGwpfX0pO2Z1bmN0aW9uIGIoaSxoKXt2YXIgZz0oaSE9Im1vdXNlbW92ZSIpO3JldHVybiBmdW5jdGlvbihtLGope3ZhciBsPWouZ2V0WFkoKSxrPWQuY3JlYXRlTW91c2VFdmVudChtLm93bmVyRG9jdW1lbnQsaSx0cnVlLGcsaCxsWzBdLGxbMV0sai5jdHJsS2V5LGouYWx0S2V5LGouc2hpZnRLZXksai5tZXRhS2V5LGouYnV0dG9uLGoucmVsYXRlZFRhcmdldCk7ZC5maXJlRXZlbnQobSxpLGspfX1FeHQuZWFjaChbImNsaWNrIiwiZGJsY2xpY2siLCJtb3VzZWRvd24iLCJtb3VzZXVwIiwibW91c2VvdmVyIiwibW91c2Vtb3ZlIiwibW91c2VvdXQiXSxmdW5jdGlvbihnKXtlW2ddPWIoZywxKX0pO0V4dC5PYmplY3QuZWFjaCh7Zm9jdXNpbjpbdHJ1ZSxmYWxzZV0sZm9jdXNvdXQ6W3RydWUsZmFsc2VdLGFjdGl2YXRlOlt0cnVlLHRydWVdLGZvY3VzOltmYWxzZSxmYWxzZV0sYmx1cjpbZmFsc2UsZmFsc2VdfSxmdW5jdGlvbihpLGope3ZhciBoPWpbMF0sZz1qWzFdO2VbaV09ZnVuY3Rpb24obSxrKXt2YXIgbD1kLmNyZWF0ZVVJRXZlbnQobS5vd25lckRvY3VtZW50LGksaCxnLDEpO2QuZmlyZUV2ZW50KG0saSxsKX19KTtpZighZCl7ZT17fTtkPXtmaXhUYXJnZXQ6ZnVuY3Rpb24oZyl7cmV0dXJuIGd9fX1mdW5jdGlvbiBhKGgsZyl7fXJldHVybiBmdW5jdGlvbihqKXt2YXIgaT10aGlzLGg9ZVtpLnR5cGVdfHxhLGc9aj8oai5kb218fGopOmkuZ2V0VGFyZ2V0KCk7Zz1kLmZpeFRhcmdldChnKTtoKGcsaSl9fSgpKX0sZnVuY3Rpb24oKXtFeHQuRXZlbnRPYmplY3Q9bmV3IEV4dC5FdmVudE9iamVjdEltcGwoKX0pO0V4dC5kZWZpbmUoIkV4dC5kb20uQWJzdHJhY3RRdWVyeSIse3NlbGVjdDpmdW5jdGlvbihrLGIpe3ZhciBoPVtdLGQsZyxlLGMsYTtiPWJ8fGRvY3VtZW50O2lmKHR5cGVvZiBiPT0ic3RyaW5nIil7Yj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChiKX1rPWsuc3BsaXQoIiwiKTtmb3IoZz0wLGM9ay5sZW5ndGg7ZzxjO2crKyl7aWYodHlwZW9mIGtbZ109PSJzdHJpbmciKXtpZih0eXBlb2Yga1tnXVswXT09IkAiKXtkPWIuZ2V0QXR0cmlidXRlTm9kZShrW2ddLnN1YnN0cmluZygxKSk7aC5wdXNoKGQpfWVsc2V7ZD1iLnF1ZXJ5U2VsZWN0b3JBbGwoa1tnXSk7Zm9yKGU9MCxhPWQubGVuZ3RoO2U8YTtlKyspe2gucHVzaChkW2VdKX19fX1yZXR1cm4gaH0sc2VsZWN0Tm9kZTpmdW5jdGlvbihiLGEpe3JldHVybiB0aGlzLnNlbGVjdChiLGEpWzBdfSxpczpmdW5jdGlvbihhLGIpe2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7YT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKX1yZXR1cm4gdGhpcy5zZWxlY3QoYikuaW5kZXhPZihhKSE9PS0xfX0pO0V4dC5kZWZpbmUoIkV4dC5kb20uQWJzdHJhY3RIZWxwZXIiLHtlbXB0eVRhZ3M6L14oPzpicnxmcmFtZXxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHJhbmdlfHNwYWNlcnx3YnJ8YXJlYXxwYXJhbXxjb2wpJC9pLGNvbmZSZTovKD86dGFnfGNoaWxkcmVufGNufGh0bWx8dHBsfHRwbERhdGEpJC9pLGVuZFJlOi9lbmQvaSxhdHRyaWJ1dGVUcmFuc2Zvcm06e2NsczoiY2xhc3MiLGh0bWxGb3I6ImZvciJ9LGNsb3NlVGFnczp7fSxkZWNhbWVsaXplTmFtZTooZnVuY3Rpb24oKXt2YXIgYz0vKFthLXpdKShbQS1aXSkvZyxiPXt9O2Z1bmN0aW9uIGEoZCxnLGUpe3JldHVybiBnKyItIitlLnRvTG93ZXJDYXNlKCl9cmV0dXJuIGZ1bmN0aW9uKGQpe3JldHVybiBiW2RdfHwoYltkXT1kLnJlcGxhY2UoYyxhKSl9fSgpKSxnZW5lcmF0ZU1hcmt1cDpmdW5jdGlvbihkLGMpe3ZhciBoPXRoaXMsYixqLGEsZSxnO2lmKHR5cGVvZiBkPT0ic3RyaW5nIil7Yy5wdXNoKGQpfWVsc2V7aWYoRXh0LmlzQXJyYXkoZCkpe2ZvcihlPTA7ZTxkLmxlbmd0aDtlKyspe2lmKGRbZV0pe2guZ2VuZXJhdGVNYXJrdXAoZFtlXSxjKX19fWVsc2V7YT1kLnRhZ3x8ImRpdiI7Yy5wdXNoKCI8IixhKTtmb3IoYiBpbiBkKXtpZihkLmhhc093blByb3BlcnR5KGIpKXtqPWRbYl07aWYoIWguY29uZlJlLnRlc3QoYikpe2lmKHR5cGVvZiBqPT0ib2JqZWN0Iil7Yy5wdXNoKCIgIixiLCc9IicpO2guZ2VuZXJhdGVTdHlsZXMoaixjKS5wdXNoKCciJyl9ZWxzZXtjLnB1c2goIiAiLGguYXR0cmlidXRlVHJhbnNmb3JtW2JdfHxiLCc9IicsaiwnIicpfX19fWlmKGguZW1wdHlUYWdzLnRlc3QoYSkpe2MucHVzaCgiLz4iKX1lbHNle2MucHVzaCgiPiIpO2lmKChqPWQudHBsKSl7ai5hcHBseU91dChkLnRwbERhdGEsYyl9aWYoKGo9ZC5odG1sKSl7Yy5wdXNoKGopfWlmKChqPWQuY258fGQuY2hpbGRyZW4pKXtoLmdlbmVyYXRlTWFya3VwKGosYyl9Zz1oLmNsb3NlVGFncztjLnB1c2goZ1thXXx8KGdbYV09IjwvIithKyI+IikpfX19cmV0dXJuIGN9LGdlbmVyYXRlU3R5bGVzOmZ1bmN0aW9uKGUsYyl7dmFyIGI9Y3x8W10sZDtmb3IoZCBpbiBlKXtpZihlLmhhc093blByb3BlcnR5KGQpKXtiLnB1c2godGhpcy5kZWNhbWVsaXplTmFtZShkKSwiOiIsZVtkXSwiOyIpfX1yZXR1cm4gY3x8Yi5qb2luKCIiKX0sbWFya3VwOmZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7cmV0dXJuIGF9dmFyIGI9dGhpcy5nZW5lcmF0ZU1hcmt1cChhLFtdKTtyZXR1cm4gYi5qb2luKCIiKX0sYXBwbHlTdHlsZXM6ZnVuY3Rpb24oZCxlKXtpZihlKXt2YXIgYj0wLGEsYztkPUV4dC5mbHkoZCk7aWYodHlwZW9mIGU9PSJmdW5jdGlvbiIpe2U9ZS5jYWxsKCl9aWYodHlwZW9mIGU9PSJzdHJpbmciKXtlPUV4dC51dGlsLkZvcm1hdC50cmltKGUpLnNwbGl0KC9ccyooPzo6fDspXHMqLyk7Zm9yKGE9ZS5sZW5ndGg7YjxhOyl7ZC5zZXRTdHlsZShlW2IrK10sZVtiKytdKX19ZWxzZXtpZihFeHQuaXNPYmplY3QoZSkpe2Quc2V0U3R5bGUoZSl9fX19LGluc2VydEh0bWw6ZnVuY3Rpb24oZyxhLGgpe3ZhciBlPXt9LGMsaixpLGssZCxiO2c9Zy50b0xvd2VyQ2FzZSgpO2UuYmVmb3JlYmVnaW49WyJCZWZvcmVCZWdpbiIsInByZXZpb3VzU2libGluZyJdO2UuYWZ0ZXJlbmQ9WyJBZnRlckVuZCIsIm5leHRTaWJsaW5nIl07aT1hLm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtqPSJzZXRTdGFydCIrKHRoaXMuZW5kUmUudGVzdChnKT8iQWZ0ZXIiOiJCZWZvcmUiKTtpZihlW2ddKXtpW2pdKGEpO2s9aS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaCk7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShrLGc9PSJiZWZvcmViZWdpbiI/YTphLm5leHRTaWJsaW5nKTtyZXR1cm4gYVsoZz09ImJlZm9yZWJlZ2luIj8icHJldmlvdXMiOiJuZXh0IikrIlNpYmxpbmciXX1lbHNle2Q9KGc9PSJhZnRlcmJlZ2luIj8iZmlyc3QiOiJsYXN0IikrIkNoaWxkIjtpZihhLmZpcnN0Q2hpbGQpe2lbal0oYVtkXSk7az1pLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChoKTtpZihnPT0iYWZ0ZXJiZWdpbiIpe2EuaW5zZXJ0QmVmb3JlKGssYS5maXJzdENoaWxkKX1lbHNle2EuYXBwZW5kQ2hpbGQoayl9fWVsc2V7YS5pbm5lckhUTUw9aH1yZXR1cm4gYVtkXX10aHJvdydJbGxlZ2FsIGluc2VydGlvbiBwb2ludCAtPiAiJytnKyciJ30saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGEsYyxiKXtyZXR1cm4gdGhpcy5kb0luc2VydChhLGMsYiwiYmVmb3JlYmVnaW4iKX0saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24oYSxjLGIpe3JldHVybiB0aGlzLmRvSW5zZXJ0KGEsYyxiLCJhZnRlcmVuZCIsIm5leHRTaWJsaW5nIil9LGluc2VydEZpcnN0OmZ1bmN0aW9uKGEsYyxiKXtyZXR1cm4gdGhpcy5kb0luc2VydChhLGMsYiwiYWZ0ZXJiZWdpbiIsImZpcnN0Q2hpbGQiKX0sYXBwZW5kOmZ1bmN0aW9uKGEsYyxiKXtyZXR1cm4gdGhpcy5kb0luc2VydChhLGMsYiwiYmVmb3JlZW5kIiwiIix0cnVlKX0sb3ZlcndyaXRlOmZ1bmN0aW9uKGEsYyxiKXthPUV4dC5nZXREb20oYSk7YS5pbm5lckhUTUw9dGhpcy5tYXJrdXAoYyk7cmV0dXJuIGI/RXh0LmdldChhLmZpcnN0Q2hpbGQpOmEuZmlyc3RDaGlsZH0sZG9JbnNlcnQ6ZnVuY3Rpb24oZCxnLGUsaCxjLGEpe3ZhciBiPXRoaXMuaW5zZXJ0SHRtbChoLEV4dC5nZXREb20oZCksdGhpcy5tYXJrdXAoZykpO3JldHVybiBlP0V4dC5nZXQoYix0cnVlKTpifX0pOyhmdW5jdGlvbigpe3ZhciBhPXdpbmRvdy5kb2N1bWVudCxiPS9eXHMrfFxzKyQvZyxjPS9ccy87aWYoIUV4dC5jYWNoZSl7RXh0LmNhY2hlPXt9fUV4dC5kZWZpbmUoIkV4dC5kb20uQWJzdHJhY3RFbGVtZW50Iix7aW5oZXJpdGFibGVTdGF0aWNzOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIGc9dGhpcyxoPUV4dC5kb20uRWxlbWVudCxkLGosaSxrO2lmKCFlKXtyZXR1cm4gbnVsbH1pZih0eXBlb2YgZT09InN0cmluZyIpe2lmKGU9PUV4dC53aW5kb3dJZCl7cmV0dXJuIGguZ2V0KHdpbmRvdyl9ZWxzZXtpZihlPT1FeHQuZG9jdW1lbnRJZCl7cmV0dXJuIGguZ2V0KGEpfX1kPUV4dC5jYWNoZVtlXTtpZihkJiZkLnNraXBHYXJiYWdlQ29sbGVjdGlvbil7aj1kLmVsO3JldHVybiBqfWlmKCEoaT1hLmdldEVsZW1lbnRCeUlkKGUpKSl7cmV0dXJuIG51bGx9aWYoZCYmZC5lbCl7aj1FeHQudXBkYXRlQ2FjaGVFbnRyeShkLGkpLmVsfWVsc2V7aj1uZXcgaChpLCEhZCl9cmV0dXJuIGp9ZWxzZXtpZihlLnRhZ05hbWUpe2lmKCEoaz1lLmlkKSl7az1FeHQuaWQoZSl9ZD1FeHQuY2FjaGVba107aWYoZCYmZC5lbCl7aj1FeHQudXBkYXRlQ2FjaGVFbnRyeShkLGUpLmVsfWVsc2V7aj1uZXcgaChlLCEhZCl9cmV0dXJuIGp9ZWxzZXtpZihlIGluc3RhbmNlb2YgZyl7aWYoZSE9Zy5kb2NFbCYmZSE9Zy53aW5FbCl7az1lLmlkO2Q9RXh0LmNhY2hlW2tdO2lmKGQpe0V4dC51cGRhdGVDYWNoZUVudHJ5KGQsYS5nZXRFbGVtZW50QnlJZChrKXx8ZS5kb20pfX1yZXR1cm4gZX1lbHNle2lmKGUuaXNDb21wb3NpdGUpe3JldHVybiBlfWVsc2V7aWYoRXh0LmlzQXJyYXkoZSkpe3JldHVybiBnLnNlbGVjdChlKX1lbHNle2lmKGU9PT1hKXtpZighZy5kb2NFbCl7Zy5kb2NFbD1FeHQuT2JqZWN0LmNoYWluKGgucHJvdG90eXBlKTtnLmRvY0VsLmRvbT1hO2cuZG9jRWwuaWQ9RXh0LmlkKGEpO2cuYWRkVG9DYWNoZShnLmRvY0VsKX1yZXR1cm4gZy5kb2NFbH1lbHNle2lmKGU9PT13aW5kb3cpe2lmKCFnLndpbkVsKXtnLndpbkVsPUV4dC5PYmplY3QuY2hhaW4oaC5wcm90b3R5cGUpO2cud2luRWwuZG9tPXdpbmRvdztnLndpbkVsLmlkPUV4dC5pZCh3aW5kb3cpO2cuYWRkVG9DYWNoZShnLndpbkVsKX1yZXR1cm4gZy53aW5FbH19fX19fX1yZXR1cm4gbnVsbH0sYWRkVG9DYWNoZTpmdW5jdGlvbihkLGUpe2lmKGQpe0V4dC5hZGRDYWNoZUVudHJ5KGUsZCl9cmV0dXJuIGR9LGFkZE1ldGhvZHM6ZnVuY3Rpb24oKXt0aGlzLm92ZXJyaWRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbWVyZ2VDbHNMaXN0OmZ1bmN0aW9uKCl7dmFyIG4sbT17fSxrLGQsZyxsLGUsbz1bXSxoPWZhbHNlO2ZvcihrPTAsZD1hcmd1bWVudHMubGVuZ3RoO2s8ZDtrKyspe249YXJndW1lbnRzW2tdO2lmKEV4dC5pc1N0cmluZyhuKSl7bj1uLnJlcGxhY2UoYiwiIikuc3BsaXQoYyl9aWYobil7Zm9yKGc9MCxsPW4ubGVuZ3RoO2c8bDtnKyspe2U9bltnXTtpZighbVtlXSl7aWYoayl7aD10cnVlfW1bZV09dHJ1ZX19fX1mb3IoZSBpbiBtKXtvLnB1c2goZSl9by5jaGFuZ2VkPWg7cmV0dXJuIG99LHJlbW92ZUNsczpmdW5jdGlvbihnLGwpe3ZhciBlPXt9LGgsayxqLGQ9W10sbT1mYWxzZTtpZihnKXtpZihFeHQuaXNTdHJpbmcoZykpe2c9Zy5yZXBsYWNlKGIsIiIpLnNwbGl0KGMpfWZvcihoPTAsaz1nLmxlbmd0aDtoPGs7aCsrKXtlW2dbaF1dPXRydWV9fWlmKGwpe2lmKEV4dC5pc1N0cmluZyhsKSl7bD1sLnNwbGl0KGMpfWZvcihoPTAsaz1sLmxlbmd0aDtoPGs7aCsrKXtqPWxbaF07aWYoZVtqXSl7bT10cnVlO2RlbGV0ZSBlW2pdfX19Zm9yKGogaW4gZSl7ZC5wdXNoKGopfWQuY2hhbmdlZD1tO3JldHVybiBkfSxWSVNJQklMSVRZOjEsRElTUExBWToyLE9GRlNFVFM6MyxBU0NMQVNTOjR9LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGQsZSl7dmFyIGc9dGhpcyxoPXR5cGVvZiBkPT0ic3RyaW5nIj9hLmdldEVsZW1lbnRCeUlkKGQpOmQsaTtpZighaCl7cmV0dXJuIG51bGx9aT1oLmlkO2lmKCFlJiZpJiZFeHQuY2FjaGVbaV0pe3JldHVybiBFeHQuY2FjaGVbaV0uZWx9Zy5kb209aDtnLmlkPWl8fEV4dC5pZChoKTtnLnNlbGYuYWRkVG9DYWNoZShnKX0sc2V0OmZ1bmN0aW9uKGksZSl7dmFyIGc9dGhpcy5kb20sZCxoO2ZvcihkIGluIGkpe2lmKGkuaGFzT3duUHJvcGVydHkoZCkpe2g9aVtkXTtpZihkPT0ic3R5bGUiKXt0aGlzLmFwcGx5U3R5bGVzKGgpfWVsc2V7aWYoZD09ImNscyIpe2cuY2xhc3NOYW1lPWh9ZWxzZXtpZihlIT09ZmFsc2Upe2lmKGg9PT11bmRlZmluZWQpe2cucmVtb3ZlQXR0cmlidXRlKGQpfWVsc2V7Zy5zZXRBdHRyaWJ1dGUoZCxoKX19ZWxzZXtnW2RdPWh9fX19fXJldHVybiB0aGlzfSxkZWZhdWx0VW5pdDoicHgiLGlzOmZ1bmN0aW9uKGQpe3JldHVybiBFeHQuRG9tUXVlcnkuaXModGhpcy5kb20sZCl9LGdldFZhbHVlOmZ1bmN0aW9uKGQpe3ZhciBlPXRoaXMuZG9tLnZhbHVlO3JldHVybiBkP3BhcnNlSW50KGUsMTApOmV9LHJlbW92ZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMsZT1kLmRvbTtpZihlKXtFeHQucmVtb3ZlTm9kZShlKTtkZWxldGUgZC5kb219fSxjb250YWluczpmdW5jdGlvbihkKXtpZighZCl7cmV0dXJuIGZhbHNlfXZhciBlPXRoaXMsZz1kLmRvbXx8ZDtyZXR1cm4oZz09PWUuZG9tKXx8RXh0LmRvbS5BYnN0cmFjdEVsZW1lbnQuaXNBbmNlc3RvcihlLmRvbSxnKX0sZ2V0QXR0cmlidXRlOmZ1bmN0aW9uKGQsZSl7dmFyIGc9dGhpcy5kb207cmV0dXJuIGcuZ2V0QXR0cmlidXRlTlMoZSxkKXx8Zy5nZXRBdHRyaWJ1dGUoZSsiOiIrZCl8fGcuZ2V0QXR0cmlidXRlKGQpfHxnW2RdfSx1cGRhdGU6ZnVuY3Rpb24oZCl7aWYodGhpcy5kb20pe3RoaXMuZG9tLmlubmVySFRNTD1kfXJldHVybiB0aGlzfSxzZXRIVE1MOmZ1bmN0aW9uKGQpe2lmKHRoaXMuZG9tKXt0aGlzLmRvbS5pbm5lckhUTUw9ZH1yZXR1cm4gdGhpc30sZ2V0SFRNTDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbT90aGlzLmRvbS5pbm5lckhUTUw6IiJ9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLnNldFZpc2libGUoZmFsc2UpO3JldHVybiB0aGlzfSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5zZXRWaXNpYmxlKHRydWUpO3JldHVybiB0aGlzfSxzZXRWaXNpYmxlOmZ1bmN0aW9uKGosZCl7dmFyIGU9dGhpcyxpPWUuc2VsZixoPWUuZ2V0VmlzaWJpbGl0eU1vZGUoKSxnPUV4dC5iYXNlQ1NTUHJlZml4O3N3aXRjaChoKXtjYXNlIGkuVklTSUJJTElUWTplLnJlbW92ZUNscyhbZysiaGlkZGVuLWRpc3BsYXkiLGcrImhpZGRlbi1vZmZzZXRzIl0pO2Vbaj8icmVtb3ZlQ2xzIjoiYWRkQ2xzIl0oZysiaGlkZGVuLXZpc2liaWxpdHkiKTticmVhaztjYXNlIGkuRElTUExBWTplLnJlbW92ZUNscyhbZysiaGlkZGVuLXZpc2liaWxpdHkiLGcrImhpZGRlbi1vZmZzZXRzIl0pO2Vbaj8icmVtb3ZlQ2xzIjoiYWRkQ2xzIl0oZysiaGlkZGVuLWRpc3BsYXkiKTticmVhaztjYXNlIGkuT0ZGU0VUUzplLnJlbW92ZUNscyhbZysiaGlkZGVuLXZpc2liaWxpdHkiLGcrImhpZGRlbi1kaXNwbGF5Il0pO2Vbaj8icmVtb3ZlQ2xzIjoiYWRkQ2xzIl0oZysiaGlkZGVuLW9mZnNldHMiKTticmVha31yZXR1cm4gZX0sZ2V0VmlzaWJpbGl0eU1vZGU6ZnVuY3Rpb24oKXt2YXIgZT0odGhpcy4kY2FjaGV8fHRoaXMuZ2V0Q2FjaGUoKSkuZGF0YSxkPWUudmlzaWJpbGl0eU1vZGU7aWYoZD09PXVuZGVmaW5lZCl7ZS52aXNpYmlsaXR5TW9kZT1kPXRoaXMuc2VsZi5ESVNQTEFZfXJldHVybiBkfSxzZXRWaXNpYmlsaXR5TW9kZTpmdW5jdGlvbihkKXsodGhpcy4kY2FjaGV8fHRoaXMuZ2V0Q2FjaGUoKSkuZGF0YS52aXNpYmlsaXR5TW9kZT1kO3JldHVybiB0aGlzfSxnZXRDYWNoZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMsZT1kLmRvbS5pZHx8RXh0LmlkKGQuZG9tKTtkLiRjYWNoZT1FeHQuY2FjaGVbZV18fEV4dC5hZGRDYWNoZUVudHJ5KGUsbnVsbCxkLmRvbSk7cmV0dXJuIGQuJGNhY2hlfX0sZnVuY3Rpb24oKXt2YXIgZD10aGlzO0V4dC5nZXREZXRhY2hlZEJvZHk9ZnVuY3Rpb24oKXt2YXIgZT1kLmRldGFjaGVkQm9keUVsO2lmKCFlKXtlPWEuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZC5kZXRhY2hlZEJvZHlFbD1lPW5ldyBkLkZseShlKTtlLmlzRGV0YWNoZWRCb2R5PXRydWV9cmV0dXJuIGV9O0V4dC5nZXRFbGVtZW50QnlJZD1mdW5jdGlvbihoKXt2YXIgZz1hLmdldEVsZW1lbnRCeUlkKGgpLGU7aWYoIWcmJihlPWQuZGV0YWNoZWRCb2R5RWwpKXtnPWUuZG9tLnF1ZXJ5U2VsZWN0b3IoIiMiK0V4dC5lc2NhcGVJZChoKSl9cmV0dXJuIGd9O0V4dC5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIEV4dC5kb20uRWxlbWVudC5nZXQoZSl9O3RoaXMuYWRkU3RhdGljcyh7Rmx5Om5ldyBFeHQuQ2xhc3Moe2V4dGVuZDpkLGlzRmx5OnRydWUsY29uc3RydWN0b3I6ZnVuY3Rpb24oZSl7dGhpcy5kb209ZX0sYXR0YWNoOmZ1bmN0aW9uKGUpe3RoaXMuZG9tPWU7dGhpcy4kY2FjaGU9ZS5pZD9FeHQuY2FjaGVbZS5pZF06bnVsbDtyZXR1cm4gdGhpc319KSxfZmx5d2VpZ2h0czp7fSxmbHk6ZnVuY3Rpb24oaSxnKXt2YXIgaD1udWxsLGU9ZC5fZmx5d2VpZ2h0cztnPWd8fCJfZ2xvYmFsIjtpPUV4dC5nZXREb20oaSk7aWYoaSl7aD1lW2ddfHwoZVtnXT1uZXcgZC5GbHkoKSk7aC5kb209aTtoLiRjYWNoZT1pLmlkP0V4dC5jYWNoZVtpLmlkXTpudWxsfXJldHVybiBofX0pO0V4dC5mbHk9ZnVuY3Rpb24oKXtyZXR1cm4gZC5mbHkuYXBwbHkoZCxhcmd1bWVudHMpfTsoZnVuY3Rpb24oZSl7ZS5kZXN0cm95PWUucmVtb3ZlO2lmKGEucXVlcnlTZWxlY3Rvcil7ZS5nZXRCeUlkPWZ1bmN0aW9uKGksZyl7dmFyIGg9YS5nZXRFbGVtZW50QnlJZChpKXx8dGhpcy5kb20ucXVlcnlTZWxlY3RvcigiIyIrRXh0LmVzY2FwZUlkKGkpKTtyZXR1cm4gZz9oOihoP0V4dC5nZXQoaCk6bnVsbCl9fWVsc2V7ZS5nZXRCeUlkPWZ1bmN0aW9uKGksZyl7dmFyIGg9YS5nZXRFbGVtZW50QnlJZChpKTtyZXR1cm4gZz9oOihoP0V4dC5nZXQoaCk6bnVsbCl9fX0odGhpcy5wcm90b3R5cGUpKX0pfSgpKTtFeHQuZG9tLkFic3RyYWN0RWxlbWVudC5hZGRJbmhlcml0YWJsZVN0YXRpY3Moe3VuaXRSZTovXGQrKHB4fGVtfCV8ZW58ZXh8cHR8aW58Y218bW18cGMpJC9pLGNhbWVsUmU6LygtW2Etel0pL2dpLGNzc1JlOi8oW2EtejAtOVwtXSspXHMqOlxzKihbXjtcc10rKD86XHMqW147XHNdKykqKTs/L2dpLG9wYWNpdHlSZTovYWxwaGFcKG9wYWNpdHk9KC4qKVwpL2kscHJvcGVydHlDYWNoZTp7fSxkZWZhdWx0VW5pdDoicHgiLGJvcmRlcnM6e2w6ImJvcmRlci1sZWZ0LXdpZHRoIixyOiJib3JkZXItcmlnaHQtd2lkdGgiLHQ6ImJvcmRlci10b3Atd2lkdGgiLGI6ImJvcmRlci1ib3R0b20td2lkdGgifSxwYWRkaW5nczp7bDoicGFkZGluZy1sZWZ0IixyOiJwYWRkaW5nLXJpZ2h0Iix0OiJwYWRkaW5nLXRvcCIsYjoicGFkZGluZy1ib3R0b20ifSxtYXJnaW5zOntsOiJtYXJnaW4tbGVmdCIscjoibWFyZ2luLXJpZ2h0Iix0OiJtYXJnaW4tdG9wIixiOiJtYXJnaW4tYm90dG9tIn0sYWRkVW5pdHM6ZnVuY3Rpb24oYixhKXtpZih0eXBlb2YgYj09Im51bWJlciIpe3JldHVybiBiKyhhfHx0aGlzLmRlZmF1bHRVbml0fHwicHgiKX1pZihiPT09IiJ8fGI9PSJhdXRvInx8Yj09PXVuZGVmaW5lZHx8Yj09PW51bGwpe3JldHVybiBifHwiIn1pZighdGhpcy51bml0UmUudGVzdChiKSl7cmV0dXJuIGJ8fCIifXJldHVybiBifSxpc0FuY2VzdG9yOmZ1bmN0aW9uKGIsZCl7dmFyIGE9ZmFsc2U7Yj1FeHQuZ2V0RG9tKGIpO2Q9RXh0LmdldERvbShkKTtpZihiJiZkKXtpZihiLmNvbnRhaW5zKXtyZXR1cm4gYi5jb250YWlucyhkKX1lbHNle2lmKGIuY29tcGFyZURvY3VtZW50UG9zaXRpb24pe3JldHVybiAhIShiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpJjE2KX1lbHNle3doaWxlKChkPWQucGFyZW50Tm9kZSkpe2E9ZD09Ynx8YX19fX1yZXR1cm4gYX0scGFyc2VCb3g6ZnVuY3Rpb24oYil7aWYodHlwZW9mIGIhPSJzdHJpbmciKXtiPWIudG9TdHJpbmcoKX12YXIgYz1iLnNwbGl0KCIgIiksYT1jLmxlbmd0aDtpZihhPT0xKXtjWzFdPWNbMl09Y1szXT1jWzBdfWVsc2V7aWYoYT09Mil7Y1syXT1jWzBdO2NbM109Y1sxXX1lbHNle2lmKGE9PTMpe2NbM109Y1sxXX19fXJldHVybnt0b3A6cGFyc2VGbG9hdChjWzBdKXx8MCxyaWdodDpwYXJzZUZsb2F0KGNbMV0pfHwwLGJvdHRvbTpwYXJzZUZsb2F0KGNbMl0pfHwwLGxlZnQ6cGFyc2VGbG9hdChjWzNdKXx8MH19LHVuaXRpemVCb3g6ZnVuY3Rpb24oZyxlKXt2YXIgZD10aGlzLmFkZFVuaXRzLGM9dGhpcy5wYXJzZUJveChnKTtyZXR1cm4gZChjLnRvcCxlKSsiICIrZChjLnJpZ2h0LGUpKyIgIitkKGMuYm90dG9tLGUpKyIgIitkKGMubGVmdCxlKX0sY2FtZWxSZXBsYWNlRm46ZnVuY3Rpb24oYixjKXtyZXR1cm4gYy5jaGFyQXQoMSkudG9VcHBlckNhc2UoKX0sbm9ybWFsaXplOmZ1bmN0aW9uKGEpe2lmKGE9PSJmbG9hdCIpe2E9RXh0LnN1cHBvcnRzLkZsb2F0PyJjc3NGbG9hdCI6InN0eWxlRmxvYXQifXJldHVybiB0aGlzLnByb3BlcnR5Q2FjaGVbYV18fCh0aGlzLnByb3BlcnR5Q2FjaGVbYV09YS5yZXBsYWNlKHRoaXMuY2FtZWxSZSx0aGlzLmNhbWVsUmVwbGFjZUZuKSl9LGdldERvY3VtZW50SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KCFFeHQuaXNTdHJpY3Q/ZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQ6ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCx0aGlzLmdldFZpZXdwb3J0SGVpZ2h0KCkpfSxnZXREb2N1bWVudFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KCFFeHQuaXNTdHJpY3Q/ZG9jdW1lbnQuYm9keS5zY3JvbGxXaWR0aDpkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGgsdGhpcy5nZXRWaWV3cG9ydFdpZHRoKCkpfSxnZXRWaWV3cG9ydEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB3aW5kb3cuaW5uZXJIZWlnaHR9LGdldFZpZXdwb3J0V2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LmlubmVyV2lkdGh9LGdldFZpZXdTaXplOmZ1bmN0aW9uKCl7cmV0dXJue3dpZHRoOndpbmRvdy5pbm5lcldpZHRoLGhlaWdodDp3aW5kb3cuaW5uZXJIZWlnaHR9fSxnZXRPcmllbnRhdGlvbjpmdW5jdGlvbigpe2lmKEV4dC5zdXBwb3J0cy5PcmllbnRhdGlvbkNoYW5nZSl7cmV0dXJuKHdpbmRvdy5vcmllbnRhdGlvbj09MCk/InBvcnRyYWl0IjoibGFuZHNjYXBlIn1yZXR1cm4od2luZG93LmlubmVySGVpZ2h0PndpbmRvdy5pbm5lcldpZHRoKT8icG9ydHJhaXQiOiJsYW5kc2NhcGUifSxmcm9tUG9pbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRXh0LmdldChkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGEsYikpfSxwYXJzZVN0eWxlczpmdW5jdGlvbihjKXt2YXIgYT17fSxiPXRoaXMuY3NzUmUsZDtpZihjKXtiLmxhc3RJbmRleD0wO3doaWxlKChkPWIuZXhlYyhjKSkpe2FbZFsxXV09ZFsyXX19cmV0dXJuIGF9fSk7KGZ1bmN0aW9uKCl7dmFyIGc9ZG9jdW1lbnQsYT1FeHQuZG9tLkFic3RyYWN0RWxlbWVudCxlPW51bGwsZD1nLmNvbXBhdE1vZGU9PSJDU1MxQ29tcGF0IixjLGI9ZnVuY3Rpb24oaSl7aWYoIWMpe2M9bmV3IGEuRmx5KCl9Yy5hdHRhY2goaSk7cmV0dXJuIGN9O2lmKCEoImFjdGl2ZUVsZW1lbnQiIGluIGcpJiZnLmFkZEV2ZW50TGlzdGVuZXIpe2cuYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLGZ1bmN0aW9uKGkpe2lmKGkmJmkudGFyZ2V0KXtlPShpLnRhcmdldD09Zyk/bnVsbDppLnRhcmdldH19LHRydWUpfWZ1bmN0aW9uIGgoaixrLGkpe3JldHVybiBmdW5jdGlvbigpe2ouc2VsZWN0aW9uU3RhcnQ9aztqLnNlbGVjdGlvbkVuZD1pfX1hLmFkZEluaGVyaXRhYmxlU3RhdGljcyh7Z2V0QWN0aXZlRWxlbWVudDpmdW5jdGlvbigpe3JldHVybiBnLmFjdGl2ZUVsZW1lbnR8fGV9LGdldFJpZ2h0TWFyZ2luRml4Q2xlYW5lcjpmdW5jdGlvbihuKXt2YXIgaz1FeHQuc3VwcG9ydHMsbD1rLkRpc3BsYXlDaGFuZ2VJbnB1dFNlbGVjdGlvbkJ1ZyxtPWsuRGlzcGxheUNoYW5nZVRleHRBcmVhU2VsZWN0aW9uQnVnLG8saSxwLGo7aWYobHx8bSl7bz1nLmFjdGl2ZUVsZW1lbnR8fGU7aT1vJiZvLnRhZ05hbWU7aWYoKG0mJmk9PSJURVhUQVJFQSIpfHwobCYmaT09IklOUFVUIiYmby50eXBlPT0idGV4dCIpKXtpZihFeHQuZG9tLkVsZW1lbnQuaXNBbmNlc3RvcihuLG8pKXtwPW8uc2VsZWN0aW9uU3RhcnQ7aj1vLnNlbGVjdGlvbkVuZDtpZihFeHQuaXNOdW1iZXIocCkmJkV4dC5pc051bWJlcihqKSl7cmV0dXJuIGgobyxwLGopfX19fXJldHVybiBFeHQuZW1wdHlGbn0sZ2V0Vmlld1dpZHRoOmZ1bmN0aW9uKGkpe3JldHVybiBpP0V4dC5kb20uRWxlbWVudC5nZXREb2N1bWVudFdpZHRoKCk6RXh0LmRvbS5FbGVtZW50LmdldFZpZXdwb3J0V2lkdGgoKX0sZ2V0Vmlld0hlaWdodDpmdW5jdGlvbihpKXtyZXR1cm4gaT9FeHQuZG9tLkVsZW1lbnQuZ2V0RG9jdW1lbnRIZWlnaHQoKTpFeHQuZG9tLkVsZW1lbnQuZ2V0Vmlld3BvcnRIZWlnaHQoKX0sZ2V0RG9jdW1lbnRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXgoIWQ/Zy5ib2R5LnNjcm9sbEhlaWdodDpnLmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsRXh0LmRvbS5FbGVtZW50LmdldFZpZXdwb3J0SGVpZ2h0KCkpfSxnZXREb2N1bWVudFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KCFkP2cuYm9keS5zY3JvbGxXaWR0aDpnLmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCxFeHQuZG9tLkVsZW1lbnQuZ2V0Vmlld3BvcnRXaWR0aCgpKX0sZ2V0Vmlld3BvcnRIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmlzSUU/KEV4dC5pc1N0cmljdD9nLmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ6Zy5ib2R5LmNsaWVudEhlaWdodCk6c2VsZi5pbm5lckhlaWdodH0sZ2V0Vmlld3BvcnRXaWR0aDpmdW5jdGlvbigpe3JldHVybighRXh0LmlzU3RyaWN0JiYhRXh0LmlzT3BlcmEpP2cuYm9keS5jbGllbnRXaWR0aDpFeHQuaXNJRT9nLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDpzZWxmLmlubmVyV2lkdGh9LGdldFk6ZnVuY3Rpb24oaSl7cmV0dXJuIEV4dC5kb20uRWxlbWVudC5nZXRYWShpKVsxXX0sZ2V0WDpmdW5jdGlvbihpKXtyZXR1cm4gRXh0LmRvbS5FbGVtZW50LmdldFhZKGkpWzBdfSxnZXRYWTpmdW5jdGlvbihrKXt2YXIgbj1nLmJvZHksaj1nLmRvY3VtZW50RWxlbWVudCxpPTAsbD0wLG89WzAsMF0scj1NYXRoLnJvdW5kLG0scTtrPUV4dC5nZXREb20oayk7aWYoayE9ZyYmayE9bil7aWYoRXh0LmlzSUUpe3RyeXttPWsuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7bD1qLmNsaWVudFRvcHx8bi5jbGllbnRUb3A7aT1qLmNsaWVudExlZnR8fG4uY2xpZW50TGVmdH1jYXRjaChwKXttPXtsZWZ0OjAsdG9wOjB9fX1lbHNle209ay5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX1xPWIoZG9jdW1lbnQpLmdldFNjcm9sbCgpO289W3IobS5sZWZ0K3EubGVmdC1pKSxyKG0udG9wK3EudG9wLWwpXX1yZXR1cm4gb30sc2V0WFk6ZnVuY3Rpb24oaixrKXsoaj1FeHQuZmx5KGosIl9zZXRYWSIpKS5wb3NpdGlvbigpO3ZhciBsPWoudHJhbnNsYXRlUG9pbnRzKGspLGk9ai5kb20uc3R5bGUsbTtmb3IobSBpbiBsKXtpZighaXNOYU4obFttXSkpe2lbbV09bFttXSsicHgifX19LHNldFg6ZnVuY3Rpb24oaixpKXtFeHQuZG9tLkVsZW1lbnQuc2V0WFkoaixbaSxmYWxzZV0pfSxzZXRZOmZ1bmN0aW9uKGksail7RXh0LmRvbS5FbGVtZW50LnNldFhZKGksW2ZhbHNlLGpdKX0sc2VyaWFsaXplRm9ybTpmdW5jdGlvbihrKXt2YXIgbD1rLmVsZW1lbnRzfHwoZG9jdW1lbnQuZm9ybXNba118fEV4dC5nZXREb20oaykpLmVsZW1lbnRzLHY9ZmFsc2UsdT1lbmNvZGVVUklDb21wb25lbnQscD0iIixuPWwubGVuZ3RoLHEsaSx0LHgsdyxyLG0scyxqO2ZvcihyPTA7cjxuO3IrKyl7cT1sW3JdO2k9cS5uYW1lO3Q9cS50eXBlO3g9cS5vcHRpb25zO2lmKCFxLmRpc2FibGVkJiZpKXtpZigvc2VsZWN0LShvbmV8bXVsdGlwbGUpL2kudGVzdCh0KSl7cz14Lmxlbmd0aDtmb3IobT0wO208czttKyspe2o9eFttXTtpZihqLnNlbGVjdGVkKXt3PWouaGFzQXR0cmlidXRlP2ouaGFzQXR0cmlidXRlKCJ2YWx1ZSIpOmouZ2V0QXR0cmlidXRlTm9kZSgidmFsdWUiKS5zcGVjaWZpZWQ7cCs9RXh0LlN0cmluZy5mb3JtYXQoInswfT17MX0mIix1KGkpLHUodz9qLnZhbHVlOmoudGV4dCkpfX19ZWxzZXtpZighKC9maWxlfHVuZGVmaW5lZHxyZXNldHxidXR0b24vaS50ZXN0KHQpKSl7aWYoISgvcmFkaW98Y2hlY2tib3gvaS50ZXN0KHQpJiYhcS5jaGVja2VkKSYmISh0PT0ic3VibWl0IiYmdikpe3ArPXUoaSkrIj0iK3UocS52YWx1ZSkrIiYiO3Y9L3N1Ym1pdC9pLnRlc3QodCl9fX19fXJldHVybiBwLnN1YnN0cigwLHAubGVuZ3RoLTEpfX0pfSgpKTtFeHQuZG9tLkFic3RyYWN0RWxlbWVudC5vdmVycmlkZSh7Z2V0QW5jaG9yWFk6ZnVuY3Rpb24oZyxrLG4pe2c9KGd8fCJ0bCIpLnRvTG93ZXJDYXNlKCk7bj1ufHx7fTt2YXIgaj10aGlzLGE9ai5kb209PWRvY3VtZW50LmJvZHl8fGouZG9tPT1kb2N1bWVudCxiPW4ud2lkdGh8fGE/d2luZG93LmlubmVyV2lkdGg6ai5nZXRXaWR0aCgpLGw9bi5oZWlnaHR8fGE/d2luZG93LmlubmVySGVpZ2h0OmouZ2V0SGVpZ2h0KCksbSxjPU1hdGgucm91bmQsZD1qLmdldFhZKCksaT1hPzA6IWs/ZFswXTowLGg9YT8wOiFrP2RbMV06MCxlPXtjOltjKGIqMC41KSxjKGwqMC41KV0sdDpbYyhiKjAuNSksMF0sbDpbMCxjKGwqMC41KV0scjpbYixjKGwqMC41KV0sYjpbYyhiKjAuNSksbF0sdGw6WzAsMF0sYmw6WzAsbF0sYnI6W2IsbF0sdHI6W2IsMF19O209ZVtnXTtyZXR1cm5bbVswXStpLG1bMV0raF19LGFsaWduVG9SZTovXihbYS16XSspLShbYS16XSspKFw/KT8kLyxnZXRBbGlnblRvWFk6ZnVuY3Rpb24oZSx6LGkscyl7cz0hIXM7ZT1FeHQuZ2V0KGUpO2k9aXx8WzAsMF07aWYoIXp8fHo9PSI/Iil7ej0idGwtYmw/In1lbHNle2lmKCEoLy0vKS50ZXN0KHopJiZ6IT09IiIpe3o9InRsLSIren19ej16LnRvTG93ZXJDYXNlKCk7dmFyIHY9dGhpcyxkPXoubWF0Y2godGhpcy5hbGlnblRvUmUpLG49d2luZG93LmlubmVyV2lkdGgsdT13aW5kb3cuaW5uZXJIZWlnaHQsYz0iIixiPSIiLEEsdyxtLGwscSxvLGcsYSxrLGoscixwLGgsdDtpZighZCl7dGhyb3ciRWxlbWVudC5hbGlnblRvIHdpdGggYW4gaW52YWxpZCBhbGlnbm1lbnQgIit6fWM9ZFsxXTtiPWRbMl07dD0hIWRbM107QT12LmdldEFuY2hvclhZKGMsdHJ1ZSk7dz1lLmdldEFuY2hvclhZKGIscyk7bT13WzBdLUFbMF0raVswXTtsPXdbMV0tQVsxXStpWzFdO2lmKHQpe3I9di5nZXRXaWR0aCgpO3A9di5nZXRIZWlnaHQoKTtoPWUuZ2V0UGFnZUJveCgpO2E9Yy5jaGFyQXQoMCk7Zz1jLmNoYXJBdChjLmxlbmd0aC0xKTtqPWIuY2hhckF0KDApO2s9Yi5jaGFyQXQoYi5sZW5ndGgtMSk7bz0oKGE9PSJ0IiYmaj09ImIiKXx8KGE9PSJiIiYmaj09InQiKSk7cT0oKGc9PSJyIiYmaz09ImwiKXx8KGc9PSJsIiYmaz09InIiKSk7aWYobStyPm4pe209cT9oLmxlZnQtcjpuLXJ9aWYobTwwKXttPXE/aC5yaWdodDowfWlmKGwrcD51KXtsPW8/aC50b3AtcDp1LXB9aWYobDwwKXtsPW8/aC5ib3R0b206MH19cmV0dXJuW20sbF19LGdldEFuY2hvcjpmdW5jdGlvbigpe3ZhciBiPSh0aGlzLiRjYWNoZXx8dGhpcy5nZXRDYWNoZSgpKS5kYXRhLGE7aWYoIXRoaXMuZG9tKXtyZXR1cm59YT1iLl9hbmNob3I7aWYoIWEpe2E9Yi5fYW5jaG9yPXt9fXJldHVybiBhfSxhZGp1c3RGb3JDb25zdHJhaW50czpmdW5jdGlvbihjLGIpe3ZhciBhPXRoaXMuZ2V0Q29uc3RyYWluVmVjdG9yKGIsYyk7aWYoYSl7Y1swXSs9YVswXTtjWzFdKz1hWzFdfXJldHVybiBjfX0pO0V4dC5kb20uQWJzdHJhY3RFbGVtZW50LmFkZE1ldGhvZHMoe2FwcGVuZENoaWxkOmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuZ2V0KGEpLmFwcGVuZFRvKHRoaXMpfSxhcHBlbmRUbzpmdW5jdGlvbihhKXtFeHQuZ2V0RG9tKGEpLmFwcGVuZENoaWxkKHRoaXMuZG9tKTtyZXR1cm4gdGhpc30saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGEpe2E9RXh0LmdldERvbShhKTthLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuZG9tLGEpO3JldHVybiB0aGlzfSxpbnNlcnRBZnRlcjpmdW5jdGlvbihhKXthPUV4dC5nZXREb20oYSk7YS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmRvbSxhLm5leHRTaWJsaW5nKTtyZXR1cm4gdGhpc30saW5zZXJ0Rmlyc3Q6ZnVuY3Rpb24oYixhKXtiPWJ8fHt9O2lmKGIubm9kZVR5cGV8fGIuZG9tfHx0eXBlb2YgYj09InN0cmluZyIpe2I9RXh0LmdldERvbShiKTt0aGlzLmRvbS5pbnNlcnRCZWZvcmUoYix0aGlzLmRvbS5maXJzdENoaWxkKTtyZXR1cm4gIWE/RXh0LmdldChiKTpifWVsc2V7cmV0dXJuIHRoaXMuY3JlYXRlQ2hpbGQoYix0aGlzLmRvbS5maXJzdENoaWxkLGEpfX0saW5zZXJ0U2libGluZzpmdW5jdGlvbihiLGcsail7dmFyIGk9dGhpcyxrPShnfHwiYmVmb3JlIikudG9Mb3dlckNhc2UoKT09ImFmdGVyIixkLGEsYyxoO2lmKEV4dC5pc0FycmF5KGIpKXthPWk7Yz1iLmxlbmd0aDtmb3IoaD0wO2g8YztoKyspe2Q9RXh0LmZseShhLCJfaW50ZXJuYWwiKS5pbnNlcnRTaWJsaW5nKGJbaF0sZyxqKTtpZihrKXthPWR9fXJldHVybiBkfWI9Ynx8e307aWYoYi5ub2RlVHlwZXx8Yi5kb20pe2Q9aS5kb20ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoRXh0LmdldERvbShiKSxrP2kuZG9tLm5leHRTaWJsaW5nOmkuZG9tKTtpZighail7ZD1FeHQuZ2V0KGQpfX1lbHNle2lmKGsmJiFpLmRvbS5uZXh0U2libGluZyl7ZD1FeHQuY29yZS5Eb21IZWxwZXIuYXBwZW5kKGkuZG9tLnBhcmVudE5vZGUsYiwhail9ZWxzZXtkPUV4dC5jb3JlLkRvbUhlbHBlcltrPyJpbnNlcnRBZnRlciI6Imluc2VydEJlZm9yZSJdKGkuZG9tLGIsIWopfX1yZXR1cm4gZH0scmVwbGFjZTpmdW5jdGlvbihhKXthPUV4dC5nZXQoYSk7dGhpcy5pbnNlcnRCZWZvcmUoYSk7YS5yZW1vdmUoKTtyZXR1cm4gdGhpc30scmVwbGFjZVdpdGg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihhLm5vZGVUeXBlfHxhLmRvbXx8dHlwZW9mIGE9PSJzdHJpbmciKXthPUV4dC5nZXQoYSk7Yi5kb20ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSxiLmRvbSl9ZWxzZXthPUV4dC5jb3JlLkRvbUhlbHBlci5pbnNlcnRCZWZvcmUoYi5kb20sYSl9ZGVsZXRlIEV4dC5jYWNoZVtiLmlkXTtFeHQucmVtb3ZlTm9kZShiLmRvbSk7Yi5pZD1FeHQuaWQoYi5kb209YSk7RXh0LmRvbS5BYnN0cmFjdEVsZW1lbnQuYWRkVG9DYWNoZShiLmlzRmx5d2VpZ2h0P25ldyBFeHQuZG9tLkFic3RyYWN0RWxlbWVudChiLmRvbSk6Yik7cmV0dXJuIGJ9LGNyZWF0ZUNoaWxkOmZ1bmN0aW9uKGIsYSxjKXtiPWJ8fHt0YWc6ImRpdiJ9O2lmKGEpe3JldHVybiBFeHQuY29yZS5Eb21IZWxwZXIuaW5zZXJ0QmVmb3JlKGEsYixjIT09dHJ1ZSl9ZWxzZXtyZXR1cm4gRXh0LmNvcmUuRG9tSGVscGVyWyF0aGlzLmRvbS5maXJzdENoaWxkPyJpbnNlcnRGaXJzdCI6ImFwcGVuZCJdKHRoaXMuZG9tLGIsYyE9PXRydWUpfX0sd3JhcDpmdW5jdGlvbihiLGMsYSl7dmFyIGU9RXh0LmNvcmUuRG9tSGVscGVyLmluc2VydEJlZm9yZSh0aGlzLmRvbSxifHx7dGFnOiJkaXYifSx0cnVlKSxkPWU7aWYoYSl7ZD1FeHQuRG9tUXVlcnkuc2VsZWN0Tm9kZShhLGUuZG9tKX1kLmFwcGVuZENoaWxkKHRoaXMuZG9tKTtyZXR1cm4gYz9lLmRvbTplfSxpbnNlcnRIdG1sOmZ1bmN0aW9uKGIsYyxhKXt2YXIgZD1FeHQuY29yZS5Eb21IZWxwZXIuaW5zZXJ0SHRtbChiLHRoaXMuZG9tLGMpO3JldHVybiBhP0V4dC5nZXQoZCk6ZH19KTsoZnVuY3Rpb24oKXt2YXIgYT1FeHQuZG9tLkFic3RyYWN0RWxlbWVudDthLm92ZXJyaWRlKHtnZXRYOmZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmdldFhZKGIpWzBdfSxnZXRZOmZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmdldFhZKGIpWzFdfSxnZXRYWTpmdW5jdGlvbigpe3ZhciBiPXdpbmRvdy53ZWJraXRDb252ZXJ0UG9pbnRGcm9tTm9kZVRvUGFnZSh0aGlzLmRvbSxuZXcgV2ViS2l0UG9pbnQoMCwwKSk7cmV0dXJuW2IueCxiLnldfSxnZXRPZmZzZXRzVG86ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcy5nZXRYWSgpLGM9RXh0LmZseShiLCJfaW50ZXJuYWwiKS5nZXRYWSgpO3JldHVybltkWzBdLWNbMF0sZFsxXS1jWzFdXX0sc2V0WDpmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5zZXRYWShbYix0aGlzLmdldFkoKV0pfSxzZXRZOmZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnNldFhZKFt0aGlzLmdldFgoKSxiXSl9LHNldExlZnQ6ZnVuY3Rpb24oYil7dGhpcy5zZXRTdHlsZSgibGVmdCIsYS5hZGRVbml0cyhiKSk7cmV0dXJuIHRoaXN9LHNldFRvcDpmdW5jdGlvbihiKXt0aGlzLnNldFN0eWxlKCJ0b3AiLGEuYWRkVW5pdHMoYikpO3JldHVybiB0aGlzfSxzZXRSaWdodDpmdW5jdGlvbihiKXt0aGlzLnNldFN0eWxlKCJyaWdodCIsYS5hZGRVbml0cyhiKSk7cmV0dXJuIHRoaXN9LHNldEJvdHRvbTpmdW5jdGlvbihiKXt0aGlzLnNldFN0eWxlKCJib3R0b20iLGEuYWRkVW5pdHMoYikpO3JldHVybiB0aGlzfSxzZXRYWTpmdW5jdGlvbihnKXt2YXIgYz10aGlzLGUsYixkO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7Zz1bZyxhcmd1bWVudHNbMV1dfWU9Yy50cmFuc2xhdGVQb2ludHMoZyk7Yj1jLmRvbS5zdHlsZTtmb3IoZCBpbiBlKXtpZighZS5oYXNPd25Qcm9wZXJ0eShkKSl7Y29udGludWV9aWYoIWlzTmFOKGVbZF0pKXtiW2RdPWVbZF0rInB4In19cmV0dXJuIGN9LGdldExlZnQ6ZnVuY3Rpb24oYil7cmV0dXJuIHBhcnNlSW50KHRoaXMuZ2V0U3R5bGUoImxlZnQiKSwxMCl8fDB9LGdldFJpZ2h0OmZ1bmN0aW9uKGIpe3JldHVybiBwYXJzZUludCh0aGlzLmdldFN0eWxlKCJyaWdodCIpLDEwKXx8MH0sZ2V0VG9wOmZ1bmN0aW9uKGIpe3JldHVybiBwYXJzZUludCh0aGlzLmdldFN0eWxlKCJ0b3AiKSwxMCl8fDB9LGdldEJvdHRvbTpmdW5jdGlvbihiKXtyZXR1cm4gcGFyc2VJbnQodGhpcy5nZXRTdHlsZSgiYm90dG9tIiksMTApfHwwfSx0cmFuc2xhdGVQb2ludHM6ZnVuY3Rpb24oYixpKXtpPWlzTmFOKGJbMV0pP2k6YlsxXTtiPWlzTmFOKGJbMF0pP2I6YlswXTt2YXIgZT10aGlzLGc9ZS5pc1N0eWxlKCJwb3NpdGlvbiIsInJlbGF0aXZlIiksaD1lLmdldFhZKCksYz1wYXJzZUludChlLmdldFN0eWxlKCJsZWZ0IiksMTApLGQ9cGFyc2VJbnQoZS5nZXRTdHlsZSgidG9wIiksMTApO2M9IWlzTmFOKGMpP2M6KGc/MDplLmRvbS5vZmZzZXRMZWZ0KTtkPSFpc05hTihkKT9kOihnPzA6ZS5kb20ub2Zmc2V0VG9wKTtyZXR1cm57bGVmdDooYi1oWzBdK2MpLHRvcDooaS1oWzFdK2QpfX0sc2V0Qm94OmZ1bmN0aW9uKGUpe3ZhciBkPXRoaXMsYz1lLndpZHRoLGI9ZS5oZWlnaHQsaD1lLnRvcCxnPWUubGVmdDtpZihnIT09dW5kZWZpbmVkKXtkLnNldExlZnQoZyl9aWYoaCE9PXVuZGVmaW5lZCl7ZC5zZXRUb3AoaCl9aWYoYyE9PXVuZGVmaW5lZCl7ZC5zZXRXaWR0aChjKX1pZihiIT09dW5kZWZpbmVkKXtkLnNldEhlaWdodChiKX1yZXR1cm4gdGhpc30sZ2V0Qm94OmZ1bmN0aW9uKGksbSl7dmFyIGo9dGhpcyxnPWouZG9tLGQ9Zy5vZmZzZXRXaWR0aCxuPWcub2Zmc2V0SGVpZ2h0LHAsaCxlLGMsbyxrO2lmKCFtKXtwPWouZ2V0WFkoKX1lbHNle2lmKGkpe3A9WzAsMF19ZWxzZXtwPVtwYXJzZUludChqLmdldFN0eWxlKCJsZWZ0IiksMTApfHwwLHBhcnNlSW50KGouZ2V0U3R5bGUoInRvcCIpLDEwKXx8MF19fWlmKCFpKXtoPXt4OnBbMF0seTpwWzFdLDA6cFswXSwxOnBbMV0sd2lkdGg6ZCxoZWlnaHQ6bn19ZWxzZXtlPWouZ2V0Qm9yZGVyV2lkdGguY2FsbChqLCJsIikrai5nZXRQYWRkaW5nLmNhbGwoaiwibCIpO2M9ai5nZXRCb3JkZXJXaWR0aC5jYWxsKGosInIiKStqLmdldFBhZGRpbmcuY2FsbChqLCJyIik7bz1qLmdldEJvcmRlcldpZHRoLmNhbGwoaiwidCIpK2ouZ2V0UGFkZGluZy5jYWxsKGosInQiKTtrPWouZ2V0Qm9yZGVyV2lkdGguY2FsbChqLCJiIikrai5nZXRQYWRkaW5nLmNhbGwoaiwiYiIpO2g9e3g6cFswXStlLHk6cFsxXStvLDA6cFswXStlLDE6cFsxXStvLHdpZHRoOmQtKGUrYyksaGVpZ2h0Om4tKG8rayl9fWgubGVmdD1oLng7aC50b3A9aC55O2gucmlnaHQ9aC54K2gud2lkdGg7aC5ib3R0b209aC55K2guaGVpZ2h0O3JldHVybiBofSxnZXRQYWdlQm94OmZ1bmN0aW9uKGcpe3ZhciBqPXRoaXMsZD1qLmRvbSxtPWQub2Zmc2V0V2lkdGgsaT1kLm9mZnNldEhlaWdodCxvPWouZ2V0WFkoKSxuPW9bMV0sYz1vWzBdK20saz1vWzFdK2ksZT1vWzBdO2lmKCFkKXtyZXR1cm4gbmV3IEV4dC51dGlsLlJlZ2lvbigpfWlmKGcpe3JldHVybiBuZXcgRXh0LnV0aWwuUmVnaW9uKG4sYyxrLGUpfWVsc2V7cmV0dXJue2xlZnQ6ZSx0b3A6bix3aWR0aDptLGhlaWdodDppLHJpZ2h0OmMsYm90dG9tOmt9fX19KX0oKSk7KGZ1bmN0aW9uKCl7dmFyIHE9RXh0LmRvbS5BYnN0cmFjdEVsZW1lbnQsbz1kb2N1bWVudC5kZWZhdWx0VmlldyxuPUV4dC5BcnJheSxtPS9eXHMrfFxzKyQvZyxiPS9cdy9nLHA9L1xzKy8sdD0vXig/OnRyYW5zcGFyZW50fCg/OnJnYmFbKF0oPzpccypcZCtccypbLF0pezN9XHMqMFxzKlspXSkpJC9pLGg9RXh0LnN1cHBvcnRzLkNsYXNzTGlzdCxlPSJwYWRkaW5nIixkPSJtYXJnaW4iLHM9ImJvcmRlciIsaz0iLWxlZnQiLHI9Ii1yaWdodCIsbD0iLXRvcCIsYz0iLWJvdHRvbSIsaT0iLXdpZHRoIixqPXtsOnMraytpLHI6cytyK2ksdDpzK2wraSxiOnMrYytpfSxnPXtsOmUrayxyOmUrcix0OmUrbCxiOmUrY30sYT17bDpkK2sscjpkK3IsdDpkK2wsYjpkK2N9O3Eub3ZlcnJpZGUoe3N0eWxlSG9va3M6e30sYWRkU3R5bGVzOmZ1bmN0aW9uKEIsQSl7dmFyIHc9MCx6PShCfHwiIikubWF0Y2goYikseSx1PXoubGVuZ3RoLHgsdj1bXTtpZih1PT0xKXt3PU1hdGguYWJzKHBhcnNlRmxvYXQodGhpcy5nZXRTdHlsZShBW3pbMF1dKSl8fDApfWVsc2V7aWYodSl7Zm9yKHk9MDt5PHU7eSsrKXt4PXpbeV07di5wdXNoKEFbeF0pfXY9dGhpcy5nZXRTdHlsZSh2KTtmb3IoeT0wO3k8dTt5Kyspe3g9elt5XTt3Kz1NYXRoLmFicyhwYXJzZUZsb2F0KHZbQVt4XV0pfHwwKX19fXJldHVybiB3fSxhZGRDbHM6aD9mdW5jdGlvbih4KXt2YXIgej10aGlzLEI9ei5kb20sQSx5LHcsdSx2O2lmKHR5cGVvZih4KT09InN0cmluZyIpe3g9eC5yZXBsYWNlKG0sIiIpLnNwbGl0KHApfWlmKEImJngmJiEhKHU9eC5sZW5ndGgpKXtpZighQi5jbGFzc05hbWUpe0IuY2xhc3NOYW1lPXguam9pbigiICIpfWVsc2V7QT1CLmNsYXNzTGlzdDtmb3Iodz0wO3c8dTsrK3cpe3Y9eFt3XTtpZih2KXtpZighQS5jb250YWlucyh2KSl7aWYoeSl7eS5wdXNoKHYpfWVsc2V7eT1CLmNsYXNzTmFtZS5yZXBsYWNlKG0sIiIpO3k9eT9beSx2XTpbdl19fX19aWYoeSl7Qi5jbGFzc05hbWU9eS5qb2luKCIgIil9fX1yZXR1cm4gen06ZnVuY3Rpb24odil7dmFyIHc9dGhpcyx5PXcuZG9tLHgsdTtpZih5JiZ2JiZ2Lmxlbmd0aCl7dT1FeHQuRWxlbWVudC5tZXJnZUNsc0xpc3QoeS5jbGFzc05hbWUsdik7aWYodS5jaGFuZ2VkKXt5LmNsYXNzTmFtZT11LmpvaW4oIiAiKX19cmV0dXJuIHd9LHJlbW92ZUNsczpmdW5jdGlvbih3KXt2YXIgeD10aGlzLHk9eC5kb20sdSx2O2lmKHR5cGVvZih3KT09InN0cmluZyIpe3c9dy5yZXBsYWNlKG0sIiIpLnNwbGl0KHApfWlmKHkmJnkuY2xhc3NOYW1lJiZ3JiYhISh1PXcubGVuZ3RoKSl7aWYodT09MSYmaCl7aWYod1swXSl7eS5jbGFzc0xpc3QucmVtb3ZlKHdbMF0pfX1lbHNle3Y9RXh0LkVsZW1lbnQucmVtb3ZlQ2xzKHkuY2xhc3NOYW1lLHcpO2lmKHYuY2hhbmdlZCl7eS5jbGFzc05hbWU9di5qb2luKCIgIil9fX1yZXR1cm4geH0scmFkaW9DbHM6ZnVuY3Rpb24oeSl7dmFyIHo9dGhpcy5kb20ucGFyZW50Tm9kZS5jaGlsZE5vZGVzLHcseCx1O3k9RXh0LmlzQXJyYXkoeSk/eTpbeV07Zm9yKHg9MCx1PXoubGVuZ3RoO3g8dTt4Kyspe3c9elt4XTtpZih3JiZ3Lm5vZGVUeXBlPT0xKXtFeHQuZmx5KHcsIl9pbnRlcm5hbCIpLnJlbW92ZUNscyh5KX19cmV0dXJuIHRoaXMuYWRkQ2xzKHkpfSx0b2dnbGVDbHM6aD9mdW5jdGlvbih1KXt2YXIgdj10aGlzLHc9di5kb207aWYodyl7dT11LnJlcGxhY2UobSwiIik7aWYodSl7dy5jbGFzc0xpc3QudG9nZ2xlKHUpfX1yZXR1cm4gdn06ZnVuY3Rpb24odSl7dmFyIHY9dGhpcztyZXR1cm4gdi5oYXNDbHModSk/di5yZW1vdmVDbHModSk6di5hZGRDbHModSl9LGhhc0NsczpoP2Z1bmN0aW9uKHUpe3ZhciB2PXRoaXMuZG9tO3JldHVybih2JiZ1KT92LmNsYXNzTGlzdC5jb250YWlucyh1KTpmYWxzZX06ZnVuY3Rpb24odSl7dmFyIHY9dGhpcy5kb207cmV0dXJuIHY/dSYmKCIgIit2LmNsYXNzTmFtZSsiICIpLmluZGV4T2YoIiAiK3UrIiAiKSE9LTE6ZmFsc2V9LHJlcGxhY2VDbHM6ZnVuY3Rpb24odix1KXtyZXR1cm4gdGhpcy5yZW1vdmVDbHModikuYWRkQ2xzKHUpfSxpc1N0eWxlOmZ1bmN0aW9uKHUsdil7cmV0dXJuIHRoaXMuZ2V0U3R5bGUodSk9PXZ9LGdldFN0eWxlOmZ1bmN0aW9uKEcsQil7dmFyIEM9dGhpcyx4PUMuZG9tLEo9dHlwZW9mIEchPSJzdHJpbmciLEg9Qy5zdHlsZUhvb2tzLHY9RyxEPXYsQT0xLHosSSxGLEUsdyx1LHk7aWYoSil7Rj17fTt2PURbMF07eT0wO2lmKCEoQT1ELmxlbmd0aCkpe3JldHVybiBGfX1pZigheHx8eC5kb2N1bWVudEVsZW1lbnQpe3JldHVybiBGfHwiIn16PXguc3R5bGU7aWYoQil7dT16fWVsc2V7dT14Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh4LG51bGwpO2lmKCF1KXtCPXRydWU7dT16fX1kb3tFPUhbdl07aWYoIUUpe0hbdl09RT17bmFtZTpxLm5vcm1hbGl6ZSh2KX19aWYoRS5nZXQpe3c9RS5nZXQoeCxDLEIsdSl9ZWxzZXtJPUUubmFtZTt3PXVbSV19aWYoIUope3JldHVybiB3fUZbdl09dzt2PURbKyt5XX13aGlsZSh5PEEpO3JldHVybiBGfSxnZXRTdHlsZXM6ZnVuY3Rpb24oKXt2YXIgdj1FeHQuQXJyYXkuc2xpY2UoYXJndW1lbnRzKSx1PXYubGVuZ3RoLHc7aWYodSYmdHlwZW9mIHZbdS0xXT09ImJvb2xlYW4iKXt3PXYucG9wKCl9cmV0dXJuIHRoaXMuZ2V0U3R5bGUodix3KX0saXNUcmFuc3BhcmVudDpmdW5jdGlvbih2KXt2YXIgdT10aGlzLmdldFN0eWxlKHYpO3JldHVybiB1P3QudGVzdCh1KTpmYWxzZX0sc2V0U3R5bGU6ZnVuY3Rpb24oQix6KXt2YXIgeD10aGlzLEE9eC5kb20sdT14LnN0eWxlSG9va3Msdz1BLnN0eWxlLHY9Qix5O2lmKHR5cGVvZiB2PT0ic3RyaW5nIil7eT11W3ZdO2lmKCF5KXt1W3ZdPXk9e25hbWU6cS5ub3JtYWxpemUodil9fXo9KHo9PW51bGwpPyIiOno7aWYoeS5zZXQpe3kuc2V0KEEseix4KX1lbHNle3dbeS5uYW1lXT16fWlmKHkuYWZ0ZXJTZXQpe3kuYWZ0ZXJTZXQoQSx6LHgpfX1lbHNle2Zvcih2IGluIEIpe2lmKEIuaGFzT3duUHJvcGVydHkodikpe3k9dVt2XTtpZigheSl7dVt2XT15PXtuYW1lOnEubm9ybWFsaXplKHYpfX16PUJbdl07ej0oej09bnVsbCk/IiI6ejtpZih5LnNldCl7eS5zZXQoQSx6LHgpfWVsc2V7d1t5Lm5hbWVdPXp9aWYoeS5hZnRlclNldCl7eS5hZnRlclNldChBLHoseCl9fX19cmV0dXJuIHh9LGdldEhlaWdodDpmdW5jdGlvbih2KXt2YXIgdz10aGlzLmRvbSx1PXY/KHcuY2xpZW50SGVpZ2h0LXRoaXMuZ2V0UGFkZGluZygidGIiKSk6dy5vZmZzZXRIZWlnaHQ7cmV0dXJuIHU+MD91OjB9LGdldFdpZHRoOmZ1bmN0aW9uKHUpe3ZhciB3PXRoaXMuZG9tLHY9dT8ody5jbGllbnRXaWR0aC10aGlzLmdldFBhZGRpbmcoImxyIikpOncub2Zmc2V0V2lkdGg7cmV0dXJuIHY+MD92OjB9LHNldFdpZHRoOmZ1bmN0aW9uKHUpe3ZhciB2PXRoaXM7di5kb20uc3R5bGUud2lkdGg9cS5hZGRVbml0cyh1KTtyZXR1cm4gdn0sc2V0SGVpZ2h0OmZ1bmN0aW9uKHUpe3ZhciB2PXRoaXM7di5kb20uc3R5bGUuaGVpZ2h0PXEuYWRkVW5pdHModSk7cmV0dXJuIHZ9LGdldEJvcmRlcldpZHRoOmZ1bmN0aW9uKHUpe3JldHVybiB0aGlzLmFkZFN0eWxlcyh1LGopfSxnZXRQYWRkaW5nOmZ1bmN0aW9uKHUpe3JldHVybiB0aGlzLmFkZFN0eWxlcyh1LGcpfSxtYXJnaW5zOmEsYXBwbHlTdHlsZXM6ZnVuY3Rpb24odyl7aWYodyl7dmFyIHYsdSx4PXRoaXMuZG9tO2lmKHR5cGVvZiB3PT0iZnVuY3Rpb24iKXt3PXcuY2FsbCgpfWlmKHR5cGVvZiB3PT0ic3RyaW5nIil7dz1FeHQudXRpbC5Gb3JtYXQudHJpbSh3KS5zcGxpdCgvXHMqKD86Onw7KVxzKi8pO2Zvcih2PTAsdT13Lmxlbmd0aDt2PHU7KXt4LnN0eWxlW3Eubm9ybWFsaXplKHdbdisrXSldPXdbdisrXX19ZWxzZXtpZih0eXBlb2Ygdz09Im9iamVjdCIpe3RoaXMuc2V0U3R5bGUodyl9fX19LHNldFNpemU6ZnVuY3Rpb24odyx1KXt2YXIgeD10aGlzLHY9eC5kb20uc3R5bGU7aWYoRXh0LmlzT2JqZWN0KHcpKXt1PXcuaGVpZ2h0O3c9dy53aWR0aH12LndpZHRoPXEuYWRkVW5pdHModyk7di5oZWlnaHQ9cS5hZGRVbml0cyh1KTtyZXR1cm4geH0sZ2V0Vmlld1NpemU6ZnVuY3Rpb24oKXt2YXIgdT1kb2N1bWVudCx2PXRoaXMuZG9tO2lmKHY9PXV8fHY9PXUuYm9keSl7cmV0dXJue3dpZHRoOnEuZ2V0Vmlld3BvcnRXaWR0aCgpLGhlaWdodDpxLmdldFZpZXdwb3J0SGVpZ2h0KCl9fWVsc2V7cmV0dXJue3dpZHRoOnYuY2xpZW50V2lkdGgsaGVpZ2h0OnYuY2xpZW50SGVpZ2h0fX19LGdldFNpemU6ZnVuY3Rpb24odil7dmFyIHU9dGhpcy5kb207cmV0dXJue3dpZHRoOk1hdGgubWF4KDAsdj8odS5jbGllbnRXaWR0aC10aGlzLmdldFBhZGRpbmcoImxyIikpOnUub2Zmc2V0V2lkdGgpLGhlaWdodDpNYXRoLm1heCgwLHY/KHUuY2xpZW50SGVpZ2h0LXRoaXMuZ2V0UGFkZGluZygidGIiKSk6dS5vZmZzZXRIZWlnaHQpfX0scmVwYWludDpmdW5jdGlvbigpe3ZhciB1PXRoaXMuZG9tO3RoaXMuYWRkQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJyZXBhaW50Iik7c2V0VGltZW91dChmdW5jdGlvbigpe0V4dC5mbHkodSkucmVtb3ZlQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJyZXBhaW50Iil9LDEpO3JldHVybiB0aGlzfSxnZXRNYXJnaW46ZnVuY3Rpb24odil7dmFyIHc9dGhpcyx5PXt0OiJ0b3AiLGw6ImxlZnQiLHI6InJpZ2h0IixiOiJib3R0b20ifSx1LHoseDtpZighdil7eD1bXTtmb3IodSBpbiB3Lm1hcmdpbnMpe2lmKHcubWFyZ2lucy5oYXNPd25Qcm9wZXJ0eSh1KSl7eC5wdXNoKHcubWFyZ2luc1t1XSl9fXo9dy5nZXRTdHlsZSh4KTtpZih6JiZ0eXBlb2Ygej09Im9iamVjdCIpe2Zvcih1IGluIHcubWFyZ2lucyl7aWYody5tYXJnaW5zLmhhc093blByb3BlcnR5KHUpKXt6W3lbdV1dPXBhcnNlRmxvYXQoelt3Lm1hcmdpbnNbdV1dKXx8MH19fXJldHVybiB6fWVsc2V7cmV0dXJuIHcuYWRkU3R5bGVzLmNhbGwodyx2LHcubWFyZ2lucyl9fSxtYXNrOmZ1bmN0aW9uKHYseixEKXt2YXIgQT10aGlzLHc9QS5kb20seD0oQS4kY2FjaGV8fEEuZ2V0Q2FjaGUoKSkuZGF0YSx1PXgubWFzayxFLEMsQj0iIix5PUV4dC5iYXNlQ1NTUHJlZml4O0EuYWRkQ2xzKHkrIm1hc2tlZCIpO2lmKEEuZ2V0U3R5bGUoInBvc2l0aW9uIik9PSJzdGF0aWMiKXtBLmFkZENscyh5KyJtYXNrZWQtcmVsYXRpdmUiKX1pZih1KXt1LnJlbW92ZSgpfWlmKHomJnR5cGVvZiB6PT0ic3RyaW5nIil7Qj0iICIren1lbHNle0I9IiAiK3krIm1hc2stZ3JheSJ9RT1BLmNyZWF0ZUNoaWxkKHtjbHM6eSsibWFzayIrKChEIT09ZmFsc2UpPyIiOigiICIreSsibWFzay1ncmF5IikpLGh0bWw6dj8oJzxkaXYgY2xhc3M9IicrKHp8fCh5KyJtYXNrLW1lc3NhZ2UiKSkrJyI+Jyt2KyI8L2Rpdj4iKToiIn0pO0M9QS5nZXRTaXplKCk7eC5tYXNrPUU7aWYodz09PWRvY3VtZW50LmJvZHkpe0MuaGVpZ2h0PXdpbmRvdy5pbm5lckhlaWdodDtpZihBLm9yaWVudGF0aW9uSGFuZGxlcil7RXh0LkV2ZW50TWFuYWdlci51bk9yaWVudGF0aW9uQ2hhbmdlKEEub3JpZW50YXRpb25IYW5kbGVyLEEpfUEub3JpZW50YXRpb25IYW5kbGVyPWZ1bmN0aW9uKCl7Qz1BLmdldFNpemUoKTtDLmhlaWdodD13aW5kb3cuaW5uZXJIZWlnaHQ7RS5zZXRTaXplKEMpfTtFeHQuRXZlbnRNYW5hZ2VyLm9uT3JpZW50YXRpb25DaGFuZ2UoQS5vcmllbnRhdGlvbkhhbmRsZXIsQSl9RS5zZXRTaXplKEMpO2lmKEV4dC5pcy5pUGFkKXtFeHQucmVwYWludCgpfX0sdW5tYXNrOmZ1bmN0aW9uKCl7dmFyIHY9dGhpcyx4PSh2LiRjYWNoZXx8di5nZXRDYWNoZSgpKS5kYXRhLHU9eC5tYXNrLHc9RXh0LmJhc2VDU1NQcmVmaXg7aWYodSl7dS5yZW1vdmUoKTtkZWxldGUgeC5tYXNrfXYucmVtb3ZlQ2xzKFt3KyJtYXNrZWQiLHcrIm1hc2tlZC1yZWxhdGl2ZSJdKTtpZih2LmRvbT09PWRvY3VtZW50LmJvZHkpe0V4dC5FdmVudE1hbmFnZXIudW5PcmllbnRhdGlvbkNoYW5nZSh2Lm9yaWVudGF0aW9uSGFuZGxlcix2KTtkZWxldGUgdi5vcmllbnRhdGlvbkhhbmRsZXJ9fX0pO3EucG9wdWxhdGVTdHlsZU1hcD1mdW5jdGlvbihCLHUpe3ZhciBBPVsibWFyZ2luLSIsInBhZGRpbmctIiwiYm9yZGVyLXdpZHRoLSJdLHo9WyJiZWZvcmUiLCJhZnRlciJdLHcseSx2LHg7Zm9yKHc9QS5sZW5ndGg7dy0tOyl7Zm9yKHg9Mjt4LS07KXt5PUFbd10relt4XTtCW3Eubm9ybWFsaXplKHkpXT1CW3ldPXtuYW1lOnEubm9ybWFsaXplKEFbd10rdVt4XSl9fX19O0V4dC5vblJlYWR5KGZ1bmN0aW9uKCl7dmFyIEM9RXh0LnN1cHBvcnRzLHUsQSx5LHYsQjtmdW5jdGlvbiB6KEgsRSxHLEQpe3ZhciBGPURbdGhpcy5uYW1lXXx8IiI7cmV0dXJuIHQudGVzdChGKT8idHJhbnNwYXJlbnQiOkZ9ZnVuY3Rpb24geChKLEcsSSxGKXt2YXIgRD1GLm1hcmdpblJpZ2h0LEUsSDtpZihEIT0iMHB4Iil7RT1KLnN0eWxlO0g9RS5kaXNwbGF5O0UuZGlzcGxheT0iaW5saW5lLWJsb2NrIjtEPShJP0Y6Si5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoSixudWxsKSkubWFyZ2luUmlnaHQ7RS5kaXNwbGF5PUh9cmV0dXJuIER9ZnVuY3Rpb24gdyhLLEgsSixHKXt2YXIgRD1HLm1hcmdpblJpZ2h0LEYsRSxJO2lmKEQhPSIwcHgiKXtGPUsuc3R5bGU7RT1xLmdldFJpZ2h0TWFyZ2luRml4Q2xlYW5lcihLKTtJPUYuZGlzcGxheTtGLmRpc3BsYXk9ImlubGluZS1ibG9jayI7RD0oSj9HOksub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKEssIiIpKS5tYXJnaW5SaWdodDtGLmRpc3BsYXk9STtFKCl9cmV0dXJuIER9dT1xLnByb3RvdHlwZS5zdHlsZUhvb2tzO3EucG9wdWxhdGVTdHlsZU1hcCh1LFsibGVmdCIsInJpZ2h0Il0pO2lmKEMuaW5pdCl7Qy5pbml0KCl9aWYoIUMuUmlnaHRNYXJnaW4pe3UubWFyZ2luUmlnaHQ9dVsibWFyZ2luLXJpZ2h0Il09e25hbWU6Im1hcmdpblJpZ2h0IixnZXQ6KEMuRGlzcGxheUNoYW5nZUlucHV0U2VsZWN0aW9uQnVnfHxDLkRpc3BsYXlDaGFuZ2VUZXh0QXJlYVNlbGVjdGlvbkJ1Zyk/dzp4fX1pZighQy5UcmFuc3BhcmVudENvbG9yKXtBPVsiYmFja2dyb3VuZC1jb2xvciIsImJvcmRlci1jb2xvciIsImNvbG9yIiwib3V0bGluZS1jb2xvciJdO2Zvcih5PUEubGVuZ3RoO3ktLTspe3Y9QVt5XTtCPXEubm9ybWFsaXplKHYpO3Vbdl09dVtCXT17bmFtZTpCLGdldDp6fX19fSl9KCkpO0V4dC5kb20uQWJzdHJhY3RFbGVtZW50Lm92ZXJyaWRlKHtmaW5kUGFyZW50OmZ1bmN0aW9uKGgsYixhKXt2YXIgZT10aGlzLmRvbSxjPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxnPTAsZDtiPWJ8fDUwO2lmKGlzTmFOKGIpKXtkPUV4dC5nZXREb20oYik7Yj1OdW1iZXIuTUFYX1ZBTFVFfXdoaWxlKGUmJmUubm9kZVR5cGU9PTEmJmc8YiYmZSE9YyYmZSE9ZCl7aWYoRXh0LkRvbVF1ZXJ5LmlzKGUsaCkpe3JldHVybiBhP0V4dC5nZXQoZSk6ZX1nKys7ZT1lLnBhcmVudE5vZGV9cmV0dXJuIG51bGx9LGZpbmRQYXJlbnROb2RlOmZ1bmN0aW9uKGQsYixhKXt2YXIgYz1FeHQuZmx5KHRoaXMuZG9tLnBhcmVudE5vZGUsIl9pbnRlcm5hbCIpO3JldHVybiBjP2MuZmluZFBhcmVudChkLGIsYSk6bnVsbH0sdXA6ZnVuY3Rpb24oYixhKXtyZXR1cm4gdGhpcy5maW5kUGFyZW50Tm9kZShiLGEsdHJ1ZSl9LHNlbGVjdDpmdW5jdGlvbihhLGIpe3JldHVybiBFeHQuZG9tLkVsZW1lbnQuc2VsZWN0KGEsdGhpcy5kb20sYil9LHF1ZXJ5OmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuRG9tUXVlcnkuc2VsZWN0KGEsdGhpcy5kb20pfSxkb3duOmZ1bmN0aW9uKGEsYil7dmFyIGM9RXh0LkRvbVF1ZXJ5LnNlbGVjdE5vZGUoYSx0aGlzLmRvbSk7cmV0dXJuIGI/YzpFeHQuZ2V0KGMpfSxjaGlsZDpmdW5jdGlvbihhLGIpe3ZhciBkLGM9dGhpcyxlO2U9RXh0LmlkKGMuZG9tKTtlPUV4dC5lc2NhcGVJZChlKTtkPUV4dC5Eb21RdWVyeS5zZWxlY3ROb2RlKCIjIitlKyIgPiAiK2EsYy5kb20pO3JldHVybiBiP2Q6RXh0LmdldChkKX0scGFyZW50OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubWF0Y2hOb2RlKCJwYXJlbnROb2RlIiwicGFyZW50Tm9kZSIsYSxiKX0sbmV4dDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1hdGNoTm9kZSgibmV4dFNpYmxpbmciLCJuZXh0U2libGluZyIsYSxiKX0scHJldjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1hdGNoTm9kZSgicHJldmlvdXNTaWJsaW5nIiwicHJldmlvdXNTaWJsaW5nIixhLGIpfSxmaXJzdDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1hdGNoTm9kZSgibmV4dFNpYmxpbmciLCJmaXJzdENoaWxkIixhLGIpfSxsYXN0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMubWF0Y2hOb2RlKCJwcmV2aW91c1NpYmxpbmciLCJsYXN0Q2hpbGQiLGEsYil9LG1hdGNoTm9kZTpmdW5jdGlvbihiLGUsYSxjKXtpZighdGhpcy5kb20pe3JldHVybiBudWxsfXZhciBkPXRoaXMuZG9tW2VdO3doaWxlKGQpe2lmKGQubm9kZVR5cGU9PTEmJighYXx8RXh0LkRvbVF1ZXJ5LmlzKGQsYSkpKXtyZXR1cm4gIWM/RXh0LmdldChkKTpkfWQ9ZFtiXX1yZXR1cm4gbnVsbH0saXNBbmNlc3RvcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zZWxmLmlzQW5jZXN0b3IuY2FsbCh0aGlzLnNlbGYsdGhpcy5kb20sYSl9fSk7KGZ1bmN0aW9uKCl7dmFyIGI9ImFmdGVyYmVnaW4iLGk9ImFmdGVyZW5kIixhPSJiZWZvcmViZWdpbiIsbz0iYmVmb3JlZW5kIixsPSI8dGFibGU+IixoPSI8L3RhYmxlPiIsYz1sKyI8dGJvZHk+IixuPSI8L3Rib2R5PiIraCxrPWMrIjx0cj4iLGU9IjwvdHI+IituLHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksbT1bIkJlZm9yZUJlZ2luIiwicHJldmlvdXNTaWJsaW5nIl0saj1bIkFmdGVyRW5kIiwibmV4dFNpYmxpbmciXSxkPXtiZWZvcmViZWdpbjptLGFmdGVyZW5kOmp9LGc9e2JlZm9yZWJlZ2luOm0sYWZ0ZXJlbmQ6aixhZnRlcmJlZ2luOlsiQWZ0ZXJCZWdpbiIsImZpcnN0Q2hpbGQiXSxiZWZvcmVlbmQ6WyJCZWZvcmVFbmQiLCJsYXN0Q2hpbGQiXX07RXh0LmRlZmluZSgiRXh0LmRvbS5IZWxwZXIiLHtleHRlbmQ6IkV4dC5kb20uQWJzdHJhY3RIZWxwZXIiLHJlcXVpcmVzOlsiRXh0LmRvbS5BYnN0cmFjdEVsZW1lbnQiXSx0YWJsZVJlOi9edGFibGV8dGJvZHl8dHJ8dGQkL2ksdGFibGVFbFJlOi90ZHx0cnx0Ym9keS9pLHVzZURvbTpmYWxzZSxjcmVhdGVEb206ZnVuY3Rpb24ocSx3KXt2YXIgcix6PWRvY3VtZW50LHUseCxzLHksdix0O2lmKEV4dC5pc0FycmF5KHEpKXtyPXouY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2Zvcih2PTAsdD1xLmxlbmd0aDt2PHQ7disrKXt0aGlzLmNyZWF0ZURvbShxW3ZdLHIpfX1lbHNle2lmKHR5cGVvZiBxPT0ic3RyaW5nIil7cj16LmNyZWF0ZVRleHROb2RlKHEpfWVsc2V7cj16LmNyZWF0ZUVsZW1lbnQocS50YWd8fCJkaXYiKTt1PSEhci5zZXRBdHRyaWJ1dGU7Zm9yKHggaW4gcSl7aWYoIXRoaXMuY29uZlJlLnRlc3QoeCkpe3M9cVt4XTtpZih4PT0iY2xzIil7ci5jbGFzc05hbWU9c31lbHNle2lmKHUpe3Iuc2V0QXR0cmlidXRlKHgscyl9ZWxzZXtyW3hdPXN9fX19RXh0LkRvbUhlbHBlci5hcHBseVN0eWxlcyhyLHEuc3R5bGUpO2lmKCh5PXEuY2hpbGRyZW58fHEuY24pKXt0aGlzLmNyZWF0ZURvbSh5LHIpfWVsc2V7aWYocS5odG1sKXtyLmlubmVySFRNTD1xLmh0bWx9fX19aWYodyl7dy5hcHBlbmRDaGlsZChyKX1yZXR1cm4gcn0saWVUYWJsZTpmdW5jdGlvbih2LHEsdyx1KXtwLmlubmVySFRNTD1bcSx3LHVdLmpvaW4oIiIpO3ZhciByPS0xLHQ9cCxzO3doaWxlKCsrcjx2KXt0PXQuZmlyc3RDaGlsZH1zPXQubmV4dFNpYmxpbmc7aWYocyl7dD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7d2hpbGUocyl7dC5hcHBlbmRDaGlsZChzKTtzPXMubmV4dFNpYmxpbmd9fXJldHVybiB0fSxpbnNlcnRJbnRvVGFibGU6ZnVuY3Rpb24oeixzLHIsdCl7dmFyIHEsdyx2PXM9PWEseT1zPT1iLHU9cz09byx4PXM9PWk7aWYoej09InRkIiYmKHl8fHUpfHwhdGhpcy50YWJsZUVsUmUudGVzdCh6KSYmKHZ8fHgpKXtyZXR1cm4gbnVsbH13PXY/cjp4P3IubmV4dFNpYmxpbmc6eT9yLmZpcnN0Q2hpbGQ6bnVsbDtpZih2fHx4KXtyPXIucGFyZW50Tm9kZX1pZih6PT0idGQifHwoej09InRyIiYmKHV8fHkpKSl7cT10aGlzLmllVGFibGUoNCxrLHQsZSl9ZWxzZXtpZigoej09InRib2R5IiYmKHV8fHkpKXx8KHo9PSJ0ciImJih2fHx4KSkpe3E9dGhpcy5pZVRhYmxlKDMsYyx0LG4pfWVsc2V7cT10aGlzLmllVGFibGUoMixsLHQsaCl9fXIuaW5zZXJ0QmVmb3JlKHEsdyk7cmV0dXJuIHF9LGNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudDpmdW5jdGlvbihyKXt2YXIgcT1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkscyx0O3AuaW5uZXJIVE1MPXI7dD1wLmNoaWxkTm9kZXM7cz10Lmxlbmd0aDt3aGlsZShzLS0pe3EuYXBwZW5kQ2hpbGQodFswXSl9cmV0dXJuIHF9LGFwcGx5U3R5bGVzOmZ1bmN0aW9uKHEscil7aWYocil7cT1FeHQuZmx5KHEpO2lmKHR5cGVvZiByPT0iZnVuY3Rpb24iKXtyPXIuY2FsbCgpfWlmKHR5cGVvZiByPT0ic3RyaW5nIil7cj1FeHQuZG9tLkVsZW1lbnQucGFyc2VTdHlsZXMocil9aWYodHlwZW9mIHI9PSJvYmplY3QiKXtxLnNldFN0eWxlKHIpfX19LGNyZWF0ZUh0bWw6ZnVuY3Rpb24ocSl7cmV0dXJuIHRoaXMubWFya3VwKHEpfSxkb0luc2VydDpmdW5jdGlvbih0LHYsdSx3LHMscSl7dD10LmRvbXx8RXh0LmdldERvbSh0KTt2YXIgcjtpZih0aGlzLnVzZURvbSl7cj10aGlzLmNyZWF0ZURvbSh2LG51bGwpO2lmKHEpe3QuYXBwZW5kQ2hpbGQocil9ZWxzZXsocz09ImZpcnN0Q2hpbGQiP3Q6dC5wYXJlbnROb2RlKS5pbnNlcnRCZWZvcmUocix0W3NdfHx0KX19ZWxzZXtyPXRoaXMuaW5zZXJ0SHRtbCh3LHQsdGhpcy5tYXJrdXAodikpfXJldHVybiB1P0V4dC5nZXQocix0cnVlKTpyfSxvdmVyd3JpdGU6ZnVuY3Rpb24ocyxyLHQpe3ZhciBxO3M9RXh0LmdldERvbShzKTtyPXRoaXMubWFya3VwKHIpO2lmKEV4dC5pc0lFJiZ0aGlzLnRhYmxlUmUudGVzdChzLnRhZ05hbWUpKXt3aGlsZShzLmZpcnN0Q2hpbGQpe3MucmVtb3ZlQ2hpbGQocy5maXJzdENoaWxkKX1pZihyKXtxPXRoaXMuaW5zZXJ0SHRtbCgiYWZ0ZXJiZWdpbiIscyxyKTtyZXR1cm4gdD9FeHQuZ2V0KHEpOnF9cmV0dXJuIG51bGx9cy5pbm5lckhUTUw9cjtyZXR1cm4gdD9FeHQuZ2V0KHMuZmlyc3RDaGlsZCk6cy5maXJzdENoaWxkfSxpbnNlcnRIdG1sOmZ1bmN0aW9uKHMsdix0KXt2YXIgeCxyLHUscSx3O3M9cy50b0xvd2VyQ2FzZSgpO2lmKHYuaW5zZXJ0QWRqYWNlbnRIVE1MKXtpZihFeHQuaXNJRSYmdGhpcy50YWJsZVJlLnRlc3Qodi50YWdOYW1lKSYmKHc9dGhpcy5pbnNlcnRJbnRvVGFibGUodi50YWdOYW1lLnRvTG93ZXJDYXNlKCkscyx2LHQpKSl7cmV0dXJuIHd9aWYoKHg9Z1tzXSkpe3YuaW5zZXJ0QWRqYWNlbnRIVE1MKHhbMF0sdCk7cmV0dXJuIHZbeFsxXV19fWVsc2V7aWYodi5ub2RlVHlwZT09PTMpe3M9cz09PSJhZnRlcmJlZ2luIj8iYmVmb3JlYmVnaW4iOnM7cz1zPT09ImJlZm9yZWVuZCI/ImFmdGVyZW5kIjpzfXI9RXh0LnN1cHBvcnRzLkNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudD92Lm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTp1bmRlZmluZWQ7cT0ic2V0U3RhcnQiKyh0aGlzLmVuZFJlLnRlc3Qocyk/IkFmdGVyIjoiQmVmb3JlIik7aWYoZFtzXSl7aWYocil7cltxXSh2KTt3PXIuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHQpfWVsc2V7dz10aGlzLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCh0KX12LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHcscz09YT92OnYubmV4dFNpYmxpbmcpO3JldHVybiB2WyhzPT1hPyJwcmV2aW91cyI6Im5leHQiKSsiU2libGluZyJdfWVsc2V7dT0ocz09Yj8iZmlyc3QiOiJsYXN0IikrIkNoaWxkIjtpZih2LmZpcnN0Q2hpbGQpe2lmKHIpe3JbcV0odlt1XSk7dz1yLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCh0KX1lbHNle3c9dGhpcy5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQodCl9aWYocz09Yil7di5pbnNlcnRCZWZvcmUodyx2LmZpcnN0Q2hpbGQpfWVsc2V7di5hcHBlbmRDaGlsZCh3KX19ZWxzZXt2LmlubmVySFRNTD10fXJldHVybiB2W3VdfX19LGNyZWF0ZVRlbXBsYXRlOmZ1bmN0aW9uKHIpe3ZhciBxPXRoaXMubWFya3VwKHIpO3JldHVybiBuZXcgRXh0LlRlbXBsYXRlKHEpfX0sZnVuY3Rpb24oKXtFeHQubnMoIkV4dC5jb3JlIik7RXh0LkRvbUhlbHBlcj1FeHQuY29yZS5Eb21IZWxwZXI9bmV3IHRoaXN9KX0oKSk7RXh0Lm5zKCJFeHQuY29yZSIpO0V4dC5kb20uUXVlcnk9RXh0LmNvcmUuRG9tUXVlcnk9RXh0LkRvbVF1ZXJ5PShmdW5jdGlvbigpe3ZhciBjYWNoZT17fSxzaW1wbGVDYWNoZT17fSx2YWx1ZUNhY2hlPXt9LG5vblNwYWNlPS9cUy8sdHJpbVJlPS9eXHMrfFxzKyQvZyx0cGxSZT0vXHsoXGQrKVx9L2csbW9kZVJlPS9eKFxzP1tcLz4rfl1ccz98XHN8JCkvLHRhZ1Rva2VuUmU9L14oIyk/KFtcd1wtXCpcXF0rKS8sbnRoUmU9LyhcZCopblwrPyhcZCopLyxudGhSZTI9L1xELyxzdGFydElkUmU9L15ccypcIy8saXNJRT13aW5kb3cuQWN0aXZlWE9iamVjdD90cnVlOmZhbHNlLGtleT0zMDgwMyxsb25nSGV4PS9cXChbMC05YS1mQS1GXXs2fSkvZyxzaG9ydEhleD0vXFwoWzAtOWEtZkEtRl17MSw2fSlcc3swLDF9L2csbm9uSGV4PS9cXChbXjAtOWEtZkEtRl17MX0pL2csZXNjYXBlcz0vXFwvZyxudW0saGFzRXNjYXBlcyxsb25nSGV4VG9DaGFyPWZ1bmN0aW9uKCQwLCQxKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludCgkMSwxNikpfSxzaG9ydFRvTG9uZ0hleD1mdW5jdGlvbigkMCwkMSl7d2hpbGUoJDEubGVuZ3RoPDYpeyQxPSIwIiskMX1yZXR1cm4iXFwiKyQxfSxjaGFyVG9Mb25nSGV4PWZ1bmN0aW9uKCQwLCQxKXtudW09JDEuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNik7aWYobnVtLmxlbmd0aD09PTEpe251bT0iMCIrbnVtfXJldHVybiJcXDAwMDAiK251bX0sdW5lc2NhcGVDc3NTZWxlY3Rvcj1mdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuKGhhc0VzY2FwZXMpP3NlbGVjdG9yLnJlcGxhY2UobG9uZ0hleCxsb25nSGV4VG9DaGFyKTpzZWxlY3Rvcn0sc2V0dXBFc2NhcGVzPWZ1bmN0aW9uKHBhdGgpe2hhc0VzY2FwZXM9KHBhdGguaW5kZXhPZigiXFwiKT4tMSk7aWYoaGFzRXNjYXBlcyl7cGF0aD1wYXRoLnJlcGxhY2Uoc2hvcnRIZXgsc2hvcnRUb0xvbmdIZXgpLnJlcGxhY2Uobm9uSGV4LGNoYXJUb0xvbmdIZXgpLnJlcGxhY2UoZXNjYXBlcywiXFxcXCIpfXJldHVybiBwYXRofTtldmFsKCJ2YXIgYmF0Y2ggPSAzMDgwMzsiKTtmdW5jdGlvbiBjaGlsZChwYXJlbnQsaW5kZXgpe3ZhciBpPTAsbj1wYXJlbnQuZmlyc3RDaGlsZDt3aGlsZShuKXtpZihuLm5vZGVUeXBlPT0xKXtpZigrK2k9PWluZGV4KXtyZXR1cm4gbn19bj1uLm5leHRTaWJsaW5nfXJldHVybiBudWxsfWZ1bmN0aW9uIG5leHQobil7d2hpbGUoKG49bi5uZXh0U2libGluZykmJm4ubm9kZVR5cGUhPTEpe31yZXR1cm4gbn1mdW5jdGlvbiBwcmV2KG4pe3doaWxlKChuPW4ucHJldmlvdXNTaWJsaW5nKSYmbi5ub2RlVHlwZSE9MSl7fXJldHVybiBufWZ1bmN0aW9uIGNoaWxkcmVuKHBhcmVudCl7dmFyIG49cGFyZW50LmZpcnN0Q2hpbGQsbm9kZUluZGV4PS0xLG5leHROb2RlO3doaWxlKG4pe25leHROb2RlPW4ubmV4dFNpYmxpbmc7aWYobi5ub2RlVHlwZT09MyYmIW5vblNwYWNlLnRlc3Qobi5ub2RlVmFsdWUpKXtwYXJlbnQucmVtb3ZlQ2hpbGQobil9ZWxzZXtuLm5vZGVJbmRleD0rK25vZGVJbmRleH1uPW5leHROb2RlfXJldHVybiB0aGlzfWZ1bmN0aW9uIGJ5Q2xhc3NOYW1lKG5vZGVTZXQsY2xzKXtjbHM9dW5lc2NhcGVDc3NTZWxlY3RvcihjbHMpO2lmKCFjbHMpe3JldHVybiBub2RlU2V0fXZhciByZXN1bHQ9W10scmk9LTEsaSxjaTtmb3IoaT0wLGNpO2NpPW5vZGVTZXRbaV07aSsrKXtpZigoIiAiK2NpLmNsYXNzTmFtZSsiICIpLmluZGV4T2YoY2xzKSE9LTEpe3Jlc3VsdFsrK3JpXT1jaX19cmV0dXJuIHJlc3VsdH1mdW5jdGlvbiBhdHRyVmFsdWUobixhdHRyKXtpZighbi50YWdOYW1lJiZ0eXBlb2Ygbi5sZW5ndGghPSJ1bmRlZmluZWQiKXtuPW5bMF19aWYoIW4pe3JldHVybiBudWxsfWlmKGF0dHI9PSJmb3IiKXtyZXR1cm4gbi5odG1sRm9yfWlmKGF0dHI9PSJjbGFzcyJ8fGF0dHI9PSJjbGFzc05hbWUiKXtyZXR1cm4gbi5jbGFzc05hbWV9cmV0dXJuIG4uZ2V0QXR0cmlidXRlKGF0dHIpfHxuW2F0dHJdfWZ1bmN0aW9uIGdldE5vZGVzKG5zLG1vZGUsdGFnTmFtZSl7dmFyIHJlc3VsdD1bXSxyaT0tMSxjcyxpLG5pLGosY2ksY24sdXRhZyxuLGNqO2lmKCFucyl7cmV0dXJuIHJlc3VsdH10YWdOYW1lPXRhZ05hbWV8fCIqIjtpZih0eXBlb2YgbnMuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPSJ1bmRlZmluZWQiKXtucz1bbnNdfWlmKCFtb2RlKXtmb3IoaT0wLG5pO25pPW5zW2ldO2krKyl7Y3M9bmkuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnTmFtZSk7Zm9yKGo9MCxjaTtjaT1jc1tqXTtqKyspe3Jlc3VsdFsrK3JpXT1jaX19fWVsc2V7aWYobW9kZT09Ii8ifHxtb2RlPT0iPiIpe3V0YWc9dGFnTmFtZS50b1VwcGVyQ2FzZSgpO2ZvcihpPTAsbmksY247bmk9bnNbaV07aSsrKXtjbj1uaS5jaGlsZE5vZGVzO2ZvcihqPTAsY2o7Y2o9Y25bal07aisrKXtpZihjai5ub2RlTmFtZT09dXRhZ3x8Y2oubm9kZU5hbWU9PXRhZ05hbWV8fHRhZ05hbWU9PSIqIil7cmVzdWx0WysrcmldPWNqfX19fWVsc2V7aWYobW9kZT09IisiKXt1dGFnPXRhZ05hbWUudG9VcHBlckNhc2UoKTtmb3IoaT0wLG47bj1uc1tpXTtpKyspe3doaWxlKChuPW4ubmV4dFNpYmxpbmcpJiZuLm5vZGVUeXBlIT0xKXt9aWYobiYmKG4ubm9kZU5hbWU9PXV0YWd8fG4ubm9kZU5hbWU9PXRhZ05hbWV8fHRhZ05hbWU9PSIqIikpe3Jlc3VsdFsrK3JpXT1ufX19ZWxzZXtpZihtb2RlPT0ifiIpe3V0YWc9dGFnTmFtZS50b1VwcGVyQ2FzZSgpO2ZvcihpPTAsbjtuPW5zW2ldO2krKyl7d2hpbGUoKG49bi5uZXh0U2libGluZykpe2lmKG4ubm9kZU5hbWU9PXV0YWd8fG4ubm9kZU5hbWU9PXRhZ05hbWV8fHRhZ05hbWU9PSIqIil7cmVzdWx0WysrcmldPW59fX19fX19cmV0dXJuIHJlc3VsdH1mdW5jdGlvbiBjb25jYXQoYSxiKXtpZihiLnNsaWNlKXtyZXR1cm4gYS5jb25jYXQoYil9Zm9yKHZhciBpPTAsbD1iLmxlbmd0aDtpPGw7aSsrKXthW2EubGVuZ3RoXT1iW2ldfXJldHVybiBhfWZ1bmN0aW9uIGJ5VGFnKGNzLHRhZ05hbWUpe2lmKGNzLnRhZ05hbWV8fGNzPT1kb2N1bWVudCl7Y3M9W2NzXX1pZighdGFnTmFtZSl7cmV0dXJuIGNzfXZhciByZXN1bHQ9W10scmk9LTEsaSxjaTt0YWdOYW1lPXRhZ05hbWUudG9Mb3dlckNhc2UoKTtmb3IoaT0wLGNpO2NpPWNzW2ldO2krKyl7aWYoY2kubm9kZVR5cGU9PTEmJmNpLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09dGFnTmFtZSl7cmVzdWx0WysrcmldPWNpfX1yZXR1cm4gcmVzdWx0fWZ1bmN0aW9uIGJ5SWQoY3MsaWQpe2lkPXVuZXNjYXBlQ3NzU2VsZWN0b3IoaWQpO2lmKGNzLnRhZ05hbWV8fGNzPT1kb2N1bWVudCl7Y3M9W2NzXX1pZighaWQpe3JldHVybiBjc312YXIgcmVzdWx0PVtdLHJpPS0xLGksY2k7Zm9yKGk9MCxjaTtjaT1jc1tpXTtpKyspe2lmKGNpJiZjaS5pZD09aWQpe3Jlc3VsdFsrK3JpXT1jaTtyZXR1cm4gcmVzdWx0fX1yZXR1cm4gcmVzdWx0fWZ1bmN0aW9uIGJ5QXR0cmlidXRlKGNzLGF0dHIsdmFsdWUsb3AsY3VzdG9tKXt2YXIgcmVzdWx0PVtdLHJpPS0xLHVzZUdldFN0eWxlPWN1c3RvbT09InsiLGZuPUV4dC5Eb21RdWVyeS5vcGVyYXRvcnNbb3BdLGEseG1sLGhhc1htbCxpLGNpO3ZhbHVlPXVuZXNjYXBlQ3NzU2VsZWN0b3IodmFsdWUpO2ZvcihpPTAsY2k7Y2k9Y3NbaV07aSsrKXtpZihjaS5ub2RlVHlwZSE9MSl7Y29udGludWV9aWYoIWhhc1htbCl7eG1sPUV4dC5Eb21RdWVyeS5pc1htbChjaSk7aGFzWG1sPXRydWV9aWYoIXhtbCl7aWYodXNlR2V0U3R5bGUpe2E9RXh0LkRvbVF1ZXJ5LmdldFN0eWxlKGNpLGF0dHIpfWVsc2V7aWYoYXR0cj09ImNsYXNzInx8YXR0cj09ImNsYXNzTmFtZSIpe2E9Y2kuY2xhc3NOYW1lfWVsc2V7aWYoYXR0cj09ImZvciIpe2E9Y2kuaHRtbEZvcn1lbHNle2lmKGF0dHI9PSJocmVmIil7YT1jaS5nZXRBdHRyaWJ1dGUoImhyZWYiLDIpfWVsc2V7YT1jaS5nZXRBdHRyaWJ1dGUoYXR0cil9fX19fWVsc2V7YT1jaS5nZXRBdHRyaWJ1dGUoYXR0cil9aWYoKGZuJiZmbihhLHZhbHVlKSl8fCghZm4mJmEpKXtyZXN1bHRbKytyaV09Y2l9fXJldHVybiByZXN1bHR9ZnVuY3Rpb24gYnlQc2V1ZG8oY3MsbmFtZSx2YWx1ZSl7dmFsdWU9dW5lc2NhcGVDc3NTZWxlY3Rvcih2YWx1ZSk7cmV0dXJuIEV4dC5Eb21RdWVyeS5wc2V1ZG9zW25hbWVdKGNzLHZhbHVlKX1mdW5jdGlvbiBub2R1cElFWG1sKGNzKXt2YXIgZD0rK2tleSxyLGksbGVuLGM7Y3NbMF0uc2V0QXR0cmlidXRlKCJfbm9kdXAiLGQpO3I9W2NzWzBdXTtmb3IoaT0xLGxlbj1jcy5sZW5ndGg7aTxsZW47aSsrKXtjPWNzW2ldO2lmKCFjLmdldEF0dHJpYnV0ZSgiX25vZHVwIikhPWQpe2Muc2V0QXR0cmlidXRlKCJfbm9kdXAiLGQpO3Jbci5sZW5ndGhdPWN9fWZvcihpPTAsbGVuPWNzLmxlbmd0aDtpPGxlbjtpKyspe2NzW2ldLnJlbW92ZUF0dHJpYnV0ZSgiX25vZHVwIil9cmV0dXJuIHJ9ZnVuY3Rpb24gbm9kdXAoY3Mpe2lmKCFjcyl7cmV0dXJuW119dmFyIGxlbj1jcy5sZW5ndGgsYyxpLHI9Y3MsY2oscmk9LTEsZCxqO2lmKCFsZW58fHR5cGVvZiBjcy5ub2RlVHlwZSE9InVuZGVmaW5lZCJ8fGxlbj09MSl7cmV0dXJuIGNzfWlmKGlzSUUmJnR5cGVvZiBjc1swXS5zZWxlY3RTaW5nbGVOb2RlIT0idW5kZWZpbmVkIil7cmV0dXJuIG5vZHVwSUVYbWwoY3MpfWQ9KytrZXk7Y3NbMF0uX25vZHVwPWQ7Zm9yKGk9MTtjPWNzW2ldO2krKyl7aWYoYy5fbm9kdXAhPWQpe2MuX25vZHVwPWR9ZWxzZXtyPVtdO2ZvcihqPTA7ajxpO2orKyl7clsrK3JpXT1jc1tqXX1mb3Ioaj1pKzE7Y2o9Y3Nbal07aisrKXtpZihjai5fbm9kdXAhPWQpe2NqLl9ub2R1cD1kO3JbKytyaV09Y2p9fXJldHVybiByfX1yZXR1cm4gcn1mdW5jdGlvbiBxdWlja0RpZmZJRVhtbChjMSxjMil7dmFyIGQ9KytrZXkscj1bXSxpLGxlbjtmb3IoaT0wLGxlbj1jMS5sZW5ndGg7aTxsZW47aSsrKXtjMVtpXS5zZXRBdHRyaWJ1dGUoIl9xZGlmZiIsZCl9Zm9yKGk9MCxsZW49YzIubGVuZ3RoO2k8bGVuO2krKyl7aWYoYzJbaV0uZ2V0QXR0cmlidXRlKCJfcWRpZmYiKSE9ZCl7cltyLmxlbmd0aF09YzJbaV19fWZvcihpPTAsbGVuPWMxLmxlbmd0aDtpPGxlbjtpKyspe2MxW2ldLnJlbW92ZUF0dHJpYnV0ZSgiX3FkaWZmIil9cmV0dXJuIHJ9ZnVuY3Rpb24gcXVpY2tEaWZmKGMxLGMyKXt2YXIgbGVuMT1jMS5sZW5ndGgsZD0rK2tleSxyPVtdLGksbGVuO2lmKCFsZW4xKXtyZXR1cm4gYzJ9aWYoaXNJRSYmdHlwZW9mIGMxWzBdLnNlbGVjdFNpbmdsZU5vZGUhPSJ1bmRlZmluZWQiKXtyZXR1cm4gcXVpY2tEaWZmSUVYbWwoYzEsYzIpfWZvcihpPTA7aTxsZW4xO2krKyl7YzFbaV0uX3FkaWZmPWR9Zm9yKGk9MCxsZW49YzIubGVuZ3RoO2k8bGVuO2krKyl7aWYoYzJbaV0uX3FkaWZmIT1kKXtyW3IubGVuZ3RoXT1jMltpXX19cmV0dXJuIHJ9ZnVuY3Rpb24gcXVpY2tJZChucyxtb2RlLHJvb3QsaWQpe2lmKG5zPT1yb290KXtpZD11bmVzY2FwZUNzc1NlbGVjdG9yKGlkKTt2YXIgZD1yb290Lm93bmVyRG9jdW1lbnR8fHJvb3Q7cmV0dXJuIGQuZ2V0RWxlbWVudEJ5SWQoaWQpfW5zPWdldE5vZGVzKG5zLG1vZGUsIioiKTtyZXR1cm4gYnlJZChucyxpZCl9cmV0dXJue2dldFN0eWxlOmZ1bmN0aW9uKGVsLG5hbWUpe3JldHVybiBFeHQuZmx5KGVsKS5nZXRTdHlsZShuYW1lKX0sY29tcGlsZTpmdW5jdGlvbihwYXRoLHR5cGUpe3R5cGU9dHlwZXx8InNlbGVjdCI7dmFyIGZuPVsidmFyIGYgPSBmdW5jdGlvbihyb290KXtcbiB2YXIgbW9kZTsgKytiYXRjaDsgdmFyIG4gPSByb290IHx8IGRvY3VtZW50O1xuIl0sbW9kZSxsYXN0UGF0aCxtYXRjaGVycz1FeHQuRG9tUXVlcnkubWF0Y2hlcnMsbWF0Y2hlcnNMbj1tYXRjaGVycy5sZW5ndGgsbW9kZU1hdGNoLGxtb2RlPXBhdGgubWF0Y2gobW9kZVJlKSx0b2tlbk1hdGNoLG1hdGNoZWQsaix0LG07cGF0aD1zZXR1cEVzY2FwZXMocGF0aCk7aWYobG1vZGUmJmxtb2RlWzFdKXtmbltmbi5sZW5ndGhdPSdtb2RlPSInK2xtb2RlWzFdLnJlcGxhY2UodHJpbVJlLCIiKSsnIjsnO3BhdGg9cGF0aC5yZXBsYWNlKGxtb2RlWzFdLCIiKX13aGlsZShwYXRoLnN1YnN0cigwLDEpPT0iLyIpe3BhdGg9cGF0aC5zdWJzdHIoMSl9d2hpbGUocGF0aCYmbGFzdFBhdGghPXBhdGgpe2xhc3RQYXRoPXBhdGg7dG9rZW5NYXRjaD1wYXRoLm1hdGNoKHRhZ1Rva2VuUmUpO2lmKHR5cGU9PSJzZWxlY3QiKXtpZih0b2tlbk1hdGNoKXtpZih0b2tlbk1hdGNoWzFdPT0iIyIpe2ZuW2ZuLmxlbmd0aF09J24gPSBxdWlja0lkKG4sIG1vZGUsIHJvb3QsICInK3Rva2VuTWF0Y2hbMl0rJyIpOyd9ZWxzZXtmbltmbi5sZW5ndGhdPSduID0gZ2V0Tm9kZXMobiwgbW9kZSwgIicrdG9rZW5NYXRjaFsyXSsnIik7J31wYXRoPXBhdGgucmVwbGFjZSh0b2tlbk1hdGNoWzBdLCIiKX1lbHNle2lmKHBhdGguc3Vic3RyKDAsMSkhPSJAIil7Zm5bZm4ubGVuZ3RoXT0nbiA9IGdldE5vZGVzKG4sIG1vZGUsICIqIik7J319fWVsc2V7aWYodG9rZW5NYXRjaCl7aWYodG9rZW5NYXRjaFsxXT09IiMiKXtmbltmbi5sZW5ndGhdPSduID0gYnlJZChuLCAiJyt0b2tlbk1hdGNoWzJdKyciKTsnfWVsc2V7Zm5bZm4ubGVuZ3RoXT0nbiA9IGJ5VGFnKG4sICInK3Rva2VuTWF0Y2hbMl0rJyIpOyd9cGF0aD1wYXRoLnJlcGxhY2UodG9rZW5NYXRjaFswXSwiIil9fXdoaWxlKCEobW9kZU1hdGNoPXBhdGgubWF0Y2gobW9kZVJlKSkpe21hdGNoZWQ9ZmFsc2U7Zm9yKGo9MDtqPG1hdGNoZXJzTG47aisrKXt0PW1hdGNoZXJzW2pdO209cGF0aC5tYXRjaCh0LnJlKTtpZihtKXtmbltmbi5sZW5ndGhdPXQuc2VsZWN0LnJlcGxhY2UodHBsUmUsZnVuY3Rpb24oeCxpKXtyZXR1cm4gbVtpXX0pO3BhdGg9cGF0aC5yZXBsYWNlKG1bMF0sIiIpO21hdGNoZWQ9dHJ1ZTticmVha319aWYoIW1hdGNoZWQpe0V4dC5FcnJvci5yYWlzZSh7c291cmNlQ2xhc3M6IkV4dC5Eb21RdWVyeSIsc291cmNlTWV0aG9kOiJjb21waWxlIixtc2c6J0Vycm9yIHBhcnNpbmcgc2VsZWN0b3IuIFBhcnNpbmcgZmFpbGVkIGF0ICInK3BhdGgrJyInfSl9fWlmKG1vZGVNYXRjaFsxXSl7Zm5bZm4ubGVuZ3RoXT0nbW9kZT0iJyttb2RlTWF0Y2hbMV0ucmVwbGFjZSh0cmltUmUsIiIpKyciOyc7cGF0aD1wYXRoLnJlcGxhY2UobW9kZU1hdGNoWzFdLCIiKX19Zm5bZm4ubGVuZ3RoXT0icmV0dXJuIG5vZHVwKG4pO1xufSI7ZXZhbChmbi5qb2luKCIiKSk7cmV0dXJuIGZ9LGpzU2VsZWN0OmZ1bmN0aW9uKHBhdGgscm9vdCx0eXBlKXtyb290PXJvb3R8fGRvY3VtZW50O2lmKHR5cGVvZiByb290PT0ic3RyaW5nIil7cm9vdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChyb290KX12YXIgcGF0aHM9cGF0aC5zcGxpdCgiLCIpLHJlc3VsdHM9W10saSxsZW4sc3ViUGF0aCxyZXN1bHQ7Zm9yKGk9MCxsZW49cGF0aHMubGVuZ3RoO2k8bGVuO2krKyl7c3ViUGF0aD1wYXRoc1tpXS5yZXBsYWNlKHRyaW1SZSwiIik7aWYoIWNhY2hlW3N1YlBhdGhdKXtjYWNoZVtzdWJQYXRoXT1FeHQuRG9tUXVlcnkuY29tcGlsZShzdWJQYXRoLHR5cGUpO2lmKCFjYWNoZVtzdWJQYXRoXSl7RXh0LkVycm9yLnJhaXNlKHtzb3VyY2VDbGFzczoiRXh0LkRvbVF1ZXJ5Iixzb3VyY2VNZXRob2Q6ImpzU2VsZWN0Iixtc2c6c3ViUGF0aCsiIGlzIG5vdCBhIHZhbGlkIHNlbGVjdG9yIn0pfX1lbHNle3NldHVwRXNjYXBlcyhzdWJQYXRoKX1yZXN1bHQ9Y2FjaGVbc3ViUGF0aF0ocm9vdCk7aWYocmVzdWx0JiZyZXN1bHQhPWRvY3VtZW50KXtyZXN1bHRzPXJlc3VsdHMuY29uY2F0KHJlc3VsdCl9fWlmKHBhdGhzLmxlbmd0aD4xKXtyZXR1cm4gbm9kdXAocmVzdWx0cyl9cmV0dXJuIHJlc3VsdHN9LGlzWG1sOmZ1bmN0aW9uKGVsKXt2YXIgZG9jRWw9KGVsP2VsLm93bmVyRG9jdW1lbnR8fGVsOjApLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gZG9jRWw/ZG9jRWwubm9kZU5hbWUhPT0iSFRNTCI6ZmFsc2V9LHNlbGVjdDpkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsP2Z1bmN0aW9uKHBhdGgscm9vdCx0eXBlKXtyb290PXJvb3R8fGRvY3VtZW50O2lmKCFFeHQuRG9tUXVlcnkuaXNYbWwocm9vdCkpe3RyeXtpZihyb290LnBhcmVudE5vZGUmJihyb290Lm5vZGVUeXBlIT09OSkmJnBhdGguaW5kZXhPZigiLCIpPT09LTEmJiFzdGFydElkUmUudGVzdChwYXRoKSl7cGF0aD0iIyIrRXh0LmVzY2FwZUlkKEV4dC5pZChyb290KSkrIiAiK3BhdGg7cm9vdD1yb290LnBhcmVudE5vZGV9cmV0dXJuIEV4dC5BcnJheS50b0FycmF5KHJvb3QucXVlcnlTZWxlY3RvckFsbChwYXRoKSl9Y2F0Y2goZSl7fX1yZXR1cm4gRXh0LkRvbVF1ZXJ5LmpzU2VsZWN0LmNhbGwodGhpcyxwYXRoLHJvb3QsdHlwZSl9OmZ1bmN0aW9uKHBhdGgscm9vdCx0eXBlKXtyZXR1cm4gRXh0LkRvbVF1ZXJ5LmpzU2VsZWN0LmNhbGwodGhpcyxwYXRoLHJvb3QsdHlwZSl9LHNlbGVjdE5vZGU6ZnVuY3Rpb24ocGF0aCxyb290KXtyZXR1cm4gRXh0LkRvbVF1ZXJ5LnNlbGVjdChwYXRoLHJvb3QpWzBdfSxzZWxlY3RWYWx1ZTpmdW5jdGlvbihwYXRoLHJvb3QsZGVmYXVsdFZhbHVlKXtwYXRoPXBhdGgucmVwbGFjZSh0cmltUmUsIiIpO2lmKCF2YWx1ZUNhY2hlW3BhdGhdKXt2YWx1ZUNhY2hlW3BhdGhdPUV4dC5Eb21RdWVyeS5jb21waWxlKHBhdGgsInNlbGVjdCIpfWVsc2V7c2V0dXBFc2NhcGVzKHBhdGgpfXZhciBuPXZhbHVlQ2FjaGVbcGF0aF0ocm9vdCksdjtuPW5bMF0/blswXTpuO2lmKHR5cGVvZiBuLm5vcm1hbGl6ZT09ImZ1bmN0aW9uIil7bi5ub3JtYWxpemUoKX12PShuJiZuLmZpcnN0Q2hpbGQ/bi5maXJzdENoaWxkLm5vZGVWYWx1ZTpudWxsKTtyZXR1cm4oKHY9PT1udWxsfHx2PT09dW5kZWZpbmVkfHx2PT09IiIpP2RlZmF1bHRWYWx1ZTp2KX0sc2VsZWN0TnVtYmVyOmZ1bmN0aW9uKHBhdGgscm9vdCxkZWZhdWx0VmFsdWUpe3ZhciB2PUV4dC5Eb21RdWVyeS5zZWxlY3RWYWx1ZShwYXRoLHJvb3QsZGVmYXVsdFZhbHVlfHwwKTtyZXR1cm4gcGFyc2VGbG9hdCh2KX0saXM6ZnVuY3Rpb24oZWwsc3Mpe2lmKHR5cGVvZiBlbD09InN0cmluZyIpe2VsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsKX12YXIgaXNBcnJheT1FeHQuaXNBcnJheShlbCkscmVzdWx0PUV4dC5Eb21RdWVyeS5maWx0ZXIoaXNBcnJheT9lbDpbZWxdLHNzKTtyZXR1cm4gaXNBcnJheT8ocmVzdWx0Lmxlbmd0aD09ZWwubGVuZ3RoKToocmVzdWx0Lmxlbmd0aD4wKX0sZmlsdGVyOmZ1bmN0aW9uKGVscyxzcyxub25NYXRjaGVzKXtzcz1zcy5yZXBsYWNlKHRyaW1SZSwiIik7aWYoIXNpbXBsZUNhY2hlW3NzXSl7c2ltcGxlQ2FjaGVbc3NdPUV4dC5Eb21RdWVyeS5jb21waWxlKHNzLCJzaW1wbGUiKX1lbHNle3NldHVwRXNjYXBlcyhzcyl9dmFyIHJlc3VsdD1zaW1wbGVDYWNoZVtzc10oZWxzKTtyZXR1cm4gbm9uTWF0Y2hlcz9xdWlja0RpZmYocmVzdWx0LGVscyk6cmVzdWx0fSxtYXRjaGVyczpbe3JlOi9eXC4oW1x3XC1cXF0rKS8sc2VsZWN0OiduID0gYnlDbGFzc05hbWUobiwgIiB7MX0gIik7J30se3JlOi9eXDooW1x3XC1dKykoPzpcKCgoPzpbXlxzPlwvXSp8Lio/KSlcKSk/LyxzZWxlY3Q6J24gPSBieVBzZXVkbyhuLCAiezF9IiwgInsyfSIpOyd9LHtyZTovXig/OihbXFtce10pKD86QCk/KFtcd1wtXSspXHM/KD86KD18Lj0pXHM/WyciXT8oLio/KVsiJ10/KT9bXF1cfV0pLyxzZWxlY3Q6J24gPSBieUF0dHJpYnV0ZShuLCAiezJ9IiwgIns0fSIsICJ7M30iLCAiezF9Iik7J30se3JlOi9eIyhbXHdcLVxcXSspLyxzZWxlY3Q6J24gPSBieUlkKG4sICJ7MX0iKTsnfSx7cmU6L15AKFtcd1wtXSspLyxzZWxlY3Q6J3JldHVybiB7Zmlyc3RDaGlsZDp7bm9kZVZhbHVlOmF0dHJWYWx1ZShuLCAiezF9Iil9fTsnfV0sb3BlcmF0b3JzOnsiPSI6ZnVuY3Rpb24oYSx2KXtyZXR1cm4gYT09dn0sIiE9IjpmdW5jdGlvbihhLHYpe3JldHVybiBhIT12fSwiXj0iOmZ1bmN0aW9uKGEsdil7cmV0dXJuIGEmJmEuc3Vic3RyKDAsdi5sZW5ndGgpPT12fSwiJD0iOmZ1bmN0aW9uKGEsdil7cmV0dXJuIGEmJmEuc3Vic3RyKGEubGVuZ3RoLXYubGVuZ3RoKT09dn0sIio9IjpmdW5jdGlvbihhLHYpe3JldHVybiBhJiZhLmluZGV4T2YodikhPT0tMX0sIiU9IjpmdW5jdGlvbihhLHYpe3JldHVybihhJXYpPT0wfSwifD0iOmZ1bmN0aW9uKGEsdil7cmV0dXJuIGEmJihhPT12fHxhLnN1YnN0cigwLHYubGVuZ3RoKzEpPT12KyItIil9LCJ+PSI6ZnVuY3Rpb24oYSx2KXtyZXR1cm4gYSYmKCIgIithKyIgIikuaW5kZXhPZigiICIrdisiICIpIT0tMX19LHBzZXVkb3M6eyJmaXJzdC1jaGlsZCI6ZnVuY3Rpb24oYyl7dmFyIHI9W10scmk9LTEsbixpLGNpO2ZvcihpPTA7KGNpPW49Y1tpXSk7aSsrKXt3aGlsZSgobj1uLnByZXZpb3VzU2libGluZykmJm4ubm9kZVR5cGUhPTEpe31pZighbil7clsrK3JpXT1jaX19cmV0dXJuIHJ9LCJsYXN0LWNoaWxkIjpmdW5jdGlvbihjKXt2YXIgcj1bXSxyaT0tMSxuLGksY2k7Zm9yKGk9MDsoY2k9bj1jW2ldKTtpKyspe3doaWxlKChuPW4ubmV4dFNpYmxpbmcpJiZuLm5vZGVUeXBlIT0xKXt9aWYoIW4pe3JbKytyaV09Y2l9fXJldHVybiByfSwibnRoLWNoaWxkIjpmdW5jdGlvbihjLGEpe3ZhciByPVtdLHJpPS0xLG09bnRoUmUuZXhlYyhhPT0iZXZlbiImJiIybiJ8fGE9PSJvZGQiJiYiMm4rMSJ8fCFudGhSZTIudGVzdChhKSYmIm4rIithfHxhKSxmPShtWzFdfHwxKS0wLGw9bVsyXS0wLGksbixqLGNuLHBuO2ZvcihpPTA7bj1jW2ldO2krKyl7cG49bi5wYXJlbnROb2RlO2lmKGJhdGNoIT1wbi5fYmF0Y2gpe2o9MDtmb3IoY249cG4uZmlyc3RDaGlsZDtjbjtjbj1jbi5uZXh0U2libGluZyl7aWYoY24ubm9kZVR5cGU9PTEpe2NuLm5vZGVJbmRleD0rK2p9fXBuLl9iYXRjaD1iYXRjaH1pZihmPT0xKXtpZihsPT0wfHxuLm5vZGVJbmRleD09bCl7clsrK3JpXT1ufX1lbHNle2lmKChuLm5vZGVJbmRleCtsKSVmPT0wKXtyWysrcmldPW59fX1yZXR1cm4gcn0sIm9ubHktY2hpbGQiOmZ1bmN0aW9uKGMpe3ZhciByPVtdLHJpPS0xLGksY2k7Zm9yKGk9MDtjaT1jW2ldO2krKyl7aWYoIXByZXYoY2kpJiYhbmV4dChjaSkpe3JbKytyaV09Y2l9fXJldHVybiByfSxlbXB0eTpmdW5jdGlvbihjKXt2YXIgcj1bXSxyaT0tMSxpLGNpLGNucyxqLGNuLGVtcHR5O2ZvcihpPTAsY2k7Y2k9Y1tpXTtpKyspe2Nucz1jaS5jaGlsZE5vZGVzO2o9MDtlbXB0eT10cnVlO3doaWxlKGNuPWNuc1tqXSl7KytqO2lmKGNuLm5vZGVUeXBlPT0xfHxjbi5ub2RlVHlwZT09Myl7ZW1wdHk9ZmFsc2U7YnJlYWt9fWlmKGVtcHR5KXtyWysrcmldPWNpfX1yZXR1cm4gcn0sY29udGFpbnM6ZnVuY3Rpb24oYyx2KXt2YXIgcj1bXSxyaT0tMSxpLGNpO2ZvcihpPTA7Y2k9Y1tpXTtpKyspe2lmKChjaS50ZXh0Q29udGVudHx8Y2kuaW5uZXJUZXh0fHxjaS50ZXh0fHwiIikuaW5kZXhPZih2KSE9LTEpe3JbKytyaV09Y2l9fXJldHVybiByfSxub2RlVmFsdWU6ZnVuY3Rpb24oYyx2KXt2YXIgcj1bXSxyaT0tMSxpLGNpO2ZvcihpPTA7Y2k9Y1tpXTtpKyspe2lmKGNpLmZpcnN0Q2hpbGQmJmNpLmZpcnN0Q2hpbGQubm9kZVZhbHVlPT12KXtyWysrcmldPWNpfX1yZXR1cm4gcn0sY2hlY2tlZDpmdW5jdGlvbihjKXt2YXIgcj1bXSxyaT0tMSxpLGNpO2ZvcihpPTA7Y2k9Y1tpXTtpKyspe2lmKGNpLmNoZWNrZWQ9PXRydWUpe3JbKytyaV09Y2l9fXJldHVybiByfSxub3Q6ZnVuY3Rpb24oYyxzcyl7cmV0dXJuIEV4dC5Eb21RdWVyeS5maWx0ZXIoYyxzcyx0cnVlKX0sYW55OmZ1bmN0aW9uKGMsc2VsZWN0b3JzKXt2YXIgc3M9c2VsZWN0b3JzLnNwbGl0KCJ8Iikscj1bXSxyaT0tMSxzLGksY2ksajtmb3IoaT0wO2NpPWNbaV07aSsrKXtmb3Ioaj0wO3M9c3Nbal07aisrKXtpZihFeHQuRG9tUXVlcnkuaXMoY2kscykpe3JbKytyaV09Y2k7YnJlYWt9fX1yZXR1cm4gcn0sb2RkOmZ1bmN0aW9uKGMpe3JldHVybiB0aGlzWyJudGgtY2hpbGQiXShjLCJvZGQiKX0sZXZlbjpmdW5jdGlvbihjKXtyZXR1cm4gdGhpc1sibnRoLWNoaWxkIl0oYywiZXZlbiIpfSxudGg6ZnVuY3Rpb24oYyxhKXtyZXR1cm4gY1thLTFdfHxbXX0sZmlyc3Q6ZnVuY3Rpb24oYyl7cmV0dXJuIGNbMF18fFtdfSxsYXN0OmZ1bmN0aW9uKGMpe3JldHVybiBjW2MubGVuZ3RoLTFdfHxbXX0saGFzOmZ1bmN0aW9uKGMsc3Mpe3ZhciBzPUV4dC5Eb21RdWVyeS5zZWxlY3Qscj1bXSxyaT0tMSxpLGNpO2ZvcihpPTA7Y2k9Y1tpXTtpKyspe2lmKHMoc3MsY2kpLmxlbmd0aD4wKXtyWysrcmldPWNpfX1yZXR1cm4gcn0sbmV4dDpmdW5jdGlvbihjLHNzKXt2YXIgaXM9RXh0LkRvbVF1ZXJ5LmlzLHI9W10scmk9LTEsaSxjaSxuO2ZvcihpPTA7Y2k9Y1tpXTtpKyspe249bmV4dChjaSk7aWYobiYmaXMobixzcykpe3JbKytyaV09Y2l9fXJldHVybiByfSxwcmV2OmZ1bmN0aW9uKGMsc3Mpe3ZhciBpcz1FeHQuRG9tUXVlcnkuaXMscj1bXSxyaT0tMSxpLGNpLG47Zm9yKGk9MDtjaT1jW2ldO2krKyl7bj1wcmV2KGNpKTtpZihuJiZpcyhuLHNzKSl7clsrK3JpXT1jaX19cmV0dXJuIHJ9fX19KCkpO0V4dC5xdWVyeT1FeHQuRG9tUXVlcnkuc2VsZWN0OyhmdW5jdGlvbigpe3ZhciBISURERU49ImhpZGRlbiIsRE9DPWRvY3VtZW50LFZJU0lCSUxJVFk9InZpc2liaWxpdHkiLERJU1BMQVk9ImRpc3BsYXkiLE5PTkU9Im5vbmUiLFhNQVNLRUQ9RXh0LmJhc2VDU1NQcmVmaXgrIm1hc2tlZCIsWE1BU0tFRFJFTEFUSVZFPUV4dC5iYXNlQ1NTUHJlZml4KyJtYXNrZWQtcmVsYXRpdmUiLEVYVEVMTUFTS01TRz1FeHQuYmFzZUNTU1ByZWZpeCsibWFzay1tc2ciLGJvZHlSZT0vXmJvZHkvaSx2aXNGbHksbm9Cb3hBZGp1c3Q9RXh0LmlzU3RyaWN0P3tzZWxlY3Q6MX06e2lucHV0OjEsc2VsZWN0OjEsdGV4dGFyZWE6MX0saXNTY3JvbGxlZD1mdW5jdGlvbihjKXt2YXIgcj1bXSxyaT0tMSxpLGNpO2ZvcihpPTA7Y2k9Y1tpXTtpKyspe2lmKGNpLnNjcm9sbFRvcD4wfHxjaS5zY3JvbGxMZWZ0PjApe3JbKytyaV09Y2l9fXJldHVybiByfSxFbGVtZW50PUV4dC5kZWZpbmUoIkV4dC5kb20uRWxlbWVudCIse2V4dGVuZDoiRXh0LmRvbS5BYnN0cmFjdEVsZW1lbnQiLGFsdGVybmF0ZUNsYXNzTmFtZTpbIkV4dC5FbGVtZW50IiwiRXh0LmNvcmUuRWxlbWVudCJdLGFkZFVuaXRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZi5hZGRVbml0cy5hcHBseSh0aGlzLnNlbGYsYXJndW1lbnRzKX0sZm9jdXM6ZnVuY3Rpb24oZGVmZXIsZG9tKXt2YXIgbWU9dGhpcyxzY3JvbGxUb3AsYm9keTtkb209ZG9tfHxtZS5kb207Ym9keT0oZG9tLm93bmVyRG9jdW1lbnR8fERPQykuYm9keXx8RE9DLmJvZHk7dHJ5e2lmKE51bWJlcihkZWZlcikpe0V4dC5kZWZlcihtZS5mb2N1cyxkZWZlcixtZSxbbnVsbCxkb21dKX1lbHNle2lmKGRvbS5vZmZzZXRIZWlnaHQ+RWxlbWVudC5nZXRWaWV3SGVpZ2h0KCkpe3Njcm9sbFRvcD1ib2R5LnNjcm9sbFRvcH1kb20uZm9jdXMoKTtpZihzY3JvbGxUb3AhPT11bmRlZmluZWQpe2JvZHkuc2Nyb2xsVG9wPXNjcm9sbFRvcH19fWNhdGNoKGUpe31yZXR1cm4gbWV9LGJsdXI6ZnVuY3Rpb24oKXt0cnl7dGhpcy5kb20uYmx1cigpfWNhdGNoKGUpe31yZXR1cm4gdGhpc30saXNCb3JkZXJCb3g6ZnVuY3Rpb24oKXt2YXIgYm94PUV4dC5pc0JvcmRlckJveDtpZihib3gpe2JveD0hKCh0aGlzLmRvbS50YWdOYW1lfHwiIikudG9Mb3dlckNhc2UoKSBpbiBub0JveEFkanVzdCl9cmV0dXJuIGJveH0saG92ZXI6ZnVuY3Rpb24ob3ZlckZuLG91dEZuLHNjb3BlLG9wdGlvbnMpe3ZhciBtZT10aGlzO21lLm9uKCJtb3VzZWVudGVyIixvdmVyRm4sc2NvcGV8fG1lLmRvbSxvcHRpb25zKTttZS5vbigibW91c2VsZWF2ZSIsb3V0Rm4sc2NvcGV8fG1lLmRvbSxvcHRpb25zKTtyZXR1cm4gbWV9LGdldEF0dHJpYnV0ZU5TOmZ1bmN0aW9uKG5zLG5hbWUpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZShuYW1lLG5zKX0sZ2V0QXR0cmlidXRlOihFeHQuaXNJRSYmIShFeHQuaXNJRTkmJkRPQy5kb2N1bWVudE1vZGU9PT05KSk/ZnVuY3Rpb24obmFtZSxucyl7dmFyIGQ9dGhpcy5kb20sdHlwZTtpZihucyl7dHlwZT10eXBlb2YgZFtucysiOiIrbmFtZV07aWYodHlwZSE9InVuZGVmaW5lZCImJnR5cGUhPSJ1bmtub3duIil7cmV0dXJuIGRbbnMrIjoiK25hbWVdfHxudWxsfXJldHVybiBudWxsfWlmKG5hbWU9PT0iZm9yIil7bmFtZT0iaHRtbEZvciJ9cmV0dXJuIGRbbmFtZV18fG51bGx9OmZ1bmN0aW9uKG5hbWUsbnMpe3ZhciBkPXRoaXMuZG9tO2lmKG5zKXtyZXR1cm4gZC5nZXRBdHRyaWJ1dGVOUyhucyxuYW1lKXx8ZC5nZXRBdHRyaWJ1dGUobnMrIjoiK25hbWUpfXJldHVybiBkLmdldEF0dHJpYnV0ZShuYW1lKXx8ZFtuYW1lXXx8bnVsbH0sY2FjaGVTY3JvbGxWYWx1ZXM6ZnVuY3Rpb24oKXt2YXIgbWU9dGhpcyxzY3JvbGxlZERlc2NlbmRhbnRzLGVsLGksc2Nyb2xsVmFsdWVzPVtdLHJlc3VsdD1mdW5jdGlvbigpe2ZvcihpPTA7aTxzY3JvbGxlZERlc2NlbmRhbnRzLmxlbmd0aDtpKyspe2VsPXNjcm9sbGVkRGVzY2VuZGFudHNbaV07ZWwuc2Nyb2xsTGVmdD1zY3JvbGxWYWx1ZXNbaV1bMF07ZWwuc2Nyb2xsVG9wPXNjcm9sbFZhbHVlc1tpXVsxXX19O2lmKCFFeHQuRG9tUXVlcnkucHNldWRvcy5pc1Njcm9sbGVkKXtFeHQuRG9tUXVlcnkucHNldWRvcy5pc1Njcm9sbGVkPWlzU2Nyb2xsZWR9c2Nyb2xsZWREZXNjZW5kYW50cz1tZS5xdWVyeSgiOmlzU2Nyb2xsZWQiKTtmb3IoaT0wO2k8c2Nyb2xsZWREZXNjZW5kYW50cy5sZW5ndGg7aSsrKXtlbD1zY3JvbGxlZERlc2NlbmRhbnRzW2ldO3Njcm9sbFZhbHVlc1tpXT1bZWwuc2Nyb2xsTGVmdCxlbC5zY3JvbGxUb3BdfXJldHVybiByZXN1bHR9LGF1dG9Cb3hBZGp1c3Q6dHJ1ZSxpc1Zpc2libGU6ZnVuY3Rpb24oZGVlcCl7dmFyIG1lPXRoaXMsZG9tPW1lLmRvbSxzdG9wTm9kZT1kb20ub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7aWYoIXZpc0ZseSl7dmlzRmx5PW5ldyBFbGVtZW50LkZseSgpfXdoaWxlKGRvbSE9PXN0b3BOb2RlKXtpZighZG9tfHxkb20ubm9kZVR5cGU9PT0xMXx8KHZpc0ZseS5hdHRhY2goZG9tKSkuaXNTdHlsZShWSVNJQklMSVRZLEhJRERFTil8fHZpc0ZseS5pc1N0eWxlKERJU1BMQVksTk9ORSkpe3JldHVybiBmYWxzZX1pZighZGVlcCl7YnJlYWt9ZG9tPWRvbS5wYXJlbnROb2RlfXJldHVybiB0cnVlfSxpc0Rpc3BsYXllZDpmdW5jdGlvbigpe3JldHVybiAhdGhpcy5pc1N0eWxlKERJU1BMQVksTk9ORSl9LGVuYWJsZURpc3BsYXlNb2RlOmZ1bmN0aW9uKGRpc3BsYXkpe3ZhciBtZT10aGlzO21lLnNldFZpc2liaWxpdHlNb2RlKEVsZW1lbnQuRElTUExBWSk7aWYoIUV4dC5pc0VtcHR5KGRpc3BsYXkpKXsobWUuJGNhY2hlfHxtZS5nZXRDYWNoZSgpKS5kYXRhLm9yaWdpbmFsRGlzcGxheT1kaXNwbGF5fXJldHVybiBtZX0sbWFzazpmdW5jdGlvbihtc2csbXNnQ2xzLGVsSGVpZ2h0KXt2YXIgbWU9dGhpcyxkb209bWUuZG9tLHNldEV4cHJlc3Npb249ZG9tLnN0eWxlLnNldEV4cHJlc3Npb24sZGF0YT0obWUuJGNhY2hlfHxtZS5nZXRDYWNoZSgpKS5kYXRhLG1hc2tFbD1kYXRhLm1hc2tFbCxtYXNrTXNnPWRhdGEubWFza01zZztpZighKGJvZHlSZS50ZXN0KGRvbS50YWdOYW1lKSYmbWUuZ2V0U3R5bGUoInBvc2l0aW9uIik9PSJzdGF0aWMiKSl7bWUuYWRkQ2xzKFhNQVNLRURSRUxBVElWRSl9aWYobWFza0VsKXttYXNrRWwucmVtb3ZlKCl9aWYobWFza01zZyl7bWFza01zZy5yZW1vdmUoKX1FeHQuRG9tSGVscGVyLmFwcGVuZChkb20sW3tjbHM6RXh0LmJhc2VDU1NQcmVmaXgrIm1hc2sifSx7Y2xzOm1zZ0Nscz9FWFRFTE1BU0tNU0crIiAiK21zZ0NsczpFWFRFTE1BU0tNU0csY246e3RhZzoiZGl2IixodG1sOm1zZ3x8IiJ9fV0pO21hc2tNc2c9RXh0LmdldChkb20ubGFzdENoaWxkKTttYXNrRWw9RXh0LmdldChtYXNrTXNnLmRvbS5wcmV2aW91c1NpYmxpbmcpO2RhdGEubWFza01zZz1tYXNrTXNnO2RhdGEubWFza0VsPW1hc2tFbDttZS5hZGRDbHMoWE1BU0tFRCk7bWFza0VsLnNldERpc3BsYXllZCh0cnVlKTtpZih0eXBlb2YgbXNnPT0ic3RyaW5nIil7bWFza01zZy5zZXREaXNwbGF5ZWQodHJ1ZSk7bWFza01zZy5jZW50ZXIobWUpfWVsc2V7bWFza01zZy5zZXREaXNwbGF5ZWQoZmFsc2UpfWlmKCFFeHQuc3VwcG9ydHMuSW5jbHVkZVBhZGRpbmdJbldpZHRoQ2FsY3VsYXRpb24mJnNldEV4cHJlc3Npb24pe3RyeXttYXNrRWwuZG9tLnN0eWxlLnNldEV4cHJlc3Npb24oIndpZHRoIiwndGhpcy5wYXJlbnROb2RlLmNsaWVudFdpZHRoICsgInB4IicpfWNhdGNoKGUpe319aWYoIUV4dC5zdXBwb3J0cy5JbmNsdWRlUGFkZGluZ0luSGVpZ2h0Q2FsY3VsYXRpb24mJnNldEV4cHJlc3Npb24pe3RyeXttYXNrRWwuZG9tLnN0eWxlLnNldEV4cHJlc3Npb24oImhlaWdodCIsInRoaXMucGFyZW50Tm9kZS4iKyhkb209PURPQy5ib2R5PyJzY3JvbGxIZWlnaHQiOiJvZmZzZXRIZWlnaHQiKSsnICsgInB4IicpfWNhdGNoKGUpe319ZWxzZXtpZihFeHQuaXNJRSYmIShFeHQuaXNJRTcmJkV4dC5pc1N0cmljdCkmJm1lLmdldFN0eWxlKCJoZWlnaHQiKT09ImF1dG8iKXttYXNrRWwuc2V0U2l6ZSh1bmRlZmluZWQsZWxIZWlnaHR8fG1lLmdldEhlaWdodCgpKX19cmV0dXJuIG1hc2tFbH0sdW5tYXNrOmZ1bmN0aW9uKCl7dmFyIG1lPXRoaXMsZGF0YT0obWUuJGNhY2hlfHxtZS5nZXRDYWNoZSgpKS5kYXRhLG1hc2tFbD1kYXRhLm1hc2tFbCxtYXNrTXNnPWRhdGEubWFza01zZyxzdHlsZTtpZihtYXNrRWwpe3N0eWxlPW1hc2tFbC5kb20uc3R5bGU7aWYoc3R5bGUuY2xlYXJFeHByZXNzaW9uKXtzdHlsZS5jbGVhckV4cHJlc3Npb24oIndpZHRoIik7c3R5bGUuY2xlYXJFeHByZXNzaW9uKCJoZWlnaHQiKX1pZihtYXNrRWwpe21hc2tFbC5yZW1vdmUoKTtkZWxldGUgZGF0YS5tYXNrRWx9aWYobWFza01zZyl7bWFza01zZy5yZW1vdmUoKTtkZWxldGUgZGF0YS5tYXNrTXNnfW1lLnJlbW92ZUNscyhbWE1BU0tFRCxYTUFTS0VEUkVMQVRJVkVdKX19LGlzTWFza2VkOmZ1bmN0aW9uKCl7dmFyIG1lPXRoaXMsZGF0YT0obWUuJGNhY2hlfHxtZS5nZXRDYWNoZSgpKS5kYXRhLG1hc2tFbD1kYXRhLm1hc2tFbCxtYXNrTXNnPWRhdGEubWFza01zZyxoYXNNYXNrPWZhbHNlO2lmKG1hc2tFbCYmbWFza0VsLmlzVmlzaWJsZSgpKXtpZihtYXNrTXNnKXttYXNrTXNnLmNlbnRlcihtZSl9aGFzTWFzaz10cnVlfXJldHVybiBoYXNNYXNrfSxjcmVhdGVTaGltOmZ1bmN0aW9uKCl7dmFyIGVsPURPQy5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKSxzaGltO2VsLmZyYW1lQm9yZGVyPSIwIjtlbC5jbGFzc05hbWU9RXh0LmJhc2VDU1NQcmVmaXgrInNoaW0iO2VsLnNyYz1FeHQuU1NMX1NFQ1VSRV9VUkw7c2hpbT1FeHQuZ2V0KHRoaXMuZG9tLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLHRoaXMuZG9tKSk7c2hpbS5hdXRvQm94QWRqdXN0PWZhbHNlO3JldHVybiBzaGltfSxhZGRLZXlMaXN0ZW5lcjpmdW5jdGlvbihrZXksZm4sc2NvcGUpe3ZhciBjb25maWc7aWYodHlwZW9mIGtleSE9Im9iamVjdCJ8fEV4dC5pc0FycmF5KGtleSkpe2NvbmZpZz17dGFyZ2V0OnRoaXMsa2V5OmtleSxmbjpmbixzY29wZTpzY29wZX19ZWxzZXtjb25maWc9e3RhcmdldDp0aGlzLGtleTprZXkua2V5LHNoaWZ0OmtleS5zaGlmdCxjdHJsOmtleS5jdHJsLGFsdDprZXkuYWx0LGZuOmZuLHNjb3BlOnNjb3BlfX1yZXR1cm4gbmV3IEV4dC51dGlsLktleU1hcChjb25maWcpfSxhZGRLZXlNYXA6ZnVuY3Rpb24oY29uZmlnKXtyZXR1cm4gbmV3IEV4dC51dGlsLktleU1hcChFeHQuYXBwbHkoe3RhcmdldDp0aGlzfSxjb25maWcpKX0sb246ZnVuY3Rpb24oZXZlbnROYW1lLGZuLHNjb3BlLG9wdGlvbnMpe0V4dC5FdmVudE1hbmFnZXIub24odGhpcyxldmVudE5hbWUsZm4sc2NvcGV8fHRoaXMsb3B0aW9ucyk7cmV0dXJuIHRoaXN9LHVuOmZ1bmN0aW9uKGV2ZW50TmFtZSxmbixzY29wZSl7RXh0LkV2ZW50TWFuYWdlci51bih0aGlzLGV2ZW50TmFtZSxmbixzY29wZXx8dGhpcyk7cmV0dXJuIHRoaXN9LHJlbW92ZUFsbExpc3RlbmVyczpmdW5jdGlvbigpe0V4dC5FdmVudE1hbmFnZXIucmVtb3ZlQWxsKHRoaXMpO3JldHVybiB0aGlzfSxwdXJnZUFsbExpc3RlbmVyczpmdW5jdGlvbigpe0V4dC5FdmVudE1hbmFnZXIucHVyZ2VFbGVtZW50KHRoaXMpO3JldHVybiB0aGlzfX0sZnVuY3Rpb24oKXt2YXIgRUM9RXh0LmNhY2hlLEVsPXRoaXMsQWJzdHJhY3RFbGVtZW50PUV4dC5kb20uQWJzdHJhY3RFbGVtZW50LGZvY3VzUmU9L2F8YnV0dG9ufGVtYmVkfGlmcmFtZXxpbWd8aW5wdXR8b2JqZWN0fHNlbGVjdHx0ZXh0YXJlYS9pLG5vblNwYWNlUmU9L1xTLyxzY3JpcHRUYWdSZT0vKD86PHNjcmlwdChbXj5dKik/PikoKFxufFxyfC4pKj8pKD86PFwvc2NyaXB0PikvaWcscmVwbGFjZVNjcmlwdFRhZ1JlPS8oPzo8c2NyaXB0Lio/PikoKFxufFxyfC4pKj8pKD86PFwvc2NyaXB0PikvaWcsc3JjUmU9L1xzc3JjPShbXCdcIl0pKC4qPylcMS9pLHR5cGVSZT0vXHN0eXBlPShbXCdcIl0pKC4qPylcMS9pLHVzZURvY0ZvcklkPSEoRXh0LmlzSUU2fHxFeHQuaXNJRTd8fEV4dC5pc0lFOCk7RWwuYm94TWFya3VwPSc8ZGl2IGNsYXNzPSJ7MH0tdGwiPjxkaXYgY2xhc3M9InswfS10ciI+PGRpdiBjbGFzcz0iezB9LXRjIj48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJ7MH0tbWwiPjxkaXYgY2xhc3M9InswfS1tciI+PGRpdiBjbGFzcz0iezB9LW1jIj48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJ7MH0tYmwiPjxkaXYgY2xhc3M9InswfS1iciI+PGRpdiBjbGFzcz0iezB9LWJjIj48L2Rpdj48L2Rpdj48L2Rpdj4nO2Z1bmN0aW9uIGdhcmJhZ2VDb2xsZWN0KCl7aWYoIUV4dC5lbmFibGVHYXJiYWdlQ29sbGVjdG9yKXtjbGVhckludGVydmFsKEVsLmNvbGxlY3RvclRocmVhZElkKX1lbHNle3ZhciBlaWQsZCxvLHQ7Zm9yKGVpZCBpbiBFQyl7aWYoIUVDLmhhc093blByb3BlcnR5KGVpZCkpe2NvbnRpbnVlfW89RUNbZWlkXTtpZihvLnNraXBHYXJiYWdlQ29sbGVjdGlvbil7Y29udGludWV9ZD1vLmRvbTtpZighZC5wYXJlbnROb2RlfHwoIWQub2Zmc2V0UGFyZW50JiYhRXh0LmdldEVsZW1lbnRCeUlkKGVpZCkpKXtpZihkJiZFeHQuZW5hYmxlTGlzdGVuZXJDb2xsZWN0aW9uKXtFeHQuRXZlbnRNYW5hZ2VyLnJlbW92ZUFsbChkKX1kZWxldGUgRUNbZWlkXX19aWYoRXh0LmlzSUUpe3Q9e307Zm9yKGVpZCBpbiBFQyl7aWYoIUVDLmhhc093blByb3BlcnR5KGVpZCkpe2NvbnRpbnVlfXRbZWlkXT1FQ1tlaWRdfUVDPUV4dC5jYWNoZT10fX19RWwuY29sbGVjdG9yVGhyZWFkSWQ9c2V0SW50ZXJ2YWwoZ2FyYmFnZUNvbGxlY3QsMzAwMDApO0VsLmFkZE1ldGhvZHMoe21vbml0b3JNb3VzZUxlYXZlOmZ1bmN0aW9uKGRlbGF5LGhhbmRsZXIsc2NvcGUpe3ZhciBtZT10aGlzLHRpbWVyLGxpc3RlbmVycz17bW91c2VsZWF2ZTpmdW5jdGlvbihlKXt0aW1lcj1zZXRUaW1lb3V0KEV4dC5GdW5jdGlvbi5iaW5kKGhhbmRsZXIsc2NvcGV8fG1lLFtlXSksZGVsYXkpfSxtb3VzZWVudGVyOmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRpbWVyKX0sZnJlZXplRXZlbnQ6dHJ1ZX07bWUub24obGlzdGVuZXJzKTtyZXR1cm4gbGlzdGVuZXJzfSxzd2FsbG93RXZlbnQ6ZnVuY3Rpb24oZXZlbnROYW1lLHByZXZlbnREZWZhdWx0KXt2YXIgbWU9dGhpcyxlLGVMZW47ZnVuY3Rpb24gZm4oZSl7ZS5zdG9wUHJvcGFnYXRpb24oKTtpZihwcmV2ZW50RGVmYXVsdCl7ZS5wcmV2ZW50RGVmYXVsdCgpfX1pZihFeHQuaXNBcnJheShldmVudE5hbWUpKXtlTGVuPWV2ZW50TmFtZS5sZW5ndGg7Zm9yKGU9MDtlPGVMZW47ZSsrKXttZS5vbihldmVudE5hbWVbZV0sZm4pfXJldHVybiBtZX1tZS5vbihldmVudE5hbWUsZm4pO3JldHVybiBtZX0scmVsYXlFdmVudDpmdW5jdGlvbihldmVudE5hbWUsb2JzZXJ2YWJsZSl7dGhpcy5vbihldmVudE5hbWUsZnVuY3Rpb24oZSl7b2JzZXJ2YWJsZS5maXJlRXZlbnQoZXZlbnROYW1lLGUpfSl9LGNsZWFuOmZ1bmN0aW9uKGZvcmNlUmVjbGVhbil7dmFyIG1lPXRoaXMsZG9tPW1lLmRvbSxkYXRhPShtZS4kY2FjaGV8fG1lLmdldENhY2hlKCkpLmRhdGEsbj1kb20uZmlyc3RDaGlsZCxuaT0tMSxueDtpZihkYXRhLmlzQ2xlYW5lZCYmZm9yY2VSZWNsZWFuIT09dHJ1ZSl7cmV0dXJuIG1lfXdoaWxlKG4pe254PW4ubmV4dFNpYmxpbmc7aWYobi5ub2RlVHlwZT09Myl7aWYoIShub25TcGFjZVJlLnRlc3Qobi5ub2RlVmFsdWUpKSl7ZG9tLnJlbW92ZUNoaWxkKG4pfWVsc2V7aWYobngmJm54Lm5vZGVUeXBlPT0zKXtuLmFwcGVuZERhdGEoRXh0LlN0cmluZy50cmltKG54LmRhdGEpKTtkb20ucmVtb3ZlQ2hpbGQobngpO254PW4ubmV4dFNpYmxpbmc7bi5ub2RlSW5kZXg9KytuaX19fWVsc2V7RXh0LmZseShuKS5jbGVhbigpO24ubm9kZUluZGV4PSsrbml9bj1ueH1kYXRhLmlzQ2xlYW5lZD10cnVlO3JldHVybiBtZX0sbG9hZDpmdW5jdGlvbihvcHRpb25zKXt0aGlzLmdldExvYWRlcigpLmxvYWQob3B0aW9ucyk7cmV0dXJuIHRoaXN9LGdldExvYWRlcjpmdW5jdGlvbigpe3ZhciBtZT10aGlzLGRhdGE9KG1lLiRjYWNoZXx8bWUuZ2V0Q2FjaGUoKSkuZGF0YSxsb2FkZXI9ZGF0YS5sb2FkZXI7aWYoIWxvYWRlcil7ZGF0YS5sb2FkZXI9bG9hZGVyPW5ldyBFeHQuRWxlbWVudExvYWRlcih7dGFyZ2V0Om1lfSl9cmV0dXJuIGxvYWRlcn0sc3luY0NvbnRlbnQ6ZnVuY3Rpb24oc291cmNlKXtzb3VyY2U9RXh0LmdldERvbShzb3VyY2UpO3ZhciBtZT10aGlzLHNvdXJjZU5vZGVzPXNvdXJjZS5jaGlsZE5vZGVzLHNvdXJjZUxlbj1zb3VyY2VOb2Rlcy5sZW5ndGgsZGVzdD1tZS5kb20sZGVzdE5vZGVzPWRlc3QuY2hpbGROb2RlcyxkZXN0TGVuPWRlc3ROb2Rlcy5sZW5ndGgsaSxkZXN0Tm9kZSxzb3VyY2VOb2RlLG5vZGVUeXBlO2Rlc3Quc3R5bGUuY3NzVGV4dD1zb3VyY2Uuc3R5bGUuY3NzVGV4dDtkZXN0LmNsYXNzTmFtZT1zb3VyY2UuY2xhc3NOYW1lO2lmKHNvdXJjZUxlbiE9PWRlc3RMZW4pe3NvdXJjZS5pbm5lckhUTUw9ZGVzdC5pbm5lckhUTUw7cmV0dXJufWZvcihpPTA7aTxzb3VyY2VMZW47aSsrKXtzb3VyY2VOb2RlPXNvdXJjZU5vZGVzW2ldO2Rlc3ROb2RlPWRlc3ROb2Rlc1tpXTtub2RlVHlwZT1zb3VyY2VOb2RlLm5vZGVUeXBlO2lmKG5vZGVUeXBlIT09ZGVzdE5vZGUubm9kZVR5cGV8fChub2RlVHlwZT09PTEmJnNvdXJjZU5vZGUudGFnTmFtZSE9PWRlc3ROb2RlLnRhZ05hbWUpKXtkZXN0LmlubmVySFRNTD1zb3VyY2UuaW5uZXJIVE1MO3JldHVybn1pZihub2RlVHlwZT09PTMpe2Rlc3ROb2RlLmRhdGE9c291cmNlTm9kZS5kYXRhfWVsc2V7aWYoc291cmNlTm9kZS5pZCYmZGVzdE5vZGUuaWQhPT1zb3VyY2VOb2RlLmlkKXtkZXN0Tm9kZS5pZD1zb3VyY2VOb2RlLmlkfWRlc3ROb2RlLnN0eWxlLmNzc1RleHQ9c291cmNlTm9kZS5zdHlsZS5jc3NUZXh0O2Rlc3ROb2RlLmNsYXNzTmFtZT1zb3VyY2VOb2RlLmNsYXNzTmFtZTtFeHQuZmx5KGRlc3ROb2RlKS5zeW5jQ29udGVudChzb3VyY2VOb2RlKX19fSx1cGRhdGU6ZnVuY3Rpb24oaHRtbCxsb2FkU2NyaXB0cyxjYWxsYmFjayl7dmFyIG1lPXRoaXMsaWQsZG9tLGludGVydmFsO2lmKCFtZS5kb20pe3JldHVybiBtZX1odG1sPWh0bWx8fCIiO2RvbT1tZS5kb207aWYobG9hZFNjcmlwdHMhPT10cnVlKXtkb20uaW5uZXJIVE1MPWh0bWw7RXh0LmNhbGxiYWNrKGNhbGxiYWNrLG1lKTtyZXR1cm4gbWV9aWQ9RXh0LmlkKCk7aHRtbCs9JzxzcGFuIGlkPSInK2lkKyciPjwvc3Bhbj4nO2ludGVydmFsPXNldEludGVydmFsKGZ1bmN0aW9uKCl7dmFyIGhkLG1hdGNoLGF0dHJzLHNyY01hdGNoLHR5cGVNYXRjaCxlbCxzO2lmKCEoZWw9RE9DLmdldEVsZW1lbnRCeUlkKGlkKSkpe3JldHVybiBmYWxzZX1jbGVhckludGVydmFsKGludGVydmFsKTtFeHQucmVtb3ZlTm9kZShlbCk7aGQ9RXh0LmdldEhlYWQoKS5kb207d2hpbGUoKG1hdGNoPXNjcmlwdFRhZ1JlLmV4ZWMoaHRtbCkpKXthdHRycz1tYXRjaFsxXTtzcmNNYXRjaD1hdHRycz9hdHRycy5tYXRjaChzcmNSZSk6ZmFsc2U7aWYoc3JjTWF0Y2gmJnNyY01hdGNoWzJdKXtzPURPQy5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtzLnNyYz1zcmNNYXRjaFsyXTt0eXBlTWF0Y2g9YXR0cnMubWF0Y2godHlwZVJlKTtpZih0eXBlTWF0Y2gmJnR5cGVNYXRjaFsyXSl7cy50eXBlPXR5cGVNYXRjaFsyXX1oZC5hcHBlbmRDaGlsZChzKX1lbHNle2lmKG1hdGNoWzJdJiZtYXRjaFsyXS5sZW5ndGg+MCl7aWYod2luZG93LmV4ZWNTY3JpcHQpe3dpbmRvdy5leGVjU2NyaXB0KG1hdGNoWzJdKX1lbHNle3dpbmRvdy5ldmFsKG1hdGNoWzJdKX19fX1FeHQuY2FsbGJhY2soY2FsbGJhY2ssbWUpfSwyMCk7ZG9tLmlubmVySFRNTD1odG1sLnJlcGxhY2UocmVwbGFjZVNjcmlwdFRhZ1JlLCIiKTtyZXR1cm4gbWV9LHJlbW92ZUFsbExpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlQW5jaG9yKCk7RXh0LkV2ZW50TWFuYWdlci5yZW1vdmVBbGwodGhpcy5kb20pO3JldHVybiB0aGlzfSxjcmVhdGVQcm94eTpmdW5jdGlvbihjb25maWcscmVuZGVyVG8sbWF0Y2hCb3gpe2NvbmZpZz0odHlwZW9mIGNvbmZpZz09Im9iamVjdCIpP2NvbmZpZzp7dGFnOiJkaXYiLGNsczpjb25maWd9O3ZhciBtZT10aGlzLHByb3h5PXJlbmRlclRvP0V4dC5Eb21IZWxwZXIuYXBwZW5kKHJlbmRlclRvLGNvbmZpZyx0cnVlKTpFeHQuRG9tSGVscGVyLmluc2VydEJlZm9yZShtZS5kb20sY29uZmlnLHRydWUpO3Byb3h5LnNldFZpc2liaWxpdHlNb2RlKEVsZW1lbnQuRElTUExBWSk7cHJveHkuaGlkZSgpO2lmKG1hdGNoQm94JiZtZS5zZXRCb3gmJm1lLmdldEJveCl7cHJveHkuc2V0Qm94KG1lLmdldEJveCgpKX1yZXR1cm4gcHJveHl9LGdldFNjb3BlUGFyZW50OmZ1bmN0aW9uKCl7dmFyIHBhcmVudD10aGlzLmRvbS5wYXJlbnROb2RlO2lmKEV4dC5zY29wZVJlc2V0Q1NTKXtwYXJlbnQ9cGFyZW50LnBhcmVudE5vZGU7aWYoIUV4dC5zdXBwb3J0cy5DU1MzTGluZWFyR3JhZGllbnR8fCFFeHQuc3VwcG9ydHMuQ1NTM0JvcmRlclJhZGl1cyl7cGFyZW50PXBhcmVudC5wYXJlbnROb2RlfX1yZXR1cm4gcGFyZW50fSxuZWVkc1RhYkluZGV4OmZ1bmN0aW9uKCl7aWYodGhpcy5kb20pe2lmKCh0aGlzLmRvbS5ub2RlTmFtZT09PSJhIikmJighdGhpcy5kb20uaHJlZikpe3JldHVybiB0cnVlfXJldHVybiAhZm9jdXNSZS50ZXN0KHRoaXMuZG9tLm5vZGVOYW1lKX19LGZvY3VzYWJsZTpmdW5jdGlvbigpe3ZhciBkb209dGhpcy5kb20sbm9kZU5hbWU9ZG9tLm5vZGVOYW1lLGNhbkZvY3VzPWZhbHNlO2lmKCFkb20uZGlzYWJsZWQpe2lmKGZvY3VzUmUudGVzdChub2RlTmFtZSkpe2lmKChub2RlTmFtZSE9PSJhIil8fGRvbS5ocmVmKXtjYW5Gb2N1cz10cnVlfX1lbHNle2NhbkZvY3VzPSFpc05hTihkb20udGFiSW5kZXgpfX1yZXR1cm4gY2FuRm9jdXMmJnRoaXMuaXNWaXNpYmxlKHRydWUpfX0pO2lmKEV4dC5pc0lFKXtFbC5wcm90b3R5cGUuZ2V0QnlJZD1mdW5jdGlvbihpZCxhc0RvbSl7dmFyIGRvbT10aGlzLmRvbSxjYWNoZUl0ZW0sZWwscmV0O2lmKGRvbSl7ZWw9KHVzZURvY0ZvcklkJiZET0MuZ2V0RWxlbWVudEJ5SWQoaWQpKXx8ZG9tLmFsbFtpZF07aWYoZWwpe2lmKGFzRG9tKXtyZXQ9ZWx9ZWxzZXtjYWNoZUl0ZW09RUNbaWRdO2lmKGNhY2hlSXRlbSYmY2FjaGVJdGVtLmVsKXtyZXQ9RXh0LnVwZGF0ZUNhY2hlRW50cnkoY2FjaGVJdGVtLGVsKS5lbH1lbHNle3JldD1uZXcgRWxlbWVudChlbCl9fXJldHVybiByZXR9fXJldHVybiBhc0RvbT9FeHQuZ2V0RG9tKGlkKTpFbC5nZXQoaWQpfX1FbC5jcmVhdGVBbGlhcyh7YWRkTGlzdGVuZXI6Im9uIixyZW1vdmVMaXN0ZW5lcjoidW4iLGNsZWFyTGlzdGVuZXJzOiJyZW1vdmVBbGxMaXN0ZW5lcnMifSk7RWwuRmx5PUFic3RyYWN0RWxlbWVudC5GbHk9bmV3IEV4dC5DbGFzcyh7ZXh0ZW5kOkVsLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGRvbSl7dGhpcy5kb209ZG9tfSxhdHRhY2g6QWJzdHJhY3RFbGVtZW50LkZseS5wcm90b3R5cGUuYXR0YWNofSk7aWYoRXh0LmlzSUUpe0V4dC5nZXRFbGVtZW50QnlJZD1mdW5jdGlvbihpZCl7dmFyIGVsPURPQy5nZXRFbGVtZW50QnlJZChpZCksZGV0YWNoZWRCb2R5RWw7aWYoIWVsJiYoZGV0YWNoZWRCb2R5RWw9QWJzdHJhY3RFbGVtZW50LmRldGFjaGVkQm9keUVsKSl7ZWw9ZGV0YWNoZWRCb2R5RWwuZG9tLmFsbFtpZF19cmV0dXJuIGVsfX1lbHNle2lmKCFET0MucXVlcnlTZWxlY3Rvcil7RXh0LmdldERldGFjaGVkQm9keT1FeHQuZ2V0Qm9keTtFeHQuZ2V0RWxlbWVudEJ5SWQ9ZnVuY3Rpb24oaWQpe3JldHVybiBET0MuZ2V0RWxlbWVudEJ5SWQoaWQpfX19fSl9KCkpO0V4dC5kb20uRWxlbWVudC5vdmVycmlkZSgoZnVuY3Rpb24oKXt2YXIgZD1kb2N1bWVudCxjPXdpbmRvdyxhPS9eKFthLXpdKyktKFthLXpdKykoXD8pPyQvLGI9TWF0aC5yb3VuZDtyZXR1cm57Z2V0QW5jaG9yWFk6ZnVuY3Rpb24oaixvLGgpe2o9KGp8fCJ0bCIpLnRvTG93ZXJDYXNlKCk7aD1ofHx7fTt2YXIgbT10aGlzLGk9bS5kb209PWQuYm9keXx8bS5kb209PWQsZT1oLndpZHRofHxpP0V4dC5kb20uRWxlbWVudC5nZXRWaWV3V2lkdGgoKTptLmdldFdpZHRoKCksZz1oLmhlaWdodHx8aT9FeHQuZG9tLkVsZW1lbnQuZ2V0Vmlld0hlaWdodCgpOm0uZ2V0SGVpZ2h0KCkscSxuPW0uZ2V0WFkoKSxwPW0uZ2V0U2Nyb2xsKCksbD1pP3AubGVmdDohbz9uWzBdOjAsaz1pP3AudG9wOiFvP25bMV06MDtzd2l0Y2goail7Y2FzZSJ0bCI6cT1bMCwwXTticmVhaztjYXNlImJsIjpxPVswLGddO2JyZWFrO2Nhc2UidHIiOnE9W2UsMF07YnJlYWs7Y2FzZSJjIjpxPVtiKGUqMC41KSxiKGcqMC41KV07YnJlYWs7Y2FzZSJ0IjpxPVtiKGUqMC41KSwwXTticmVhaztjYXNlImwiOnE9WzAsYihnKjAuNSldO2JyZWFrO2Nhc2UiciI6cT1bZSxiKGcqMC41KV07YnJlYWs7Y2FzZSJiIjpxPVtiKGUqMC41KSxnXTticmVhaztjYXNlImJyIjpxPVtlLGddfXJldHVybltxWzBdK2wscVsxXStrXX0sZ2V0QWxpZ25Ub1hZOmZ1bmN0aW9uKG0sRyxqKXttPUV4dC5nZXQobSk7aWYoIW18fCFtLmRvbSl7fWo9anx8WzAsMF07Rz0oIUd8fEc9PSI/Ij8idGwtYmw/IjooISgvLS8pLnRlc3QoRykmJkchPT0iIj8idGwtIitHOkd8fCJ0bC1ibCIpKS50b0xvd2VyQ2FzZSgpO3ZhciBIPXRoaXMsbCx3LHEsbyxrLHosQSxFPUV4dC5kb20uRWxlbWVudC5nZXRWaWV3V2lkdGgoKS0xMCxpPUV4dC5kb20uRWxlbWVudC5nZXRWaWV3SGVpZ2h0KCktMTAsZyxoLG4scCx1LHYsRj1kLmRvY3VtZW50RWxlbWVudCxzPWQuYm9keSxEPShGLnNjcm9sbExlZnR8fHMuc2Nyb2xsTGVmdHx8MCksQj0oRi5zY3JvbGxUb3B8fHMuc2Nyb2xsVG9wfHwwKSxDLHQscixlPUcubWF0Y2goYSk7dD1lWzFdO3I9ZVsyXTtDPSEhZVszXTtsPUguZ2V0QW5jaG9yWFkodCx0cnVlKTt3PW0uZ2V0QW5jaG9yWFkocixmYWxzZSk7cT13WzBdLWxbMF0ralswXTtvPXdbMV0tbFsxXStqWzFdO2lmKEMpe2s9SC5nZXRXaWR0aCgpO3o9SC5nZXRIZWlnaHQoKTtBPW0uZ2V0UmVnaW9uKCk7Zz10LmNoYXJBdCgwKTtoPXQuY2hhckF0KHQubGVuZ3RoLTEpO249ci5jaGFyQXQoMCk7cD1yLmNoYXJBdChyLmxlbmd0aC0xKTt1PSgoZz09InQiJiZuPT0iYiIpfHwoZz09ImIiJiZuPT0idCIpKTt2PSgoaD09InIiJiZwPT0ibCIpfHwoaD09ImwiJiZwPT0iciIpKTtpZihxK2s+RStEKXtxPXY/QS5sZWZ0LWs6RStELWt9aWYocTxEKXtxPXY/QS5yaWdodDpEfWlmKG8rej5pK0Ipe289dT9BLnRvcC16OmkrQi16fWlmKG88Qil7bz11P0EuYm90dG9tOkJ9fXJldHVybltxLG9dfSxhbmNob3JUbzpmdW5jdGlvbihnLGwsaCxlLG8scCl7dmFyIG09dGhpcyxqPW0uZG9tLG49IUV4dC5pc0VtcHR5KG8pLGk9ZnVuY3Rpb24oKXtFeHQuZmx5KGopLmFsaWduVG8oZyxsLGgsZSk7RXh0LmNhbGxiYWNrKHAsRXh0LmZseShqKSl9LGs9dGhpcy5nZXRBbmNob3IoKTt0aGlzLnJlbW92ZUFuY2hvcigpO0V4dC5hcHBseShrLHtmbjppLHNjcm9sbDpufSk7RXh0LkV2ZW50TWFuYWdlci5vbldpbmRvd1Jlc2l6ZShpLG51bGwpO2lmKG4pe0V4dC5FdmVudE1hbmFnZXIub24oYywic2Nyb2xsIixpLG51bGwse2J1ZmZlcjohaXNOYU4obyk/bzo1MH0pfWkuY2FsbChtKTtyZXR1cm4gbX0scmVtb3ZlQW5jaG9yOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcyxlPXRoaXMuZ2V0QW5jaG9yKCk7aWYoZSYmZS5mbil7RXh0LkV2ZW50TWFuYWdlci5yZW1vdmVSZXNpemVMaXN0ZW5lcihlLmZuKTtpZihlLnNjcm9sbCl7RXh0LkV2ZW50TWFuYWdlci51bihjLCJzY3JvbGwiLGUuZm4pfWRlbGV0ZSBlLmZufXJldHVybiBnfSxnZXRBbGlnblZlY3RvcjpmdW5jdGlvbihoLGcsail7dmFyIGk9dGhpcyxlPWkuZ2V0WFkoKSxrPWkuZ2V0QWxpZ25Ub1hZKGgsZyxqKTtoPUV4dC5nZXQoaCk7a1swXS09ZVswXTtrWzFdLT1lWzFdO3JldHVybiBrfSxhbGlnblRvOmZ1bmN0aW9uKGgsZSxqLGcpe3ZhciBpPXRoaXM7cmV0dXJuIGkuc2V0WFkoaS5nZXRBbGlnblRvWFkoaCxlLGopLGkuYW5pbSYmISFnP2kuYW5pbShnKTpmYWxzZSl9LGdldENvbnN0cmFpblZlY3RvcjpmdW5jdGlvbihpLGcpe2lmKCEoaSBpbnN0YW5jZW9mIEV4dC51dGlsLlJlZ2lvbikpe2k9RXh0LmdldChpKS5nZXRWaWV3UmVnaW9uKCl9dmFyIGs9dGhpcy5nZXRSZWdpb24oKSxlPVswLDBdLGo9KHRoaXMuc2hhZG93JiYhdGhpcy5zaGFkb3dEaXNhYmxlZCk/dGhpcy5zaGFkb3cuZ2V0U2hhZG93U2l6ZSgpOnVuZGVmaW5lZCxoPWZhbHNlO2lmKGcpe2sudHJhbnNsYXRlQnkoZ1swXS1rLngsZ1sxXS1rLnkpfWlmKGope2kuYWRqdXN0KGpbMF0sLWpbMV0sLWpbMl0salszXSl9aWYoay5yaWdodD5pLnJpZ2h0KXtoPXRydWU7ZVswXT0oaS5yaWdodC1rLnJpZ2h0KX1pZihrLmxlZnQrZVswXTxpLmxlZnQpe2g9dHJ1ZTtlWzBdPShpLmxlZnQtay5sZWZ0KX1pZihrLmJvdHRvbT5pLmJvdHRvbSl7aD10cnVlO2VbMV09KGkuYm90dG9tLWsuYm90dG9tKX1pZihrLnRvcCtlWzFdPGkudG9wKXtoPXRydWU7ZVsxXT0oaS50b3Atay50b3ApfXJldHVybiBoP2U6ZmFsc2V9LGdldENlbnRlclhZOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QWxpZ25Ub1hZKGQsImMtYyIpfSxjZW50ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYWxpZ25UbyhlfHxkLCJjLWMiKX19fSgpKSk7RXh0LmRvbS5FbGVtZW50Lm92ZXJyaWRlKHthbmltYXRlOmZ1bmN0aW9uKGIpe3ZhciBkPXRoaXMsYyxlLGE9ZC5kb20uaWR8fEV4dC5pZChkLmRvbSk7aWYoIUV4dC5meC5NYW5hZ2VyLmhhc0Z4QmxvY2soYSkpe2lmKGIubGlzdGVuZXJzKXtjPWIubGlzdGVuZXJzO2RlbGV0ZSBiLmxpc3RlbmVyc31pZihiLmludGVybmFsTGlzdGVuZXJzKXtiLmxpc3RlbmVycz1iLmludGVybmFsTGlzdGVuZXJzO2RlbGV0ZSBiLmludGVybmFsTGlzdGVuZXJzfWU9bmV3IEV4dC5meC5BbmltKGQuYW5pbShiKSk7aWYoYyl7ZS5vbihjKX1FeHQuZnguTWFuYWdlci5xdWV1ZUZ4KGUpfXJldHVybiBkfSxhbmltOmZ1bmN0aW9uKGEpe2lmKCFFeHQuaXNPYmplY3QoYSkpe3JldHVybihhKT97fTpmYWxzZX12YXIgYj10aGlzLGM9YS5kdXJhdGlvbnx8RXh0LmZ4LkFuaW0ucHJvdG90eXBlLmR1cmF0aW9uLGU9YS5lYXNpbmd8fCJlYXNlIixkO2lmKGEuc3RvcEFuaW1hdGlvbil7Yi5zdG9wQW5pbWF0aW9uKCl9RXh0LmFwcGx5SWYoYSxFeHQuZnguTWFuYWdlci5nZXRGeERlZmF1bHRzKGIuaWQpKTtFeHQuZnguTWFuYWdlci5zZXRGeERlZmF1bHRzKGIuaWQse2RlbGF5OjB9KTtkPXt0YXJnZXQ6Yi5kb20scmVtb3ZlOmEucmVtb3ZlLGFsdGVybmF0ZTphLmFsdGVybmF0ZXx8ZmFsc2UsZHVyYXRpb246YyxlYXNpbmc6ZSxjYWxsYmFjazphLmNhbGxiYWNrLGxpc3RlbmVyczphLmxpc3RlbmVycyxpdGVyYXRpb25zOmEuaXRlcmF0aW9uc3x8MSxzY29wZTphLnNjb3BlLGJsb2NrOmEuYmxvY2ssY29uY3VycmVudDphLmNvbmN1cnJlbnQsZGVsYXk6YS5kZWxheXx8MCxwYXVzZWQ6dHJ1ZSxrZXlmcmFtZXM6YS5rZXlmcmFtZXMsZnJvbTphLmZyb218fHt9LHRvOkV4dC5hcHBseSh7fSxhKX07RXh0LmFwcGx5KGQudG8sYS50byk7ZGVsZXRlIGQudG8udG87ZGVsZXRlIGQudG8uZnJvbTtkZWxldGUgZC50by5yZW1vdmU7ZGVsZXRlIGQudG8uYWx0ZXJuYXRlO2RlbGV0ZSBkLnRvLmtleWZyYW1lcztkZWxldGUgZC50by5pdGVyYXRpb25zO2RlbGV0ZSBkLnRvLmxpc3RlbmVycztkZWxldGUgZC50by50YXJnZXQ7ZGVsZXRlIGQudG8ucGF1c2VkO2RlbGV0ZSBkLnRvLmNhbGxiYWNrO2RlbGV0ZSBkLnRvLnNjb3BlO2RlbGV0ZSBkLnRvLmR1cmF0aW9uO2RlbGV0ZSBkLnRvLmVhc2luZztkZWxldGUgZC50by5jb25jdXJyZW50O2RlbGV0ZSBkLnRvLmJsb2NrO2RlbGV0ZSBkLnRvLnN0b3BBbmltYXRpb247ZGVsZXRlIGQudG8uZGVsYXk7cmV0dXJuIGR9LHNsaWRlSW46ZnVuY3Rpb24oYyxiLGQpe3ZhciBnPXRoaXMsaj1nLmRvbS5zdHlsZSxpLGEsZSxoO2M9Y3x8InQiO2I9Ynx8e307aT1mdW5jdGlvbigpe3ZhciBuPXRoaXMsbT1iLmxpc3RlbmVycyxvLGsscCxsO2lmKCFkKXtnLmZpeERpc3BsYXkoKX1vPWcuZ2V0Qm94KCk7aWYoKGM9PSJ0Inx8Yz09ImIiKSYmby5oZWlnaHQ9PT0wKXtvLmhlaWdodD1nLmRvbS5zY3JvbGxIZWlnaHR9ZWxzZXtpZigoYz09ImwifHxjPT0iciIpJiZvLndpZHRoPT09MCl7by53aWR0aD1nLmRvbS5zY3JvbGxXaWR0aH19az1nLmdldFN0eWxlcygid2lkdGgiLCJoZWlnaHQiLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJwb3NpdGlvbiIsInotaW5kZXgiLHRydWUpO2cuc2V0U2l6ZShvLndpZHRoLG8uaGVpZ2h0KTtpZihiLnByZXNlcnZlU2Nyb2xsKXtlPWcuY2FjaGVTY3JvbGxWYWx1ZXMoKX1sPWcud3JhcCh7aWQ6RXh0LmlkKCkrIi1hbmltLXdyYXAtZm9yLSIrZy5pZCxzdHlsZTp7dmlzaWJpbGl0eTpkPyJ2aXNpYmxlIjoiaGlkZGVuIn19KTtoPWwuZG9tLnBhcmVudE5vZGU7bC5zZXRQb3NpdGlvbmluZyhnLmdldFBvc2l0aW9uaW5nKCkpO2lmKGwuaXNTdHlsZSgicG9zaXRpb24iLCJzdGF0aWMiKSl7bC5wb3NpdGlvbigicmVsYXRpdmUiKX1nLmNsZWFyUG9zaXRpb25pbmcoImF1dG8iKTtsLmNsaXAoKTtpZihlKXtlKCl9Zy5zZXRTdHlsZSh7dmlzaWJpbGl0eToiIixwb3NpdGlvbjoiYWJzb2x1dGUifSk7aWYoZCl7bC5zZXRTaXplKG8ud2lkdGgsby5oZWlnaHQpfXN3aXRjaChjKXtjYXNlInQiOnA9e2Zyb206e3dpZHRoOm8ud2lkdGgrInB4IixoZWlnaHQ6IjBweCJ9LHRvOnt3aWR0aDpvLndpZHRoKyJweCIsaGVpZ2h0Om8uaGVpZ2h0KyJweCJ9fTtqLmJvdHRvbT0iMHB4IjticmVhaztjYXNlImwiOnA9e2Zyb206e3dpZHRoOiIwcHgiLGhlaWdodDpvLmhlaWdodCsicHgifSx0bzp7d2lkdGg6by53aWR0aCsicHgiLGhlaWdodDpvLmhlaWdodCsicHgifX07ai5yaWdodD0iMHB4IjticmVhaztjYXNlInIiOnA9e2Zyb206e3g6by54K28ud2lkdGgsd2lkdGg6IjBweCIsaGVpZ2h0Om8uaGVpZ2h0KyJweCJ9LHRvOnt4Om8ueCx3aWR0aDpvLndpZHRoKyJweCIsaGVpZ2h0Om8uaGVpZ2h0KyJweCJ9fTticmVhaztjYXNlImIiOnA9e2Zyb206e3k6by55K28uaGVpZ2h0LHdpZHRoOm8ud2lkdGgrInB4IixoZWlnaHQ6IjBweCJ9LHRvOnt5Om8ueSx3aWR0aDpvLndpZHRoKyJweCIsaGVpZ2h0Om8uaGVpZ2h0KyJweCJ9fTticmVhaztjYXNlInRsIjpwPXtmcm9tOnt4Om8ueCx5Om8ueSx3aWR0aDoiMHB4IixoZWlnaHQ6IjBweCJ9LHRvOnt3aWR0aDpvLndpZHRoKyJweCIsaGVpZ2h0Om8uaGVpZ2h0KyJweCJ9fTtqLmJvdHRvbT0iMHB4IjtqLnJpZ2h0PSIwcHgiO2JyZWFrO2Nhc2UiYmwiOnA9e2Zyb206e3k6by55K28uaGVpZ2h0LHdpZHRoOiIwcHgiLGhlaWdodDoiMHB4In0sdG86e3k6by55LHdpZHRoOm8ud2lkdGgrInB4IixoZWlnaHQ6by5oZWlnaHQrInB4In19O2ouYm90dG9tPSIwcHgiO2JyZWFrO2Nhc2UiYnIiOnA9e2Zyb206e3g6by54K28ud2lkdGgseTpvLnkrby5oZWlnaHQsd2lkdGg6IjBweCIsaGVpZ2h0OiIwcHgifSx0bzp7eDpvLngseTpvLnksd2lkdGg6by53aWR0aCsicHgiLGhlaWdodDpvLmhlaWdodCsicHgifX07YnJlYWs7Y2FzZSJ0ciI6cD17ZnJvbTp7eDpvLngrby53aWR0aCx3aWR0aDoiMHB4IixoZWlnaHQ6IjBweCJ9LHRvOnt4Om8ueCx3aWR0aDpvLndpZHRoKyJweCIsaGVpZ2h0Om8uaGVpZ2h0KyJweCJ9fTtqLnJpZ2h0PSIwcHgiO2JyZWFrfWwuc2hvdygpO2E9RXh0LmFwcGx5KHt9LGIpO2RlbGV0ZSBhLmxpc3RlbmVyczthPW5ldyBFeHQuZnguQW5pbShFeHQuYXBwbHlJZihhLHt0YXJnZXQ6bCxkdXJhdGlvbjo1MDAsZWFzaW5nOiJlYXNlLW91dCIsZnJvbTpkP3AudG86cC5mcm9tLHRvOmQ/cC5mcm9tOnAudG99KSk7YS5vbigiYWZ0ZXJhbmltYXRlIixmdW5jdGlvbigpe2cuc2V0U3R5bGUoayk7aWYoZCl7aWYoYi51c2VEaXNwbGF5KXtnLnNldERpc3BsYXllZChmYWxzZSl9ZWxzZXtnLmhpZGUoKX19aWYobC5kb20pe2lmKGwuZG9tLnBhcmVudE5vZGUpe2wuZG9tLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGcuZG9tLGwuZG9tKX1lbHNle2guYXBwZW5kQ2hpbGQoZy5kb20pfWwucmVtb3ZlKCl9aWYoZSl7ZSgpfW4uZW5kKCl9KTtpZihtKXthLm9uKG0pfX07Zy5hbmltYXRlKHtkdXJhdGlvbjpiLmR1cmF0aW9uP01hdGgubWF4KGIuZHVyYXRpb24sNTAwKSoyOjEwMDAsbGlzdGVuZXJzOntiZWZvcmVhbmltYXRlOml9fSk7cmV0dXJuIGd9LHNsaWRlT3V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuc2xpZGVJbihhLGIsdHJ1ZSl9LHB1ZmY6ZnVuY3Rpb24oZSl7dmFyIGQ9dGhpcyxiLGM9ZC5nZXRCb3goKSxhPWQuZ2V0U3R5bGVzKCJ3aWR0aCIsImhlaWdodCIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsInBvc2l0aW9uIiwiei1pbmRleCIsImZvbnQtc2l6ZSIsIm9wYWNpdHkiLHRydWUpO2U9RXh0LmFwcGx5SWYoZXx8e30se2Vhc2luZzoiZWFzZS1vdXQiLGR1cmF0aW9uOjUwMCx1c2VEaXNwbGF5OmZhbHNlfSk7Yj1mdW5jdGlvbigpe2QuY2xlYXJPcGFjaXR5KCk7ZC5zaG93KCk7dGhpcy50bz17d2lkdGg6Yy53aWR0aCoyLGhlaWdodDpjLmhlaWdodCoyLHg6Yy54LShjLndpZHRoLzIpLHk6Yy55LShjLmhlaWdodC8yKSxvcGFjaXR5OjAsZm9udFNpemU6IjIwMCUifTt0aGlzLm9uKCJhZnRlcmFuaW1hdGUiLGZ1bmN0aW9uKCl7aWYoZC5kb20pe2lmKGUudXNlRGlzcGxheSl7ZC5zZXREaXNwbGF5ZWQoZmFsc2UpfWVsc2V7ZC5oaWRlKCl9ZC5zZXRTdHlsZShhKTtlLmNhbGxiYWNrLmNhbGwoZS5zY29wZSl9fSl9O2QuYW5pbWF0ZSh7ZHVyYXRpb246ZS5kdXJhdGlvbixlYXNpbmc6ZS5lYXNpbmcsbGlzdGVuZXJzOntiZWZvcmVhbmltYXRlOntmbjpifX19KTtyZXR1cm4gZH0sc3dpdGNoT2ZmOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYTtjPUV4dC5hcHBseUlmKGN8fHt9LHtlYXNpbmc6ImVhc2UtaW4iLGR1cmF0aW9uOjUwMCxyZW1vdmU6ZmFsc2UsdXNlRGlzcGxheTpmYWxzZX0pO2E9ZnVuY3Rpb24oKXt2YXIgaD10aGlzLGc9Yi5nZXRTaXplKCksaT1iLmdldFhZKCksZSxkO2IuY2xlYXJPcGFjaXR5KCk7Yi5jbGlwKCk7ZD1iLmdldFBvc2l0aW9uaW5nKCk7ZT1uZXcgRXh0LmZ4LkFuaW1hdG9yKHt0YXJnZXQ6YixkdXJhdGlvbjpjLmR1cmF0aW9uLGVhc2luZzpjLmVhc2luZyxrZXlmcmFtZXM6ezMzOntvcGFjaXR5OjAuM30sNjY6e2hlaWdodDoxLHk6aVsxXStnLmhlaWdodC8yfSwxMDA6e3dpZHRoOjEseDppWzBdK2cud2lkdGgvMn19fSk7ZS5vbigiYWZ0ZXJhbmltYXRlIixmdW5jdGlvbigpe2lmKGMudXNlRGlzcGxheSl7Yi5zZXREaXNwbGF5ZWQoZmFsc2UpfWVsc2V7Yi5oaWRlKCl9Yi5jbGVhck9wYWNpdHkoKTtiLnNldFBvc2l0aW9uaW5nKGQpO2Iuc2V0U2l6ZShnKTtoLmVuZCgpfSl9O2IuYW5pbWF0ZSh7ZHVyYXRpb246KE1hdGgubWF4KGMuZHVyYXRpb24sNTAwKSoyKSxsaXN0ZW5lcnM6e2JlZm9yZWFuaW1hdGU6e2ZuOmF9fX0pO3JldHVybiBifSxmcmFtZTpmdW5jdGlvbihhLGQsZSl7dmFyIGM9dGhpcyxiO2E9YXx8IiNDM0RBRjkiO2Q9ZHx8MTtlPWV8fHt9O2I9ZnVuY3Rpb24oKXtjLnNob3coKTt2YXIgaT10aGlzLGo9Yy5nZXRCb3goKSxoPUV4dC5nZXRCb2R5KCkuY3JlYXRlQ2hpbGQoe2lkOmMuaWQrIi1hbmltLXByb3h5IixzdHlsZTp7cG9zaXRpb246ImFic29sdXRlIiwicG9pbnRlci1ldmVudHMiOiJub25lIiwiei1pbmRleCI6MzUwMDAsYm9yZGVyOiIwcHggc29saWQgIithfX0pLGc7Zz1uZXcgRXh0LmZ4LkFuaW0oe3RhcmdldDpoLGR1cmF0aW9uOmUuZHVyYXRpb258fDEwMDAsaXRlcmF0aW9uczpkLGZyb206e3RvcDpqLnksbGVmdDpqLngsYm9yZGVyV2lkdGg6MCxvcGFjaXR5OjEsaGVpZ2h0OmouaGVpZ2h0LHdpZHRoOmoud2lkdGh9LHRvOnt0b3A6ai55LTIwLGxlZnQ6ai54LTIwLGJvcmRlcldpZHRoOjEwLG9wYWNpdHk6MCxoZWlnaHQ6ai5oZWlnaHQrNDAsd2lkdGg6ai53aWR0aCs0MH19KTtnLm9uKCJhZnRlcmFuaW1hdGUiLGZ1bmN0aW9uKCl7aC5yZW1vdmUoKTtpLmVuZCgpfSl9O2MuYW5pbWF0ZSh7ZHVyYXRpb246KE1hdGgubWF4KGUuZHVyYXRpb24sNTAwKSoyKXx8MjAwMCxsaXN0ZW5lcnM6e2JlZm9yZWFuaW1hdGU6e2ZuOmJ9fX0pO3JldHVybiBjfSxnaG9zdDpmdW5jdGlvbihhLGQpe3ZhciBjPXRoaXMsYjthPWF8fCJiIjtiPWZ1bmN0aW9uKCl7dmFyIGg9Yy5nZXRXaWR0aCgpLGc9Yy5nZXRIZWlnaHQoKSxpPWMuZ2V0WFkoKSxlPWMuZ2V0UG9zaXRpb25pbmcoKSxqPXtvcGFjaXR5OjB9O3N3aXRjaChhKXtjYXNlInQiOmoueT1pWzFdLWc7YnJlYWs7Y2FzZSJsIjpqLng9aVswXS1oO2JyZWFrO2Nhc2UiciI6ai54PWlbMF0raDticmVhaztjYXNlImIiOmoueT1pWzFdK2c7YnJlYWs7Y2FzZSJ0bCI6ai54PWlbMF0taDtqLnk9aVsxXS1nO2JyZWFrO2Nhc2UiYmwiOmoueD1pWzBdLWg7ai55PWlbMV0rZzticmVhaztjYXNlImJyIjpqLng9aVswXStoO2oueT1pWzFdK2c7YnJlYWs7Y2FzZSJ0ciI6ai54PWlbMF0raDtqLnk9aVsxXS1nO2JyZWFrfXRoaXMudG89ajt0aGlzLm9uKCJhZnRlcmFuaW1hdGUiLGZ1bmN0aW9uKCl7aWYoYy5kb20pe2MuaGlkZSgpO2MuY2xlYXJPcGFjaXR5KCk7Yy5zZXRQb3NpdGlvbmluZyhlKX19KX07Yy5hbmltYXRlKEV4dC5hcHBseUlmKGR8fHt9LHtkdXJhdGlvbjo1MDAsZWFzaW5nOiJlYXNlLW91dCIsbGlzdGVuZXJzOntiZWZvcmVhbmltYXRlOntmbjpifX19KSk7cmV0dXJuIGN9LGhpZ2hsaWdodDpmdW5jdGlvbihkLGIpe3ZhciBpPXRoaXMsZT1pLmRvbSxrPXt9LGgsbCxnLGMsYSxqO2I9Ynx8e307Yz1iLmxpc3RlbmVyc3x8e307Zz1iLmF0dHJ8fCJiYWNrZ3JvdW5kQ29sb3IiO2tbZ109ZHx8ImZmZmY5YyI7aWYoIWIudG8pe2w9e307bFtnXT1iLmVuZENvbG9yfHxpLmdldENvbG9yKGcsImZmZmZmZiIsIiIpfWVsc2V7bD1iLnRvfWIubGlzdGVuZXJzPUV4dC5hcHBseShFeHQuYXBwbHkoe30sYykse2JlZm9yZWFuaW1hdGU6ZnVuY3Rpb24oKXtoPWUuc3R5bGVbZ107aS5jbGVhck9wYWNpdHkoKTtpLnNob3coKTthPWMuYmVmb3JlYW5pbWF0ZTtpZihhKXtqPWEuZm58fGE7cmV0dXJuIGouYXBwbHkoYS5zY29wZXx8Yy5zY29wZXx8d2luZG93LGFyZ3VtZW50cyl9fSxhZnRlcmFuaW1hdGU6ZnVuY3Rpb24oKXtpZihlKXtlLnN0eWxlW2ddPWh9YT1jLmFmdGVyYW5pbWF0ZTtpZihhKXtqPWEuZm58fGE7ai5hcHBseShhLnNjb3BlfHxjLnNjb3BlfHx3aW5kb3csYXJndW1lbnRzKX19fSk7aS5hbmltYXRlKEV4dC5hcHBseSh7fSxiLHtkdXJhdGlvbjoxMDAwLGVhc2luZzoiZWFzZS1pbiIsZnJvbTprLHRvOmx9KSk7cmV0dXJuIGl9LHBhdXNlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7RXh0LmZ4Lk1hbmFnZXIuc2V0RnhEZWZhdWx0cyhiLmlkLHtkZWxheTphfSk7cmV0dXJuIGJ9LGZhZGVJbjpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2EuYW5pbWF0ZShFeHQuYXBwbHkoe30sYix7b3BhY2l0eToxLGludGVybmFsTGlzdGVuZXJzOntiZWZvcmVhbmltYXRlOmZ1bmN0aW9uKGMpe2lmKGEuaXNTdHlsZSgiZGlzcGxheSIsIm5vbmUiKSl7YS5zZXREaXNwbGF5ZWQoIiIpfWVsc2V7YS5zaG93KCl9fX19KSk7cmV0dXJuIHRoaXN9LGZhZGVPdXQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztiPUV4dC5hcHBseSh7b3BhY2l0eTowLGludGVybmFsTGlzdGVuZXJzOnthZnRlcmFuaW1hdGU6ZnVuY3Rpb24oYyl7dmFyIGQ9YS5kb207aWYoZCYmYy50by5vcGFjaXR5PT09MCl7aWYoYi51c2VEaXNwbGF5KXthLnNldERpc3BsYXllZChmYWxzZSl9ZWxzZXthLmhpZGUoKX19fX19LGIpO2EuYW5pbWF0ZShiKTtyZXR1cm4gYX0sc2NhbGU6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYW5pbWF0ZShFeHQuYXBwbHkoe30sYyx7d2lkdGg6YSxoZWlnaHQ6Yn0pKTtyZXR1cm4gdGhpc30sc2hpZnQ6ZnVuY3Rpb24oYSl7dGhpcy5hbmltYXRlKGEpO3JldHVybiB0aGlzfX0pO0V4dC5kb20uRWxlbWVudC5vdmVycmlkZSh7aW5pdEREOmZ1bmN0aW9uKGMsYixkKXt2YXIgYT1uZXcgRXh0LmRkLkREKEV4dC5pZCh0aGlzLmRvbSksYyxiKTtyZXR1cm4gRXh0LmFwcGx5KGEsZCl9LGluaXRERFByb3h5OmZ1bmN0aW9uKGMsYixkKXt2YXIgYT1uZXcgRXh0LmRkLkREUHJveHkoRXh0LmlkKHRoaXMuZG9tKSxjLGIpO3JldHVybiBFeHQuYXBwbHkoYSxkKX0saW5pdEREVGFyZ2V0OmZ1bmN0aW9uKGMsYixkKXt2YXIgYT1uZXcgRXh0LmRkLkREVGFyZ2V0KEV4dC5pZCh0aGlzLmRvbSksYyxiKTtyZXR1cm4gRXh0LmFwcGx5KGEsZCl9fSk7KGZ1bmN0aW9uKCl7dmFyIGI9RXh0LmRvbS5FbGVtZW50LGk9InZpc2liaWxpdHkiLGc9ImRpc3BsYXkiLG49Im5vbmUiLGU9ImhpZGRlbiIsbT0idmlzaWJsZSIsbz0ib2Zmc2V0cyIsaj0iYXNjbGFzcyIsYT0ibm9zaXplIixjPSJvcmlnaW5hbERpc3BsYXkiLGQ9InZpc2liaWxpdHlNb2RlIixoPSJpc1Zpc2libGUiLGw9RXh0LmJhc2VDU1NQcmVmaXgrImhpZGUtb2Zmc2V0cyIsaz1mdW5jdGlvbihxKXt2YXIgcj0ocS4kY2FjaGV8fHEuZ2V0Q2FjaGUoKSkuZGF0YSxzPXJbY107aWYocz09PXVuZGVmaW5lZCl7cltjXT1zPSIifXJldHVybiBzfSxwPWZ1bmN0aW9uKHIpe3ZhciBzPShyLiRjYWNoZXx8ci5nZXRDYWNoZSgpKS5kYXRhLHE9c1tkXTtpZihxPT09dW5kZWZpbmVkKXtzW2RdPXE9Yi5WSVNJQklMSVRZfXJldHVybiBxfTtiLm92ZXJyaWRlKHtvcmlnaW5hbERpc3BsYXk6IiIsdmlzaWJpbGl0eU1vZGU6MSxzZXRWaXNpYmxlOmZ1bmN0aW9uKHUscSl7dmFyIHM9dGhpcyx0PXMuZG9tLHI9cChzKTtpZih0eXBlb2YgcT09InN0cmluZyIpe3N3aXRjaChxKXtjYXNlIGc6cj1iLkRJU1BMQVk7YnJlYWs7Y2FzZSBpOnI9Yi5WSVNJQklMSVRZO2JyZWFrO2Nhc2UgbzpyPWIuT0ZGU0VUUzticmVhaztjYXNlIGE6Y2FzZSBqOnI9Yi5BU0NMQVNTO2JyZWFrfXMuc2V0VmlzaWJpbGl0eU1vZGUocik7cT1mYWxzZX1pZighcXx8IXMuYW5pbSl7aWYocj09Yi5ESVNQTEFZKXtyZXR1cm4gcy5zZXREaXNwbGF5ZWQodSl9ZWxzZXtpZihyPT1iLk9GRlNFVFMpe3NbdT8icmVtb3ZlQ2xzIjoiYWRkQ2xzIl0obCl9ZWxzZXtpZihyPT1iLlZJU0lCSUxJVFkpe3MuZml4RGlzcGxheSgpO3Quc3R5bGUudmlzaWJpbGl0eT11PyIiOmV9ZWxzZXtpZihyPT1iLkFTQ0xBU1Mpe3NbdT8icmVtb3ZlQ2xzIjoiYWRkQ2xzIl0ocy52aXNpYmlsaXR5Q2xzfHxiLnZpc2liaWxpdHlDbHMpfX19fX1lbHNle2lmKHUpe3Muc2V0T3BhY2l0eSgwLjAxKTtzLnNldFZpc2libGUodHJ1ZSl9aWYoIUV4dC5pc09iamVjdChxKSl7cT17ZHVyYXRpb246MzUwLGVhc2luZzoiZWFzZS1pbiJ9fXMuYW5pbWF0ZShFeHQuYXBwbHlJZih7Y2FsbGJhY2s6ZnVuY3Rpb24oKXtpZighdSl7cy5zZXRWaXNpYmxlKGZhbHNlKS5zZXRPcGFjaXR5KDEpfX0sdG86e29wYWNpdHk6KHUpPzE6MH19LHEpKX0ocy4kY2FjaGV8fHMuZ2V0Q2FjaGUoKSkuZGF0YVtoXT11O3JldHVybiBzfSxoYXNNZXRyaWNzOmZ1bmN0aW9uKCl7dmFyIHE9cCh0aGlzKTtyZXR1cm4gdGhpcy5pc1Zpc2libGUoKXx8KHE9PWIuT0ZGU0VUUyl8fChxPT1iLlZJU0lCSUxJVFkpfSx0b2dnbGU6ZnVuY3Rpb24ocSl7dmFyIHI9dGhpcztyLnNldFZpc2libGUoIXIuaXNWaXNpYmxlKCksci5hbmltKHEpKTtyZXR1cm4gcn0sc2V0RGlzcGxheWVkOmZ1bmN0aW9uKHEpe2lmKHR5cGVvZiBxPT0iYm9vbGVhbiIpe3E9cT9rKHRoaXMpOm59dGhpcy5zZXRTdHlsZShnLHEpO3JldHVybiB0aGlzfSxmaXhEaXNwbGF5OmZ1bmN0aW9uKCl7dmFyIHE9dGhpcztpZihxLmlzU3R5bGUoZyxuKSl7cS5zZXRTdHlsZShpLGUpO3Euc2V0U3R5bGUoZyxrKHEpKTtpZihxLmlzU3R5bGUoZyxuKSl7cS5zZXRTdHlsZShnLCJibG9jayIpfX19LGhpZGU6ZnVuY3Rpb24ocSl7aWYodHlwZW9mIHE9PSJzdHJpbmciKXt0aGlzLnNldFZpc2libGUoZmFsc2UscSk7cmV0dXJuIHRoaXN9dGhpcy5zZXRWaXNpYmxlKGZhbHNlLHRoaXMuYW5pbShxKSk7cmV0dXJuIHRoaXN9LHNob3c6ZnVuY3Rpb24ocSl7aWYodHlwZW9mIHE9PSJzdHJpbmciKXt0aGlzLnNldFZpc2libGUodHJ1ZSxxKTtyZXR1cm4gdGhpc310aGlzLnNldFZpc2libGUodHJ1ZSx0aGlzLmFuaW0ocSkpO3JldHVybiB0aGlzfX0pfSgpKTsoZnVuY3Rpb24oKXt2YXIgcj1FeHQuZG9tLkVsZW1lbnQsbj0ibGVmdCIsaz0icmlnaHQiLHE9InRvcCIsaD0iYm90dG9tIixvPSJwb3NpdGlvbiIsaj0ic3RhdGljIix4PSJyZWxhdGl2ZSIscD0iYXV0byIsdj0iei1pbmRleCIsdT0iQk9EWSIsYz0icGFkZGluZyIsdD0iYm9yZGVyIixzPSItbGVmdCIsbT0iLXJpZ2h0IixhPSItdG9wIixsPSItYm90dG9tIixnPSItd2lkdGgiLGU9e2w6dCtzK2cscjp0K20rZyx0OnQrYStnLGI6dCtsK2d9LGQ9e2w6YytzLHI6YyttLHQ6YythLGI6YytsfSx3PVtkLmwsZC5yLGQudCxkLmJdLGI9W2UubCxlLnIsZS50LGUuYl0saT1bInBvc2l0aW9uIiwidG9wIiwibGVmdCJdO3Iub3ZlcnJpZGUoe2dldFg6ZnVuY3Rpb24oKXtyZXR1cm4gci5nZXRYKHRoaXMuZG9tKX0sZ2V0WTpmdW5jdGlvbigpe3JldHVybiByLmdldFkodGhpcy5kb20pfSxnZXRYWTpmdW5jdGlvbigpe3JldHVybiByLmdldFhZKHRoaXMuZG9tKX0sZ2V0T2Zmc2V0c1RvOmZ1bmN0aW9uKHkpe3ZhciBBPXRoaXMuZ2V0WFkoKSx6PUV4dC5mbHkoeSwiX2ludGVybmFsIikuZ2V0WFkoKTtyZXR1cm5bQVswXS16WzBdLEFbMV0telsxXV19LHNldFg6ZnVuY3Rpb24oeSx6KXtyZXR1cm4gdGhpcy5zZXRYWShbeSx0aGlzLmdldFkoKV0seil9LHNldFk6ZnVuY3Rpb24oQSx6KXtyZXR1cm4gdGhpcy5zZXRYWShbdGhpcy5nZXRYKCksQV0seil9LHNldExlZnQ6ZnVuY3Rpb24oeSl7dGhpcy5zZXRTdHlsZShuLHRoaXMuYWRkVW5pdHMoeSkpO3JldHVybiB0aGlzfSxzZXRUb3A6ZnVuY3Rpb24oeSl7dGhpcy5zZXRTdHlsZShxLHRoaXMuYWRkVW5pdHMoeSkpO3JldHVybiB0aGlzfSxzZXRSaWdodDpmdW5jdGlvbih5KXt0aGlzLnNldFN0eWxlKGssdGhpcy5hZGRVbml0cyh5KSk7cmV0dXJuIHRoaXN9LHNldEJvdHRvbTpmdW5jdGlvbih5KXt0aGlzLnNldFN0eWxlKGgsdGhpcy5hZGRVbml0cyh5KSk7cmV0dXJuIHRoaXN9LHNldFhZOmZ1bmN0aW9uKEEseSl7dmFyIHo9dGhpcztpZigheXx8IXouYW5pbSl7ci5zZXRYWSh6LmRvbSxBKX1lbHNle2lmKCFFeHQuaXNPYmplY3QoeSkpe3k9e319ei5hbmltYXRlKEV4dC5hcHBseUlmKHt0bzp7eDpBWzBdLHk6QVsxXX19LHkpKX1yZXR1cm4gen0scHhSZTovXlxkKyg/OlwuXGQqKT9weCQvaSxnZXRMb2NhbFg6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLHoseT1BLmdldFN0eWxlKG4pO2lmKCF5fHx5PT09cCl7cmV0dXJuIDB9aWYoeSYmQS5weFJlLnRlc3QoeSkpe3JldHVybiBwYXJzZUZsb2F0KHkpfXk9QS5nZXRYKCk7ej1BLmRvbS5vZmZzZXRQYXJlbnQ7aWYoeil7eS09RXh0LmZseSh6KS5nZXRYKCl9cmV0dXJuIHl9LGdldExvY2FsWTpmdW5jdGlvbigpe3ZhciBBPXRoaXMseixCPUEuZ2V0U3R5bGUocSk7aWYoIUJ8fEI9PT1wKXtyZXR1cm4gMH1pZihCJiZBLnB4UmUudGVzdChCKSl7cmV0dXJuIHBhcnNlRmxvYXQoQil9Qj1BLmdldFkoKTt6PUEuZG9tLm9mZnNldFBhcmVudDtpZih6KXtCLT1FeHQuZmx5KHopLmdldFkoKX1yZXR1cm4gQn0sZ2V0TGVmdDpmdW5jdGlvbih5KXtyZXR1cm4geT90aGlzLmdldExvY2FsWCgpOnRoaXMuZ2V0WCgpfSxnZXRSaWdodDpmdW5jdGlvbih5KXtyZXR1cm4oeT90aGlzLmdldExvY2FsWCgpOnRoaXMuZ2V0WCgpKSt0aGlzLmdldFdpZHRoKCl9LGdldFRvcDpmdW5jdGlvbih5KXtyZXR1cm4geT90aGlzLmdldExvY2FsWSgpOnRoaXMuZ2V0WSgpfSxnZXRCb3R0b206ZnVuY3Rpb24oeSl7cmV0dXJuKHk/dGhpcy5nZXRMb2NhbFkoKTp0aGlzLmdldFkoKSkrdGhpcy5nZXRIZWlnaHQoKX0sdHJhbnNsYXRlUG9pbnRzOmZ1bmN0aW9uKHosRyl7dmFyIEI9dGhpcyxBPUIuZ2V0U3R5bGUoaSksQz1BLnBvc2l0aW9uPT0icmVsYXRpdmUiLEY9cGFyc2VGbG9hdChBLmxlZnQpLEU9cGFyc2VGbG9hdChBLnRvcCksRD1CLmdldFhZKCk7aWYoRXh0LmlzQXJyYXkoeikpe0c9elsxXTt6PXpbMF19aWYoaXNOYU4oRikpe0Y9Qz8wOkIuZG9tLm9mZnNldExlZnR9aWYoaXNOYU4oRSkpe0U9Qz8wOkIuZG9tLm9mZnNldFRvcH1GPSh0eXBlb2Ygej09Im51bWJlciIpP3otRFswXStGOnVuZGVmaW5lZDtFPSh0eXBlb2YgRz09Im51bWJlciIpP0ctRFsxXStFOnVuZGVmaW5lZDtyZXR1cm57bGVmdDpGLHRvcDpFfX0sc2V0Qm94OmZ1bmN0aW9uKEMsRCx6KXt2YXIgQj10aGlzLHk9Qy53aWR0aCxBPUMuaGVpZ2h0O2lmKChEJiYhQi5hdXRvQm94QWRqdXN0KSYmIUIuaXNCb3JkZXJCb3goKSl7eS09KEIuZ2V0Qm9yZGVyV2lkdGgoImxyIikrQi5nZXRQYWRkaW5nKCJsciIpKTtBLT0oQi5nZXRCb3JkZXJXaWR0aCgidGIiKStCLmdldFBhZGRpbmcoInRiIikpfUIuc2V0Qm91bmRzKEMueCxDLnkseSxBLHopO3JldHVybiBCfSxnZXRCb3g6ZnVuY3Rpb24oRCxJKXt2YXIgRj10aGlzLE0seixILEMsSyxBLHksTCxHLEosQixFO2lmKCFJKXtNPUYuZ2V0WFkoKX1lbHNle009Ri5nZXRTdHlsZShbbixxXSk7TT1bcGFyc2VGbG9hdChNLmxlZnQpfHwwLHBhcnNlRmxvYXQoTS50b3ApfHwwXX1KPUYuZ2V0V2lkdGgoKTtCPUYuZ2V0SGVpZ2h0KCk7aWYoIUQpe0U9e3g6TVswXSx5Ok1bMV0sMDpNWzBdLDE6TVsxXSx3aWR0aDpKLGhlaWdodDpCfX1lbHNle0M9Ri5nZXRTdHlsZSh3KTtLPUYuZ2V0U3R5bGUoYik7QT0ocGFyc2VGbG9hdChLW2UubF0pfHwwKSsocGFyc2VGbG9hdChDW2QubF0pfHwwKTt5PShwYXJzZUZsb2F0KEtbZS5yXSl8fDApKyhwYXJzZUZsb2F0KENbZC5yXSl8fDApO0w9KHBhcnNlRmxvYXQoS1tlLnRdKXx8MCkrKHBhcnNlRmxvYXQoQ1tkLnRdKXx8MCk7Rz0ocGFyc2VGbG9hdChLW2UuYl0pfHwwKSsocGFyc2VGbG9hdChDW2QuYl0pfHwwKTtFPXt4Ok1bMF0rQSx5Ok1bMV0rTCwwOk1bMF0rQSwxOk1bMV0rTCx3aWR0aDpKLShBK3kpLGhlaWdodDpCLShMK0cpfX1FLnJpZ2h0PUUueCtFLndpZHRoO0UuYm90dG9tPUUueStFLmhlaWdodDtyZXR1cm4gRX0sZ2V0UGFnZUJveDpmdW5jdGlvbihCKXt2YXIgRD10aGlzLHo9RC5kb20sRj16Lm5vZGVOYW1lPT11LEc9Rj9FeHQuZG9tLkFic3RyYWN0RWxlbWVudC5nZXRWaWV3V2lkdGgoKTp6Lm9mZnNldFdpZHRoLEM9Rj9FeHQuZG9tLkFic3RyYWN0RWxlbWVudC5nZXRWaWV3SGVpZ2h0KCk6ei5vZmZzZXRIZWlnaHQsST1ELmdldFhZKCksSD1JWzFdLHk9SVswXStHLEU9SVsxXStDLEE9SVswXTtpZihCKXtyZXR1cm4gbmV3IEV4dC51dGlsLlJlZ2lvbihILHksRSxBKX1lbHNle3JldHVybntsZWZ0OkEsdG9wOkgsd2lkdGg6RyxoZWlnaHQ6QyxyaWdodDp5LGJvdHRvbTpFfX19LHNldExvY2F0aW9uOmZ1bmN0aW9uKHosQixBKXtyZXR1cm4gdGhpcy5zZXRYWShbeixCXSxBKX0sbW92ZVRvOmZ1bmN0aW9uKHosQixBKXtyZXR1cm4gdGhpcy5zZXRYWShbeixCXSxBKX0scG9zaXRpb246ZnVuY3Rpb24oRCxDLHosQil7dmFyIEE9dGhpcztpZighRCYmQS5pc1N0eWxlKG8saikpe0Euc2V0U3R5bGUobyx4KX1lbHNle2lmKEQpe0Euc2V0U3R5bGUobyxEKX19aWYoQyl7QS5zZXRTdHlsZSh2LEMpfWlmKHp8fEIpe0Euc2V0WFkoW3p8fGZhbHNlLEJ8fGZhbHNlXSl9fSxjbGVhclBvc2l0aW9uaW5nOmZ1bmN0aW9uKHkpe3k9eXx8IiI7dGhpcy5zZXRTdHlsZSh7bGVmdDp5LHJpZ2h0OnksdG9wOnksYm90dG9tOnksInotaW5kZXgiOiIiLHBvc2l0aW9uOmp9KTtyZXR1cm4gdGhpc30sZ2V0UG9zaXRpb25pbmc6ZnVuY3Rpb24oKXt2YXIgeT10aGlzLmdldFN0eWxlKFtuLHEsbyxrLGgsdl0pO3lba109eVtuXT8iIjp5W2tdO3lbaF09eVtxXT8iIjp5W2hdO3JldHVybiB5fSxzZXRQb3NpdGlvbmluZzpmdW5jdGlvbih5KXt2YXIgQT10aGlzLHo9QS5kb20uc3R5bGU7QS5zZXRTdHlsZSh5KTtpZih5LnJpZ2h0PT1wKXt6LnJpZ2h0PSIifWlmKHkuYm90dG9tPT1wKXt6LmJvdHRvbT0iIn1yZXR1cm4gQX0sbW92ZTpmdW5jdGlvbihILEEsQil7dmFyIEU9dGhpcyxLPUUuZ2V0WFkoKSxJPUtbMF0sRz1LWzFdLEM9W0ktQSxHXSxKPVtJK0EsR10sRj1bSSxHLUFdLHo9W0ksRytBXSxEPXtsOkMsbGVmdDpDLHI6SixyaWdodDpKLHQ6Rix0b3A6Rix1cDpGLGI6eixib3R0b206eixkb3duOnp9O0g9SC50b0xvd2VyQ2FzZSgpO0UubW92ZVRvKERbSF1bMF0sRFtIXVsxXSxCKX0sc2V0TGVmdFRvcDpmdW5jdGlvbihBLHope3ZhciB5PXRoaXMuZG9tLnN0eWxlO3kubGVmdD1yLmFkZFVuaXRzKEEpO3kudG9wPXIuYWRkVW5pdHMoeik7cmV0dXJuIHRoaXN9LGdldFJlZ2lvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFBhZ2VCb3godHJ1ZSl9LGdldFZpZXdSZWdpb246ZnVuY3Rpb24oKXt2YXIgQz10aGlzLEE9Qy5kb20ubm9kZU5hbWU9PXUseixGLEUsRCxCLHk7aWYoQSl7ej1DLmdldFNjcm9sbCgpO0Q9ei5sZWZ0O0U9ei50b3A7Qj1FeHQuZG9tLkFic3RyYWN0RWxlbWVudC5nZXRWaWV3cG9ydFdpZHRoKCk7eT1FeHQuZG9tLkFic3RyYWN0RWxlbWVudC5nZXRWaWV3cG9ydEhlaWdodCgpfWVsc2V7Rj1DLmdldFhZKCk7RD1GWzBdK0MuZ2V0Qm9yZGVyV2lkdGgoImwiKStDLmdldFBhZGRpbmcoImwiKTtFPUZbMV0rQy5nZXRCb3JkZXJXaWR0aCgidCIpK0MuZ2V0UGFkZGluZygidCIpO0I9Qy5nZXRXaWR0aCh0cnVlKTt5PUMuZ2V0SGVpZ2h0KHRydWUpfXJldHVybiBuZXcgRXh0LnV0aWwuUmVnaW9uKEUsRCtCLTEsRSt5LTEsRCl9LHNldEJvdW5kczpmdW5jdGlvbihBLEUsQyx6LEIpe3ZhciBEPXRoaXM7aWYoIUJ8fCFELmFuaW0pe0Quc2V0U2l6ZShDLHopO0Quc2V0TG9jYXRpb24oQSxFKX1lbHNle2lmKCFFeHQuaXNPYmplY3QoQikpe0I9e319RC5hbmltYXRlKEV4dC5hcHBseUlmKHt0bzp7eDpBLHk6RSx3aWR0aDpELmFkanVzdFdpZHRoKEMpLGhlaWdodDpELmFkanVzdEhlaWdodCh6KX19LEIpKX1yZXR1cm4gRH0sc2V0UmVnaW9uOmZ1bmN0aW9uKHoseSl7cmV0dXJuIHRoaXMuc2V0Qm91bmRzKHoubGVmdCx6LnRvcCx6LnJpZ2h0LXoubGVmdCx6LmJvdHRvbS16LnRvcCx5KX19KX0oKSk7RXh0LmRvbS5FbGVtZW50Lm92ZXJyaWRlKHtpc1Njcm9sbGFibGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRvbTtyZXR1cm4gYS5zY3JvbGxIZWlnaHQ+YS5jbGllbnRIZWlnaHR8fGEuc2Nyb2xsV2lkdGg+YS5jbGllbnRXaWR0aH0sZ2V0U2Nyb2xsOmZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5kb20saD1kb2N1bWVudCxhPWguYm9keSxjPWguZG9jdW1lbnRFbGVtZW50LGIsZyxlO2lmKGk9PWh8fGk9PWEpe2lmKEV4dC5pc0lFJiZFeHQuaXNTdHJpY3Qpe2I9Yy5zY3JvbGxMZWZ0O2c9Yy5zY3JvbGxUb3B9ZWxzZXtiPXdpbmRvdy5wYWdlWE9mZnNldDtnPXdpbmRvdy5wYWdlWU9mZnNldH1lPXtsZWZ0OmJ8fChhP2Euc2Nyb2xsTGVmdDowKSx0b3A6Z3x8KGE/YS5zY3JvbGxUb3A6MCl9fWVsc2V7ZT17bGVmdDppLnNjcm9sbExlZnQsdG9wOmkuc2Nyb2xsVG9wfX1yZXR1cm4gZX0sc2Nyb2xsQnk6ZnVuY3Rpb24oYixhLGMpe3ZhciBkPXRoaXMsZT1kLmRvbTtpZihiLmxlbmd0aCl7Yz1hO2E9YlsxXTtiPWJbMF19ZWxzZXtpZih0eXBlb2YgYiE9Im51bWJlciIpe2M9YTthPWIueTtiPWIueH19aWYoYil7ZC5zY3JvbGxUbygibGVmdCIsTWF0aC5tYXgoTWF0aC5taW4oZS5zY3JvbGxMZWZ0K2IsZS5zY3JvbGxXaWR0aC1lLmNsaWVudFdpZHRoKSwwKSxjKX1pZihhKXtkLnNjcm9sbFRvKCJ0b3AiLE1hdGgubWF4KE1hdGgubWluKGUuc2Nyb2xsVG9wK2EsZS5zY3JvbGxIZWlnaHQtZS5jbGllbnRIZWlnaHQpLDApLGMpfXJldHVybiBkfSxzY3JvbGxUbzpmdW5jdGlvbihjLGUsYSl7dmFyIGc9L3RvcC9pLnRlc3QoYyksZD10aGlzLGg9ZC5kb20sYixpO2lmKCFhfHwhZC5hbmltKXtpPSJzY3JvbGwiKyhnPyJUb3AiOiJMZWZ0Iik7aFtpXT1lO2hbaV09ZX1lbHNle2I9e3RvOnt9fTtiLnRvWyJzY3JvbGwiKyhnPyJUb3AiOiJMZWZ0IildPWU7aWYoRXh0LmlzT2JqZWN0KGEpKXtFeHQuYXBwbHlJZihiLGEpfWQuYW5pbWF0ZShiKX1yZXR1cm4gZH0sc2Nyb2xsSW50b1ZpZXc6ZnVuY3Rpb24oYixnLGMpe2I9RXh0LmdldERvbShiKXx8RXh0LmdldEJvZHkoKS5kb207dmFyIGQ9dGhpcy5kb20saT10aGlzLmdldE9mZnNldHNUbyhiKSxoPWlbMF0rYi5zY3JvbGxMZWZ0LGw9aVsxXStiLnNjcm9sbFRvcCxhPWwrZC5vZmZzZXRIZWlnaHQsbT1oK2Qub2Zmc2V0V2lkdGgscD1iLmNsaWVudEhlaWdodCxvPXBhcnNlSW50KGIuc2Nyb2xsVG9wLDEwKSxlPXBhcnNlSW50KGIuc2Nyb2xsTGVmdCwxMCksaj1vK3Asbj1lK2IuY2xpZW50V2lkdGgsaztpZihkLm9mZnNldEhlaWdodD5wfHxsPG8pe2s9bH1lbHNle2lmKGE+ail7az1hLXB9fWlmKGshPW51bGwpe0V4dC5nZXQoYikuc2Nyb2xsVG8oInRvcCIsayxjKX1pZihnIT09ZmFsc2Upe2s9bnVsbDtpZihkLm9mZnNldFdpZHRoPmIuY2xpZW50V2lkdGh8fGg8ZSl7az1ofWVsc2V7aWYobT5uKXtrPW0tYi5jbGllbnRXaWR0aH19aWYoayE9bnVsbCl7RXh0LmdldChiKS5zY3JvbGxUbygibGVmdCIsayxjKX19cmV0dXJuIHRoaXN9LHNjcm9sbENoaWxkSW50b1ZpZXc6ZnVuY3Rpb24oYixhKXtFeHQuZmx5KGIsIl9zY3JvbGxDaGlsZEludG9WaWV3Iikuc2Nyb2xsSW50b1ZpZXcodGhpcyxhKX0sc2Nyb2xsOmZ1bmN0aW9uKG0sYixkKXtpZighdGhpcy5pc1Njcm9sbGFibGUoKSl7cmV0dXJuIGZhbHNlfXZhciBlPXRoaXMuZG9tLGc9ZS5zY3JvbGxMZWZ0LHA9ZS5zY3JvbGxUb3Asbj1lLnNjcm9sbFdpZHRoLGs9ZS5zY3JvbGxIZWlnaHQsaT1lLmNsaWVudFdpZHRoLGE9ZS5jbGllbnRIZWlnaHQsYz1mYWxzZSxvLGo9e2w6TWF0aC5taW4oZytiLG4taSkscjpvPU1hdGgubWF4KGctYiwwKSx0Ok1hdGgubWF4KHAtYiwwKSxiOk1hdGgubWluKHArYixrLWEpfTtqLmQ9ai5iO2oudT1qLnQ7bT1tLnN1YnN0cigwLDEpO2lmKChvPWpbbV0pPi0xKXtjPXRydWU7dGhpcy5zY3JvbGxUbyhtPT0ibCJ8fG09PSJyIj8ibGVmdCI6InRvcCIsbyx0aGlzLmFuaW0oZCkpfXJldHVybiBjfX0pOyhmdW5jdGlvbigpe3ZhciBwPUV4dC5kb20uRWxlbWVudCxtPWRvY3VtZW50LmRlZmF1bHRWaWV3LG49L3RhYmxlLXJvd3x0YWJsZS0uKi1ncm91cC8sYT0iX2ludGVybmFsIixyPSJoaWRkZW4iLG89ImhlaWdodCIsZz0id2lkdGgiLGU9ImlzQ2xpcHBlZCIsaT0ib3ZlcmZsb3ciLGw9Im92ZXJmbG93LXgiLGo9Im92ZXJmbG93LXkiLHM9Im9yaWdpbmFsQ2xpcCIsYj0vI2RvY3VtZW50fGJvZHkvaSx0LGQscSxoLHU7aWYoIW18fCFtLmdldENvbXB1dGVkU3R5bGUpe3AucHJvdG90eXBlLmdldFN0eWxlPWZ1bmN0aW9uKHoseSl7dmFyIEw9dGhpcyxHPUwuZG9tLEo9dHlwZW9mIHohPSJzdHJpbmciLGs9TC5zdHlsZUhvb2tzLHc9eix4PXcsRj0xLEI9eSxLLEMsdixBLEUsSCxEO2lmKEope3Y9e307dz14WzBdO0Q9MDtpZighKEY9eC5sZW5ndGgpKXtyZXR1cm4gdn19aWYoIUd8fEcuZG9jdW1lbnRFbGVtZW50KXtyZXR1cm4gdnx8IiJ9Qz1HLnN0eWxlO2lmKHkpe0g9Q31lbHNle0g9Ry5jdXJyZW50U3R5bGU7aWYoIUgpe0I9dHJ1ZTtIPUN9fWRve0E9a1t3XTtpZighQSl7a1t3XT1BPXtuYW1lOnAubm9ybWFsaXplKHcpfX1pZihBLmdldCl7RT1BLmdldChHLEwsQixIKX1lbHNle0s9QS5uYW1lO2lmKEEuY2FuVGhyb3cpe3RyeXtFPUhbS119Y2F0Y2goSSl7RT0iIn19ZWxzZXtFPUg/SFtLXToiIn19aWYoIUope3JldHVybiBFfXZbd109RTt3PXhbKytEXX13aGlsZShEPEYpO3JldHVybiB2fX1wLm92ZXJyaWRlKHtnZXRIZWlnaHQ6ZnVuY3Rpb24oeCx2KXt2YXIgdz10aGlzLHo9dy5kb20seT13LmlzU3R5bGUoImRpc3BsYXkiLCJub25lIiksayxBO2lmKHkpe3JldHVybiAwfWs9TWF0aC5tYXgoei5vZmZzZXRIZWlnaHQsei5jbGllbnRIZWlnaHQpfHwwO2lmKEV4dC5zdXBwb3J0cy5EaXJlY3QyREJ1Zyl7QT13LmFkanVzdERpcmVjdDJERGltZW5zaW9uKG8pO2lmKHYpe2srPUF9ZWxzZXtpZihBPjAmJkE8MC41KXtrKyt9fX1pZih4KXtrLT13LmdldEJvcmRlcldpZHRoKCJ0YiIpK3cuZ2V0UGFkZGluZygidGIiKX1yZXR1cm4oazwwKT8wOmt9LGdldFdpZHRoOmZ1bmN0aW9uKGsseil7dmFyIHg9dGhpcyxBPXguZG9tLHk9eC5pc1N0eWxlKCJkaXNwbGF5Iiwibm9uZSIpLHcsdixCO2lmKHkpe3JldHVybiAwfWlmKEV4dC5zdXBwb3J0cy5Cb3VuZGluZ0NsaWVudFJlY3Qpe3c9QS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt2PXcucmlnaHQtdy5sZWZ0O3Y9ej92Ok1hdGguY2VpbCh2KX1lbHNle3Y9QS5vZmZzZXRXaWR0aH12PU1hdGgubWF4KHYsQS5jbGllbnRXaWR0aCl8fDA7aWYoRXh0LnN1cHBvcnRzLkRpcmVjdDJEQnVnKXtCPXguYWRqdXN0RGlyZWN0MkREaW1lbnNpb24oZyk7aWYoeil7dis9Qn1lbHNle2lmKEI+MCYmQjwwLjUpe3YrK319fWlmKGspe3YtPXguZ2V0Qm9yZGVyV2lkdGgoImxyIikreC5nZXRQYWRkaW5nKCJsciIpfXJldHVybih2PDApPzA6dn0sc2V0V2lkdGg6ZnVuY3Rpb24odixrKXt2YXIgdz10aGlzO3Y9dy5hZGp1c3RXaWR0aCh2KTtpZigha3x8IXcuYW5pbSl7dy5kb20uc3R5bGUud2lkdGg9dy5hZGRVbml0cyh2KX1lbHNle2lmKCFFeHQuaXNPYmplY3Qoaykpe2s9e319dy5hbmltYXRlKEV4dC5hcHBseUlmKHt0bzp7d2lkdGg6dn19LGspKX1yZXR1cm4gd30sc2V0SGVpZ2h0OmZ1bmN0aW9uKGssdil7dmFyIHc9dGhpcztrPXcuYWRqdXN0SGVpZ2h0KGspO2lmKCF2fHwhdy5hbmltKXt3LmRvbS5zdHlsZS5oZWlnaHQ9dy5hZGRVbml0cyhrKX1lbHNle2lmKCFFeHQuaXNPYmplY3Qodikpe3Y9e319dy5hbmltYXRlKEV4dC5hcHBseUlmKHt0bzp7aGVpZ2h0Omt9fSx2KSl9cmV0dXJuIHd9LGFwcGx5U3R5bGVzOmZ1bmN0aW9uKGspe0V4dC5Eb21IZWxwZXIuYXBwbHlTdHlsZXModGhpcy5kb20sayk7cmV0dXJuIHRoaXN9LHNldFNpemU6ZnVuY3Rpb24odyxrLHYpe3ZhciB4PXRoaXM7aWYoRXh0LmlzT2JqZWN0KHcpKXt2PWs7az13LmhlaWdodDt3PXcud2lkdGh9dz14LmFkanVzdFdpZHRoKHcpO2s9eC5hZGp1c3RIZWlnaHQoayk7aWYoIXZ8fCF4LmFuaW0pe3guZG9tLnN0eWxlLndpZHRoPXguYWRkVW5pdHModyk7eC5kb20uc3R5bGUuaGVpZ2h0PXguYWRkVW5pdHMoayl9ZWxzZXtpZih2PT09dHJ1ZSl7dj17fX14LmFuaW1hdGUoRXh0LmFwcGx5SWYoe3RvOnt3aWR0aDp3LGhlaWdodDprfX0sdikpfXJldHVybiB4fSxnZXRWaWV3U2l6ZTpmdW5jdGlvbigpe3ZhciB3PXRoaXMseD13LmRvbSx2PWIudGVzdCh4Lm5vZGVOYW1lKSxrO2lmKHYpe2s9e3dpZHRoOnAuZ2V0Vmlld1dpZHRoKCksaGVpZ2h0OnAuZ2V0Vmlld0hlaWdodCgpfX1lbHNle2s9e3dpZHRoOnguY2xpZW50V2lkdGgsaGVpZ2h0OnguY2xpZW50SGVpZ2h0fX1yZXR1cm4ga30sZ2V0U2l6ZTpmdW5jdGlvbihrKXtyZXR1cm57d2lkdGg6dGhpcy5nZXRXaWR0aChrKSxoZWlnaHQ6dGhpcy5nZXRIZWlnaHQoayl9fSxhZGp1c3RXaWR0aDpmdW5jdGlvbihrKXt2YXIgdj10aGlzLHc9KHR5cGVvZiBrPT0ibnVtYmVyIik7aWYodyYmdi5hdXRvQm94QWRqdXN0JiYhdi5pc0JvcmRlckJveCgpKXtrLT0odi5nZXRCb3JkZXJXaWR0aCgibHIiKSt2LmdldFBhZGRpbmcoImxyIikpfXJldHVybih3JiZrPDApPzA6a30sYWRqdXN0SGVpZ2h0OmZ1bmN0aW9uKGspe3ZhciB2PXRoaXMsdz0odHlwZW9mIGs9PSJudW1iZXIiKTtpZih3JiZ2LmF1dG9Cb3hBZGp1c3QmJiF2LmlzQm9yZGVyQm94KCkpe2stPSh2LmdldEJvcmRlcldpZHRoKCJ0YiIpK3YuZ2V0UGFkZGluZygidGIiKSl9cmV0dXJuKHcmJms8MCk/MDprfSxnZXRDb2xvcjpmdW5jdGlvbih3LHgsQyl7dmFyIHo9dGhpcy5nZXRTdHlsZSh3KSx5PUN8fEM9PT0iIj9DOiIjIixCLGssQT0wO2lmKCF6fHwoL3RyYW5zcGFyZW50fGluaGVyaXQvLnRlc3QoeikpKXtyZXR1cm4geH1pZigvXnIvLnRlc3Qoeikpe3o9ei5zbGljZSg0LHoubGVuZ3RoLTEpLnNwbGl0KCIsIik7az16Lmxlbmd0aDtmb3IoO0E8aztBKyspe0I9cGFyc2VJbnQoeltBXSwxMCk7eSs9KEI8MTY/IjAiOiIiKStCLnRvU3RyaW5nKDE2KX19ZWxzZXt6PXoucmVwbGFjZSgiIyIsIiIpO3krPXoubGVuZ3RoPT0zP3oucmVwbGFjZSgvXihcdykoXHcpKFx3KSQvLCIkMSQxJDIkMiQzJDMiKTp6fXJldHVybih5Lmxlbmd0aD41P3kudG9Mb3dlckNhc2UoKTp4KX0sc2V0T3BhY2l0eTpmdW5jdGlvbih2LGspe3ZhciB3PXRoaXM7aWYoIXcuZG9tKXtyZXR1cm4gd31pZigha3x8IXcuYW5pbSl7dy5zZXRTdHlsZSgib3BhY2l0eSIsdil9ZWxzZXtpZih0eXBlb2YgayE9Im9iamVjdCIpe2s9e2R1cmF0aW9uOjM1MCxlYXNpbmc6ImVhc2UtaW4ifX13LmFuaW1hdGUoRXh0LmFwcGx5SWYoe3RvOntvcGFjaXR5OnZ9fSxrKSl9cmV0dXJuIHd9LGNsZWFyT3BhY2l0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldE9wYWNpdHkoIiIpfSxhZGp1c3REaXJlY3QyRERpbWVuc2lvbjpmdW5jdGlvbih3KXt2YXIgQj10aGlzLHY9Qi5kb20sej1CLmdldFN0eWxlKCJkaXNwbGF5IikseT12LnN0eWxlLmRpc3BsYXksQz12LnN0eWxlLnBvc2l0aW9uLEE9dz09PWc/MDoxLGs9di5jdXJyZW50U3R5bGUseDtpZih6PT09ImlubGluZSIpe3Yuc3R5bGUuZGlzcGxheT0iaW5saW5lLWJsb2NrIn12LnN0eWxlLnBvc2l0aW9uPXoubWF0Y2gobik/ImFic29sdXRlIjoic3RhdGljIjt4PShwYXJzZUZsb2F0KGtbd10pfHxwYXJzZUZsb2F0KGsubXNUcmFuc2Zvcm1PcmlnaW4uc3BsaXQoIiAiKVtBXSkqMiklMTt2LnN0eWxlLnBvc2l0aW9uPUM7aWYoej09PSJpbmxpbmUiKXt2LnN0eWxlLmRpc3BsYXk9eX1yZXR1cm4geH0sY2xpcDpmdW5jdGlvbigpe3ZhciB2PXRoaXMsdz0odi4kY2FjaGV8fHYuZ2V0Q2FjaGUoKSkuZGF0YSxrO2lmKCF3W2VdKXt3W2VdPXRydWU7az12LmdldFN0eWxlKFtpLGwsal0pO3dbc109e286a1tpXSx4OmtbbF0seTprW2pdfTt2LnNldFN0eWxlKGkscik7di5zZXRTdHlsZShsLHIpO3Yuc2V0U3R5bGUoaixyKX1yZXR1cm4gdn0sdW5jbGlwOmZ1bmN0aW9uKCl7dmFyIHY9dGhpcyx3PSh2LiRjYWNoZXx8di5nZXRDYWNoZSgpKS5kYXRhLGs7aWYod1tlXSl7d1tlXT1mYWxzZTtrPXdbc107aWYoay5vKXt2LnNldFN0eWxlKGksay5vKX1pZihrLngpe3Yuc2V0U3R5bGUobCxrLngpfWlmKGsueSl7di5zZXRTdHlsZShqLGsueSl9fXJldHVybiB2fSxib3hXcmFwOmZ1bmN0aW9uKGspe2s9a3x8RXh0LmJhc2VDU1NQcmVmaXgrImJveCI7dmFyIHY9RXh0LmdldCh0aGlzLmluc2VydEh0bWwoImJlZm9yZUJlZ2luIiwiPGRpdiBjbGFzcz0nIitrKyInPiIrRXh0LlN0cmluZy5mb3JtYXQocC5ib3hNYXJrdXAsaykrIjwvZGl2PiIpKTtFeHQuRG9tUXVlcnkuc2VsZWN0Tm9kZSgiLiIraysiLW1jIix2LmRvbSkuYXBwZW5kQ2hpbGQodGhpcy5kb20pO3JldHVybiB2fSxnZXRDb21wdXRlZEhlaWdodDpmdW5jdGlvbigpe3ZhciB2PXRoaXMsaz1NYXRoLm1heCh2LmRvbS5vZmZzZXRIZWlnaHQsdi5kb20uY2xpZW50SGVpZ2h0KTtpZighayl7az1wYXJzZUZsb2F0KHYuZ2V0U3R5bGUobykpfHwwO2lmKCF2LmlzQm9yZGVyQm94KCkpe2srPXYuZ2V0RnJhbWVXaWR0aCgidGIiKX19cmV0dXJuIGt9LGdldENvbXB1dGVkV2lkdGg6ZnVuY3Rpb24oKXt2YXIgdj10aGlzLGs9TWF0aC5tYXgodi5kb20ub2Zmc2V0V2lkdGgsdi5kb20uY2xpZW50V2lkdGgpO2lmKCFrKXtrPXBhcnNlRmxvYXQodi5nZXRTdHlsZShnKSl8fDA7aWYoIXYuaXNCb3JkZXJCb3goKSl7ays9di5nZXRGcmFtZVdpZHRoKCJsciIpfX1yZXR1cm4ga30sZ2V0RnJhbWVXaWR0aDpmdW5jdGlvbih2LGspe3JldHVybihrJiZ0aGlzLmlzQm9yZGVyQm94KCkpPzA6KHRoaXMuZ2V0UGFkZGluZyh2KSt0aGlzLmdldEJvcmRlcldpZHRoKHYpKX0sYWRkQ2xzT25PdmVyOmZ1bmN0aW9uKHcseix2KXt2YXIgeD10aGlzLHk9eC5kb20saz1FeHQuaXNGdW5jdGlvbih6KTt4LmhvdmVyKGZ1bmN0aW9uKCl7aWYoayYmei5jYWxsKHZ8fHgseCk9PT1mYWxzZSl7cmV0dXJufUV4dC5mbHkoeSxhKS5hZGRDbHModyl9LGZ1bmN0aW9uKCl7RXh0LmZseSh5LGEpLnJlbW92ZUNscyh3KX0pO3JldHVybiB4fSxhZGRDbHNPbkZvY3VzOmZ1bmN0aW9uKHcseix2KXt2YXIgeD10aGlzLHk9eC5kb20saz1FeHQuaXNGdW5jdGlvbih6KTt4Lm9uKCJmb2N1cyIsZnVuY3Rpb24oKXtpZihrJiZ6LmNhbGwodnx8eCx4KT09PWZhbHNlKXtyZXR1cm4gZmFsc2V9RXh0LmZseSh5LGEpLmFkZENscyh3KX0pO3gub24oImJsdXIiLGZ1bmN0aW9uKCl7RXh0LmZseSh5LGEpLnJlbW92ZUNscyh3KX0pO3JldHVybiB4fSxhZGRDbHNPbkNsaWNrOmZ1bmN0aW9uKHcseix2KXt2YXIgeD10aGlzLHk9eC5kb20saz1FeHQuaXNGdW5jdGlvbih6KTt4Lm9uKCJtb3VzZWRvd24iLGZ1bmN0aW9uKCl7aWYoayYmei5jYWxsKHZ8fHgseCk9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfUV4dC5mbHkoeSxhKS5hZGRDbHModyk7dmFyIEI9RXh0LmdldERvYygpLEE9ZnVuY3Rpb24oKXtFeHQuZmx5KHksYSkucmVtb3ZlQ2xzKHcpO0IucmVtb3ZlTGlzdGVuZXIoIm1vdXNldXAiLEEpfTtCLm9uKCJtb3VzZXVwIixBKX0pO3JldHVybiB4fSxnZXRTdHlsZVNpemU6ZnVuY3Rpb24oKXt2YXIgej10aGlzLEE9dGhpcy5kb20sdj1iLnRlc3QoQS5ub2RlTmFtZSkseSxrLHg7aWYodil7cmV0dXJue3dpZHRoOnAuZ2V0Vmlld1dpZHRoKCksaGVpZ2h0OnAuZ2V0Vmlld0hlaWdodCgpfX15PXouZ2V0U3R5bGUoW28sZ10sdHJ1ZSk7aWYoeS53aWR0aCYmeS53aWR0aCE9ImF1dG8iKXtrPXBhcnNlRmxvYXQoeS53aWR0aCk7aWYoei5pc0JvcmRlckJveCgpKXtrLT16LmdldEZyYW1lV2lkdGgoImxyIil9fWlmKHkuaGVpZ2h0JiZ5LmhlaWdodCE9ImF1dG8iKXt4PXBhcnNlRmxvYXQoeS5oZWlnaHQpO2lmKHouaXNCb3JkZXJCb3goKSl7eC09ei5nZXRGcmFtZVdpZHRoKCJ0YiIpfX1yZXR1cm57d2lkdGg6a3x8ei5nZXRXaWR0aCh0cnVlKSxoZWlnaHQ6eHx8ei5nZXRIZWlnaHQodHJ1ZSl9fSxzZWxlY3RhYmxlOmZ1bmN0aW9uKCl7dmFyIGs9dGhpcztrLmRvbS51bnNlbGVjdGFibGU9Im9mZiI7ay5vbigic2VsZWN0c3RhcnQiLGZ1bmN0aW9uKHYpe3Yuc3RvcFByb3BhZ2F0aW9uKCk7cmV0dXJuIHRydWV9KTtrLmFwcGx5U3R5bGVzKCItbW96LXVzZXItc2VsZWN0OiB0ZXh0OyAta2h0bWwtdXNlci1zZWxlY3Q6IHRleHQ7Iik7ay5yZW1vdmVDbHMoRXh0LmJhc2VDU1NQcmVmaXgrInVuc2VsZWN0YWJsZSIpO3JldHVybiBrfSx1bnNlbGVjdGFibGU6ZnVuY3Rpb24oKXt2YXIgaz10aGlzO2suZG9tLnVuc2VsZWN0YWJsZT0ib24iO2suc3dhbGxvd0V2ZW50KCJzZWxlY3RzdGFydCIsdHJ1ZSk7ay5hcHBseVN0eWxlcygiLW1vei11c2VyLXNlbGVjdDotbW96LW5vbmU7LWtodG1sLXVzZXItc2VsZWN0Om5vbmU7Iik7ay5hZGRDbHMoRXh0LmJhc2VDU1NQcmVmaXgrInVuc2VsZWN0YWJsZSIpO3JldHVybiBrfX0pO3AucHJvdG90eXBlLnN0eWxlSG9va3M9dD1FeHQuZG9tLkFic3RyYWN0RWxlbWVudC5wcm90b3R5cGUuc3R5bGVIb29rcztpZihFeHQuaXNJRTZ8fEV4dC5pc0lFNyl7dC5mb250U2l6ZT10WyJmb250LXNpemUiXT17bmFtZToiZm9udFNpemUiLGNhblRocm93OnRydWV9O3QuZm9udFN0eWxlPXRbImZvbnQtc3R5bGUiXT17bmFtZToiZm9udFN0eWxlIixjYW5UaHJvdzp0cnVlfTt0LmZvbnRGYW1pbHk9dFsiZm9udC1mYW1pbHkiXT17bmFtZToiZm9udEZhbWlseSIsY2FuVGhyb3c6dHJ1ZX19aWYoRXh0LmlzSUVRdWlya3N8fEV4dC5pc0lFJiZFeHQuaWVWZXJzaW9uPD04KXtmdW5jdGlvbiBjKHgsdix3LGspe2lmKGtbdGhpcy5zdHlsZU5hbWVdPT0ibm9uZSIpe3JldHVybiIwcHgifXJldHVybiBrW3RoaXMubmFtZV19ZD1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdO3E9ZC5sZW5ndGg7d2hpbGUocS0tKXtoPWRbcV07dT0iYm9yZGVyIitoKyJXaWR0aCI7dFsiYm9yZGVyLSIraC50b0xvd2VyQ2FzZSgpKyItd2lkdGgiXT10W3VdPXtuYW1lOnUsc3R5bGVOYW1lOiJib3JkZXIiK2grIlN0eWxlIixnZXQ6Y319fX0oKSk7RXh0Lm9uUmVhZHkoZnVuY3Rpb24oKXt2YXIgYz0vYWxwaGFcKG9wYWNpdHk9KC4qKVwpL2ksYj0vXlxzK3xccyskL2csYT1FeHQuZG9tLkVsZW1lbnQucHJvdG90eXBlLnN0eWxlSG9va3M7YS5vcGFjaXR5PXtuYW1lOiJvcGFjaXR5IixhZnRlclNldDpmdW5jdGlvbihnLGUsZCl7aWYoZC5pc0xheWVyKXtkLm9uT3BhY2l0eVNldChlKX19fTtpZighRXh0LnN1cHBvcnRzLk9wYWNpdHkmJkV4dC5pc0lFKXtFeHQuYXBwbHkoYS5vcGFjaXR5LHtnZXQ6ZnVuY3Rpb24oaCl7dmFyIGc9aC5zdHlsZS5maWx0ZXIsZSxkO2lmKGcubWF0Y2gpe2U9Zy5tYXRjaChjKTtpZihlKXtkPXBhcnNlRmxvYXQoZVsxXSk7aWYoIWlzTmFOKGQpKXtyZXR1cm4gZD9kLzEwMDowfX19cmV0dXJuIDF9LHNldDpmdW5jdGlvbihoLGUpe3ZhciBkPWguc3R5bGUsZz1kLmZpbHRlci5yZXBsYWNlKGMsIiIpLnJlcGxhY2UoYiwiIik7ZC56b29tPTE7aWYodHlwZW9mKGUpPT0ibnVtYmVyIiYmZT49MCYmZTwxKXtlKj0xMDA7ZC5maWx0ZXI9ZysoZy5sZW5ndGg/IiAiOiIiKSsiYWxwaGEob3BhY2l0eT0iK2UrIikifWVsc2V7ZC5maWx0ZXI9Z319fSl9fSk7RXh0LmRvbS5FbGVtZW50Lm92ZXJyaWRlKHtzZWxlY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5kb20uRWxlbWVudC5zZWxlY3QoYSxmYWxzZSx0aGlzLmRvbSl9fSk7RXh0LmRlZmluZSgiRXh0LmRvbS5Db21wb3NpdGVFbGVtZW50TGl0ZSIse2FsdGVybmF0ZUNsYXNzTmFtZToiRXh0LkNvbXBvc2l0ZUVsZW1lbnRMaXRlIixyZXF1aXJlczpbIkV4dC5kb20uRWxlbWVudCIsIkV4dC5kb20uUXVlcnkiXSxzdGF0aWNzOntpbXBvcnRFbGVtZW50TWV0aG9kczpmdW5jdGlvbigpe3ZhciBiLGM9RXh0LmRvbS5FbGVtZW50LnByb3RvdHlwZSxhPXRoaXMucHJvdG90eXBlO2ZvcihiIGluIGMpe2lmKHR5cGVvZiBjW2JdPT0iZnVuY3Rpb24iKXsoZnVuY3Rpb24oZCl7YVtkXT1hW2RdfHxmdW5jdGlvbigpe3JldHVybiB0aGlzLmludm9rZShkLGFyZ3VtZW50cyl9fSkuY2FsbChhLGIpfX19fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihiLGEpe3RoaXMuZWxlbWVudHM9W107dGhpcy5hZGQoYixhKTt0aGlzLmVsPW5ldyBFeHQuZG9tLkFic3RyYWN0RWxlbWVudC5GbHkoKX0saXNDb21wb3NpdGU6dHJ1ZSxnZXRFbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVsLmF0dGFjaChhKX0sdHJhbnNmb3JtRWxlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LmdldERvbShhKX0sZ2V0Q291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50cy5sZW5ndGh9LGFkZDpmdW5jdGlvbihjLGEpe3ZhciBlPXRoaXMuZWxlbWVudHMsYixkO2lmKCFjKXtyZXR1cm4gdGhpc31pZih0eXBlb2YgYz09InN0cmluZyIpe2M9RXh0LmRvbS5FbGVtZW50LnNlbGVjdG9yRnVuY3Rpb24oYyxhKX1lbHNle2lmKGMuaXNDb21wb3NpdGUpe2M9Yy5lbGVtZW50c31lbHNle2lmKCFFeHQuaXNJdGVyYWJsZShjKSl7Yz1bY119fX1mb3IoYj0wLGQ9Yy5sZW5ndGg7YjxkOysrYil7ZS5wdXNoKHRoaXMudHJhbnNmb3JtRWxlbWVudChjW2JdKSl9cmV0dXJuIHRoaXN9LGludm9rZTpmdW5jdGlvbihkLGEpe3ZhciBnPXRoaXMuZWxlbWVudHMsZT1nLmxlbmd0aCxjLGI7ZD1FeHQuZG9tLkVsZW1lbnQucHJvdG90eXBlW2RdO2ZvcihiPTA7YjxlO2IrKyl7Yz1nW2JdO2lmKGMpe2QuYXBwbHkodGhpcy5nZXRFbGVtZW50KGMpLGEpfX1yZXR1cm4gdGhpc30saXRlbTpmdW5jdGlvbihiKXt2YXIgYz10aGlzLmVsZW1lbnRzW2JdLGE9bnVsbDtpZihjKXthPXRoaXMuZ2V0RWxlbWVudChjKX1yZXR1cm4gYX0sYWRkTGlzdGVuZXI6ZnVuY3Rpb24oYixqLGgsZyl7dmFyIGQ9dGhpcy5lbGVtZW50cyxhPWQubGVuZ3RoLGMsaztmb3IoYz0wO2M8YTtjKyspe2s9ZFtjXTtpZihrKXtFeHQuRXZlbnRNYW5hZ2VyLm9uKGssYixqLGh8fGssZyl9fXJldHVybiB0aGlzfSxlYWNoOmZ1bmN0aW9uKGcsZCl7dmFyIGg9dGhpcyxjPWguZWxlbWVudHMsYT1jLmxlbmd0aCxiLGo7Zm9yKGI9MDtiPGE7YisrKXtqPWNbYl07aWYoail7aj10aGlzLmdldEVsZW1lbnQoaik7aWYoZy5jYWxsKGR8fGosaixoLGIpPT09ZmFsc2Upe2JyZWFrfX19cmV0dXJuIGh9LGZpbGw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLmVsZW1lbnRzPVtdO2IuYWRkKGEpO3JldHVybiBifSxmaWx0ZXI6ZnVuY3Rpb24oYil7dmFyIGg9dGhpcyxjPWguZWxlbWVudHMsZz1jLmxlbmd0aCxkPVtdLGU9MCxqPXR5cGVvZiBiPT0iZnVuY3Rpb24iLGssYTtmb3IoO2U8ZztlKyspe2E9Y1tlXTtrPWZhbHNlO2lmKGEpe2E9aC5nZXRFbGVtZW50KGEpO2lmKGope2s9Yi5jYWxsKGEsYSxoLGUpIT09ZmFsc2V9ZWxzZXtrPWEuaXMoYil9aWYoayl7ZC5wdXNoKGgudHJhbnNmb3JtRWxlbWVudChhKSl9fX1oLmVsZW1lbnRzPWQ7cmV0dXJuIGh9LGluZGV4T2Y6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5BcnJheS5pbmRleE9mKHRoaXMuZWxlbWVudHMsdGhpcy50cmFuc2Zvcm1FbGVtZW50KGEpKX0scmVwbGFjZUVsZW1lbnQ6ZnVuY3Rpb24oZSxjLGEpe3ZhciBiPSFpc05hTihlKT9lOnRoaXMuaW5kZXhPZihlKSxnO2lmKGI+LTEpe2M9RXh0LmdldERvbShjKTtpZihhKXtnPXRoaXMuZWxlbWVudHNbYl07Zy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjLGcpO0V4dC5yZW1vdmVOb2RlKGcpfUV4dC5BcnJheS5zcGxpY2UodGhpcy5lbGVtZW50cyxiLDEsYyl9cmV0dXJuIHRoaXN9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50cz1bXX0sYWRkRWxlbWVudHM6ZnVuY3Rpb24oZCxiKXtpZighZCl7cmV0dXJuIHRoaXN9aWYodHlwZW9mIGQ9PSJzdHJpbmciKXtkPUV4dC5kb20uRWxlbWVudC5zZWxlY3RvckZ1bmN0aW9uKGQsYil9dmFyIGM9dGhpcy5lbGVtZW50cyxhPWQubGVuZ3RoLGc7Zm9yKGc9MDtnPGE7ZysrKXtjLnB1c2goRXh0LmdldChkW2ddKSl9cmV0dXJuIHRoaXN9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW0odGhpcy5nZXRDb3VudCgpLTEpfSxjb250YWluczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbmRleE9mKGEpIT0tMX0scmVtb3ZlRWxlbWVudDpmdW5jdGlvbihlLGkpe2U9W10uY29uY2F0KGUpO3ZhciBkPXRoaXMsZz1kLmVsZW1lbnRzLGM9ZS5sZW5ndGgsaCxiLGE7Zm9yKGE9MDthPGM7YSsrKXtoPWVbYV07aWYoKGI9KGdbaF18fGdbaD1kLmluZGV4T2YoaCldKSkpe2lmKGkpe2lmKGIuZG9tKXtiLnJlbW92ZSgpfWVsc2V7RXh0LnJlbW92ZU5vZGUoYil9fUV4dC5BcnJheS5lcmFzZShnLGgsMSl9fXJldHVybiBkfX0sZnVuY3Rpb24oKXt0aGlzLmltcG9ydEVsZW1lbnRNZXRob2RzKCk7dGhpcy5wcm90b3R5cGUub249dGhpcy5wcm90b3R5cGUuYWRkTGlzdGVuZXI7aWYoRXh0LkRvbVF1ZXJ5KXtFeHQuZG9tLkVsZW1lbnQuc2VsZWN0b3JGdW5jdGlvbj1FeHQuRG9tUXVlcnkuc2VsZWN0fUV4dC5kb20uRWxlbWVudC5zZWxlY3Q9ZnVuY3Rpb24oYSxiKXt2YXIgYztpZih0eXBlb2YgYT09InN0cmluZyIpe2M9RXh0LmRvbS5FbGVtZW50LnNlbGVjdG9yRnVuY3Rpb24oYSxiKX1lbHNle2lmKGEubGVuZ3RoIT09dW5kZWZpbmVkKXtjPWF9ZWxzZXt9fXJldHVybiBuZXcgRXh0LkNvbXBvc2l0ZUVsZW1lbnRMaXRlKGMpfTtFeHQuc2VsZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5kb20uRWxlbWVudC5zZWxlY3QuYXBwbHkoRXh0LmRvbS5FbGVtZW50LGFyZ3VtZW50cyl9fSk7RXh0LmRlZmluZSgiRXh0LnV0aWwuQW5pbWF0ZSIse3JlcXVpcmVzOlsiRXh0LkVsZW1lbnQiLCJFeHQuQ29tcG9zaXRlRWxlbWVudExpdGUiXSx1c2VzOlsiRXh0LmZ4Lk1hbmFnZXIiLCJFeHQuZnguQW5pbSJdLGFuaW1hdGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihFeHQuZnguTWFuYWdlci5oYXNGeEJsb2NrKGIuaWQpKXtyZXR1cm4gYn1FeHQuZnguTWFuYWdlci5xdWV1ZUZ4KG5ldyBFeHQuZnguQW5pbShiLmFuaW0oYSkpKTtyZXR1cm4gdGhpc30sYW5pbTpmdW5jdGlvbihhKXtpZighRXh0LmlzT2JqZWN0KGEpKXtyZXR1cm4oYSk/e306ZmFsc2V9dmFyIGI9dGhpcztpZihhLnN0b3BBbmltYXRpb24pe2Iuc3RvcEFuaW1hdGlvbigpfUV4dC5hcHBseUlmKGEsRXh0LmZ4Lk1hbmFnZXIuZ2V0RnhEZWZhdWx0cyhiLmlkKSk7cmV0dXJuIEV4dC5hcHBseSh7dGFyZ2V0OmIscGF1c2VkOnRydWV9LGEpfSxzdG9wRng6RXh0LkZ1bmN0aW9uLmFsaWFzKEV4dC51dGlsLkFuaW1hdGUsInN0b3BBbmltYXRpb24iKSxzdG9wQW5pbWF0aW9uOmZ1bmN0aW9uKCl7RXh0LmZ4Lk1hbmFnZXIuc3RvcEFuaW1hdGlvbih0aGlzLmlkKTtyZXR1cm4gdGhpc30sc3luY0Z4OmZ1bmN0aW9uKCl7RXh0LmZ4Lk1hbmFnZXIuc2V0RnhEZWZhdWx0cyh0aGlzLmlkLHtjb25jdXJyZW50OnRydWV9KTtyZXR1cm4gdGhpc30sc2VxdWVuY2VGeDpmdW5jdGlvbigpe0V4dC5meC5NYW5hZ2VyLnNldEZ4RGVmYXVsdHModGhpcy5pZCx7Y29uY3VycmVudDpmYWxzZX0pO3JldHVybiB0aGlzfSxoYXNBY3RpdmVGeDpFeHQuRnVuY3Rpb24uYWxpYXMoRXh0LnV0aWwuQW5pbWF0ZSwiZ2V0QWN0aXZlQW5pbWF0aW9uIiksZ2V0QWN0aXZlQW5pbWF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5meC5NYW5hZ2VyLmdldEFjdGl2ZUFuaW1hdGlvbih0aGlzLmlkKX19LGZ1bmN0aW9uKCl7RXh0LmFwcGx5SWYoRXh0LkVsZW1lbnQucHJvdG90eXBlLHRoaXMucHJvdG90eXBlKTtFeHQuQ29tcG9zaXRlRWxlbWVudExpdGUuaW1wb3J0RWxlbWVudE1ldGhvZHMoKX0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLkVsZW1lbnRDb250YWluZXIiLHtjaGlsZEVsczpbXSxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYTtpZihiLmhhc093blByb3BlcnR5KCJjaGlsZEVscyIpKXthPWIuY2hpbGRFbHM7ZGVsZXRlIGIuY2hpbGRFbHM7Yi5hZGRDaGlsZEVscy5hcHBseShiLGEpfX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsZD1lLmdldENoaWxkRWxzKCksZyxhLGMsYjtmb3IoYz1kLmxlbmd0aDtjLS07KXthPWRbY107aWYodHlwZW9mIGEhPSJzdHJpbmciKXthPWEubmFtZX1nPWVbYV07aWYoZyl7ZVthXT1udWxsO2cucmVtb3ZlKCl9fX0sYWRkQ2hpbGRFbHM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9YXJndW1lbnRzO2lmKGIuaGFzT3duUHJvcGVydHkoImNoaWxkRWxzIikpe2IuY2hpbGRFbHMucHVzaC5hcHBseShiLmNoaWxkRWxzLGEpfWVsc2V7Yi5jaGlsZEVscz1iLmdldENoaWxkRWxzKCkuY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEpKX1iLnBydW5lKGIuY2hpbGRFbHMsZmFsc2UpfSxhcHBseUNoaWxkRWxzOmZ1bmN0aW9uKGIsYSl7dmFyIGU9dGhpcyxnPWUuZ2V0Q2hpbGRFbHMoKSxqLGssZCxjLGg7aj0oYXx8ZS5pZCkrIi0iO2ZvcihkPWcubGVuZ3RoO2QtLTspe2s9Z1tkXTtpZih0eXBlb2Ygaz09InN0cmluZyIpe2g9Yi5nZXRCeUlkKGorayl9ZWxzZXtpZigoYz1rLnNlbGVjdCkpe2g9RXh0LnNlbGVjdChjLHRydWUsYi5kb20pfWVsc2V7aWYoKGM9ay5zZWxlY3ROb2RlKSl7aD1FeHQuZ2V0KEV4dC5Eb21RdWVyeS5zZWxlY3ROb2RlKGMsYi5kb20pKX1lbHNle2g9Yi5nZXRCeUlkKGsuaWR8fChqK2suaXRlbUlkKSl9fWs9ay5uYW1lfWVba109aH19LGdldENoaWxkRWxzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhO2lmKGIuaGFzT3duUHJvcGVydHkoImNoaWxkRWxzIikpe3JldHVybiBiLmNoaWxkRWxzfWE9Yi5zZWxmO3JldHVybiBhLiRjaGlsZEVsc3x8Yi5nZXRDbGFzc0NoaWxkRWxzKGEpfSxnZXRDbGFzc0NoaWxkRWxzOmZ1bmN0aW9uKG8pe3ZhciBrPXRoaXMscD1vLiRjaGlsZEVscyxtLGQsYixqLG4saCxhLGMsZSxnLGw7aWYoIXApe2c9by5zdXBlcmNsYXNzO2lmKGcpe2c9Zy5zZWxmO2M9W2cuJGNoaWxkRWxzfHxrLmdldENsYXNzQ2hpbGRFbHMoZyldO2w9Zy5wcm90b3R5cGUubWl4aW5zfHx7fX1lbHNle2M9W107bD17fX1lPW8ucHJvdG90eXBlO2g9ZS5taXhpbnM7Zm9yKGEgaW4gaCl7aWYoaC5oYXNPd25Qcm9wZXJ0eShhKSYmIWwuaGFzT3duUHJvcGVydHkoYSkpe249aFthXS5zZWxmO2MucHVzaChuLiRjaGlsZEVsc3x8ay5nZXRDbGFzc0NoaWxkRWxzKG4pKX19Yy5wdXNoKGUuaGFzT3duUHJvcGVydHkoImNoaWxkRWxzIikmJmUuY2hpbGRFbHMpO2ZvcihkPTAsYj1jLmxlbmd0aDtkPGI7KytkKXttPWNbZF07aWYobSYmbS5sZW5ndGgpe2lmKCFwKXtwPW19ZWxzZXtpZighail7aj10cnVlO3A9cC5zbGljZSgwKX1wLnB1c2guYXBwbHkocCxtKX19fW8uJGNoaWxkRWxzPXA9KHA/ay5wcnVuZShwLCFqKTpbXSl9cmV0dXJuIHB9LHBydW5lOmZ1bmN0aW9uKGMsZSl7dmFyIGI9Yy5sZW5ndGgsZD17fSxhO3doaWxlKGItLSl7YT1jW2JdO2lmKHR5cGVvZiBhIT0ic3RyaW5nIil7YT1hLm5hbWV9aWYoIWRbYV0pe2RbYV09MX1lbHNle2lmKGUpe2U9ZmFsc2U7Yz1jLnNsaWNlKDApfUV4dC5BcnJheS5lcmFzZShjLGIsMSl9fXJldHVybiBjfSxyZW1vdmVDaGlsZEVsczpmdW5jdGlvbihnKXt2YXIgZT10aGlzLGE9ZS5nZXRDaGlsZEVscygpLGQ9KGUuY2hpbGRFbHM9W10pLGgsYixjO2ZvcihiPTAsaD1hLmxlbmd0aDtiPGg7KytiKXtjPWFbYl07aWYoIWcoYykpe2QucHVzaChjKX19fX0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLlJlbmRlcmFibGUiLHtyZXF1aXJlczpbIkV4dC5kb20uRWxlbWVudCJdLGZyYW1lQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmcmFtZSIsZnJhbWVJZFJlZ2V4Oi9bXC1dZnJhbWVcZCtbVE1CXVtMQ1JdJC8sZnJhbWVFbGVtZW50Q2xzOnt0bDpbXSx0YzpbXSx0cjpbXSxtbDpbXSxtYzpbXSxtcjpbXSxibDpbXSxiYzpbXSxicjpbXX0sZnJhbWVFbE5hbWVzOlsiVEwiLCJUQyIsIlRSIiwiTUwiLCJNQyIsIk1SIiwiQkwiLCJCQyIsIkJSIl0sZnJhbWVUcGw6WyJ7JXRoaXMucmVuZGVyRG9ja2VkSXRlbXMob3V0LHZhbHVlcywwKTslfSIsJzx0cGwgaWY9InRvcCI+JywnPHRwbCBpZj0ibGVmdCI+PGRpdiBpZD0ie2ZnaWR9VEwiIGNsYXNzPSJ7ZnJhbWVDbHN9LXRsIHtiYXNlQ2xzfS10bCB7YmFzZUNsc30te3VpfS10bDx0cGwgZm9yPSJ1aUNscyI+IHtwYXJlbnQuYmFzZUNsc30te3BhcmVudC51aX0tey59LXRsPC90cGw+IiBzdHlsZT0iYmFja2dyb3VuZC1wb3NpdGlvbjoge3RsfTsgcGFkZGluZy1sZWZ0OiB7ZnJhbWVXaWR0aH1weCIgcm9sZT0icHJlc2VudGF0aW9uIj48L3RwbD4nLCc8dHBsIGlmPSJyaWdodCI+PGRpdiBpZD0ie2ZnaWR9VFIiIGNsYXNzPSJ7ZnJhbWVDbHN9LXRyIHtiYXNlQ2xzfS10ciB7YmFzZUNsc30te3VpfS10cjx0cGwgZm9yPSJ1aUNscyI+IHtwYXJlbnQuYmFzZUNsc30te3BhcmVudC51aX0tey59LXRyPC90cGw+IiBzdHlsZT0iYmFja2dyb3VuZC1wb3NpdGlvbjoge3RyfTsgcGFkZGluZy1yaWdodDoge2ZyYW1lV2lkdGh9cHgiIHJvbGU9InByZXNlbnRhdGlvbiI+PC90cGw+JywnPGRpdiBpZD0ie2ZnaWR9VEMiIGNsYXNzPSJ7ZnJhbWVDbHN9LXRjIHtiYXNlQ2xzfS10YyB7YmFzZUNsc30te3VpfS10Yzx0cGwgZm9yPSJ1aUNscyI+IHtwYXJlbnQuYmFzZUNsc30te3BhcmVudC51aX0tey59LXRjPC90cGw+IiBzdHlsZT0iYmFja2dyb3VuZC1wb3NpdGlvbjoge3RjfTsgaGVpZ2h0OiB7ZnJhbWVXaWR0aH1weCIgcm9sZT0icHJlc2VudGF0aW9uIj48L2Rpdj4nLCc8dHBsIGlmPSJyaWdodCI+PC9kaXY+PC90cGw+JywnPHRwbCBpZj0ibGVmdCI+PC9kaXY+PC90cGw+JywiPC90cGw+IiwnPHRwbCBpZj0ibGVmdCI+PGRpdiBpZD0ie2ZnaWR9TUwiIGNsYXNzPSJ7ZnJhbWVDbHN9LW1sIHtiYXNlQ2xzfS1tbCB7YmFzZUNsc30te3VpfS1tbDx0cGwgZm9yPSJ1aUNscyI+IHtwYXJlbnQuYmFzZUNsc30te3BhcmVudC51aX0tey59LW1sPC90cGw+IiBzdHlsZT0iYmFja2dyb3VuZC1wb3NpdGlvbjoge21sfTsgcGFkZGluZy1sZWZ0OiB7ZnJhbWVXaWR0aH1weCIgcm9sZT0icHJlc2VudGF0aW9uIj48L3RwbD4nLCc8dHBsIGlmPSJyaWdodCI+PGRpdiBpZD0ie2ZnaWR9TVIiIGNsYXNzPSJ7ZnJhbWVDbHN9LW1yIHtiYXNlQ2xzfS1tciB7YmFzZUNsc30te3VpfS1tcjx0cGwgZm9yPSJ1aUNscyI+IHtwYXJlbnQuYmFzZUNsc30te3BhcmVudC51aX0tey59LW1yPC90cGw+IiBzdHlsZT0iYmFja2dyb3VuZC1wb3NpdGlvbjoge21yfTsgcGFkZGluZy1yaWdodDoge2ZyYW1lV2lkdGh9cHgiIHJvbGU9InByZXNlbnRhdGlvbiI+PC90cGw+JywnPGRpdiBpZD0ie2ZnaWR9TUMiIGNsYXNzPSJ7ZnJhbWVDbHN9LW1jIHtiYXNlQ2xzfS1tYyB7YmFzZUNsc30te3VpfS1tYzx0cGwgZm9yPSJ1aUNscyI+IHtwYXJlbnQuYmFzZUNsc30te3BhcmVudC51aX0tey59LW1jPC90cGw+IiByb2xlPSJwcmVzZW50YXRpb24iPicsInsldGhpcy5hcHBseVJlbmRlclRwbChvdXQsIHZhbHVlcyklfSIsIjwvZGl2PiIsJzx0cGwgaWY9InJpZ2h0Ij48L2Rpdj48L3RwbD4nLCc8dHBsIGlmPSJsZWZ0Ij48L2Rpdj48L3RwbD4nLCc8dHBsIGlmPSJib3R0b20iPicsJzx0cGwgaWY9ImxlZnQiPjxkaXYgaWQ9IntmZ2lkfUJMIiBjbGFzcz0ie2ZyYW1lQ2xzfS1ibCB7YmFzZUNsc30tYmwge2Jhc2VDbHN9LXt1aX0tYmw8dHBsIGZvcj0idWlDbHMiPiB7cGFyZW50LmJhc2VDbHN9LXtwYXJlbnQudWl9LXsufS1ibDwvdHBsPiIgc3R5bGU9ImJhY2tncm91bmQtcG9zaXRpb246IHtibH07IHBhZGRpbmctbGVmdDoge2ZyYW1lV2lkdGh9cHgiIHJvbGU9InByZXNlbnRhdGlvbiI+PC90cGw+JywnPHRwbCBpZj0icmlnaHQiPjxkaXYgaWQ9IntmZ2lkfUJSIiBjbGFzcz0ie2ZyYW1lQ2xzfS1iciB7YmFzZUNsc30tYnIge2Jhc2VDbHN9LXt1aX0tYnI8dHBsIGZvcj0idWlDbHMiPiB7cGFyZW50LmJhc2VDbHN9LXtwYXJlbnQudWl9LXsufS1icjwvdHBsPiIgc3R5bGU9ImJhY2tncm91bmQtcG9zaXRpb246IHticn07IHBhZGRpbmctcmlnaHQ6IHtmcmFtZVdpZHRofXB4IiByb2xlPSJwcmVzZW50YXRpb24iPjwvdHBsPicsJzxkaXYgaWQ9IntmZ2lkfUJDIiBjbGFzcz0ie2ZyYW1lQ2xzfS1iYyB7YmFzZUNsc30tYmMge2Jhc2VDbHN9LXt1aX0tYmM8dHBsIGZvcj0idWlDbHMiPiB7cGFyZW50LmJhc2VDbHN9LXtwYXJlbnQudWl9LXsufS1iYzwvdHBsPiIgc3R5bGU9ImJhY2tncm91bmQtcG9zaXRpb246IHtiY307IGhlaWdodDoge2ZyYW1lV2lkdGh9cHgiIHJvbGU9InByZXNlbnRhdGlvbiI+PC9kaXY+JywnPHRwbCBpZj0icmlnaHQiPjwvZGl2PjwvdHBsPicsJzx0cGwgaWY9ImxlZnQiPjwvZGl2PjwvdHBsPicsIjwvdHBsPiIsInsldGhpcy5yZW5kZXJEb2NrZWRJdGVtcyhvdXQsdmFsdWVzLDEpOyV9Il0sZnJhbWVUYWJsZVRwbDpbInsldGhpcy5yZW5kZXJEb2NrZWRJdGVtcyhvdXQsdmFsdWVzLDApOyV9IiwiPHRhYmxlPjx0Ym9keT4iLCc8dHBsIGlmPSJ0b3AiPicsIjx0cj4iLCc8dHBsIGlmPSJsZWZ0Ij48dGQgaWQ9IntmZ2lkfVRMIiBjbGFzcz0ie2ZyYW1lQ2xzfS10bCB7YmFzZUNsc30tdGwge2Jhc2VDbHN9LXt1aX0tdGw8dHBsIGZvcj0idWlDbHMiPiB7cGFyZW50LmJhc2VDbHN9LXtwYXJlbnQudWl9LXsufS10bDwvdHBsPiIgc3R5bGU9ImJhY2tncm91bmQtcG9zaXRpb246IHt0bH07IHBhZGRpbmctbGVmdDp7ZnJhbWVXaWR0aH1weCIgcm9sZT0icHJlc2VudGF0aW9uIj48L3RkPjwvdHBsPicsJzx0ZCBpZD0ie2ZnaWR9VEMiIGNsYXNzPSJ7ZnJhbWVDbHN9LXRjIHtiYXNlQ2xzfS10YyB7YmFzZUNsc30te3VpfS10Yzx0cGwgZm9yPSJ1aUNscyI+IHtwYXJlbnQuYmFzZUNsc30te3BhcmVudC51aX0tey59LXRjPC90cGw+IiBzdHlsZT0iYmFja2dyb3VuZC1wb3NpdGlvbjoge3RjfTsgaGVpZ2h0OiB7ZnJhbWVXaWR0aH1weCIgcm9sZT0icHJlc2VudGF0aW9uIj48L3RkPicsJzx0cGwgaWY9InJpZ2h0Ij48dGQgaWQ9IntmZ2lkfVRSIiBjbGFzcz0ie2ZyYW1lQ2xzfS10ciB7YmFzZUNsc30tdHIge2Jhc2VDbHN9LXt1aX0tdHI8dHBsIGZvcj0idWlDbHMiPiB7cGFyZW50LmJhc2VDbHN9LXtwYXJlbnQudWl9LXsufS10cjwvdHBsPiIgc3R5bGU9ImJhY2tncm91bmQtcG9zaXRpb246IHt0cn07IHBhZGRpbmctbGVmdDoge2ZyYW1lV2lkdGh9cHgiIHJvbGU9InByZXNlbnRhdGlvbiI+PC90ZD48L3RwbD4nLCI8L3RyPiIsIjwvdHBsPiIsIjx0cj4iLCc8dHBsIGlmPSJsZWZ0Ij48dGQgaWQ9IntmZ2lkfU1MIiBjbGFzcz0ie2ZyYW1lQ2xzfS1tbCB7YmFzZUNsc30tbWwge2Jhc2VDbHN9LXt1aX0tbWw8dHBsIGZvcj0idWlDbHMiPiB7cGFyZW50LmJhc2VDbHN9LXtwYXJlbnQudWl9LXsufS1tbDwvdHBsPiIgc3R5bGU9ImJhY2tncm91bmQtcG9zaXRpb246IHttbH07IHBhZGRpbmctbGVmdDoge2ZyYW1lV2lkdGh9cHgiIHJvbGU9InByZXNlbnRhdGlvbiI+PC90ZD48L3RwbD4nLCc8dGQgaWQ9IntmZ2lkfU1DIiBjbGFzcz0ie2ZyYW1lQ2xzfS1tYyB7YmFzZUNsc30tbWMge2Jhc2VDbHN9LXt1aX0tbWM8dHBsIGZvcj0idWlDbHMiPiB7cGFyZW50LmJhc2VDbHN9LXtwYXJlbnQudWl9LXsufS1tYzwvdHBsPiIgc3R5bGU9ImJhY2tncm91bmQtcG9zaXRpb246IDAgMDsiIHJvbGU9InByZXNlbnRhdGlvbiI+JywieyV0aGlzLmFwcGx5UmVuZGVyVHBsKG91dCwgdmFsdWVzKSV9IiwiPC90ZD4iLCc8dHBsIGlmPSJyaWdodCI+PHRkIGlkPSJ7ZmdpZH1NUiIgY2xhc3M9IntmcmFtZUNsc30tbXIge2Jhc2VDbHN9LW1yIHtiYXNlQ2xzfS17dWl9LW1yPHRwbCBmb3I9InVpQ2xzIj4ge3BhcmVudC5iYXNlQ2xzfS17cGFyZW50LnVpfS17Ln0tbXI8L3RwbD4iIHN0eWxlPSJiYWNrZ3JvdW5kLXBvc2l0aW9uOiB7bXJ9OyBwYWRkaW5nLWxlZnQ6IHtmcmFtZVdpZHRofXB4IiByb2xlPSJwcmVzZW50YXRpb24iPjwvdGQ+PC90cGw+JywiPC90cj4iLCc8dHBsIGlmPSJib3R0b20iPicsIjx0cj4iLCc8dHBsIGlmPSJsZWZ0Ij48dGQgaWQ9IntmZ2lkfUJMIiBjbGFzcz0ie2ZyYW1lQ2xzfS1ibCB7YmFzZUNsc30tYmwge2Jhc2VDbHN9LXt1aX0tYmw8dHBsIGZvcj0idWlDbHMiPiB7cGFyZW50LmJhc2VDbHN9LXtwYXJlbnQudWl9LXsufS1ibDwvdHBsPiIgc3R5bGU9ImJhY2tncm91bmQtcG9zaXRpb246IHtibH07IHBhZGRpbmctbGVmdDoge2ZyYW1lV2lkdGh9cHgiIHJvbGU9InByZXNlbnRhdGlvbiI+PC90ZD48L3RwbD4nLCc8dGQgaWQ9IntmZ2lkfUJDIiBjbGFzcz0ie2ZyYW1lQ2xzfS1iYyB7YmFzZUNsc30tYmMge2Jhc2VDbHN9LXt1aX0tYmM8dHBsIGZvcj0idWlDbHMiPiB7cGFyZW50LmJhc2VDbHN9LXtwYXJlbnQudWl9LXsufS1iYzwvdHBsPiIgc3R5bGU9ImJhY2tncm91bmQtcG9zaXRpb246IHtiY307IGhlaWdodDoge2ZyYW1lV2lkdGh9cHgiIHJvbGU9InByZXNlbnRhdGlvbiI+PC90ZD4nLCc8dHBsIGlmPSJyaWdodCI+PHRkIGlkPSJ7ZmdpZH1CUiIgY2xhc3M9IntmcmFtZUNsc30tYnIge2Jhc2VDbHN9LWJyIHtiYXNlQ2xzfS17dWl9LWJyPHRwbCBmb3I9InVpQ2xzIj4ge3BhcmVudC5iYXNlQ2xzfS17cGFyZW50LnVpfS17Ln0tYnI8L3RwbD4iIHN0eWxlPSJiYWNrZ3JvdW5kLXBvc2l0aW9uOiB7YnJ9OyBwYWRkaW5nLWxlZnQ6IHtmcmFtZVdpZHRofXB4IiByb2xlPSJwcmVzZW50YXRpb24iPjwvdGQ+PC90cGw+JywiPC90cj4iLCI8L3RwbD4iLCI8L3Rib2R5PjwvdGFibGU+IiwieyV0aGlzLnJlbmRlckRvY2tlZEl0ZW1zKG91dCx2YWx1ZXMsMSk7JX0iXSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz17fSxlPWIucHJvdG9FbCxkPWIuZ2V0VGFyZ2V0RWwoKSxhO2IuZmluaXNoUmVuZGVyQ2hpbGRyZW4oKTtpZihiLnN0eWxlSHRtbENvbnRlbnQpe2QuYWRkQ2xzKGIuc3R5bGVIdG1sQ2xzKX1lLndyaXRlVG8oYyk7YT1jLnJlbW92ZWQ7aWYoYSl7ZC5yZW1vdmVDbHMoYSl9YT1jLmNscztpZihhLmxlbmd0aCl7ZC5hZGRDbHMoYSl9YT1jLnN0eWxlO2lmKGMuc3R5bGUpe2Quc2V0U3R5bGUoYSl9Yi5wcm90b0VsPW51bGw7aWYoIWIub3duZXJDdCl7Yi51cGRhdGVMYXlvdXQoKX19LGFmdGVyRmlyc3RMYXlvdXQ6ZnVuY3Rpb24oZCxhKXt2YXIgZT10aGlzLGM9RXh0LmlzRGVmaW5lZChlLngpLGI9RXh0LmlzRGVmaW5lZChlLnkpLGgsZztpZihlLmZsb2F0aW5nJiYoIWN8fCFiKSl7aWYoZS5mbG9hdFBhcmVudCl7aD1lLmZsb2F0UGFyZW50LmdldFRhcmdldEVsKCkuZ2V0Vmlld1JlZ2lvbigpO2c9ZS5lbC5nZXRBbGlnblRvWFkoZS5mbG9hdFBhcmVudC5nZXRUYXJnZXRFbCgpLCJjLWMiKTtoLmxlZnQ9Z1swXS1oLmxlZnQ7aC50b3A9Z1sxXS1oLnRvcH1lbHNle2c9ZS5lbC5nZXRBbGlnblRvWFkoZS5jb250YWluZXIsImMtYyIpO2g9ZS5jb250YWluZXIudHJhbnNsYXRlUG9pbnRzKGdbMF0sZ1sxXSl9ZS54PWM/ZS54OmgubGVmdDtlLnk9Yj9lLnk6aC50b3A7Yz1iPXRydWV9aWYoY3x8Yil7ZS5zZXRQb3NpdGlvbihlLngsZS55KX1lLm9uQm94UmVhZHkoZCxhKTtpZihlLmhhc0xpc3RlbmVycy5ib3hyZWFkeSl7ZS5maXJlRXZlbnQoImJveHJlYWR5IixlLGQsYSl9fSxvbkJveFJlYWR5OkV4dC5lbXB0eUZuLGFwcGx5UmVuZGVyU2VsZWN0b3JzOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxiPWQucmVuZGVyU2VsZWN0b3JzLGM9ZC5lbCxlPWMuZG9tLGE7ZC5hcHBseUNoaWxkRWxzKGMpO2lmKGIpe2ZvcihhIGluIGIpe2lmKGIuaGFzT3duUHJvcGVydHkoYSkmJmJbYV0pe2RbYV09RXh0LmdldChFeHQuRG9tUXVlcnkuc2VsZWN0Tm9kZShiW2FdLGUpKX19fX0sYmVmb3JlUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPWIuZ2V0VGFyZ2V0RWwoKSxhPWIuZ2V0Q29tcG9uZW50TGF5b3V0KCk7Yi5mcmFtZT1iLmZyYW1lfHxiLmFsd2F5c0ZyYW1lZDtpZighYS5pbml0aWFsaXplZCl7YS5pbml0TGF5b3V0KCl9aWYoYyl7Yy5zZXRTdHlsZShiLmdldE92ZXJmbG93U3R5bGUoKSk7Yi5vdmVyZmxvd1N0eWxlU2V0PXRydWV9Yi5zZXRVSShiLnVpKTtpZihiLmRpc2FibGVkKXtiLmRpc2FibGUodHJ1ZSl9fSxkb0FwcGx5UmVuZGVyVHBsOmZ1bmN0aW9uKGMsYSl7dmFyIGQ9YS4kY29tcCxiO2lmKCFkLnJlbmRlcmVkKXtiPWQuaW5pdFJlbmRlclRwbCgpO2IuYXBwbHlPdXQoYS5yZW5kZXJEYXRhLGMpfX0sZG9BdXRvUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZighYS5yZW5kZXJlZCl7aWYoYS5mbG9hdGluZyl7YS5yZW5kZXIoZG9jdW1lbnQuYm9keSl9ZWxzZXthLnJlbmRlcihFeHQuaXNCb29sZWFuKGEuYXV0b1JlbmRlcik/RXh0LmdldEJvZHkoKTphLmF1dG9SZW5kZXIpfX19LGRvUmVuZGVyQ29udGVudDpmdW5jdGlvbihhLGMpe3ZhciBiPWMuJGNvbXA7aWYoYi5odG1sKXtFeHQuRG9tSGVscGVyLmdlbmVyYXRlTWFya3VwKGIuaHRtbCxhKTtkZWxldGUgYi5odG1sfWlmKGIudHBsKXtpZighYi50cGwuaXNUZW1wbGF0ZSl7Yi50cGw9bmV3IEV4dC5YVGVtcGxhdGUoYi50cGwpfWlmKGIuZGF0YSl7Yi50cGwuYXBwbHlPdXQoYi5kYXRhLGEpO2RlbGV0ZSBiLmRhdGF9fX0sZG9SZW5kZXJGcmFtaW5nRG9ja2VkSXRlbXM6ZnVuY3Rpb24oYSxjLGQpe3ZhciBiPWMuJGNvbXA7aWYoIWIucmVuZGVyZWQmJmIuZG9SZW5kZXJEb2NrZWRJdGVtcyl7Yy5yZW5kZXJEYXRhLiRza2lwRG9ja2VkSXRlbXM9dHJ1ZTtiLmRvUmVuZGVyRG9ja2VkSXRlbXMuY2FsbCh0aGlzLGEsYyxkKX19LGZpbmlzaFJlbmRlcjpmdW5jdGlvbihhKXt2YXIgZz10aGlzLGIsaCxlLGQsaSxjO2lmKCFnLmVsfHxnLiRwaWQpe2lmKGcuY29udGFpbmVyKXtkPWcuY29udGFpbmVyLmdldEJ5SWQoZy5pZCx0cnVlKX1lbHNle2Q9RXh0LmdldERvbShnLmlkKX1pZighZy5lbCl7Zy53cmFwUHJpbWFyeUVsKGQpfWVsc2V7ZGVsZXRlIGcuJHBpZDtpZighZy5lbC5kb20pe2cud3JhcFByaW1hcnlFbChnLmVsKX1kLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGcuZWwuZG9tLGQpO0V4dC5yZW1vdmVOb2RlKGQpfX1lbHNle2lmKCFnLnJlbmRlcmluZyl7Yj1nLmluaXRSZW5kZXJUcGwoKTtpZihiKXtoPWcuaW5pdFJlbmRlckRhdGEoKTtiLmluc2VydEZpcnN0KGcuZ2V0VGFyZ2V0RWwoKSxoKX19fWlmKCFnLmNvbnRhaW5lcil7Zy5jb250YWluZXI9RXh0LmdldChnLmVsLmRvbS5wYXJlbnROb2RlKX1pZihnLmN0Q2xzKXtnLmNvbnRhaW5lci5hZGRDbHMoZy5jdENscyl9Zy5vblJlbmRlcihnLmNvbnRhaW5lcixhKTtpZighZy5vdmVyZmxvd1N0eWxlU2V0KXtnLmdldFRhcmdldEVsKCkuc2V0U3R5bGUoZy5nZXRPdmVyZmxvd1N0eWxlKCkpfWcuZWwuc2V0VmlzaWJpbGl0eU1vZGUoRXh0LkVsZW1lbnRbZy5oaWRlTW9kZS50b1VwcGVyQ2FzZSgpXSk7aWYoZy5vdmVyQ2xzKXtnLmVsLmhvdmVyKGcuYWRkT3ZlckNscyxnLnJlbW92ZU92ZXJDbHMsZyl9aWYoZy5oYXNMaXN0ZW5lcnMucmVuZGVyKXtnLmZpcmVFdmVudCgicmVuZGVyIixnKX1pZihnLmNvbnRlbnRFbCl7aT1FeHQuYmFzZUNTU1ByZWZpeDtjPWkrImhpZGUtIjtlPUV4dC5nZXQoZy5jb250ZW50RWwpO2UucmVtb3ZlQ2xzKFtpKyJoaWRkZW4iLGMrImRpc3BsYXkiLGMrIm9mZnNldHMiLGMrIm5vc2l6ZSJdKTtnLmdldFRhcmdldEVsKCkuYXBwZW5kQ2hpbGQoZS5kb20pfWcuYWZ0ZXJSZW5kZXIoKTtpZihnLmhhc0xpc3RlbmVycy5hZnRlcnJlbmRlcil7Zy5maXJlRXZlbnQoImFmdGVycmVuZGVyIixnKX1nLmluaXRFdmVudHMoKTtpZihnLmhpZGRlbil7Zy5lbC5oaWRlKCl9fSxmaW5pc2hSZW5kZXJDaGlsZHJlbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q29tcG9uZW50TGF5b3V0KCk7YS5maW5pc2hSZW5kZXIoKX0sZ2V0RWxDb25maWc6ZnVuY3Rpb24oKXt2YXIgaD10aGlzLGo9aC5hdXRvRWwsZT1oLmdldEZyYW1lSW5mbygpLGE9e3RhZzoiZGl2Iix0cGw6ZT9oLmluaXRGcmFtaW5nVHBsKGUudGFibGUpOmguaW5pdFJlbmRlclRwbCgpfSxiLGQsZyxrLGM7aC5pbml0U3R5bGVzKGgucHJvdG9FbCk7aC5wcm90b0VsLndyaXRlVG8oYSk7aC5wcm90b0VsLmZsdXNoKCk7aWYoRXh0LmlzU3RyaW5nKGopKXthLnRhZz1qfWVsc2V7RXh0LmFwcGx5KGEsail9YS5pZD1oLmlkO2lmKGEudHBsKXtpZihlKXtkPWguZnJhbWVFbE5hbWVzO2c9ZC5sZW5ndGg7Yz1oLmlkKyItZnJhbWUxIjtoLmZyYW1lR2VuSWQ9MTthLnRwbERhdGE9RXh0LmFwcGx5KHt9LHskY29tcDpoLGZnaWQ6Yyx1aTpoLnVpLHVpQ2xzOmgudWlDbHMsZnJhbWVDbHM6aC5mcmFtZUNscyxiYXNlQ2xzOmguYmFzZUNscyxmcmFtZVdpZHRoOmUubWF4V2lkdGgsdG9wOiEhZS50b3AsbGVmdDohIWUubGVmdCxyaWdodDohIWUucmlnaHQsYm90dG9tOiEhZS5ib3R0b20scmVuZGVyRGF0YTpoLmluaXRSZW5kZXJEYXRhKCl9LGguZ2V0RnJhbWVQb3NpdGlvbnMoZSkpO2ZvcihiPTA7YjxnO2IrKyl7az1kW2JdO2guYWRkQ2hpbGRFbHMoe25hbWU6ImZyYW1lIitrLGlkOmMra30pfWguYWRkQ2hpbGRFbHMoe25hbWU6ImZyYW1lQm9keSIsaWQ6YysiTUMifSl9ZWxzZXthLnRwbERhdGE9aC5pbml0UmVuZGVyRGF0YSgpfX1yZXR1cm4gYX0saW5pdEZyYW1pbmdUcGw6ZnVuY3Rpb24oYil7dmFyIGE9Yj90aGlzLmdldFRwbCgiZnJhbWVUYWJsZVRwbCIpOnRoaXMuZ2V0VHBsKCJmcmFtZVRwbCIpO2lmKGEmJiFhLmFwcGx5UmVuZGVyVHBsKXt0aGlzLnNldHVwRnJhbWluZ1RwbChhKX1yZXR1cm4gYX0sc2V0dXBGcmFtaW5nVHBsOmZ1bmN0aW9uKGEpe2EuYXBwbHlSZW5kZXJUcGw9dGhpcy5kb0FwcGx5UmVuZGVyVHBsO2EucmVuZGVyRG9ja2VkSXRlbXM9dGhpcy5kb1JlbmRlckZyYW1pbmdEb2NrZWRJdGVtc30sZ2V0SW5zZXJ0UG9zaXRpb246ZnVuY3Rpb24oYSl7aWYoYSE9PXVuZGVmaW5lZCl7aWYoRXh0LmlzTnVtYmVyKGEpKXthPXRoaXMuY29udGFpbmVyLmRvbS5jaGlsZE5vZGVzW2FdfWVsc2V7YT1FeHQuZ2V0RG9tKGEpfX1yZXR1cm4gYX0sZ2V0UmVuZGVyVHJlZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoIWEuaGFzTGlzdGVuZXJzLmJlZm9yZXJlbmRlcnx8YS5maXJlRXZlbnQoImJlZm9yZXJlbmRlciIsYSkhPT1mYWxzZSl7YS5iZWZvcmVSZW5kZXIoKTthLnJlbmRlcmluZz10cnVlO2lmKGEuZWwpe3JldHVybnt0YWc6ImRpdiIsaWQ6KGEuJHBpZD1FeHQuaWQoKSl9fXJldHVybiBhLmdldEVsQ29uZmlnKCl9cmV0dXJuIG51bGx9LGluaXRDb250YWluZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZighYSYmYi5lbCl7YT1iLmVsLmRvbS5wYXJlbnROb2RlO2IuYWxsb3dEb21Nb3ZlPWZhbHNlfWIuY29udGFpbmVyPWEuZG9tP2E6RXh0LmdldChhKTtyZXR1cm4gYi5jb250YWluZXJ9LGluaXRSZW5kZXJEYXRhOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm4gRXh0LmFwcGx5KHskY29tcDphLGlkOmEuaWQsdWk6YS51aSx1aUNsczphLnVpQ2xzLGJhc2VDbHM6YS5iYXNlQ2xzLGNvbXBvbmVudENsczphLmNvbXBvbmVudENscyxmcmFtZTphLmZyYW1lfSxhLnJlbmRlckRhdGEpfSxpbml0UmVuZGVyVHBsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRUcGwoInJlbmRlclRwbCIpO2lmKGEmJiFhLnJlbmRlckNvbnRlbnQpe3RoaXMuc2V0dXBSZW5kZXJUcGwoYSl9cmV0dXJuIGF9LG9uUmVuZGVyOmZ1bmN0aW9uKGQsZSl7dmFyIGg9dGhpcyxqPWgueCxpPWgueSxjLGEsayxiPWguZWwsZz1FeHQuZ2V0Qm9keSgpLmRvbTtpZihFeHQuc2NvcGVSZXNldENTUyYmIWgub3duZXJDdCl7aWYoYi5kb209PT1nKXtiLnBhcmVudCgpLmFkZENscyhFeHQucmVzZXRDbHMpfWVsc2V7aWYoaC5mbG9hdGluZyYmaC5lbC5kb20ucGFyZW50Tm9kZT09PWcpe0V4dC5yZXNldEVsZW1lbnQuYXBwZW5kQ2hpbGQoaC5lbCl9ZWxzZXtoLnJlc2V0RWw9Yi53cmFwKEV4dC5yZXNldEVsZW1lbnRTcGVjLGZhbHNlLEV4dC5zdXBwb3J0cy5DU1MzTGluZWFyR3JhZGllbnQ/dW5kZWZpbmVkOiIqIil9fX1oLmFwcGx5UmVuZGVyU2VsZWN0b3JzKCk7ZGVsZXRlIGgucmVuZGVyaW5nO2gucmVuZGVyZWQ9dHJ1ZTtjPW51bGw7aWYoaiE9PXVuZGVmaW5lZCl7Yz1jfHx7fTtjLng9an1pZihpIT09dW5kZWZpbmVkKXtjPWN8fHt9O2MueT1pfWlmKCFoLmdldEZyYW1lSW5mbygpJiZFeHQuaXNCb3JkZXJCb3gpe2E9aC53aWR0aDtrPWguaGVpZ2h0O2lmKHR5cGVvZiBhPT0ibnVtYmVyIil7Yz1jfHx7fTtjLndpZHRoPWF9aWYodHlwZW9mIGs9PSJudW1iZXIiKXtjPWN8fHt9O2MuaGVpZ2h0PWt9fWgubGFzdEJveD1oLmVsLmxhc3RCb3g9Y30scmVuZGVyOmZ1bmN0aW9uKGMsYil7dmFyIGU9dGhpcyxkPWUuZWwmJihlLmVsPUV4dC5nZXQoZS5lbCkpLGgsYSxnO0V4dC5zdXNwZW5kTGF5b3V0cygpO2M9ZS5pbml0Q29udGFpbmVyKGMpO2c9ZS5nZXRJbnNlcnRQb3NpdGlvbihiKTtpZighZCl7YT1lLmdldFJlbmRlclRyZWUoKTtpZihlLm93bmVyTGF5b3V0JiZlLm93bmVyTGF5b3V0LnRyYW5zZm9ybUl0ZW1SZW5kZXJUcmVlKXthPWUub3duZXJMYXlvdXQudHJhbnNmb3JtSXRlbVJlbmRlclRyZWUoYSl9aWYoYSl7aWYoZyl7ZD1FeHQuRG9tSGVscGVyLmluc2VydEJlZm9yZShnLGEpfWVsc2V7ZD1FeHQuRG9tSGVscGVyLmFwcGVuZChjLGEpfWUud3JhcFByaW1hcnlFbChkKX19ZWxzZXtpZighZS5oYXNMaXN0ZW5lcnMuYmVmb3JlcmVuZGVyfHxlLmZpcmVFdmVudCgiYmVmb3JlcmVuZGVyIixlKSE9PWZhbHNlKXtlLmluaXRTdHlsZXMoZCk7aWYoZS5hbGxvd0RvbU1vdmUhPT1mYWxzZSl7aWYoZyl7Yy5kb20uaW5zZXJ0QmVmb3JlKGQuZG9tLGcpfWVsc2V7Yy5kb20uYXBwZW5kQ2hpbGQoZC5kb20pfX19ZWxzZXtoPXRydWV9fWlmKGQmJiFoKXtlLmZpbmlzaFJlbmRlcihiKX1FeHQucmVzdW1lTGF5b3V0cyghYy5pc0RldGFjaGVkQm9keSl9LGVuc3VyZUF0dGFjaGVkVG9Cb2R5OmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYTt3aGlsZShiLm93bmVyQ3Qpe2I9Yi5vd25lckN0fWlmKGIuY29udGFpbmVyLmlzRGV0YWNoZWRCb2R5KXtiLmNvbnRhaW5lcj1hPUV4dC5yZXNldEVsZW1lbnQ7YS5hcHBlbmRDaGlsZChiLmVsLmRvbSk7aWYoYyl7Yi51cGRhdGVMYXlvdXQoKX1pZih0eXBlb2YgYi54PT0ibnVtYmVyInx8dHlwZW9mIGIueT09Im51bWJlciIpe2Iuc2V0UG9zaXRpb24oYi54LGIueSl9fX0sc2V0dXBSZW5kZXJUcGw6ZnVuY3Rpb24oYSl7YS5yZW5kZXJCb2R5PWEucmVuZGVyQ29udGVudD10aGlzLmRvUmVuZGVyQ29udGVudH0sd3JhcFByaW1hcnlFbDpmdW5jdGlvbihhKXt0aGlzLmVsPUV4dC5nZXQoYSx0cnVlKX0saW5pdEZyYW1lOmZ1bmN0aW9uKCl7aWYoRXh0LnN1cHBvcnRzLkNTUzNCb3JkZXJSYWRpdXN8fCF0aGlzLmZyYW1lKXtyZXR1cm59dmFyIGg9dGhpcyxlPWguZ2V0RnJhbWVJbmZvKCksaixhLGMsYixkPWguZnJhbWVFbE5hbWVzLGc9ZC5sZW5ndGgsaztpZihlKXtqPWUubWF4V2lkdGg7YT1oLmdldEZyYW1lVHBsKGUudGFibGUpO2guZnJhbWVHZW5JZD1jPShoLmZyYW1lR2VuSWR8fDApKzE7Yz1oLmlkKyItZnJhbWUiK2M7YS5pbnNlcnRGaXJzdChoLmVsLEV4dC5hcHBseSh7JGNvbXA6aCxmZ2lkOmMsdWk6aC51aSx1aUNsczpoLnVpQ2xzLGZyYW1lQ2xzOmguZnJhbWVDbHMsYmFzZUNsczpoLmJhc2VDbHMsZnJhbWVXaWR0aDpqLHRvcDohIWUudG9wLGxlZnQ6ISFlLmxlZnQscmlnaHQ6ISFlLnJpZ2h0LGJvdHRvbTohIWUuYm90dG9tfSxoLmdldEZyYW1lUG9zaXRpb25zKGUpKSk7aC5mcmFtZUJvZHk9aC5lbC5kb3duKCIuIitoLmZyYW1lQ2xzKyItbWMiKTtoLnJlbW92ZUNoaWxkRWxzKGZ1bmN0aW9uKGkpe3JldHVybiBpLmlkJiZoLmZyYW1lSWRSZWdleC50ZXN0KGkuaWQpfSk7Zm9yKGI9MDtiPGc7YisrKXtrPWRbYl07aFsiZnJhbWUiK2tdPWguZWwuZ2V0QnlJZChjK2spfX19LHVwZGF0ZUZyYW1lOmZ1bmN0aW9uKCl7aWYoRXh0LnN1cHBvcnRzLkNTUzNCb3JkZXJSYWRpdXN8fCF0aGlzLmZyYW1lKXtyZXR1cm59dmFyIGU9dGhpcyxoPXRoaXMuZnJhbWVTaXplJiZ0aGlzLmZyYW1lU2l6ZS50YWJsZSxnPXRoaXMuZnJhbWVUTCxkPXRoaXMuZnJhbWVCTCxjPXRoaXMuZnJhbWVNTCxhPXRoaXMuZnJhbWVNQyxiO3RoaXMuaW5pdEZyYW1lKCk7aWYoYSl7aWYoZS5mcmFtZSl7Yj10aGlzLmZyYW1lTUMuZG9tLmNsYXNzTmFtZTthLmluc2VydEFmdGVyKHRoaXMuZnJhbWVNQyk7dGhpcy5mcmFtZU1DLnJlbW92ZSgpO3RoaXMuZnJhbWVCb2R5PXRoaXMuZnJhbWVNQz1hO2EuZG9tLmNsYXNzTmFtZT1iO2lmKGgpe2UuZWwucXVlcnkoIj4gdGFibGUiKVsxXS5yZW1vdmUoKX1lbHNle2lmKGcpe2cucmVtb3ZlKCl9aWYoZCl7ZC5yZW1vdmUoKX1pZihjKXtjLnJlbW92ZSgpfX19fWVsc2V7aWYoZS5mcmFtZSl7dGhpcy5hcHBseVJlbmRlclNlbGVjdG9ycygpfX19LGdldEZyYW1lSW5mbzpmdW5jdGlvbigpe2lmKEV4dC5zdXBwb3J0cy5DU1MzQm9yZGVyUmFkaXVzfHwhdGhpcy5mcmFtZSl7cmV0dXJuIGZhbHNlfXZhciBnPXRoaXMsaT1nLmZyYW1lSW5mb0NhY2hlLGE9Zy5lbHx8Zy5wcm90b0VsLGo9YS5kb20/YS5kb20uY2xhc3NOYW1lOmEuY2xhc3NMaXN0LmpvaW4oIiAiKSxkPWlbal0sZSxjLGgsYjtpZihkPT1udWxsKXtlPUV4dC5mbHkoZy5nZXRTdHlsZVByb3h5KGopLCJmcmFtZS1zdHlsZS1lbCIpO2M9ZS5nZXRTdHlsZSgiYmFja2dyb3VuZC1wb3NpdGlvbi14Iik7aD1lLmdldFN0eWxlKCJiYWNrZ3JvdW5kLXBvc2l0aW9uLXkiKTtpZighYyYmIWgpe2I9ZS5nZXRTdHlsZSgiYmFja2dyb3VuZC1wb3NpdGlvbiIpLnNwbGl0KCIgIik7Yz1iWzBdO2g9YlsxXX1kPWcuY2FsY3VsYXRlRnJhbWUoYyxoKTtpZihkKXthLnNldFN0eWxlKCJiYWNrZ3JvdW5kLWltYWdlIiwibm9uZSIpfWlbal09ZH1nLmZyYW1lPSEhZDtnLmZyYW1lU2l6ZT1kO3JldHVybiBkfSxjYWxjdWxhdGVGcmFtZTpmdW5jdGlvbihoLGcpe2lmKCEocGFyc2VJbnQoaCwxMCk+PTEwMDAwMDAmJnBhcnNlSW50KGcsMTApPj0xMDAwMDAwKSl7cmV0dXJuIGZhbHNlfXZhciBhPU1hdGgubWF4LGI9cGFyc2VJbnQoaC5zdWJzdHIoMywyKSwxMCksZT1wYXJzZUludChoLnN1YnN0cig1LDIpLDEwKSxjPXBhcnNlSW50KGcuc3Vic3RyKDMsMiksMTApLGk9cGFyc2VJbnQoZy5zdWJzdHIoNSwyKSwxMCksZD17dGFibGU6aC5zdWJzdHIoMCwzKT09IjExMCIsdmVydGljYWw6Zy5zdWJzdHIoMCwzKT09IjExMCIsdG9wOmEoYixlKSxyaWdodDphKGUsYyksYm90dG9tOmEoaSxjKSxsZWZ0OmEoYixpKX07ZC5tYXhXaWR0aD1hKGQudG9wLGQucmlnaHQsZC5ib3R0b20sZC5sZWZ0KTtkLndpZHRoPWQubGVmdCtkLnJpZ2h0O2QuaGVpZ2h0PWQudG9wK2QuYm90dG9tO3JldHVybiBkfSxnZXRTdHlsZVByb3h5OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuc3R5bGVQcm94eUVsfHwoRXh0LkFic3RyYWN0Q29tcG9uZW50LnByb3RvdHlwZS5zdHlsZVByb3h5RWw9RXh0LnJlc2V0RWxlbWVudC5jcmVhdGVDaGlsZCh7c3R5bGU6e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdG9wOiItMTAwMDBweCJ9fSxudWxsLHRydWUpKTthLmNsYXNzTmFtZT1iO3JldHVybiBhfSxnZXRGcmFtZVBvc2l0aW9uczpmdW5jdGlvbihlKXt2YXIgaD10aGlzLGk9ZS5tYXhXaWR0aCxqPWguZG9jayxkLGIsZyxjLGE7aWYoZS52ZXJ0aWNhbCl7Yj0iMCAtIisoaSowKSsicHgiO2c9IjAgLSIrKGkqMSkrInB4IjtpZihqJiZqPT0icmlnaHQiKXtiPSJyaWdodCAtIisoaSowKSsicHgiO2c9InJpZ2h0IC0iKyhpKjEpKyJweCJ9ZD17dGw6IjAgLSIrKGkqMCkrInB4Iix0cjoiMCAtIisoaSoxKSsicHgiLGJsOiIwIC0iKyhpKjIpKyJweCIsYnI6IjAgLSIrKGkqMykrInB4IixtbDoiLSIrKGkqMSkrInB4IDAiLG1yOiJyaWdodCAwIix0YzpiLGJjOmd9fWVsc2V7Yz0iLSIrKGkqMCkrInB4IDAiO2E9InJpZ2h0IDAiO2lmKGomJmo9PSJib3R0b20iKXtjPSJsZWZ0IGJvdHRvbSI7YT0icmlnaHQgYm90dG9tIn1kPXt0bDoiMCAtIisoaSoyKSsicHgiLHRyOiJyaWdodCAtIisoaSozKSsicHgiLGJsOiIwIC0iKyhpKjQpKyJweCIsYnI6InJpZ2h0IC0iKyhpKjUpKyJweCIsbWw6YyxtcjphLHRjOiIwIC0iKyhpKjApKyJweCIsYmM6IjAgLSIrKGkqMSkrInB4In19cmV0dXJuIGR9LGdldEZyYW1lVHBsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFRwbChhPyJmcmFtZVRhYmxlVHBsIjoiZnJhbWVUcGwiKX0sZnJhbWVJbmZvQ2FjaGU6e319KTtFeHQuZGVmaW5lKCJFeHQuc3RhdGUuUHJvdmlkZXIiLHttaXhpbnM6e29ic2VydmFibGU6IkV4dC51dGlsLk9ic2VydmFibGUifSxwcmVmaXg6ImV4dC0iLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe2E9YXx8e307dmFyIGI9dGhpcztFeHQuYXBwbHkoYixhKTtiLmFkZEV2ZW50cygic3RhdGVjaGFuZ2UiKTtiLnN0YXRlPXt9O2IubWl4aW5zLm9ic2VydmFibGUuY29uc3RydWN0b3IuY2FsbChiKX0sZ2V0OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIHR5cGVvZiB0aGlzLnN0YXRlW2JdPT0idW5kZWZpbmVkIj9hOnRoaXMuc3RhdGVbYl19LGNsZWFyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7ZGVsZXRlIGIuc3RhdGVbYV07Yi5maXJlRXZlbnQoInN0YXRlY2hhbmdlIixiLGEsbnVsbCl9LHNldDpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXM7Yi5zdGF0ZVthXT1jO2IuZmlyZUV2ZW50KCJzdGF0ZWNoYW5nZSIsYixhLGMpfSxkZWNvZGVWYWx1ZTpmdW5jdGlvbihnKXt2YXIgYz10aGlzLGs9L14oYXxufGR8YnxzfG98ZSlcOiguKikkLyxiPWsuZXhlYyh1bmVzY2FwZShnKSksaCxkLGEsaixlLGk7aWYoIWJ8fCFiWzFdKXtyZXR1cm59ZD1iWzFdO2c9YlsyXTtzd2l0Y2goZCl7Y2FzZSJlIjpyZXR1cm4gbnVsbDtjYXNlIm4iOnJldHVybiBwYXJzZUZsb2F0KGcpO2Nhc2UiZCI6cmV0dXJuIG5ldyBEYXRlKERhdGUucGFyc2UoZykpO2Nhc2UiYiI6cmV0dXJuKGc9PSIxIik7Y2FzZSJhIjpoPVtdO2lmKGchPSIiKXtqPWcuc3BsaXQoIl4iKTtlPWoubGVuZ3RoO2ZvcihpPTA7aTxlO2krKyl7Zz1qW2ldO2gucHVzaChjLmRlY29kZVZhbHVlKGcpKX19cmV0dXJuIGg7Y2FzZSJvIjpoPXt9O2lmKGchPSIiKXtqPWcuc3BsaXQoIl4iKTtlPWoubGVuZ3RoO2ZvcihpPTA7aTxlO2krKyl7Zz1qW2ldO2E9Zy5zcGxpdCgiPSIpO2hbYVswXV09Yy5kZWNvZGVWYWx1ZShhWzFdKX19cmV0dXJuIGg7ZGVmYXVsdDpyZXR1cm4gZ319LGVuY29kZVZhbHVlOmZ1bmN0aW9uKGUpe3ZhciBnPSIiLGQ9MCxiLGEsYztpZihlPT1udWxsKXtyZXR1cm4iZToxIn1lbHNle2lmKHR5cGVvZiBlPT0ibnVtYmVyIil7Yj0ibjoiK2V9ZWxzZXtpZih0eXBlb2YgZT09ImJvb2xlYW4iKXtiPSJiOiIrKGU/IjEiOiIwIil9ZWxzZXtpZihFeHQuaXNEYXRlKGUpKXtiPSJkOiIrZS50b0dNVFN0cmluZygpfWVsc2V7aWYoRXh0LmlzQXJyYXkoZSkpe2ZvcihhPWUubGVuZ3RoO2Q8YTtkKyspe2crPXRoaXMuZW5jb2RlVmFsdWUoZVtkXSk7aWYoZCE9YS0xKXtnKz0iXiJ9fWI9ImE6IitnfWVsc2V7aWYodHlwZW9mIGU9PSJvYmplY3QiKXtmb3IoYyBpbiBlKXtpZih0eXBlb2YgZVtjXSE9ImZ1bmN0aW9uIiYmZVtjXSE9PXVuZGVmaW5lZCl7Zys9YysiPSIrdGhpcy5lbmNvZGVWYWx1ZShlW2NdKSsiXiJ9fWI9Im86IitnLnN1YnN0cmluZygwLGcubGVuZ3RoLTEpfWVsc2V7Yj0iczoiK2V9fX19fX1yZXR1cm4gZXNjYXBlKGIpfX0pO0V4dC5kZWZpbmUoIkV4dC5zdGF0ZS5NYW5hZ2VyIix7c2luZ2xldG9uOnRydWUscmVxdWlyZXM6WyJFeHQuc3RhdGUuUHJvdmlkZXIiXSxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3RoaXMucHJvdmlkZXI9bmV3IEV4dC5zdGF0ZS5Qcm92aWRlcigpfSxzZXRQcm92aWRlcjpmdW5jdGlvbihhKXt0aGlzLnByb3ZpZGVyPWF9LGdldDpmdW5jdGlvbihiLGEpe3JldHVybiB0aGlzLnByb3ZpZGVyLmdldChiLGEpfSxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnByb3ZpZGVyLnNldChhLGIpfSxjbGVhcjpmdW5jdGlvbihhKXt0aGlzLnByb3ZpZGVyLmNsZWFyKGEpfSxnZXRQcm92aWRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3ZpZGVyfX0pO0V4dC5kZWZpbmUoIkV4dC5zdGF0ZS5TdGF0ZWZ1bCIse21peGluczp7b2JzZXJ2YWJsZToiRXh0LnV0aWwuT2JzZXJ2YWJsZSJ9LHJlcXVpcmVzOlsiRXh0LnN0YXRlLk1hbmFnZXIiXSxzdGF0ZWZ1bDpmYWxzZSxzYXZlRGVsYXk6MTAwLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YT1hfHx7fTtpZihhLnN0YXRlZnVsIT09dW5kZWZpbmVkKXtiLnN0YXRlZnVsPWEuc3RhdGVmdWx9aWYoYS5zYXZlRGVsYXkhPT11bmRlZmluZWQpe2Iuc2F2ZURlbGF5PWEuc2F2ZURlbGF5fWIuc3RhdGVJZD1iLnN0YXRlSWR8fGEuc3RhdGVJZDtpZighYi5zdGF0ZUV2ZW50cyl7Yi5zdGF0ZUV2ZW50cz1bXX1pZihhLnN0YXRlRXZlbnRzKXtiLnN0YXRlRXZlbnRzLmNvbmNhdChhLnN0YXRlRXZlbnRzKX10aGlzLmFkZEV2ZW50cygiYmVmb3Jlc3RhdGVyZXN0b3JlIiwic3RhdGVyZXN0b3JlIiwiYmVmb3Jlc3RhdGVzYXZlIiwic3RhdGVzYXZlIik7Yi5taXhpbnMub2JzZXJ2YWJsZS5jb25zdHJ1Y3Rvci5jYWxsKGIpO2lmKGIuc3RhdGVmdWwhPT1mYWxzZSl7Yi5hZGRTdGF0ZUV2ZW50cyhiLnN0YXRlRXZlbnRzKTtiLmluaXRTdGF0ZSgpfX0sYWRkU3RhdGVFdmVudHM6ZnVuY3Rpb24oYyl7dmFyIGU9dGhpcyxiLGQsYTtpZihlLnN0YXRlZnVsJiZlLmdldFN0YXRlSWQoKSl7aWYodHlwZW9mIGM9PSJzdHJpbmciKXtjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKX1hPWUuc3RhdGVFdmVudHNCeU5hbWV8fChlLnN0YXRlRXZlbnRzQnlOYW1lPXt9KTtmb3IoYj1jLmxlbmd0aDtiLS07KXtkPWNbYl07aWYoIWFbZF0pe2FbZF09MTtlLm9uKGQsZS5vblN0YXRlQ2hhbmdlLGUpfX19fSxvblN0YXRlQ2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxhPWMuc2F2ZURlbGF5LGQsYjtpZighYy5zdGF0ZWZ1bCl7cmV0dXJufWlmKGEpe2lmKCFjLnN0YXRlVGFzayl7ZD1FeHQuc3RhdGUuU3RhdGVmdWw7Yj1kLnJ1bm5lcnx8KGQucnVubmVyPW5ldyBFeHQudXRpbC5UYXNrUnVubmVyKCkpO2Muc3RhdGVUYXNrPWIubmV3VGFzayh7cnVuOmMuc2F2ZVN0YXRlLHNjb3BlOmMsaW50ZXJ2YWw6YSxyZXBlYXQ6MX0pfWMuc3RhdGVUYXNrLnN0YXJ0KCl9ZWxzZXtjLnNhdmVTdGF0ZSgpfX0sc2F2ZVN0YXRlOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxkPWIuc3RhdGVmdWwmJmIuZ2V0U3RhdGVJZCgpLGE9Yi5oYXNMaXN0ZW5lcnMsYztpZihkKXtjPWIuZ2V0U3RhdGUoKXx8e307aWYoIWEuYmVmb3Jlc3RhdGVzYXZlfHxiLmZpcmVFdmVudCgiYmVmb3Jlc3RhdGVzYXZlIixiLGMpIT09ZmFsc2Upe0V4dC5zdGF0ZS5NYW5hZ2VyLnNldChkLGMpO2lmKGEuc3RhdGVzYXZlKXtiLmZpcmVFdmVudCgic3RhdGVzYXZlIixiLGMpfX19fSxnZXRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiBudWxsfSxhcHBseVN0YXRlOmZ1bmN0aW9uKGEpe2lmKGEpe0V4dC5hcHBseSh0aGlzLGEpfX0sZ2V0U3RhdGVJZDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIGEuc3RhdGVJZHx8KGEuYXV0b0dlbklkP251bGw6YS5pZCl9LGluaXRTdGF0ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsZD1iLnN0YXRlZnVsJiZiLmdldFN0YXRlSWQoKSxhPWIuaGFzTGlzdGVuZXJzLGM7aWYoZCl7Yz1FeHQuc3RhdGUuTWFuYWdlci5nZXQoZCk7aWYoYyl7Yz1FeHQuYXBwbHkoe30sYyk7aWYoIWEuYmVmb3Jlc3RhdGVyZXN0b3JlfHxiLmZpcmVFdmVudCgiYmVmb3Jlc3RhdGVyZXN0b3JlIixiLGMpIT09ZmFsc2Upe2IuYXBwbHlTdGF0ZShjKTtpZihhLnN0YXRlcmVzdG9yZSl7Yi5maXJlRXZlbnQoInN0YXRlcmVzdG9yZSIsYixjKX19fX19LHNhdmVQcm9wVG9TdGF0ZTpmdW5jdGlvbihnLGUsZCl7dmFyIGI9dGhpcyxjPWJbZ10sYT1iLmluaXRpYWxDb25maWc7aWYoYi5oYXNPd25Qcm9wZXJ0eShnKSl7aWYoIWF8fGFbZ10hPT1jKXtpZihlKXtlW2R8fGddPWN9cmV0dXJuIHRydWV9fXJldHVybiBmYWxzZX0sc2F2ZVByb3BzVG9TdGF0ZTpmdW5jdGlvbihlLGMpe3ZhciBiPXRoaXMsYSxkO2lmKHR5cGVvZiBlPT0ic3RyaW5nIil7Yi5zYXZlUHJvcFRvU3RhdGUoZSxjKX1lbHNle2ZvcihhPTAsZD1lLmxlbmd0aDthPGQ7KythKXtiLnNhdmVQcm9wVG9TdGF0ZShlW2FdLGMpfX1yZXR1cm4gY30sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLnN0YXRlVGFzaztpZihhKXthLmRlc3Ryb3koKTtiLnN0YXRlVGFzaz1udWxsfWIuY2xlYXJMaXN0ZW5lcnMoKX19KTtFeHQuZGVmaW5lKCJFeHQuQWJzdHJhY3RDb21wb25lbnQiLHtyZXF1aXJlczpbIkV4dC5Db21wb25lbnRRdWVyeSIsIkV4dC5Db21wb25lbnRNYW5hZ2VyIiwiRXh0LnV0aWwuUHJvdG9FbGVtZW50Il0sbWl4aW5zOntvYnNlcnZhYmxlOiJFeHQudXRpbC5PYnNlcnZhYmxlIixhbmltYXRlOiJFeHQudXRpbC5BbmltYXRlIixlbGVtZW50Q3Q6IkV4dC51dGlsLkVsZW1lbnRDb250YWluZXIiLHJlbmRlcmFibGU6IkV4dC51dGlsLlJlbmRlcmFibGUiLHN0YXRlOiJFeHQuc3RhdGUuU3RhdGVmdWwifSx1c2VzOlsiRXh0LlBsdWdpbk1hbmFnZXIiLCJFeHQuRWxlbWVudCIsIkV4dC5Eb21IZWxwZXIiLCJFeHQuWFRlbXBsYXRlIiwiRXh0LkNvbXBvbmVudFF1ZXJ5IiwiRXh0LkNvbXBvbmVudExvYWRlciIsIkV4dC5FdmVudE1hbmFnZXIiLCJFeHQubGF5b3V0LkNvbnRleHQiLCJFeHQubGF5b3V0LkxheW91dCIsIkV4dC5sYXlvdXQuY29tcG9uZW50LkF1dG8iLCJFeHQuTG9hZE1hc2siLCJFeHQuWkluZGV4TWFuYWdlciJdLHN0YXRpY3M6e0FVVE9fSUQ6MTAwMCxwZW5kaW5nTGF5b3V0czpudWxsLGxheW91dFN1c3BlbmRDb3VudDowLGNhbmNlbExheW91dDpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXMucnVubmluZ0xheW91dENvbnRleHR8fHRoaXMucGVuZGluZ0xheW91dHM7aWYoYil7Yi5jYW5jZWxDb21wb25lbnQoYSxmYWxzZSxjKX19LGZsdXNoTGF5b3V0czpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLnBlbmRpbmdMYXlvdXRzO2lmKGEmJmEuaW52YWxpZFF1ZXVlLmxlbmd0aCl7Yi5wZW5kaW5nTGF5b3V0cz1udWxsO2IucnVubmluZ0xheW91dENvbnRleHQ9YTtFeHQub3ZlcnJpZGUoYSx7cnVuQ29tcGxldGU6ZnVuY3Rpb24oKXtiLnJ1bm5pbmdMYXlvdXRDb250ZXh0PW51bGw7cmV0dXJuIHRoaXMuY2FsbFBhcmVudCgpfX0pO2EucnVuKCl9fSxyZXN1bWVMYXlvdXRzOmZ1bmN0aW9uKGEpe2lmKHRoaXMubGF5b3V0U3VzcGVuZENvdW50JiYhLS10aGlzLmxheW91dFN1c3BlbmRDb3VudCl7aWYoYSl7dGhpcy5mbHVzaExheW91dHMoKX19fSxzdXNwZW5kTGF5b3V0czpmdW5jdGlvbigpeysrdGhpcy5sYXlvdXRTdXNwZW5kQ291bnR9LHVwZGF0ZUxheW91dDpmdW5jdGlvbihiLGUpe3ZhciBjPXRoaXMsYT1jLnJ1bm5pbmdMYXlvdXRDb250ZXh0LGQ7aWYoYSl7YS5xdWV1ZUludmFsaWRhdGUoYil9ZWxzZXtkPWMucGVuZGluZ0xheW91dHN8fChjLnBlbmRpbmdMYXlvdXRzPW5ldyBFeHQubGF5b3V0LkNvbnRleHQoKSk7ZC5xdWV1ZUludmFsaWRhdGUoYik7aWYoIWUmJiFjLmxheW91dFN1c3BlbmRDb3VudCYmIWIuaXNMYXlvdXRTdXNwZW5kZWQoKSl7Yy5mbHVzaExheW91dHMoKX19fX0saXNDb21wb25lbnQ6dHJ1ZSxnZXRBdXRvSWQ6ZnVuY3Rpb24oKXt0aGlzLmF1dG9HZW5JZD10cnVlO3JldHVybiArK0V4dC5BYnN0cmFjdENvbXBvbmVudC5BVVRPX0lEfSxkZWZlckxheW91dHM6ZmFsc2UsYXV0b0dlbklkOmZhbHNlLHJlbmRlclRwbDoieyV0aGlzLnJlbmRlckNvbnRlbnQob3V0LHZhbHVlcyklfSIsZnJhbWVTaXplOntsZWZ0OjAsdG9wOjAscmlnaHQ6MCxib3R0b206MCx3aWR0aDowLGhlaWdodDowfSx0cGxXcml0ZU1vZGU6Im92ZXJ3cml0ZSIsYmFzZUNsczpFeHQuYmFzZUNTU1ByZWZpeCsiY29tcG9uZW50IixkaXNhYmxlZENsczpFeHQuYmFzZUNTU1ByZWZpeCsiaXRlbS1kaXNhYmxlZCIsdWk6ImRlZmF1bHQiLHVpQ2xzOltdLGhpZGRlbjpmYWxzZSxkaXNhYmxlZDpmYWxzZSxkcmFnZ2FibGU6ZmFsc2UsZmxvYXRpbmc6ZmFsc2UsaGlkZU1vZGU6ImRpc3BsYXkiLHN0eWxlSHRtbENvbnRlbnQ6ZmFsc2Usc3R5bGVIdG1sQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJodG1sIixhdXRvU2hvdzpmYWxzZSxhdXRvUmVuZGVyOmZhbHNlLGFsbG93RG9tTW92ZTp0cnVlLHJlbmRlcmVkOmZhbHNlLGNvbXBvbmVudExheW91dENvdW50ZXI6MCxzaHJpbmtXcmFwOjIsd2VpZ2h0OjAsbWFza09uRGlzYWJsZTp0cnVlLF9pc0xheW91dFJvb3Q6ZmFsc2UsY29uc3RydWN0b3I6ZnVuY3Rpb24oYyl7dmFyIGU9dGhpcyxkLGEsYjtpZihjKXtFeHQuYXBwbHkoZSxjKTtiPWUueGhvb2tzO2lmKGIpe2RlbGV0ZSBlLnhob29rcztFeHQub3ZlcnJpZGUoZSxiKX19ZWxzZXtjPXt9fWUuaW5pdGlhbENvbmZpZz1jO2UubWl4aW5zLmVsZW1lbnRDdC5jb25zdHJ1Y3Rvci5jYWxsKGUpO2UuYWRkRXZlbnRzKCJiZWZvcmVhY3RpdmF0ZSIsImFjdGl2YXRlIiwiYmVmb3JlZGVhY3RpdmF0ZSIsImRlYWN0aXZhdGUiLCJhZGRlZCIsImRpc2FibGUiLCJlbmFibGUiLCJiZWZvcmVzaG93Iiwic2hvdyIsImJlZm9yZWhpZGUiLCJoaWRlIiwicmVtb3ZlZCIsImJlZm9yZXJlbmRlciIsInJlbmRlciIsImFmdGVycmVuZGVyIiwiYm94cmVhZHkiLCJiZWZvcmVkZXN0cm95IiwiZGVzdHJveSIsInJlc2l6ZSIsIm1vdmUiLCJmb2N1cyIsImJsdXIiKTtlLmdldElkKCk7ZS5zZXR1cFByb3RvRWwoKTtpZihlLmNscyl7ZS5pbml0aWFsQ2xzPWUuY2xzO2UucHJvdG9FbC5hZGRDbHMoZS5jbHMpfWlmKGUuc3R5bGUpe2UuaW5pdGlhbFN0eWxlPWUuc3R5bGU7ZS5wcm90b0VsLnNldFN0eWxlKGUuc3R5bGUpfWUubW9ucz1bXTtlLnJlbmRlckRhdGE9ZS5yZW5kZXJEYXRhfHx7fTtlLnJlbmRlclNlbGVjdG9ycz1lLnJlbmRlclNlbGVjdG9yc3x8e307aWYoZS5wbHVnaW5zKXtlLnBsdWdpbnM9ZS5jb25zdHJ1Y3RQbHVnaW5zKCl9aWYoIWUuaGFzTGlzdGVuZXJzKXtlLmhhc0xpc3RlbmVycz1uZXcgZS5IYXNMaXN0ZW5lcnMoKX1lLmluaXRDb21wb25lbnQoKTtFeHQuQ29tcG9uZW50TWFuYWdlci5yZWdpc3RlcihlKTtlLm1peGlucy5vYnNlcnZhYmxlLmNvbnN0cnVjdG9yLmNhbGwoZSk7ZS5taXhpbnMuc3RhdGUuY29uc3RydWN0b3IuY2FsbChlLGMpO3RoaXMuYWRkU3RhdGVFdmVudHMoInJlc2l6ZSIpO2lmKGUucGx1Z2lucyl7Zm9yKGQ9MCxhPWUucGx1Z2lucy5sZW5ndGg7ZDxhO2QrKyl7ZS5wbHVnaW5zW2RdPWUuaW5pdFBsdWdpbihlLnBsdWdpbnNbZF0pfX1lLmxvYWRlcj1lLmdldExvYWRlcigpO2lmKGUucmVuZGVyVG8pe2UucmVuZGVyKGUucmVuZGVyVG8pfWlmKGUuYXV0b1Nob3cmJiFlLmlzQ29udGFpbmVkKXtlLnNob3coKX19LGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt0aGlzLnBsdWdpbnM9dGhpcy5jb25zdHJ1Y3RQbHVnaW5zKCk7dGhpcy5zZXRTaXplKHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpfSxnZXRTdGF0ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1udWxsLGE9Yi5nZXRTaXplTW9kZWwoKTtpZihhLndpZHRoLmNvbmZpZ3VyZWQpe2M9Yi5hZGRQcm9wZXJ0eVRvU3RhdGUoYywid2lkdGgiKX1pZihhLmhlaWdodC5jb25maWd1cmVkKXtjPWIuYWRkUHJvcGVydHlUb1N0YXRlKGMsImhlaWdodCIpfXJldHVybiBjfSxhZGRQcm9wZXJ0eVRvU3RhdGU6ZnVuY3Rpb24oZSxkLGMpe3ZhciBiPXRoaXMsYT1hcmd1bWVudHMubGVuZ3RoO2lmKGE9PTN8fGIuaGFzT3duUHJvcGVydHkoZCkpe2lmKGE8Myl7Yz1iW2RdfWlmKGMhPT1iLmluaXRpYWxDb25maWdbZF0peyhlfHwoZT17fSkpW2RdPWN9fXJldHVybiBlfSxzaG93OkV4dC5lbXB0eUZuLGFuaW1hdGU6ZnVuY3Rpb24oYil7dmFyIGs9dGhpcyxlLGcsZCxwLG8sbSxsLGosbixpLGMsYTtiPWJ8fHt9O289Yi50b3x8e307aWYoRXh0LmZ4Lk1hbmFnZXIuaGFzRnhCbG9jayhrLmlkKSl7cmV0dXJuIGt9ZT1FeHQuaXNEZWZpbmVkKG8ud2lkdGgpO2lmKGUpe3A9RXh0Lk51bWJlci5jb25zdHJhaW4oby53aWR0aCxrLm1pbldpZHRoLGsubWF4V2lkdGgpfWc9RXh0LmlzRGVmaW5lZChvLmhlaWdodCk7aWYoZyl7ZD1FeHQuTnVtYmVyLmNvbnN0cmFpbihvLmhlaWdodCxrLm1pbkhlaWdodCxrLm1heEhlaWdodCl9aWYoIWIuZHluYW1pYyYmKGV8fGcpKXtqPShiLmZyb20/Yi5mcm9tLndpZHRoOnVuZGVmaW5lZCl8fGsuZ2V0V2lkdGgoKTtuPWo7aT0oYi5mcm9tP2IuZnJvbS5oZWlnaHQ6dW5kZWZpbmVkKXx8ay5nZXRIZWlnaHQoKTtjPWk7YT1mYWxzZTtpZihnJiZkPmkpe2M9ZDthPXRydWV9aWYoZSYmcD5qKXtuPXA7YT10cnVlfWlmKGEpe209IUV4dC5pc051bWJlcihrLndpZHRoKTtsPSFFeHQuaXNOdW1iZXIoay5oZWlnaHQpO2suc2V0U2l6ZShuLGMpO2suZWwuc2V0U2l6ZShqLGkpO2lmKG0pe2RlbGV0ZSBrLndpZHRofWlmKGwpe2RlbGV0ZSBrLmhlaWdodH19aWYoZSl7by53aWR0aD1wfWlmKGcpe28uaGVpZ2h0PWR9fXJldHVybiBrLm1peGlucy5hbmltYXRlLmFuaW1hdGUuYXBwbHkoayxhcmd1bWVudHMpfSxvbkhpZGU6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUxheW91dCh7aXNSb290OmZhbHNlfSl9LG9uU2hvdzpmdW5jdGlvbigpe3RoaXMudXBkYXRlTGF5b3V0KHtpc1Jvb3Q6ZmFsc2V9KX0sY29uc3RydWN0UGx1Z2luOmZ1bmN0aW9uKGEpe2lmKGEucHR5cGUmJnR5cGVvZiBhLmluaXQhPSJmdW5jdGlvbiIpe2EuY21wPXRoaXM7YT1FeHQuUGx1Z2luTWFuYWdlci5jcmVhdGUoYSl9ZWxzZXtpZih0eXBlb2YgYT09InN0cmluZyIpe2E9RXh0LlBsdWdpbk1hbmFnZXIuY3JlYXRlKHtwdHlwZTphLGNtcDp0aGlzfSl9fXJldHVybiBhfSxjb25zdHJ1Y3RQbHVnaW5zOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxjLGI9W10sZCxhO2lmKGUucGx1Z2lucyl7Yz1FeHQuaXNBcnJheShlLnBsdWdpbnMpP2UucGx1Z2luczpbZS5wbHVnaW5zXTtmb3IoZD0wLGE9Yy5sZW5ndGg7ZDxhO2QrKyl7YltkXT1lLmNvbnN0cnVjdFBsdWdpbihjW2RdKX1yZXR1cm4gYn19LGluaXRQbHVnaW46ZnVuY3Rpb24oYSl7YS5pbml0KHRoaXMpO3JldHVybiBhfSx1cGRhdGVBcmlhOkV4dC5lbXB0eUZuLHJlZ2lzdGVyRmxvYXRpbmdJdGVtOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoIWEuZmxvYXRpbmdEZXNjZW5kYW50cyl7YS5mbG9hdGluZ0Rlc2NlbmRhbnRzPW5ldyBFeHQuWkluZGV4TWFuYWdlcihhKX1hLmZsb2F0aW5nRGVzY2VuZGFudHMucmVnaXN0ZXIoYil9LHVucmVnaXN0ZXJGbG9hdGluZ0l0ZW06ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZihhLmZsb2F0aW5nRGVzY2VuZGFudHMpe2EuZmxvYXRpbmdEZXNjZW5kYW50cy51bnJlZ2lzdGVyKGIpfX0sbGF5b3V0U3VzcGVuZENvdW50OjAsc3VzcGVuZExheW91dHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKCFhLnJlbmRlcmVkKXtyZXR1cm59aWYoKythLmxheW91dFN1c3BlbmRDb3VudD09MSl7YS5zdXNwZW5kTGF5b3V0PXRydWV9fSxyZXN1bWVMYXlvdXRzOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoIWEucmVuZGVyZWQpe3JldHVybn1pZighLS1hLmxheW91dFN1c3BlbmRDb3VudCl7YS5zdXNwZW5kTGF5b3V0PWZhbHNlO2lmKGImJiFhLmlzTGF5b3V0U3VzcGVuZGVkKCkpe2EudXBkYXRlTGF5b3V0KGIpfX19LHNldHVwUHJvdG9FbDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1bYi5iYXNlQ2xzLGIuZ2V0Q29tcG9uZW50TGF5b3V0KCkudGFyZ2V0Q2xzXTtpZihFeHQuaXNEZWZpbmVkKGIuY21wQ2xzKSl7aWYoRXh0LmlzRGVmaW5lZChFeHQuZ2xvYmFsLmNvbnNvbGUpKXtFeHQuZ2xvYmFsLmNvbnNvbGUud2FybigiRXh0LkNvbXBvbmVudDogY21wQ2xzIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgY29tcG9uZW50Q2xzLiIpfWIuY29tcG9uZW50Q2xzPWIuY21wQ2xzO2RlbGV0ZSBiLmNtcENsc31pZihiLmNvbXBvbmVudENscyl7YS5wdXNoKGIuY29tcG9uZW50Q2xzKX1lbHNle2IuY29tcG9uZW50Q2xzPWIuYmFzZUNsc31iLnByb3RvRWw9bmV3IEV4dC51dGlsLlByb3RvRWxlbWVudCh7Y2xzOmEuam9pbigiICIpfSl9LHNldFVJOmZ1bmN0aW9uKGcpe3ZhciBlPXRoaXMsYj1FeHQuQXJyYXkuY2xvbmUoZS51aUNscyksaD1bXSxkPVtdLGEsYztmb3IoYz0wO2M8Yi5sZW5ndGg7YysrKXthPWJbY107ZD1kLmNvbmNhdChlLnJlbW92ZUNsc1dpdGhVSShhLHRydWUpKTtoLnB1c2goYSl9aWYoZC5sZW5ndGgpe2UucmVtb3ZlQ2xzKGQpfWUucmVtb3ZlVUlGcm9tRWxlbWVudCgpO2UudWk9ZztlLmFkZFVJVG9FbGVtZW50KCk7ZD1bXTtmb3IoYz0wO2M8aC5sZW5ndGg7YysrKXthPWhbY107ZD1kLmNvbmNhdChlLmFkZENsc1dpdGhVSShhLHRydWUpKX1pZihkLmxlbmd0aCl7ZS5hZGRDbHMoZCl9aWYoZS5yZW5kZXJlZCl7ZS51cGRhdGVMYXlvdXQoKX19LGFkZENsc1dpdGhVSTpmdW5jdGlvbihjLGgpe3ZhciBnPXRoaXMsZT1bXSxkLGI9MCxhO2lmKHR5cGVvZiBjPT09InN0cmluZyIpe2M9KGMuaW5kZXhPZigiICIpPDApP1tjXTpFeHQuU3RyaW5nLnNwbGl0V29yZHMoYyl9ZD1jLmxlbmd0aDtnLnVpQ2xzPUV4dC5BcnJheS5jbG9uZShnLnVpQ2xzKTtmb3IoO2I8ZDtiKyspe2E9Y1tiXTtpZihhJiYhZy5oYXNVSUNscyhhKSl7Zy51aUNscy5wdXNoKGEpO2U9ZS5jb25jYXQoZy5hZGRVSUNsc1RvRWxlbWVudChhKSl9fWlmKGghPT10cnVlKXtnLmFkZENscyhlKX1yZXR1cm4gZX0scmVtb3ZlQ2xzV2l0aFVJOmZ1bmN0aW9uKGMsaCl7dmFyIGc9dGhpcyxlPVtdLGI9MCxkLGE7aWYodHlwZW9mIGM9PT0ic3RyaW5nIil7Yz0oYy5pbmRleE9mKCIgIik8MCk/W2NdOkV4dC5TdHJpbmcuc3BsaXRXb3JkcyhjKX1kPWMubGVuZ3RoO2ZvcihiPTA7YjxkO2IrKyl7YT1jW2JdO2lmKGEmJmcuaGFzVUlDbHMoYSkpe2cudWlDbHM9RXh0LkFycmF5LnJlbW92ZShnLnVpQ2xzLGEpO2U9ZS5jb25jYXQoZy5yZW1vdmVVSUNsc0Zyb21FbGVtZW50KGEpKX19aWYoaCE9PXRydWUpe2cucmVtb3ZlQ2xzKGUpfXJldHVybiBlfSxoYXNVSUNsczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi51aUNsc3x8W107cmV0dXJuIEV4dC5BcnJheS5jb250YWlucyhjLGEpfSxmcmFtZUVsZW1lbnRzQXJyYXk6WyJ0bCIsInRjIiwidHIiLCJtbCIsIm1jIiwibXIiLCJibCIsImJjIiwiYnIiXSxhZGRVSUNsc1RvRWxlbWVudDpmdW5jdGlvbihtKXt2YXIgaz10aGlzLGI9ay5iYXNlQ2xzKyItIitrLnVpKyItIittLG49W0V4dC5iYXNlQ1NTUHJlZml4K20say5iYXNlQ2xzKyItIittLGJdLGw9ay5mcmFtZUVsZW1lbnRDbHMsaCxnLGUsYSxkLGo7aWYoay5mcmFtZSYmIUV4dC5zdXBwb3J0cy5DU1MzQm9yZGVyUmFkaXVzKXtoPWsuZnJhbWVFbGVtZW50c0FycmF5O2c9aC5sZW5ndGg7ZT0wO2Zvcig7ZTxnO2UrKyl7ZD1oW2VdO2E9a1siZnJhbWUiK2QudG9VcHBlckNhc2UoKV07aj1iKyItIitkO2lmKGEmJmEuZG9tKXthLmFkZENscyhqKX1lbHNle2lmKEV4dC5BcnJheS5pbmRleE9mKGxbZF0saik9PS0xKXtsW2RdLnB1c2goail9fX19ay5mcmFtZUVsZW1lbnRDbHM9bDtyZXR1cm4gbn0scmVtb3ZlVUlDbHNGcm9tRWxlbWVudDpmdW5jdGlvbihtKXt2YXIgaz10aGlzLGI9ay5iYXNlQ2xzKyItIitrLnVpKyItIittLG49W0V4dC5iYXNlQ1NTUHJlZml4K20say5iYXNlQ2xzKyItIittLGJdLGw9ay5mcmFtZUVsZW1lbnRDbHMsaCxnLGUsYSxkLGo7aWYoay5mcmFtZSYmIUV4dC5zdXBwb3J0cy5DU1MzQm9yZGVyUmFkaXVzKXtoPWsuZnJhbWVFbGVtZW50c0FycmF5O2c9aC5sZW5ndGg7ZT0wO2Zvcig7ZTxnO2UrKyl7ZD1oW2VdO2E9a1siZnJhbWUiK2QudG9VcHBlckNhc2UoKV07aj1iKyItIitkO2lmKGEmJmEuZG9tKXthLmFkZENscyhqKX1lbHNle0V4dC5BcnJheS5yZW1vdmUobFtkXSxqKX19fWsuZnJhbWVFbGVtZW50Q2xzPWw7cmV0dXJuIG59LGFkZFVJVG9FbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGo9dGhpcyxrPWouYmFzZUNscysiLSIrai51aSxsPWouZnJhbWVFbGVtZW50Q2xzLGcsZSxkLGEsYixoO2ouYWRkQ2xzKGspO2lmKGouZnJhbWUmJiFFeHQuc3VwcG9ydHMuQ1NTM0JvcmRlclJhZGl1cyl7Zz1qLmZyYW1lRWxlbWVudHNBcnJheTtlPWcubGVuZ3RoO2Q9MDtmb3IoO2Q8ZTtkKyspe2I9Z1tkXTthPWpbImZyYW1lIitiLnRvVXBwZXJDYXNlKCldO2g9aysiLSIrYjtpZihhKXthLmFkZENscyhoKX1lbHNle2lmKCFFeHQuQXJyYXkuY29udGFpbnMobFtiXSxoKSl7bFtiXS5wdXNoKGgpfX19fX0scmVtb3ZlVUlGcm9tRWxlbWVudDpmdW5jdGlvbigpe3ZhciBqPXRoaXMsaz1qLmJhc2VDbHMrIi0iK2oudWksbD1qLmZyYW1lRWxlbWVudENscyxnLGUsZCxhLGIsaDtqLnJlbW92ZUNscyhrKTtpZihqLmZyYW1lJiYhRXh0LnN1cHBvcnRzLkNTUzNCb3JkZXJSYWRpdXMpe2c9ai5mcmFtZUVsZW1lbnRzQXJyYXk7ZT1nLmxlbmd0aDtkPTA7Zm9yKDtkPGU7ZCsrKXtiPWdbZF07YT1qWyJmcmFtZSIrYi50b1VwcGVyQ2FzZSgpXTtoPWsrIi0iK2I7aWYoYSl7YS5yZW1vdmVDbHMoaCl9ZWxzZXtFeHQuQXJyYXkucmVtb3ZlKGxbYl0saCl9fX19LGdldFRwbDpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LlhUZW1wbGF0ZS5nZXRUcGwodGhpcyxhKX0saW5pdFN0eWxlczpmdW5jdGlvbihqKXt2YXIgZD10aGlzLGI9RXh0LkVsZW1lbnQsZz1kLnBhZGRpbmcsYz1kLm1hcmdpbixoPWQueCxlPWQueSxhLGk7aWYoZyE9PXVuZGVmaW5lZCl7ai5zZXRTdHlsZSgicGFkZGluZyIsYi51bml0aXplQm94KChnPT09dHJ1ZSk/NTpnKSl9aWYoYyE9PXVuZGVmaW5lZCl7ai5zZXRTdHlsZSgibWFyZ2luIixiLnVuaXRpemVCb3goKGM9PT10cnVlKT81OmMpKX1pZihkLmJvcmRlciE9PXVuZGVmaW5lZCl7ZC5zZXRCb3JkZXIoZC5ib3JkZXIsail9aWYoZC5jbHMmJmQuY2xzIT1kLmluaXRpYWxDbHMpe2ouYWRkQ2xzKGQuY2xzKTtkZWxldGUgZC5jbHM7ZGVsZXRlIGQuaW5pdGlhbENsc31pZihkLnN0eWxlJiZkLnN0eWxlIT1kLmluaXRpYWxTdHlsZSl7ai5zZXRTdHlsZShkLnN0eWxlKTtkZWxldGUgZC5zdHlsZTtkZWxldGUgZC5pbml0aWFsU3R5bGV9aWYoaCE9PXVuZGVmaW5lZCl7ai5zZXRTdHlsZSgibGVmdCIsKHR5cGVvZiBoPT0ibnVtYmVyIik/KGgrInB4Iik6aCl9aWYoZSE9PXVuZGVmaW5lZCl7ai5zZXRTdHlsZSgidG9wIiwodHlwZW9mIGU9PSJudW1iZXIiKT8oZSsicHgiKTplKX1pZighZC5nZXRGcmFtZUluZm8oKSl7YT1kLndpZHRoO2k9ZC5oZWlnaHQ7aWYoYSE9PXVuZGVmaW5lZCl7aWYodHlwZW9mIGE9PT0ibnVtYmVyIil7aWYoRXh0LmlzQm9yZGVyQm94KXtqLnNldFN0eWxlKCJ3aWR0aCIsYSsicHgiKX19ZWxzZXtqLnNldFN0eWxlKCJ3aWR0aCIsYSl9fWlmKGkhPT11bmRlZmluZWQpe2lmKHR5cGVvZiBpPT09Im51bWJlciIpe2lmKEV4dC5pc0JvcmRlckJveCl7ai5zZXRTdHlsZSgiaGVpZ2h0IixpKyJweCIpfX1lbHNle2ouc2V0U3R5bGUoImhlaWdodCIsaSl9fX19LGluaXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGU9Yy5hZnRlclJlbmRlckV2ZW50cyxiLGQsYT1mdW5jdGlvbihnKXtjLm1vbihiLGcpfTtpZihlKXtmb3IoZCBpbiBlKXtpZihlLmhhc093blByb3BlcnR5KGQpKXtiPWNbZF07aWYoYiYmYi5vbil7RXh0LmVhY2goZVtkXSxhKX19fX1jLmFkZEZvY3VzTGlzdGVuZXIoKX0sYWRkRm9jdXNMaXN0ZW5lcjpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYj1jLmdldEZvY3VzRWwoKSxhO2lmKGIpe2lmKGIuaXNDb21wb25lbnQpe3JldHVybiBiLmFkZEZvY3VzTGlzdGVuZXIoKX1hPWIubmVlZHNUYWJJbmRleCgpO2lmKCFjLmZvY3VzTGlzdGVuZXJBZGRlZCYmKCFhfHxFeHQuRm9jdXNNYW5hZ2VyLmVuYWJsZWQpKXtpZihhKXtiLmRvbS50YWJJbmRleD0tMX1iLm9uKHtmb2N1czpjLm9uRm9jdXMsYmx1cjpjLm9uQmx1cixzY29wZTpjfSk7Yy5mb2N1c0xpc3RlbmVyQWRkZWQ9dHJ1ZX19fSxnZXRGb2N1c0VsOkV4dC5lbXB0eUZuLGlzRm9jdXNhYmxlOmZ1bmN0aW9uKGQpe3ZhciBiPXRoaXMsYTtpZigoYi5mb2N1c2FibGUhPT1mYWxzZSkmJihhPWIuZ2V0Rm9jdXNFbCgpKSYmYi5yZW5kZXJlZCYmIWIuZGVzdHJveWluZyYmIWIuaXNEZXN0cm95ZWQmJiFiLmRpc2FibGVkJiZiLmlzVmlzaWJsZSh0cnVlKSl7aWYoYS5pc0NvbXBvbmVudCl7cmV0dXJuIGEuaXNGb2N1c2FibGUoKX1yZXR1cm4gYSYmYS5kb20mJmEuaXNWaXNpYmxlKCl9fSxwcmVGb2N1czpFeHQuZW1wdHlGbixvbkZvY3VzOmZ1bmN0aW9uKGQpe3ZhciBjPXRoaXMsYj1jLmZvY3VzQ2xzLGE9Yy5nZXRGb2N1c0VsKCk7aWYoIWMuZGlzYWJsZWQpe2MucHJlRm9jdXMoZCk7aWYoYiYmYSl7YS5hZGRDbHMoYy5hZGRDbHNXaXRoVUkoYix0cnVlKSl9aWYoIWMuaGFzRm9jdXMpe2MuaGFzRm9jdXM9dHJ1ZTtjLmZpcmVFdmVudCgiZm9jdXMiLGMsZCl9fX0sYmVmb3JlQmx1cjpFeHQuZW1wdHlGbixvbkJsdXI6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcyxiPWMuZm9jdXNDbHMsYT1jLmdldEZvY3VzRWwoKTtpZihjLmRlc3Ryb3lpbmcpe3JldHVybn1jLmJlZm9yZUJsdXIoZCk7aWYoYiYmYSl7YS5yZW1vdmVDbHMoYy5yZW1vdmVDbHNXaXRoVUkoYix0cnVlKSl9aWYoYy52YWxpZGF0ZU9uQmx1cil7Yy52YWxpZGF0ZSgpfWMuaGFzRm9jdXM9ZmFsc2U7Yy5maXJlRXZlbnQoImJsdXIiLGMsZCk7Yy5wb3N0Qmx1cihkKX0scG9zdEJsdXI6RXh0LmVtcHR5Rm4saXM6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5Db21wb25lbnRRdWVyeS5pcyh0aGlzLGEpfSx1cDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldEJ1YmJsZVRhcmdldCgpO2lmKGIpe2Zvcig7YTthPWEuZ2V0QnViYmxlVGFyZ2V0KCkpe2lmKEV4dC5Db21wb25lbnRRdWVyeS5pcyhhLGIpKXtyZXR1cm4gYX19fXJldHVybiBhfSxuZXh0U2libGluZzpmdW5jdGlvbihiKXt2YXIgZz10aGlzLm93bmVyQ3QsZCxlLGEsaDtpZihnKXtkPWcuaXRlbXM7YT1kLmluZGV4T2YodGhpcykrMTtpZihhKXtpZihiKXtmb3IoZT1kLmdldENvdW50KCk7YTxlO2ErKyl7aWYoKGg9ZC5nZXRBdChhKSkuaXMoYikpe3JldHVybiBofX19ZWxzZXtpZihhPGQuZ2V0Q291bnQoKSl7cmV0dXJuIGQuZ2V0QXQoYSl9fX19cmV0dXJuIG51bGx9LHByZXZpb3VzU2libGluZzpmdW5jdGlvbihiKXt2YXIgZT10aGlzLm93bmVyQ3QsZCxhLGc7aWYoZSl7ZD1lLml0ZW1zO2E9ZC5pbmRleE9mKHRoaXMpO2lmKGEhPS0xKXtpZihiKXtmb3IoLS1hO2E+PTA7YS0tKXtpZigoZz1kLmdldEF0KGEpKS5pcyhiKSl7cmV0dXJuIGd9fX1lbHNle2lmKGEpe3JldHVybiBkLmdldEF0KC0tYSl9fX19cmV0dXJuIG51bGx9LHByZXZpb3VzTm9kZTpmdW5jdGlvbihiLGQpe3ZhciBqPXRoaXMsaD1qLm93bmVyQ3QsYSxnLGUsYztpZihkJiZqLmlzKGIpKXtyZXR1cm4gan1pZihoKXtmb3IoZz1oLml0ZW1zLml0ZW1zLGU9RXh0LkFycmF5LmluZGV4T2YoZyxqKS0xO2U+LTE7ZS0tKXtjPWdbZV07aWYoYy5xdWVyeSl7YT1jLnF1ZXJ5KGIpO2E9YVthLmxlbmd0aC0xXTtpZihhKXtyZXR1cm4gYX19aWYoYy5pcyhiKSl7cmV0dXJuIGN9fXJldHVybiBoLnByZXZpb3VzTm9kZShiLHRydWUpfXJldHVybiBudWxsfSxuZXh0Tm9kZTpmdW5jdGlvbihkLGope3ZhciBiPXRoaXMsYz1iLm93bmVyQ3QsayxlLGgsZyxhO2lmKGomJmIuaXMoZCkpe3JldHVybiBifWlmKGMpe2ZvcihlPWMuaXRlbXMuaXRlbXMsZz1FeHQuQXJyYXkuaW5kZXhPZihlLGIpKzEsaD1lLmxlbmd0aDtnPGg7ZysrKXthPWVbZ107aWYoYS5pcyhkKSl7cmV0dXJuIGF9aWYoYS5kb3duKXtrPWEuZG93bihkKTtpZihrKXtyZXR1cm4ga319fXJldHVybiBjLm5leHROb2RlKGQpfXJldHVybiBudWxsfSxnZXRJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkfHwodGhpcy5pZD0iZXh0LWNvbXAtIisodGhpcy5nZXRBdXRvSWQoKSkpfSxnZXRJdGVtSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVtSWR8fHRoaXMuaWR9LGdldEVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWx9LGdldFRhcmdldEVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnJhbWVCb2R5fHx0aGlzLmVsfSxnZXRPdmVyZmxvd1N0eWxlOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPW51bGw7aWYodHlwZW9mIGIuYXV0b1Njcm9sbD09ImJvb2xlYW4iKXthPXtvdmVyZmxvdzpiLmF1dG9TY3JvbGw/ImF1dG8iOiIifX1lbHNle2lmKGIub3ZlcmZsb3dYIT09dW5kZWZpbmVkfHxiLm92ZXJmbG93WSE9PXVuZGVmaW5lZCl7YT17Im92ZXJmbG93LXgiOihiLm92ZXJmbG93WHx8IiIpLCJvdmVyZmxvdy15IjooYi5vdmVyZmxvd1l8fCIiKX19fWlmKGEmJihFeHQuaXNJRTZ8fEV4dC5pc0lFNykpe2EucG9zaXRpb249InJlbGF0aXZlIn1yZXR1cm4gYX0saXNYVHlwZTpmdW5jdGlvbihiLGEpe2lmKGEpe3JldHVybiB0aGlzLnh0eXBlPT09Yn1lbHNle3JldHVybiB0aGlzLnh0eXBlc01hcFtiXX19LGdldFhUeXBlczpmdW5jdGlvbigpe3ZhciBjPXRoaXMuc2VsZixkLGIsYTtpZighYy54dHlwZXMpe2Q9W107Yj10aGlzO3doaWxlKGIpe2E9Yi54dHlwZXM7aWYoYSE9PXVuZGVmaW5lZCl7ZC51bnNoaWZ0LmFwcGx5KGQsYSl9Yj1iLnN1cGVyY2xhc3N9Yy54dHlwZUNoYWluPWQ7Yy54dHlwZXM9ZC5qb2luKCIvIil9cmV0dXJuIGMueHR5cGVzfSx1cGRhdGU6ZnVuY3Rpb24oYixjLGEpe3ZhciBkPXRoaXM7aWYoZC50cGwmJiFFeHQuaXNTdHJpbmcoYikpe2QuZGF0YT1iO2lmKGQucmVuZGVyZWQpe2QudHBsW2QudHBsV3JpdGVNb2RlXShkLmdldFRhcmdldEVsKCksYnx8e30pfX1lbHNle2QuaHRtbD1FeHQuaXNPYmplY3QoYik/RXh0LkRvbUhlbHBlci5tYXJrdXAoYik6YjtpZihkLnJlbmRlcmVkKXtkLmdldFRhcmdldEVsKCkudXBkYXRlKGQuaHRtbCxjLGEpfX1pZihkLnJlbmRlcmVkKXtkLnVwZGF0ZUxheW91dCgpfX0sc2V0VmlzaWJsZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1thPyJzaG93IjoiaGlkZSJdKCl9LGlzVmlzaWJsZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGU9YyxkPWMucmVuZGVyZWQmJiFjLmhpZGRlbixiPWMub3duZXJDdDtjLmhpZGRlbkFuY2VzdG9yPWZhbHNlO2lmKGMuZGVzdHJveWVkKXtyZXR1cm4gZmFsc2V9aWYoYSYmZCYmYil7d2hpbGUoYil7aWYoYi5oaWRkZW58fChiLmNvbGxhcHNlZCYmIShiLmdldERvY2tlZEl0ZW1zJiZFeHQuQXJyYXkuY29udGFpbnMoYi5nZXREb2NrZWRJdGVtcygpLGUpKSkpe2MuaGlkZGVuQW5jZXN0b3I9YjtkPWZhbHNlO2JyZWFrfWU9YjtiPWIub3duZXJDdH19cmV0dXJuIGR9LG9uQm94UmVhZHk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuZGlzYWJsZU9uQm94UmVhZHkpe2Eub25EaXNhYmxlKCl9ZWxzZXtpZihhLmVuYWJsZU9uQm94UmVhZHkpe2Eub25FbmFibGUoKX19aWYoYS5yZXNpemFibGUpe2EuaW5pdFJlc2l6YWJsZShhLnJlc2l6YWJsZSl9aWYoYS5kcmFnZ2FibGUpe2EuaW5pdERyYWdnYWJsZSgpfX0sZW5hYmxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7ZGVsZXRlIGIuZGlzYWJsZU9uQm94UmVhZHk7Yi5yZW1vdmVDbHMoYi5kaXNhYmxlZENscyk7aWYoYi5yZW5kZXJlZCl7Yi5vbkVuYWJsZSgpfWVsc2V7Yi5lbmFibGVPbkJveFJlYWR5PXRydWV9Yi5kaXNhYmxlZD1mYWxzZTtkZWxldGUgYi5yZXNldERpc2FibGU7aWYoYSE9PXRydWUpe2IuZmlyZUV2ZW50KCJlbmFibGUiLGIpfXJldHVybiBifSxkaXNhYmxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7ZGVsZXRlIGIuZW5hYmxlT25Cb3hSZWFkeTtiLmFkZENscyhiLmRpc2FibGVkQ2xzKTtpZihiLnJlbmRlcmVkKXtiLm9uRGlzYWJsZSgpfWVsc2V7Yi5kaXNhYmxlT25Cb3hSZWFkeT10cnVlfWIuZGlzYWJsZWQ9dHJ1ZTtpZihhIT09dHJ1ZSl7ZGVsZXRlIGIucmVzZXREaXNhYmxlO2IuZmlyZUV2ZW50KCJkaXNhYmxlIixiKX1yZXR1cm4gYn0sb25FbmFibGU6ZnVuY3Rpb24oKXtpZih0aGlzLm1hc2tPbkRpc2FibGUpe3RoaXMuZWwuZG9tLmRpc2FibGVkPWZhbHNlO3RoaXMudW5tYXNrKCl9fSxvbkRpc2FibGU6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9Yy5mb2N1c0NscyxhPWMuZ2V0Rm9jdXNFbCgpO2lmKGImJmEpe2EucmVtb3ZlQ2xzKGMucmVtb3ZlQ2xzV2l0aFVJKGIsdHJ1ZSkpfWlmKGMubWFza09uRGlzYWJsZSl7Yy5lbC5kb20uZGlzYWJsZWQ9dHJ1ZTtjLm1hc2soKX19LG1hc2s6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmxhc3RCb3gsYz10aGlzLmdldE1hc2tUYXJnZXQoKSxhPVtdO2lmKGIpe2FbMl09Yi5oZWlnaHR9Yy5tYXNrLmFwcGx5KGMsYSl9LHVubWFzazpmdW5jdGlvbigpe3RoaXMuZ2V0TWFza1RhcmdldCgpLnVubWFzaygpfSxnZXRNYXNrVGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWx9LGlzRGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNhYmxlZH0sc2V0RGlzYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYT8iZGlzYWJsZSI6ImVuYWJsZSJdKCl9LGlzSGlkZGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGlkZGVufSxhZGRDbHM6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxiPWMucmVuZGVyZWQ/Yy5lbDpjLnByb3RvRWw7Yi5hZGRDbHMuYXBwbHkoYixhcmd1bWVudHMpO3JldHVybiBjfSxhZGRDbGFzczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkZENscy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGhhc0NsczpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGI9Yy5yZW5kZXJlZD9jLmVsOmMucHJvdG9FbDtyZXR1cm4gYi5oYXNDbHMuYXBwbHkoYixhcmd1bWVudHMpfSxyZW1vdmVDbHM6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxiPWMucmVuZGVyZWQ/Yy5lbDpjLnByb3RvRWw7Yi5yZW1vdmVDbHMuYXBwbHkoYixhcmd1bWVudHMpO3JldHVybiBjfSxhZGRPdmVyQ2xzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZighYS5kaXNhYmxlZCl7YS5lbC5hZGRDbHMoYS5vdmVyQ2xzKX19LHJlbW92ZU92ZXJDbHM6ZnVuY3Rpb24oKXt0aGlzLmVsLnJlbW92ZUNscyh0aGlzLm92ZXJDbHMpfSxhZGRMaXN0ZW5lcjpmdW5jdGlvbihiLGcsZSxhKXt2YXIgaD10aGlzLGQsYztpZihFeHQuaXNTdHJpbmcoYikmJihFeHQuaXNPYmplY3QoZyl8fGEmJmEuZWxlbWVudCkpe2lmKGEuZWxlbWVudCl7ZD1nO2c9e307Z1tiXT1kO2I9YS5lbGVtZW50O2lmKGUpe2cuc2NvcGU9ZX1mb3IoYyBpbiBhKXtpZihhLmhhc093blByb3BlcnR5KGMpKXtpZihoLmV2ZW50T3B0aW9uc1JlLnRlc3QoYykpe2dbY109YVtjXX19fX1pZihoW2JdJiZoW2JdLm9uKXtoLm1vbihoW2JdLGcpfWVsc2V7aC5hZnRlclJlbmRlckV2ZW50cz1oLmFmdGVyUmVuZGVyRXZlbnRzfHx7fTtpZighaC5hZnRlclJlbmRlckV2ZW50c1tiXSl7aC5hZnRlclJlbmRlckV2ZW50c1tiXT1bXX1oLmFmdGVyUmVuZGVyRXZlbnRzW2JdLnB1c2goZyl9fXJldHVybiBoLm1peGlucy5vYnNlcnZhYmxlLmFkZExpc3RlbmVyLmFwcGx5KGgsYXJndW1lbnRzKX0scmVtb3ZlTWFuYWdlZExpc3RlbmVySXRlbTpmdW5jdGlvbihiLGEsaSxkLGcsZSl7dmFyIGg9dGhpcyxjPWEub3B0aW9ucz9hLm9wdGlvbnMuZWxlbWVudDpudWxsO2lmKGMpe2M9aFtjXTtpZihjJiZjLnVuKXtpZihifHwoYS5pdGVtPT09aSYmYS5lbmFtZT09PWQmJighZ3x8YS5mbj09PWcpJiYoIWV8fGEuc2NvcGU9PT1lKSkpe2MudW4oYS5lbmFtZSxhLmZuLGEuc2NvcGUpO2lmKCFiKXtFeHQuQXJyYXkucmVtb3ZlKGgubWFuYWdlZExpc3RlbmVycyxhKX19fX1lbHNle3JldHVybiBoLm1peGlucy5vYnNlcnZhYmxlLnJlbW92ZU1hbmFnZWRMaXN0ZW5lckl0ZW0uYXBwbHkoaCxhcmd1bWVudHMpfX0sZ2V0QnViYmxlVGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duZXJDdH0saXNGbG9hdGluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZsb2F0aW5nfSxpc0RyYWdnYWJsZTpmdW5jdGlvbigpe3JldHVybiAhIXRoaXMuZHJhZ2dhYmxlfSxpc0Ryb3BwYWJsZTpmdW5jdGlvbigpe3JldHVybiAhIXRoaXMuZHJvcHBhYmxlfSxvbkFkZGVkOmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcztiLm93bmVyQ3Q9YTtpZihiLmhhc0xpc3RlbmVycy5hZGRlZCl7Yi5maXJlRXZlbnQoImFkZGVkIixiLGEsYyl9fSxvblJlbW92ZWQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZihhLmhhc0xpc3RlbmVycy5yZW1vdmVkKXthLmZpcmVFdmVudCgicmVtb3ZlZCIsYSxhLm93bmVyQ3QpfWRlbGV0ZSBhLm93bmVyQ3Q7ZGVsZXRlIGEub3duZXJMYXlvdXR9LGJlZm9yZURlc3Ryb3k6RXh0LmVtcHR5Rm4sb25SZXNpemU6RXh0LmVtcHR5Rm4sc2V0U2l6ZTpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXM7aWYoYiYmdHlwZW9mIGI9PSJvYmplY3QiKXthPWIuaGVpZ2h0O2I9Yi53aWR0aH1pZih0eXBlb2YgYj09Im51bWJlciIpe2Mud2lkdGg9RXh0Lk51bWJlci5jb25zdHJhaW4oYixjLm1pbldpZHRoLGMubWF4V2lkdGgpfWVsc2V7aWYoYj09PW51bGwpe2RlbGV0ZSBjLndpZHRofX1pZih0eXBlb2YgYT09Im51bWJlciIpe2MuaGVpZ2h0PUV4dC5OdW1iZXIuY29uc3RyYWluKGEsYy5taW5IZWlnaHQsYy5tYXhIZWlnaHQpfWVsc2V7aWYoYT09PW51bGwpe2RlbGV0ZSBjLmhlaWdodH19aWYoYy5yZW5kZXJlZCYmYy5pc1Zpc2libGUoKSl7Yy51cGRhdGVMYXlvdXQoe2lzUm9vdDpmYWxzZX0pfXJldHVybiBjfSxpc0xheW91dFJvb3Q6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5vd25lckxheW91dDtpZighYnx8YS5faXNMYXlvdXRSb290fHxhLmZsb2F0aW5nKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gYi5pc0l0ZW1MYXlvdXRSb290KGEpfSxpc0xheW91dFN1c3BlbmRlZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYjt3aGlsZShhKXtpZihhLmxheW91dFN1c3BlbmRDb3VudHx8YS5zdXNwZW5kTGF5b3V0KXtyZXR1cm4gdHJ1ZX1iPWEub3duZXJMYXlvdXQ7aWYoIWIpe2JyZWFrfWE9Yi5vd25lcn1yZXR1cm4gZmFsc2V9LHVwZGF0ZUxheW91dDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLGQsYT1iJiZiLmlzUm9vdDtpZighYy5yZW5kZXJlZHx8Yy5sYXlvdXRTdXNwZW5kQ291bnR8fGMuc3VzcGVuZExheW91dCl7cmV0dXJufWlmKGMuaGlkZGVuKXtFeHQuQWJzdHJhY3RDb21wb25lbnQuY2FuY2VsTGF5b3V0KGMpfWVsc2V7aWYodHlwZW9mIGEhPSJib29sZWFuIil7YT1jLmlzTGF5b3V0Um9vdCgpfX1pZihhfHwhYy5vd25lckxheW91dHx8IWMub3duZXJMYXlvdXQub25Db250ZW50Q2hhbmdlKGMpKXtpZighYy5pc0xheW91dFN1c3BlbmRlZCgpKXtkPShiJiZiLmhhc093blByb3BlcnR5KCJkZWZlciIpKT9iLmRlZmVyOmMuZGVmZXJMYXlvdXRzO0V4dC5BYnN0cmFjdENvbXBvbmVudC51cGRhdGVMYXlvdXQoYyxkKX19fSxnZXRTaXplTW9kZWw6ZnVuY3Rpb24oail7dmFyIG49dGhpcyxhPUV4dC5sYXlvdXQuU2l6ZU1vZGVsLGQ9bi5jb21wb25lbnRMYXlvdXQub3duZXJDb250ZXh0LGI9bi53aWR0aCxwPW4uaGVpZ2h0LHEsYyxnLGUsaCxvLGwsbSxrLGk7aWYoZCl7aT1kLndpZHRoTW9kZWw7aD1kLmhlaWdodE1vZGVsfWlmKCFpfHwhaCl7Zz0oKHE9dHlwZW9mIGIpPT0ibnVtYmVyIik7ZT0oKGM9dHlwZW9mIHApPT0ibnVtYmVyIik7az1uLmZsb2F0aW5nfHwhKG89bi5vd25lckxheW91dCk7aWYoayl7bD1FeHQubGF5b3V0LkxheW91dC5wcm90b3R5cGUuYXV0b1NpemVQb2xpY3k7bT1uLmZsb2F0aW5nPzM6bi5zaHJpbmtXcmFwO2lmKGcpe2k9YS5jb25maWd1cmVkfWlmKGUpe2g9YS5jb25maWd1cmVkfX1lbHNle2w9by5nZXRJdGVtU2l6ZVBvbGljeShuLGopO209by5pc0l0ZW1TaHJpbmtXcmFwKG4pfW09KG09PT10cnVlKT8zOihtfHwwKTtpZihrJiZtKXtpZihiJiZxPT0ic3RyaW5nIil7bSY9Mn1pZihwJiZjPT0ic3RyaW5nIil7bSY9MX19aWYobSE9PTMpe2lmKCFqKXtqPW4ub3duZXJDdCYmbi5vd25lckN0LmdldFNpemVNb2RlbCgpfWlmKGope218PShqLndpZHRoLnNocmlua1dyYXA/MTowKXwoai5oZWlnaHQuc2hyaW5rV3JhcD8yOjApfX1pZighaSl7aWYoIWwuc2V0c1dpZHRoKXtpZihnKXtpPWEuY29uZmlndXJlZH1lbHNle2k9KG0mMSk/YS5zaHJpbmtXcmFwOmEubmF0dXJhbH19ZWxzZXtpZihsLnJlYWRzV2lkdGgpe2lmKGcpe2k9YS5jYWxjdWxhdGVkRnJvbUNvbmZpZ3VyZWR9ZWxzZXtpPShtJjEpP2EuY2FsY3VsYXRlZEZyb21TaHJpbmtXcmFwOmEuY2FsY3VsYXRlZEZyb21OYXR1cmFsfX1lbHNle2k9YS5jYWxjdWxhdGVkfX19aWYoIWgpe2lmKCFsLnNldHNIZWlnaHQpe2lmKGUpe2g9YS5jb25maWd1cmVkfWVsc2V7aD0obSYyKT9hLnNocmlua1dyYXA6YS5uYXR1cmFsfX1lbHNle2lmKGwucmVhZHNIZWlnaHQpe2lmKGUpe2g9YS5jYWxjdWxhdGVkRnJvbUNvbmZpZ3VyZWR9ZWxzZXtoPShtJjIpP2EuY2FsY3VsYXRlZEZyb21TaHJpbmtXcmFwOmEuY2FsY3VsYXRlZEZyb21OYXR1cmFsfX1lbHNle2g9YS5jYWxjdWxhdGVkfX19fXJldHVybiBpLnBhaXJzQnlIZWlnaHRPcmRpbmFsW2gub3JkaW5hbF19LGlzRGVzY2VuZGFudDpmdW5jdGlvbihhKXtpZihhLmlzQ29udGFpbmVyKXtmb3IodmFyIGI9dGhpcy5vd25lckN0O2I7Yj1iLm93bmVyQ3Qpe2lmKGI9PT1hKXtyZXR1cm4gdHJ1ZX19fXJldHVybiBmYWxzZX0sZG9Db21wb25lbnRMYXlvdXQ6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUxheW91dCgpO3JldHVybiB0aGlzfSxmb3JjZUNvbXBvbmVudExheW91dDpmdW5jdGlvbigpe3RoaXMudXBkYXRlTGF5b3V0KCl9LHNldENvbXBvbmVudExheW91dDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmNvbXBvbmVudExheW91dDtpZihhJiZhLmlzTGF5b3V0JiZhIT1iKXthLnNldE93bmVyKG51bGwpfXRoaXMuY29tcG9uZW50TGF5b3V0PWI7Yi5zZXRPd25lcih0aGlzKX0sZ2V0Q29tcG9uZW50TGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZighYS5jb21wb25lbnRMYXlvdXR8fCFhLmNvbXBvbmVudExheW91dC5pc0xheW91dCl7YS5zZXRDb21wb25lbnRMYXlvdXQoRXh0LmxheW91dC5MYXlvdXQuY3JlYXRlKGEuY29tcG9uZW50TGF5b3V0LCJhdXRvY29tcG9uZW50IikpfXJldHVybiBhLmNvbXBvbmVudExheW91dH0sYWZ0ZXJDb21wb25lbnRMYXlvdXQ6ZnVuY3Rpb24oYSxrLGIsail7dmFyIGc9dGhpcyxoLGQsYyxlO2lmKCsrZy5jb21wb25lbnRMYXlvdXRDb3VudGVyPT09MSl7Zy5hZnRlckZpcnN0TGF5b3V0KGEsayl9aWYoZy5mbG9hdGluZ0l0ZW1zKXtoPWcuZmxvYXRpbmdJdGVtcy5pdGVtcztkPWgubGVuZ3RoO2ZvcihjPTA7YzxkO2MrKyl7ZT1oW2NdO2lmKCFlLnJlbmRlcmVkJiZlLmF1dG9TaG93KXtlLnNob3coKX19fWlmKGcuaGFzTGlzdGVuZXJzLnJlc2l6ZSYmKGEhPT1ifHxrIT09aikpe2cuZmlyZUV2ZW50KCJyZXNpemUiLGcsYSxrLGIsail9fSxiZWZvcmVDb21wb25lbnRMYXlvdXQ6ZnVuY3Rpb24oYixhKXtyZXR1cm4gdHJ1ZX0sc2V0UG9zaXRpb246ZnVuY3Rpb24oYSxlLGIpe3ZhciBjPXRoaXMsZD1jLmJlZm9yZVNldFBvc2l0aW9uLmFwcGx5KGMsYXJndW1lbnRzKTtpZihkJiZjLnJlbmRlcmVkKXtkPWMuY29udmVydFBvc2l0aW9uKGQpO2lmKGQubGVmdCE9PWMuZWwuZ2V0TGVmdCgpfHxkLnRvcCE9PWMuZWwuZ2V0VG9wKCkpe2lmKGIpe2Muc3RvcEFuaW1hdGlvbigpO2MuYW5pbWF0ZShFeHQuYXBwbHkoe2R1cmF0aW9uOjEwMDAsbGlzdGVuZXJzOnthZnRlcmFuaW1hdGU6RXh0LkZ1bmN0aW9uLmJpbmQoYy5hZnRlclNldFBvc2l0aW9uLGMsW2QubGVmdCxkLnRvcF0pfSx0bzpkfSxiKSl9ZWxzZXtpZihkLmxlZnQhPT11bmRlZmluZWQmJmQudG9wIT09dW5kZWZpbmVkKXtjLmVsLnNldExlZnRUb3AoZC5sZWZ0LGQudG9wKX1lbHNle2lmKGQubGVmdCE9PXVuZGVmaW5lZCl7Yy5lbC5zZXRMZWZ0KGQubGVmdCl9ZWxzZXtpZihkLnRvcCE9PXVuZGVmaW5lZCl7Yy5lbC5zZXRUb3AoZC50b3ApfX19Yy5hZnRlclNldFBvc2l0aW9uKGQubGVmdCxkLnRvcCl9fX1yZXR1cm4gY30sYmVmb3JlU2V0UG9zaXRpb246ZnVuY3Rpb24oYSxlLGIpe3ZhciBkLGM7aWYoIWF8fEV4dC5pc051bWJlcihhKSl7ZD17eDphLHk6ZSxhbmltOmJ9fWVsc2V7aWYoRXh0LmlzTnVtYmVyKGM9YVswXSkpe2Q9e3g6Yyx5OmFbMV0sYW5pbTplfX1lbHNle2Q9e3g6YS54LHk6YS55LGFuaW06ZX19fWQuaGFzWD1FeHQuaXNOdW1iZXIoZC54KTtkLmhhc1k9RXh0LmlzTnVtYmVyKGQueSk7dGhpcy54PWQueDt0aGlzLnk9ZC55O3JldHVybihkLmhhc1h8fGQuaGFzWSk/ZDpudWxsfSxhZnRlclNldFBvc2l0aW9uOmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcztiLm9uUG9zaXRpb24oYSxjKTtpZihiLmhhc0xpc3RlbmVycy5tb3ZlKXtiLmZpcmVFdmVudCgibW92ZSIsYixhLGMpfX0sY29udmVydFBvc2l0aW9uOmZ1bmN0aW9uKGQsYil7dmFyIGE9e30sYz1FeHQuRWxlbWVudDtpZihkLmhhc1gpe2EubGVmdD1iP2MuYWRkVW5pdHMoZC54KTpkLnh9aWYoZC5oYXNZKXthLnRvcD1iP2MuYWRkVW5pdHMoZC55KTpkLnl9cmV0dXJuIGF9LG9uUG9zaXRpb246RXh0LmVtcHR5Rm4sc2V0V2lkdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc2V0U2l6ZShhKX0sc2V0SGVpZ2h0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNldFNpemUodW5kZWZpbmVkLGEpfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWwuZ2V0U2l6ZSgpfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsLmdldFdpZHRoKCl9LGdldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsLmdldEhlaWdodCgpfSxnZXRMb2FkZXI6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9Yy5hdXRvTG9hZD8oRXh0LmlzT2JqZWN0KGMuYXV0b0xvYWQpP2MuYXV0b0xvYWQ6e3VybDpjLmF1dG9Mb2FkfSk6bnVsbCxhPWMubG9hZGVyfHxiO2lmKGEpe2lmKCFhLmlzTG9hZGVyKXtjLmxvYWRlcj1uZXcgRXh0LkNvbXBvbmVudExvYWRlcihFeHQuYXBwbHkoe3RhcmdldDpjLGF1dG9Mb2FkOmJ9LGEpKX1lbHNle2Euc2V0VGFyZ2V0KGMpfXJldHVybiBjLmxvYWRlcn1yZXR1cm4gbnVsbH0sc2V0RG9ja2VkOmZ1bmN0aW9uKGIsYyl7dmFyIGE9dGhpczthLmRvY2s9YjtpZihjJiZhLm93bmVyQ3QmJmEucmVuZGVyZWQpe2Eub3duZXJDdC51cGRhdGVMYXlvdXQoKX1yZXR1cm4gYX0sc2V0Qm9yZGVyOmZ1bmN0aW9uKGIsZCl7dmFyIGM9dGhpcyxhPSEhZDtpZihjLnJlbmRlcmVkfHxhKXtpZighYSl7ZD1jLmVsfWlmKCFiKXtiPTB9ZWxzZXtiPUV4dC5FbGVtZW50LnVuaXRpemVCb3goKGI9PT10cnVlKT8xOmIpfWQuc2V0U3R5bGUoImJvcmRlci13aWR0aCIsYik7aWYoIWEpe2MudXBkYXRlTGF5b3V0KCl9fWMuYm9yZGVyPWJ9LG9uRGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5tb25pdG9yUmVzaXplJiZFeHQuRXZlbnRNYW5hZ2VyLnJlc2l6ZUV2ZW50KXtFeHQuRXZlbnRNYW5hZ2VyLnJlc2l6ZUV2ZW50LnJlbW92ZUxpc3RlbmVyKGEuc2V0U2l6ZSxhKX1FeHQuZGVzdHJveShhLmNvbXBvbmVudExheW91dCxhLmxvYWRNYXNrLGEuZmxvYXRpbmdEZXNjZW5kYW50cyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGI9ZC5yZW5kZXJTZWxlY3RvcnMsYSxjO2lmKCFkLmlzRGVzdHJveWVkKXtpZighZC5oYXNMaXN0ZW5lcnMuYmVmb3JlZGVzdHJveXx8ZC5maXJlRXZlbnQoImJlZm9yZWRlc3Ryb3kiLGQpIT09ZmFsc2Upe2QuZGVzdHJveWluZz10cnVlO2QuYmVmb3JlRGVzdHJveSgpO2lmKGQuZmxvYXRpbmcpe2RlbGV0ZSBkLmZsb2F0UGFyZW50O2lmKGQuekluZGV4TWFuYWdlcil7ZC56SW5kZXhNYW5hZ2VyLnVucmVnaXN0ZXIoZCl9fWVsc2V7aWYoZC5vd25lckN0JiZkLm93bmVyQ3QucmVtb3ZlKXtkLm93bmVyQ3QucmVtb3ZlKGQsZmFsc2UpfX1kLm9uRGVzdHJveSgpO0V4dC5kZXN0cm95KGQucGx1Z2lucyk7aWYoZC5oYXNMaXN0ZW5lcnMuZGVzdHJveSl7ZC5maXJlRXZlbnQoImRlc3Ryb3kiLGQpfUV4dC5Db21wb25lbnRNYW5hZ2VyLnVucmVnaXN0ZXIoZCk7ZC5taXhpbnMuc3RhdGUuZGVzdHJveS5jYWxsKGQpO2QuY2xlYXJMaXN0ZW5lcnMoKTtpZihkLnJlbmRlcmVkKXtpZighZC5wcmVzZXJ2ZUVsT25EZXN0cm95KXtkLmVsLnJlbW92ZSgpfWQubWl4aW5zLmVsZW1lbnRDdC5kZXN0cm95LmNhbGwoZCk7aWYoYil7Zm9yKGEgaW4gYil7aWYoYi5oYXNPd25Qcm9wZXJ0eShhKSl7Yz1kW2FdO2lmKGMpe2RlbGV0ZSBkW2FdO2MucmVtb3ZlKCl9fX19ZGVsZXRlIGQuZWw7ZGVsZXRlIGQuZnJhbWVCb2R5O2RlbGV0ZSBkLnJlbmRlcmVkfWQuZGVzdHJveWluZz1mYWxzZTtkLmlzRGVzdHJveWVkPXRydWV9fX0sZ2V0UGx1Z2luOmZ1bmN0aW9uKGIpe3ZhciBjPTAsYT10aGlzLnBsdWdpbnMsZD1hLmxlbmd0aDtmb3IoO2M8ZDtjKyspe2lmKGFbY10ucGx1Z2luSWQ9PT1iKXtyZXR1cm4gYVtjXX19fSxpc0Rlc2NlbmRhbnRPZjpmdW5jdGlvbihhKXtyZXR1cm4gISF0aGlzLmZpbmRQYXJlbnRCeShmdW5jdGlvbihiKXtyZXR1cm4gYj09PWF9KX19LGZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNyZWF0ZUFsaWFzKHtvbjoiYWRkTGlzdGVuZXIiLHByZXY6InByZXZpb3VzU2libGluZyIsbmV4dDoibmV4dFNpYmxpbmcifSk7RXh0LnJlc3VtZUxheW91dHM9ZnVuY3Rpb24oYil7YS5yZXN1bWVMYXlvdXRzKGIpfTtFeHQuc3VzcGVuZExheW91dHM9ZnVuY3Rpb24oKXthLnN1c3BlbmRMYXlvdXRzKCl9O0V4dC5iYXRjaExheW91dHM9ZnVuY3Rpb24oYyxiKXthLnN1c3BlbmRMYXlvdXRzKCk7Yy5jYWxsKGIpO2EucmVzdW1lTGF5b3V0cyh0cnVlKX19KTtFeHQuZGVmaW5lKCJFeHQuQWJzdHJhY3RQbHVnaW4iLHtkaXNhYmxlZDpmYWxzZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt0aGlzLmluaXRpYWxDb25maWc9YTtFeHQuYXBwbHkodGhpcyxhKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuc2VsZih0aGlzLmluaXRpYWxDb25maWcpfSxnZXRDbXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbXB9LGluaXQ6RXh0LmVtcHR5Rm4sZGVzdHJveTpFeHQuZW1wdHlGbixlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPWZhbHNlfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD10cnVlfX0pO0V4dC5kZWZpbmUoIkV4dC5BY3Rpb24iLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt0aGlzLmluaXRpYWxDb25maWc9YTt0aGlzLml0ZW1JZD1hLml0ZW1JZD0oYS5pdGVtSWR8fGEuaWR8fEV4dC5pZCgpKTt0aGlzLml0ZW1zPVtdfSxpc0FjdGlvbjp0cnVlLHNldFRleHQ6ZnVuY3Rpb24oYSl7dGhpcy5pbml0aWFsQ29uZmlnLnRleHQ9YTt0aGlzLmNhbGxFYWNoKCJzZXRUZXh0IixbYV0pfSxnZXRUZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdGlhbENvbmZpZy50ZXh0fSxzZXRJY29uQ2xzOmZ1bmN0aW9uKGEpe3RoaXMuaW5pdGlhbENvbmZpZy5pY29uQ2xzPWE7dGhpcy5jYWxsRWFjaCgic2V0SWNvbkNscyIsW2FdKX0sZ2V0SWNvbkNsczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXRpYWxDb25maWcuaWNvbkNsc30sc2V0RGlzYWJsZWQ6ZnVuY3Rpb24oYSl7dGhpcy5pbml0aWFsQ29uZmlnLmRpc2FibGVkPWE7dGhpcy5jYWxsRWFjaCgic2V0RGlzYWJsZWQiLFthXSl9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuc2V0RGlzYWJsZWQoZmFsc2UpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5zZXREaXNhYmxlZCh0cnVlKX0saXNEaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXRpYWxDb25maWcuZGlzYWJsZWR9LHNldEhpZGRlbjpmdW5jdGlvbihhKXt0aGlzLmluaXRpYWxDb25maWcuaGlkZGVuPWE7dGhpcy5jYWxsRWFjaCgic2V0VmlzaWJsZSIsWyFhXSl9LHNob3c6ZnVuY3Rpb24oKXt0aGlzLnNldEhpZGRlbihmYWxzZSl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLnNldEhpZGRlbih0cnVlKX0saXNIaWRkZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0aWFsQ29uZmlnLmhpZGRlbn0sc2V0SGFuZGxlcjpmdW5jdGlvbihiLGEpe3RoaXMuaW5pdGlhbENvbmZpZy5oYW5kbGVyPWI7dGhpcy5pbml0aWFsQ29uZmlnLnNjb3BlPWE7dGhpcy5jYWxsRWFjaCgic2V0SGFuZGxlciIsW2IsYV0pfSxlYWNoOmZ1bmN0aW9uKGIsYSl7RXh0LmVhY2godGhpcy5pdGVtcyxiLGEpfSxjYWxsRWFjaDpmdW5jdGlvbihnLGMpe3ZhciBiPXRoaXMuaXRlbXMsZD0wLGE9Yi5sZW5ndGgsZTtFeHQuc3VzcGVuZExheW91dHMoKTtmb3IoO2Q8YTtkKyspe2U9YltkXTtlW2ddLmFwcGx5KGUsYyl9RXh0LnJlc3VtZUxheW91dHModHJ1ZSl9LGFkZENvbXBvbmVudDpmdW5jdGlvbihhKXt0aGlzLml0ZW1zLnB1c2goYSk7YS5vbigiZGVzdHJveSIsdGhpcy5yZW1vdmVDb21wb25lbnQsdGhpcyl9LHJlbW92ZUNvbXBvbmVudDpmdW5jdGlvbihhKXtFeHQuQXJyYXkucmVtb3ZlKHRoaXMuaXRlbXMsYSl9LGV4ZWN1dGU6ZnVuY3Rpb24oKXt0aGlzLmluaXRpYWxDb25maWcuaGFuZGxlci5hcHBseSh0aGlzLmluaXRpYWxDb25maWcuc2NvcGV8fEV4dC5nbG9iYWwsYXJndW1lbnRzKX19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5Db25uZWN0aW9uIix7bWl4aW5zOntvYnNlcnZhYmxlOiJFeHQudXRpbC5PYnNlcnZhYmxlIn0sc3RhdGljczp7cmVxdWVzdElkOjB9LHVybDpudWxsLGFzeW5jOnRydWUsbWV0aG9kOm51bGwsdXNlcm5hbWU6IiIscGFzc3dvcmQ6IiIsZGlzYWJsZUNhY2hpbmc6dHJ1ZSx3aXRoQ3JlZGVudGlhbHM6ZmFsc2UsY29yczpmYWxzZSxkaXNhYmxlQ2FjaGluZ1BhcmFtOiJfZGMiLHRpbWVvdXQ6MzAwMDAsdXNlRGVmYXVsdEhlYWRlcjp0cnVlLGRlZmF1bHRQb3N0SGVhZGVyOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLHVzZURlZmF1bHRYaHJIZWFkZXI6dHJ1ZSxkZWZhdWx0WGhySGVhZGVyOiJYTUxIdHRwUmVxdWVzdCIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7YT1hfHx7fTtFeHQuYXBwbHkodGhpcyxhKTt0aGlzLnJlcXVlc3RzPXt9O3RoaXMubWl4aW5zLm9ic2VydmFibGUuY29uc3RydWN0b3IuY2FsbCh0aGlzKX0scmVxdWVzdDpmdW5jdGlvbihrKXtrPWt8fHt9O3ZhciBnPXRoaXMsaj1rLnNjb3BlfHx3aW5kb3csZT1rLnVzZXJuYW1lfHxnLnVzZXJuYW1lLGg9ay5wYXNzd29yZHx8Zy5wYXNzd29yZHx8IiIsYixjLGQsYSxpO2lmKGcuZmlyZUV2ZW50KCJiZWZvcmVyZXF1ZXN0IixnLGspIT09ZmFsc2Upe2M9Zy5zZXRPcHRpb25zKGssaik7aWYoZy5pc0Zvcm1VcGxvYWQoaykpe2cudXBsb2FkKGsuZm9ybSxjLnVybCxjLmRhdGEsayk7cmV0dXJuIG51bGx9aWYoay5hdXRvQWJvcnR8fGcuYXV0b0Fib3J0KXtnLmFib3J0KCl9Yj1rLmFzeW5jIT09ZmFsc2U/KGsuYXN5bmN8fGcuYXN5bmMpOmZhbHNlO2k9Zy5vcGVuUmVxdWVzdChrLGMsYixlLGgpO2E9Zy5zZXR1cEhlYWRlcnMoaSxrLGMuZGF0YSxjLnBhcmFtcyk7ZD17aWQ6KytFeHQuZGF0YS5Db25uZWN0aW9uLnJlcXVlc3RJZCx4aHI6aSxoZWFkZXJzOmEsb3B0aW9uczprLGFzeW5jOmIsdGltZW91dDpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZC50aW1lZG91dD10cnVlO2cuYWJvcnQoZCl9LGsudGltZW91dHx8Zy50aW1lb3V0KX07Zy5yZXF1ZXN0c1tkLmlkXT1kO2cubGF0ZXN0SWQ9ZC5pZDtpZihiKXtpLm9ucmVhZHlzdGF0ZWNoYW5nZT1FeHQuRnVuY3Rpb24uYmluZChnLm9uU3RhdGVDaGFuZ2UsZyxbZF0pfWkuc2VuZChjLmRhdGEpO2lmKCFiKXtyZXR1cm4gZy5vbkNvbXBsZXRlKGQpfXJldHVybiBkfWVsc2V7RXh0LmNhbGxiYWNrKGsuY2FsbGJhY2ssay5zY29wZSxbayx1bmRlZmluZWQsdW5kZWZpbmVkXSk7cmV0dXJuIG51bGx9fSx1cGxvYWQ6ZnVuY3Rpb24oYixnLHMsZSl7Yj1FeHQuZ2V0RG9tKGIpO2U9ZXx8e307dmFyIG49RXh0LmlkKCksbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKSxjPVtdLGQ9Im11bHRpcGFydC9mb3JtLWRhdGEiLHI9e3RhcmdldDpiLnRhcmdldCxtZXRob2Q6Yi5tZXRob2QsZW5jb2Rpbmc6Yi5lbmNvZGluZyxlbmN0eXBlOmIuZW5jdHlwZSxhY3Rpb246Yi5hY3Rpb259LGE9ZnVuY3Rpb24oaCx1KXtpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7RXh0LmZseShpKS5zZXQoe3R5cGU6ImhpZGRlbiIsdmFsdWU6dSxuYW1lOmh9KTtiLmFwcGVuZENoaWxkKGkpO2MucHVzaChpKX0saSxrLHAsdCxvLGosbSxxO0V4dC5mbHkobCkuc2V0KHtpZDpuLG5hbWU6bixjbHM6RXh0LmJhc2VDU1NQcmVmaXgrImhpZGUtZGlzcGxheSIsc3JjOkV4dC5TU0xfU0VDVVJFX1VSTH0pO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobCk7aWYoZG9jdW1lbnQuZnJhbWVzKXtkb2N1bWVudC5mcmFtZXNbbl0ubmFtZT1ufUV4dC5mbHkoYikuc2V0KHt0YXJnZXQ6bixtZXRob2Q6IlBPU1QiLGVuY3R5cGU6ZCxlbmNvZGluZzpkLGFjdGlvbjpnfHxyLmFjdGlvbn0pO2lmKHMpe2s9RXh0Lk9iamVjdC5mcm9tUXVlcnlTdHJpbmcocyl8fHt9O2Zvcih0IGluIGspe2lmKGsuaGFzT3duUHJvcGVydHkodCkpe3A9a1t0XTtpZihFeHQuaXNBcnJheShwKSl7bz1wLmxlbmd0aDtmb3Ioaj0wO2o8bztqKyspe2EodCxwW2pdKX19ZWxzZXthKHQscCl9fX19RXh0LmZseShsKS5vbigibG9hZCIsRXh0LkZ1bmN0aW9uLmJpbmQodGhpcy5vblVwbG9hZENvbXBsZXRlLHRoaXMsW2wsZV0pLG51bGwse3NpbmdsZTp0cnVlfSk7Yi5zdWJtaXQoKTtFeHQuZmx5KGIpLnNldChyKTttPWMubGVuZ3RoO2ZvcihxPTA7cTxtO3ErKyl7RXh0LnJlbW92ZU5vZGUoY1txXSl9fSxvblVwbG9hZENvbXBsZXRlOmZ1bmN0aW9uKGksYyl7dmFyIGQ9dGhpcyxiPXtyZXNwb25zZVRleHQ6IiIscmVzcG9uc2VYTUw6bnVsbH0saCxhO3RyeXtoPWkuY29udGVudFdpbmRvdy5kb2N1bWVudHx8aS5jb250ZW50RG9jdW1lbnR8fHdpbmRvdy5mcmFtZXNbaS5pZF0uZG9jdW1lbnQ7aWYoaCl7aWYoaC5ib2R5KXtpZigoYT1oLmJvZHkuZmlyc3RDaGlsZCkmJi9wcmUvaS50ZXN0KGEudGFnTmFtZSkpe2IucmVzcG9uc2VUZXh0PWEuaW5uZXJUZXh0fWVsc2V7aWYoYT1oLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZXh0YXJlYSIpWzBdKXtiLnJlc3BvbnNlVGV4dD1hLnZhbHVlfWVsc2V7Yi5yZXNwb25zZVRleHQ9aC5ib2R5LnRleHRDb250ZW50fHxoLmJvZHkuaW5uZXJUZXh0fX19Yi5yZXNwb25zZVhNTD1oLlhNTERvY3VtZW50fHxofX1jYXRjaChnKXt9ZC5maXJlRXZlbnQoInJlcXVlc3Rjb21wbGV0ZSIsZCxiLGMpO0V4dC5jYWxsYmFjayhjLnN1Y2Nlc3MsYy5zY29wZSxbYixjXSk7RXh0LmNhbGxiYWNrKGMuY2FsbGJhY2ssYy5zY29wZSxbYyx0cnVlLGJdKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7RXh0LnJlbW92ZU5vZGUoaSl9LDEwMCl9LGlzRm9ybVVwbG9hZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEZvcm0oYSk7aWYoYil7cmV0dXJuKGEuaXNVcGxvYWR8fCgvbXVsdGlwYXJ0XC9mb3JtLWRhdGEvaSkudGVzdChiLmdldEF0dHJpYnV0ZSgiZW5jdHlwZSIpKSl9cmV0dXJuIGZhbHNlfSxnZXRGb3JtOmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuZ2V0RG9tKGEuZm9ybSl8fG51bGx9LHNldE9wdGlvbnM6ZnVuY3Rpb24obCxrKXt2YXIgaT10aGlzLGU9bC5wYXJhbXN8fHt9LGg9aS5leHRyYVBhcmFtcyxkPWwudXJsUGFyYW1zLGM9bC51cmx8fGkudXJsLGo9bC5qc29uRGF0YSxiLGEsZztpZihFeHQuaXNGdW5jdGlvbihlKSl7ZT1lLmNhbGwoayxsKX1pZihFeHQuaXNGdW5jdGlvbihjKSl7Yz1jLmNhbGwoayxsKX1jPXRoaXMuc2V0dXBVcmwobCxjKTtnPWwucmF3RGF0YXx8bC54bWxEYXRhfHxqfHxudWxsO2lmKGomJiFFeHQuaXNQcmltaXRpdmUoaikpe2c9RXh0LmVuY29kZShnKX1pZihFeHQuaXNPYmplY3QoZSkpe2U9RXh0Lk9iamVjdC50b1F1ZXJ5U3RyaW5nKGUpfWlmKEV4dC5pc09iamVjdChoKSl7aD1FeHQuT2JqZWN0LnRvUXVlcnlTdHJpbmcoaCl9ZT1lKygoaCk/KChlKT8iJiI6IiIpK2g6IiIpO2Q9RXh0LmlzT2JqZWN0KGQpP0V4dC5PYmplY3QudG9RdWVyeVN0cmluZyhkKTpkO2U9dGhpcy5zZXR1cFBhcmFtcyhsLGUpO2I9KGwubWV0aG9kfHxpLm1ldGhvZHx8KChlfHxnKT8iUE9TVCI6IkdFVCIpKS50b1VwcGVyQ2FzZSgpO3RoaXMuc2V0dXBNZXRob2QobCxiKTthPWwuZGlzYWJsZUNhY2hpbmchPT1mYWxzZT8obC5kaXNhYmxlQ2FjaGluZ3x8aS5kaXNhYmxlQ2FjaGluZyk6ZmFsc2U7aWYoYj09PSJHRVQiJiZhKXtjPUV4dC51cmxBcHBlbmQoYywobC5kaXNhYmxlQ2FjaGluZ1BhcmFtfHxpLmRpc2FibGVDYWNoaW5nUGFyYW0pKyI9IisobmV3IERhdGUoKS5nZXRUaW1lKCkpKX1pZigoYj09IkdFVCJ8fGcpJiZlKXtjPUV4dC51cmxBcHBlbmQoYyxlKTtlPW51bGx9aWYoZCl7Yz1FeHQudXJsQXBwZW5kKGMsZCl9cmV0dXJue3VybDpjLG1ldGhvZDpiLGRhdGE6Z3x8ZXx8bnVsbH19LHNldHVwVXJsOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcy5nZXRGb3JtKGIpO2lmKGMpe2E9YXx8Yy5hY3Rpb259cmV0dXJuIGF9LHNldHVwUGFyYW1zOmZ1bmN0aW9uKGEsZCl7dmFyIGM9dGhpcy5nZXRGb3JtKGEpLGI7aWYoYyYmIXRoaXMuaXNGb3JtVXBsb2FkKGEpKXtiPUV4dC5FbGVtZW50LnNlcmlhbGl6ZUZvcm0oYyk7ZD1kPyhkKyImIitiKTpifXJldHVybiBkfSxzZXR1cE1ldGhvZDpmdW5jdGlvbihhLGIpe2lmKHRoaXMuaXNGb3JtVXBsb2FkKGEpKXtyZXR1cm4iUE9TVCJ9cmV0dXJuIGJ9LHNldHVwSGVhZGVyczpmdW5jdGlvbihtLG4sZCxjKXt2YXIgaT10aGlzLGI9RXh0LmFwcGx5KHt9LG4uaGVhZGVyc3x8e30saS5kZWZhdWx0SGVhZGVyc3x8e30pLGw9aS5kZWZhdWx0UG9zdEhlYWRlcixqPW4uanNvbkRhdGEsYT1uLnhtbERhdGEsayxnO2lmKCFiWyJDb250ZW50LVR5cGUiXSYmKGR8fGMpKXtpZihkKXtpZihuLnJhd0RhdGEpe2w9InRleHQvcGxhaW4ifWVsc2V7aWYoYSYmRXh0LmlzRGVmaW5lZChhKSl7bD0idGV4dC94bWwifWVsc2V7aWYoaiYmRXh0LmlzRGVmaW5lZChqKSl7bD0iYXBwbGljYXRpb24vanNvbiJ9fX19YlsiQ29udGVudC1UeXBlIl09bH1pZihpLnVzZURlZmF1bHRYaHJIZWFkZXImJiFiWyJYLVJlcXVlc3RlZC1XaXRoIl0pe2JbIlgtUmVxdWVzdGVkLVdpdGgiXT1pLmRlZmF1bHRYaHJIZWFkZXJ9dHJ5e2ZvcihrIGluIGIpe2lmKGIuaGFzT3duUHJvcGVydHkoaykpe2c9YltrXTttLnNldFJlcXVlc3RIZWFkZXIoayxnKX19fWNhdGNoKGgpe2kuZmlyZUV2ZW50KCJleGNlcHRpb24iLGssZyl9cmV0dXJuIGJ9LG5ld1JlcXVlc3Q6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoKGEuY29yc3x8dGhpcy5jb3JzKSYmRXh0LmlzSUUmJkV4dC5pZVZlcnNpb24+PTgpe2I9bmV3IFhEb21haW5SZXF1ZXN0KCl9ZWxzZXtiPXRoaXMuZ2V0WGhySW5zdGFuY2UoKX1yZXR1cm4gYn0sb3BlblJlcXVlc3Q6ZnVuY3Rpb24oYyxhLGQsZyxiKXt2YXIgZT10aGlzLm5ld1JlcXVlc3QoYyk7aWYoZyl7ZS5vcGVuKGEubWV0aG9kLGEudXJsLGQsZyxiKX1lbHNle2Uub3BlbihhLm1ldGhvZCxhLnVybCxkKX1pZihjLndpdGhDcmVkZW50aWFsc3x8dGhpcy53aXRoQ3JlZGVudGlhbHMpe2Uud2l0aENyZWRlbnRpYWxzPXRydWV9cmV0dXJuIGV9LGdldFhockluc3RhbmNlOihmdW5jdGlvbigpe3ZhciBiPVtmdW5jdGlvbigpe3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3QoKX0sZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1TWE1MMi5YTUxIVFRQLjMuMCIpfSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdCgiTVNYTUwyLlhNTEhUVFAiKX0sZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIil9XSxjPTAsYT1iLmxlbmd0aCxnO2Zvcig7YzxhOysrYyl7dHJ5e2c9YltjXTtnKCk7YnJlYWt9Y2F0Y2goZCl7fX1yZXR1cm4gZ30oKSksaXNMb2FkaW5nOmZ1bmN0aW9uKGEpe2lmKCFhKXthPXRoaXMuZ2V0TGF0ZXN0KCl9aWYoIShhJiZhLnhocikpe3JldHVybiBmYWxzZX12YXIgYj1hLnhoci5yZWFkeVN0YXRlO3JldHVybiAhKGI9PT0wfHxiPT00KX0sYWJvcnQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcyxkO2lmKCFiKXtiPWEuZ2V0TGF0ZXN0KCl9aWYoYiYmYS5pc0xvYWRpbmcoYikpe2Q9Yi54aHI7dHJ5e2Qub25yZWFkeXN0YXRlY2hhbmdlPW51bGx9Y2F0Y2goYyl7ZD1FeHQuZW1wdHlGbn1kLmFib3J0KCk7YS5jbGVhclRpbWVvdXQoYik7aWYoIWIudGltZWRvdXQpe2IuYWJvcnRlZD10cnVlfWEub25Db21wbGV0ZShiKTthLmNsZWFudXAoYil9fSxhYm9ydEFsbDpmdW5jdGlvbigpe3ZhciBiPXRoaXMucmVxdWVzdHMsYTtmb3IoYSBpbiBiKXtpZihiLmhhc093blByb3BlcnR5KGEpKXt0aGlzLmFib3J0KGJbYV0pfX19LGdldExhdGVzdDpmdW5jdGlvbigpe3ZhciBiPXRoaXMubGF0ZXN0SWQsYTtpZihiKXthPXRoaXMucmVxdWVzdHNbYl19cmV0dXJuIGF8fG51bGx9LG9uU3RhdGVDaGFuZ2U6ZnVuY3Rpb24oYSl7aWYoYS54aHIucmVhZHlTdGF0ZT09NCl7dGhpcy5jbGVhclRpbWVvdXQoYSk7dGhpcy5vbkNvbXBsZXRlKGEpO3RoaXMuY2xlYW51cChhKX19LGNsZWFyVGltZW91dDpmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYS50aW1lb3V0KTtkZWxldGUgYS50aW1lb3V0fSxjbGVhbnVwOmZ1bmN0aW9uKGEpe2EueGhyPW51bGw7ZGVsZXRlIGEueGhyfSxvbkNvbXBsZXRlOmZ1bmN0aW9uKGcpe3ZhciBkPXRoaXMsYz1nLm9wdGlvbnMsYSxpLGI7dHJ5e2E9ZC5wYXJzZVN0YXR1cyhnLnhoci5zdGF0dXMpfWNhdGNoKGgpe2E9e3N1Y2Nlc3M6ZmFsc2UsaXNFeGNlcHRpb246ZmFsc2V9fWk9YS5zdWNjZXNzO2lmKGkpe2I9ZC5jcmVhdGVSZXNwb25zZShnKTtkLmZpcmVFdmVudCgicmVxdWVzdGNvbXBsZXRlIixkLGIsYyk7RXh0LmNhbGxiYWNrKGMuc3VjY2VzcyxjLnNjb3BlLFtiLGNdKX1lbHNle2lmKGEuaXNFeGNlcHRpb258fGcuYWJvcnRlZHx8Zy50aW1lZG91dCl7Yj1kLmNyZWF0ZUV4Y2VwdGlvbihnKX1lbHNle2I9ZC5jcmVhdGVSZXNwb25zZShnKX1kLmZpcmVFdmVudCgicmVxdWVzdGV4Y2VwdGlvbiIsZCxiLGMpO0V4dC5jYWxsYmFjayhjLmZhaWx1cmUsYy5zY29wZSxbYixjXSl9RXh0LmNhbGxiYWNrKGMuY2FsbGJhY2ssYy5zY29wZSxbYyxpLGJdKTtkZWxldGUgZC5yZXF1ZXN0c1tnLmlkXTtyZXR1cm4gYn0scGFyc2VTdGF0dXM6ZnVuY3Rpb24oYSl7YT1hPT0xMjIzPzIwNDphO3ZhciBjPShhPj0yMDAmJmE8MzAwKXx8YT09MzA0LGI9ZmFsc2U7aWYoIWMpe3N3aXRjaChhKXtjYXNlIDEyMDAyOmNhc2UgMTIwMjk6Y2FzZSAxMjAzMDpjYXNlIDEyMDMxOmNhc2UgMTIxNTI6Y2FzZSAxMzAzMDpiPXRydWU7YnJlYWt9fXJldHVybntzdWNjZXNzOmMsaXNFeGNlcHRpb246Yn19LGNyZWF0ZVJlc3BvbnNlOmZ1bmN0aW9uKGMpe3ZhciBpPWMueGhyLGE9e30saj1pLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLnJlcGxhY2UoL1xyXG4vZywiXG4iKS5zcGxpdCgiXG4iKSxkPWoubGVuZ3RoLGssZSxoLGcsYjt3aGlsZShkLS0pe2s9altkXTtlPWsuaW5kZXhPZigiOiIpO2lmKGU+PTApe2g9ay5zdWJzdHIoMCxlKS50b0xvd2VyQ2FzZSgpO2lmKGsuY2hhckF0KGUrMSk9PSIgIil7KytlfWFbaF09ay5zdWJzdHIoZSsxKX19Yy54aHI9bnVsbDtkZWxldGUgYy54aHI7Yj17cmVxdWVzdDpjLHJlcXVlc3RJZDpjLmlkLHN0YXR1czppLnN0YXR1cyxzdGF0dXNUZXh0Omkuc3RhdHVzVGV4dCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihsKXtyZXR1cm4gYVtsLnRvTG93ZXJDYXNlKCldfSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gYX0scmVzcG9uc2VUZXh0OmkucmVzcG9uc2VUZXh0LHJlc3BvbnNlWE1MOmkucmVzcG9uc2VYTUx9O2k9bnVsbDtyZXR1cm4gYn0sY3JlYXRlRXhjZXB0aW9uOmZ1bmN0aW9uKGEpe3JldHVybntyZXF1ZXN0OmEscmVxdWVzdElkOmEuaWQsc3RhdHVzOmEuYWJvcnRlZD8tMTowLHN0YXR1c1RleHQ6YS5hYm9ydGVkPyJ0cmFuc2FjdGlvbiBhYm9ydGVkIjoiY29tbXVuaWNhdGlvbiBmYWlsdXJlIixhYm9ydGVkOmEuYWJvcnRlZCx0aW1lZG91dDphLnRpbWVkb3V0fX19KTtFeHQuZGVmaW5lKCJFeHQuQWpheCIse2V4dGVuZDoiRXh0LmRhdGEuQ29ubmVjdGlvbiIsc2luZ2xldG9uOnRydWUsYXV0b0Fib3J0OmZhbHNlfSk7RXh0LmRlZmluZSgiRXh0LnV0aWwuRmxvYXRpbmciLHt1c2VzOlsiRXh0LkxheWVyIiwiRXh0LndpbmRvdy5XaW5kb3ciXSxmb2N1c09uVG9Gcm9udDp0cnVlLHNoYWRvdzoic2lkZXMiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5lbD1uZXcgRXh0LkxheWVyKEV4dC5hcHBseSh7aGlkZU1vZGU6YS5oaWRlTW9kZSxoaWRkZW46YS5oaWRkZW4sc2hhZG93Oih0eXBlb2YgYS5zaGFkb3chPSJ1bmRlZmluZWQiKT9hLnNoYWRvdzoic2lkZXMiLHNoYWRvd09mZnNldDphLnNoYWRvd09mZnNldCxjb25zdHJhaW46ZmFsc2Usc2hpbTooYS5zaGltPT09ZmFsc2UpP2ZhbHNlOnVuZGVmaW5lZH0sYS5mbG9hdGluZyksYik7YS5mbG9hdGluZz10cnVlO2EucmVnaXN0ZXJXaXRoT3duZXJDdCgpfSxyZWdpc3RlcldpdGhPd25lckN0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnpJbmRleFBhcmVudCl7YS56SW5kZXhQYXJlbnQudW5yZWdpc3RlckZsb2F0aW5nSXRlbShhKX1hLnpJbmRleFBhcmVudD1hLnVwKCJbZmxvYXRpbmddIik7YS5zZXRGbG9hdFBhcmVudChhLm93bmVyQ3QpO2RlbGV0ZSBhLm93bmVyQ3Q7aWYoYS56SW5kZXhQYXJlbnQpe2EuekluZGV4UGFyZW50LnJlZ2lzdGVyRmxvYXRpbmdJdGVtKGEpfWVsc2V7RXh0LldpbmRvd01hbmFnZXIucmVnaXN0ZXIoYSl9fSxzZXRGbG9hdFBhcmVudDpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKGEuZmxvYXRQYXJlbnQpe2EubXVuKGEuZmxvYXRQYXJlbnQse2hpZGU6YS5vbkZsb2F0UGFyZW50SGlkZSxzaG93OmEub25GbG9hdFBhcmVudFNob3csc2NvcGU6YX0pfWEuZmxvYXRQYXJlbnQ9YjtpZihiKXthLm1vbihhLmZsb2F0UGFyZW50LHtoaWRlOmEub25GbG9hdFBhcmVudEhpZGUsc2hvdzphLm9uRmxvYXRQYXJlbnRTaG93LHNjb3BlOmF9KX1pZigoYS5jb25zdHJhaW58fGEuY29uc3RyYWluSGVhZGVyKSYmIWEuY29uc3RyYWluVG8pe2EuY29uc3RyYWluVG89Yj9iLmdldFRhcmdldEVsKCk6YS5jb250YWluZXJ9fSxvbkFmdGVyRmxvYXRMYXlvdXQ6ZnVuY3Rpb24oKXt0aGlzLnN5bmNTaGFkb3coKX0sb25GbG9hdFBhcmVudEhpZGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuaGlkZU9uUGFyZW50SGlkZSE9PWZhbHNlJiZhLmlzVmlzaWJsZSgpKXthLmhpZGUoKTthLnNob3dPblBhcmVudFNob3c9dHJ1ZX19LG9uRmxvYXRQYXJlbnRTaG93OmZ1bmN0aW9uKCl7aWYodGhpcy5zaG93T25QYXJlbnRTaG93KXtkZWxldGUgdGhpcy5zaG93T25QYXJlbnRTaG93O3RoaXMuc2hvdygpfX0sc2V0WkluZGV4OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5lbC5zZXRaSW5kZXgoYSk7YSs9MTA7aWYoYi5mbG9hdGluZ0Rlc2NlbmRhbnRzKXthPU1hdGguZmxvb3IoYi5mbG9hdGluZ0Rlc2NlbmRhbnRzLnNldEJhc2UoYSkvMTAwKSoxMDArMTAwMDB9cmV0dXJuIGF9LGRvQ29uc3RyYWluOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMsYT1jLmdldENvbnN0cmFpblZlY3RvcihiKSxkO2lmKGEpe2Q9Yy5nZXRQb3NpdGlvbighIWMuZmxvYXRQYXJlbnQpO2RbMF0rPWFbMF07ZFsxXSs9YVsxXTtjLnNldFBvc2l0aW9uKGQpfX0sZ2V0Q29uc3RyYWluVmVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYi5jb25zdHJhaW58fGIuY29uc3RyYWluSGVhZGVyKXthPWF8fChiLmZsb2F0UGFyZW50JiZiLmZsb2F0UGFyZW50LmdldFRhcmdldEVsKCkpfHxiLmNvbnRhaW5lcnx8Yi5lbC5nZXRTY29wZVBhcmVudCgpO3JldHVybihiLmNvbnN0cmFpbkhlYWRlcj9iLmhlYWRlci5lbDpiLmVsKS5nZXRDb25zdHJhaW5WZWN0b3IoYSl9fSxhbGlnblRvOmZ1bmN0aW9uKGIsYSxjKXt0aGlzLnNldFBhZ2VQb3NpdGlvbih0aGlzLmVsLmdldEFsaWduVG9YWShiLmVsfHxiLGEsYykpO3JldHVybiB0aGlzfSx0b0Zyb250OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoYS56SW5kZXhQYXJlbnQmJmEuYnJpbmdQYXJlbnRUb0Zyb250IT09ZmFsc2Upe2EuekluZGV4UGFyZW50LnRvRnJvbnQodHJ1ZSl9aWYoIUV4dC5pc0RlZmluZWQoYikpe2I9IWEuZm9jdXNPblRvRnJvbnR9aWYoYil7YS5wcmV2ZW50Rm9jdXNPbkFjdGl2YXRlPXRydWV9aWYoYS56SW5kZXhNYW5hZ2VyLmJyaW5nVG9Gcm9udChhKSl7aWYoIWIpe2EuZm9jdXMoZmFsc2UsdHJ1ZSl9fWRlbGV0ZSBhLnByZXZlbnRGb2N1c09uQWN0aXZhdGU7cmV0dXJuIGF9LHNldEFjdGl2ZTpmdW5jdGlvbihiLGMpe3ZhciBhPXRoaXM7aWYoYil7aWYoYS5lbC5zaGFkb3cmJiFhLm1heGltaXplZCl7YS5lbC5lbmFibGVTaGFkb3codHJ1ZSl9aWYoYS5tb2RhbCYmIWEucHJldmVudEZvY3VzT25BY3RpdmF0ZSl7YS5mb2N1cyhmYWxzZSx0cnVlKX1hLmZpcmVFdmVudCgiYWN0aXZhdGUiLGEpfWVsc2V7aWYoYS5pc1dpbmRvdyYmKGMmJmMuaXNXaW5kb3cpKXthLmVsLmRpc2FibGVTaGFkb3coKX1hLmZpcmVFdmVudCgiZGVhY3RpdmF0ZSIsYSl9fSx0b0JhY2s6ZnVuY3Rpb24oKXt0aGlzLnpJbmRleE1hbmFnZXIuc2VuZFRvQmFjayh0aGlzKTtyZXR1cm4gdGhpc30sY2VudGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiO2lmKGEuaXNWaXNpYmxlKCkpe2I9YS5lbC5nZXRBbGlnblRvWFkoYS5jb250YWluZXIsImMtYyIpO2Euc2V0UGFnZVBvc2l0aW9uKGIpfWVsc2V7YS5uZWVkc0NlbnRlcj10cnVlfXJldHVybiBhfSxvbkZsb2F0U2hvdzpmdW5jdGlvbigpe2lmKHRoaXMubmVlZHNDZW50ZXIpe3RoaXMuY2VudGVyKCl9ZGVsZXRlIHRoaXMubmVlZHNDZW50ZXJ9LHN5bmNTaGFkb3c6ZnVuY3Rpb24oKXtpZih0aGlzLmZsb2F0aW5nKXt0aGlzLmVsLnN5bmModHJ1ZSl9fSxmaXRDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9Yy5mbG9hdFBhcmVudCxhPWI/Yi5nZXRUYXJnZXRFbCgpOmMuY29udGFpbmVyO2Muc2V0U2l6ZShhLmdldFZpZXdTaXplKGZhbHNlKSk7Yy5zZXRQb3NpdGlvbi5hcHBseShjLGI/WzAsMF06YS5nZXRYWSgpKX19KTtFeHQuZGVmaW5lKCJFeHQuQ29tcG9uZW50Iix7YWxpYXM6WyJ3aWRnZXQuY29tcG9uZW50Iiwid2lkZ2V0LmJveCJdLGV4dGVuZDoiRXh0LkFic3RyYWN0Q29tcG9uZW50IixyZXF1aXJlczpbIkV4dC51dGlsLkRlbGF5ZWRUYXNrIl0sdXNlczpbIkV4dC5MYXllciIsIkV4dC5yZXNpemVyLlJlc2l6ZXIiLCJFeHQudXRpbC5Db21wb25lbnREcmFnZ2VyIl0sbWl4aW5zOntmbG9hdGluZzoiRXh0LnV0aWwuRmxvYXRpbmcifSxzdGF0aWNzOntESVJFQ1RJT05fVE9QOiJ0b3AiLERJUkVDVElPTl9SSUdIVDoicmlnaHQiLERJUkVDVElPTl9CT1RUT006ImJvdHRvbSIsRElSRUNUSU9OX0xFRlQ6ImxlZnQiLFZFUlRJQ0FMX0RJUkVDVElPTl9SZTovXig/OnRvcHxib3R0b20pJC8sSU5WQUxJRF9JRF9DSEFSU19SZTovW1wuLFxzXS9nfSxyZXNpemVIYW5kbGVzOiJhbGwiLGZsb2F0aW5nOmZhbHNlLHRvRnJvbnRPblNob3c6dHJ1ZSxoaWRlTW9kZToiZGlzcGxheSIsYnViYmxlRXZlbnRzOltdLG1vblByb3BSZTovXig/OnNjb3BlfGRlbGF5fGJ1ZmZlcnxzaW5nbGV8c3RvcEV2ZW50fHByZXZlbnREZWZhdWx0fHN0b3BQcm9wYWdhdGlvbnxub3JtYWxpemVkfGFyZ3N8ZGVsZWdhdGUpJC8sZGVmYXVsdENvbXBvbmVudExheW91dFR5cGU6ImF1dG9jb21wb25lbnQiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YT1hfHx7fTtpZihhLmluaXRpYWxDb25maWcpe2lmKGEuaXNBY3Rpb24pe2IuYmFzZUFjdGlvbj1hfWE9YS5pbml0aWFsQ29uZmlnfWVsc2V7aWYoYS50YWdOYW1lfHxhLmRvbXx8RXh0LmlzU3RyaW5nKGEpKXthPXthcHBseVRvOmEsaWQ6YS5pZHx8YX19fWIuY2FsbFBhcmVudChbYV0pO2lmKGIuYmFzZUFjdGlvbil7Yi5iYXNlQWN0aW9uLmFkZENvbXBvbmVudChiKX19LGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudCgpO2lmKGEubGlzdGVuZXJzKXthLm9uKGEubGlzdGVuZXJzKTthLmxpc3RlbmVycz1udWxsfWEuZW5hYmxlQnViYmxlKGEuYnViYmxlRXZlbnRzKTthLm1vbnM9W119LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoKTtpZighKGEueCYmYS55KSYmKGEucGFnZVh8fGEucGFnZVkpKXthLnNldFBhZ2VQb3NpdGlvbihhLnBhZ2VYLGEucGFnZVkpfX0sc2V0QXV0b1Njcm9sbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2IuYXV0b1Njcm9sbD0hIWE7aWYoYi5yZW5kZXJlZCl7Yi5nZXRUYXJnZXRFbCgpLnNldFN0eWxlKGIuZ2V0T3ZlcmZsb3dTdHlsZSgpKX1iLnVwZGF0ZUxheW91dCgpO3JldHVybiBifSxzZXRPdmVyZmxvd1hZOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcyxkPWFyZ3VtZW50cy5sZW5ndGg7aWYoZCl7Yy5vdmVyZmxvd1g9Ynx8IiI7aWYoZD4xKXtjLm92ZXJmbG93WT1hfHwiIn19aWYoYy5yZW5kZXJlZCl7Yy5nZXRUYXJnZXRFbCgpLnNldFN0eWxlKGMuZ2V0T3ZlcmZsb3dTdHlsZSgpKX1jLnVwZGF0ZUxheW91dCgpO3JldHVybiBjfSxiZWZvcmVSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9Yi5mbG9hdGluZyxhO2lmKGMpe2IuYWRkQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJsYXllciIpO2E9Yy5jbHM7aWYoYSl7Yi5hZGRDbHMoYSl9fXJldHVybiBiLmNhbGxQYXJlbnQoKX0sYWZ0ZXJDb21wb25lbnRMYXlvdXQ6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZih0aGlzLmZsb2F0aW5nKXt0aGlzLm9uQWZ0ZXJGbG9hdExheW91dCgpfX0sbWFrZUZsb2F0aW5nOmZ1bmN0aW9uKGEpe3RoaXMubWl4aW5zLmZsb2F0aW5nLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKX0sd3JhcFByaW1hcnlFbDpmdW5jdGlvbihhKXtpZih0aGlzLmZsb2F0aW5nKXt0aGlzLm1ha2VGbG9hdGluZyhhKX1lbHNle3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfX0saW5pdFJlc2l6YWJsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2E9RXh0LmFwcGx5KHt0YXJnZXQ6YixkeW5hbWljOmZhbHNlLGNvbnN0cmFpblRvOmIuY29uc3RyYWluVG98fChiLmZsb2F0UGFyZW50P2IuZmxvYXRQYXJlbnQuZ2V0VGFyZ2V0RWwoKTpudWxsKSxoYW5kbGVzOmIucmVzaXplSGFuZGxlc30sYSk7YS50YXJnZXQ9YjtiLnJlc2l6ZXI9bmV3IEV4dC5yZXNpemVyLlJlc2l6ZXIoYSl9LGdldERyYWdFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSxpbml0RHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxhPShjLnJlc2l6ZXImJmMucmVzaXplci5lbCE9PWMuZWwpP2MucmVzaXplckNvbXBvbmVudD1uZXcgRXh0LkNvbXBvbmVudCh7ZWw6Yy5yZXNpemVyLmVsLHJlbmRlcmVkOnRydWUsY29udGFpbmVyOmMuY29udGFpbmVyfSk6YyxiPUV4dC5hcHBseUlmKHtlbDphLmdldERyYWdFbCgpLGNvbnN0cmFpblRvOmMuY29uc3RyYWluPyhjLmNvbnN0cmFpblRvfHwoYy5mbG9hdFBhcmVudD9jLmZsb2F0UGFyZW50LmdldFRhcmdldEVsKCk6Yy5lbC5nZXRTY29wZVBhcmVudCgpKSk6dW5kZWZpbmVkfSxjLmRyYWdnYWJsZSk7aWYoYy5jb25zdHJhaW58fGMuY29uc3RyYWluRGVsZWdhdGUpe2IuY29uc3RyYWluPWMuY29uc3RyYWluO2IuY29uc3RyYWluRGVsZWdhdGU9Yy5jb25zdHJhaW5EZWxlZ2F0ZX1jLmRkPW5ldyBFeHQudXRpbC5Db21wb25lbnREcmFnZ2VyKGEsYil9LHNjcm9sbEJ5OmZ1bmN0aW9uKGIsYSxjKXt2YXIgZDtpZigoZD10aGlzLmdldFRhcmdldEVsKCkpJiZkLmRvbSl7ZC5zY3JvbGxCeS5hcHBseShkLGFyZ3VtZW50cyl9fSxzZXRMb2FkaW5nOmZ1bmN0aW9uKGMsZCl7dmFyIGI9dGhpcyxhO2lmKGIucmVuZGVyZWQpe0V4dC5kZXN0cm95KGIubG9hZE1hc2spO2IubG9hZE1hc2s9bnVsbDtpZihjIT09ZmFsc2UmJiFiLmNvbGxhcHNlZCl7aWYoRXh0LmlzT2JqZWN0KGMpKXthPUV4dC5hcHBseSh7fSxjKX1lbHNle2lmKEV4dC5pc1N0cmluZyhjKSl7YT17bXNnOmN9fWVsc2V7YT17fX19aWYoZCl7RXh0LmFwcGx5SWYoYSx7dXNlVGFyZ2V0RWw6dHJ1ZX0pfWIubG9hZE1hc2s9bmV3IEV4dC5Mb2FkTWFzayhiLGEpO2IubG9hZE1hc2suc2hvdygpfX1yZXR1cm4gYi5sb2FkTWFza30sYmVmb3JlU2V0UG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyksYTtpZihjKXthPWIuYWRqdXN0UG9zaXRpb24oYy54LGMueSk7Yy54PWEueDtjLnk9YS55fXJldHVybiBjfHxudWxsfSxhZnRlclNldFBvc2l0aW9uOmZ1bmN0aW9uKGIsYSl7dGhpcy5vblBvc2l0aW9uKGIsYSk7dGhpcy5maXJlRXZlbnQoIm1vdmUiLHRoaXMsYixhKX0sc2hvd0F0OmZ1bmN0aW9uKGEsZCxiKXt2YXIgYz10aGlzO2lmKCFjLnJlbmRlcmVkJiYoYy5hdXRvUmVuZGVyfHxjLmZsb2F0aW5nKSl7Yy5kb0F1dG9SZW5kZXIoKTtjLmhpZGRlbj10cnVlfWlmKGMuZmxvYXRpbmcpe2Muc2V0UG9zaXRpb24oYSxkLGIpfWVsc2V7Yy5zZXRQYWdlUG9zaXRpb24oYSxkLGIpfWMuc2hvdygpfSxzZXRQYWdlUG9zaXRpb246ZnVuY3Rpb24oYSxnLGIpe3ZhciBjPXRoaXMsZCxlO2lmKEV4dC5pc0FycmF5KGEpKXtnPWFbMV07YT1hWzBdfWMucGFnZVg9YTtjLnBhZ2VZPWc7aWYoYy5mbG9hdGluZyl7aWYoYy5pc0NvbnRhaW5lZEZsb2F0ZXIoKSl7ZT1jLmZsb2F0UGFyZW50LmdldFRhcmdldEVsKCkuZ2V0Vmlld1JlZ2lvbigpO2lmKEV4dC5pc051bWJlcihhKSYmRXh0LmlzTnVtYmVyKGUubGVmdCkpe2EtPWUubGVmdH1pZihFeHQuaXNOdW1iZXIoZykmJkV4dC5pc051bWJlcihlLnRvcCkpe2ctPWUudG9wfX1lbHNle2Q9Yy5lbC50cmFuc2xhdGVQb2ludHMoYSxnKTthPWQubGVmdDtnPWQudG9wfWMuc2V0UG9zaXRpb24oYSxnLGIpfWVsc2V7ZD1jLmVsLnRyYW5zbGF0ZVBvaW50cyhhLGcpO2Muc2V0UG9zaXRpb24oZC5sZWZ0LGQudG9wLGIpfXJldHVybiBjfSxpc0NvbnRhaW5lZEZsb2F0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5mbG9hdGluZyYmdGhpcy5mbG9hdFBhcmVudCl9LGdldEJveDpmdW5jdGlvbihiKXt2YXIgYz1iP3RoaXMuZ2V0UG9zaXRpb24oYik6dGhpcy5lbC5nZXRYWSgpLGE9dGhpcy5nZXRTaXplKCk7YS54PWNbMF07YS55PWNbMV07cmV0dXJuIGF9LHVwZGF0ZUJveDpmdW5jdGlvbihhKXt0aGlzLnNldFNpemUoYS53aWR0aCxhLmhlaWdodCk7dGhpcy5zZXRQYWdlUG9zaXRpb24oYS54LGEueSk7cmV0dXJuIHRoaXN9LGdldE91dGVyU2l6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWw7cmV0dXJue3dpZHRoOmEuZ2V0V2lkdGgoKSthLmdldE1hcmdpbigibHIiKSxoZWlnaHQ6YS5nZXRIZWlnaHQoKSthLmdldE1hcmdpbigidGIiKX19LGFkanVzdFBvc2l0aW9uOmZ1bmN0aW9uKGEsZCl7dmFyIGI9dGhpcyxjO2lmKGIuaXNDb250YWluZWRGbG9hdGVyKCkpe2M9Yi5mbG9hdFBhcmVudC5nZXRUYXJnZXRFbCgpLmdldFZpZXdSZWdpb24oKTthKz1jLmxlZnQ7ZCs9Yy50b3B9cmV0dXJue3g6YSx5OmR9fSxnZXRQb3NpdGlvbjpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGI9Yy5lbCxlLGQ9Yy5pc0NvbnRhaW5lZEZsb2F0ZXIoKSxnO2lmKChhPT09dHJ1ZSkmJiFkKXtyZXR1cm5bYi5nZXRMb2NhbFgoKSxiLmdldExvY2FsWSgpXX1lPWMuZWwuZ2V0WFkoKTtpZigoYT09PXRydWUpJiZkKXtnPWMuZmxvYXRQYXJlbnQuZ2V0VGFyZ2V0RWwoKS5nZXRWaWV3UmVnaW9uKCk7ZVswXS09Zy5sZWZ0O2VbMV0tPWcudG9wfXJldHVybiBlfSxnZXRJZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYjtpZighYS5pZCl7Yj1hLmdldFhUeXBlKCk7aWYoYil7Yj1iLnJlcGxhY2UoRXh0LkNvbXBvbmVudC5JTlZBTElEX0lEX0NIQVJTX1JlLCItIil9ZWxzZXtiPUV4dC5uYW1lLnRvTG93ZXJDYXNlKCkrIi1jb21wIn1hLmlkPWIrIi0iK2EuZ2V0QXV0b0lkKCl9cmV0dXJuIGEuaWR9LHNob3c6ZnVuY3Rpb24oZCxhLGIpe3ZhciBjPXRoaXMsZT1jLnJlbmRlcmVkO2lmKGUmJmMuaXNWaXNpYmxlKCkpe2lmKGMudG9Gcm9udE9uU2hvdyYmYy5mbG9hdGluZyl7Yy50b0Zyb250KCl9fWVsc2V7aWYoYy5maXJlRXZlbnQoImJlZm9yZXNob3ciLGMpIT09ZmFsc2Upe2MuaGlkZGVuPWZhbHNlO2lmKCFlJiYoYy5hdXRvUmVuZGVyfHxjLmZsb2F0aW5nKSl7Yy5kb0F1dG9SZW5kZXIoKTtlPWMucmVuZGVyZWR9aWYoZSl7Yy5iZWZvcmVTaG93KCk7Yy5vblNob3cuYXBwbHkoYyxhcmd1bWVudHMpO2MuYWZ0ZXJTaG93LmFwcGx5KGMsYXJndW1lbnRzKX19ZWxzZXtjLm9uU2hvd1ZldG8oKX19cmV0dXJuIGN9LG9uU2hvd1ZldG86RXh0LmVtcHR5Rm4sYmVmb3JlU2hvdzpFeHQuZW1wdHlGbixvblNob3c6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuZWwuc2hvdygpO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGEuZmxvYXRpbmcpe2lmKGEubWF4aW1pemVkKXthLmZpdENvbnRhaW5lcigpfWVsc2V7aWYoYS5jb25zdHJhaW4pe2EuZG9Db25zdHJhaW4oKX19fX0sYWZ0ZXJTaG93OmZ1bmN0aW9uKGgsYixlKXt2YXIgZz10aGlzLGEsYyxkO2g9aHx8Zy5hbmltYXRlVGFyZ2V0O2lmKCFnLmdob3N0KXtoPW51bGx9aWYoaCl7aD1oLmVsP2guZWw6RXh0LmdldChoKTtjPWcuZWwuZ2V0Qm94KCk7YT1oLmdldEJveCgpO2cuZWwuYWRkQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJoaWRlLW9mZnNldHMiKTtkPWcuZ2hvc3QoKTtkLmVsLnN0b3BBbmltYXRpb24oKTtkLmVsLnNldFgoLTEwMDAwKTtkLmVsLmFuaW1hdGUoe2Zyb206YSx0bzpjLGxpc3RlbmVyczp7YWZ0ZXJhbmltYXRlOmZ1bmN0aW9uKCl7ZGVsZXRlIGQuY29tcG9uZW50TGF5b3V0Lmxhc3RDb21wb25lbnRTaXplO2cudW5naG9zdCgpO2cuZWwucmVtb3ZlQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJoaWRlLW9mZnNldHMiKTtnLm9uU2hvd0NvbXBsZXRlKGIsZSl9fX0pfWVsc2V7Zy5vblNob3dDb21wbGV0ZShiLGUpfX0sb25TaG93Q29tcGxldGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO2lmKGMuZmxvYXRpbmcpe2MudG9Gcm9udCgpO2Mub25GbG9hdFNob3coKX1FeHQuY2FsbGJhY2soYSxifHxjKTtjLmZpcmVFdmVudCgic2hvdyIsYyk7ZGVsZXRlIGMuaGlkZGVuQnlMYXlvdXR9LGhpZGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2Euc2hvd09uUGFyZW50U2hvdz1mYWxzZTtpZighKGEucmVuZGVyZWQmJiFhLmlzVmlzaWJsZSgpKSYmYS5maXJlRXZlbnQoImJlZm9yZWhpZGUiLGEpIT09ZmFsc2Upe2EuaGlkZGVuPXRydWU7aWYoYS5yZW5kZXJlZCl7YS5vbkhpZGUuYXBwbHkoYSxhcmd1bWVudHMpfX1yZXR1cm4gYX0sb25IaWRlOmZ1bmN0aW9uKGcsYSxkKXt2YXIgZT10aGlzLGMsYjtnPWd8fGUuYW5pbWF0ZVRhcmdldDtpZighZS5naG9zdCl7Zz1udWxsfWlmKGcpe2c9Zy5lbD9nLmVsOkV4dC5nZXQoZyk7Yz1lLmdob3N0KCk7Yy5lbC5zdG9wQW5pbWF0aW9uKCk7Yj1nLmdldEJveCgpO2Iud2lkdGgrPSJweCI7Yi5oZWlnaHQrPSJweCI7Yy5lbC5hbmltYXRlKHt0bzpiLGxpc3RlbmVyczp7YWZ0ZXJhbmltYXRlOmZ1bmN0aW9uKCl7ZGVsZXRlIGMuY29tcG9uZW50TGF5b3V0Lmxhc3RDb21wb25lbnRTaXplO2MuZWwuaGlkZSgpO2UuYWZ0ZXJIaWRlKGEsZCl9fX0pfWUuZWwuaGlkZSgpO2lmKCFnKXtlLmFmdGVySGlkZShhLGQpfX0sYWZ0ZXJIaWRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztkZWxldGUgYy5oaWRkZW5CeUxheW91dDtFeHQuQWJzdHJhY3RDb21wb25lbnQucHJvdG90eXBlLm9uSGlkZS5jYWxsKHRoaXMpO0V4dC5jYWxsYmFjayhhLGJ8fGMpO2MuZmlyZUV2ZW50KCJoaWRlIixjKX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnJlbmRlcmVkKXtFeHQuZGVzdHJveShhLnByb3h5LGEucHJveHlXcmFwLGEucmVzaXplcixhLnJlc2l6ZXJDb21wb25lbnQpfWRlbGV0ZSBhLmZvY3VzVGFzazthLmNhbGxQYXJlbnQoKX0sZGVsZXRlTWVtYmVyczpmdW5jdGlvbigpe3ZhciBiPWFyZ3VtZW50cyxhPWIubGVuZ3RoLGM9MDtmb3IoO2M8YTsrK2Mpe2RlbGV0ZSB0aGlzW2JbY11dfX0sZm9jdXM6ZnVuY3Rpb24oZSxjKXt2YXIgZD10aGlzLGEsZyxiO2lmKGMpe2lmKCFkLmZvY3VzVGFzayl7ZC5mb2N1c1Rhc2s9bmV3IEV4dC51dGlsLkRlbGF5ZWRUYXNrKGQuZm9jdXMpfWQuZm9jdXNUYXNrLmRlbGF5KEV4dC5pc051bWJlcihjKT9jOjEwLG51bGwsZCxbZSxmYWxzZV0pO3JldHVybiBkfWlmKGQucmVuZGVyZWQmJiFkLmlzRGVzdHJveWVkJiZkLmlzVmlzaWJsZSh0cnVlKSYmKGE9ZC5nZXRGb2N1c0VsKCkpKXtpZihhLmlzQ29tcG9uZW50KXtyZXR1cm4gYS5mb2N1cyhlLGMpfWlmKChnPWEuZG9tKSl7aWYoYS5uZWVkc1RhYkluZGV4KCkpe2cudGFiSW5kZXg9LTF9aWYoZC5mbG9hdGluZyl7Yj1kLmNvbnRhaW5lci5kb20uc2Nyb2xsVG9wfWEuZm9jdXMoKTtpZihlPT09dHJ1ZSl7Zy5zZWxlY3QoKX19aWYoZC5mbG9hdGluZyl7ZC50b0Zyb250KHRydWUpO2lmKGIhPT11bmRlZmluZWQpe2QuY29udGFpbmVyLmRvbS5zY3JvbGxUb3A9Yn19fXJldHVybiBkfSxjYW5jZWxGb2N1czpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZm9jdXNUYXNrO2lmKGEpe2EuY2FuY2VsKCl9fSxibHVyOmZ1bmN0aW9uKCl7dmFyIGE7aWYodGhpcy5yZW5kZXJlZCYmKGE9dGhpcy5nZXRGb2N1c0VsKCkpKXthLmJsdXIoKX1yZXR1cm4gdGhpc30sZ2V0RWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbH0sZ2V0UmVzaXplRWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbH0sZ2V0UG9zaXRpb25FbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSxnZXRBY3Rpb25FbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSxnZXRWaXNpYmlsaXR5RWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbH0sb25SZXNpemU6RXh0LmVtcHR5Rm4sZ2V0QnViYmxlVGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duZXJDdHx8dGhpcy5mbG9hdFBhcmVudH0sZ2V0Q29udGVudFRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSxjbG9uZUNvbmZpZzpmdW5jdGlvbihjKXtjPWN8fHt9O3ZhciBkPWMuaWR8fEV4dC5pZCgpLGE9RXh0LmFwcGx5SWYoYyx0aGlzLmluaXRpYWxDb25maWcpLGI7YS5pZD1kO2I9RXh0LmdldENsYXNzKHRoaXMpO3JldHVybiBuZXcgYihhKX0sZ2V0WFR5cGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxmLnh0eXBlfSxmaW5kUGFyZW50Qnk6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGI9dGhpcy5nZXRCdWJibGVUYXJnZXQoKTtiJiYhYShiLHRoaXMpO2I9Yi5nZXRCdWJibGVUYXJnZXQoKSl7fXJldHVybiBifHxudWxsfSxmaW5kUGFyZW50QnlUeXBlOmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuaXNGdW5jdGlvbihhKT90aGlzLmZpbmRQYXJlbnRCeShmdW5jdGlvbihiKXtyZXR1cm4gYi5jb25zdHJ1Y3Rvcj09PWF9KTp0aGlzLnVwKGEpfSxidWJibGU6ZnVuY3Rpb24oYyxiLGEpe3ZhciBkPXRoaXM7d2hpbGUoZCl7aWYoYy5hcHBseShifHxkLGF8fFtkXSk9PT1mYWxzZSl7YnJlYWt9ZD1kLmdldEJ1YmJsZVRhcmdldCgpfXJldHVybiB0aGlzfSxnZXRQcm94eTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYjtpZighYS5wcm94eSl7Yj1FeHQuZ2V0Qm9keSgpO2lmKEV4dC5zY29wZVJlc2V0Q1NTKXthLnByb3h5V3JhcD1iPUV4dC5nZXRCb2R5KCkuY3JlYXRlQ2hpbGQoe2NsczpFeHQucmVzZXRDbHN9KX1hLnByb3h5PWEuZWwuY3JlYXRlUHJveHkoRXh0LmJhc2VDU1NQcmVmaXgrInByb3h5LWVsIixiLHRydWUpfXJldHVybiBhLnByb3h5fX0pO0V4dC5kZWZpbmUoIkV4dC5FbGVtZW50TG9hZGVyIix7bWl4aW5zOntvYnNlcnZhYmxlOiJFeHQudXRpbC5PYnNlcnZhYmxlIn0sdXNlczpbIkV4dC5kYXRhLkNvbm5lY3Rpb24iLCJFeHQuQWpheCJdLHN0YXRpY3M6e1JlbmRlcmVyOntIdG1sOmZ1bmN0aW9uKGEsYixjKXthLmdldFRhcmdldCgpLnVwZGF0ZShiLnJlc3BvbnNlVGV4dCxjLnNjcmlwdHM9PT10cnVlKTtyZXR1cm4gdHJ1ZX19fSx1cmw6bnVsbCxwYXJhbXM6bnVsbCxiYXNlUGFyYW1zOm51bGwsYXV0b0xvYWQ6ZmFsc2UsdGFyZ2V0Om51bGwsbG9hZE1hc2s6ZmFsc2UsYWpheE9wdGlvbnM6bnVsbCxzY3JpcHRzOmZhbHNlLGlzTG9hZGVyOnRydWUsY29uc3RydWN0b3I6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxhO2I9Ynx8e307RXh0LmFwcGx5KGMsYik7Yy5zZXRUYXJnZXQoYy50YXJnZXQpO2MuYWRkRXZlbnRzKCJiZWZvcmVsb2FkIiwiZXhjZXB0aW9uIiwibG9hZCIpO2MubWl4aW5zLm9ic2VydmFibGUuY29uc3RydWN0b3IuY2FsbChjKTtpZihjLmF1dG9Mb2FkKXthPWMuYXV0b0xvYWQ7aWYoYT09PXRydWUpe2E9e319Yy5sb2FkKGEpfX0sc2V0VGFyZ2V0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7Yj1FeHQuZ2V0KGIpO2lmKGEudGFyZ2V0JiZhLnRhcmdldCE9Yil7YS5hYm9ydCgpfWEudGFyZ2V0PWJ9LGdldFRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRhcmdldHx8bnVsbH0sYWJvcnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmFjdGl2ZTtpZihhIT09dW5kZWZpbmVkKXtFeHQuQWpheC5hYm9ydChhLnJlcXVlc3QpO2lmKGEubWFzayl7dGhpcy5yZW1vdmVNYXNrKCl9ZGVsZXRlIHRoaXMuYWN0aXZlfX0scmVtb3ZlTWFzazpmdW5jdGlvbigpe3RoaXMudGFyZ2V0LnVubWFzaygpfSxhZGRNYXNrOmZ1bmN0aW9uKGEpe3RoaXMudGFyZ2V0Lm1hc2soYT09PXRydWU/bnVsbDphKX0sbG9hZDpmdW5jdGlvbihpKXtpPUV4dC5hcHBseSh7fSxpKTt2YXIgZT10aGlzLGQ9ZS50YXJnZXQsaj1FeHQuaXNEZWZpbmVkKGkubG9hZE1hc2spP2kubG9hZE1hc2s6ZS5sb2FkTWFzayxiPUV4dC5hcHBseSh7fSxpLnBhcmFtcyksYT1FeHQuYXBwbHkoe30saS5hamF4T3B0aW9ucyksZz1pLmNhbGxiYWNrfHxlLmNhbGxiYWNrLGg9aS5zY29wZXx8ZS5zY29wZXx8ZSxjO0V4dC5hcHBseUlmKGEsZS5hamF4T3B0aW9ucyk7RXh0LmFwcGx5SWYoaSxhKTtFeHQuYXBwbHlJZihiLGUucGFyYW1zKTtFeHQuYXBwbHkoYixlLmJhc2VQYXJhbXMpO0V4dC5hcHBseUlmKGkse3VybDplLnVybH0pO0V4dC5hcHBseShpLHtzY29wZTplLHBhcmFtczpiLGNhbGxiYWNrOmUub25Db21wbGV0ZX0pO2lmKGUuZmlyZUV2ZW50KCJiZWZvcmVsb2FkIixlLGkpPT09ZmFsc2Upe3JldHVybn1pZihqKXtlLmFkZE1hc2soail9Yz1FeHQuQWpheC5yZXF1ZXN0KGkpO2UuYWN0aXZlPXtyZXF1ZXN0OmMsb3B0aW9uczppLG1hc2s6aixzY29wZTpoLGNhbGxiYWNrOmcsc3VjY2VzczppLnN1Y2Nlc3N8fGUuc3VjY2VzcyxmYWlsdXJlOmkuZmFpbHVyZXx8ZS5mYWlsdXJlLHJlbmRlcmVyOmkucmVuZGVyZXJ8fGUucmVuZGVyZXIsc2NyaXB0czpFeHQuaXNEZWZpbmVkKGkuc2NyaXB0cyk/aS5zY3JpcHRzOmUuc2NyaXB0c307ZS5zZXRPcHRpb25zKGUuYWN0aXZlLGkpfSxzZXRPcHRpb25zOkV4dC5lbXB0eUZuLG9uQ29tcGxldGU6ZnVuY3Rpb24oYixoLGEpe3ZhciBkPXRoaXMsZz1kLmFjdGl2ZSxjPWcuc2NvcGUsZT1kLmdldFJlbmRlcmVyKGcucmVuZGVyZXIpO2lmKGgpe2g9ZS5jYWxsKGQsZCxhLGcpIT09ZmFsc2V9aWYoaCl7RXh0LmNhbGxiYWNrKGcuc3VjY2VzcyxjLFtkLGEsYl0pO2QuZmlyZUV2ZW50KCJsb2FkIixkLGEsYil9ZWxzZXtFeHQuY2FsbGJhY2soZy5mYWlsdXJlLGMsW2QsYSxiXSk7ZC5maXJlRXZlbnQoImV4Y2VwdGlvbiIsZCxhLGIpfUV4dC5jYWxsYmFjayhnLmNhbGxiYWNrLGMsW2QsaCxhLGJdKTtpZihnLm1hc2spe2QucmVtb3ZlTWFzaygpfWRlbGV0ZSBkLmFjdGl2ZX0sZ2V0UmVuZGVyZXI6ZnVuY3Rpb24oYSl7aWYoRXh0LmlzRnVuY3Rpb24oYSkpe3JldHVybiBhfXJldHVybiB0aGlzLnN0YXRpY3MoKS5SZW5kZXJlci5IdG1sfSxzdGFydEF1dG9SZWZyZXNoOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztjLnN0b3BBdXRvUmVmcmVzaCgpO2MuYXV0b1JlZnJlc2g9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtjLmxvYWQoYil9LGEpfSxzdG9wQXV0b1JlZnJlc2g6ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKHRoaXMuYXV0b1JlZnJlc2gpO2RlbGV0ZSB0aGlzLmF1dG9SZWZyZXNofSxpc0F1dG9SZWZyZXNoaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5pc0RlZmluZWQodGhpcy5hdXRvUmVmcmVzaCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2Euc3RvcEF1dG9SZWZyZXNoKCk7ZGVsZXRlIGEudGFyZ2V0O2EuYWJvcnQoKTthLmNsZWFyTGlzdGVuZXJzKCl9fSk7RXh0LmRlZmluZSgiRXh0LkNvbXBvbmVudExvYWRlciIse2V4dGVuZDoiRXh0LkVsZW1lbnRMb2FkZXIiLHN0YXRpY3M6e1JlbmRlcmVyOntEYXRhOmZ1bmN0aW9uKGEsYixkKXt2YXIgZz10cnVlO3RyeXthLmdldFRhcmdldCgpLnVwZGF0ZShFeHQuZGVjb2RlKGIucmVzcG9uc2VUZXh0KSl9Y2F0Y2goYyl7Zz1mYWxzZX1yZXR1cm4gZ30sQ29tcG9uZW50OmZ1bmN0aW9uKGEsYyxoKXt2YXIgaT10cnVlLGc9YS5nZXRUYXJnZXQoKSxiPVtdO3RyeXtiPUV4dC5kZWNvZGUoYy5yZXNwb25zZVRleHQpfWNhdGNoKGQpe2k9ZmFsc2V9aWYoaSl7Zy5zdXNwZW5kTGF5b3V0cygpO2lmKGgucmVtb3ZlQWxsKXtnLnJlbW92ZUFsbCgpfWcuYWRkKGIpO2cucmVzdW1lTGF5b3V0cyh0cnVlKX1yZXR1cm4gaX19fSx0YXJnZXQ6bnVsbCxsb2FkTWFzazpmYWxzZSxyZW5kZXJlcjoiaHRtbCIsc2V0VGFyZ2V0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoRXh0LmlzU3RyaW5nKGIpKXtiPUV4dC5nZXRDbXAoYil9aWYoYS50YXJnZXQmJmEudGFyZ2V0IT1iKXthLmFib3J0KCl9YS50YXJnZXQ9Yn0scmVtb3ZlTWFzazpmdW5jdGlvbigpe3RoaXMudGFyZ2V0LnNldExvYWRpbmcoZmFsc2UpfSxhZGRNYXNrOmZ1bmN0aW9uKGEpe3RoaXMudGFyZ2V0LnNldExvYWRpbmcoYSl9LHNldE9wdGlvbnM6ZnVuY3Rpb24oYixhKXtiLnJlbW92ZUFsbD1FeHQuaXNEZWZpbmVkKGEucmVtb3ZlQWxsKT9hLnJlbW92ZUFsbDp0aGlzLnJlbW92ZUFsbH0sZ2V0UmVuZGVyZXI6ZnVuY3Rpb24oYil7aWYoRXh0LmlzRnVuY3Rpb24oYikpe3JldHVybiBifXZhciBhPXRoaXMuc3RhdGljcygpLlJlbmRlcmVyO3N3aXRjaChiKXtjYXNlImNvbXBvbmVudCI6cmV0dXJuIGEuQ29tcG9uZW50O2Nhc2UiZGF0YSI6cmV0dXJuIGEuRGF0YTtkZWZhdWx0OnJldHVybiBFeHQuRWxlbWVudExvYWRlci5SZW5kZXJlci5IdG1sfX19KTtFeHQuZGVmaW5lKCJFeHQuVGVtcGxhdGUiLHtyZXF1aXJlczpbIkV4dC5kb20uSGVscGVyIiwiRXh0LnV0aWwuRm9ybWF0Il0saW5oZXJpdGFibGVTdGF0aWNzOntmcm9tOmZ1bmN0aW9uKGIsYSl7Yj1FeHQuZ2V0RG9tKGIpO3JldHVybiBuZXcgdGhpcyhiLnZhbHVlfHxiLmlubmVySFRNTCxhfHwiIil9fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihkKXt2YXIgZz10aGlzLGI9YXJndW1lbnRzLGE9W10sYz0wLGU9Yi5sZW5ndGgsaDtnLmluaXRpYWxDb25maWc9e307aWYoZT09PTEmJkV4dC5pc0FycmF5KGQpKXtiPWQ7ZT1iLmxlbmd0aH1pZihlPjEpe2Zvcig7YzxlO2MrKyl7aD1iW2NdO2lmKHR5cGVvZiBoPT0ib2JqZWN0Iil7RXh0LmFwcGx5KGcuaW5pdGlhbENvbmZpZyxoKTtFeHQuYXBwbHkoZyxoKX1lbHNle2EucHVzaChoKX19fWVsc2V7YS5wdXNoKGQpfWcuaHRtbD1hLmpvaW4oIiIpO2lmKGcuY29tcGlsZWQpe2cuY29tcGlsZSgpfX0saXNUZW1wbGF0ZTp0cnVlLGRpc2FibGVGb3JtYXRzOmZhbHNlLHJlOi9ceyhbXHdcLV0rKSg/Olw6KFtcd1wuXSopKD86XCgoLio/KT9cKSk/KT9cfS9nLGFwcGx5OmZ1bmN0aW9uKGEpe3ZhciBoPXRoaXMsZD1oLmRpc2FibGVGb3JtYXRzIT09dHJ1ZSxnPUV4dC51dGlsLkZvcm1hdCxjPWgsYjtpZihoLmNvbXBpbGVkKXtyZXR1cm4gaC5jb21waWxlZChhKS5qb2luKCIiKX1mdW5jdGlvbiBlKGksayxsLGope2lmKGwmJmQpe2lmKGope2o9W2Fba11dLmNvbmNhdChFeHQuZnVuY3Rpb25GYWN0b3J5KCJyZXR1cm4gWyIraisiXTsiKSgpKX1lbHNle2o9W2Fba11dfWlmKGwuc3Vic3RyKDAsNSk9PSJ0aGlzLiIpe3JldHVybiBjW2wuc3Vic3RyKDUpXS5hcHBseShjLGopfWVsc2V7cmV0dXJuIGdbbF0uYXBwbHkoZyxqKX19ZWxzZXtyZXR1cm4gYVtrXSE9PXVuZGVmaW5lZD9hW2tdOiIifX1iPWguaHRtbC5yZXBsYWNlKGgucmUsZSk7cmV0dXJuIGJ9LGFwcGx5T3V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztpZihjLmNvbXBpbGVkKXtiLnB1c2guYXBwbHkoYixjLmNvbXBpbGVkKGEpKX1lbHNle2IucHVzaChjLmFwcGx5KGEpKX1yZXR1cm4gYn0sYXBwbHlUZW1wbGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFwcGx5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sc2V0OmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcztiLmh0bWw9YTtiLmNvbXBpbGVkPW51bGw7cmV0dXJuIGM/Yi5jb21waWxlKCk6Yn0sY29tcGlsZUFSZTovXFwvZyxjb21waWxlQlJlOi8oXHJcbnxcbikvZyxjb21waWxlQ1JlOi8nL2csY29tcGlsZTpmdW5jdGlvbigpe3ZhciBtZT10aGlzLGZtPUV4dC51dGlsLkZvcm1hdCx1c2VGb3JtYXQ9bWUuZGlzYWJsZUZvcm1hdHMhPT10cnVlLGJvZHksYm9keVJldHVybjtmdW5jdGlvbiBmbihtLG5hbWUsZm9ybWF0LGFyZ3Mpe2lmKGZvcm1hdCYmdXNlRm9ybWF0KXthcmdzPWFyZ3M/IiwiK2FyZ3M6IiI7aWYoZm9ybWF0LnN1YnN0cigwLDUpIT0idGhpcy4iKXtmb3JtYXQ9ImZtLiIrZm9ybWF0KyIoIn1lbHNle2Zvcm1hdD0idGhpcy4iK2Zvcm1hdC5zdWJzdHIoNSkrIigifX1lbHNle2FyZ3M9IiI7Zm9ybWF0PSIodmFsdWVzWyciK25hbWUrIiddID09IHVuZGVmaW5lZCA/ICcnIDogIn1yZXR1cm4iJywiK2Zvcm1hdCsidmFsdWVzWyciK25hbWUrIiddIithcmdzKyIpICwnIn1ib2R5UmV0dXJuPW1lLmh0bWwucmVwbGFjZShtZS5jb21waWxlQVJlLCJcXFxcIikucmVwbGFjZShtZS5jb21waWxlQlJlLCJcXG4iKS5yZXBsYWNlKG1lLmNvbXBpbGVDUmUsIlxcJyIpLnJlcGxhY2UobWUucmUsZm4pO2JvZHk9InRoaXMuY29tcGlsZWQgPSBmdW5jdGlvbih2YWx1ZXMpeyByZXR1cm4gWyciK2JvZHlSZXR1cm4rIiddO307IjtldmFsKGJvZHkpO3JldHVybiBtZX0saW5zZXJ0Rmlyc3Q6ZnVuY3Rpb24oYixhLGMpe3JldHVybiB0aGlzLmRvSW5zZXJ0KCJhZnRlckJlZ2luIixiLGEsYyl9LGluc2VydEJlZm9yZTpmdW5jdGlvbihiLGEsYyl7cmV0dXJuIHRoaXMuZG9JbnNlcnQoImJlZm9yZUJlZ2luIixiLGEsYyl9LGluc2VydEFmdGVyOmZ1bmN0aW9uKGIsYSxjKXtyZXR1cm4gdGhpcy5kb0luc2VydCgiYWZ0ZXJFbmQiLGIsYSxjKX0sYXBwZW5kOmZ1bmN0aW9uKGIsYSxjKXtyZXR1cm4gdGhpcy5kb0luc2VydCgiYmVmb3JlRW5kIixiLGEsYyl9LGRvSW5zZXJ0OmZ1bmN0aW9uKGIsZCxhLGUpe3ZhciBjPUV4dC5Eb21IZWxwZXIuaW5zZXJ0SHRtbChiLEV4dC5nZXREb20oZCksdGhpcy5hcHBseShhKSk7cmV0dXJuIGU/RXh0LmdldChjKTpjfSxvdmVyd3JpdGU6ZnVuY3Rpb24oYyxhLGQpe3ZhciBiPUV4dC5Eb21IZWxwZXIub3ZlcndyaXRlKEV4dC5nZXREb20oYyksdGhpcy5hcHBseShhKSk7cmV0dXJuIGQ/RXh0LmdldChiKTpifX0pO0V4dC5kZWZpbmUoIkV4dC5YVGVtcGxhdGVQYXJzZXIiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyxhKX0sZG9UcGw6RXh0LmVtcHR5Rm4scGFyc2U6ZnVuY3Rpb24obCl7dmFyIHY9dGhpcyxwPWwubGVuZ3RoLG89e2Vsc2VpZjoiZWxpZiJ9LHE9di50b3BSZSxjPXYuYWN0aW9uc1JlLGUsZCxqLG4saCxrLGksdSxyLGIsZyxhO3YubGV2ZWw9MDt2LnN0YWNrPWQ9W107Zm9yKGU9MDtlPHA7ZT1iKXtxLmxhc3RJbmRleD1lO249cS5leGVjKGwpO2lmKCFuKXt2LmRvVGV4dChsLnN1YnN0cmluZyhlLHApKTticmVha31yPW4uaW5kZXg7Yj1xLmxhc3RJbmRleDtpZihlPHIpe3YuZG9UZXh0KGwuc3Vic3RyaW5nKGUscikpfWlmKG5bMV0pe2I9bC5pbmRleE9mKCIlfSIscisyKTt2LmRvRXZhbChsLnN1YnN0cmluZyhyKzIsYikpO2IrPTJ9ZWxzZXtpZihuWzJdKXtiPWwuaW5kZXhPZigiXX0iLHIrMik7di5kb0V4cHIobC5zdWJzdHJpbmcocisyLGIpKTtiKz0yfWVsc2V7aWYoblszXSl7di5kb1RhZyhuWzNdKX1lbHNle2lmKG5bNF0pe2c9bnVsbDt3aGlsZSgodT1jLmV4ZWMobls0XSkpIT09bnVsbCl7aj11WzJdfHx1WzNdO2lmKGope2o9RXh0LlN0cmluZy5odG1sRGVjb2RlKGopO2g9dVsxXTtoPW9baF18fGg7Zz1nfHx7fTtrPWdbaF07aWYodHlwZW9mIGs9PSJzdHJpbmciKXtnW2hdPVtrLGpdfWVsc2V7aWYoayl7Z1toXS5wdXNoKGopfWVsc2V7Z1toXT1qfX19fWlmKCFnKXtpZih2LmVsc2VSZS50ZXN0KG5bNF0pKXt2LmRvRWxzZSgpfWVsc2V7aWYodi5kZWZhdWx0UmUudGVzdChuWzRdKSl7di5kb0RlZmF1bHQoKX1lbHNle3YuZG9UcGwoKTtkLnB1c2goe3R5cGU6InRwbCJ9KX19fWVsc2V7aWYoZ1siaWYiXSl7di5kb0lmKGdbImlmIl0sZyk7ZC5wdXNoKHt0eXBlOiJpZiJ9KX1lbHNle2lmKGdbInN3aXRjaCJdKXt2LmRvU3dpdGNoKGdbInN3aXRjaCJdLGcpO2QucHVzaCh7dHlwZToic3dpdGNoIn0pfWVsc2V7aWYoZ1siY2FzZSJdKXt2LmRvQ2FzZShnWyJjYXNlIl0sZyl9ZWxzZXtpZihnLmVsaWYpe3YuZG9FbHNlSWYoZy5lbGlmLGcpfWVsc2V7aWYoZ1siZm9yIl0peysrdi5sZXZlbDtpZihhPXYucHJvcFJlLmV4ZWMobls0XSkpe2cucHJvcE5hbWU9YVsxXXx8YVsyXX12LmRvRm9yKGdbImZvciJdLGcpO2QucHVzaCh7dHlwZToiZm9yIixhY3Rpb25zOmd9KX1lbHNle2lmKGcuZXhlYyl7di5kb0V4ZWMoZy5leGVjLGcpO2QucHVzaCh7dHlwZToiZXhlYyIsYWN0aW9uczpnfSl9fX19fX19fWVsc2V7aWYoblswXS5sZW5ndGg9PT01KXtkLnB1c2goe3R5cGU6InRwbCJ9KX1lbHNle2k9ZC5wb3AoKTt2LmRvRW5kKGkudHlwZSxpLmFjdGlvbnMpO2lmKGkudHlwZT09ImZvciIpey0tdi5sZXZlbH19fX19fX19LHRvcFJlOi8oPzooXHtcJSl8KFx7XFspfFx7KFtee31dKilcfSl8KD86PHRwbChbXj5dKilcPil8KD86PFwvdHBsPikvZyxhY3Rpb25zUmU6L1xzKihlbGlmfGVsc2VpZnxpZnxmb3J8ZXhlY3xzd2l0Y2h8Y2FzZXxldmFsKVxzKlw9XHMqKD86KD86IihbXiJdKikiKXwoPzonKFteJ10qKScpKVxzKi9nLHByb3BSZTovcHJvcD0oPzooPzoiKFteIl0qKSIpfCg/OicoW14nXSopJykpLyxkZWZhdWx0UmU6L15ccypkZWZhdWx0XHMqJC8sZWxzZVJlOi9eXHMqZWxzZVxzKiQvfSk7RXh0LmRlZmluZSgiRXh0LlhUZW1wbGF0ZUNvbXBpbGVyIix7ZXh0ZW5kOiJFeHQuWFRlbXBsYXRlUGFyc2VyIix1c2VFdmFsOkV4dC5pc0dlY2tvLHVzZUluZGV4OkV4dC5pc0lFNnx8RXh0LmlzSUU3LHVzZUZvcm1hdDp0cnVlLHByb3BOYW1lUmU6L15bXHdcZFwkXSokLyxjb21waWxlOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsYj1jLmdlbmVyYXRlKGEpO3JldHVybiBjLnVzZUV2YWw/Yy5ldmFsVHBsKGIpOihuZXcgRnVuY3Rpb24oIkV4dCIsYikpKEV4dCl9LGdlbmVyYXRlOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMsYj0idmFyIGZtPUV4dC51dGlsLkZvcm1hdCx0cz1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOyIsYztkLm1heExldmVsPTA7ZC5ib2R5PVsidmFyIGMwPXZhbHVlcywgYTA9IitkLmNyZWF0ZUFycmF5VGVzdCgwKSsiLCBwMD1wYXJlbnQsIG4wPXhjb3VudCwgaTA9eGluZGV4LCB2O1xuIl07aWYoZC5kZWZpbml0aW9ucyl7aWYodHlwZW9mIGQuZGVmaW5pdGlvbnM9PT0ic3RyaW5nIil7ZC5kZWZpbml0aW9ucz1bZC5kZWZpbml0aW9ucyxiXX1lbHNle2QuZGVmaW5pdGlvbnMucHVzaChiKX19ZWxzZXtkLmRlZmluaXRpb25zPVtiXX1kLnN3aXRjaGVzPVtdO2QucGFyc2UoYSk7ZC5kZWZpbml0aW9ucy5wdXNoKChkLnVzZUV2YWw/IiQ9IjoicmV0dXJuIikrIiBmdW5jdGlvbiAoIitkLmZuQXJncysiKSB7IixkLmJvZHkuam9pbigiIiksIn0iKTtjPWQuZGVmaW5pdGlvbnMuam9pbigiXG4iKTtkLmRlZmluaXRpb25zLmxlbmd0aD1kLmJvZHkubGVuZ3RoPWQuc3dpdGNoZXMubGVuZ3RoPTA7ZGVsZXRlIGQuZGVmaW5pdGlvbnM7ZGVsZXRlIGQuYm9keTtkZWxldGUgZC5zd2l0Y2hlcztyZXR1cm4gY30sZG9UZXh0OmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLmJvZHk7Yz1jLnJlcGxhY2UoYi5hcG9zUmUsIlxcJyIpLnJlcGxhY2UoYi5uZXdMaW5lUmUsIlxcbiIpO2lmKGIudXNlSW5kZXgpe2EucHVzaCgib3V0W291dC5sZW5ndGhdPSciLGMsIidcbiIpfWVsc2V7YS5wdXNoKCJvdXQucHVzaCgnIixjLCInKVxuIil9fSxkb0V4cHI6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5ib2R5O2EucHVzaCgiaWYgKCh2PSIrYisiKSE9PXVuZGVmaW5lZCkgb3V0Iik7aWYodGhpcy51c2VJbmRleCl7YS5wdXNoKCJbb3V0Lmxlbmd0aF09disnJ1xuIil9ZWxzZXthLnB1c2goIi5wdXNoKHYrJycpXG4iKX19LGRvVGFnOmZ1bmN0aW9uKGEpe3RoaXMuZG9FeHByKHRoaXMucGFyc2VUYWcoYSkpfSxkb0Vsc2U6ZnVuY3Rpb24oKXt0aGlzLmJvZHkucHVzaCgifSBlbHNlIHtcbiIpfSxkb0V2YWw6ZnVuY3Rpb24oYSl7dGhpcy5ib2R5LnB1c2goYSwiXG4iKX0sZG9JZjpmdW5jdGlvbihiLGMpe3ZhciBhPXRoaXM7aWYoYj09PSIuIil7YS5ib2R5LnB1c2goImlmICh2YWx1ZXMpIHtcbiIpfWVsc2V7aWYoYS5wcm9wTmFtZVJlLnRlc3QoYikpe2EuYm9keS5wdXNoKCJpZiAoIixhLnBhcnNlVGFnKGIpLCIpIHtcbiIpfWVsc2V7YS5ib2R5LnB1c2goImlmICgiLGEuYWRkRm4oYiksYS5jYWxsRm4sIikge1xuIil9fWlmKGMuZXhlYyl7YS5kb0V4ZWMoYy5leGVjKX19LGRvRWxzZUlmOmZ1bmN0aW9uKGIsYyl7dmFyIGE9dGhpcztpZihiPT09Ii4iKXthLmJvZHkucHVzaCgiZWxzZSBpZiAodmFsdWVzKSB7XG4iKX1lbHNle2lmKGEucHJvcE5hbWVSZS50ZXN0KGIpKXthLmJvZHkucHVzaCgifSBlbHNlIGlmICgiLGEucGFyc2VUYWcoYiksIikge1xuIil9ZWxzZXthLmJvZHkucHVzaCgifSBlbHNlIGlmICgiLGEuYWRkRm4oYiksYS5jYWxsRm4sIikge1xuIil9fWlmKGMuZXhlYyl7YS5kb0V4ZWMoYy5leGVjKX19LGRvU3dpdGNoOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoYj09PSIuIil7YS5ib2R5LnB1c2goInN3aXRjaCAodmFsdWVzKSB7XG4iKX1lbHNle2lmKGEucHJvcE5hbWVSZS50ZXN0KGIpKXthLmJvZHkucHVzaCgic3dpdGNoICgiLGEucGFyc2VUYWcoYiksIikge1xuIil9ZWxzZXthLmJvZHkucHVzaCgic3dpdGNoICgiLGEuYWRkRm4oYiksYS5jYWxsRm4sIikge1xuIil9fWEuc3dpdGNoZXMucHVzaCgwKX0sZG9DYXNlOmZ1bmN0aW9uKGUpe3ZhciBkPXRoaXMsYz1FeHQuaXNBcnJheShlKT9lOltlXSxnPWQuc3dpdGNoZXMubGVuZ3RoLTEsYSxiO2lmKGQuc3dpdGNoZXNbZ10pe2QuYm9keS5wdXNoKCJicmVhaztcbiIpfWVsc2V7ZC5zd2l0Y2hlc1tnXSsrfWZvcihiPTAsZz1jLmxlbmd0aDtiPGc7KytiKXthPWQuaW50UmUuZXhlYyhjW2JdKTtjW2JdPWE/YVsxXTooIiciK2NbYl0ucmVwbGFjZShkLmFwb3NSZSwiXFwnIikrIiciKX1kLmJvZHkucHVzaCgiY2FzZSAiLGMuam9pbigiOiBjYXNlICIpLCI6XG4iKX0sZG9EZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuc3dpdGNoZXMubGVuZ3RoLTE7aWYoYS5zd2l0Y2hlc1tiXSl7YS5ib2R5LnB1c2goImJyZWFrO1xuIil9ZWxzZXthLnN3aXRjaGVzW2JdKyt9YS5ib2R5LnB1c2goImRlZmF1bHQ6XG4iKX0sZG9FbmQ6ZnVuY3Rpb24oYixkKXt2YXIgYz10aGlzLGE9Yy5sZXZlbC0xO2lmKGI9PSJmb3IiKXtpZihkLmV4ZWMpe2MuZG9FeGVjKGQuZXhlYyl9Yy5ib2R5LnB1c2goIn1cbiIpO2MuYm9keS5wdXNoKCJwYXJlbnQ9cCIsYSwiO3ZhbHVlcz1yIixhKzEsIjt4Y291bnQ9biIsYSwiO3hpbmRleD1pIixhLCJcbiIpfWVsc2V7aWYoYj09ImlmInx8Yj09InN3aXRjaCIpe2MuYm9keS5wdXNoKCJ9XG4iKX19fSxkb0ZvcjpmdW5jdGlvbihnLGkpe3ZhciBlPXRoaXMsZCxiPWUubGV2ZWwsYT1iLTEsYz0icCIrYixoO2lmKGc9PT0iLiIpe2Q9InZhbHVlcyJ9ZWxzZXtpZihlLnByb3BOYW1lUmUudGVzdChnKSl7ZD1lLnBhcnNlVGFnKGcpfWVsc2V7ZD1lLmFkZEZuKGcpK2UuY2FsbEZufX1pZihlLm1heExldmVsPGIpe2UubWF4TGV2ZWw9YjtlLmJvZHkucHVzaCgidmFyICIpfWlmKGc9PSIuIil7aD0iYyIrYn1lbHNle2g9ImEiK2ErIj9jIithKyJbaSIrYSsiXTpwIitifWUuYm9keS5wdXNoKCJpIixiLCI9MCxuIixiLCI9MCxjIixiLCI9IixkLCIsYSIsYiwiPSIsZS5jcmVhdGVBcnJheVRlc3QoYiksIixwIixiLCI9YyIsYSwiLHIiLGIsIj12YWx1ZXM7XG4iLCJwYXJlbnQ9IixoLCJcbiIsImlmIChjIixiLCIpe2lmKGEiLGIsIil7biIsYiwiPWMiLGIsIi5sZW5ndGg7fWVsc2UgaWYgKGMiLGIsIi5pc01peGVkQ29sbGVjdGlvbil7YyIsYiwiPWMiLGIsIi5pdGVtcztuIixiLCI9YyIsYiwiLmxlbmd0aDt9ZWxzZSBpZihjIixiLCIuaXNTdG9yZSl7YyIsYiwiPWMiLGIsIi5kYXRhLml0ZW1zO24iLGIsIj1jIixiLCIubGVuZ3RoO31lbHNle2MiLGIsIj1bYyIsYiwiXTtuIixiLCI9MTt9fVxuIiwiZm9yICh4Y291bnQ9biIsYiwiO2kiLGIsIjxuIitiKyI7KytpIixiLCIpe1xuIiwidmFsdWVzPWMiLGIsIltpIixiLCJdIik7aWYoaS5wcm9wTmFtZSl7ZS5ib2R5LnB1c2goIi4iLGkucHJvcE5hbWUpfWUuYm9keS5wdXNoKCJcbiIsInhpbmRleD1pIixiLCIrMVxuIil9LGNyZWF0ZUFycmF5VGVzdDooImlzQXJyYXkiIGluIEFycmF5KT9mdW5jdGlvbihhKXtyZXR1cm4iQXJyYXkuaXNBcnJheShjIithKyIpIn06ZnVuY3Rpb24oYSl7cmV0dXJuInRzLmNhbGwoYyIrYSsnKT09PSJbb2JqZWN0IEFycmF5XSInfSxkb0V4ZWM6ZnVuY3Rpb24oYyxkKXt2YXIgYj10aGlzLGE9ImYiK2IuZGVmaW5pdGlvbnMubGVuZ3RoO2IuZGVmaW5pdGlvbnMucHVzaCgiZnVuY3Rpb24gIithKyIoIitiLmZuQXJncysiKSB7IiwiIHRyeSB7IHdpdGgodmFsdWVzKSB7IiwiICAiK2MsIiB9fSBjYXRjaChlKSB7IiwifSIsIn0iKTtiLmJvZHkucHVzaChhK2IuY2FsbEZuKyJcbiIpfSxhZGRGbjpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGI9ImYiK2MuZGVmaW5pdGlvbnMubGVuZ3RoO2lmKGE9PT0iLiIpe2MuZGVmaW5pdGlvbnMucHVzaCgiZnVuY3Rpb24gIitiKyIoIitjLmZuQXJncysiKSB7IiwiIHJldHVybiB2YWx1ZXMiLCJ9Iil9ZWxzZXtpZihhPT09Ii4uIil7Yy5kZWZpbml0aW9ucy5wdXNoKCJmdW5jdGlvbiAiK2IrIigiK2MuZm5BcmdzKyIpIHsiLCIgcmV0dXJuIHBhcmVudCIsIn0iKX1lbHNle2MuZGVmaW5pdGlvbnMucHVzaCgiZnVuY3Rpb24gIitiKyIoIitjLmZuQXJncysiKSB7IiwiIHRyeSB7IHdpdGgodmFsdWVzKSB7IiwiICByZXR1cm4oIithKyIpIiwiIH19IGNhdGNoKGUpIHsiLCJ9IiwifSIpfX1yZXR1cm4gYn0scGFyc2VUYWc6ZnVuY3Rpb24oYil7dmFyIGg9dGhpcyxhPWgudGFnUmUuZXhlYyhiKSxlPWFbMV0saT1hWzJdLGQ9YVszXSxnPWFbNF0sYztpZihlPT0iLiIpe2lmKCFoLnZhbGlkVHlwZXMpe2guZGVmaW5pdGlvbnMucHVzaCgidmFyIHZhbGlkVHlwZXM9e3N0cmluZzoxLG51bWJlcjoxLGJvb2xlYW46MX07Iik7aC52YWxpZFR5cGVzPXRydWV9Yz0ndmFsaWRUeXBlc1t0eXBlb2YgdmFsdWVzXSB8fCB0cy5jYWxsKHZhbHVlcykgPT09ICJbb2JqZWN0IERhdGVdIiA/IHZhbHVlcyA6ICIiJ31lbHNle2lmKGU9PSIjIil7Yz0ieGluZGV4In1lbHNle2lmKGUuc3Vic3RyKDAsNyk9PSJwYXJlbnQuIil7Yz1lfWVsc2V7aWYoaXNOYU4oZSkmJmUuaW5kZXhPZigiLSIpPT0tMSYmZS5pbmRleE9mKCIuIikhPS0xKXtjPSJ2YWx1ZXMuIitlfWVsc2V7Yz0idmFsdWVzWyciK2UrIiddIn19fX1pZihnKXtjPSIoIitjK2crIikifWlmKGkmJmgudXNlRm9ybWF0KXtkPWQ/IiwiK2Q6IiI7aWYoaS5zdWJzdHIoMCw1KSE9InRoaXMuIil7aT0iZm0uIitpKyIoIn1lbHNle2krPSIoIn19ZWxzZXtyZXR1cm4gY31yZXR1cm4gaStjK2QrIikifSxldmFsVHBsOmZ1bmN0aW9uKCQpe2V2YWwoJCk7cmV0dXJuICR9LG5ld0xpbmVSZTovXHJcbnxccnxcbi9nLGFwb3NSZTovWyddL2csaW50UmU6L15ccyooXGQrKVxzKiQvLHRhZ1JlOi8oW1x3LVwuXCNdKykoPzpcOihbXHdcLl0qKSg/OlwoKC4qPyk/XCkpPyk/KFxzP1tcK1wtXCpcL11ccz9bXGRcLlwrXC1cKlwvXChcKV0rKT8vfSxmdW5jdGlvbigpe3ZhciBhPXRoaXMucHJvdG90eXBlO2EuZm5BcmdzPSJvdXQsdmFsdWVzLHBhcmVudCx4aW5kZXgseGNvdW50IjthLmNhbGxGbj0iLmNhbGwodGhpcywiK2EuZm5BcmdzKyIpIn0pO0V4dC5kZWZpbmUoIkV4dC5YVGVtcGxhdGUiLHtleHRlbmQ6IkV4dC5UZW1wbGF0ZSIscmVxdWlyZXM6IkV4dC5YVGVtcGxhdGVDb21waWxlciIsZW1wdHlPYmo6e30sYXBwbHk6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hcHBseU91dChhLFtdLGIpLmpvaW4oIiIpfSxhcHBseU91dDpmdW5jdGlvbihhLGIsZCl7dmFyIGc9dGhpcyxjO2lmKCFnLmZuKXtjPW5ldyBFeHQuWFRlbXBsYXRlQ29tcGlsZXIoe3VzZUZvcm1hdDpnLmRpc2FibGVGb3JtYXRzIT09dHJ1ZSxkZWZpbml0aW9uczpnLmRlZmluaXRpb25zfSk7Zy5mbj1jLmNvbXBpbGUoZy5odG1sKX10cnl7Zy5mbi5jYWxsKGcsYixhLGR8fGcuZW1wdHlPYmosMSwxKX1jYXRjaChoKXt9cmV0dXJuIGJ9LGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sc3RhdGljczp7Z2V0VHBsOmZ1bmN0aW9uKGEsYyl7dmFyIGI9YVtjXSxkO2lmKGImJiFiLmlzVGVtcGxhdGUpe2I9RXh0LkNsYXNzTWFuYWdlci5keW5JbnN0YW50aWF0ZSgiRXh0LlhUZW1wbGF0ZSIsYik7aWYoYS5oYXNPd25Qcm9wZXJ0eShjKSl7YVtjXT1ifWVsc2V7Zm9yKGQ9YS5zZWxmLnByb3RvdHlwZTtkO2Q9ZC5zdXBlcmNsYXNzKXtpZihkLmhhc093blByb3BlcnR5KGMpKXtkW2NdPWI7YnJlYWt9fX19cmV0dXJuIGJ8fG51bGx9fX0pO0V4dC5kZWZpbmUoIkV4dC5sYXlvdXQuTGF5b3V0Iix7cmVxdWlyZXM6WyJFeHQuWFRlbXBsYXRlIl0sdXNlczpbIkV4dC5sYXlvdXQuQ29udGV4dCJdLGlzTGF5b3V0OnRydWUsaW5pdGlhbGl6ZWQ6ZmFsc2UscnVubmluZzpmYWxzZSxhdXRvU2l6ZVBvbGljeTp7c2V0c1dpZHRoOjAsc2V0c0hlaWdodDowfSxzdGF0aWNzOntsYXlvdXRzQnlUeXBlOnt9LGNyZWF0ZTpmdW5jdGlvbihnLGUpe3ZhciBrPUV4dC5DbGFzc01hbmFnZXIsYz10aGlzLmxheW91dHNCeVR5cGUsZCxoLGIsYSxpLGo7aWYoIWd8fHR5cGVvZiBnPT09InN0cmluZyIpe2k9Z3x8ZTtiPXt9fWVsc2V7aWYoZy5pc0xheW91dCl7cmV0dXJuIGd9ZWxzZXtiPWc7aT1nLnR5cGV8fGV9fWlmKCEoYT1jW2ldKSl7ZD0ibGF5b3V0LiIraTtoPWsuZ2V0TmFtZUJ5QWxpYXMoZCk7aWYoIWgpe2o9dHJ1ZX1hPWsuZ2V0KGgpO2lmKGp8fCFhKXtyZXR1cm4gay5pbnN0YW50aWF0ZUJ5QWxpYXMoZCxifHx7fSl9Y1tpXT1hfXJldHVybiBuZXcgYShiKX19LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5pZD1FeHQuaWQobnVsbCxiLnR5cGUrIi0iKTtFeHQuYXBwbHkoYixhKTtiLmxheW91dENvdW50PTB9LGJlZ2luTGF5b3V0OkV4dC5lbXB0eUZuLGJlZ2luTGF5b3V0Q3ljbGU6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhPWIuY29udGV4dCxkO2lmKGIubGFzdFdpZHRoTW9kZWwhPWMud2lkdGhNb2RlbCl7aWYoYi5sYXN0V2lkdGhNb2RlbCl7ZD10cnVlfWIubGFzdFdpZHRoTW9kZWw9Yy53aWR0aE1vZGVsfWlmKGIubGFzdEhlaWdodE1vZGVsIT1jLmhlaWdodE1vZGVsKXtpZihiLmxhc3RXaWR0aE1vZGVsKXtkPXRydWV9Yi5sYXN0SGVpZ2h0TW9kZWw9Yy5oZWlnaHRNb2RlbH1pZihkKXsoYT1jLmNvbnRleHQpLmNsZWFyVHJpZ2dlcnMoYixmYWxzZSk7YS5jbGVhclRyaWdnZXJzKGIsdHJ1ZSk7Yi50cmlnZ2VyQ291bnQ9MH19LGZpbmlzaGVkTGF5b3V0OmZ1bmN0aW9uKCl7dGhpcy5vd25lckNvbnRleHQ9bnVsbH0scmVkb0xheW91dDpFeHQuZW1wdHlGbix1bmRvTGF5b3V0OkV4dC5lbXB0eUZuLGdldEFuaW1hdGVQb2xpY3k6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hbmltYXRlUG9saWN5fSxnZXRJdGVtU2l6ZVBvbGljeTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hdXRvU2l6ZVBvbGljeX0saXNJdGVtQm94UGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybiBmYWxzZX0saXNJdGVtTGF5b3V0Um9vdDpmdW5jdGlvbihkKXt2YXIgYz1kLmdldFNpemVNb2RlbCgpLGI9Yy53aWR0aCxhPWMuaGVpZ2h0O2lmKCFkLmNvbXBvbmVudExheW91dC5sYXN0Q29tcG9uZW50U2l6ZSYmKGIuY2FsY3VsYXRlZHx8YS5jYWxjdWxhdGVkKSl7cmV0dXJuIGZhbHNlfXJldHVybiAhYi5zaHJpbmtXcmFwJiYhYS5zaHJpbmtXcmFwfSxpc0l0ZW1TaHJpbmtXcmFwOmZ1bmN0aW9uKGEpe3JldHVybiBhLnNocmlua1dyYXB9LGlzUnVubmluZzpmdW5jdGlvbigpe3JldHVybiAhIXRoaXMub3duZXJDb250ZXh0fSxnZXRJdGVtc1JlbmRlclRyZWU6ZnVuY3Rpb24oZCxiKXt2YXIgaD1kLmxlbmd0aCxlLGcsYyxhO2lmKGgpe2E9W107Zm9yKGU9MDtlPGg7KytlKXtnPWRbZV07aWYoIWcucmVuZGVyZWQpe2lmKGImJihiW2cuaWRdIT09dW5kZWZpbmVkKSl7Yz1iW2cuaWRdfWVsc2V7dGhpcy5jb25maWd1cmVJdGVtKGcpO2M9Zy5nZXRSZW5kZXJUcmVlKCk7aWYoYil7YltnLmlkXT1jfX1pZihjKXthLnB1c2goYyl9fX19cmV0dXJuIGF9LGZpbmlzaFJlbmRlcjpFeHQuZW1wdHlGbixmaW5pc2hSZW5kZXJJdGVtczpmdW5jdGlvbihlLGEpe3ZhciBkPWEubGVuZ3RoLGIsYztmb3IoYj0wO2I8ZDtiKyspe2M9YVtiXTtpZihjLnJlbmRlcmluZyl7Yy5maW5pc2hSZW5kZXIoYik7dGhpcy5hZnRlclJlbmRlckl0ZW0oYyl9fX0scmVuZGVyQ2hpbGRyZW46ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5nZXRMYXlvdXRJdGVtcygpLGM9Yi5nZXRSZW5kZXJUYXJnZXQoKTtiLnJlbmRlckl0ZW1zKGEsYyl9LHJlbmRlckl0ZW1zOmZ1bmN0aW9uKGEsZyl7dmFyIGU9dGhpcyxkPWEubGVuZ3RoLGI9MCxjO2lmKGQpe0V4dC5zdXNwZW5kTGF5b3V0cygpO2Zvcig7YjxkO2IrKyl7Yz1hW2JdO2lmKGMmJiFjLnJlbmRlcmVkKXtlLnJlbmRlckl0ZW0oYyxnLGIpfWVsc2V7aWYoIWUuaXNWYWxpZFBhcmVudChjLGcsYikpe2UubW92ZUl0ZW0oYyxnLGIpfWVsc2V7ZS5jb25maWd1cmVJdGVtKGMpfX19RXh0LnJlc3VtZUxheW91dHModHJ1ZSl9fSxpc1ZhbGlkUGFyZW50OmZ1bmN0aW9uKGQsZSxhKXt2YXIgYj1kLmVsP2QuZWwuZG9tOkV4dC5nZXREb20oZCksYz0oZSYmZS5kb20pfHxlO2lmKGIucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLmNsYXNzTmFtZS5pbmRleE9mKEV4dC5iYXNlQ1NTUHJlZml4KyJyZXNpemFibGUtd3JhcCIpIT09LTEpe2I9Yi5wYXJlbnROb2RlfWlmKGImJmMpe2lmKHR5cGVvZiBhPT0ibnVtYmVyIil7cmV0dXJuIGI9PT1jLmNoaWxkTm9kZXNbYV19cmV0dXJuIGIucGFyZW50Tm9kZT09PWN9cmV0dXJuIGZhbHNlfSxjb25maWd1cmVJdGVtOmZ1bmN0aW9uKGEpe2Eub3duZXJMYXlvdXQ9dGhpc30scmVuZGVySXRlbTpmdW5jdGlvbihjLGQsYSl7dmFyIGI9dGhpcztpZighYy5yZW5kZXJlZCl7Yi5jb25maWd1cmVJdGVtKGMpO2MucmVuZGVyKGQsYSk7Yi5hZnRlclJlbmRlckl0ZW0oYyl9fSxtb3ZlSXRlbTpmdW5jdGlvbihiLGMsYSl7Yz1jLmRvbXx8YztpZih0eXBlb2YgYT09Im51bWJlciIpe2E9Yy5jaGlsZE5vZGVzW2FdfWMuaW5zZXJ0QmVmb3JlKGIuZWwuZG9tLGF8fG51bGwpO2IuY29udGFpbmVyPUV4dC5nZXQoYyk7dGhpcy5jb25maWd1cmVJdGVtKGIpfSxvbkNvbnRlbnRDaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLm93bmVyLnVwZGF0ZUxheW91dCgpO3JldHVybiB0cnVlfSxpbml0TGF5b3V0OmZ1bmN0aW9uKCl7dGhpcy5pbml0aWFsaXplZD10cnVlfSxzZXRPd25lcjpmdW5jdGlvbihhKXt0aGlzLm93bmVyPWF9LGdldExheW91dEl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuW119LGFmdGVyUmVuZGVySXRlbTpFeHQuZW1wdHlGbixvbkFkZDpFeHQuZW1wdHlGbixvblJlbW92ZTpFeHQuZW1wdHlGbixvbkRlc3Ryb3k6RXh0LmVtcHR5Rm4sYWZ0ZXJSZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIGQ9dGhpcyxjPWUuZWwsYj1kLm93bmVyLGE7aWYoZS5yZW5kZXJlZCl7YT1bXS5jb25jYXQoZC5pdGVtQ2xzfHxbXSk7aWYoYi5pdGVtQ2xzKXthPUV4dC5BcnJheS5wdXNoKGEsYi5pdGVtQ2xzKX1pZihhLmxlbmd0aCl7Yy5yZW1vdmVDbHMoYSl9fWRlbGV0ZSBlLm93bmVyTGF5b3V0fSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiO2lmKGEudGFyZ2V0Q2xzKXtiPWEuZ2V0VGFyZ2V0KCk7aWYoYil7Yi5yZW1vdmVDbHMoYS50YXJnZXRDbHMpfX1hLm9uRGVzdHJveSgpfSxzb3J0V2VpZ2h0ZWRJdGVtczpmdW5jdGlvbihhLGQpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjOysrYil7YVtiXS4kaT1ifUV4dC5BcnJheS5zb3J0KGEsZnVuY3Rpb24oZyxlKXt2YXIgaD1lLndlaWdodC1nLndlaWdodDtpZighaCl7aD1nLiRpLWUuJGk7aWYoZ1tkXSl7aD0taH19cmV0dXJuIGh9KTtmb3IoYj0wO2I8YzsrK2Ipe2RlbGV0ZSBhW2JdLiRpfX19LGZ1bmN0aW9uKCl7dmFyIGw9dGhpcyxrPXt9LG09W10sZyxlLGIsYSxkO2wucHJvdG90eXBlLnNpemVNb2RlbHM9bC5zaXplTW9kZWxzPWs7dmFyIGg9ZnVuY3Rpb24oail7dmFyIG49dGhpcyxpPWoubmFtZTtFeHQuYXBwbHkoRXh0LmFwcGx5KG4sYyksaik7bltpXT10cnVlO2hbaV09a1tpXT1uO24uZml4ZWQ9IShuLmF1dG89bi5uYXR1cmFsfHxuLnNocmlua1dyYXApO24ub3JkaW5hbD1tLmxlbmd0aDttLnB1c2gobil9O0V4dC5sYXlvdXQuU2l6ZU1vZGVsPWg7dmFyIGM9e2NhbGN1bGF0ZWQ6ZmFsc2UsY29uZmlndXJlZDpmYWxzZSxjb25zdHJhaW5lZE1heDpmYWxzZSxjb25zdHJhaW5lZE1pbjpmYWxzZSxuYXR1cmFsOmZhbHNlLHNocmlua1dyYXA6ZmFsc2UsY2FsY3VsYXRlZEZyb21Db25maWd1cmVkOmZhbHNlLGNhbGN1bGF0ZWRGcm9tTmF0dXJhbDpmYWxzZSxjYWxjdWxhdGVkRnJvbVNocmlua1dyYXA6ZmFsc2UsbmFtZXM6bnVsbH07bmV3IGgoe25hbWU6ImNhbGN1bGF0ZWQifSk7bmV3IGgoe25hbWU6ImNvbmZpZ3VyZWQiLG5hbWVzOnt3aWR0aDoid2lkdGgiLGhlaWdodDoiaGVpZ2h0In19KTtuZXcgaCh7bmFtZToibmF0dXJhbCJ9KTtuZXcgaCh7bmFtZToic2hyaW5rV3JhcCJ9KTtuZXcgaCh7bmFtZToiY2FsY3VsYXRlZEZyb21Db25maWd1cmVkIixjb25maWd1cmVkOnRydWUsbmFtZXM6e3dpZHRoOiJ3aWR0aCIsaGVpZ2h0OiJoZWlnaHQifX0pO25ldyBoKHtuYW1lOiJjYWxjdWxhdGVkRnJvbU5hdHVyYWwiLG5hdHVyYWw6dHJ1ZX0pO25ldyBoKHtuYW1lOiJjYWxjdWxhdGVkRnJvbVNocmlua1dyYXAiLHNocmlua1dyYXA6dHJ1ZX0pO25ldyBoKHtuYW1lOiJjb25zdHJhaW5lZE1heCIsY29uZmlndXJlZDp0cnVlLGNvbnN0cmFpbmVkOnRydWUsbmFtZXM6e3dpZHRoOiJtYXhXaWR0aCIsaGVpZ2h0OiJtYXhIZWlnaHQifX0pO25ldyBoKHtuYW1lOiJjb25zdHJhaW5lZE1pbiIsY29uZmlndXJlZDp0cnVlLGNvbnN0cmFpbmVkOnRydWUsbmFtZXM6e3dpZHRoOiJtaW5XaWR0aCIsaGVpZ2h0OiJtaW5IZWlnaHQifX0pO2ZvcihnPTAsYj1tLmxlbmd0aDtnPGI7KytnKXtkPW1bZ107ZC5wYWlyc0J5SGVpZ2h0T3JkaW5hbD1hPVtdO2ZvcihlPTA7ZTxiOysrZSl7YS5wdXNoKHt3aWR0aDpkLGhlaWdodDptW2VdfSl9fX0pO0V4dC5kZWZpbmUoIkV4dC5sYXlvdXQuY29udGFpbmVyLkNvbnRhaW5lciIse2V4dGVuZDoiRXh0LmxheW91dC5MYXlvdXQiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmxheW91dC5Db250YWluZXJMYXlvdXQiLG1peGluczp7ZWxlbWVudEN0OiJFeHQudXRpbC5FbGVtZW50Q29udGFpbmVyIn0scmVxdWlyZXM6WyJFeHQuWFRlbXBsYXRlIl0sdHlwZToiY29udGFpbmVyIixtYW5hZ2VPdmVyZmxvdzowLGJlZ2luQ29sbGFwc2U6RXh0LmVtcHR5Rm4sYmVnaW5FeHBhbmQ6RXh0LmVtcHR5Rm4sYW5pbWF0ZVBvbGljeTpudWxsLGNoaWxkRWxzOlsib3ZlcmZsb3dQYWRkZXJFbCJdLHJlbmRlclRwbDpbInsldGhpcy5yZW5kZXJCb2R5KG91dCx2YWx1ZXMpJX0iXSx1c2VzQ29udGFpbmVySGVpZ2h0OnRydWUsdXNlc0NvbnRhaW5lcldpZHRoOnRydWUsdXNlc0hlaWdodDp0cnVlLHVzZXNXaWR0aDp0cnVlLHJlc2VydmVTY3JvbGxiYXI6ZmFsc2UsbGFzdE92ZXJmbG93QWRqdXN0Ont3aWR0aDowLGhlaWdodDowfSxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3RoaXMubWl4aW5zLmVsZW1lbnRDdC5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KCk7dGhpcy5taXhpbnMuZWxlbWVudEN0LmRlc3Ryb3kuY2FsbCh0aGlzKX0saW5pdExheW91dDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1FeHQuZ2V0U2Nyb2xsYmFyU2l6ZSgpLndpZHRoO2IuY2FsbFBhcmVudCgpO2lmKGEmJmIubWFuYWdlT3ZlcmZsb3cmJiFiLmhhc093blByb3BlcnR5KCJsYXN0T3ZlcmZsb3dBZGp1c3QiKSl7aWYoYi5vd25lci5hdXRvU2Nyb2xsfHxiLnJlc2VydmVTY3JvbGxiYXIpe2IubGFzdE92ZXJmbG93QWRqdXN0PXt3aWR0aDphLGhlaWdodDowfX19fSxiZWdpbkxheW91dDpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLnRhcmdldENvbnRleHQ9YS5nZXRFbCgiZ2V0VGFyZ2V0Iix0aGlzKTt0aGlzLmNhY2hlQ2hpbGRJdGVtcyhhKX0sYmVnaW5MYXlvdXRDeWNsZTpmdW5jdGlvbihjLGEpe3ZhciBiPXRoaXMsZD1iLm92ZXJmbG93UGFkZGVyRWw7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoIWMuc3RhdGUub3ZlcmZsb3dBZGp1c3Qpe2Muc3RhdGUub3ZlcmZsb3dBZGp1c3Q9Yi5sYXN0T3ZlcmZsb3dBZGp1c3R9aWYoYSl7aWYoYi51c2VzQ29udGFpbmVySGVpZ2h0KXsrK2MuY29uc3VtZXJzQ29udGFpbmVySGVpZ2h0fWlmKGIudXNlc0NvbnRhaW5lcldpZHRoKXsrK2MuY29uc3VtZXJzQ29udGFpbmVyV2lkdGh9fWlmKGQpe2Quc2V0U3R5bGUoImRpc3BsYXkiLCJub25lIil9fSxjb21wbGV0ZUxheW91dDpmdW5jdGlvbihhKXt0aGlzLmxhc3RPdmVyZmxvd0FkanVzdD1hLnN0YXRlLm92ZXJmbG93QWRqdXN0fSxjYWNoZUNoaWxkSXRlbXM6ZnVuY3Rpb24oZSl7dmFyIGM9ZS5jb250ZXh0LGc9W10sYT10aGlzLmdldFZpc2libGVJdGVtcygpLGQ9YS5sZW5ndGgsYjtlLmNoaWxkSXRlbXM9ZztlLnZpc2libGVJdGVtcz1hO2ZvcihiPTA7YjxkOysrYil7Zy5wdXNoKGMuZ2V0Q21wKGFbYl0pKX19LGNhY2hlRWxlbWVudHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm93bmVyO3RoaXMuYXBwbHlDaGlsZEVscyhhLmVsLGEuaWQpfSxjYWxjdWxhdGVDb250ZW50U2l6ZTpmdW5jdGlvbihxLG0pe3ZhciBCPXRoaXMsZD0obXx8MCl8Qi5tYW5hZ2VPdmVyZmxvd3woKHEud2lkdGhNb2RlbC5zaHJpbmtXcmFwPzE6MCl8KHEuaGVpZ2h0TW9kZWwuc2hyaW5rV3JhcD8yOjApKSxjPShkJjEpfHx1bmRlZmluZWQsaj0oZCYyKXx8dW5kZWZpbmVkLGI9cS5jaGlsZEl0ZW1zLGc9Yi5sZW5ndGgsdz0wLHU9MCxuPTAsZT1xLnByb3BzLHIscCxvLEEsaCxsLHQseix5LHMseCxhLHYsaztpZihjKXtpZihpc05hTihlLmNvbnRlbnRXaWR0aCkpeysrbn1lbHNle2M9dW5kZWZpbmVkfX1pZihqKXtpZihpc05hTihlLmNvbnRlbnRIZWlnaHQpKXsrK259ZWxzZXtqPXVuZGVmaW5lZH19aWYobil7Zm9yKHg9MDt4PGc7Kyt4KXt0PWJbeF07bD10LnRhcmdldDtzPWomJnQuZ2V0UHJvcCgiaGVpZ2h0Iik7dj1jJiZ0LmdldFByb3AoIndpZHRoIik7YT10LmdldE1hcmdpbkluZm8oKTtpZigoYyYmaXNOYU4obC54KSl8fChqJiZpc05hTihsLnkpKSl7az1sLmVsLmdldFhZKCk7aWYoIXIpe3I9cS50YXJnZXRDb250ZXh0LmVsLmdldFhZKCk7aD1xLnRhcmdldENvbnRleHQuZ2V0Qm9yZGVySW5mbygpO3A9clswXStoLmxlZnQ7bz1yWzFdK2gudG9wfXo9a1swXS1wO3k9a1sxXS1vfWVsc2V7ej1sLng7eT1sLnl9cys9YS5ib3R0b207dis9YS5yaWdodDt3PU1hdGgubWF4KHcseStzKTt1PU1hdGgubWF4KHUseit2KTtpZihpc05hTih3KSYmaXNOYU4odSkpe0IuZG9uZT1mYWxzZTtyZXR1cm59fWlmKGN8fGope0E9cS50YXJnZXRDb250ZXh0LmdldFBhZGRpbmdJbmZvKCl9aWYoYyYmIXEuc2V0Q29udGVudFdpZHRoKHUrQS5yaWdodCkpe0IuZG9uZT1mYWxzZX1pZihqJiYhcS5zZXRDb250ZW50SGVpZ2h0KHcrQS5ib3R0b20pKXtCLmRvbmU9ZmFsc2V9fX0sY2FsY3VsYXRlT3ZlcmZsb3c6ZnVuY3Rpb24obixzLGgpe3ZhciB3PXRoaXMsYT13Lm93bmVyLGw9dy5tYW5hZ2VPdmVyZmxvdyxkPW4uc3RhdGUsbT1kLm92ZXJmbG93QWRqdXN0LGcsayxjLG8sYixxLHQsaixyLGUscCx1LGksdjtpZihsJiYhZC5zZWNvbmRQYXNzJiYhdy5yZXNlcnZlU2Nyb2xsYmFyKXtpZihhLmF1dG9TY3JvbGwpe2k9dj10cnVlfWVsc2V7aWYoYS5vdmVyZmxvd1gpe2k9YS5vdmVyZmxvd1g9PSJhdXRvIn1lbHNle3E9bi50YXJnZXRDb250ZXh0LmdldFN0eWxlKCJvdmVyZmxvdy14Iik7aT1xJiZxIT0iaGlkZGVuIiYmcSE9InNjcm9sbCJ9aWYoYS5vdmVyZmxvd1kpe3Y9YS5vdmVyZmxvd1k9PSJhdXRvIn1lbHNle3E9bi50YXJnZXRDb250ZXh0LmdldFN0eWxlKCJvdmVyZmxvdy15Iik7dj1xJiZxIT0iaGlkZGVuIiYmcSE9InNjcm9sbCJ9fWlmKCFzLmdvdFdpZHRoKXtpPWZhbHNlfWlmKCFzLmdvdEhlaWdodCl7dj1mYWxzZX1pZihpfHx2KXt0PUV4dC5nZXRTY3JvbGxiYXJTaXplKCk7aj1uLnBlZWsoImNvbnRlbnRXaWR0aCIpO3I9bi5wZWVrKCJjb250ZW50SGVpZ2h0Iik7ZT1zLndpZHRoO3A9cy5oZWlnaHQ7dT13LmdldFNjcm9sbGJhcnNOZWVkZWQoZSxwLGoscik7ZC5vdmVyZmxvd1N0YXRlPXU7aWYodHlwZW9mIGg9PSJudW1iZXIiKXt1Jj1+aH1tPXt3aWR0aDooaSYmKHUmMikpP3Qud2lkdGg6MCxoZWlnaHQ6KHYmJih1JjEpKT90LmhlaWdodDowfTtpZihtLndpZHRoIT09dy5sYXN0T3ZlcmZsb3dBZGp1c3Qud2lkdGh8fG0uaGVpZ2h0IT09dy5sYXN0T3ZlcmZsb3dBZGp1c3QuaGVpZ2h0KXt3LmRvbmU9ZmFsc2U7bi5pbnZhbGlkYXRlKHtzdGF0ZTp7b3ZlcmZsb3dBZGp1c3Q6bSxvdmVyZmxvd1N0YXRlOmQub3ZlcmZsb3dTdGF0ZSxzZWNvbmRQYXNzOnRydWV9fSl9fX1pZighdy5kb25lKXtyZXR1cm59Yz1uLnBhZEVsQ29udGV4dHx8KG4ucGFkRWxDb250ZXh0PW4uZ2V0RWwoIm92ZXJmbG93UGFkZGVyRWwiLHcpKTtpZihjKXt1PWQub3ZlcmZsb3dTdGF0ZTtnPXMud2lkdGg7az0wO2lmKHUpe289bi50YXJnZXRDb250ZXh0LmdldFBhZGRpbmdJbmZvKCk7Yj13LnNjcm9sbFJhbmdlRmxhZ3M7aWYoKHUmMikmJihiJjEpKXtrKz1vLmJvdHRvbX1pZigodSYxKSYmKGImNCkpe2crPW8ucmlnaHR9Yy5zZXRQcm9wKCJkaXNwbGF5IiwiIik7Yy5zZXRTaXplKGcsayl9ZWxzZXtjLnNldFByb3AoImRpc3BsYXkiLCJub25lIil9fX0sY29uZmlndXJlSXRlbTpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE9Yi5vd25lci5pdGVtQ2xzLGQ9W10uY29uY2F0KGIuaXRlbUNsc3x8W10pO2IuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGEpe2Q9RXh0LkFycmF5LnB1c2goZCxhKX1jLmFkZENscyhkKX0sZG9SZW5kZXJCb2R5OmZ1bmN0aW9uKGEsYil7dGhpcy5yZW5kZXJJdGVtcyhhLGIpO3RoaXMucmVuZGVyQ29udGVudChhLGIpfSxkb1JlbmRlckNvbnRhaW5lcjpmdW5jdGlvbihiLGUpe3ZhciBjPWUuJGNvbXAubGF5b3V0LGE9Yy5nZXRSZW5kZXJUcGwoKSxkPWMuZ2V0UmVuZGVyRGF0YSgpO2EuYXBwbHlPdXQoZCxiKX0sZG9SZW5kZXJJdGVtczpmdW5jdGlvbihiLGQpe3ZhciBjPWQuJGxheW91dCxhPWMuZ2V0UmVuZGVyVHJlZSgpO2lmKGEpe0V4dC5Eb21IZWxwZXIuZ2VuZXJhdGVNYXJrdXAoYSxiKX19LGRvUmVuZGVyUGFkZGVyOmZ1bmN0aW9uKGIsZCl7dmFyIGM9ZC4kbGF5b3V0LGE9Yy5vd25lcixlPWMuZ2V0U2Nyb2xsUmFuZ2VGbGFncygpO2lmKGMubWFuYWdlT3ZlcmZsb3c9PTIpe2lmKGUmNSl7Yi5wdXNoKCc8ZGl2IGlkPSInLGEuaWQsJy1vdmVyZmxvd1BhZGRlckVsIiAnLCdzdHlsZT0iZm9udC1zaXplOiAxcHg7IHdpZHRoOjFweDsgaGVpZ2h0OiAxcHg7Jyk7Yi5wdXNoKCciPjwvZGl2PicpO2Muc2Nyb2xsUmFuZ2VGbGFncz1lfX19LGZpbmlzaFJlbmRlcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYyxhO2IuY2FsbFBhcmVudCgpO2IuY2FjaGVFbGVtZW50cygpO2M9Yi5nZXRSZW5kZXJUYXJnZXQoKTthPWIuZ2V0TGF5b3V0SXRlbXMoKTtpZihiLnRhcmdldENscyl7Yi5nZXRUYXJnZXQoKS5hZGRDbHMoYi50YXJnZXRDbHMpfWIuZmluaXNoUmVuZGVySXRlbXMoYyxhKX0sbm90aWZ5T3duZXI6ZnVuY3Rpb24oKXt0aGlzLm93bmVyLmFmdGVyTGF5b3V0KHRoaXMpfSxnZXRDb250YWluZXJTaXplOmZ1bmN0aW9uKGMsaCl7dmFyIGQ9Yy50YXJnZXRDb250ZXh0LGc9ZC5nZXRGcmFtZUluZm8oKSxrPWQuZ2V0UGFkZGluZ0luZm8oKSxqPTAsbD0wLGE9Yy5zdGF0ZS5vdmVyZmxvd0FkanVzdCxlLGksYixtO2lmKCFjLndpZHRoTW9kZWwuc2hyaW5rV3JhcCl7KytsO2I9aD9kLmdldERvbVByb3AoIndpZHRoIik6ZC5nZXRQcm9wKCJ3aWR0aCIpO2U9KHR5cGVvZiBiPT0ibnVtYmVyIik7aWYoZSl7KytqO2ItPWcud2lkdGgray53aWR0aDtpZihhKXtiLT1hLndpZHRofX19aWYoIWMuaGVpZ2h0TW9kZWwuc2hyaW5rV3JhcCl7KytsO209aD9kLmdldERvbVByb3AoImhlaWdodCIpOmQuZ2V0UHJvcCgiaGVpZ2h0Iik7aT0odHlwZW9mIG09PSJudW1iZXIiKTtpZihpKXsrK2o7bS09Zy5oZWlnaHQray5oZWlnaHQ7aWYoYSl7bS09YS5oZWlnaHR9fX1yZXR1cm57d2lkdGg6YixoZWlnaHQ6bSxuZWVkZWQ6bCxnb3Q6aixnb3RBbGw6aj09bCxnb3RXaWR0aDplLGdvdEhlaWdodDppfX0sZ2V0TGF5b3V0SXRlbXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm93bmVyLGI9YSYmYS5pdGVtcztyZXR1cm4oYiYmYi5pdGVtcyl8fFtdfSxnZXRSZW5kZXJEYXRhOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vd25lcjtyZXR1cm57JGNvbXA6YSwkbGF5b3V0OnRoaXMsb3duZXJJZDphLmlkfX0sZ2V0UmVuZGVyZWRJdGVtczpmdW5jdGlvbigpe3ZhciBlPXRoaXMsaD1lLmdldFJlbmRlclRhcmdldCgpLGE9ZS5nZXRMYXlvdXRJdGVtcygpLGQ9YS5sZW5ndGgsZz1bXSxiLGM7Zm9yKGI9MDtiPGQ7YisrKXtjPWFbYl07aWYoYy5yZW5kZXJlZCYmZS5pc1ZhbGlkUGFyZW50KGMsaCxiKSl7Zy5wdXNoKGMpfX1yZXR1cm4gZ30sZ2V0UmVuZGVyVGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duZXIuZ2V0VGFyZ2V0RWwoKX0sZ2V0RWxlbWVudFRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFJlbmRlclRhcmdldCgpfSxnZXRSZW5kZXJUcGw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9RXh0LlhUZW1wbGF0ZS5nZXRUcGwodGhpcywicmVuZGVyVHBsIik7aWYoIWIucmVuZGVyQ29udGVudCl7YS5vd25lci5zZXR1cFJlbmRlclRwbChiKX1yZXR1cm4gYn0sZ2V0UmVuZGVyVHJlZTpmdW5jdGlvbigpe3ZhciBhLGM9dGhpcy5vd25lci5pdGVtcyxkLGI9e307ZG97ZD1jLmdlbmVyYXRpb247YT10aGlzLmdldEl0ZW1zUmVuZGVyVHJlZSh0aGlzLmdldExheW91dEl0ZW1zKCksYil9d2hpbGUoYy5nZW5lcmF0aW9uIT09ZCk7cmV0dXJuIGF9LGdldFNjcm9sbGJhcnNOZWVkZWQ6ZnVuY3Rpb24oYyxpLGIsaCl7dmFyIGE9RXh0LmdldFNjcm9sbGJhclNpemUoKSxlPXR5cGVvZiBjPT0ibnVtYmVyIixqPXR5cGVvZiBpPT0ibnVtYmVyIixnPTAsZD0wO2lmKCFhLndpZHRoKXtyZXR1cm4gMH1pZihqJiZpPGgpe2Q9MjtjLT1hLndpZHRofWlmKGUmJmM8Yil7Zz0xO2lmKCFkJiZqKXtpLT1hLmhlaWdodDtpZihpPGgpe2Q9Mn19fXJldHVybiBkK2d9LGdldFNjcm9sbFJhbmdlRmxhZ3M6KGZ1bmN0aW9uKCl7dmFyIGE9LTE7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoYTwwKXt2YXIgZz1FeHQuZ2V0Qm9keSgpLmNyZWF0ZUNoaWxkKHtjbHM6RXh0LmJhc2VDU1NQcmVmaXgrImJvcmRlci1ib3giLHN0eWxlOnt3aWR0aDoiMTAwcHgiLGhlaWdodDoiMTAwcHgiLHBhZGRpbmc6IjEwcHgiLG92ZXJmbG93OiJhdXRvIn0sY2hpbGRyZW46W3tzdHlsZTp7Ym9yZGVyOiIxcHggc29saWQgcmVkIix3aWR0aDoiMTUwcHgiLGhlaWdodDoiMTUwcHgiLG1hcmdpbjoiMCA1cHggNXB4IDAifX1dfSksZD1nLmRvbS5zY3JvbGxIZWlnaHQsYz1nLmRvbS5zY3JvbGxXaWR0aCxlPXsxNzU6MCwxNjU6MSwxNzA6MiwxNjA6M30sYj17MTc1OjAsMTY1OjQsMTcwOjgsMTYwOjEyfTthPShlW2RdfHwwKXwoYltjXXx8MCk7Zy5yZW1vdmUoKX1yZXR1cm4gYX19KCkpLGdldFRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm93bmVyLmdldFRhcmdldEVsKCl9LGdldFZpc2libGVJdGVtczpmdW5jdGlvbigpe3ZhciBnPXRoaXMuZ2V0UmVuZGVyVGFyZ2V0KCksYj10aGlzLmdldExheW91dEl0ZW1zKCksZT1iLmxlbmd0aCxhPVtdLGMsZDtmb3IoYz0wO2M8ZTtjKyspe2Q9YltjXTtpZihkLnJlbmRlcmVkJiZ0aGlzLmlzVmFsaWRQYXJlbnQoZCxnLGMpJiZkLmhpZGRlbiE9PXRydWUpe2EucHVzaChkKX19cmV0dXJuIGF9LHNldHVwUmVuZGVyVHBsOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7Yi5yZW5kZXJCb2R5PWEuZG9SZW5kZXJCb2R5O2IucmVuZGVyQ29udGFpbmVyPWEuZG9SZW5kZXJDb250YWluZXI7Yi5yZW5kZXJJdGVtcz1hLmRvUmVuZGVySXRlbXM7Yi5yZW5kZXJQYWRkZXI9YS5kb1JlbmRlclBhZGRlcn19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbnRhaW5lci5FZGl0b3IiLHthbGlhczoibGF5b3V0LmVkaXRvciIsZXh0ZW5kOiJFeHQubGF5b3V0LmNvbnRhaW5lci5Db250YWluZXIiLGF1dG9TaXplRGVmYXVsdDp7d2lkdGg6ImZpZWxkIixoZWlnaHQ6ImZpZWxkIn0sZ2V0SXRlbVNpemVQb2xpY3k6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhPWIub3duZXIuYXV0b1NpemU7cmV0dXJuIGIuc2l6ZVBvbGljeXx8KGIuc2l6ZVBvbGljeT17c2V0c1dpZHRoOmEmJmEud2lkdGg9PT0iYm91bmRFbCI/MTowLHNldHNIZWlnaHQ6YSYmYS5oZWlnaHQ9PT0iYm91bmRFbCI/MTowfSl9LGNhbGN1bGF0ZTpmdW5jdGlvbihnKXt2YXIgZT10aGlzLGI9ZS5vd25lcixhPWIuYXV0b1NpemUsZCxjO2lmKGE9PT10cnVlKXthPWUuYXV0b1NpemVEZWZhdWx0fWlmKGEpe2Q9ZS5nZXREaW1lbnNpb24oYixhLndpZHRoLCJnZXRXaWR0aCIsYi53aWR0aCk7Yz1lLmdldERpbWVuc2lvbihiLGEuaGVpZ2h0LCJnZXRIZWlnaHQiLGIuaGVpZ2h0KX1nLmNoaWxkSXRlbXNbMF0uc2V0U2l6ZShkLGMpO2cuc2V0V2lkdGgoZCk7Zy5zZXRIZWlnaHQoYyk7Zy5zZXRDb250ZW50U2l6ZShkfHxiLmZpZWxkLmdldFdpZHRoKCksY3x8Yi5maWVsZC5nZXRIZWlnaHQoKSl9LGdldERpbWVuc2lvbjpmdW5jdGlvbihhLGIsZCxjKXtzd2l0Y2goYil7Y2FzZSJib3VuZEVsIjpyZXR1cm4gYS5ib3VuZEVsW2RdKCk7Y2FzZSJmaWVsZCI6cmV0dXJuIHVuZGVmaW5lZDtkZWZhdWx0OnJldHVybiBjfX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbXBvbmVudC5Db21wb25lbnQiLHtleHRlbmQ6IkV4dC5sYXlvdXQuTGF5b3V0Iix0eXBlOiJjb21wb25lbnQiLGlzQ29tcG9uZW50TGF5b3V0OnRydWUsbnVsbEJveDp7fSx1c2VzQ29udGVudEhlaWdodDp0cnVlLHVzZXNDb250ZW50V2lkdGg6dHJ1ZSx1c2VzSGVpZ2h0OnRydWUsdXNlc1dpZHRoOnRydWUsYmVnaW5MYXlvdXRDeWNsZTpmdW5jdGlvbihjLHApe3ZhciBrPXRoaXMsYj1rLm93bmVyLGU9Yy5vd25lckN0Q29udGV4dCxnPWMuaGVpZ2h0TW9kZWwsaD1jLndpZHRoTW9kZWwsaT1iLmVsLmRvbT09PWRvY3VtZW50LmJvZHksZD1iLmxhc3RCb3h8fGsubnVsbEJveCxuPWIuZWwubGFzdEJveHx8ay5udWxsQm94LGE9IWksbSxvLGwsajtrLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihwKXtpZihrLnVzZXNDb250ZW50V2lkdGgpeysrYy5jb25zdW1lcnNDb250ZW50V2lkdGh9aWYoay51c2VzQ29udGVudEhlaWdodCl7KytjLmNvbnN1bWVyc0NvbnRlbnRIZWlnaHR9aWYoay51c2VzV2lkdGgpeysrYy5jb25zdW1lcnNXaWR0aH1pZihrLnVzZXNIZWlnaHQpeysrYy5jb25zdW1lcnNIZWlnaHR9aWYoZSYmIWUuaGFzUmF3Q29udGVudCl7bT1iLm93bmVyTGF5b3V0O2lmKG0udXNlc1dpZHRoKXsrK2MuY29uc3VtZXJzV2lkdGh9aWYobS51c2VzSGVpZ2h0KXsrK2MuY29uc3VtZXJzSGVpZ2h0fX19aWYoaC5jb25maWd1cmVkKXtsPWgubmFtZXMud2lkdGg7aWYoIWkpe2E9cD9iW2xdIT09bi53aWR0aDpoLmNvbnN0cmFpbmVkfWMuc2V0V2lkdGgoYltsXSxhKX1lbHNle2lmKGMuaXNUb3BMZXZlbCl7aWYoaC5jYWxjdWxhdGVkKXtvPWQud2lkdGg7Yy5zZXRXaWR0aChvLG8hPW4ud2lkdGgpfW89ZC54O2Muc2V0UHJvcCgieCIsbyxvIT1uLngpfX1pZihnLmNvbmZpZ3VyZWQpe2o9Zy5uYW1lcy5oZWlnaHQ7aWYoIWkpe2E9cD9iW2pdIT09bi5oZWlnaHQ6Zy5jb25zdHJhaW5lZH1jLnNldEhlaWdodChiW2pdLGEpfWVsc2V7aWYoYy5pc1RvcExldmVsKXtpZihnLmNhbGN1bGF0ZWQpe289ZC5oZWlnaHQ7Yy5zZXRIZWlnaHQobyxvIT1uLmhlaWdodCl9bz1kLnk7Yy5zZXRQcm9wKCJ5IixvLG8hPW4ueSl9fX0sZmluaXNoZWRMYXlvdXQ6ZnVuY3Rpb24oYil7dmFyIGg9dGhpcyxsPWIuY2hpbGRyZW4sYT1oLm93bmVyLGUsYyxrLGQsZyxqO2lmKGwpe2U9bC5sZW5ndGg7Zm9yKGM9MDtjPGU7YysrKXtrPWxbY107ay5lbC5sYXN0Qm94PWsucHJvcHN9fWIucHJldmlvdXNTaXplPWgubGFzdENvbXBvbmVudFNpemU7aC5sYXN0Q29tcG9uZW50U2l6ZT1hLmVsLmxhc3RCb3g9Zz1iLnByb3BzO2EubGFzdEJveD1kPXt9O2o9Zy54O2lmKGohPT11bmRlZmluZWQpe2QueD1qfWo9Zy55O2lmKGohPT11bmRlZmluZWQpe2QueT1qfWo9Zy53aWR0aDtpZihqIT09dW5kZWZpbmVkKXtkLndpZHRoPWp9aj1nLmhlaWdodDtpZihqIT09dW5kZWZpbmVkKXtkLmhlaWdodD1qfWguY2FsbFBhcmVudChhcmd1bWVudHMpfSxub3RpZnlPd25lcjpmdW5jdGlvbihkKXt2YXIgYz10aGlzLGE9Yy5sYXN0Q29tcG9uZW50U2l6ZSxlPWQucHJldmlvdXNTaXplLGI9W2Eud2lkdGgsYS5oZWlnaHRdO2lmKGUpe2IucHVzaChlLndpZHRoLGUuaGVpZ2h0KX1jLm93bmVyLmFmdGVyQ29tcG9uZW50TGF5b3V0LmFwcGx5KGMub3duZXIsYil9LGdldFRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm93bmVyLmVsfSxnZXRSZW5kZXJUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25lci5lbH0sY2FjaGVUYXJnZXRJbmZvOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMsZD1hLnRhcmdldEluZm8sYztpZighZCl7Yz1iLmdldEVsKCJnZXRUYXJnZXQiLGEpO2EudGFyZ2V0SW5mbz1kPXtwYWRkaW5nOmMuZ2V0UGFkZGluZ0luZm8oKSxib3JkZXI6Yy5nZXRCb3JkZXJJbmZvKCl9fXJldHVybiBkfSxtZWFzdXJlQXV0b0RpbWVuc2lvbnM6ZnVuY3Rpb24obSxpKXt2YXIgdD10aGlzLGE9dC5vd25lcixxPWEubGF5b3V0LGQ9bS5oZWlnaHRNb2RlbCxoPW0ud2lkdGhNb2RlbCxjPW0uYm94UGFyZW50LG49bS5pc0JveFBhcmVudCxiPW0ucHJvcHMsaix1PXtnb3RXaWR0aDpmYWxzZSxnb3RIZWlnaHQ6ZmFsc2UsaXNDb250YWluZXI6KGo9IW0uaGFzUmF3Q29udGVudCl9LHM9aXx8MyxwLGUsaz0wLGc9MCxsLG8scjtpZihoLnNocmlua1dyYXAmJm0uY29uc3VtZXJzQ29udGVudFdpZHRoKXsrK2s7cD0hKHMmMSk7aWYoail7aWYocCl7dS5jb250ZW50V2lkdGg9MDt1LmdvdFdpZHRoPXRydWU7KytnfWVsc2V7aWYoKHUuY29udGVudFdpZHRoPW0uZ2V0UHJvcCgiY29udGVudFdpZHRoIikpIT09dW5kZWZpbmVkKXt1LmdvdFdpZHRoPXRydWU7KytnfX19ZWxzZXtvPWIuY29udGVudFdpZHRoO2lmKHR5cGVvZiBvPT0ibnVtYmVyIil7dS5jb250ZW50V2lkdGg9bzt1LmdvdFdpZHRoPXRydWU7KytnfWVsc2V7aWYocCl7bD10cnVlfWVsc2V7aWYoIW0uaGFzRG9tUHJvcCgiY29udGFpbmVyQ2hpbGRyZW5Eb25lIikpe2w9ZmFsc2V9ZWxzZXtpZihufHwhY3x8Yy53aWR0aE1vZGVsLnNocmlua1dyYXApe2w9dHJ1ZX1lbHNle2w9Yy5oYXNEb21Qcm9wKCJ3aWR0aCIpfX19aWYobCl7aWYocCl7cj0wfWVsc2V7aWYocSYmcS5tZWFzdXJlQ29udGVudFdpZHRoKXtyPXEubWVhc3VyZUNvbnRlbnRXaWR0aChtKX1lbHNle3I9dC5tZWFzdXJlQ29udGVudFdpZHRoKG0pfX1pZighaXNOYU4odS5jb250ZW50V2lkdGg9cikpe20uc2V0Q29udGVudFdpZHRoKHIsdHJ1ZSk7dS5nb3RXaWR0aD10cnVlOysrZ319fX19ZWxzZXtpZihoLm5hdHVyYWwmJm0uY29uc3VtZXJzV2lkdGgpeysraztvPWIud2lkdGg7aWYodHlwZW9mIG89PSJudW1iZXIiKXt1LndpZHRoPW87dS5nb3RXaWR0aD10cnVlOysrZ31lbHNle2lmKG58fCFjKXtsPXRydWV9ZWxzZXtsPWMuaGFzRG9tUHJvcCgid2lkdGgiKX1pZihsKXtpZighaXNOYU4odS53aWR0aD10Lm1lYXN1cmVPd25lcldpZHRoKG0pKSl7bS5zZXRXaWR0aCh1LndpZHRoLGZhbHNlKTt1LmdvdFdpZHRoPXRydWU7KytnfX19fX1pZihkLnNocmlua1dyYXAmJm0uY29uc3VtZXJzQ29udGVudEhlaWdodCl7KytrO2U9IShzJjIpO2lmKGope2lmKGUpe3UuY29udGVudEhlaWdodD0wO3UuZ290SGVpZ2h0PXRydWU7KytnfWVsc2V7aWYoKHUuY29udGVudEhlaWdodD1tLmdldFByb3AoImNvbnRlbnRIZWlnaHQiKSkhPT11bmRlZmluZWQpe3UuZ290SGVpZ2h0PXRydWU7KytnfX19ZWxzZXtvPWIuY29udGVudEhlaWdodDtpZih0eXBlb2Ygbz09Im51bWJlciIpe3UuY29udGVudEhlaWdodD1vO3UuZ290SGVpZ2h0PXRydWU7KytnfWVsc2V7aWYoZSl7bD10cnVlfWVsc2V7aWYoIW0uaGFzRG9tUHJvcCgiY29udGFpbmVyQ2hpbGRyZW5Eb25lIikpe2w9ZmFsc2V9ZWxzZXtpZihhLm5vV3JhcCl7bD10cnVlfWVsc2V7aWYoIWguc2hyaW5rV3JhcCl7bD0obS5ib2R5Q29udGV4dHx8bSkuaGFzRG9tUHJvcCgid2lkdGgiKX1lbHNle2lmKG58fCFjfHxjLndpZHRoTW9kZWwuc2hyaW5rV3JhcCl7bD10cnVlfWVsc2V7bD1jLmhhc0RvbVByb3AoIndpZHRoIil9fX19fWlmKGwpe2lmKGUpe3I9MH1lbHNle2lmKHEmJnEubWVhc3VyZUNvbnRlbnRIZWlnaHQpe3I9cS5tZWFzdXJlQ29udGVudEhlaWdodChtKX1lbHNle3I9dC5tZWFzdXJlQ29udGVudEhlaWdodChtKX19aWYoIWlzTmFOKHUuY29udGVudEhlaWdodD1yKSl7bS5zZXRDb250ZW50SGVpZ2h0KHIsdHJ1ZSk7dS5nb3RIZWlnaHQ9dHJ1ZTsrK2d9fX19fWVsc2V7aWYoZC5uYXR1cmFsJiZtLmNvbnN1bWVyc0hlaWdodCl7KytrO289Yi5oZWlnaHQ7aWYodHlwZW9mIG89PSJudW1iZXIiKXt1LmhlaWdodD1vO3UuZ290SGVpZ2h0PXRydWU7KytnfWVsc2V7aWYobnx8IWMpe2w9dHJ1ZX1lbHNle2w9Yy5oYXNEb21Qcm9wKCJ3aWR0aCIpfWlmKGwpe2lmKCFpc05hTih1LmhlaWdodD10Lm1lYXN1cmVPd25lckhlaWdodChtKSkpe20uc2V0SGVpZ2h0KHUuaGVpZ2h0LGZhbHNlKTt1LmdvdEhlaWdodD10cnVlOysrZ319fX19aWYoYyl7bS5vbkJveE1lYXN1cmVkKCl9dS5nb3RBbGw9Zz09aztyZXR1cm4gdX0sbWVhc3VyZUNvbnRlbnRXaWR0aDpmdW5jdGlvbihhKXtyZXR1cm4gYS5lbC5nZXRXaWR0aCgpLWEuZ2V0RnJhbWVJbmZvKCkud2lkdGh9LG1lYXN1cmVDb250ZW50SGVpZ2h0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmVsLmdldEhlaWdodCgpLWEuZ2V0RnJhbWVJbmZvKCkuaGVpZ2h0fSxtZWFzdXJlT3duZXJIZWlnaHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZWwuZ2V0SGVpZ2h0KCl9LG1lYXN1cmVPd25lcldpZHRoOmZ1bmN0aW9uKGEpe3JldHVybiBhLmVsLmdldFdpZHRoKCl9fSk7RXh0LmRlZmluZSgiRXh0LmxheW91dC5jb21wb25lbnQuQXV0byIse2FsaWFzOiJsYXlvdXQuYXV0b2NvbXBvbmVudCIsZXh0ZW5kOiJFeHQubGF5b3V0LmNvbXBvbmVudC5Db21wb25lbnQiLHR5cGU6ImF1dG9jb21wb25lbnQiLHNldEhlaWdodEluRG9tOmZhbHNlLHNldFdpZHRoSW5Eb206ZmFsc2Usd2FpdEZvck91dGVySGVpZ2h0SW5Eb206ZmFsc2Usd2FpdEZvck91dGVyV2lkdGhJbkRvbTpmYWxzZSxiZWdpbkxheW91dEN5Y2xlOmZ1bmN0aW9uKGQsYil7dmFyIGM9dGhpcyxnPWMubGFzdFdpZHRoTW9kZWwsZT1jLmxhc3RIZWlnaHRNb2RlbCxhPWMub3duZXI7Yy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoZyYmZy5maXhlZCYmZC53aWR0aE1vZGVsLnNocmlua1dyYXApe2EuZWwuc2V0V2lkdGgobnVsbCl9aWYoZSYmZS5maXhlZCYmZC5oZWlnaHRNb2RlbC5zaHJpbmtXcmFwKXthLmVsLnNldEhlaWdodChudWxsKX19LGNhbGN1bGF0ZTpmdW5jdGlvbihoKXt2YXIgZz10aGlzLGU9Zy5tZWFzdXJlQXV0b0RpbWVuc2lvbnMoaCksYj1oLmhlaWdodE1vZGVsLGM9aC53aWR0aE1vZGVsLGQsYTtpZihlLmdvdFdpZHRoKXtpZihjLnNocmlua1dyYXApe2cucHVibGlzaE93bmVyV2lkdGgoaCxlLmNvbnRlbnRXaWR0aCl9ZWxzZXtpZihnLnB1Ymxpc2hJbm5lcldpZHRoKXtnLnB1Ymxpc2hJbm5lcldpZHRoKGgsZS53aWR0aCl9fX1lbHNle2lmKCFjLmF1dG8mJmcucHVibGlzaElubmVyV2lkdGgpe2Q9Zy53YWl0Rm9yT3V0ZXJXaWR0aEluRG9tP2guZ2V0RG9tUHJvcCgid2lkdGgiKTpoLmdldFByb3AoIndpZHRoIik7aWYoZD09PXVuZGVmaW5lZCl7Zy5kb25lPWZhbHNlfWVsc2V7Zy5wdWJsaXNoSW5uZXJXaWR0aChoLGQpfX19aWYoZS5nb3RIZWlnaHQpe2lmKGIuc2hyaW5rV3JhcCl7Zy5wdWJsaXNoT3duZXJIZWlnaHQoaCxlLmNvbnRlbnRIZWlnaHQpfWVsc2V7aWYoZy5wdWJsaXNoSW5uZXJIZWlnaHQpe2cucHVibGlzaElubmVySGVpZ2h0KGgsZS5oZWlnaHQpfX19ZWxzZXtpZighYi5hdXRvJiZnLnB1Ymxpc2hJbm5lckhlaWdodCl7YT1nLndhaXRGb3JPdXRlckhlaWdodEluRG9tP2guZ2V0RG9tUHJvcCgiaGVpZ2h0Iik6aC5nZXRQcm9wKCJoZWlnaHQiKTtpZihhPT09dW5kZWZpbmVkKXtnLmRvbmU9ZmFsc2V9ZWxzZXtnLnB1Ymxpc2hJbm5lckhlaWdodChoLGEpfX19aWYoIWUuZ290QWxsKXtnLmRvbmU9ZmFsc2V9fSxjYWxjdWxhdGVPd25lckhlaWdodEZyb21Db250ZW50SGVpZ2h0OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIGErYi5nZXRGcmFtZUluZm8oKS5oZWlnaHR9LGNhbGN1bGF0ZU93bmVyV2lkdGhGcm9tQ29udGVudFdpZHRoOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIGErYi5nZXRGcmFtZUluZm8oKS53aWR0aH0scHVibGlzaE93bmVySGVpZ2h0OmZ1bmN0aW9uKGksZyl7dmFyIGU9dGhpcyxiPWUub3duZXIsYT1lLmNhbGN1bGF0ZU93bmVySGVpZ2h0RnJvbUNvbnRlbnRIZWlnaHQoaSxnKSxoLGQsYztpZihpc05hTihhKSl7ZS5kb25lPWZhbHNlfWVsc2V7aD1FeHQuTnVtYmVyLmNvbnN0cmFpbihhLGIubWluSGVpZ2h0LGIubWF4SGVpZ2h0KTtpZihoPT1hKXtkPWUuc2V0SGVpZ2h0SW5Eb219ZWxzZXtjPWUuc2l6ZU1vZGVsc1soaDxhKT8iY29uc3RyYWluZWRNYXgiOiJjb25zdHJhaW5lZE1pbiJdO2E9aDtpZihpLmhlaWdodE1vZGVsLmNhbGN1bGF0ZWRGcm9tU2hyaW5rV3JhcCl7aS5oZWlnaHRNb2RlbD1jfWVsc2V7aS5pbnZhbGlkYXRlKHtoZWlnaHRNb2RlbDpjfSl9fWkuc2V0SGVpZ2h0KGEsZCl9fSxwdWJsaXNoT3duZXJXaWR0aDpmdW5jdGlvbihoLGIpe3ZhciBnPXRoaXMsYT1nLm93bmVyLGU9Zy5jYWxjdWxhdGVPd25lcldpZHRoRnJvbUNvbnRlbnRXaWR0aChoLGIpLGksZCxjO2lmKGlzTmFOKGUpKXtnLmRvbmU9ZmFsc2V9ZWxzZXtpPUV4dC5OdW1iZXIuY29uc3RyYWluKGUsYS5taW5XaWR0aCxhLm1heFdpZHRoKTtpZihpPT1lKXtkPWcuc2V0V2lkdGhJbkRvbX1lbHNle2M9Zy5zaXplTW9kZWxzWyhpPGUpPyJjb25zdHJhaW5lZE1heCI6ImNvbnN0cmFpbmVkTWluIl07ZT1pO2lmKGgud2lkdGhNb2RlbC5jYWxjdWxhdGVkRnJvbVNocmlua1dyYXApe2gud2lkdGhNb2RlbD1jfWVsc2V7aC5pbnZhbGlkYXRlKHt3aWR0aE1vZGVsOmN9KX19aC5zZXRXaWR0aChlLGQpfX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbnRhaW5lci5BdXRvIix7YWxpYXM6WyJsYXlvdXQuYXV0byIsImxheW91dC5hdXRvY29udGFpbmVyIl0sZXh0ZW5kOiJFeHQubGF5b3V0LmNvbnRhaW5lci5Db250YWluZXIiLHR5cGU6ImF1dG9jb250YWluZXIiLGNoaWxkRWxzOlsiY2xlYXJFbCJdLHJlbmRlclRwbDpbInsldGhpcy5yZW5kZXJCb2R5KG91dCx2YWx1ZXMpJX0iLCc8ZGl2IGlkPSJ7b3duZXJJZH0tY2xlYXJFbCIgY2xhc3M9IicsRXh0LmJhc2VDU1NQcmVmaXgsJ2NsZWFyIiByb2xlPSJwcmVzZW50YXRpb24iPjwvZGl2PiddLGNhbGN1bGF0ZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzLGM7aWYoIWIuaGFzRG9tUHJvcCgiY29udGFpbmVyQ2hpbGRyZW5Eb25lIikpe2EuZG9uZT1mYWxzZX1lbHNle2M9YS5nZXRDb250YWluZXJTaXplKGIpO2lmKCFjLmdvdEFsbCl7YS5kb25lPWZhbHNlfWEuY2FsY3VsYXRlQ29udGVudFNpemUoYil9fX0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLkZpbHRlciIse2FueU1hdGNoOmZhbHNlLGV4YWN0TWF0Y2g6ZmFsc2UsY2FzZVNlbnNpdGl2ZTpmYWxzZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO0V4dC5hcHBseShiLGEpO2IuZmlsdGVyPWIuZmlsdGVyfHxiLmZpbHRlckZuO2lmKGIuZmlsdGVyPT09dW5kZWZpbmVkKXtpZihiLnByb3BlcnR5PT09dW5kZWZpbmVkfHxiLnZhbHVlPT09dW5kZWZpbmVkKXt9ZWxzZXtiLmZpbHRlcj1iLmNyZWF0ZUZpbHRlckZuKCl9Yi5maWx0ZXJGbj1iLmZpbHRlcn19LGNyZWF0ZUZpbHRlckZuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxjPWEuY3JlYXRlVmFsdWVNYXRjaGVyKCksYj1hLnByb3BlcnR5O3JldHVybiBmdW5jdGlvbihkKXt2YXIgZT1hLmdldFJvb3QuY2FsbChhLGQpW2JdO3JldHVybiBjPT09bnVsbD9lPT09bnVsbDpjLnRlc3QoZSl9fSxnZXRSb290OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMucm9vdDtyZXR1cm4gYT09PXVuZGVmaW5lZD9iOmJbYV19LGNyZWF0ZVZhbHVlTWF0Y2hlcjpmdW5jdGlvbigpe3ZhciBkPXRoaXMsZT1kLnZhbHVlLGc9ZC5hbnlNYXRjaCxjPWQuZXhhY3RNYXRjaCxhPWQuY2FzZVNlbnNpdGl2ZSxiPUV4dC5TdHJpbmcuZXNjYXBlUmVnZXg7aWYoZT09PW51bGwpe3JldHVybiBlfWlmKCFlLmV4ZWMpe2U9U3RyaW5nKGUpO2lmKGc9PT10cnVlKXtlPWIoZSl9ZWxzZXtlPSJeIitiKGUpO2lmKGM9PT10cnVlKXtlKz0iJCJ9fWU9bmV3IFJlZ0V4cChlLGE/IiI6ImkiKX1yZXR1cm4gZX19KTtFeHQuZGVmaW5lKCJFeHQudXRpbC5BYnN0cmFjdE1peGVkQ29sbGVjdGlvbiIse3JlcXVpcmVzOlsiRXh0LnV0aWwuRmlsdGVyIl0sbWl4aW5zOntvYnNlcnZhYmxlOiJFeHQudXRpbC5PYnNlcnZhYmxlIn0saXNNaXhlZENvbGxlY3Rpb246dHJ1ZSxnZW5lcmF0aW9uOjAsY29uc3RydWN0b3I6ZnVuY3Rpb24oYixhKXt2YXIgYz10aGlzO2MuaXRlbXM9W107Yy5tYXA9e307Yy5rZXlzPVtdO2MubGVuZ3RoPTA7Yy5hbGxvd0Z1bmN0aW9ucz1iPT09dHJ1ZTtpZihhKXtjLmdldEtleT1hfWMubWl4aW5zLm9ic2VydmFibGUuY29uc3RydWN0b3IuY2FsbChjKX0sYWxsb3dGdW5jdGlvbnM6ZmFsc2UsYWRkOmZ1bmN0aW9uKGIsZSl7dmFyIGQ9dGhpcyxnPWUsYz1iLGE7aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7Zz1jO2M9ZC5nZXRLZXkoZyl9aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiJiZjIT09bnVsbCl7YT1kLm1hcFtjXTtpZih0eXBlb2YgYSE9InVuZGVmaW5lZCIpe3JldHVybiBkLnJlcGxhY2UoYyxnKX1kLm1hcFtjXT1nfWQuZ2VuZXJhdGlvbisrO2QubGVuZ3RoKys7ZC5pdGVtcy5wdXNoKGcpO2Qua2V5cy5wdXNoKGMpO2lmKGQuaGFzTGlzdGVuZXJzLmFkZCl7ZC5maXJlRXZlbnQoImFkZCIsZC5sZW5ndGgtMSxnLGMpfXJldHVybiBnfSxnZXRLZXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaWR9LHJlcGxhY2U6ZnVuY3Rpb24oYyxlKXt2YXIgZD10aGlzLGEsYjtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXtlPWFyZ3VtZW50c1swXTtjPWQuZ2V0S2V5KGUpfWE9ZC5tYXBbY107aWYodHlwZW9mIGM9PSJ1bmRlZmluZWQifHxjPT09bnVsbHx8dHlwZW9mIGE9PSJ1bmRlZmluZWQiKXtyZXR1cm4gZC5hZGQoYyxlKX1kLmdlbmVyYXRpb24rKztiPWQuaW5kZXhPZktleShjKTtkLml0ZW1zW2JdPWU7ZC5tYXBbY109ZTtpZihkLmhhc0xpc3RlbmVycy5yZXBsYWNlKXtkLmZpcmVFdmVudCgicmVwbGFjZSIsYyxhLGUpfXJldHVybiBlfSxhZGRBbGw6ZnVuY3Rpb24oZyl7dmFyIGU9dGhpcyxkPTAsYixhLGM7aWYoYXJndW1lbnRzLmxlbmd0aD4xfHxFeHQuaXNBcnJheShnKSl7Yj1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzOmc7Zm9yKGE9Yi5sZW5ndGg7ZDxhO2QrKyl7ZS5hZGQoYltkXSl9fWVsc2V7Zm9yKGMgaW4gZyl7aWYoZy5oYXNPd25Qcm9wZXJ0eShjKSl7aWYoZS5hbGxvd0Z1bmN0aW9uc3x8dHlwZW9mIGdbY10hPSJmdW5jdGlvbiIpe2UuYWRkKGMsZ1tjXSl9fX19fSxlYWNoOmZ1bmN0aW9uKGUsZCl7dmFyIGI9W10uY29uY2F0KHRoaXMuaXRlbXMpLGM9MCxhPWIubGVuZ3RoLGc7Zm9yKDtjPGE7YysrKXtnPWJbY107aWYoZS5jYWxsKGR8fGcsZyxjLGEpPT09ZmFsc2Upe2JyZWFrfX19LGVhY2hLZXk6ZnVuY3Rpb24oZSxkKXt2YXIgZz10aGlzLmtleXMsYj10aGlzLml0ZW1zLGM9MCxhPWcubGVuZ3RoO2Zvcig7YzxhO2MrKyl7ZS5jYWxsKGR8fHdpbmRvdyxnW2NdLGJbY10sYyxhKX19LGZpbmRCeTpmdW5jdGlvbihlLGQpe3ZhciBnPXRoaXMua2V5cyxiPXRoaXMuaXRlbXMsYz0wLGE9Yi5sZW5ndGg7Zm9yKDtjPGE7YysrKXtpZihlLmNhbGwoZHx8d2luZG93LGJbY10sZ1tjXSkpe3JldHVybiBiW2NdfX1yZXR1cm4gbnVsbH0sZmluZDpmdW5jdGlvbigpe2lmKEV4dC5pc0RlZmluZWQoRXh0Lmdsb2JhbC5jb25zb2xlKSl7RXh0Lmdsb2JhbC5jb25zb2xlLndhcm4oIkV4dC51dGlsLk1peGVkQ29sbGVjdGlvbjogZmluZCBoYXMgYmVlbiBkZXByZWNhdGVkLiBVc2UgZmluZEJ5IGluc3RlYWQuIil9cmV0dXJuIHRoaXMuZmluZEJ5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saW5zZXJ0OmZ1bmN0aW9uKGEsYixlKXt2YXIgZD10aGlzLGM9YixnPWU7aWYoYXJndW1lbnRzLmxlbmd0aD09Mil7Zz1jO2M9ZC5nZXRLZXkoZyl9aWYoZC5jb250YWluc0tleShjKSl7ZC5zdXNwZW5kRXZlbnRzKCk7ZC5yZW1vdmVBdEtleShjKTtkLnJlc3VtZUV2ZW50cygpfWlmKGE+PWQubGVuZ3RoKXtyZXR1cm4gZC5hZGQoYyxnKX1kLmdlbmVyYXRpb24rKztkLmxlbmd0aCsrO0V4dC5BcnJheS5zcGxpY2UoZC5pdGVtcyxhLDAsZyk7aWYodHlwZW9mIGMhPSJ1bmRlZmluZWQiJiZjIT09bnVsbCl7ZC5tYXBbY109Z31FeHQuQXJyYXkuc3BsaWNlKGQua2V5cyxhLDAsYyk7aWYoZC5oYXNMaXN0ZW5lcnMuYWRkKXtkLmZpcmVFdmVudCgiYWRkIixhLGcsYyl9cmV0dXJuIGd9LHJlbW92ZTpmdW5jdGlvbihhKXt0aGlzLmdlbmVyYXRpb24rKztyZXR1cm4gdGhpcy5yZW1vdmVBdCh0aGlzLmluZGV4T2YoYSkpfSxyZW1vdmVBbGw6ZnVuY3Rpb24oYil7Yj1bXS5jb25jYXQoYik7dmFyIGMsYT1iLmxlbmd0aDtmb3IoYz0wO2M8YTtjKyspe3RoaXMucmVtb3ZlKGJbY10pfXJldHVybiB0aGlzfSxyZW1vdmVBdDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGQsYjtpZihhPGMubGVuZ3RoJiZhPj0wKXtjLmxlbmd0aC0tO2Q9Yy5pdGVtc1thXTtFeHQuQXJyYXkuZXJhc2UoYy5pdGVtcyxhLDEpO2I9Yy5rZXlzW2FdO2lmKHR5cGVvZiBiIT0idW5kZWZpbmVkIil7ZGVsZXRlIGMubWFwW2JdfUV4dC5BcnJheS5lcmFzZShjLmtleXMsYSwxKTtpZihjLmhhc0xpc3RlbmVycy5yZW1vdmUpe2MuZmlyZUV2ZW50KCJyZW1vdmUiLGQsYil9Yy5nZW5lcmF0aW9uKys7cmV0dXJuIGR9cmV0dXJuIGZhbHNlfSxyZW1vdmVBdEtleTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZW1vdmVBdCh0aGlzLmluZGV4T2ZLZXkoYSkpfSxnZXRDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0saW5kZXhPZjpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LkFycmF5LmluZGV4T2YodGhpcy5pdGVtcyxhKX0saW5kZXhPZktleTpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LkFycmF5LmluZGV4T2YodGhpcy5rZXlzLGEpfSxnZXQ6ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcyxhPWQubWFwW2JdLGM9YSE9PXVuZGVmaW5lZD9hOih0eXBlb2YgYj09Im51bWJlciIpP2QuaXRlbXNbYl06dW5kZWZpbmVkO3JldHVybiB0eXBlb2YgYyE9ImZ1bmN0aW9uInx8ZC5hbGxvd0Z1bmN0aW9ucz9jOm51bGx9LGdldEF0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLml0ZW1zW2FdfSxnZXRCeUtleTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXBbYV19LGNvbnRhaW5zOmZ1bmN0aW9uKGEpe3JldHVybiB0eXBlb2YgdGhpcy5tYXBbdGhpcy5nZXRLZXkoYSldIT0idW5kZWZpbmVkIn0sY29udGFpbnNLZXk6ZnVuY3Rpb24oYSl7cmV0dXJuIHR5cGVvZiB0aGlzLm1hcFthXSE9InVuZGVmaW5lZCJ9LGNsZWFyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmxlbmd0aD0wO2EuaXRlbXM9W107YS5rZXlzPVtdO2EubWFwPXt9O2EuZ2VuZXJhdGlvbisrO2lmKGEuaGFzTGlzdGVuZXJzLmNsZWFyKXthLmZpcmVFdmVudCgiY2xlYXIiKX19LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbXNbMF19LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVtc1t0aGlzLmxlbmd0aC0xXX0sc3VtOmZ1bmN0aW9uKGgsYixqLGEpe3ZhciBjPXRoaXMuZXh0cmFjdFZhbHVlcyhoLGIpLGc9Yy5sZW5ndGgsZT0wLGQ7aj1qfHwwO2E9KGF8fGE9PT0wKT9hOmctMTtmb3IoZD1qO2Q8PWE7ZCsrKXtlKz1jW2RdfXJldHVybiBlfSxjb2xsZWN0OmZ1bmN0aW9uKGssZSxoKXt2YXIgbD10aGlzLmV4dHJhY3RWYWx1ZXMoayxlKSxhPWwubGVuZ3RoLGI9e30sYz1bXSxqLGcsZDtmb3IoZD0wO2Q8YTtkKyspe2o9bFtkXTtnPVN0cmluZyhqKTtpZigoaHx8IUV4dC5pc0VtcHR5KGopKSYmIWJbZ10pe2JbZ109dHJ1ZTtjLnB1c2goail9fXJldHVybiBjfSxleHRyYWN0VmFsdWVzOmZ1bmN0aW9uKGMsYSl7dmFyIGI9dGhpcy5pdGVtcztpZihhKXtiPUV4dC5BcnJheS5wbHVjayhiLGEpfXJldHVybiBFeHQuQXJyYXkucGx1Y2soYixjKX0sZ2V0UmFuZ2U6ZnVuY3Rpb24oZyxhKXt2YXIgZT10aGlzLGM9ZS5pdGVtcyxiPVtdLGQ7aWYoYy5sZW5ndGg8MSl7cmV0dXJuIGJ9Zz1nfHwwO2E9TWF0aC5taW4odHlwZW9mIGE9PSJ1bmRlZmluZWQiP2UubGVuZ3RoLTE6YSxlLmxlbmd0aC0xKTtpZihnPD1hKXtmb3IoZD1nO2Q8PWE7ZCsrKXtiW2IubGVuZ3RoXT1jW2RdfX1lbHNle2ZvcihkPWc7ZD49YTtkLS0pe2JbYi5sZW5ndGhdPWNbZF19fXJldHVybiBifSxmaWx0ZXI6ZnVuY3Rpb24oZCxjLGcsYSl7dmFyIGI9W10sZTtpZihFeHQuaXNTdHJpbmcoZCkpe2IucHVzaChuZXcgRXh0LnV0aWwuRmlsdGVyKHtwcm9wZXJ0eTpkLHZhbHVlOmMsYW55TWF0Y2g6ZyxjYXNlU2Vuc2l0aXZlOmF9KSl9ZWxzZXtpZihFeHQuaXNBcnJheShkKXx8ZCBpbnN0YW5jZW9mIEV4dC51dGlsLkZpbHRlcil7Yj1iLmNvbmNhdChkKX19ZT1mdW5jdGlvbihoKXt2YXIgbj10cnVlLG89Yi5sZW5ndGgsaixtLGwsaztmb3Ioaj0wO2o8bztqKyspe209YltqXTtsPW0uZmlsdGVyRm47az1tLnNjb3BlO249biYmbC5jYWxsKGssaCl9cmV0dXJuIG59O3JldHVybiB0aGlzLmZpbHRlckJ5KGUpfSxmaWx0ZXJCeTpmdW5jdGlvbihlLGQpe3ZhciBqPXRoaXMsYT1uZXcgdGhpcy5zZWxmKCksaD1qLmtleXMsYj1qLml0ZW1zLGc9Yi5sZW5ndGgsYzthLmdldEtleT1qLmdldEtleTtmb3IoYz0wO2M8ZztjKyspe2lmKGUuY2FsbChkfHxqLGJbY10saFtjXSkpe2EuYWRkKGhbY10sYltjXSl9fXJldHVybiBhfSxmaW5kSW5kZXg6ZnVuY3Rpb24oYyxiLGUsZCxhKXtpZihFeHQuaXNFbXB0eShiLGZhbHNlKSl7cmV0dXJuIC0xfWI9dGhpcy5jcmVhdGVWYWx1ZU1hdGNoZXIoYixkLGEpO3JldHVybiB0aGlzLmZpbmRJbmRleEJ5KGZ1bmN0aW9uKGcpe3JldHVybiBnJiZiLnRlc3QoZ1tjXSl9LG51bGwsZSl9LGZpbmRJbmRleEJ5OmZ1bmN0aW9uKGUsZCxqKXt2YXIgaD10aGlzLGc9aC5rZXlzLGI9aC5pdGVtcyxjPWp8fDAsYT1iLmxlbmd0aDtmb3IoO2M8YTtjKyspe2lmKGUuY2FsbChkfHxoLGJbY10sZ1tjXSkpe3JldHVybiBjfX1yZXR1cm4gLTF9LGNyZWF0ZVZhbHVlTWF0Y2hlcjpmdW5jdGlvbihjLGUsYSxiKXtpZighYy5leGVjKXt2YXIgZD1FeHQuU3RyaW5nLmVzY2FwZVJlZ2V4O2M9U3RyaW5nKGMpO2lmKGU9PT10cnVlKXtjPWQoYyl9ZWxzZXtjPSJeIitkKGMpO2lmKGI9PT10cnVlKXtjKz0iJCJ9fWM9bmV3IFJlZ0V4cChjLGE/IiI6ImkiKX1yZXR1cm4gY30sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGc9bmV3IHRoaXMuc2VsZigpLGQ9ZS5rZXlzLGI9ZS5pdGVtcyxjPTAsYT1iLmxlbmd0aDtmb3IoO2M8YTtjKyspe2cuYWRkKGRbY10sYltjXSl9Zy5nZXRLZXk9ZS5nZXRLZXk7cmV0dXJuIGd9fSk7RXh0LmRlZmluZSgiRXh0LnV0aWwuU29ydGVyIix7ZGlyZWN0aW9uOiJBU0MiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7RXh0LmFwcGx5KGIsYSk7Yi51cGRhdGVTb3J0RnVuY3Rpb24oKX0sY3JlYXRlU29ydEZ1bmN0aW9uOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMsZD1jLnByb3BlcnR5LGU9Yy5kaXJlY3Rpb258fCJBU0MiLGE9ZS50b1VwcGVyQ2FzZSgpPT0iREVTQyI/LTE6MTtyZXR1cm4gZnVuY3Rpb24oaCxnKXtyZXR1cm4gYSpiLmNhbGwoYyxoLGcpfX0sZGVmYXVsdFNvcnRlckZuOmZ1bmN0aW9uKGQsYyl7dmFyIGI9dGhpcyxhPWIudHJhbnNmb3JtLGc9Yi5nZXRSb290KGQpW2IucHJvcGVydHldLGU9Yi5nZXRSb290KGMpW2IucHJvcGVydHldO2lmKGEpe2c9YShnKTtlPWEoZSl9cmV0dXJuIGc+ZT8xOihnPGU/LTE6MCl9LGdldFJvb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucm9vdD09PXVuZGVmaW5lZD9hOmFbdGhpcy5yb290XX0sc2V0RGlyZWN0aW9uOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5kaXJlY3Rpb249Yj9iLnRvVXBwZXJDYXNlKCk6YjthLnVwZGF0ZVNvcnRGdW5jdGlvbigpfSx0b2dnbGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuZGlyZWN0aW9uPUV4dC5TdHJpbmcudG9nZ2xlKGEuZGlyZWN0aW9uLCJBU0MiLCJERVNDIik7YS51cGRhdGVTb3J0RnVuY3Rpb24oKX0sdXBkYXRlU29ydEZ1bmN0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YT1hfHxiLnNvcnRlckZufHxiLmRlZmF1bHRTb3J0ZXJGbjtiLnNvcnQ9Yi5jcmVhdGVTb3J0RnVuY3Rpb24oYSl9fSk7RXh0LmRlZmluZSgiRXh0LnV0aWwuU29ydGFibGUiLHtpc1NvcnRhYmxlOnRydWUsZGVmYXVsdFNvcnREaXJlY3Rpb246IkFTQyIscmVxdWlyZXM6WyJFeHQudXRpbC5Tb3J0ZXIiXSxpbml0U29ydGFibGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5zb3J0ZXJzO2Euc29ydGVycz1uZXcgRXh0LnV0aWwuQWJzdHJhY3RNaXhlZENvbGxlY3Rpb24oZmFsc2UsZnVuY3Rpb24oYyl7cmV0dXJuIGMuaWR8fGMucHJvcGVydHl9KTtpZihiKXthLnNvcnRlcnMuYWRkQWxsKGEuZGVjb2RlU29ydGVycyhiKSl9fSxzb3J0OmZ1bmN0aW9uKGgsZyxjLGUpe3ZhciBkPXRoaXMsaSxiLGE7aWYoRXh0LmlzQXJyYXkoaCkpe2U9YztjPWc7YT1ofWVsc2V7aWYoRXh0LmlzT2JqZWN0KGgpKXtlPWM7Yz1nO2E9W2hdfWVsc2V7aWYoRXh0LmlzU3RyaW5nKGgpKXtpPWQuc29ydGVycy5nZXQoaCk7aWYoIWkpe2k9e3Byb3BlcnR5OmgsZGlyZWN0aW9uOmd9O2E9W2ldfWVsc2V7aWYoZz09PXVuZGVmaW5lZCl7aS50b2dnbGUoKX1lbHNle2kuc2V0RGlyZWN0aW9uKGcpfX19fX1pZihhJiZhLmxlbmd0aCl7YT1kLmRlY29kZVNvcnRlcnMoYSk7aWYoRXh0LmlzU3RyaW5nKGMpKXtpZihjPT09InByZXBlbmQiKXtoPWQuc29ydGVycy5jbG9uZSgpLml0ZW1zO2Quc29ydGVycy5jbGVhcigpO2Quc29ydGVycy5hZGRBbGwoYSk7ZC5zb3J0ZXJzLmFkZEFsbChoKX1lbHNle2Quc29ydGVycy5hZGRBbGwoYSl9fWVsc2V7ZC5zb3J0ZXJzLmNsZWFyKCk7ZC5zb3J0ZXJzLmFkZEFsbChhKX19aWYoZSE9PWZhbHNlKXtkLm9uQmVmb3JlU29ydChhKTtoPWQuc29ydGVycy5pdGVtcztpZihoLmxlbmd0aCl7ZC5kb1NvcnQoZC5nZW5lcmF0ZUNvbXBhcmF0b3IoKSl9fXJldHVybiBofSxnZW5lcmF0ZUNvbXBhcmF0b3I6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNvcnRlcnMuZ2V0UmFuZ2UoKTtyZXR1cm4gYS5sZW5ndGg/dGhpcy5jcmVhdGVDb21wYXJhdG9yKGEpOnRoaXMuZW1wdHlDb21wYXJhdG9yfSxjcmVhdGVDb21wYXJhdG9yOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihkLGMpe3ZhciBiPWFbMF0uc29ydChkLGMpLGc9YS5sZW5ndGgsZT0xO2Zvcig7ZTxnO2UrKyl7Yj1ifHxhW2VdLnNvcnQuY2FsbCh0aGlzLGQsYyl9cmV0dXJuIGJ9fSxlbXB0eUNvbXBhcmF0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gMH0sb25CZWZvcmVTb3J0OkV4dC5lbXB0eUZuLGRlY29kZVNvcnRlcnM6ZnVuY3Rpb24oZyl7aWYoIUV4dC5pc0FycmF5KGcpKXtpZihnPT09dW5kZWZpbmVkKXtnPVtdfWVsc2V7Zz1bZ119fXZhciBkPWcubGVuZ3RoLGg9RXh0LnV0aWwuU29ydGVyLGE9dGhpcy5tb2RlbD90aGlzLm1vZGVsLnByb3RvdHlwZS5maWVsZHM6bnVsbCxlLGIsYztmb3IoYz0wO2M8ZDtjKyspe2I9Z1tjXTtpZighKGIgaW5zdGFuY2VvZiBoKSl7aWYoRXh0LmlzU3RyaW5nKGIpKXtiPXtwcm9wZXJ0eTpifX1FeHQuYXBwbHlJZihiLHtyb290OnRoaXMuc29ydFJvb3QsZGlyZWN0aW9uOiJBU0MifSk7aWYoYi5mbil7Yi5zb3J0ZXJGbj1iLmZufWlmKHR5cGVvZiBiPT0iZnVuY3Rpb24iKXtiPXtzb3J0ZXJGbjpifX1pZihhJiYhYi50cmFuc2Zvcm0pe2U9YS5nZXQoYi5wcm9wZXJ0eSk7Yi50cmFuc2Zvcm09ZT9lLnNvcnRUeXBlOnVuZGVmaW5lZH1nW2NdPW5ldyBFeHQudXRpbC5Tb3J0ZXIoYil9fXJldHVybiBnfSxnZXRTb3J0ZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc29ydGVycy5pdGVtc30sZ2V0Rmlyc3RTb3J0ZXI6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLnNvcnRlcnMuaXRlbXMsYT1jLmxlbmd0aCxiPTAsZDtmb3IoO2I8YTsrK2Ipe2Q9Y1tiXTtpZighZC5pc0dyb3VwZXIpe3JldHVybiBkfX1yZXR1cm4gbnVsbH19KTtFeHQuZGVmaW5lKCJFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24iLHtleHRlbmQ6IkV4dC51dGlsLkFic3RyYWN0TWl4ZWRDb2xsZWN0aW9uIixtaXhpbnM6e3NvcnRhYmxlOiJFeHQudXRpbC5Tb3J0YWJsZSJ9LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLmFkZEV2ZW50cygic29ydCIpO2EubWl4aW5zLnNvcnRhYmxlLmluaXRTb3J0YWJsZS5jYWxsKGEpfSxkb1NvcnQ6ZnVuY3Rpb24oYSl7dGhpcy5zb3J0QnkoYSl9LF9zb3J0OmZ1bmN0aW9uKGwsYSxrKXt2YXIgaj10aGlzLGQsZSxiPVN0cmluZyhhKS50b1VwcGVyQ2FzZSgpPT0iREVTQyI/LTE6MSxoPVtdLG09ai5rZXlzLGc9ai5pdGVtcztrPWt8fGZ1bmN0aW9uKGksYyl7cmV0dXJuIGktY307Zm9yKGQ9MCxlPWcubGVuZ3RoO2Q8ZTtkKyspe2hbaC5sZW5ndGhdPXtrZXk6bVtkXSx2YWx1ZTpnW2RdLGluZGV4OmR9fUV4dC5BcnJheS5zb3J0KGgsZnVuY3Rpb24oaSxjKXt2YXIgbj1rKGlbbF0sY1tsXSkqYjtpZihuPT09MCl7bj0oaS5pbmRleDxjLmluZGV4Py0xOjEpfXJldHVybiBufSk7Zm9yKGQ9MCxlPWgubGVuZ3RoO2Q8ZTtkKyspe2dbZF09aFtkXS52YWx1ZTttW2RdPWhbZF0ua2V5fWouZmlyZUV2ZW50KCJzb3J0IixqKX0sc29ydEJ5OmZ1bmN0aW9uKGMpe3ZhciBoPXRoaXMsYj1oLml0ZW1zLGc9aC5rZXlzLGU9Yi5sZW5ndGgsYT1bXSxkO2ZvcihkPTA7ZDxlO2QrKyl7YVtkXT17a2V5OmdbZF0sdmFsdWU6YltkXSxpbmRleDpkfX1FeHQuQXJyYXkuc29ydChhLGZ1bmN0aW9uKGosaSl7dmFyIGs9YyhqLnZhbHVlLGkudmFsdWUpO2lmKGs9PT0wKXtrPShqLmluZGV4PGkuaW5kZXg/LTE6MSl9cmV0dXJuIGt9KTtmb3IoZD0wO2Q8ZTtkKyspe2JbZF09YVtkXS52YWx1ZTtnW2RdPWFbZF0ua2V5fWguZmlyZUV2ZW50KCJzb3J0IixoLGIsZyl9LGZpbmRJbnNlcnRpb25JbmRleDpmdW5jdGlvbihlLGQpe3ZhciBnPXRoaXMsYj1nLml0ZW1zLGk9MCxhPWIubGVuZ3RoLTEsYyxoO2lmKCFkKXtkPWcuZ2VuZXJhdGVDb21wYXJhdG9yKCl9d2hpbGUoaTw9YSl7Yz0oaSthKT4+MTtoPWQoZSxiW2NdKTtpZihoPj0wKXtpPWMrMX1lbHNle2lmKGg8MCl7YT1jLTF9fX1yZXR1cm4gaX0scmVvcmRlcjpmdW5jdGlvbihkKXt2YXIgaD10aGlzLGI9aC5pdGVtcyxjPTAsZz1iLmxlbmd0aCxhPVtdLGU9W10saTtoLnN1c3BlbmRFdmVudHMoKTtmb3IoaSBpbiBkKXthW2RbaV1dPWJbaV19Zm9yKGM9MDtjPGc7YysrKXtpZihkW2NdPT11bmRlZmluZWQpe2UucHVzaChiW2NdKX19Zm9yKGM9MDtjPGc7YysrKXtpZihhW2NdPT11bmRlZmluZWQpe2FbY109ZS5zaGlmdCgpfX1oLmNsZWFyKCk7aC5hZGRBbGwoYSk7aC5yZXN1bWVFdmVudHMoKTtoLmZpcmVFdmVudCgic29ydCIsaCl9LHNvcnRCeUtleTpmdW5jdGlvbihhLGIpe3RoaXMuX3NvcnQoImtleSIsYSxifHxmdW5jdGlvbihkLGMpe3ZhciBnPVN0cmluZyhkKS50b1VwcGVyQ2FzZSgpLGU9U3RyaW5nKGMpLnRvVXBwZXJDYXNlKCk7cmV0dXJuIGc+ZT8xOihnPGU/LTE6MCl9KX19KTtFeHQuZGVmaW5lKCJFeHQuWkluZGV4TWFuYWdlciIse2FsdGVybmF0ZUNsYXNzTmFtZToiRXh0LldpbmRvd0dyb3VwIixzdGF0aWNzOnt6QmFzZTo5MDAwfSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2IubGlzdD17fTtiLnpJbmRleFN0YWNrPVtdO2IuZnJvbnQ9bnVsbDtpZihhKXtpZihhLmlzQ29udGFpbmVyKXthLm9uKCJyZXNpemUiLGIuX29uQ29udGFpbmVyUmVzaXplLGIpO2IuenNlZWQ9RXh0Lk51bWJlci5mcm9tKGIucmVuZGVyZWQ/YS5nZXRFbCgpLmdldFN0eWxlKCJ6SW5kZXgiKTp1bmRlZmluZWQsYi5nZXROZXh0WlNlZWQoKSk7Yi50YXJnZXRFbD1hLmdldFRhcmdldEVsKCk7Yi5jb250YWluZXI9YX1lbHNle0V4dC5FdmVudE1hbmFnZXIub25XaW5kb3dSZXNpemUoYi5fb25Db250YWluZXJSZXNpemUsYik7Yi56c2VlZD1iLmdldE5leHRaU2VlZCgpO2IudGFyZ2V0RWw9RXh0LmdldChhKX19ZWxzZXtFeHQuRXZlbnRNYW5hZ2VyLm9uV2luZG93UmVzaXplKGIuX29uQ29udGFpbmVyUmVzaXplLGIpO2IuenNlZWQ9Yi5nZXROZXh0WlNlZWQoKTtFeHQub25Eb2N1bWVudFJlYWR5KGZ1bmN0aW9uKCl7Yi50YXJnZXRFbD1FeHQuZ2V0Qm9keSgpfSl9fSxnZXROZXh0WlNlZWQ6ZnVuY3Rpb24oKXtyZXR1cm4oRXh0LlpJbmRleE1hbmFnZXIuekJhc2UrPTEwMDAwKX0sc2V0QmFzZTpmdW5jdGlvbihiKXt0aGlzLnpzZWVkPWI7dmFyIGE9dGhpcy5hc3NpZ25aSW5kaWNlcygpO3RoaXMuX2FjdGl2YXRlTGFzdCgpO3JldHVybiBhfSxhc3NpZ25aSW5kaWNlczpmdW5jdGlvbigpe3ZhciBjPXRoaXMuekluZGV4U3RhY2ssYj1jLmxlbmd0aCxlPTAsZz10aGlzLnpzZWVkLGQ7Zm9yKDtlPGI7ZSsrKXtkPWNbZV07aWYoZCYmIWQuaGlkZGVuKXtnPWQuc2V0WkluZGV4KGcpfX10aGlzLl9hY3RpdmF0ZUxhc3QoKTtyZXR1cm4gZ30sX3NldEFjdGl2ZUNoaWxkOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcy5mcm9udDtpZihiIT09Yyl7aWYoYyYmIWMuZGVzdHJveWluZyl7Yy5zZXRBY3RpdmUoZmFsc2UsYil9dGhpcy5mcm9udD1iO2lmKGImJmIhPWEpe2Iuc2V0QWN0aXZlKHRydWUpO2lmKGIubW9kYWwpe3RoaXMuX3Nob3dNb2RhbE1hc2soYil9fX19LG9uQ29tcG9uZW50SGlkZTpmdW5jdGlvbihhKXthLnNldEFjdGl2ZShmYWxzZSk7dGhpcy5fYWN0aXZhdGVMYXN0KCl9LF9hY3RpdmF0ZUxhc3Q6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGE9ZS56SW5kZXhTdGFjayxkPWEubGVuZ3RoLTEsYz1lLmZyb250LGI7ZS5mcm9udD11bmRlZmluZWQ7Zm9yKDtkPj0wJiZhW2RdLmhpZGRlbjstLWQpe31pZigoYj1hW2RdKSl7ZS5fc2V0QWN0aXZlQ2hpbGQoYixjKTtpZihiLm1vZGFsKXtyZXR1cm59fWZvcig7ZD49MDstLWQpe2I9YVtkXTtpZihiLmlzVmlzaWJsZSgpJiZiLm1vZGFsKXtlLl9zaG93TW9kYWxNYXNrKGIpO3JldHVybn19ZS5faGlkZU1vZGFsTWFzaygpfSxfc2hvd01vZGFsTWFzazpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGU9YS5lbC5nZXRTdHlsZSgiekluZGV4IiktNCxiPWEuZmxvYXRQYXJlbnQ/YS5mbG9hdFBhcmVudC5nZXRUYXJnZXRFbCgpOmEuY29udGFpbmVyLGQ9Yi5nZXRCb3goKTtpZihiLmRvbT09PWRvY3VtZW50LmJvZHkpe2QuaGVpZ2h0PU1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LEV4dC5kb20uRWxlbWVudC5nZXREb2N1bWVudEhlaWdodCgpKTtkLndpZHRoPU1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsV2lkdGgsZC53aWR0aCl9aWYoIWMubWFzayl7Yy5tYXNrPUV4dC5nZXRCb2R5KCkuY3JlYXRlQ2hpbGQoe2NsczpFeHQuYmFzZUNTU1ByZWZpeCsibWFzayJ9KTtjLm1hc2suc2V0VmlzaWJpbGl0eU1vZGUoRXh0LkVsZW1lbnQuRElTUExBWSk7Yy5tYXNrLm9uKCJjbGljayIsYy5fb25NYXNrQ2xpY2ssYyl9Yy5tYXNrLm1hc2tUYXJnZXQ9YjtiLmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsiYm9keS1tYXNrZWQiKTtjLm1hc2suc2V0U3R5bGUoInpJbmRleCIsZSk7Yy5tYXNrLnNob3coKTtjLm1hc2suc2V0Qm94KGQpfSxfaGlkZU1vZGFsTWFzazpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWFzaztpZihhJiZhLmlzVmlzaWJsZSgpKXthLm1hc2tUYXJnZXQucmVtb3ZlQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJib2R5LW1hc2tlZCIpO2EubWFza1RhcmdldD11bmRlZmluZWQ7YS5oaWRlKCl9fSxfb25NYXNrQ2xpY2s6ZnVuY3Rpb24oKXtpZih0aGlzLmZyb250KXt0aGlzLmZyb250LmZvY3VzKCl9fSxfb25Db250YWluZXJSZXNpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1hc2ssYixjO2lmKGEmJmEuaXNWaXNpYmxlKCkpe2EuaGlkZSgpO2I9YS5tYXNrVGFyZ2V0O2lmKGIuZG9tPT09ZG9jdW1lbnQuYm9keSl7Yz17aGVpZ2h0Ok1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LEV4dC5kb20uRWxlbWVudC5nZXREb2N1bWVudEhlaWdodCgpKSx3aWR0aDpNYXRoLm1heChkb2N1bWVudC5ib2R5LnNjcm9sbFdpZHRoLGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCl9fWVsc2V7Yz1iLmdldFZpZXdTaXplKHRydWUpfWEuc2V0U2l6ZShjKTthLnNob3coKX19LHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYS56SW5kZXhNYW5hZ2VyKXthLnpJbmRleE1hbmFnZXIudW5yZWdpc3RlcihhKX1hLnpJbmRleE1hbmFnZXI9YjtiLmxpc3RbYS5pZF09YTtiLnpJbmRleFN0YWNrLnB1c2goYSk7YS5vbigiaGlkZSIsYi5vbkNvbXBvbmVudEhpZGUsYil9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIubGlzdDtkZWxldGUgYS56SW5kZXhNYW5hZ2VyO2lmKGMmJmNbYS5pZF0pe2RlbGV0ZSBjW2EuaWRdO2EudW4oImhpZGUiLGIub25Db21wb25lbnRIaWRlKTtFeHQuQXJyYXkucmVtb3ZlKGIuekluZGV4U3RhY2ssYSk7Yi5fYWN0aXZhdGVMYXN0KCl9fSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaXNDb21wb25lbnQ/YTp0aGlzLmxpc3RbYV19LGJyaW5nVG9Gcm9udDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLGE9ZmFsc2UsZD1jLnpJbmRleFN0YWNrO2I9Yy5nZXQoYik7aWYoYiE9PWMuZnJvbnQpe0V4dC5BcnJheS5yZW1vdmUoZCxiKTtpZihiLnByZXZlbnRCcmluZ1RvRnJvbnQpe2QudW5zaGlmdChiKX1lbHNle2QucHVzaChiKX1jLmFzc2lnblpJbmRpY2VzKCk7YT10cnVlO3RoaXMuZnJvbnQ9Yn1pZihhJiZiLm1vZGFsKXtjLl9zaG93TW9kYWxNYXNrKGIpfXJldHVybiBhfSxzZW5kVG9CYWNrOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YT1iLmdldChhKTtFeHQuQXJyYXkucmVtb3ZlKGIuekluZGV4U3RhY2ssYSk7Yi56SW5kZXhTdGFjay51bnNoaWZ0KGEpO2IuYXNzaWduWkluZGljZXMoKTt0aGlzLl9hY3RpdmF0ZUxhc3QoKTtyZXR1cm4gYX0saGlkZUFsbDpmdW5jdGlvbigpe3ZhciBiPXRoaXMubGlzdCxhLGM7Zm9yKGMgaW4gYil7aWYoYi5oYXNPd25Qcm9wZXJ0eShjKSl7YT1iW2NdO2lmKGEuaXNDb21wb25lbnQmJmEuaXNWaXNpYmxlKCkpe2EuaGlkZSgpfX19fSxoaWRlOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcyxjPWcubWFzayxlPTAsYj1nLnpJbmRleFN0YWNrLGE9Yi5sZW5ndGgsZDtnLnRlbXBIaWRkZW49Zy50ZW1wSGlkZGVufHxbXTtmb3IoO2U8YTtlKyspe2Q9YltlXTtpZihkLmlzVmlzaWJsZSgpKXtnLnRlbXBIaWRkZW4ucHVzaChkKTtkLmVsLmhpZGUoKX19aWYoYyl7Yy5oaWRlKCl9fSxzaG93OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxiPWUubWFzayxkPTAsZz1lLnRlbXBIaWRkZW4sYT1nP2cubGVuZ3RoOjAsYztmb3IoO2Q8YTtkKyspe2M9Z1tkXTtjLmVsLnNob3coKTtjLnNldFBvc2l0aW9uKGMueCxjLnkpfWUudGVtcEhpZGRlbi5sZW5ndGg9MDtpZihiKXtiLnNob3coKTtiLmFsaWduVG8oYi5tYXNrVGFyZ2V0LCJ0bC10bCIpfX0sZ2V0QWN0aXZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZnJvbnR9LGdldEJ5OmZ1bmN0aW9uKGcsZSl7dmFyIGg9W10sZD0wLGI9dGhpcy56SW5kZXhTdGFjayxhPWIubGVuZ3RoLGM7Zm9yKDtkPGE7ZCsrKXtjPWJbZF07aWYoZy5jYWxsKGV8fGMsYykhPT1mYWxzZSl7aC5wdXNoKGMpfX1yZXR1cm4gaH0sZWFjaDpmdW5jdGlvbihjLGIpe3ZhciBkPXRoaXMubGlzdCxlLGE7Zm9yKGUgaW4gZCl7aWYoZC5oYXNPd25Qcm9wZXJ0eShlKSl7YT1kW2VdO2lmKGEuaXNDb21wb25lbnQmJmMuY2FsbChifHxhLGEpPT09ZmFsc2Upe3JldHVybn19fX0sZWFjaEJvdHRvbVVwOmZ1bmN0aW9uKGcsZSl7dmFyIGI9dGhpcy56SW5kZXhTdGFjayxkPTAsYT1iLmxlbmd0aCxjO2Zvcig7ZDxhO2QrKyl7Yz1iW2RdO2lmKGMuaXNDb21wb25lbnQmJmcuY2FsbChlfHxjLGMpPT09ZmFsc2Upe3JldHVybn19fSxlYWNoVG9wRG93bjpmdW5jdGlvbihlLGQpe3ZhciBhPXRoaXMuekluZGV4U3RhY2ssYz1hLmxlbmd0aCxiO2Zvcig7Yy0tPjA7KXtiPWFbY107aWYoYi5pc0NvbXBvbmVudCYmZS5jYWxsKGR8fGIsYik9PT1mYWxzZSl7cmV0dXJufX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9Yi5saXN0LGEsZDtmb3IoZCBpbiBjKXtpZihjLmhhc093blByb3BlcnR5KGQpKXthPWNbZF07aWYoYS5pc0NvbXBvbmVudCl7YS5kZXN0cm95KCl9fX1kZWxldGUgYi56SW5kZXhTdGFjaztkZWxldGUgYi5saXN0O2RlbGV0ZSBiLmNvbnRhaW5lcjtkZWxldGUgYi50YXJnZXRFbH19LGZ1bmN0aW9uKCl7RXh0LldpbmRvd01hbmFnZXI9RXh0LldpbmRvd01ncj1uZXcgdGhpcygpfSk7RXh0LmRlZmluZSgiRXh0LmNvbnRhaW5lci5BYnN0cmFjdENvbnRhaW5lciIse2V4dGVuZDoiRXh0LkNvbXBvbmVudCIscmVxdWlyZXM6WyJFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24iLCJFeHQubGF5b3V0LmNvbnRhaW5lci5BdXRvIiwiRXh0LlpJbmRleE1hbmFnZXIiXSxyZW5kZXJUcGw6InsldGhpcy5yZW5kZXJDb250YWluZXIob3V0LHZhbHVlcyklfSIsc3VzcGVuZExheW91dDpmYWxzZSxhdXRvRGVzdHJveTp0cnVlLGRlZmF1bHRUeXBlOiJwYW5lbCIsZGV0YWNoT25SZW1vdmU6dHJ1ZSxpc0NvbnRhaW5lcjp0cnVlLGxheW91dENvdW50ZXI6MCxiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJjb250YWluZXIiLGJ1YmJsZUV2ZW50czpbImFkZCIsInJlbW92ZSJdLGRlZmF1bHRMYXlvdXRUeXBlOiJhdXRvIixpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmFkZEV2ZW50cygiYWZ0ZXJsYXlvdXQiLCJiZWZvcmVhZGQiLCJiZWZvcmVyZW1vdmUiLCJhZGQiLCJyZW1vdmUiKTthLmNhbGxQYXJlbnQoKTthLmdldExheW91dCgpO2EuaW5pdEl0ZW1zKCl9LGluaXRJdGVtczpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLml0ZW1zO2IuaXRlbXM9bmV3IEV4dC51dGlsLkFic3RyYWN0TWl4ZWRDb2xsZWN0aW9uKGZhbHNlLGIuZ2V0Q29tcG9uZW50SWQpO2lmKGEpe2lmKCFFeHQuaXNBcnJheShhKSl7YT1bYV19Yi5hZGQoYSl9fSxnZXRGb2N1c0VsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGFyZ2V0RWwoKX0sZmluaXNoUmVuZGVyQ2hpbGRyZW46ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt2YXIgYT10aGlzLmdldExheW91dCgpO2lmKGEpe2EuZmluaXNoUmVuZGVyKCl9fSxiZWZvcmVSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5nZXRMYXlvdXQoKTtiLmNhbGxQYXJlbnQoKTtpZighYS5pbml0aWFsaXplZCl7YS5pbml0TGF5b3V0KCl9fSxzZXR1cFJlbmRlclRwbDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldExheW91dCgpO3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO2Euc2V0dXBSZW5kZXJUcGwoYil9LHNldExheW91dDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmxheW91dDtpZihhJiZhLmlzTGF5b3V0JiZhIT1iKXthLnNldE93bmVyKG51bGwpfXRoaXMubGF5b3V0PWI7Yi5zZXRPd25lcih0aGlzKX0sZ2V0TGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZighYS5sYXlvdXR8fCFhLmxheW91dC5pc0xheW91dCl7YS5zZXRMYXlvdXQoRXh0LmxheW91dC5MYXlvdXQuY3JlYXRlKGEubGF5b3V0LGEuc2VsZi5wcm90b3R5cGUubGF5b3V0fHwiYXV0b2NvbnRhaW5lciIpKX1yZXR1cm4gYS5sYXlvdXR9LGRvTGF5b3V0OmZ1bmN0aW9uKCl7dGhpcy51cGRhdGVMYXlvdXQoKTtyZXR1cm4gdGhpc30sYWZ0ZXJMYXlvdXQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczsrK2EubGF5b3V0Q291bnRlcjtpZihhLmhhc0xpc3RlbmVycy5hZnRlcmxheW91dCl7YS5maXJlRXZlbnQoImFmdGVybGF5b3V0IixhLGIpfX0scHJlcGFyZUl0ZW1zOmZ1bmN0aW9uKGIsZCl7aWYoRXh0LmlzQXJyYXkoYikpe2I9Yi5zbGljZSgpfWVsc2V7Yj1bYl19dmFyIGc9dGhpcyxjPTAsYT1iLmxlbmd0aCxlO2Zvcig7YzxhO2MrKyl7ZT1iW2NdO2lmKGU9PW51bGwpe0V4dC5BcnJheS5lcmFzZShiLGMsMSk7LS1jOy0tYX1lbHNle2lmKGQpe2U9dGhpcy5hcHBseURlZmF1bHRzKGUpfWUuaXNDb250YWluZWQ9ZztiW2NdPWcubG9va3VwQ29tcG9uZW50KGUpO2RlbGV0ZSBlLmlzQ29udGFpbmVkfX1yZXR1cm4gYn0sYXBwbHlEZWZhdWx0czpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmRlZmF1bHRzO2lmKGIpe2lmKEV4dC5pc0Z1bmN0aW9uKGIpKXtiPWIuY2FsbCh0aGlzLGEpfWlmKEV4dC5pc1N0cmluZyhhKSl7YT1FeHQuQ29tcG9uZW50TWFuYWdlci5nZXQoYSl9RXh0LmFwcGx5SWYoYSxiKX1yZXR1cm4gYX0sbG9va3VwQ29tcG9uZW50OmZ1bmN0aW9uKGEpe3JldHVybih0eXBlb2YgYT09InN0cmluZyIpP0V4dC5Db21wb25lbnRNYW5hZ2VyLmdldChhKTpFeHQuQ29tcG9uZW50TWFuYWdlci5jcmVhdGUoYSx0aGlzLmRlZmF1bHRUeXBlKX0sZ2V0Q29tcG9uZW50SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0SXRlbUlkKCl9LGFkZDpmdW5jdGlvbigpe3ZhciBqPXRoaXMsZz1FeHQuQXJyYXkuc2xpY2UoYXJndW1lbnRzKSxkPSh0eXBlb2YgZ1swXT09Im51bWJlciIpP2cuc2hpZnQoKTotMSxjPWouZ2V0TGF5b3V0KCksbCxoLGIsYSxtLGssZTtpZihnLmxlbmd0aD09MSYmRXh0LmlzQXJyYXkoZ1swXSkpe2g9Z1swXTtsPXRydWV9ZWxzZXtoPWd9ZT1oPWoucHJlcGFyZUl0ZW1zKGgsdHJ1ZSk7YT1oLmxlbmd0aDtpZihqLnJlbmRlcmVkKXtFeHQuc3VzcGVuZExheW91dHMoKX1pZighbCYmYT09MSl7ZT1oWzBdfWZvcihiPTA7YjxhO2IrKyl7bT1oW2JdO2s9KGQ8MCk/ai5pdGVtcy5sZW5ndGg6KGQrYik7aWYobS5mbG9hdGluZyl7ai5mbG9hdGluZ0l0ZW1zPWouZmxvYXRpbmdJdGVtc3x8bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbigpO2ouZmxvYXRpbmdJdGVtcy5hZGQobSk7bS5vbkFkZGVkKGosayl9ZWxzZXtpZigoIWouaGFzTGlzdGVuZXJzLmJlZm9yZWFkZHx8ai5maXJlRXZlbnQoImJlZm9yZWFkZCIsaixtLGspIT09ZmFsc2UpJiZqLm9uQmVmb3JlQWRkKG0pIT09ZmFsc2Upe2ouaXRlbXMuaW5zZXJ0KGssbSk7bS5vbkFkZGVkKGosayk7ai5vbkFkZChtLGspO2Mub25BZGQobSxrKTtpZihqLmhhc0xpc3RlbmVycy5hZGQpe2ouZmlyZUV2ZW50KCJhZGQiLGosbSxrKX19fX1qLnVwZGF0ZUxheW91dCgpO2lmKGoucmVuZGVyZWQpe0V4dC5yZXN1bWVMYXlvdXRzKHRydWUpfXJldHVybiBlfSxvbkFkZDpFeHQuZW1wdHlGbixvblJlbW92ZTpFeHQuZW1wdHlGbixpbnNlcnQ6ZnVuY3Rpb24oYixhKXtyZXR1cm4gdGhpcy5hZGQoYixhKX0sbW92ZTpmdW5jdGlvbihiLGQpe3ZhciBhPXRoaXMuaXRlbXMsYztjPWEucmVtb3ZlQXQoYik7aWYoYz09PWZhbHNlKXtyZXR1cm4gZmFsc2V9YS5pbnNlcnQoZCxjKTt0aGlzLmRvTGF5b3V0KCk7cmV0dXJuIGN9LG9uQmVmb3JlQWRkOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1jLmJvcmRlcjtpZihjLm93bmVyQ3QmJmMub3duZXJDdCE9PWIpe2Mub3duZXJDdC5yZW1vdmUoYyxmYWxzZSl9aWYoYi5ib3JkZXI9PT1mYWxzZXx8Yi5ib3JkZXI9PT0wKXtjLmJvcmRlcj1FeHQuaXNEZWZpbmVkKGEpJiZhIT09ZmFsc2UmJmEhPT0wfX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcyxlPWQuZ2V0Q29tcG9uZW50KGEpO2lmKGUmJighZC5oYXNMaXN0ZW5lcnMuYmVmb3JlcmVtb3ZlfHxkLmZpcmVFdmVudCgiYmVmb3JlcmVtb3ZlIixkLGUpIT09ZmFsc2UpKXtkLmRvUmVtb3ZlKGUsYik7aWYoZC5oYXNMaXN0ZW5lcnMucmVtb3ZlKXtkLmZpcmVFdmVudCgicmVtb3ZlIixkLGUpfWlmKCFkLmRlc3Ryb3lpbmcpe2QuZG9MYXlvdXQoKX19cmV0dXJuIGV9LGRvUmVtb3ZlOmZ1bmN0aW9uKGMsYil7dmFyIGU9dGhpcyxkPWUubGF5b3V0LGE9ZCYmZS5yZW5kZXJlZCxnPWI9PT10cnVlfHwoYiE9PWZhbHNlJiZlLmF1dG9EZXN0cm95KTtiPWI9PT10cnVlfHwoYiE9PWZhbHNlJiZlLmF1dG9EZXN0cm95KTtlLml0ZW1zLnJlbW92ZShjKTtpZihhKXtpZihkLnJ1bm5pbmcpe0V4dC5BYnN0cmFjdENvbXBvbmVudC5jYW5jZWxMYXlvdXQoYyxnKX1kLm9uUmVtb3ZlKGMsZyl9Yy5vblJlbW92ZWQoZyk7ZS5vblJlbW92ZShjLGcpO2lmKGcpe2MuZGVzdHJveSgpfWVsc2V7aWYoYSl7ZC5hZnRlclJlbW92ZShjKX1pZihlLmRldGFjaE9uUmVtb3ZlJiZjLnJlbmRlcmVkKXtFeHQuZ2V0RGV0YWNoZWRCb2R5KCkuYXBwZW5kQ2hpbGQoYy5nZXRFbCgpKX19fSxyZW1vdmVBbGw6ZnVuY3Rpb24oYyl7dmFyIGg9dGhpcyxlPWguaXRlbXMuaXRlbXMuc2xpY2UoKSxiPVtdLGQ9MCxhPWUubGVuZ3RoLGc7aC5zdXNwZW5kTGF5b3V0cygpO2Zvcig7ZDxhO2QrKyl7Zz1lW2RdO2gucmVtb3ZlKGcsYyk7aWYoZy5vd25lckN0IT09aCl7Yi5wdXNoKGcpfX1oLnJlc3VtZUxheW91dHMoISFhKTtyZXR1cm4gYn0sZ2V0UmVmSXRlbXM6ZnVuY3Rpb24oYyl7dmFyIGg9dGhpcyxkPWguaXRlbXMuaXRlbXMsYj1kLmxlbmd0aCxlPTAsZyxhPVtdO2Zvcig7ZTxiO2UrKyl7Zz1kW2VdO2EucHVzaChnKTtpZihjJiZnLmdldFJlZkl0ZW1zKXthLnB1c2guYXBwbHkoYSxnLmdldFJlZkl0ZW1zKHRydWUpKX19aWYoaC5mbG9hdGluZ0l0ZW1zKXthLnB1c2guYXBwbHkoYSxoLmZsb2F0aW5nSXRlbXMuaXRlbXMpfXJldHVybiBhfSxjYXNjYWRlOmZ1bmN0aW9uKGwsbSxhKXt2YXIgaz10aGlzLGU9ay5pdGVtcz9rLml0ZW1zLml0ZW1zOltdLGc9ZS5sZW5ndGgsZD0wLGosaD1hP2EuY29uY2F0KGspOltrXSxiPWgubGVuZ3RoLTE7aWYobC5hcHBseShtfHxrLGgpIT09ZmFsc2Upe2Zvcig7ZDxnO2QrKyl7aj1lW2RdO2lmKGouY2FzY2FkZSl7ai5jYXNjYWRlKGwsbSxhKX1lbHNle2hbYl09ajtsLmFwcGx5KG18fGUsaCl9fX1yZXR1cm4gdGhpc30saXNBbmNlc3RvcjpmdW5jdGlvbihhKXt3aGlsZShhKXtpZihhLm93bmVyQ3Q9PT10aGlzKXtyZXR1cm4gdHJ1ZX1hPWEub3duZXJDdH19LGdldENvbXBvbmVudDpmdW5jdGlvbihhKXtpZihFeHQuaXNPYmplY3QoYSkpe2E9YS5nZXRJdGVtSWQoKX1yZXR1cm4gdGhpcy5pdGVtcy5nZXQoYSl9LHF1ZXJ5OmZ1bmN0aW9uKGEpe2E9YXx8IioiO3JldHVybiBFeHQuQ29tcG9uZW50UXVlcnkucXVlcnkoYSx0aGlzKX0scXVlcnlCeTpmdW5jdGlvbihnLGUpe3ZhciBjPVtdLGI9dGhpcy5nZXRSZWZJdGVtcyh0cnVlKSxkPTAsYT1iLmxlbmd0aCxoO2Zvcig7ZDxhOysrZCl7aD1iW2RdO2lmKGcuY2FsbChlfHxoLGgpIT09ZmFsc2Upe2MucHVzaChoKX19cmV0dXJuIGN9LHF1ZXJ5QnlJZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kb3duKCIjIithKX0sY2hpbGQ6ZnVuY3Rpb24oYSl7YT1hfHwiIjtyZXR1cm4gdGhpcy5xdWVyeSgiPiAiK2EpWzBdfHxudWxsfSxuZXh0Q2hpbGQ6ZnVuY3Rpb24oZSxiKXt2YXIgYz10aGlzLGEsZD1jLml0ZW1zLmluZGV4T2YoZSk7aWYoZCE9PS0xKXthPWI/RXh0LkNvbXBvbmVudFF1ZXJ5KGIsYy5pdGVtcy5pdGVtcy5zbGljZShkKzEpKTpjLml0ZW1zLmdldEF0KGQrMSk7aWYoIWEmJmMub3duZXJDdCl7YT1jLm93bmVyQ3QubmV4dENoaWxkKGMsYil9fXJldHVybiBhfSxwcmV2Q2hpbGQ6ZnVuY3Rpb24oZSxiKXt2YXIgYz10aGlzLGEsZD1jLml0ZW1zLmluZGV4T2YoZSk7aWYoZCE9PS0xKXthPWI/RXh0LkNvbXBvbmVudFF1ZXJ5KGIsYy5pdGVtcy5pdGVtcy5zbGljZShkKzEpKTpjLml0ZW1zLmdldEF0KGQrMSk7aWYoIWEmJmMub3duZXJDdCl7YT1jLm93bmVyQ3QubmV4dENoaWxkKGMsYil9fXJldHVybiBhfSxkb3duOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXJ5KGEpWzBdfHxudWxsfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt2YXIgZD10aGlzLmdldENoaWxkSXRlbXNUb0Rpc2FibGUoKSxjPWQubGVuZ3RoLGIsYTtmb3IoYT0wO2E8YzthKyspe2I9ZFthXTtpZihiLnJlc2V0RGlzYWJsZSl7Yi5lbmFibGUoKX19cmV0dXJuIHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt2YXIgZD10aGlzLmdldENoaWxkSXRlbXNUb0Rpc2FibGUoKSxjPWQubGVuZ3RoLGIsYTtmb3IoYT0wO2E8YzthKyspe2I9ZFthXTtpZihiLnJlc2V0RGlzYWJsZSE9PWZhbHNlJiYhYi5kaXNhYmxlZCl7Yi5kaXNhYmxlKCk7Yi5yZXNldERpc2FibGU9dHJ1ZX19cmV0dXJuIHRoaXN9LGdldENoaWxkSXRlbXNUb0Rpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeSgiW2lzRm9ybUZpZWxkXSxidXR0b24iKX0sYmVmb3JlTGF5b3V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRydWV9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5pdGVtcyxkO2lmKGEpe3doaWxlKChkPWEuZmlyc3QoKSkpe2IuZG9SZW1vdmUoZCx0cnVlKX19RXh0LmRlc3Ryb3koYi5sYXlvdXQpO2IuY2FsbFBhcmVudCgpfX0pO0V4dC5kZWZpbmUoIkV4dC5jb250YWluZXIuQ29udGFpbmVyIix7ZXh0ZW5kOiJFeHQuY29udGFpbmVyLkFic3RyYWN0Q29udGFpbmVyIixhbGlhczoid2lkZ2V0LmNvbnRhaW5lciIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuQ29udGFpbmVyIixmaXJlSGllcmFyY2h5RXZlbnQ6ZnVuY3Rpb24oYSl7dGhpcy5oaWVyYXJjaHlFdmVudFNvdXJjZS5maXJlRXZlbnQoYSx0aGlzKX0sYWZ0ZXJIaWRlOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5maXJlSGllcmFyY2h5RXZlbnQoImhpZGUiKX0sYWZ0ZXJTaG93OmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5maXJlSGllcmFyY2h5RXZlbnQoInNob3ciKX0sb25BZGRlZDpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKHRoaXMuaGllcmFyY2h5RXZlbnRTb3VyY2UuaGFzTGlzdGVuZXJzLmFkZGVkKXt0aGlzLmZpcmVIaWVyYXJjaHlFdmVudCgiYWRkZWQiKX19LGdldENoaWxkQnlFbGVtZW50OmZ1bmN0aW9uKGUsYSl7dmFyIGgsYyxiPTAsZD10aGlzLmdldFJlZkl0ZW1zKCksZz1kLmxlbmd0aDtlPUV4dC5nZXREb20oZSk7Zm9yKDtiPGc7YisrKXtoPWRbYl07Yz1oLmdldEVsKCk7aWYoYyYmKChjLmRvbT09PWUpfHxjLmNvbnRhaW5zKGUpKSl7cmV0dXJuKGEmJmguZ2V0Q2hpbGRCeUVsZW1lbnQpP2guZ2V0Q2hpbGRCeUVsZW1lbnQoZSxhKTpofX1yZXR1cm4gbnVsbH19LGZ1bmN0aW9uKCl7dGhpcy5oaWVyYXJjaHlFdmVudFNvdXJjZT10aGlzLnByb3RvdHlwZS5oaWVyYXJjaHlFdmVudFNvdXJjZT1uZXcgRXh0LnV0aWwuT2JzZXJ2YWJsZSh7ZXZlbnRzOntoaWRlOnRydWUsc2hvdzp0cnVlLGNvbGxhcHNlOnRydWUsZXhwYW5kOnRydWUsYWRkZWQ6dHJ1ZX19KX0pO0V4dC5kZWZpbmUoIkV4dC5FZGl0b3IiLHtleHRlbmQ6IkV4dC5jb250YWluZXIuQ29udGFpbmVyIixhbGlhczoid2lkZ2V0LmVkaXRvciIscmVxdWlyZXM6WyJFeHQubGF5b3V0LmNvbnRhaW5lci5FZGl0b3IiXSxsYXlvdXQ6ImVkaXRvciIsYWxsb3dCbHVyOnRydWUscmV2ZXJ0SW52YWxpZDp0cnVlLHZhbHVlOiIiLGFsaWdubWVudDoiYy1jPyIsb2Zmc2V0czpbMCwwXSxzaGFkb3c6ImZyYW1lIixjb25zdHJhaW46ZmFsc2Usc3dhbGxvd0tleXM6dHJ1ZSxjb21wbGV0ZU9uRW50ZXI6dHJ1ZSxjYW5jZWxPbkVzYzp0cnVlLHVwZGF0ZUVsOmZhbHNlLGhpZGRlbjp0cnVlLGJhc2VDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImVkaXRvciIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmZpZWxkPUV4dC5Db21wb25lbnRNYW5hZ2VyLmNyZWF0ZShhLmZpZWxkLCJ0ZXh0ZmllbGQiKTtFeHQuYXBwbHkoYix7aW5FZGl0b3I6dHJ1ZSxtc2dUYXJnZXQ6Yi5tc2dUYXJnZXQ9PSJ0aXRsZSI/InRpdGxlIjoicXRpcCJ9KTthLm1vbihiLHtzY29wZTphLGJsdXI6e2ZuOmEub25GaWVsZEJsdXIsZGVsYXk6MX0sc3BlY2lhbGtleTphLm9uU3BlY2lhbEtleX0pO2lmKGIuZ3Jvdyl7YS5tb24oYiwiYXV0b3NpemUiLGEub25GaWVsZEF1dG9zaXplLGEse2RlbGF5OjF9KX1hLmZsb2F0aW5nPXtjb25zdHJhaW46YS5jb25zdHJhaW59O2EuaXRlbXM9YjthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLmFkZEV2ZW50cygiYmVmb3Jlc3RhcnRlZGl0Iiwic3RhcnRlZGl0IiwiYmVmb3JlY29tcGxldGUiLCJjb21wbGV0ZSIsImNhbmNlbGVkaXQiLCJzcGVjaWFsa2V5Iil9LG9uRmllbGRBdXRvc2l6ZTpmdW5jdGlvbigpe3RoaXMudXBkYXRlTGF5b3V0KCl9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcyxlPWMuZmllbGQsZD1lLmlucHV0RWw7Yy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoZCl7ZC5kb20ubmFtZT0iIjtpZihjLnN3YWxsb3dLZXlzKXtkLnN3YWxsb3dFdmVudChbImtleXByZXNzIiwia2V5ZG93biJdKX19fSxvblNwZWNpYWxLZXk6ZnVuY3Rpb24oZyxlKXt2YXIgZD10aGlzLGI9ZS5nZXRLZXkoKSxhPWQuY29tcGxldGVPbkVudGVyJiZiPT1lLkVOVEVSLGM9ZC5jYW5jZWxPbkVzYyYmYj09ZS5FU0M7aWYoYXx8Yyl7ZS5zdG9wRXZlbnQoKTtFeHQuZGVmZXIoZnVuY3Rpb24oKXtpZihhKXtkLmNvbXBsZXRlRWRpdCgpfWVsc2V7ZC5jYW5jZWxFZGl0KCl9aWYoZy50cmlnZ2VyQmx1cil7Zy50cmlnZ2VyQmx1cihlKX19LDEwKX1kLmZpcmVFdmVudCgic3BlY2lhbGtleSIsZCxnLGUpfSxzdGFydEVkaXQ6ZnVuY3Rpb24oYSxjKXt2YXIgYj10aGlzLGQ9Yi5maWVsZDtiLmNvbXBsZXRlRWRpdCgpO2IuYm91bmRFbD1FeHQuZ2V0KGEpO2M9RXh0LmlzRGVmaW5lZChjKT9jOkV4dC5TdHJpbmcudHJpbShiLmJvdW5kRWwuZG9tLmlubmVyVGV4dHx8Yi5ib3VuZEVsLmRvbS5pbm5lckhUTUwpO2lmKCFiLnJlbmRlcmVkKXtiLnJlbmRlcihiLnBhcmVudEVsfHxkb2N1bWVudC5ib2R5KX1pZihiLmZpcmVFdmVudCgiYmVmb3Jlc3RhcnRlZGl0IixiLGIuYm91bmRFbCxjKSE9PWZhbHNlKXtiLnN0YXJ0VmFsdWU9YztiLnNob3coKTtkLnN1c3BlbmRFdmVudHMoKTtkLnJlc2V0KCk7ZC5zZXRWYWx1ZShjKTtkLnJlc3VtZUV2ZW50cygpO2IucmVhbGlnbih0cnVlKTtkLmZvY3VzKGZhbHNlLDEwKTtpZihkLmF1dG9TaXplKXtkLmF1dG9TaXplKCl9Yi5lZGl0aW5nPXRydWV9fSxyZWFsaWduOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYT09PXRydWUpe2IudXBkYXRlTGF5b3V0KCl9Yi5hbGlnblRvKGIuYm91bmRFbCxiLmFsaWdubWVudCxiLm9mZnNldHMpfSxjb21wbGV0ZUVkaXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxkPWIuZmllbGQsYztpZighYi5lZGl0aW5nKXtyZXR1cm59aWYoZC5hc3NlcnRWYWx1ZSl7ZC5hc3NlcnRWYWx1ZSgpfWM9Yi5nZXRWYWx1ZSgpO2lmKCFkLmlzVmFsaWQoKSl7aWYoYi5yZXZlcnRJbnZhbGlkIT09ZmFsc2Upe2IuY2FuY2VsRWRpdChhKX1yZXR1cm59aWYoU3RyaW5nKGMpPT09U3RyaW5nKGIuc3RhcnRWYWx1ZSkmJmIuaWdub3JlTm9DaGFuZ2Upe2IuaGlkZUVkaXQoYSk7cmV0dXJufWlmKGIuZmlyZUV2ZW50KCJiZWZvcmVjb21wbGV0ZSIsYixjLGIuc3RhcnRWYWx1ZSkhPT1mYWxzZSl7Yz1iLmdldFZhbHVlKCk7aWYoYi51cGRhdGVFbCYmYi5ib3VuZEVsKXtiLmJvdW5kRWwudXBkYXRlKGMpfWIuaGlkZUVkaXQoYSk7Yi5maXJlRXZlbnQoImNvbXBsZXRlIixiLGMsYi5zdGFydFZhbHVlKX19LG9uU2hvdzpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYS5oaWRlRWwhPT1mYWxzZSl7YS5ib3VuZEVsLmhpZGUoKX1hLmZpcmVFdmVudCgic3RhcnRlZGl0IixhLGEuYm91bmRFbCxhLnN0YXJ0VmFsdWUpfSxjYW5jZWxFZGl0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsYj1jLnN0YXJ0VmFsdWUsZT1jLmZpZWxkLGQ7aWYoYy5lZGl0aW5nKXtkPWMuZ2V0VmFsdWUoKTtlLnN1c3BlbmRFdmVudHMoKTtjLnNldFZhbHVlKGIpO2UucmVzdW1lRXZlbnRzKCk7Yy5oaWRlRWRpdChhKTtjLmZpcmVFdmVudCgiY2FuY2VsZWRpdCIsYyxkLGIpfX0saGlkZUVkaXQ6ZnVuY3Rpb24oYSl7aWYoYSE9PXRydWUpe3RoaXMuZWRpdGluZz1mYWxzZTt0aGlzLmhpZGUoKX19LG9uRmllbGRCbHVyOmZ1bmN0aW9uKGQsYyl7dmFyIGE9dGhpcyxiO2lmKGEuYWxsb3dCbHVyPT09dHJ1ZSYmYS5lZGl0aW5nJiZhLnNlbGVjdFNhbWVFZGl0b3IhPT10cnVlKXthLmNvbXBsZXRlRWRpdCgpfWlmKGMmJkV4dC5mbHkoYj1jLmdldFRhcmdldCgpKS5mb2N1c2FibGUoKSl7Yi5mb2N1cygpfX0sb25IaWRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuZmllbGQ7aWYoYS5lZGl0aW5nKXthLmNvbXBsZXRlRWRpdCgpO3JldHVybn1pZihiLmhhc0ZvY3VzKXtiLmJsdXIoKX1pZihiLmNvbGxhcHNlKXtiLmNvbGxhcHNlKCl9aWYoYS5oaWRlRWwhPT1mYWxzZSl7YS5ib3VuZEVsLnNob3coKX1hLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5maWVsZC5zZXRWYWx1ZShhKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWVsZC5nZXRWYWx1ZSgpfSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztFeHQuZGVzdHJveShhLmZpZWxkKTtkZWxldGUgYS5maWVsZDtkZWxldGUgYS5wYXJlbnRFbDtkZWxldGUgYS5ib3VuZEVsO2EuY2FsbFBhcmVudChhcmd1bWVudHMpfX0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLktleU1hcCIse2FsdGVybmF0ZUNsYXNzTmFtZToiRXh0LktleU1hcCIsZXZlbnROYW1lOiJrZXlkb3duIixjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKChhcmd1bWVudHMubGVuZ3RoIT09MSl8fCh0eXBlb2YgYT09PSJzdHJpbmciKXx8YS5kb218fGEudGFnTmFtZXx8YT09PWRvY3VtZW50fHxhLmlzQ29tcG9uZW50KXtiLmxlZ2FjeUNvbnN0cnVjdG9yLmFwcGx5KGIsYXJndW1lbnRzKTtyZXR1cm59RXh0LmFwcGx5KGIsYSk7Yi5iaW5kaW5ncz1bXTtpZighYi50YXJnZXQuaXNDb21wb25lbnQpe2IudGFyZ2V0PUV4dC5nZXQoYi50YXJnZXQpfWlmKGIuYmluZGluZyl7Yi5hZGRCaW5kaW5nKGIuYmluZGluZyl9ZWxzZXtpZihhLmtleSl7Yi5hZGRCaW5kaW5nKGEpfX1iLmVuYWJsZSgpfSxsZWdhY3lDb25zdHJ1Y3RvcjpmdW5jdGlvbihiLGQsYSl7dmFyIGM9dGhpcztFeHQuYXBwbHkoYyx7dGFyZ2V0OkV4dC5nZXQoYiksZXZlbnROYW1lOmF8fGMuZXZlbnROYW1lLGJpbmRpbmdzOltdfSk7aWYoZCl7Yy5hZGRCaW5kaW5nKGQpfWMuZW5hYmxlKCl9LGFkZEJpbmRpbmc6ZnVuY3Rpb24oaCl7dmFyIGc9aC5rZXksaj1mYWxzZSxkLGUsYixjLGE7aWYoRXh0LmlzQXJyYXkoaCkpe2ZvcihjPTAsYT1oLmxlbmd0aDtjPGE7YysrKXt0aGlzLmFkZEJpbmRpbmcoaFtjXSl9cmV0dXJufWlmKEV4dC5pc1N0cmluZyhnKSl7ZT1bXTtiPWcudG9VcHBlckNhc2UoKTtmb3IoYz0wLGE9Yi5sZW5ndGg7YzxhOysrYyl7ZS5wdXNoKGIuY2hhckNvZGVBdChjKSl9Zz1lO2o9dHJ1ZX1pZighRXh0LmlzQXJyYXkoZykpe2c9W2ddfWlmKCFqKXtmb3IoYz0wLGE9Zy5sZW5ndGg7YzxhOysrYyl7ZD1nW2NdO2lmKEV4dC5pc1N0cmluZyhkKSl7Z1tjXT1kLnRvVXBwZXJDYXNlKCkuY2hhckNvZGVBdCgwKX19fXRoaXMuYmluZGluZ3MucHVzaChFeHQuYXBwbHkoe2tleUNvZGU6Z30saCkpfSxoYW5kbGVUYXJnZXRFdmVudDooZnVuY3Rpb24oKXt2YXIgYT0vaW5wdXR8dGV4dGFyZWEvaTtyZXR1cm4gZnVuY3Rpb24oZyl7dmFyIGU9dGhpcyxqLGMsYixoLGQ7aWYodGhpcy5lbmFibGVkKXtqPXRoaXMuYmluZGluZ3M7Yz0wO2I9ai5sZW5ndGg7Zz1lLnByb2Nlc3NFdmVudC5hcHBseShlfHxlLnByb2Nlc3NFdmVudFNjb3BlLGFyZ3VtZW50cyk7aWYoZS5pZ25vcmVJbnB1dEZpZWxkcyl7aD1nLnRhcmdldDtkPWguY29udGVudEVkaXRhYmxlO2lmKGEudGVzdChoLnRhZ05hbWUpfHwoZD09PSIifHxkPT09InRydWUiKSl7cmV0dXJufX1pZighZy5nZXRLZXkpe3JldHVybiBnfWZvcig7YzxiOysrYyl7dGhpcy5wcm9jZXNzQmluZGluZyhqW2NdLGcpfX19fSgpKSxwcm9jZXNzRXZlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LHByb2Nlc3NCaW5kaW5nOmZ1bmN0aW9uKGcsYSl7aWYodGhpcy5jaGVja01vZGlmaWVycyhnLGEpKXt2YXIgaD1hLmdldEtleSgpLGs9Zy5mbnx8Zy5oYW5kbGVyLGw9Zy5zY29wZXx8dGhpcyxqPWcua2V5Q29kZSxiPWcuZGVmYXVsdEV2ZW50QWN0aW9uLGMsZSxkPW5ldyBFeHQuRXZlbnRPYmplY3RJbXBsKGEpO2ZvcihjPTAsZT1qLmxlbmd0aDtjPGU7KytjKXtpZihoPT09altjXSl7aWYoay5jYWxsKGwsaCxhKSE9PXRydWUmJmIpe2RbYl0oKX1icmVha319fX0sY2hlY2tNb2RpZmllcnM6ZnVuY3Rpb24oaixnKXt2YXIgZD1bInNoaWZ0IiwiY3RybCIsImFsdCJdLGM9MCxhPWQubGVuZ3RoLGgsYjtmb3IoO2M8YTsrK2Mpe2I9ZFtjXTtoPWpbYl07aWYoIShoPT09dW5kZWZpbmVkfHwoaD09PWdbYisiS2V5Il0pKSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX0sb246ZnVuY3Rpb24oYixkLGMpe3ZhciBoLGEsZSxnO2lmKEV4dC5pc09iamVjdChiKSYmIUV4dC5pc0FycmF5KGIpKXtoPWIua2V5O2E9Yi5zaGlmdDtlPWIuY3RybDtnPWIuYWx0fWVsc2V7aD1ifXRoaXMuYWRkQmluZGluZyh7a2V5Omgsc2hpZnQ6YSxjdHJsOmUsYWx0OmcsZm46ZCxzY29wZTpjfSl9LGlzRW5hYmxlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVuYWJsZWR9LGVuYWJsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoIWEuZW5hYmxlZCl7YS50YXJnZXQub24oYS5ldmVudE5hbWUsYS5oYW5kbGVUYXJnZXRFdmVudCxhKTthLmVuYWJsZWQ9dHJ1ZX19LGRpc2FibGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuZW5hYmxlZCl7YS50YXJnZXQucmVtb3ZlTGlzdGVuZXIoYS5ldmVudE5hbWUsYS5oYW5kbGVUYXJnZXRFdmVudCxhKTthLmVuYWJsZWQ9ZmFsc2V9fSxzZXREaXNhYmxlZDpmdW5jdGlvbihhKXtpZihhKXt0aGlzLmRpc2FibGUoKX1lbHNle3RoaXMuZW5hYmxlKCl9fSxkZXN0cm95OmZ1bmN0aW9uKGMpe3ZhciBhPXRoaXMsYj1hLnRhcmdldDthLmJpbmRpbmdzPVtdO2EuZGlzYWJsZSgpO2lmKGM9PT10cnVlKXtpZihiLmlzQ29tcG9uZW50KXtiLmRlc3Ryb3koKX1lbHNle2IucmVtb3ZlKCl9fWRlbGV0ZSBhLnRhcmdldH19KTtFeHQuZGVmaW5lKCJFeHQudXRpbC5LZXlOYXYiLHthbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5LZXlOYXYiLHJlcXVpcmVzOlsiRXh0LnV0aWwuS2V5TWFwIl0sc3RhdGljczp7a2V5T3B0aW9uczp7bGVmdDozNyxyaWdodDozOSx1cDozOCxkb3duOjQwLHNwYWNlOjMyLHBhZ2VVcDozMyxwYWdlRG93bjozNCxkZWw6NDYsYmFja3NwYWNlOjgsaG9tZTozNixlbmQ6MzUsZW50ZXI6MTMsZXNjOjI3LHRhYjo5fX0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihhcmd1bWVudHMubGVuZ3RoPT09Mil7Yi5sZWdhY3lDb25zdHJ1Y3Rvci5hcHBseShiLGFyZ3VtZW50cyk7cmV0dXJufWIuc2V0Q29uZmlnKGEpfSxsZWdhY3lDb25zdHJ1Y3RvcjpmdW5jdGlvbihiLGEpe3RoaXMuc2V0Q29uZmlnKEV4dC5hcHBseSh7dGFyZ2V0OmJ9LGEpKX0sc2V0Q29uZmlnOmZ1bmN0aW9uKGIpe3ZhciBlPXRoaXMsYz17dGFyZ2V0OmIudGFyZ2V0LGlnbm9yZUlucHV0RmllbGRzOmIuaWdub3JlSW5wdXRGaWVsZHMsZXZlbnROYW1lOmUuZ2V0S2V5RXZlbnQoImZvcmNlS2V5RG93biIgaW4gYj9iLmZvcmNlS2V5RG93bjplLmZvcmNlS2V5RG93bixiLmV2ZW50TmFtZSl9LGcsYSxpLGQsaDtpZihlLm1hcCl7ZS5tYXAuZGVzdHJveSgpfWlmKGIucHJvY2Vzc0V2ZW50KXtjLnByb2Nlc3NFdmVudD1iLnByb2Nlc3NFdmVudDtjLnByb2Nlc3NFdmVudFNjb3BlPWIucHJvY2Vzc0V2ZW50U2NvcGV8fGV9Zz1lLm1hcD1uZXcgRXh0LnV0aWwuS2V5TWFwKGMpO2E9RXh0LnV0aWwuS2V5TmF2LmtleU9wdGlvbnM7aT1iLnNjb3BlfHxlO2ZvcihkIGluIGEpe2lmKGEuaGFzT3duUHJvcGVydHkoZCkpe2lmKGg9YltkXSl7aWYodHlwZW9mIGg9PT0iZnVuY3Rpb24iKXtoPXtoYW5kbGVyOmgsZGVmYXVsdEFjdGlvbjooYi5kZWZhdWx0RXZlbnRBY3Rpb24hPT11bmRlZmluZWQpP2IuZGVmYXVsdEV2ZW50QWN0aW9uOmUuZGVmYXVsdEV2ZW50QWN0aW9ufX1nLmFkZEJpbmRpbmcoe2tleTphW2RdLGhhbmRsZXI6RXh0LkZ1bmN0aW9uLmJpbmQoZS5oYW5kbGVFdmVudCxoLnNjb3BlfHxpLGguaGFuZGxlcnx8aC5mbix0cnVlKSxkZWZhdWx0RXZlbnRBY3Rpb246KGguZGVmYXVsdEV2ZW50QWN0aW9uIT09dW5kZWZpbmVkKT9oLmRlZmF1bHRBY3Rpb246ZS5kZWZhdWx0RXZlbnRBY3Rpb259KX19fWcuZGlzYWJsZSgpO2lmKCFiLmRpc2FibGVkKXtnLmVuYWJsZSgpfX0saGFuZGxlRXZlbnQ6ZnVuY3Rpb24oYyxiLGEpe3JldHVybiBhLmNhbGwodGhpcyxiKX0sZGlzYWJsZWQ6ZmFsc2UsZGVmYXVsdEV2ZW50QWN0aW9uOiJzdG9wRXZlbnQiLGZvcmNlS2V5RG93bjpmYWxzZSxldmVudE5hbWU6ImtleXByZXNzIixkZXN0cm95OmZ1bmN0aW9uKGEpe3RoaXMubWFwLmRlc3Ryb3koYSk7ZGVsZXRlIHRoaXMubWFwfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLm1hcC5lbmFibGUoKTt0aGlzLmRpc2FibGVkPWZhbHNlfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5tYXAuZGlzYWJsZSgpO3RoaXMuZGlzYWJsZWQ9dHJ1ZX0sc2V0RGlzYWJsZWQ6ZnVuY3Rpb24oYSl7dGhpcy5tYXAuc2V0RGlzYWJsZWQoYSk7dGhpcy5kaXNhYmxlZD1hfSxnZXRLZXlFdmVudDpmdW5jdGlvbihiLGEpe2lmKGJ8fChFeHQuRXZlbnRNYW5hZ2VyLnVzZUtleURvd24mJiFhKSl7cmV0dXJuImtleWRvd24ifWVsc2V7cmV0dXJuIGF8fHRoaXMuZXZlbnROYW1lfX19KTtFeHQuZGVmaW5lKCJFeHQuRm9jdXNNYW5hZ2VyIix7c2luZ2xldG9uOnRydWUsYWx0ZXJuYXRlQ2xhc3NOYW1lOlsiRXh0LkZvY3VzTWdyIl0sbWl4aW5zOntvYnNlcnZhYmxlOiJFeHQudXRpbC5PYnNlcnZhYmxlIn0scmVxdWlyZXM6WyJFeHQuQWJzdHJhY3RDb21wb25lbnQiLCJFeHQuQ29tcG9uZW50IiwiRXh0LkNvbXBvbmVudE1hbmFnZXIiLCJFeHQuQ29tcG9uZW50UXVlcnkiLCJFeHQudXRpbC5IYXNoTWFwIiwiRXh0LnV0aWwuS2V5TmF2Il0sZW5hYmxlZDpmYWxzZSxmb2N1c0VsZW1lbnRDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvY3VzLWVsZW1lbnQiLGZvY3VzRnJhbWVDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvY3VzLWZyYW1lIix3aGl0ZWxpc3Q6WyJ0ZXh0ZmllbGQiXSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9RXh0LkNvbXBvbmVudFF1ZXJ5O2IubWl4aW5zLm9ic2VydmFibGUuY29uc3RydWN0b3IuY2FsbChiLGEpO2IuYWRkRXZlbnRzKCJiZWZvcmVjb21wb25lbnRmb2N1cyIsImNvbXBvbmVudGZvY3VzIiwiZGlzYWJsZSIsImVuYWJsZSIpO2IuZm9jdXNUYXNrPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzayhiLmhhbmRsZUNvbXBvbmVudEZvY3VzLGIpO0V4dC5vdmVycmlkZShFeHQuQWJzdHJhY3RDb21wb25lbnQse29uRm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihiLmVuYWJsZWQmJnRoaXMuaGFzRm9jdXMpe0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmNhbGwoYXJndW1lbnRzLHRoaXMpO2Iub25Db21wb25lbnRGb2N1cy5hcHBseShiLGFyZ3VtZW50cyl9fSxvbkJsdXI6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihiLmVuYWJsZWQmJiF0aGlzLmhhc0ZvY3VzKXtBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGFyZ3VtZW50cyx0aGlzKTtiLm9uQ29tcG9uZW50Qmx1ci5hcHBseShiLGFyZ3VtZW50cyl9fSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihiLmVuYWJsZWQpe0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmNhbGwoYXJndW1lbnRzLHRoaXMpO2Iub25Db21wb25lbnREZXN0cm95LmFwcGx5KGIsYXJndW1lbnRzKX19fSk7RXh0Lm92ZXJyaWRlKEV4dC5Db21wb25lbnQse2FmdGVySGlkZTpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGIuZW5hYmxlZCl7QXJyYXkucHJvdG90eXBlLnVuc2hpZnQuY2FsbChhcmd1bWVudHMsdGhpcyk7Yi5vbkNvbXBvbmVudEhpZGUuYXBwbHkoYixhcmd1bWVudHMpfX19KTtiLmtleU5hdj1uZXcgRXh0LnV0aWwuS2V5TmF2KEV4dC5nZXREb2MoKSx7ZGlzYWJsZWQ6dHJ1ZSxzY29wZTpiLGJhY2tzcGFjZTpiLmZvY3VzTGFzdCxlbnRlcjpiLm5hdmlnYXRlSW4sZXNjOmIubmF2aWdhdGVPdXQsdGFiOmIubmF2aWdhdGVTaWJsaW5ncyxzcGFjZTpiLm5hdmlnYXRlSW4sZGVsOmIuZm9jdXNMYXN0LGxlZnQ6Yi5uYXZpZ2F0ZVNpYmxpbmdzLHJpZ2h0OmIubmF2aWdhdGVTaWJsaW5ncyxkb3duOmIubmF2aWdhdGVTaWJsaW5ncyx1cDpiLm5hdmlnYXRlU2libGluZ3N9KTtiLmZvY3VzRGF0YT17fTtiLnN1YnNjcmliZXJzPW5ldyBFeHQudXRpbC5IYXNoTWFwKCk7Yi5mb2N1c0NoYWluPXt9O0V4dC5hcHBseShjLnBzZXVkb3Mse2ZvY3VzYWJsZTpmdW5jdGlvbihlKXt2YXIgZD1lLmxlbmd0aCxoPVtdLGc9MCxqO2Zvcig7ZzxkO2crKyl7aj1lW2ddO2lmKGouaXNGb2N1c2FibGUoKSl7aC5wdXNoKGopfX1yZXR1cm4gaH0sbmV4dEZvY3VzOmZ1bmN0aW9uKGcsZSxqKXtqPWp8fDE7ZT1wYXJzZUludChlLDEwKTt2YXIgZD1nLmxlbmd0aCxoPWUsaztmb3IoOzspe2lmKChoKz1qKT49ZCl7aD0wfWVsc2V7aWYoaDwwKXtoPWQtMX19aWYoaD09PWUpe3JldHVybltdfWlmKChrPWdbaF0pLmlzRm9jdXNhYmxlKCkpe3JldHVybltrXX19cmV0dXJuW119LHByZXZGb2N1czpmdW5jdGlvbihlLGQpe3JldHVybiB0aGlzLm5leHRGb2N1cyhlLGQsLTEpfSxyb290OmZ1bmN0aW9uKGUpe3ZhciBkPWUubGVuZ3RoLGg9W10sZz0wLGo7Zm9yKDtnPGQ7ZysrKXtqPWVbZ107aWYoIWoub3duZXJDdCl7aC5wdXNoKGopfX1yZXR1cm4gaH19KX0sYWRkWFR5cGVUb1doaXRlbGlzdDpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKEV4dC5pc0FycmF5KGIpKXtFeHQuQXJyYXkuZm9yRWFjaChiLGEuYWRkWFR5cGVUb1doaXRlbGlzdCxhKTtyZXR1cm59aWYoIUV4dC5BcnJheS5jb250YWlucyhhLndoaXRlbGlzdCxiKSl7YS53aGl0ZWxpc3QucHVzaChiKX19LGNsZWFyQ29tcG9uZW50OmZ1bmN0aW9uKGEpe2NsZWFyVGltZW91dCh0aGlzLmNtcEZvY3VzRGVsYXkpO2lmKCFhLmlzRGVzdHJveWVkKXthLmJsdXIoKX19LGRpc2FibGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKCFhLmVuYWJsZWQpe3JldHVybn1kZWxldGUgYS5vcHRpb25zO2EuZW5hYmxlZD1mYWxzZTthLnJlbW92ZURPTSgpO2Eua2V5TmF2LmRpc2FibGUoKTthLmZpcmVFdmVudCgiZGlzYWJsZSIsYSl9LGVuYWJsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGE9PT10cnVlKXthPXtmb2N1c0ZyYW1lOnRydWV9fWIub3B0aW9ucz1hPWF8fHt9O2lmKGIuZW5hYmxlZCl7cmV0dXJufWIuZW5hYmxlZD10cnVlO2IuaW5pdERPTShhKTtiLmtleU5hdi5lbmFibGUoKTtiLmZvY3VzRWwuZm9jdXMoKTtkZWxldGUgYi5mb2N1c2VkQ21wO2IuZmlyZUV2ZW50KCJlbmFibGUiLGIpfSxmb2N1c0xhc3Q6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZihhLmlzV2hpdGVsaXN0ZWQoYS5mb2N1c2VkQ21wKSl7cmV0dXJuIHRydWV9aWYoYS5wcmV2aW91c0ZvY3VzZWRDbXApe2EucHJldmlvdXNGb2N1c2VkQ21wLmZvY3VzKCl9fSxnZXRSb290Q29tcG9uZW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYz1FeHQuQ29tcG9uZW50UXVlcnksYj1jLnF1ZXJ5KCI6Zm9jdXNhYmxlOnJvb3Q6bm90KFtmbG9hdGluZ10pIiksZD1jLnF1ZXJ5KCI6Zm9jdXNhYmxlOnJvb3RbZmxvYXRpbmddIik7ZC5zb3J0KGZ1bmN0aW9uKGcsZSl7cmV0dXJuIGcuZWwuZ2V0WkluZGV4KCk+ZS5lbC5nZXRaSW5kZXgoKX0pO3JldHVybiBkLmNvbmNhdChiKX0saW5pdERPTTpmdW5jdGlvbihjKXt2YXIgZz10aGlzLGI9Zy5mb2N1c0ZyYW1lQ2xzLGU9RXh0LkNvbXBvbmVudFF1ZXJ5LnF1ZXJ5KCJ7Z2V0Rm9jdXNFbCgpfTpub3QoW2ZvY3VzTGlzdGVuZXJBZGRlZF0pIiksZD0wLGE9ZS5sZW5ndGg7aWYoIUV4dC5pc1JlYWR5KXtyZXR1cm4gRXh0Lm9uUmVhZHkoZy5pbml0RE9NLGcpfWZvcig7ZDxhO2QrKyl7ZVtkXS5hZGRGb2N1c0xpc3RlbmVyKCl9aWYoIWcuZm9jdXNFbCl7Zy5mb2N1c0VsPUV4dC5nZXRCb2R5KCk7Zy5mb2N1c0VsLmRvbS50YWJJbmRleD0tMX1pZighZy5mb2N1c0ZyYW1lJiZjLmZvY3VzRnJhbWUpe2cuZm9jdXNGcmFtZT1FeHQuZ2V0Qm9keSgpLmNyZWF0ZUNoaWxkKHtjbHM6YixjaGlsZHJlbjpbe2NsczpiKyItdG9wIn0se2NsczpiKyItYm90dG9tIn0se2NsczpiKyItbGVmdCJ9LHtjbHM6YisiLXJpZ2h0In1dLHN0eWxlOiJ0b3A6IC0xMDBweDsgbGVmdDogLTEwMHB4OyJ9KTtnLmZvY3VzRnJhbWUuc2V0VmlzaWJpbGl0eU1vZGUoRXh0LkVsZW1lbnQuRElTUExBWSk7Zy5mb2N1c0ZyYW1lLmhpZGUoKS5zZXRMZWZ0VG9wKDAsMCl9fSxpc1doaXRlbGlzdGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZFeHQuQXJyYXkuc29tZSh0aGlzLndoaXRlbGlzdCxmdW5jdGlvbihiKXtyZXR1cm4gYS5pc1hUeXBlKGIpfSl9LG5hdmlnYXRlSW46ZnVuY3Rpb24oZyl7dmFyIGM9dGhpcyxhPWMuZm9jdXNlZENtcCxiLGQ7aWYoYy5pc1doaXRlbGlzdGVkKGEpKXtyZXR1cm4gdHJ1ZX1pZighYSl7Yj1jLmdldFJvb3RDb21wb25lbnRzKClbMF07aWYoYil7aWYoYi5nZXRGb2N1c0VsKCk9PT1jLmZvY3VzRWwpe2MuZm9jdXNFbC5ibHVyKCl9Yi5mb2N1cygpfX1lbHNle2Q9YS5oYXNGb2N1cz9FeHQuQ29tcG9uZW50UXVlcnkucXVlcnkoIj46Zm9jdXNhYmxlIixhKVswXTphO2lmKGQpe2QuZm9jdXMoKX1lbHNle2lmKEV4dC5pc0Z1bmN0aW9uKGEub25DbGljaykpe2cuYnV0dG9uPTA7YS5vbkNsaWNrKGcpO2lmKGEuaXNWaXNpYmxlKHRydWUpKXthLmZvY3VzKCl9ZWxzZXtjLm5hdmlnYXRlT3V0KCl9fX19fSxuYXZpZ2F0ZU91dDpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE7aWYoIWIuZm9jdXNlZENtcHx8IShhPWIuZm9jdXNlZENtcC51cCgiOmZvY3VzYWJsZSIpKSl7Yi5mb2N1c0VsLmZvY3VzKCl9ZWxzZXthLmZvY3VzKCl9cmV0dXJuIHRydWV9LG5hdmlnYXRlU2libGluZ3M6ZnVuY3Rpb24oaSxiLG8pe3ZhciBqPXRoaXMsYT1ifHxqLHA9aS5nZXRLZXkoKSxnPUV4dC5FdmVudE9iamVjdCxrPWkuc2hpZnRLZXl8fHA9PWcuTEVGVHx8cD09Zy5VUCxjPXA9PWcuTEVGVHx8cD09Zy5SSUdIVHx8cD09Zy5VUHx8cD09Zy5ET1dOLGg9az8icHJldiI6Im5leHQiLG4sZCxtLGw7bT0oYS5mb2N1c2VkQ21wJiZhLmZvY3VzZWRDbXAuY29tcCl8fGEuZm9jdXNlZENtcDtpZighbSYmIW8pe3JldHVybiB0cnVlfWlmKGMmJmouaXNXaGl0ZWxpc3RlZChtKSl7cmV0dXJuIHRydWV9aWYoIW18fG0uaXMoIjpyb290Iikpe2w9ai5nZXRSb290Q29tcG9uZW50cygpfWVsc2V7bz1vfHxtLnVwKCk7aWYobyl7bD1vLmdldFJlZkl0ZW1zKCl9fWlmKGwpe249bT9FeHQuQXJyYXkuaW5kZXhPZihsLG0pOi0xO2Q9RXh0LkNvbXBvbmVudFF1ZXJ5LnF1ZXJ5KCI6IitoKyJGb2N1cygiK24rIikiLGwpWzBdO2lmKGQmJm0hPT1kKXtkLmZvY3VzKCk7cmV0dXJuIGR9fX0sb25Db21wb25lbnRCbHVyOmZ1bmN0aW9uKGIsYyl7dmFyIGE9dGhpcztpZihhLmZvY3VzZWRDbXA9PT1iKXthLnByZXZpb3VzRm9jdXNlZENtcD1iO2RlbGV0ZSBhLmZvY3VzZWRDbXB9aWYoYS5mb2N1c0ZyYW1lKXthLmZvY3VzRnJhbWUuaGlkZSgpfX0sb25Db21wb25lbnRGb2N1czpmdW5jdGlvbihkLGcpe3ZhciBjPXRoaXMsYT1jLmZvY3VzQ2hhaW4sYjtpZighZC5pc0ZvY3VzYWJsZSgpKXtjLmNsZWFyQ29tcG9uZW50KGQpO2lmKGFbZC5pZF0pe3JldHVybn1iPWQudXAoKTtpZihiKXthW2QuaWRdPXRydWU7Yi5mb2N1cygpfXJldHVybn1jLmZvY3VzQ2hhaW49e307Yy5mb2N1c1Rhc2suZGVsYXkoMTAsbnVsbCxudWxsLFtkLGQuZ2V0Rm9jdXNFbCgpXSl9LGhhbmRsZUNvbXBvbmVudEZvY3VzOmZ1bmN0aW9uKG0saSl7dmFyIGs9dGhpcyxwLGEsZCxoLG8sYixsLGUsZyxjLG4sajtpZihrLmZpcmVFdmVudCgiYmVmb3JlY29tcG9uZW50Zm9jdXMiLGssbSxrLnByZXZpb3VzRm9jdXNlZENtcCk9PT1mYWxzZSl7ay5jbGVhckNvbXBvbmVudChtKTtyZXR1cm59ay5mb2N1c2VkQ21wPW07aWYoay5zaG91bGRTaG93Rm9jdXNGcmFtZShtKSl7cD0iLiIray5mb2N1c0ZyYW1lQ2xzKyItIjthPWsuZm9jdXNGcmFtZTtoPWkuZ2V0UGFnZUJveCgpO289aC50b3A7Yj1oLmxlZnQ7bD1oLndpZHRoO2U9aC5oZWlnaHQ7Zz1hLmNoaWxkKHArInRvcCIpO2M9YS5jaGlsZChwKyJib3R0b20iKTtuPWEuY2hpbGQocCsibGVmdCIpO2o9YS5jaGlsZChwKyJyaWdodCIpO2cuc2V0V2lkdGgobCkuc2V0TGVmdFRvcChiLG8pO2Muc2V0V2lkdGgobCkuc2V0TGVmdFRvcChiLG8rZS0yKTtuLnNldEhlaWdodChlLTIpLnNldExlZnRUb3AoYixvKzIpO2ouc2V0SGVpZ2h0KGUtMikuc2V0TGVmdFRvcChiK2wtMixvKzIpO2Euc2hvdygpfWsuZmlyZUV2ZW50KCJjb21wb25lbnRmb2N1cyIsayxtLGsucHJldmlvdXNGb2N1c2VkQ21wKX0sb25Db21wb25lbnRIaWRlOmZ1bmN0aW9uKGUpe3ZhciBkPXRoaXMsYj1mYWxzZSxhPWQuZm9jdXNlZENtcCxjO2lmKGEpe2I9ZS5oYXNGb2N1c3x8KGUuaXNDb250YWluZXImJmUuaXNBbmNlc3RvcihkLmZvY3VzZWRDbXApKX1kLmNsZWFyQ29tcG9uZW50KGUpO2lmKGImJihjPWUudXAoIjpmb2N1c2FibGUiKSkpe2MuZm9jdXMoKX1lbHNle2QuZm9jdXNFbC5mb2N1cygpfX0sb25Db21wb25lbnREZXN0cm95OmZ1bmN0aW9uKCl7fSxyZW1vdmVET006ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuZW5hYmxlZHx8YS5zdWJzY3JpYmVycy5sZW5ndGgpe3JldHVybn1FeHQuZGVzdHJveShhLmZvY3VzRnJhbWUpO2RlbGV0ZSBhLmZvY3VzRWw7ZGVsZXRlIGEuZm9jdXNGcmFtZX0scmVtb3ZlWFR5cGVGcm9tV2hpdGVsaXN0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoRXh0LmlzQXJyYXkoYikpe0V4dC5BcnJheS5mb3JFYWNoKGIsYS5yZW1vdmVYVHlwZUZyb21XaGl0ZWxpc3QsYSk7cmV0dXJufUV4dC5BcnJheS5yZW1vdmUoYS53aGl0ZWxpc3QsYil9LHNldHVwU3Vic2NyaWJlcktleXM6ZnVuY3Rpb24oYSxnKXt2YXIgZT10aGlzLGQ9YS5nZXRGb2N1c0VsKCksYz1nLnNjb3BlLGI9e2JhY2tzcGFjZTplLmZvY3VzTGFzdCxlbnRlcjplLm5hdmlnYXRlSW4sZXNjOmUubmF2aWdhdGVPdXQsc2NvcGU6ZX0saD1mdW5jdGlvbihpKXtpZihlLmZvY3VzZWRDbXA9PT1hKXtyZXR1cm4gZS5uYXZpZ2F0ZVNpYmxpbmdzKGksZSxhKX1lbHNle3JldHVybiBlLm5hdmlnYXRlU2libGluZ3MoaSl9fTtFeHQuaXRlcmF0ZShnLGZ1bmN0aW9uKGosaSl7YltqXT1mdW5jdGlvbihsKXt2YXIgaz1oKGwpO2lmKEV4dC5pc0Z1bmN0aW9uKGkpJiZpLmNhbGwoY3x8YSxsLGspPT09dHJ1ZSl7cmV0dXJuIHRydWV9cmV0dXJuIGt9fSxlKTtyZXR1cm4gbmV3IEV4dC51dGlsLktleU5hdihkLGIpfSxzaG91bGRTaG93Rm9jdXNGcmFtZTpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE9Yi5vcHRpb25zfHx7fSxlPWMuZ2V0Rm9jdXNFbCgpLGQ9RXh0LmdldERvbShlKS50YWdOYW1lO2lmKCFiLmZvY3VzRnJhbWV8fCFjKXtyZXR1cm4gZmFsc2V9aWYoYS5mb2N1c0ZyYW1lKXtyZXR1cm4gdHJ1ZX1pZihiLmZvY3VzRGF0YVtjLmlkXS5mb2N1c0ZyYW1lKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9fSk7RXh0LmRlZmluZSgiRXh0LkltZyIse2V4dGVuZDoiRXh0LkNvbXBvbmVudCIsYWxpYXM6WyJ3aWRnZXQuaW1hZ2UiLCJ3aWRnZXQuaW1hZ2Vjb21wb25lbnQiXSxhdXRvRWw6ImltZyIsc3JjOiIiLGFsdDoiIixpbWdDbHM6IiIsZ2V0RWxDb25maWc6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9Yy5jYWxsUGFyZW50KCksYTtpZihjLmF1dG9FbD09ImltZyIpe2E9Yn1lbHNle2IuY249W2E9e3RhZzoiaW1nIixpZDpjLmlkKyItaW1nIn1dfWlmKGMuaW1nQ2xzKXthLmNscz0oYS5jbHM/YS5jbHMrIiAiOiIiKStjLmltZ0Nsc31hLnNyYz1jLnNyY3x8RXh0LkJMQU5LX0lNQUdFX1VSTDtpZihjLmFsdCl7YS5hbHQ9Yy5hbHR9cmV0dXJuIGJ9LG9uUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhO2IuY2FsbFBhcmVudChhcmd1bWVudHMpO2E9Yi5lbDtiLmltZ0VsPShiLmF1dG9FbD09ImltZyIpP2E6YS5nZXRCeUlkKGIuaWQrIi1pbWciKX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy5pbWdFbCk7dGhpcy5pbWdFbD1udWxsO3RoaXMuY2FsbFBhcmVudCgpfSxzZXRTcmM6ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcyxiPWEuaW1nRWw7YS5zcmM9YztpZihiKXtiLmRvbS5zcmM9Y3x8RXh0LkJMQU5LX0lNQUdFX1VSTH19fSk7RXh0LmRlZmluZSgiRXh0LkxheWVyIix7ZXh0ZW5kOiJFeHQuRWxlbWVudCIsdXNlczpbIkV4dC5TaGFkb3ciXSxzdGF0aWNzOntzaGltczpbXX0saXNMYXllcjp0cnVlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGIsYSl7Yj1ifHx7fTt2YXIgYz10aGlzLGQ9RXh0LkRvbUhlbHBlcixnPWIucGFyZW50RWwsZT1nP0V4dC5nZXREb20oZyk6ZG9jdW1lbnQuYm9keSxoPWIuaGlkZU1vZGU7aWYoYSl7Yy5kb209RXh0LmdldERvbShhKX1pZighYy5kb20pe2MuZG9tPWQuYXBwZW5kKGUsYi5kaHx8e3RhZzoiZGl2IixjbHM6RXh0LmJhc2VDU1NQcmVmaXgrImxheWVyIn0pfWVsc2V7Yy5hZGRDbHMoRXh0LmJhc2VDU1NQcmVmaXgrImxheWVyIik7aWYoIWMuZG9tLnBhcmVudE5vZGUpe2UuYXBwZW5kQ2hpbGQoYy5kb20pfX1pZihiLmlkKXtjLmlkPWMuZG9tLmlkPWIuaWR9ZWxzZXtjLmlkPUV4dC5pZChjLmRvbSl9RXh0LkVsZW1lbnQuYWRkVG9DYWNoZShjKTtpZihiLmNscyl7Yy5hZGRDbHMoYi5jbHMpfWMuY29uc3RyYWluPWIuY29uc3RyYWluIT09ZmFsc2U7aWYoaCl7Yy5zZXRWaXNpYmlsaXR5TW9kZShFeHQuRWxlbWVudFtoLnRvVXBwZXJDYXNlKCldKTtpZihjLnZpc2liaWxpdHlNb2RlPT1FeHQuRWxlbWVudC5BU0NMQVNTKXtjLnZpc2liaWxpdHlDbHM9Yi52aXNpYmlsaXR5Q2xzfX1lbHNle2lmKGIudXNlRGlzcGxheSl7Yy5zZXRWaXNpYmlsaXR5TW9kZShFeHQuRWxlbWVudC5ESVNQTEFZKX1lbHNle2Muc2V0VmlzaWJpbGl0eU1vZGUoRXh0LkVsZW1lbnQuVklTSUJJTElUWSl9fWlmKGIuc2hhZG93KXtjLnNoYWRvd09mZnNldD1iLnNoYWRvd09mZnNldHx8NDtjLnNoYWRvdz1uZXcgRXh0LlNoYWRvdyh7b2Zmc2V0OmMuc2hhZG93T2Zmc2V0LG1vZGU6Yi5zaGFkb3d9KTtjLmRpc2FibGVTaGFkb3coKX1lbHNle2Muc2hhZG93T2Zmc2V0PTB9Yy51c2VTaGltPWIuc2hpbSE9PWZhbHNlJiZFeHQudXNlU2hpbXM7aWYoYi5oaWRkZW49PT10cnVlKXtjLmhpZGUoKX1lbHNle2Muc2hvdygpfX0sZ2V0WkluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KCh0aGlzLmdldFNoaW0oKXx8dGhpcykuZ2V0U3R5bGUoInotaW5kZXgiKSwxMCl9LGdldFNoaW06ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGMsYTtpZighYi51c2VTaGltKXtyZXR1cm4gbnVsbH1pZighYi5zaGltKXtjPWIuc2VsZi5zaGltcy5zaGlmdCgpO2lmKCFjKXtjPWIuY3JlYXRlU2hpbSgpO2MuZW5hYmxlRGlzcGxheU1vZGUoImJsb2NrIik7Yy5oaWRlKCl9YT1iLmRvbS5wYXJlbnROb2RlO2lmKGMuZG9tLnBhcmVudE5vZGUhPWEpe2EuaW5zZXJ0QmVmb3JlKGMuZG9tLGIuZG9tKX1iLnNoaW09Y31yZXR1cm4gYi5zaGltfSxoaWRlU2hpbTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5zaGltKXthLnNoaW0uc2V0RGlzcGxheWVkKGZhbHNlKTthLnNlbGYuc2hpbXMucHVzaChhLnNoaW0pO2RlbGV0ZSBhLnNoaW19fSxkaXNhYmxlU2hhZG93OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnNoYWRvdyYmIWEuc2hhZG93RGlzYWJsZWQpe2Euc2hhZG93RGlzYWJsZWQ9dHJ1ZTthLnNoYWRvdy5oaWRlKCk7YS5sYXN0U2hhZG93T2Zmc2V0PWEuc2hhZG93T2Zmc2V0O2Euc2hhZG93T2Zmc2V0PTB9fSxlbmFibGVTaGFkb3c6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihiLnNoYWRvdyYmYi5zaGFkb3dEaXNhYmxlZCl7Yi5zaGFkb3dEaXNhYmxlZD1mYWxzZTtiLnNoYWRvd09mZnNldD1iLmxhc3RTaGFkb3dPZmZzZXQ7ZGVsZXRlIGIubGFzdFNoYWRvd09mZnNldDtpZihhKXtiLnN5bmModHJ1ZSl9fX0sc3luYzpmdW5jdGlvbihiKXt2YXIgaj10aGlzLG49ai5zaGFkb3csaSxlLGEsZCxjLG8sbSxnLGs7aWYoIWoudXBkYXRpbmcmJmouaXNWaXNpYmxlKCkmJihufHxqLnVzZVNoaW0pKXtkPWouZ2V0U2hpbSgpO2M9ai5nZXRMb2NhbFgoKTtvPWouZ2V0TG9jYWxZKCk7bT1qLmRvbS5vZmZzZXRXaWR0aDtnPWouZG9tLm9mZnNldEhlaWdodDtpZihuJiYhai5zaGFkb3dEaXNhYmxlZCl7aWYoYiYmIW4uaXNWaXNpYmxlKCkpe24uc2hvdyhqKX1lbHNle24ucmVhbGlnbihjLG8sbSxnKX1pZihkKXtrPWQuZ2V0U3R5bGUoInotaW5kZXgiKTtpZihrPmouemluZGV4KXtqLnNoaW0uc2V0U3R5bGUoInotaW5kZXgiLGouemluZGV4LTIpfWQuc2hvdygpO2lmKG4uaXNWaXNpYmxlKCkpe2k9bi5lbC5nZXRYWSgpO2U9ZC5kb20uc3R5bGU7YT1uLmVsLmdldFNpemUoKTtpZihFeHQuc3VwcG9ydHMuQ1NTM0JveFNoYWRvdyl7YS5oZWlnaHQrPTY7YS53aWR0aCs9NDtpWzBdLT0yO2lbMV0tPTR9ZS5sZWZ0PShpWzBdKSsicHgiO2UudG9wPShpWzFdKSsicHgiO2Uud2lkdGg9KGEud2lkdGgpKyJweCI7ZS5oZWlnaHQ9KGEuaGVpZ2h0KSsicHgifWVsc2V7ZC5zZXRTaXplKG0sZyk7ZC5zZXRMZWZ0VG9wKGMsbyl9fX1lbHNle2lmKGQpe2s9ZC5nZXRTdHlsZSgiei1pbmRleCIpO2lmKGs+ai56aW5kZXgpe2ouc2hpbS5zZXRTdHlsZSgiei1pbmRleCIsai56aW5kZXgtMil9ZC5zaG93KCk7ZC5zZXRTaXplKG0sZyk7ZC5zZXRMZWZ0VG9wKGMsbyl9fX1yZXR1cm4gan0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5oaWRlVW5kZXJzKCk7dGhpcy5jYWxsUGFyZW50KCl9LGJlZ2luVXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy51cGRhdGluZz10cnVlfSxlbmRVcGRhdGU6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0aW5nPWZhbHNlO3RoaXMuc3luYyh0cnVlKX0saGlkZVVuZGVyczpmdW5jdGlvbigpe2lmKHRoaXMuc2hhZG93KXt0aGlzLnNoYWRvdy5oaWRlKCl9dGhpcy5oaWRlU2hpbSgpfSxjb25zdHJhaW5YWTpmdW5jdGlvbigpe2lmKHRoaXMuY29uc3RyYWluKXt2YXIgZz1FeHQuRWxlbWVudC5nZXRWaWV3V2lkdGgoKSxiPUV4dC5FbGVtZW50LmdldFZpZXdIZWlnaHQoKSxsPUV4dC5nZXREb2MoKS5nZXRTY3JvbGwoKSxrPXRoaXMuZ2V0WFkoKSxpPWtbMF0sZT1rWzFdLGE9dGhpcy5zaGFkb3dPZmZzZXQsaj10aGlzLmRvbS5vZmZzZXRXaWR0aCthLGM9dGhpcy5kb20ub2Zmc2V0SGVpZ2h0K2EsZD1mYWxzZTtpZigoaStqKT5nK2wubGVmdCl7aT1nLWotYTtkPXRydWV9aWYoKGUrYyk+YitsLnRvcCl7ZT1iLWMtYTtkPXRydWV9aWYoaTxsLmxlZnQpe2k9bC5sZWZ0O2Q9dHJ1ZX1pZihlPGwudG9wKXtlPWwudG9wO2Q9dHJ1ZX1pZihkKXtFeHQuTGF5ZXIuc3VwZXJjbGFzcy5zZXRYWS5jYWxsKHRoaXMsW2ksZV0pO3RoaXMuc3luYygpfX1yZXR1cm4gdGhpc30sZ2V0Q29uc3RyYWluT2Zmc2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2hhZG93T2Zmc2V0fSxzZXRWaXNpYmxlOmZ1bmN0aW9uKGUsYixkLGgsZyl7dmFyIGM9dGhpcyxhO2E9ZnVuY3Rpb24oKXtpZihlKXtjLnN5bmModHJ1ZSl9aWYoaCl7aCgpfX07aWYoIWUpe2MuaGlkZVVuZGVycyh0cnVlKX1jLmNhbGxQYXJlbnQoW2UsYixkLGgsZ10pO2lmKCFiKXthKCl9cmV0dXJuIGN9LGJlZm9yZUZ4OmZ1bmN0aW9uKCl7dGhpcy5iZWZvcmVBY3Rpb24oKTtyZXR1cm4gdGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGFmdGVyRng6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLnN5bmModGhpcy5pc1Zpc2libGUoKSl9LGJlZm9yZUFjdGlvbjpmdW5jdGlvbigpe2lmKCF0aGlzLnVwZGF0aW5nJiZ0aGlzLnNoYWRvdyl7dGhpcy5zaGFkb3cuaGlkZSgpfX0sc2V0TGVmdDpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5zeW5jKCl9LHNldFRvcDpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5zeW5jKCl9LHNldExlZnRUb3A6ZnVuY3Rpb24oYixhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5zeW5jKCl9LHNldFhZOmZ1bmN0aW9uKGQsYSxjLGcsZSl7dmFyIGI9dGhpcztnPWIuY3JlYXRlQ0IoZyk7Yi5maXhEaXNwbGF5KCk7Yi5iZWZvcmVBY3Rpb24oKTtiLmNhbGxQYXJlbnQoW2QsYSxjLGcsZV0pO2lmKCFhKXtnKCl9cmV0dXJuIGJ9LGNyZWF0ZUNCOmZ1bmN0aW9uKGMpe3ZhciBhPXRoaXMsYj1hLnNoYWRvdyYmYS5zaGFkb3cuaXNWaXNpYmxlKCk7cmV0dXJuIGZ1bmN0aW9uKCl7YS5jb25zdHJhaW5YWSgpO2Euc3luYyhiKTtpZihjKXtjKCl9fX0sc2V0WDpmdW5jdGlvbihhLGIsYyxlLGQpe3RoaXMuc2V0WFkoW2EsdGhpcy5nZXRZKCldLGIsYyxlLGQpO3JldHVybiB0aGlzfSxzZXRZOmZ1bmN0aW9uKGUsYSxiLGQsYyl7dGhpcy5zZXRYWShbdGhpcy5nZXRYKCksZV0sYSxiLGQsYyk7cmV0dXJuIHRoaXN9LHNldFNpemU6ZnVuY3Rpb24oYSxjLGIsZSxpLGcpe3ZhciBkPXRoaXM7aT1kLmNyZWF0ZUNCKGkpO2QuYmVmb3JlQWN0aW9uKCk7ZC5jYWxsUGFyZW50KFthLGMsYixlLGksZ10pO2lmKCFiKXtpKCl9cmV0dXJuIGR9LHNldFdpZHRoOmZ1bmN0aW9uKGEsYixkLGcsZSl7dmFyIGM9dGhpcztnPWMuY3JlYXRlQ0IoZyk7Yy5iZWZvcmVBY3Rpb24oKTtjLmNhbGxQYXJlbnQoW2EsYixkLGcsZV0pO2lmKCFiKXtnKCl9cmV0dXJuIGN9LHNldEhlaWdodDpmdW5jdGlvbihiLGEsZCxnLGUpe3ZhciBjPXRoaXM7Zz1jLmNyZWF0ZUNCKGcpO2MuYmVmb3JlQWN0aW9uKCk7Yy5jYWxsUGFyZW50KFtiLGEsZCxnLGVdKTtpZighYSl7ZygpfXJldHVybiBjfSxzZXRCb3VuZHM6ZnVuY3Rpb24oaCxnLGEsaixiLGMsaSxkKXt2YXIgZT10aGlzO2k9ZS5jcmVhdGVDQihpKTtlLmJlZm9yZUFjdGlvbigpO2lmKCFiKXtFeHQuTGF5ZXIuc3VwZXJjbGFzcy5zZXRYWS5jYWxsKGUsW2gsZ10pO0V4dC5MYXllci5zdXBlcmNsYXNzLnNldFNpemUuY2FsbChlLGEsaik7aSgpfWVsc2V7ZS5jYWxsUGFyZW50KFtoLGcsYSxqLGIsYyxpLGRdKX1yZXR1cm4gZX0sc2V0WkluZGV4OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi56aW5kZXg9YTtpZihiLmdldFNoaW0oKSl7Yi5zaGltLnNldFN0eWxlKCJ6LWluZGV4IixhKyspfWlmKGIuc2hhZG93KXtiLnNoYWRvdy5zZXRaSW5kZXgoYSsrKX1yZXR1cm4gYi5zZXRTdHlsZSgiei1pbmRleCIsYSl9LG9uT3BhY2l0eVNldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNoYWRvdztpZihiKXtiLnNldE9wYWNpdHkoYSl9fX0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLkJpbmRhYmxlIix7YmluZFN0b3JlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuc3RvcmU7aWYoIWImJmMuc3RvcmUpe2Mub25VbmJpbmRTdG9yZShkLGIpO2lmKGEhPT1kJiZkLmF1dG9EZXN0cm95KXtkLmRlc3Ryb3lTdG9yZSgpfWVsc2V7Yy51bmJpbmRTdG9yZUxpc3RlbmVycyhkKX19aWYoYSl7YT1FeHQuZGF0YS5TdG9yZU1hbmFnZXIubG9va3VwKGEpO2MuYmluZFN0b3JlTGlzdGVuZXJzKGEpO2Mub25CaW5kU3RvcmUoYSxiKX1jLnN0b3JlPWF8fG51bGw7cmV0dXJuIGN9LGdldFN0b3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcmV9LHVuYmluZFN0b3JlTGlzdGVuZXJzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc3RvcmVMaXN0ZW5lcnM7aWYoYil7YS51bihiKX19LGJpbmRTdG9yZUxpc3RlbmVyczpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGI9RXh0LmFwcGx5KHt9LGMuZ2V0U3RvcmVMaXN0ZW5lcnMoKSk7aWYoIWIuc2NvcGUpe2Iuc2NvcGU9Y31jLnN0b3JlTGlzdGVuZXJzPWI7YS5vbihiKX0sZ2V0U3RvcmVMaXN0ZW5lcnM6RXh0LmVtcHR5Rm4sb25VbmJpbmRTdG9yZTpFeHQuZW1wdHlGbixvbkJpbmRTdG9yZTpFeHQuZW1wdHlGbn0pO0V4dC5kZWZpbmUoIkV4dC5Mb2FkTWFzayIse2V4dGVuZDoiRXh0LkNvbXBvbmVudCIsYWxpYXM6IndpZGdldC5sb2FkbWFzayIsbWl4aW5zOntmbG9hdGluZzoiRXh0LnV0aWwuRmxvYXRpbmciLGJpbmRhYmxlOiJFeHQudXRpbC5CaW5kYWJsZSJ9LHVzZXM6WyJFeHQuZGF0YS5TdG9yZU1hbmFnZXIiXSxtc2c6IkxvYWRpbmcuLi4iLG1zZ0NsczpFeHQuYmFzZUNTU1ByZWZpeCsibWFzay1sb2FkaW5nIixtYXNrQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJtYXNrIix1c2VNc2c6dHJ1ZSx1c2VUYXJnZXRFbDpmYWxzZSxiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJtYXNrLW1zZyIsY2hpbGRFbHM6WyJtc2dFbCJdLHJlbmRlclRwbDonPGRpdiBpZD0ie2lkfS1tc2dFbCIgc3R5bGU9InBvc2l0aW9uOnJlbGF0aXZlIiBjbGFzcz0ie1t2YWx1ZXMuJGNvbXAubXNnQ2xzXX0iPjwvZGl2PicsZmxvYXRpbmc6e3NoYWRvdzoiZnJhbWUifSxmb2N1c09uVG9Gcm9udDpmYWxzZSxicmluZ1BhcmVudFRvRnJvbnQ6ZmFsc2UsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO2lmKCFhLmlzQ29tcG9uZW50KXthPUV4dC5nZXQoYSk7dGhpcy5pc0VsZW1lbnQ9dHJ1ZX1jLm93bmVyQ3Q9YTtpZighdGhpcy5pc0VsZW1lbnQpe2MuYmluZENvbXBvbmVudChhKX1jLmNhbGxQYXJlbnQoW2JdKTtpZihjLnN0b3JlKXtjLmJpbmRTdG9yZShjLnN0b3JlLHRydWUpfX0sYmluZENvbXBvbmVudDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGI9e3Njb3BlOnRoaXMscmVzaXplOmMuc2l6ZU1hc2ssYWRkZWQ6Yy5vbkNvbXBvbmVudEFkZGVkLHJlbW92ZWQ6Yy5vbkNvbXBvbmVudFJlbW92ZWR9LGQ9RXh0LmNvbnRhaW5lci5Db250YWluZXIuaGllcmFyY2h5RXZlbnRTb3VyY2U7aWYoYS5mbG9hdGluZyl7Yi5tb3ZlPWMuc2l6ZU1hc2s7Yy5hY3RpdmVPd25lcj1hfWVsc2V7aWYoYS5vd25lckN0KXtjLm9uQ29tcG9uZW50QWRkZWQoYS5vd25lckN0KX1lbHNle2MucHJldmVudEJyaW5nVG9Gcm9udD10cnVlfX1jLm1vbihhLGIpO2MubW9uKGQse3Nob3c6Yy5vbkNvbnRhaW5lclNob3csaGlkZTpjLm9uQ29udGFpbmVySGlkZSxleHBhbmQ6Yy5vbkNvbnRhaW5lckV4cGFuZCxjb2xsYXBzZTpjLm9uQ29udGFpbmVyQ29sbGFwc2Usc2NvcGU6Y30pfSxvbkNvbXBvbmVudEFkZGVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7ZGVsZXRlIGIuYWN0aXZlT3duZXI7Yi5mbG9hdFBhcmVudD1hO2lmKCFhLmZsb2F0aW5nKXthPWEudXAoIltmbG9hdGluZ10iKX1pZihhKXtiLmFjdGl2ZU93bmVyPWE7Yi5tb24oYSwibW92ZSIsYi5zaXplTWFzayxiKX1hPWIuZmxvYXRQYXJlbnQub3duZXJDdDtpZihiLnJlbmRlcmVkJiZiLmlzVmlzaWJsZSgpJiZhKXtiLmZsb2F0T3duZXI9YTtiLm1vbihhLCJhZnRlcmxheW91dCIsYi5zaXplTWFzayxiLHtzaW5nbGU6dHJ1ZX0pfX0sb25Db21wb25lbnRSZW1vdmVkOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsZD1jLmFjdGl2ZU93bmVyLGI9Yy5mbG9hdE93bmVyO2lmKGQpe2MubXVuKGQsIm1vdmUiLGMuc2l6ZU1hc2ssYyl9aWYoYil7Yy5tdW4oYiwiYWZ0ZXJsYXlvdXQiLGMuc2l6ZU1hc2ssYyl9ZGVsZXRlIGMuYWN0aXZlT3duZXI7ZGVsZXRlIGMuZmxvYXRPd25lcn0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLmNvbnRhaW5lcj10aGlzLmZsb2F0UGFyZW50LmdldENvbnRlbnRUYXJnZXQoKX0sb25Db250YWluZXJTaG93OmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNBY3RpdmVDb250YWluZXIoYSkpe3RoaXMub25Db21wb25lbnRTaG93KCl9fSxvbkNvbnRhaW5lckhpZGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5pc0FjdGl2ZUNvbnRhaW5lcihhKSl7dGhpcy5vbkNvbXBvbmVudEhpZGUoKX19LG9uQ29udGFpbmVyRXhwYW5kOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNBY3RpdmVDb250YWluZXIoYSkpe3RoaXMub25Db21wb25lbnRTaG93KCl9fSxvbkNvbnRhaW5lckNvbGxhcHNlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNBY3RpdmVDb250YWluZXIoYSkpe3RoaXMub25Db21wb25lbnRIaWRlKCl9fSxpc0FjdGl2ZUNvbnRhaW5lcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pc0Rlc2NlbmRhbnRPZihhKX0sb25Db21wb25lbnRIaWRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnJlbmRlcmVkJiZhLmlzVmlzaWJsZSgpKXthLmhpZGUoKTthLnNob3dOZXh0PXRydWV9fSxvbkNvbXBvbmVudFNob3c6ZnVuY3Rpb24oKXtpZih0aGlzLnNob3dOZXh0KXt0aGlzLnNob3coKX1kZWxldGUgdGhpcy5zaG93TmV4dH0sc2l6ZU1hc2s6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI7aWYoYS5yZW5kZXJlZCYmYS5pc1Zpc2libGUoKSl7YS5jZW50ZXIoKTtiPWEuZ2V0TWFza1RhcmdldCgpO2EuZ2V0TWFza0VsKCkuc2hvdygpLnNldFNpemUoYi5nZXRTaXplKCkpLmFsaWduVG8oYiwidGwtdGwiKX19LGJpbmRTdG9yZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7Yy5taXhpbnMuYmluZGFibGUuYmluZFN0b3JlLmFwcGx5KGMsYXJndW1lbnRzKTthPWMuc3RvcmU7aWYoYSYmYS5pc0xvYWRpbmcoKSl7Yy5vbkJlZm9yZUxvYWQoKX19LGdldFN0b3JlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7cmV0dXJue2JlZm9yZWxvYWQ6dGhpcy5vbkJlZm9yZUxvYWQsbG9hZDp0aGlzLm9uTG9hZCxleGNlcHRpb246dGhpcy5vbkxvYWQsY2FjaGVtaXNzOnRoaXMub25CZWZvcmVMb2FkLGNhY2hlZmlsbGVkOnRoaXMub25Mb2FkfX0sb25EaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYodGhpcy5sb2FkaW5nKXt0aGlzLm9uTG9hZCgpfX0sZ2V0T3duZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25lckN0fHx0aGlzLmZsb2F0UGFyZW50fSxnZXRNYXNrVGFyZ2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRPd25lcigpO3JldHVybiB0aGlzLnVzZVRhcmdldEVsP2EuZ2V0VGFyZ2V0RWwoKTphLmdldEVsKCl9LG9uQmVmb3JlTG9hZDpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYT1jLmdldE93bmVyKCksYjtpZighYy5kaXNhYmxlZCl7Yy5sb2FkaW5nPXRydWU7aWYoYS5jb21wb25lbnRMYXlvdXRDb3VudGVyKXtjLm1heWJlU2hvdygpfWVsc2V7Yj1hLmFmdGVyQ29tcG9uZW50TGF5b3V0O2EuYWZ0ZXJDb21wb25lbnRMYXlvdXQ9ZnVuY3Rpb24oKXthLmFmdGVyQ29tcG9uZW50TGF5b3V0PWI7Yi5hcHBseShhLGFyZ3VtZW50cyk7Yy5tYXliZVNob3coKX19fX0sbWF5YmVTaG93OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuZ2V0T3duZXIoKTtpZighYS5pc1Zpc2libGUodHJ1ZSkpe2Iuc2hvd05leHQ9dHJ1ZX1lbHNle2lmKGIubG9hZGluZyYmYS5yZW5kZXJlZCl7Yi5zaG93KCl9fX0sZ2V0TWFza0VsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm4gYS5tYXNrRWx8fChhLm1hc2tFbD1hLmVsLmluc2VydFNpYmxpbmcoe2NsczphLm1hc2tDbHMsc3R5bGU6e3pJbmRleDphLmVsLmdldFN0eWxlKCJ6SW5kZXgiKS0yfX0sImJlZm9yZSIpKX0sb25TaG93OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIubXNnRWw7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7Yi5sb2FkaW5nPXRydWU7aWYoYi51c2VNc2cpe2Euc2hvdygpLnVwZGF0ZShiLm1zZyl9ZWxzZXthLnBhcmVudCgpLmhpZGUoKX19LGhpZGU6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRWxlbWVudCl7dGhpcy5vd25lckN0LnVubWFzaygpO3RoaXMuZmlyZUV2ZW50KCJoaWRlIix0aGlzKTtyZXR1cm59ZGVsZXRlIHRoaXMuc2hvd05leHQ7cmV0dXJuIHRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxvbkhpZGU6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt0aGlzLmdldE1hc2tFbCgpLmhpZGUoKX0sc2hvdzpmdW5jdGlvbigpe2lmKHRoaXMuaXNFbGVtZW50KXt0aGlzLm93bmVyQ3QubWFzayh0aGlzLnVzZU1zZz90aGlzLm1zZzoiIix0aGlzLm1zZ0Nscyk7dGhpcy5maXJlRXZlbnQoInNob3ciLHRoaXMpO3JldHVybn1yZXR1cm4gdGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGFmdGVyU2hvdzpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3RoaXMuc2l6ZU1hc2soKX0sc2V0WkluZGV4OmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMsYT1jLmFjdGl2ZU93bmVyO2lmKGEpe2I9cGFyc2VJbnQoYS5lbC5nZXRTdHlsZSgiekluZGV4IiksMTApKzF9Yy5nZXRNYXNrRWwoKS5zZXRTdHlsZSgiekluZGV4IixiLTEpO3JldHVybiBjLm1peGlucy5mbG9hdGluZy5zZXRaSW5kZXguYXBwbHkoYyxhcmd1bWVudHMpfSxvbkxvYWQ6ZnVuY3Rpb24oKXt0aGlzLmxvYWRpbmc9ZmFsc2U7dGhpcy5oaWRlKCl9LG9uRGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5pc0VsZW1lbnQpe2Eub3duZXJDdC51bm1hc2soKX1FeHQuZGVzdHJveShhLm1hc2tFbCk7YS5jYWxsUGFyZW50KCl9fSk7RXh0LmRlZmluZSgiRXh0LmRhdGEuYXNzb2NpYXRpb24uQXNzb2NpYXRpb24iLHthbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5kYXRhLkFzc29jaWF0aW9uIixwcmltYXJ5S2V5OiJpZCIsZGVmYXVsdFJlYWRlclR5cGU6Impzb24iLGlzQXNzb2NpYXRpb246dHJ1ZSxpbml0aWFsQ29uZmlnOm51bGwsc3RhdGljczp7QVVUT19JRDoxMDAwLGNyZWF0ZTpmdW5jdGlvbihhKXtpZihFeHQuaXNTdHJpbmcoYSkpe2E9e3R5cGU6YX19c3dpdGNoKGEudHlwZSl7Y2FzZSJiZWxvbmdzVG8iOnJldHVybiBuZXcgRXh0LmRhdGEuYXNzb2NpYXRpb24uQmVsb25nc1RvKGEpO2Nhc2UiaGFzTWFueSI6cmV0dXJuIG5ldyBFeHQuZGF0YS5hc3NvY2lhdGlvbi5IYXNNYW55KGEpO2Nhc2UiaGFzT25lIjpyZXR1cm4gbmV3IEV4dC5kYXRhLmFzc29jaWF0aW9uLkhhc09uZShhKTtkZWZhdWx0On1yZXR1cm4gYX19LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5hcHBseSh0aGlzLGEpO3ZhciBkPXRoaXMsYj1FeHQuTW9kZWxNYW5hZ2VyLnR5cGVzLGM9YS5vd25lck1vZGVsLGc9YS5hc3NvY2lhdGVkTW9kZWwsZT1iW2NdLGg9YltnXTtkLmluaXRpYWxDb25maWc9YTtkLm93bmVyTW9kZWw9ZTtkLmFzc29jaWF0ZWRNb2RlbD1oO0V4dC5hcHBseUlmKGQse293bmVyTmFtZTpjLGFzc29jaWF0ZWROYW1lOmd9KTtkLmFzc29jaWF0aW9uSWQ9ImFzc29jaWF0aW9uIisoKytkLnN0YXRpY3MoKS5BVVRPX0lEKX0sZ2V0UmVhZGVyOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxhPWMucmVhZGVyLGI9Yy5hc3NvY2lhdGVkTW9kZWw7aWYoYSl7aWYoRXh0LmlzU3RyaW5nKGEpKXthPXt0eXBlOmF9fWlmKGEuaXNSZWFkZXIpe2Euc2V0TW9kZWwoYil9ZWxzZXtFeHQuYXBwbHlJZihhLHttb2RlbDpiLHR5cGU6Yy5kZWZhdWx0UmVhZGVyVHlwZX0pfWMucmVhZGVyPUV4dC5jcmVhdGVCeUFsaWFzKCJyZWFkZXIuIithLnR5cGUsYSl9cmV0dXJuIGMucmVhZGVyfHxudWxsfX0pO0V4dC5kZWZpbmUoIkV4dC5Nb2RlbE1hbmFnZXIiLHtleHRlbmQ6IkV4dC5BYnN0cmFjdE1hbmFnZXIiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0Lk1vZGVsTWdyIixyZXF1aXJlczpbIkV4dC5kYXRhLmFzc29jaWF0aW9uLkFzc29jaWF0aW9uIl0sc2luZ2xldG9uOnRydWUsdHlwZU5hbWU6Im10eXBlIixhc3NvY2lhdGlvblN0YWNrOltdLHJlZ2lzdGVyVHlwZTpmdW5jdGlvbihjLGIpe3ZhciBkPWIucHJvdG90eXBlLGE7aWYoZCYmZC5pc01vZGVsKXthPWJ9ZWxzZXtpZighYi5leHRlbmQpe2IuZXh0ZW5kPSJFeHQuZGF0YS5Nb2RlbCJ9YT1FeHQuZGVmaW5lKGMsYil9dGhpcy50eXBlc1tjXT1hO3JldHVybiBhfSxvbk1vZGVsRGVmaW5lZDpmdW5jdGlvbihjKXt2YXIgYT10aGlzLmFzc29jaWF0aW9uU3RhY2ssZz1hLmxlbmd0aCxlPVtdLGIsZCxoO2ZvcihkPTA7ZDxnO2QrKyl7Yj1hW2RdO2lmKGIuYXNzb2NpYXRlZE1vZGVsPT1jLm1vZGVsTmFtZSl7ZS5wdXNoKGIpfX1mb3IoZD0wLGc9ZS5sZW5ndGg7ZDxnO2QrKyl7aD1lW2RdO3RoaXMudHlwZXNbaC5vd25lck1vZGVsXS5wcm90b3R5cGUuYXNzb2NpYXRpb25zLmFkZChFeHQuZGF0YS5hc3NvY2lhdGlvbi5Bc3NvY2lhdGlvbi5jcmVhdGUoaCkpO0V4dC5BcnJheS5yZW1vdmUoYSxoKX19LHJlZ2lzdGVyRGVmZXJyZWRBc3NvY2lhdGlvbjpmdW5jdGlvbihhKXt0aGlzLmFzc29jaWF0aW9uU3RhY2sucHVzaChhKX0sZ2V0TW9kZWw6ZnVuY3Rpb24oYil7dmFyIGE9YjtpZih0eXBlb2YgYT09InN0cmluZyIpe2E9dGhpcy50eXBlc1thXX1yZXR1cm4gYX0sY3JlYXRlOmZ1bmN0aW9uKGIsYSxkKXt2YXIgYz10eXBlb2YgYT09ImZ1bmN0aW9uIj9hOnRoaXMudHlwZXNbYXx8Yi5uYW1lXTtyZXR1cm4gbmV3IGMoYixkKX19LGZ1bmN0aW9uKCl7RXh0LnJlZ01vZGVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTW9kZWxNYW5hZ2VyLnJlZ2lzdGVyVHlwZS5hcHBseSh0aGlzLk1vZGVsTWFuYWdlcixhcmd1bWVudHMpfX0pO0V4dC5kZWZpbmUoIkV4dC5QbHVnaW5NYW5hZ2VyIix7ZXh0ZW5kOiJFeHQuQWJzdHJhY3RNYW5hZ2VyIixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5QbHVnaW5NZ3IiLHNpbmdsZXRvbjp0cnVlLHR5cGVOYW1lOiJwdHlwZSIsY3JlYXRlOmZ1bmN0aW9uKGEsYil7aWYoYS5pbml0KXtyZXR1cm4gYX1lbHNle3JldHVybiBFeHQuY3JlYXRlQnlBbGlhcygicGx1Z2luLiIrKGEucHR5cGV8fGIpLGEpfX0sZmluZEJ5VHlwZTpmdW5jdGlvbihjLGcpe3ZhciBlPVtdLGI9dGhpcy50eXBlcyxhLGQ7Zm9yKGEgaW4gYil7aWYoIWIuaGFzT3duUHJvcGVydHkoYSkpe2NvbnRpbnVlfWQ9YlthXTtpZihkLnR5cGU9PWMmJighZ3x8KGc9PT10cnVlJiZkLmlzRGVmYXVsdCkpKXtlLnB1c2goZCl9fXJldHVybiBlfX0sZnVuY3Rpb24oKXtFeHQucHJlZz1mdW5jdGlvbigpe3JldHVybiBFeHQuUGx1Z2luTWFuYWdlci5yZWdpc3RlclR5cGUuYXBwbHkoRXh0LlBsdWdpbk1hbmFnZXIsYXJndW1lbnRzKX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbXBvbmVudC5Qcm9ncmVzc0JhciIse2FsaWFzOlsibGF5b3V0LnByb2dyZXNzYmFyIl0sZXh0ZW5kOiJFeHQubGF5b3V0LmNvbXBvbmVudC5BdXRvIix0eXBlOiJwcm9ncmVzc2JhciIsYmVnaW5MYXlvdXQ6ZnVuY3Rpb24oZCl7dmFyIGI9dGhpcyxhLGM7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoIWQudGV4dEVscyl7Yz1iLm93bmVyLnRleHRFbDtpZihjLmlzQ29tcG9zaXRlKXtkLnRleHRFbHM9W107Yz1jLmVsZW1lbnRzO2ZvcihhPWMubGVuZ3RoO2EtLTspe2QudGV4dEVsc1thXT1kLmdldEVsKEV4dC5nZXQoY1thXSkpfX1lbHNle2QudGV4dEVscz1bZC5nZXRFbCgidGV4dEVsIildfX19LGNhbGN1bGF0ZTpmdW5jdGlvbihlKXt2YXIgYz10aGlzLGEsZCxiO2MuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKEV4dC5pc051bWJlcihiPWUuZ2V0UHJvcCgid2lkdGgiKSkpe2ItPWUuZ2V0Qm9yZGVySW5mbygpLndpZHRoO2Q9ZS50ZXh0RWxzO2ZvcihhPWQubGVuZ3RoO2EtLTspe2RbYV0uc2V0V2lkdGgoYil9fWVsc2V7Yy5kb25lPWZhbHNlfX19KTtFeHQuZGVmaW5lKCJFeHQuZG9tLkNvbXBvc2l0ZUVsZW1lbnQiLHthbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5Db21wb3NpdGVFbGVtZW50IixleHRlbmQ6IkV4dC5kb20uQ29tcG9zaXRlRWxlbWVudExpdGUiLGdldEVsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LHRyYW5zZm9ybUVsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5nZXQoYSl9fSxmdW5jdGlvbigpe0V4dC5kb20uRWxlbWVudC5zZWxlY3Q9ZnVuY3Rpb24oYSxkLGIpe3ZhciBjO2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7Yz1FeHQuZG9tLkVsZW1lbnQuc2VsZWN0b3JGdW5jdGlvbihhLGIpfWVsc2V7aWYoYS5sZW5ndGghPT11bmRlZmluZWQpe2M9YX1lbHNle319cmV0dXJuKGQ9PT10cnVlKT9uZXcgRXh0LkNvbXBvc2l0ZUVsZW1lbnQoYyk6bmV3IEV4dC5Db21wb3NpdGVFbGVtZW50TGl0ZShjKX19KTtFeHQuc2VsZWN0PUV4dC5FbGVtZW50LnNlbGVjdDtFeHQuZGVmaW5lKCJFeHQuUHJvZ3Jlc3NCYXIiLHtleHRlbmQ6IkV4dC5Db21wb25lbnQiLGFsaWFzOiJ3aWRnZXQucHJvZ3Jlc3NiYXIiLHJlcXVpcmVzOlsiRXh0LlRlbXBsYXRlIiwiRXh0LkNvbXBvc2l0ZUVsZW1lbnQiLCJFeHQuVGFza01hbmFnZXIiLCJFeHQubGF5b3V0LmNvbXBvbmVudC5Qcm9ncmVzc0JhciJdLHVzZXM6WyJFeHQuZnguQW5pbSJdLGJhc2VDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInByb2dyZXNzIixhbmltYXRlOmZhbHNlLHRleHQ6IiIsd2FpdFRpbWVyOm51bGwsY2hpbGRFbHM6WyJiYXIiXSxyZW5kZXJUcGw6Wyc8dHBsIGlmPSJpbnRlcm5hbFRleHQiPicsJzxkaXYgY2xhc3M9IntiYXNlQ2xzfS10ZXh0IHtiYXNlQ2xzfS10ZXh0LWJhY2siPnt0ZXh0fTwvZGl2PicsIjwvdHBsPiIsJzxkaXYgaWQ9IntpZH0tYmFyIiBjbGFzcz0ie2Jhc2VDbHN9LWJhciIgc3R5bGU9IndpZHRoOntwZXJjZW50YWdlfSUiPicsJzx0cGwgaWY9ImludGVybmFsVGV4dCI+JywnPGRpdiBjbGFzcz0ie2Jhc2VDbHN9LXRleHQiPicsIjxkaXY+e3RleHR9PC9kaXY+IiwiPC9kaXY+IiwiPC90cGw+IiwiPC9kaXY+Il0sY29tcG9uZW50TGF5b3V0OiJwcm9ncmVzc2JhciIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudCgpO3RoaXMuYWRkRXZlbnRzKCJ1cGRhdGUiKX0saW5pdFJlbmRlckRhdGE6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiBFeHQuYXBwbHkoYS5jYWxsUGFyZW50KCkse2ludGVybmFsVGV4dDohYS5oYXNPd25Qcm9wZXJ0eSgidGV4dEVsIiksdGV4dDphLnRleHR8fCImIzE2MDsiLHBlcmNlbnRhZ2U6YS52YWx1ZT9hLnZhbHVlKjEwMDowfSl9LG9uUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihhLnRleHRFbCl7YS50ZXh0RWw9RXh0LmdldChhLnRleHRFbCk7YS51cGRhdGVUZXh0KGEudGV4dCl9ZWxzZXthLnRleHRFbD1hLmVsLnNlbGVjdCgiLiIrYS5iYXNlQ2xzKyItdGV4dCIpfX0sdXBkYXRlUHJvZ3Jlc3M6ZnVuY3Rpb24oZCxlLGEpe3ZhciBjPXRoaXMsYj1jLnZhbHVlO2MudmFsdWU9ZHx8MDtpZihlKXtjLnVwZGF0ZVRleHQoZSl9aWYoYy5yZW5kZXJlZCYmIWMuaXNEZXN0cm95ZWQpe2lmKGE9PT10cnVlfHwoYSE9PWZhbHNlJiZjLmFuaW1hdGUpKXtjLmJhci5zdG9wQW5pbWF0aW9uKCk7Yy5iYXIuYW5pbWF0ZShFeHQuYXBwbHkoe2Zyb206e3dpZHRoOihiKjEwMCkrIiUifSx0bzp7d2lkdGg6KGMudmFsdWUqMTAwKSsiJSJ9fSxjLmFuaW1hdGUpKX1lbHNle2MuYmFyLnNldFN0eWxlKCJ3aWR0aCIsKGMudmFsdWUqMTAwKSsiJSIpfX1jLmZpcmVFdmVudCgidXBkYXRlIixjLGMudmFsdWUsZSk7cmV0dXJuIGN9LHVwZGF0ZVRleHQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczthLnRleHQ9YjtpZihhLnJlbmRlcmVkKXthLnRleHRFbC51cGRhdGUoYS50ZXh0KX1yZXR1cm4gYX0sYXBwbHlUZXh0OmZ1bmN0aW9uKGEpe3RoaXMudXBkYXRlVGV4dChhKX0sZ2V0VGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LHdhaXQ6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhO2lmKCFiLndhaXRUaW1lcil7YT1iO2M9Y3x8e307Yi51cGRhdGVUZXh0KGMudGV4dCk7Yi53YWl0VGltZXI9RXh0LlRhc2tNYW5hZ2VyLnN0YXJ0KHtydW46ZnVuY3Rpb24oZCl7dmFyIGU9Yy5pbmNyZW1lbnR8fDEwO2QtPTE7Yi51cGRhdGVQcm9ncmVzcygoKCgoZCtlKSVlKSsxKSooMTAwL2UpKSowLjAxLG51bGwsYy5hbmltYXRlKX0saW50ZXJ2YWw6Yy5pbnRlcnZhbHx8MTAwMCxkdXJhdGlvbjpjLmR1cmF0aW9uLG9uU3RvcDpmdW5jdGlvbigpe2lmKGMuZm4pe2MuZm4uYXBwbHkoYy5zY29wZXx8Yil9Yi5yZXNldCgpfSxzY29wZTphfSl9cmV0dXJuIGJ9LGlzV2FpdGluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLndhaXRUaW1lciE9PW51bGx9LHJlc2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi51cGRhdGVQcm9ncmVzcygwKTtiLmNsZWFyVGltZXIoKTtpZihhPT09dHJ1ZSl7Yi5oaWRlKCl9cmV0dXJuIGJ9LGNsZWFyVGltZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEud2FpdFRpbWVyKXthLndhaXRUaW1lci5vblN0b3A9bnVsbDtFeHQuVGFza01hbmFnZXIuc3RvcChhLndhaXRUaW1lcik7YS53YWl0VGltZXI9bnVsbH19LG9uRGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jbGVhclRpbWVyKCk7aWYoYS5yZW5kZXJlZCl7aWYoYS50ZXh0RWwuaXNDb21wb3NpdGUpe2EudGV4dEVsLmNsZWFyKCl9RXh0LmRlc3Ryb3lNZW1iZXJzKGEsInRleHRFbCIsInByb2dyZXNzQmFyIil9YS5jYWxsUGFyZW50KCl9fSk7RXh0LmRlZmluZSgiRXh0LlNoYWRvd1Bvb2wiLHtzaW5nbGV0b246dHJ1ZSxyZXF1aXJlczpbIkV4dC5Eb21IZWxwZXIiXSxtYXJrdXA6KGZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5TdHJpbmcuZm9ybWF0KCc8ZGl2IGNsYXNzPSJ7MH17MX0tc2hhZG93IiByb2xlPSJwcmVzZW50YXRpb24iPjwvZGl2PicsRXh0LmJhc2VDU1NQcmVmaXgsRXh0LmlzSUUmJiFFeHQuc3VwcG9ydHMuQ1NTM0JveFNoYWRvdz8iaWUiOiJjc3MiKX0oKSksc2hhZG93czpbXSxwdWxsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zaGFkb3dzLnNoaWZ0KCk7aWYoIWEpe2E9RXh0LmdldChFeHQuRG9tSGVscGVyLmluc2VydEh0bWwoImJlZm9yZUJlZ2luIixkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQsdGhpcy5tYXJrdXApKTthLmF1dG9Cb3hBZGp1c3Q9ZmFsc2V9cmV0dXJuIGF9LHB1c2g6ZnVuY3Rpb24oYSl7dGhpcy5zaGFkb3dzLnB1c2goYSl9LHJlc2V0OmZ1bmN0aW9uKCl7dmFyIGM9W10uY29uY2F0KHRoaXMuc2hhZG93cyksYixhPWMubGVuZ3RoO2ZvcihiPTA7YjxhO2IrKyl7Y1tiXS5yZW1vdmUoKX10aGlzLnNoYWRvd3M9W119fSk7RXh0LmRlZmluZSgiRXh0LlNoYWRvdyIse3JlcXVpcmVzOlsiRXh0LlNoYWRvd1Bvb2wiXSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihiKXt2YXIgYz10aGlzLGQsZSxhO0V4dC5hcHBseShjLGIpO2lmKCFFeHQuaXNTdHJpbmcoYy5tb2RlKSl7Yy5tb2RlPWMuZGVmYXVsdE1vZGV9ZT1jLm9mZnNldDthPU1hdGguZmxvb3IoZS8yKTtjLm9wYWNpdHk9NTA7c3dpdGNoKGMubW9kZS50b0xvd2VyQ2FzZSgpKXtjYXNlImRyb3AiOmlmKEV4dC5zdXBwb3J0cy5DU1MzQm94U2hhZG93KXtkPXt0OmUsbDplLGg6LWUsdzotZX19ZWxzZXtkPXt0Oi1hLGw6LWEsaDotYSx3Oi1hfX1icmVhaztjYXNlInNpZGVzIjppZihFeHQuc3VwcG9ydHMuQ1NTM0JveFNoYWRvdyl7ZD17dDplLGw6MCxoOi1lLHc6MH19ZWxzZXtkPXt0Oi0oMSthKSxsOjErYS0yKmUsaDotMSx3OmEtMX19YnJlYWs7Y2FzZSJmcmFtZSI6aWYoRXh0LnN1cHBvcnRzLkNTUzNCb3hTaGFkb3cpe2Q9e3Q6MCxsOjAsaDowLHc6MH19ZWxzZXtkPXt0OjErYS0yKmUsbDoxK2EtMiplLGg6ZS1hLTEsdzplLWEtMX19YnJlYWt9Yy5hZGp1c3RzPWR9LGdldFNoYWRvd1NpemU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGQ9Yi5lbD9iLm9mZnNldDowLGE9W2QsZCxkLGRdLGM9Yi5tb2RlLnRvTG93ZXJDYXNlKCk7aWYoYi5lbCYmYyE9PSJmcmFtZSIpe2FbMF09MDtpZihjPT0iZHJvcCIpe2FbM109MH19cmV0dXJuIGF9LG9mZnNldDo0LGRlZmF1bHRNb2RlOiJkcm9wIixib3hTaGFkb3dQcm9wZXJ0eTooZnVuY3Rpb24oKXt2YXIgYj0iYm94U2hhZG93IixhPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZTtpZighKCJib3hTaGFkb3ciIGluIGEpKXtpZigiV2Via2l0Qm94U2hhZG93IiBpbiBhKXtiPSJXZWJraXRCb3hTaGFkb3cifWVsc2V7aWYoIk1vekJveFNoYWRvdyIgaW4gYSl7Yj0iTW96Qm94U2hhZG93In19fXJldHVybiBifSgpKSxzaG93OmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYTtjPUV4dC5nZXQoYyk7aWYoIWIuZWwpe2IuZWw9RXh0LlNoYWRvd1Bvb2wucHVsbCgpO2lmKGIuZWwuZG9tLm5leHRTaWJsaW5nIT1jLmRvbSl7Yi5lbC5pbnNlcnRCZWZvcmUoYyl9fWE9KHBhcnNlSW50KGMuZ2V0U3R5bGUoInotaW5kZXgiKSwxMCktMSl8fDA7Yi5lbC5zZXRTdHlsZSgiei1pbmRleCIsYi56SW5kZXh8fGEpO2lmKEV4dC5pc0lFJiYhRXh0LnN1cHBvcnRzLkNTUzNCb3hTaGFkb3cpe2IuZWwuZG9tLnN0eWxlLmZpbHRlcj0icHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmFscGhhKG9wYWNpdHk9IitiLm9wYWNpdHkrIikgcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkJsdXIocGl4ZWxyYWRpdXM9IisoYi5vZmZzZXQpKyIpIn1iLnJlYWxpZ24oYy5nZXRMb2NhbFgoKSxjLmdldExvY2FsWSgpLGMuZG9tLm9mZnNldFdpZHRoLGMuZG9tLm9mZnNldEhlaWdodCk7Yi5lbC5kb20uc3R5bGUuZGlzcGxheT0iYmxvY2sifSxpc1Zpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbD90cnVlOmZhbHNlfSxyZWFsaWduOmZ1bmN0aW9uKGIsbixrLGcpe2lmKCF0aGlzLmVsKXtyZXR1cm59dmFyIGE9dGhpcy5hZGp1c3RzLGk9dGhpcy5lbC5kb20saj1pLnN0eWxlLGMsZSxoLG07ai5sZWZ0PShiK2EubCkrInB4IjtqLnRvcD0obithLnQpKyJweCI7Yz1NYXRoLm1heChrK2EudywwKTtlPU1hdGgubWF4KGcrYS5oLDApO2g9YysicHgiO209ZSsicHgiO2lmKGoud2lkdGghPWh8fGouaGVpZ2h0IT1tKXtqLndpZHRoPWg7ai5oZWlnaHQ9bTtpZihFeHQuc3VwcG9ydHMuQ1NTM0JveFNoYWRvdyl7alt0aGlzLmJveFNoYWRvd1Byb3BlcnR5XT0iMCAwICIrdGhpcy5vZmZzZXQrInB4ICM4ODgifX19LGhpZGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuZWwpe2EuZWwuZG9tLnN0eWxlLmRpc3BsYXk9Im5vbmUiO0V4dC5TaGFkb3dQb29sLnB1c2goYS5lbCk7ZGVsZXRlIGEuZWx9fSxzZXRaSW5kZXg6ZnVuY3Rpb24oYSl7dGhpcy56SW5kZXg9YTtpZih0aGlzLmVsKXt0aGlzLmVsLnNldFN0eWxlKCJ6LWluZGV4IixhKX19LHNldE9wYWNpdHk6ZnVuY3Rpb24oYSl7aWYodGhpcy5lbCl7aWYoRXh0LmlzSUUmJiFFeHQuc3VwcG9ydHMuQ1NTM0JveFNoYWRvdyl7YT1NYXRoLmZsb29yKGEqMTAwLzIpLzEwMH10aGlzLm9wYWNpdHk9YTt0aGlzLmVsLnNldE9wYWNpdHkoYSl9fX0pO0V4dC5kZWZpbmUoIkV4dC5hcHAuQ29udHJvbGxlciIse21peGluczp7b2JzZXJ2YWJsZToiRXh0LnV0aWwuT2JzZXJ2YWJsZSJ9LG9uQ2xhc3NFeHRlbmRlZDpmdW5jdGlvbihqLGMsaSl7dmFyIGg9RXh0LmdldENsYXNzTmFtZShqKSxkPWgubWF0Y2goL14oLiopXC5jb250cm9sbGVyXC4vKSxiLGcsayxhLGU7aWYoZCE9PW51bGwpe2I9RXh0LkxvYWRlci5nZXRQcmVmaXgoaCl8fGRbMV07Zz1pLm9uQmVmb3JlQ3JlYXRlZDtrPVtdO2E9WyJtb2RlbCIsInZpZXciLCJzdG9yZSJdO2kub25CZWZvcmVDcmVhdGVkPWZ1bmN0aW9uKHQsbil7dmFyIG8scSxsLHIsbSxwLHM7Zm9yKG89MCxxPWEubGVuZ3RoO288cTtvKyspe2w9YVtvXTtlPWIrIi4iK2wrIi4iO3I9RXh0LkFycmF5LmZyb20obltsKyJzIl0pO2ZvcihtPTAscD1yLmxlbmd0aDttPHA7bSsrKXtzPXJbbV07aWYocy5pbmRleE9mKCIuIikhPT0tMSYmKEV4dC5DbGFzc01hbmFnZXIuaXNDcmVhdGVkKHMpfHxFeHQuTG9hZGVyLmlzQUNsYXNzTmFtZVdpdGhBS25vd25QcmVmaXgocykpKXtrLnB1c2gocyl9ZWxzZXtrLnB1c2goZStzKX19fUV4dC5yZXF1aXJlKGssRXh0LkZ1bmN0aW9uLnBhc3MoZyxhcmd1bWVudHMsdGhpcykpfX19LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3RoaXMubWl4aW5zLm9ic2VydmFibGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO0V4dC5hcHBseSh0aGlzLGF8fHt9KTt0aGlzLmNyZWF0ZUdldHRlcnMoIm1vZGVsIix0aGlzLm1vZGVscyk7dGhpcy5jcmVhdGVHZXR0ZXJzKCJzdG9yZSIsdGhpcy5zdG9yZXMpO3RoaXMuY3JlYXRlR2V0dGVycygidmlldyIsdGhpcy52aWV3cyk7aWYodGhpcy5yZWZzKXt0aGlzLnJlZih0aGlzLnJlZnMpfX0saW5pdDpFeHQuZW1wdHlGbixvbkxhdW5jaDpFeHQuZW1wdHlGbixjcmVhdGVHZXR0ZXJzOmZ1bmN0aW9uKGcsail7Zz1FeHQuU3RyaW5nLmNhcGl0YWxpemUoZyk7dmFyIGU9MCxhPShqKT9qLmxlbmd0aDowLGgsYixjLGssZDtmb3IoO2U8YTtlKyspe2g9ImdldCI7Yj1qW2VdO2M9Yi5zcGxpdCgiLiIpO2Q9Yy5sZW5ndGg7Zm9yKGs9MDtrPGQ7aysrKXtoKz1FeHQuU3RyaW5nLmNhcGl0YWxpemUoY1trXSl9aCs9ZztpZighdGhpc1toXSl7dGhpc1toXT1FeHQuRnVuY3Rpb24ucGFzcyh0aGlzWyJnZXQiK2ddLFtiXSx0aGlzKX10aGlzW2hdKGIpfX0scmVmOmZ1bmN0aW9uKGEpe2E9RXh0LkFycmF5LmZyb20oYSk7dmFyIGc9dGhpcyxiPTAsZT1hLmxlbmd0aCxoLGQsYztnLnJlZmVyZW5jZXM9Zy5yZWZlcmVuY2VzfHxbXTtmb3IoO2I8ZTtiKyspe2g9YVtiXTtkPWgucmVmO2M9ImdldCIrRXh0LlN0cmluZy5jYXBpdGFsaXplKGQpO2lmKCFnW2NdKXtnW2NdPUV4dC5GdW5jdGlvbi5wYXNzKGcuZ2V0UmVmLFtkLGhdLGcpfWcucmVmZXJlbmNlcy5wdXNoKGQudG9Mb3dlckNhc2UoKSl9fSxhZGRSZWY6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVmKFthXSl9LGdldFJlZjpmdW5jdGlvbihkLGUsYSl7dGhpcy5yZWZDYWNoZT10aGlzLnJlZkNhY2hlfHx7fTtlPWV8fHt9O2E9YXx8e307RXh0LmFwcGx5KGUsYSk7aWYoZS5mb3JjZUNyZWF0ZSl7cmV0dXJuIEV4dC5Db21wb25lbnRNYW5hZ2VyLmNyZWF0ZShlLCJjb21wb25lbnQiKX12YXIgYz10aGlzLGI9Yy5yZWZDYWNoZVtkXTtpZighYil7Yy5yZWZDYWNoZVtkXT1iPUV4dC5Db21wb25lbnRRdWVyeS5xdWVyeShlLnNlbGVjdG9yKVswXTtpZighYiYmZS5hdXRvQ3JlYXRlKXtjLnJlZkNhY2hlW2RdPWI9RXh0LkNvbXBvbmVudE1hbmFnZXIuY3JlYXRlKGUsImNvbXBvbmVudCIpfWlmKGIpe2Iub24oImJlZm9yZWRlc3Ryb3kiLGZ1bmN0aW9uKCl7Yy5yZWZDYWNoZVtkXT1udWxsfSl9fXJldHVybiBifSxoYXNSZWY6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVmZXJlbmNlcyYmdGhpcy5yZWZlcmVuY2VzLmluZGV4T2YoYS50b0xvd2VyQ2FzZSgpKSE9PS0xfSxjb250cm9sOmZ1bmN0aW9uKGEsYil7dGhpcy5hcHBsaWNhdGlvbi5jb250cm9sKGEsYix0aGlzKX0sZ2V0Q29udHJvbGxlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hcHBsaWNhdGlvbi5nZXRDb250cm9sbGVyKGEpfSxnZXRTdG9yZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hcHBsaWNhdGlvbi5nZXRTdG9yZShhKX0sZ2V0TW9kZWw6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXBwbGljYXRpb24uZ2V0TW9kZWwoYSl9LGdldFZpZXc6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXBwbGljYXRpb24uZ2V0VmlldyhhKX19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5JZEdlbmVyYXRvciIse2lzR2VuZXJhdG9yOnRydWUsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztFeHQuYXBwbHkoYixhKTtpZihiLmlkKXtFeHQuZGF0YS5JZEdlbmVyYXRvci5hbGxbYi5pZF09Yn19LGdldFJlY0lkOmZ1bmN0aW9uKGEpe3JldHVybiBhLm1vZGVsTmFtZSsiLSIrYS5pbnRlcm5hbElkfSxzdGF0aWNzOnthbGw6e30sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBjLGQsYjtpZih0eXBlb2YgYT09InN0cmluZyIpe2Q9Yj1hO2E9bnVsbH1lbHNle2lmKGEuaXNHZW5lcmF0b3Ipe3JldHVybiBhfWVsc2V7ZD1hLmlkfHxhLnR5cGU7Yj1hLnR5cGV9fWM9dGhpcy5hbGxbZF07aWYoIWMpe2M9RXh0LmNyZWF0ZSgiaWRnZW4uIitiLGEpfXJldHVybiBjfX19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5Tb3J0VHlwZXMiLHtzaW5nbGV0b246dHJ1ZSxub25lOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxzdHJpcFRhZ3NSRTovPFwvP1tePl0rPi9naSxhc1RleHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFN0cmluZyhhKS5yZXBsYWNlKHRoaXMuc3RyaXBUYWdzUkUsIiIpfSxhc1VDVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gU3RyaW5nKGEpLnRvVXBwZXJDYXNlKCkucmVwbGFjZSh0aGlzLnN0cmlwVGFnc1JFLCIiKX0sYXNVQ1N0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gU3RyaW5nKGEpLnRvVXBwZXJDYXNlKCl9LGFzRGF0ZTpmdW5jdGlvbihhKXtpZighYSl7cmV0dXJuIDB9aWYoRXh0LmlzRGF0ZShhKSl7cmV0dXJuIGEuZ2V0VGltZSgpfXJldHVybiBEYXRlLnBhcnNlKFN0cmluZyhhKSl9LGFzRmxvYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9cGFyc2VGbG9hdChTdHJpbmcoYSkucmVwbGFjZSgvLC9nLCIiKSk7cmV0dXJuIGlzTmFOKGIpPzA6Yn0sYXNJbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9cGFyc2VJbnQoU3RyaW5nKGEpLnJlcGxhY2UoLywvZywiIiksMTApO3JldHVybiBpc05hTihiKT8wOmJ9fSk7RXh0LmRlZmluZSgiRXh0LmRhdGEuVHlwZXMiLHtzaW5nbGV0b246dHJ1ZSxyZXF1aXJlczpbIkV4dC5kYXRhLlNvcnRUeXBlcyJdfSxmdW5jdGlvbigpe3ZhciBhPUV4dC5kYXRhLlNvcnRUeXBlcztFeHQuYXBwbHkoRXh0LmRhdGEuVHlwZXMse3N0cmlwUmU6L1tcJCwlXS9nLEFVVE86e3NvcnRUeXBlOmEubm9uZSx0eXBlOiJhdXRvIn0sU1RSSU5HOntjb252ZXJ0OmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMudXNlTnVsbD9udWxsOiIiO3JldHVybihjPT09dW5kZWZpbmVkfHxjPT09bnVsbCk/YjpTdHJpbmcoYyl9LHNvcnRUeXBlOmEuYXNVQ1N0cmluZyx0eXBlOiJzdHJpbmcifSxJTlQ6e2NvbnZlcnQ6ZnVuY3Rpb24oYil7cmV0dXJuIGIhPT11bmRlZmluZWQmJmIhPT1udWxsJiZiIT09IiI/cGFyc2VJbnQoU3RyaW5nKGIpLnJlcGxhY2UoRXh0LmRhdGEuVHlwZXMuc3RyaXBSZSwiIiksMTApOih0aGlzLnVzZU51bGw/bnVsbDowKX0sc29ydFR5cGU6YS5ub25lLHR5cGU6ImludCJ9LEZMT0FUOntjb252ZXJ0OmZ1bmN0aW9uKGIpe3JldHVybiBiIT09dW5kZWZpbmVkJiZiIT09bnVsbCYmYiE9PSIiP3BhcnNlRmxvYXQoU3RyaW5nKGIpLnJlcGxhY2UoRXh0LmRhdGEuVHlwZXMuc3RyaXBSZSwiIiksMTApOih0aGlzLnVzZU51bGw/bnVsbDowKX0sc29ydFR5cGU6YS5ub25lLHR5cGU6ImZsb2F0In0sQk9PTDp7Y29udmVydDpmdW5jdGlvbihiKXtpZih0aGlzLnVzZU51bGwmJihiPT09dW5kZWZpbmVkfHxiPT09bnVsbHx8Yj09PSIiKSl7cmV0dXJuIG51bGx9cmV0dXJuIGI9PT10cnVlfHxiPT09InRydWUifHxiPT0xfSxzb3J0VHlwZTphLm5vbmUsdHlwZToiYm9vbCJ9LERBVEU6e2NvbnZlcnQ6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5kYXRlRm9ybWF0LGI7aWYoIWMpe3JldHVybiBudWxsfWlmKEV4dC5pc0RhdGUoYykpe3JldHVybiBjfWlmKGQpe2lmKGQ9PSJ0aW1lc3RhbXAiKXtyZXR1cm4gbmV3IERhdGUoYyoxMDAwKX1pZihkPT0idGltZSIpe3JldHVybiBuZXcgRGF0ZShwYXJzZUludChjLDEwKSl9cmV0dXJuIEV4dC5EYXRlLnBhcnNlKGMsZCl9Yj1EYXRlLnBhcnNlKGMpO3JldHVybiBiP25ldyBEYXRlKGIpOm51bGx9LHNvcnRUeXBlOmEuYXNEYXRlLHR5cGU6ImRhdGUifX0pO0V4dC5hcHBseShFeHQuZGF0YS5UeXBlcyx7Qk9PTEVBTjp0aGlzLkJPT0wsSU5URUdFUjp0aGlzLklOVCxOVU1CRVI6dGhpcy5GTE9BVH0pfSk7RXh0LmRlZmluZSgiRXh0LmRhdGEuRmllbGQiLHtyZXF1aXJlczpbIkV4dC5kYXRhLlR5cGVzIiwiRXh0LmRhdGEuU29ydFR5cGVzIl0sYWxpYXM6ImRhdGEuZmllbGQiLGlzRmllbGQ6dHJ1ZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihiKXt2YXIgZD10aGlzLGM9RXh0LmRhdGEuVHlwZXMsYTtpZihFeHQuaXNTdHJpbmcoYikpe2I9e25hbWU6Yn19RXh0LmFwcGx5KGQsYik7YT1kLnNvcnRUeXBlO2lmKGQudHlwZSl7aWYoRXh0LmlzU3RyaW5nKGQudHlwZSkpe2QudHlwZT1jW2QudHlwZS50b1VwcGVyQ2FzZSgpXXx8Yy5BVVRPfX1lbHNle2QudHlwZT1jLkFVVE99aWYoRXh0LmlzU3RyaW5nKGEpKXtkLnNvcnRUeXBlPUV4dC5kYXRhLlNvcnRUeXBlc1thXX1lbHNle2lmKEV4dC5pc0VtcHR5KGEpKXtkLnNvcnRUeXBlPWQudHlwZS5zb3J0VHlwZX19aWYoIWIuaGFzT3duUHJvcGVydHkoImNvbnZlcnQiKSl7ZC5jb252ZXJ0PWQudHlwZS5jb252ZXJ0fWVsc2V7aWYoIWQuY29udmVydCYmZC50eXBlLmNvbnZlcnQmJiFiLmhhc093blByb3BlcnR5KCJkZWZhdWx0VmFsdWUiKSl7ZC5kZWZhdWx0VmFsdWU9ZC50eXBlLmNvbnZlcnQoZC5kZWZhdWx0VmFsdWUpfX1pZihiLmNvbnZlcnQpe2QuaGFzQ3VzdG9tQ29udmVydD10cnVlfX0sZGF0ZUZvcm1hdDpudWxsLHVzZU51bGw6ZmFsc2UsZGVmYXVsdFZhbHVlOiIiLG1hcHBpbmc6bnVsbCxzb3J0VHlwZTpudWxsLHNvcnREaXI6IkFTQyIsYWxsb3dCbGFuazp0cnVlLHBlcnNpc3Q6dHJ1ZX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLkVycm9ycyIse2V4dGVuZDoiRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uIixpc1ZhbGlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoPT09MH0sZ2V0QnlGaWVsZDpmdW5jdGlvbihlKXt2YXIgZD1bXSxhLGMsYjtmb3IoYj0wO2I8dGhpcy5sZW5ndGg7YisrKXthPXRoaXMuaXRlbXNbYl07aWYoYS5maWVsZD09ZSl7ZC5wdXNoKGEpfX1yZXR1cm4gZH19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5PcGVyYXRpb24iLHtzeW5jaHJvbm91czp0cnVlLGFjdGlvbjp1bmRlZmluZWQsZmlsdGVyczp1bmRlZmluZWQsc29ydGVyczp1bmRlZmluZWQsZ3JvdXBlcnM6dW5kZWZpbmVkLHN0YXJ0OnVuZGVmaW5lZCxsaW1pdDp1bmRlZmluZWQsYmF0Y2g6dW5kZWZpbmVkLGNhbGxiYWNrOnVuZGVmaW5lZCxzY29wZTp1bmRlZmluZWQsc3RhcnRlZDpmYWxzZSxydW5uaW5nOmZhbHNlLGNvbXBsZXRlOmZhbHNlLHN1Y2Nlc3M6dW5kZWZpbmVkLGV4Y2VwdGlvbjpmYWxzZSxlcnJvcjp1bmRlZmluZWQsYWN0aW9uQ29tbWl0UmVjb3Jkc1JlOi9eKD86Y3JlYXRlfHVwZGF0ZSkkL2ksYWN0aW9uU2tpcFN5bmNSZTovXmRlc3Ryb3kkL2ksY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7RXh0LmFwcGx5KHRoaXMsYXx8e30pfSxjb21taXRSZWNvcmRzOmZ1bmN0aW9uKGspe3ZhciBoPXRoaXMsaixnLGEsYyxiLGQsZTtpZighaC5hY3Rpb25Ta2lwU3luY1JlLnRlc3QoaC5hY3Rpb24pKXthPWgucmVjb3JkcztpZihhJiZhLmxlbmd0aCl7aWYoYS5sZW5ndGg+MSl7aWYoaC5hY3Rpb249PSJ1cGRhdGUifHxhWzBdLmNsaWVudElkUHJvcGVydHkpe2o9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbigpO2ouYWRkQWxsKGspO2ZvcihnPWEubGVuZ3RoO2ctLTspe2I9YVtnXTtjPWouZmluZEJ5KGgubWF0Y2hDbGllbnRSZWMsYik7Yi5jb3B5RnJvbShjKX19ZWxzZXtmb3IoZD0wLGU9YS5sZW5ndGg7ZDxlOysrZCl7Yj1hW2RdO2M9a1tkXTtpZihiJiZjKXtoLnVwZGF0ZVJlY29yZChiLGMpfX19fWVsc2V7dGhpcy51cGRhdGVSZWNvcmQoYVswXSxrWzBdKX1pZihoLmFjdGlvbkNvbW1pdFJlY29yZHNSZS50ZXN0KGguYWN0aW9uKSl7Zm9yKGc9YS5sZW5ndGg7Zy0tOyl7YVtnXS5jb21taXQoKX19fX19LHVwZGF0ZVJlY29yZDpmdW5jdGlvbihhLGIpe2lmKGImJihhLnBoYW50b218fGEuZ2V0SWQoKT09PWIuZ2V0SWQoKSkpe2EuY29weUZyb20oYil9fSxtYXRjaENsaWVudFJlYzpmdW5jdGlvbihjKXt2YXIgYT10aGlzLGI9YS5nZXRJZCgpO2lmKGImJmMuZ2V0SWQoKT09PWIpe3JldHVybiB0cnVlfXJldHVybiBjLmludGVybmFsSWQ9PT1hLmludGVybmFsSWR9LHNldFN0YXJ0ZWQ6ZnVuY3Rpb24oKXt0aGlzLnN0YXJ0ZWQ9dHJ1ZTt0aGlzLnJ1bm5pbmc9dHJ1ZX0sc2V0Q29tcGxldGVkOmZ1bmN0aW9uKCl7dGhpcy5jb21wbGV0ZT10cnVlO3RoaXMucnVubmluZz1mYWxzZX0sc2V0U3VjY2Vzc2Z1bDpmdW5jdGlvbigpe3RoaXMuc3VjY2Vzcz10cnVlfSxzZXRFeGNlcHRpb246ZnVuY3Rpb24oYSl7dGhpcy5leGNlcHRpb249dHJ1ZTt0aGlzLnN1Y2Nlc3M9ZmFsc2U7dGhpcy5ydW5uaW5nPWZhbHNlO3RoaXMuZXJyb3I9YX0saGFzRXhjZXB0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXhjZXB0aW9uPT09dHJ1ZX0sZ2V0RXJyb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcnJvcn0sZ2V0UmVjb3JkczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0UmVzdWx0U2V0KCk7cmV0dXJuIHRoaXMucmVjb3Jkc3x8KGE/YS5yZWNvcmRzOm51bGwpfSxnZXRSZXN1bHRTZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXN1bHRTZXR9LGlzU3RhcnRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXJ0ZWQ9PT10cnVlfSxpc1J1bm5pbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ydW5uaW5nPT09dHJ1ZX0saXNDb21wbGV0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXBsZXRlPT09dHJ1ZX0sd2FzU3VjY2Vzc2Z1bDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQ29tcGxldGUoKSYmdGhpcy5zdWNjZXNzPT09dHJ1ZX0sc2V0QmF0Y2g6ZnVuY3Rpb24oYSl7dGhpcy5iYXRjaD1hfSxhbGxvd1dyaXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aW9uIT0icmVhZCJ9fSk7RXh0LmRlZmluZSgiRXh0LmRhdGEudmFsaWRhdGlvbnMiLHtzaW5nbGV0b246dHJ1ZSxwcmVzZW5jZU1lc3NhZ2U6Im11c3QgYmUgcHJlc2VudCIsbGVuZ3RoTWVzc2FnZToiaXMgdGhlIHdyb25nIGxlbmd0aCIsZm9ybWF0TWVzc2FnZToiaXMgdGhlIHdyb25nIGZvcm1hdCIsaW5jbHVzaW9uTWVzc2FnZToiaXMgbm90IGluY2x1ZGVkIGluIHRoZSBsaXN0IG9mIGFjY2VwdGFibGUgdmFsdWVzIixleGNsdXNpb25NZXNzYWdlOiJpcyBub3QgYW4gYWNjZXB0YWJsZSB2YWx1ZSIsZW1haWxNZXNzYWdlOiJpcyBub3QgYSB2YWxpZCBlbWFpbCBhZGRyZXNzIixlbWFpbFJlOi9eKFthLXpBLVowLTlfXC5cLV0pK1xAKChbYS16QS1aMC05XC1dKStcLikrKFthLXpBLVowLTldezIsNH0pKyQvLHByZXNlbmNlOmZ1bmN0aW9uKGEsYil7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe2I9YX1yZXR1cm4gISFifHxiPT09MH0sbGVuZ3RoOmZ1bmN0aW9uKGIsZSl7aWYoZT09PXVuZGVmaW5lZHx8ZT09PW51bGwpe3JldHVybiBmYWxzZX12YXIgZD1lLmxlbmd0aCxjPWIubWluLGE9Yi5tYXg7aWYoKGMmJmQ8Yyl8fChhJiZkPmEpKXtyZXR1cm4gZmFsc2V9ZWxzZXtyZXR1cm4gdHJ1ZX19LGVtYWlsOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIEV4dC5kYXRhLnZhbGlkYXRpb25zLmVtYWlsUmUudGVzdChhKX0sZm9ybWF0OmZ1bmN0aW9uKGEsYil7cmV0dXJuICEhKGEubWF0Y2hlciYmYS5tYXRjaGVyLnRlc3QoYikpfSxpbmNsdXNpb246ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5saXN0JiZFeHQuQXJyYXkuaW5kZXhPZihhLmxpc3QsYikhPS0xfSxleGNsdXNpb246ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5saXN0JiZFeHQuQXJyYXkuaW5kZXhPZihhLmxpc3QsYik9PS0xfX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLk1vZGVsIix7YWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuZGF0YS5SZWNvcmQiLG1peGluczp7b2JzZXJ2YWJsZToiRXh0LnV0aWwuT2JzZXJ2YWJsZSJ9LHJlcXVpcmVzOlsiRXh0Lk1vZGVsTWFuYWdlciIsIkV4dC5kYXRhLklkR2VuZXJhdG9yIiwiRXh0LmRhdGEuRmllbGQiLCJFeHQuZGF0YS5FcnJvcnMiLCJFeHQuZGF0YS5PcGVyYXRpb24iLCJFeHQuZGF0YS52YWxpZGF0aW9ucyIsIkV4dC51dGlsLk1peGVkQ29sbGVjdGlvbiJdLGNvbXBhcmVDb252ZXJ0RmllbGRzOmZ1bmN0aW9uKGEsZCl7dmFyIGM9YS5jb252ZXJ0JiZhLnR5cGUmJmEuY29udmVydCE9PWEudHlwZS5jb252ZXJ0LGI9ZC5jb252ZXJ0JiZkLnR5cGUmJmQuY29udmVydCE9PWQudHlwZS5jb252ZXJ0O2lmKGMmJiFiKXtyZXR1cm4gMX1pZighYyYmYil7cmV0dXJuIC0xfXJldHVybiAwfSxpdGVtTmFtZUZuOmZ1bmN0aW9uKGEpe3JldHVybiBhLm5hbWV9LG9uQ2xhc3NFeHRlbmRlZDpmdW5jdGlvbihiLGMsYSl7dmFyIGQ9YS5vbkJlZm9yZUNyZWF0ZWQ7YS5vbkJlZm9yZUNyZWF0ZWQ9ZnVuY3Rpb24oZyxEKXt2YXIgQz10aGlzLEU9RXh0LmdldENsYXNzTmFtZShnKSxyPWcucHJvdG90eXBlLHg9Zy5wcm90b3R5cGUuc3VwZXJjbGFzcyxqPUQudmFsaWRhdGlvbnN8fFtdLHQ9RC5maWVsZHN8fFtdLGgsbT1ELmFzc29jaWF0aW9uc3x8W10sZT1mdW5jdGlvbihHLEkpe3ZhciBIPTAsRixKO2lmKEcpe0c9RXh0LkFycmF5LmZyb20oRyk7Zm9yKEY9Ry5sZW5ndGg7SDxGOysrSCl7Sj1HW0hdO2lmKCFFeHQuaXNPYmplY3QoSikpe0o9e21vZGVsOkp9fUoudHlwZT1JO20ucHVzaChKKX19fSx1PUQuaWRnZW4sQT1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKGZhbHNlLHIuaXRlbU5hbWVGbikseT1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKGZhbHNlLHIuaXRlbU5hbWVGbikscT14LnZhbGlkYXRpb25zLEI9eC5maWVsZHMsbD14LmFzc29jaWF0aW9ucyx6LHcsbyxwPVtdLG49RC5pZFByb3BlcnR5fHxnLnByb3RvdHlwZS5pZFByb3BlcnR5LHY9ZnVuY3Rpb24oRyxGLGkpe3ZhciBILEk7aWYoQS5ldmVudHMuYWRkLmZpcmluZyl7ST1HO0g9Rn1lbHNle0g9aTtJPUYub3JpZ2luYWxJbmRleH1ILm9yaWdpbmFsSW5kZXg9STtpZihILm1hcHBpbmc9PT1ufHwoSC5tYXBwaW5nPT1udWxsJiZILm5hbWU9PT1uKSl7SC5kZWZhdWx0VmFsdWU9dW5kZWZpbmVkfX0scz1ELnByb3h5fHxnLnByb3RvdHlwZS5wcm94eXx8Zy5wcm90b3R5cGUuZGVmYXVsdFByb3h5VHlwZSxrPWZ1bmN0aW9uKCl7QS5zb3J0Qnkoci5jb21wYXJlQ29udmVydEZpZWxkcyl9O2cubW9kZWxOYW1lPUU7ci5tb2RlbE5hbWU9RTtpZihxKXtqPXEuY29uY2F0KGopfUQudmFsaWRhdGlvbnM9ajtpZihCKXt0PUIuaXRlbXMuY29uY2F0KHQpfUEub24oe2FkZDp2LHJlcGxhY2U6dn0pO2Zvcih3PTAsbz10Lmxlbmd0aDt3PG87Kyt3KXtoPXRbd107QS5hZGQoaC5pc0ZpZWxkP2g6bmV3IEV4dC5kYXRhLkZpZWxkKGgpKX1pZighQS5nZXQobikpe0EuYWRkKG5ldyBFeHQuZGF0YS5GaWVsZChuKSl9aygpO0Eub24oe2FkZDprLHJlcGxhY2U6a30pO0QuZmllbGRzPUE7aWYodSl7RC5pZGdlbj1FeHQuZGF0YS5JZEdlbmVyYXRvci5nZXQodSl9ZShELmJlbG9uZ3NUbywiYmVsb25nc1RvIik7ZGVsZXRlIEQuYmVsb25nc1RvO2UoRC5oYXNNYW55LCJoYXNNYW55Iik7ZGVsZXRlIEQuaGFzTWFueTtlKEQuaGFzT25lLCJoYXNPbmUiKTtkZWxldGUgRC5oYXNPbmU7aWYobCl7bT1sLml0ZW1zLmNvbmNhdChtKX1mb3Iodz0wLG89bS5sZW5ndGg7dzxvOysrdyl7cC5wdXNoKCJhc3NvY2lhdGlvbi4iK21bd10udHlwZS50b0xvd2VyQ2FzZSgpKX1pZihzJiYhcy5pc1Byb3h5KXtwLnB1c2goInByb3h5LiIrKHR5cGVvZiBzPT09InN0cmluZyI/czpzLnR5cGUpKX1FeHQucmVxdWlyZShwLGZ1bmN0aW9uKCl7RXh0Lk1vZGVsTWFuYWdlci5yZWdpc3RlclR5cGUoRSxnKTtmb3Iodz0wLG89bS5sZW5ndGg7dzxvOysrdyl7ej1tW3ddO2lmKHouaXNBc3NvY2lhdGlvbil7ej1FeHQuYXBwbHlJZih7b3duZXJNb2RlbDpFLGFzc29jaWF0ZWRNb2RlbDp6Lm1vZGVsfSx6LmluaXRpYWxDb25maWcpfWVsc2V7RXh0LmFwcGx5KHose293bmVyTW9kZWw6RSxhc3NvY2lhdGVkTW9kZWw6ei5tb2RlbH0pfWlmKEV4dC5Nb2RlbE1hbmFnZXIuZ2V0TW9kZWwoei5tb2RlbCk9PT11bmRlZmluZWQpe0V4dC5Nb2RlbE1hbmFnZXIucmVnaXN0ZXJEZWZlcnJlZEFzc29jaWF0aW9uKHopfWVsc2V7eS5hZGQoRXh0LmRhdGEuYXNzb2NpYXRpb24uQXNzb2NpYXRpb24uY3JlYXRlKHopKX19RC5hc3NvY2lhdGlvbnM9eTtkLmNhbGwoQyxnLEQsYSk7Zy5zZXRQcm94eShzKTtFeHQuTW9kZWxNYW5hZ2VyLm9uTW9kZWxEZWZpbmVkKGcpfSl9fSxpbmhlcml0YWJsZVN0YXRpY3M6e3NldFByb3h5OmZ1bmN0aW9uKGEpe2lmKCFhLmlzUHJveHkpe2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7YT17dHlwZTphfX1hPUV4dC5jcmVhdGVCeUFsaWFzKCJwcm94eS4iK2EudHlwZSxhKX1hLnNldE1vZGVsKHRoaXMpO3RoaXMucHJveHk9dGhpcy5wcm90b3R5cGUucHJveHk9YTtyZXR1cm4gYX0sZ2V0UHJveHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm94eX0sc2V0RmllbGRzOmZ1bmN0aW9uKGMsZCxiKXt2YXIgaj10aGlzLGg9ai5wcm90b3R5cGUsZz1oLmZpZWxkcyxhPWM/Yy5sZW5ndGg6MCxlPTA7aWYoZCl7aC5pZFByb3BlcnR5PWR9aWYoYil7aC5jbGllbnRJZFByb3BlcnR5PWJ9aWYoZyl7Zy5jbGVhcigpfWVsc2V7Zz1qLnByb3RvdHlwZS5maWVsZHM9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbihmYWxzZSxmdW5jdGlvbihpKXtyZXR1cm4gaS5uYW1lfSl9Zm9yKDtlPGE7ZSsrKXtnLmFkZChuZXcgRXh0LmRhdGEuRmllbGQoY1tlXSkpfWlmKCFnLmdldChoLmlkUHJvcGVydHkpKXtnLmFkZChuZXcgRXh0LmRhdGEuRmllbGQoaC5pZFByb3BlcnR5KSl9ai5maWVsZHM9ZztyZXR1cm4gZ30sZ2V0RmllbGRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvdG90eXBlLmZpZWxkcy5pdGVtc30sbG9hZDpmdW5jdGlvbihnLGMpe2M9RXh0LmFwcGx5KHt9LGMpO2M9RXh0LmFwcGx5SWYoYyx7YWN0aW9uOiJyZWFkIixpZDpnfSk7dmFyIGI9bmV3IEV4dC5kYXRhLk9wZXJhdGlvbihjKSxkPWMuc2NvcGV8fHRoaXMsYT1udWxsLGU7ZT1mdW5jdGlvbihoKXtpZihoLndhc1N1Y2Nlc3NmdWwoKSl7YT1oLmdldFJlY29yZHMoKVswXTtFeHQuY2FsbGJhY2soYy5zdWNjZXNzLGQsW2EsaF0pfWVsc2V7RXh0LmNhbGxiYWNrKGMuZmFpbHVyZSxkLFthLGhdKX1FeHQuY2FsbGJhY2soYy5jYWxsYmFjayxkLFthLGhdKX07dGhpcy5wcm94eS5yZWFkKGIsZSx0aGlzKX19LHN0YXRpY3M6e1BSRUZJWDoiZXh0LXJlY29yZCIsQVVUT19JRDoxLEVESVQ6ImVkaXQiLFJFSkVDVDoicmVqZWN0IixDT01NSVQ6ImNvbW1pdCIsaWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W3RoaXMuUFJFRklYLCItIix0aGlzLkFVVE9fSUQrK10uam9pbigiIik7YS5waGFudG9tPXRydWU7YS5pbnRlcm5hbElkPWI7cmV0dXJuIGJ9fSxpZGdlbjp7aXNHZW5lcmF0b3I6dHJ1ZSx0eXBlOiJkZWZhdWx0IixnZW5lcmF0ZTpmdW5jdGlvbigpe3JldHVybiBudWxsfSxnZXRSZWNJZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5tb2RlbE5hbWUrIi0iK2EuaW50ZXJuYWxJZH19LGVkaXRpbmc6ZmFsc2UsZGlydHk6ZmFsc2UscGVyc2lzdGVuY2VQcm9wZXJ0eToiZGF0YSIsZXZlbnRlZDpmYWxzZSxpc01vZGVsOnRydWUscGhhbnRvbTpmYWxzZSxpZFByb3BlcnR5OiJpZCIsY2xpZW50SWRQcm9wZXJ0eTpudWxsLGRlZmF1bHRQcm94eVR5cGU6ImFqYXgiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGosZCxvLGIpe2o9anx8e307dmFyIGw9dGhpcyxrLGUsbSxhLG4sZyxjLGg7bC5pbnRlcm5hbElkPShkfHxkPT09MCk/ZDpFeHQuZGF0YS5Nb2RlbC5pZChsKTtsLnJhdz1vfHxqO2lmKCFsLmRhdGEpe2wuZGF0YT17fX1sLm1vZGlmaWVkPXt9O2lmKGwucGVyc2lzdGFuY2VQcm9wZXJ0eSl7bC5wZXJzaXN0ZW5jZVByb3BlcnR5PWwucGVyc2lzdGFuY2VQcm9wZXJ0eX1sW2wucGVyc2lzdGVuY2VQcm9wZXJ0eV09Ynx8e307bC5taXhpbnMub2JzZXJ2YWJsZS5jb25zdHJ1Y3Rvci5jYWxsKGwpO2lmKCFiKXtrPWwuZmllbGRzLml0ZW1zO2U9ay5sZW5ndGg7aD0wO2M9bFtsLnBlcnNpc3RlbmNlUHJvcGVydHldO2lmKEV4dC5pc0FycmF5KGopKXtmb3IoO2g8ZTtoKyspe209a1toXTthPW0ubmFtZTtuPWpbbS5vcmlnaW5hbEluZGV4XTtpZihuPT09dW5kZWZpbmVkKXtuPW0uZGVmYXVsdFZhbHVlfWlmKG0uY29udmVydCl7bj1tLmNvbnZlcnQobixsKX1pZihuIT09dW5kZWZpbmVkKXtjW2FdPW59fX1lbHNle2Zvcig7aDxlO2grKyl7bT1rW2hdO2E9bS5uYW1lO249althXTtpZihuPT09dW5kZWZpbmVkKXtuPW0uZGVmYXVsdFZhbHVlfWlmKG0uY29udmVydCl7bj1tLmNvbnZlcnQobixsKX1pZihuIT09dW5kZWZpbmVkKXtjW2FdPW59fX19bC5zdG9yZXM9W107aWYobC5nZXRJZCgpKXtsLnBoYW50b209ZmFsc2V9ZWxzZXtpZihsLnBoYW50b20pe2c9bC5pZGdlbi5nZW5lcmF0ZSgpO2lmKGchPT1udWxsKXtsLnNldElkKGcpfX19bC5kaXJ0eT1mYWxzZTtsLm1vZGlmaWVkPXt9O2lmKHR5cGVvZiBsLmluaXQ9PSJmdW5jdGlvbiIpe2wuaW5pdCgpfWwuaWQ9bC5pZGdlbi5nZXRSZWNJZChsKX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzW3RoaXMucGVyc2lzdGVuY2VQcm9wZXJ0eV1bYV19LF9zaW5nbGVQcm9wOnt9LHNldDpmdW5jdGlvbihyLGIpe3ZhciBqPXRoaXMsaD1qW2oucGVyc2lzdGVuY2VQcm9wZXJ0eV0saT1qLmZpZWxkcyxxPWoubW9kaWZpZWQsbz0odHlwZW9mIHI9PSJzdHJpbmciKSxwLGssZyxuLGUsYSxjLGQsbCxtO2lmKG8pe209ai5fc2luZ2xlUHJvcDttW3JdPWJ9ZWxzZXttPXJ9Zm9yKGEgaW4gbSl7aWYobS5oYXNPd25Qcm9wZXJ0eShhKSl7bD1tW2FdO2lmKGkmJihrPWkuZ2V0KGEpKSYmay5jb252ZXJ0KXtsPWsuY29udmVydChsLGopfXA9aFthXTtpZihqLmlzRXF1YWwocCxsKSl7Y29udGludWV9aFthXT1sOyhlfHwoZT1bXSkpLnB1c2goYSk7aWYoayYmay5wZXJzaXN0KXtpZihxLmhhc093blByb3BlcnR5KGEpKXtpZihqLmlzRXF1YWwocVthXSxsKSl7ZGVsZXRlIHFbYV07ai5kaXJ0eT1mYWxzZTtmb3IobiBpbiBxKXtpZihxLmhhc093blByb3BlcnR5KG4pKXtqLmRpcnR5PXRydWU7YnJlYWt9fX19ZWxzZXtqLmRpcnR5PXRydWU7cVthXT1wfX1pZihhPT1qLmlkUHJvcGVydHkpe2c9dHJ1ZTtjPXA7ZD1sfX19aWYobyl7ZGVsZXRlIG1bcl19aWYoZyl7ai5maXJlRXZlbnQoImlkY2hhbmdlZCIsaixjLGQpfWlmKCFqLmVkaXRpbmcmJmUpe2ouYWZ0ZXJFZGl0KGUpfXJldHVybiBlfHxudWxsfSxjb3B5RnJvbTpmdW5jdGlvbihnKXtpZihnKXt2YXIgZT10aGlzLGM9ZS5maWVsZHMuaXRlbXMsaz1jLmxlbmd0aCxoLGE9MCxkPWVbZS5wZXJzaXN0ZW5jZVByb3BlcnR5XSxiPWdbZy5wZXJzaXN0ZW5jZVByb3BlcnR5XSxqO2Zvcig7YTxrO2ErKyl7aD1jW2FdO2o9YltoLm5hbWVdO2lmKGohPT11bmRlZmluZWQpe2RbaC5uYW1lXT1qfX1pZihlLnBoYW50b20mJiFnLnBoYW50b20pe2Uuc2V0SWQoZy5nZXRJZCgpKX19fSxpc0VxdWFsOmZ1bmN0aW9uKGQsYyl7aWYoRXh0LmlzRGF0ZShkKSYmRXh0LmlzRGF0ZShjKSl7cmV0dXJuIEV4dC5EYXRlLmlzRXF1YWwoZCxjKX1yZXR1cm4gZD09PWN9LGJlZ2luRWRpdDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoIWEuZWRpdGluZyl7YS5lZGl0aW5nPXRydWU7YS5kaXJ0eVNhdmU9YS5kaXJ0eTthLmRhdGFTYXZlPUV4dC5hcHBseSh7fSxhW2EucGVyc2lzdGVuY2VQcm9wZXJ0eV0pO2EubW9kaWZpZWRTYXZlPUV4dC5hcHBseSh7fSxhLm1vZGlmaWVkKX19LGNhbmNlbEVkaXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuZWRpdGluZyl7YS5lZGl0aW5nPWZhbHNlO2EubW9kaWZpZWQ9YS5tb2RpZmllZFNhdmU7YVthLnBlcnNpc3RlbmNlUHJvcGVydHldPWEuZGF0YVNhdmU7YS5kaXJ0eT1hLmRpcnR5U2F2ZTtkZWxldGUgYS5tb2RpZmllZFNhdmU7ZGVsZXRlIGEuZGF0YVNhdmU7ZGVsZXRlIGEuZGlydHlTYXZlfX0sZW5kRWRpdDpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXMsZDtpZihiLmVkaXRpbmcpe2IuZWRpdGluZz1mYWxzZTtpZighYyl7Yz1iLmdldE1vZGlmaWVkRmllbGROYW1lcygpfWQ9Yi5kaXJ0eXx8Yy5sZW5ndGg+MDtkZWxldGUgYi5tb2RpZmllZFNhdmU7ZGVsZXRlIGIuZGF0YVNhdmU7ZGVsZXRlIGIuZGlydHlTYXZlO2lmKGQmJmEhPT10cnVlKXtiLmFmdGVyRWRpdChjKX19fSxnZXRNb2RpZmllZEZpZWxkTmFtZXM6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGM9ZC5kYXRhU2F2ZSxlPWRbZC5wZXJzaXN0ZW5jZVByb3BlcnR5XSxhPVtdLGI7Zm9yKGIgaW4gZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eShiKSl7aWYoIWQuaXNFcXVhbChlW2JdLGNbYl0pKXthLnB1c2goYil9fX1yZXR1cm4gYX0sZ2V0Q2hhbmdlczpmdW5jdGlvbigpe3ZhciBhPXRoaXMubW9kaWZpZWQsYj17fSxjO2ZvcihjIGluIGEpe2lmKGEuaGFzT3duUHJvcGVydHkoYykpe2JbY109dGhpcy5nZXQoYyl9fXJldHVybiBifSxpc01vZGlmaWVkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1vZGlmaWVkLmhhc093blByb3BlcnR5KGEpfSxzZXREaXJ0eTpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYT1jLmZpZWxkcy5pdGVtcyxnPWEubGVuZ3RoLGUsYixkO2MuZGlydHk9dHJ1ZTtmb3IoZD0wO2Q8ZztkKyspe2U9YVtkXTtpZihlLnBlcnNpc3Qpe2I9ZS5uYW1lO2MubW9kaWZpZWRbYl09Yy5nZXQoYil9fX0scmVqZWN0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsYj1jLm1vZGlmaWVkLGQ7Zm9yKGQgaW4gYil7aWYoYi5oYXNPd25Qcm9wZXJ0eShkKSl7aWYodHlwZW9mIGJbZF0hPSJmdW5jdGlvbiIpe2NbYy5wZXJzaXN0ZW5jZVByb3BlcnR5XVtkXT1iW2RdfX19Yy5kaXJ0eT1mYWxzZTtjLmVkaXRpbmc9ZmFsc2U7Yy5tb2RpZmllZD17fTtpZihhIT09dHJ1ZSl7Yy5hZnRlclJlamVjdCgpfX0sY29tbWl0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5waGFudG9tPWIuZGlydHk9Yi5lZGl0aW5nPWZhbHNlO2IubW9kaWZpZWQ9e307aWYoYSE9PXRydWUpe2IuYWZ0ZXJDb21taXQoKX19LGNvcHk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztyZXR1cm4gbmV3IGIuc2VsZihiLnJhdyxhLG51bGwsRXh0LmFwcGx5KHt9LGJbYi5wZXJzaXN0ZW5jZVByb3BlcnR5XSkpfSxzZXRQcm94eTpmdW5jdGlvbihhKXtpZighYS5pc1Byb3h5KXtpZih0eXBlb2YgYT09PSJzdHJpbmciKXthPXt0eXBlOmF9fWE9RXh0LmNyZWF0ZUJ5QWxpYXMoInByb3h5LiIrYS50eXBlLGEpfWEuc2V0TW9kZWwodGhpcy5zZWxmKTt0aGlzLnByb3h5PWE7cmV0dXJuIGF9LGdldFByb3h5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJveHl9LHZhbGlkYXRlOmZ1bmN0aW9uKCl7dmFyIGs9bmV3IEV4dC5kYXRhLkVycm9ycygpLGM9dGhpcy52YWxpZGF0aW9ucyxlPUV4dC5kYXRhLnZhbGlkYXRpb25zLGIsZCxqLGEsaCxnO2lmKGMpe2I9Yy5sZW5ndGg7Zm9yKGc9MDtnPGI7ZysrKXtkPWNbZ107aj1kLmZpZWxkfHxkLm5hbWU7aD1kLnR5cGU7YT1lW2hdKGQsdGhpcy5nZXQoaikpO2lmKCFhKXtrLmFkZCh7ZmllbGQ6aixtZXNzYWdlOmQubWVzc2FnZXx8ZVtoKyJNZXNzYWdlIl19KX19fXJldHVybiBrfSxpc1ZhbGlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsaWRhdGUoKS5pc1ZhbGlkKCl9LHNhdmU6ZnVuY3Rpb24obSl7bT1FeHQuYXBwbHkoe30sbSk7dmFyIGc9dGhpcyxiPWcucGhhbnRvbT8iY3JlYXRlIjoidXBkYXRlIixsPW0uc2NvcGV8fGcsaj1nLnN0b3JlcyxjPTAsZSxoLGQsYSxrO0V4dC5hcHBseShtLHtyZWNvcmRzOltnXSxhY3Rpb246Yn0pO2E9bmV3IEV4dC5kYXRhLk9wZXJhdGlvbihtKTtrPWZ1bmN0aW9uKGkpe2Q9W2csaV07aWYoaS53YXNTdWNjZXNzZnVsKCkpe2ZvcihlPWoubGVuZ3RoO2M8ZTtjKyspe2g9altjXTtoLmZpcmVFdmVudCgid3JpdGUiLGgsaSk7aC5maXJlRXZlbnQoImRhdGFjaGFuZ2VkIixoKX1FeHQuY2FsbGJhY2sobS5zdWNjZXNzLGwsZCl9ZWxzZXtFeHQuY2FsbGJhY2sobS5mYWlsdXJlLGwsZCl9RXh0LmNhbGxiYWNrKG0uY2FsbGJhY2ssbCxkKX07Zy5nZXRQcm94eSgpW2JdKGEsayxnKTtyZXR1cm4gZ30sZGVzdHJveTpmdW5jdGlvbihsKXtsPUV4dC5hcHBseSh7fSxsKTt2YXIgZT10aGlzLGs9bC5zY29wZXx8ZSxoPWUuc3RvcmVzLGI9MCxkLGcsYyxhLGo7RXh0LmFwcGx5KGwse3JlY29yZHM6W2VdLGFjdGlvbjoiZGVzdHJveSJ9KTthPW5ldyBFeHQuZGF0YS5PcGVyYXRpb24obCk7aj1mdW5jdGlvbihpKXtjPVtlLGldO2lmKGkud2FzU3VjY2Vzc2Z1bCgpKXtmb3IoZD1oLmxlbmd0aDtiPGQ7YisrKXtnPWhbYl07Zy5maXJlRXZlbnQoIndyaXRlIixnLGkpO2cuZmlyZUV2ZW50KCJkYXRhY2hhbmdlZCIsZyl9ZS5jbGVhckxpc3RlbmVycygpO0V4dC5jYWxsYmFjayhsLnN1Y2Nlc3MsayxjKX1lbHNle0V4dC5jYWxsYmFjayhsLmZhaWx1cmUsayxjKX1FeHQuY2FsbGJhY2sobC5jYWxsYmFjayxrLGMpfTtlLmdldFByb3h5KCkuZGVzdHJveShhLGosZSk7cmV0dXJuIGV9LGdldElkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KHRoaXMuaWRQcm9wZXJ0eSl9LGdldE9ic2VydmFibGVJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkfSxzZXRJZDpmdW5jdGlvbihhKXt0aGlzLnNldCh0aGlzLmlkUHJvcGVydHksYSk7dGhpcy5waGFudG9tPSEoYXx8YT09PTApfSxqb2luOmZ1bmN0aW9uKGEpe0V4dC5BcnJheS5pbmNsdWRlKHRoaXMuc3RvcmVzLGEpO3RoaXMuc3RvcmU9dGhpcy5zdG9yZXNbMF19LHVuam9pbjpmdW5jdGlvbihhKXtFeHQuQXJyYXkucmVtb3ZlKHRoaXMuc3RvcmVzLGEpO3RoaXMuc3RvcmU9dGhpcy5zdG9yZXNbMF18fG51bGx9LGFmdGVyRWRpdDpmdW5jdGlvbihhKXt0aGlzLmNhbGxTdG9yZSgiYWZ0ZXJFZGl0IixhKX0sYWZ0ZXJSZWplY3Q6ZnVuY3Rpb24oKXt0aGlzLmNhbGxTdG9yZSgiYWZ0ZXJSZWplY3QiKX0sYWZ0ZXJDb21taXQ6ZnVuY3Rpb24oKXt0aGlzLmNhbGxTdG9yZSgiYWZ0ZXJDb21taXQiKX0sY2FsbFN0b3JlOmZ1bmN0aW9uKGcpe3ZhciBkPUV4dC5BcnJheS5jbG9uZShhcmd1bWVudHMpLGI9dGhpcy5zdG9yZXMsZT0wLGE9Yi5sZW5ndGgsYyxoO2RbMF09dGhpcztmb3IoO2U8YTsrK2Upe2M9YltlXTtpZihjJiZ0eXBlb2YgY1tnXT09ImZ1bmN0aW9uIil7Y1tnXS5hcHBseShjLGQpfWg9Yy50cmVlU3RvcmU7aWYoaCYmdHlwZW9mIGhbZ109PSJmdW5jdGlvbiIpe2hbZ10uYXBwbHkoaCxkKX19fSxnZXREYXRhOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMsYT1kLmZpZWxkcy5pdGVtcyxoPWEubGVuZ3RoLGc9e30sYixlO2ZvcihlPTA7ZTxoO2UrKyl7Yj1hW2VdLm5hbWU7Z1tiXT1kLmdldChiKX1pZihjPT09dHJ1ZSl7RXh0LmFwcGx5KGcsZC5nZXRBc3NvY2lhdGVkRGF0YSgpKX1yZXR1cm4gZ30sZ2V0QXNzb2NpYXRlZERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmVwYXJlQXNzb2NpYXRlZERhdGEoe30sMSl9LHByZXBhcmVBc3NvY2lhdGVkRGF0YTpmdW5jdGlvbih3LHope3ZhciB5PXRoaXMsdD15LmFzc29jaWF0aW9ucy5pdGVtcyxlPXQubGVuZ3RoLHg9e30scT1bXSx2PVtdLG09W10scCxiLGEsbixnLGwsayx1LGgsYyxzLHIsZCxBO2ZvcihzPTA7czxlO3MrKyl7Yz10W3NdO3U9Yy5hc3NvY2lhdGlvbklkO2s9d1t1XTtpZihrJiZrIT09eil7Y29udGludWV9d1t1XT16O2Q9Yy50eXBlO0E9Yy5uYW1lO2lmKGQ9PSJoYXNNYW55Iil7cD15W2Muc3RvcmVOYW1lXTt4W0FdPVtdO2lmKHAmJnAuZ2V0Q291bnQoKT4wKXtiPXAuZGF0YS5pdGVtcztoPWIubGVuZ3RoO2ZvcihyPTA7cjxoO3IrKyl7YT1iW3JdO3hbQV1bcl09YS5nZXREYXRhKCk7cS5wdXNoKGEpO3YucHVzaChBKTttLnB1c2gocil9fX1lbHNle2lmKGQ9PSJiZWxvbmdzVG8ifHxkPT0iaGFzT25lIil7YT15W2MuaW5zdGFuY2VOYW1lXTtpZihhIT09dW5kZWZpbmVkKXt4W0FdPWEuZ2V0RGF0YSgpO3EucHVzaChhKTt2LnB1c2goQSk7bS5wdXNoKC0xKX19fX1mb3Iocz0wLGg9cS5sZW5ndGg7czxoOysrcyl7YT1xW3NdO249eFt2W3NdXTtnPW1bc107bD1hLnByZXBhcmVBc3NvY2lhdGVkRGF0YSh3LHorMSk7aWYoZz09PS0xKXtFeHQuYXBwbHkobixsKX1lbHNle0V4dC5hcHBseShuW2ddLGwpfX1yZXR1cm4geH19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5TdG9yZU1hbmFnZXIiLHtleHRlbmQ6IkV4dC51dGlsLk1peGVkQ29sbGVjdGlvbiIsYWx0ZXJuYXRlQ2xhc3NOYW1lOlsiRXh0LlN0b3JlTWdyIiwiRXh0LmRhdGEuU3RvcmVNZ3IiLCJFeHQuU3RvcmVNYW5hZ2VyIl0sc2luZ2xldG9uOnRydWUsdXNlczpbIkV4dC5kYXRhLkFycmF5U3RvcmUiXSxyZWdpc3RlcjpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI7KGI9YXJndW1lbnRzW2FdKTthKyspe3RoaXMuYWRkKGIpfX0sdW5yZWdpc3RlcjpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI7KGI9YXJndW1lbnRzW2FdKTthKyspe3RoaXMucmVtb3ZlKHRoaXMubG9va3VwKGIpKX19LGxvb2t1cDpmdW5jdGlvbihjKXtpZihFeHQuaXNBcnJheShjKSl7dmFyIGI9WyJmaWVsZDEiXSxlPSFFeHQuaXNBcnJheShjWzBdKSxnPWMsZCxhO2lmKGUpe2c9W107Zm9yKGQ9MCxhPWMubGVuZ3RoO2Q8YTsrK2Qpe2cucHVzaChbY1tkXV0pfX1lbHNle2ZvcihkPTIsYT1jWzBdLmxlbmd0aDtkPD1hOysrZCl7Yi5wdXNoKCJmaWVsZCIrZCl9fXJldHVybiBuZXcgRXh0LmRhdGEuQXJyYXlTdG9yZSh7ZGF0YTpnLGZpZWxkczpiLGF1dG9EZXN0cm95OnRydWUsYXV0b0NyZWF0ZWQ6dHJ1ZSxleHBhbmRlZDplfSl9aWYoRXh0LmlzU3RyaW5nKGMpKXtyZXR1cm4gdGhpcy5nZXQoYyl9ZWxzZXtyZXR1cm4gRXh0LmRhdGEuQWJzdHJhY3RTdG9yZS5jcmVhdGUoYyl9fSxnZXRLZXk6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3RvcmVJZH19LGZ1bmN0aW9uKCl7RXh0LnJlZ1N0b3JlPWZ1bmN0aW9uKGMsYil7dmFyIGE7aWYoRXh0LmlzT2JqZWN0KGMpKXtiPWN9ZWxzZXtiLnN0b3JlSWQ9Y31pZihiIGluc3RhbmNlb2YgRXh0LmRhdGEuU3RvcmUpe2E9Yn1lbHNle2E9bmV3IEV4dC5kYXRhLlN0b3JlKGIpfXJldHVybiBFeHQuZGF0YS5TdG9yZU1hbmFnZXIucmVnaXN0ZXIoYSl9O0V4dC5nZXRTdG9yZT1mdW5jdGlvbihhKXtyZXR1cm4gRXh0LmRhdGEuU3RvcmVNYW5hZ2VyLmxvb2t1cChhKX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbXBvbmVudC5Eb2NrIix7ZXh0ZW5kOiJFeHQubGF5b3V0LmNvbXBvbmVudC5Db21wb25lbnQiLGFsaWFzOiJsYXlvdXQuZG9jayIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQubGF5b3V0LmNvbXBvbmVudC5BYnN0cmFjdERvY2siLHR5cGU6ImRvY2siLGluaXRpYWxpemVkQm9yZGVyczotMSxob3Jpem9udGFsQ29sbGFwc2VQb2xpY3k6e3dpZHRoOnRydWUseDp0cnVlfSx2ZXJ0aWNhbENvbGxhcHNlUG9saWN5OntoZWlnaHQ6dHJ1ZSx5OnRydWV9LGZpbmlzaFJlbmRlcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYyxhO2IuY2FsbFBhcmVudCgpO2M9Yi5nZXRSZW5kZXJUYXJnZXQoKTthPWIuZ2V0RG9ja2VkSXRlbXMoKTtiLmZpbmlzaFJlbmRlckl0ZW1zKGMsYSl9LGlzSXRlbUJveFBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4gdHJ1ZX0saXNJdGVtU2hyaW5rV3JhcDpmdW5jdGlvbihhKXtyZXR1cm4gdHJ1ZX0sZG9ja09wcG9zaXRlczp7dG9wOiJib3R0b20iLHJpZ2h0OiJsZWZ0Iixib3R0b206InRvcCIsbGVmdDoicmlnaHQifSxoYW5kbGVJdGVtQm9yZGVyczpmdW5jdGlvbigpe3ZhciBtPXRoaXMsYT1tLm93bmVyLGwscCxlPW0uYm9yZGVycyxoPW0uZG9ja09wcG9zaXRlcyxiPWEuZG9ja2VkSXRlbXMuZ2VuZXJhdGlvbixnLGssbyxuLGosYyxkPW0uY29sbGFwc2VkO2lmKG0uaW5pdGlhbGl6ZWRCb3JkZXJzPT1ifHwoYS5ib3JkZXImJiFhLm1hbmFnZUJvZHlCb3JkZXJzKSl7cmV0dXJufW0uaW5pdGlhbGl6ZWRCb3JkZXJzPWI7bS5jb2xsYXBzZWQ9ZmFsc2U7cD1tLmdldExheW91dEl0ZW1zKCk7bS5jb2xsYXBzZWQ9ZDtsPXt0b3A6W10scmlnaHQ6W10sYm90dG9tOltdLGxlZnQ6W119O2ZvcihnPTAsaz1wLmxlbmd0aDtnPGs7ZysrKXtvPXBbZ107bj1vLmRvY2s7aWYoby5pZ25vcmVCb3JkZXJNYW5hZ2VtZW50KXtjb250aW51ZX1pZighbFtuXS5zYXRpc2ZpZWQpe2xbbl0ucHVzaChvKTtsW25dLnNhdGlzZmllZD10cnVlfWlmKCFsLnRvcC5zYXRpc2ZpZWQmJmhbbl0hPT0idG9wIil7bC50b3AucHVzaChvKX1pZighbC5yaWdodC5zYXRpc2ZpZWQmJmhbbl0hPT0icmlnaHQiKXtsLnJpZ2h0LnB1c2gobyl9aWYoIWwuYm90dG9tLnNhdGlzZmllZCYmaFtuXSE9PSJib3R0b20iKXtsLmJvdHRvbS5wdXNoKG8pfWlmKCFsLmxlZnQuc2F0aXNmaWVkJiZoW25dIT09ImxlZnQiKXtsLmxlZnQucHVzaChvKX19aWYoZSl7Zm9yKGogaW4gZSl7aWYoZS5oYXNPd25Qcm9wZXJ0eShqKSl7az1lW2pdLmxlbmd0aDtpZighYS5tYW5hZ2VCb2R5Qm9yZGVycyl7Zm9yKGc9MDtnPGs7ZysrKXtjPWVbal1bZ107aWYoIWMuaXNEZXN0cm95ZWQpe2MucmVtb3ZlQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJkb2NrZWQtbm9ib3JkZXItIitqKX19aWYoIWVbal0uc2F0aXNmaWVkJiYhYS5ib2R5Qm9yZGVyKXthLnJlbW92ZUJvZHlDbHMoRXh0LmJhc2VDU1NQcmVmaXgrImRvY2tlZC1ub2JvcmRlci0iK2opfX1lbHNle2lmKGVbal0uc2F0aXNmaWVkKXthLnNldEJvZHlTdHlsZSgiYm9yZGVyLSIraisiLXdpZHRoIiwiIil9fX19fWZvcihqIGluIGwpe2lmKGwuaGFzT3duUHJvcGVydHkoaikpe2s9bFtqXS5sZW5ndGg7aWYoIWEubWFuYWdlQm9keUJvcmRlcnMpe2ZvcihnPTA7ZzxrO2crKyl7bFtqXVtnXS5hZGRDbHMoRXh0LmJhc2VDU1NQcmVmaXgrImRvY2tlZC1ub2JvcmRlci0iK2opfWlmKCghbFtqXS5zYXRpc2ZpZWQmJiFhLmJvZHlCb3JkZXIpfHxhLmJvZHlCb3JkZXI9PT1mYWxzZSl7YS5hZGRCb2R5Q2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJkb2NrZWQtbm9ib3JkZXItIitqKX19ZWxzZXtpZihsW2pdLnNhdGlzZmllZCl7YS5zZXRCb2R5U3R5bGUoImJvcmRlci0iK2orIi13aWR0aCIsIjFweCIpfX19fW0uYm9yZGVycz1sfSxiZWZvcmVMYXlvdXRDeWNsZTpmdW5jdGlvbihlKXt2YXIgYz10aGlzLGI9Yy5vd25lcixnPWMuc2l6ZU1vZGVscy5zaHJpbmtXcmFwLGQsYTtpZihiLmNvbGxhcHNlZCl7aWYoYi5jb2xsYXBzZWRWZXJ0aWNhbCgpKXthPXRydWU7ZS5tZWFzdXJlRGltZW5zaW9ucz0xfWVsc2V7ZD10cnVlO2UubWVhc3VyZURpbWVuc2lvbnM9Mn19ZS5jb2xsYXBzZWRWZXJ0PWE7ZS5jb2xsYXBzZWRIb3J6PWQ7aWYoYSl7ZS5oZWlnaHRNb2RlbD1nfWVsc2V7aWYoZCl7ZS53aWR0aE1vZGVsPWd9fX0sYmVnaW5MYXlvdXQ6ZnVuY3Rpb24oZCl7dmFyIGs9dGhpcyxjPWsub3duZXIsbj1rLmdldExheW91dEl0ZW1zKCksYj1kLmNvbnRleHQsZz1uLmxlbmd0aCxsLGosbSxhLGUsaDtrLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtrLmhhbmRsZUl0ZW1Cb3JkZXJzKCk7aD1jLmdldENvbGxhcHNlZCgpO2lmKGghPT1rLmxhc3RDb2xsYXBzZWRTdGF0ZSYmRXh0LmlzRGVmaW5lZChrLmxhc3RDb2xsYXBzZWRTdGF0ZSkpe2lmKGsub3duZXIuY29sbGFwc2VkKXtkLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nPTE7Yy5hZGRDbHNXaXRoVUkoYy5jb2xsYXBzZWRDbHMpfWVsc2V7ZC5pc0NvbGxhcHNpbmdPckV4cGFuZGluZz0yO2MucmVtb3ZlQ2xzV2l0aFVJKGMuY29sbGFwc2VkQ2xzKTtkLmxhc3RDb2xsYXBzZWRTdGF0ZT1rLmxhc3RDb2xsYXBzZWRTdGF0ZX19ay5sYXN0Q29sbGFwc2VkU3RhdGU9aDtkLmRvY2tlZEl0ZW1zPWw9W107Zm9yKGo9MDtqPGc7aisrKXttPW5bal07aWYobS5yZW5kZXJlZCl7YT1iLmdldENtcChtKTthLmRvY2tlZEF0PXt4OjAseTowfTthLm9mZnNldHM9ZT1FeHQuRWxlbWVudC5wYXJzZUJveChtLm9mZnNldHN8fHt9KTtlLndpZHRoPWUubGVmdCtlLnJpZ2h0O2UuaGVpZ2h0PWUudG9wK2UuYm90dG9tO2wucHVzaChhKX19ZC5ib2R5Q29udGV4dD1kLmdldEVsKCJib2R5Iil9LGJlZ2luTGF5b3V0Q3ljbGU6ZnVuY3Rpb24oYil7dmFyIGU9dGhpcyxsPWIuZG9ja2VkSXRlbXMsZD1sLmxlbmd0aCxhPWUub3duZXIsZz1hLmZyYW1lQm9keSxrPWUubGFzdEhlaWdodE1vZGVsLGMsaixoO2UuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGsmJmsuc2hyaW5rV3JhcCYmIWIuaGVpZ2h0TW9kZWwuc2hyaW5rV3JhcCYmIWUub3duZXIubWFuYWdlSGVpZ2h0KXthLmJvZHkuZG9tLnN0eWxlLm1hcmdpbkJvdHRvbT0iIn1pZihiLndpZHRoTW9kZWwuYXV0byl7aWYoYi53aWR0aE1vZGVsLnNocmlua1dyYXApe2EuZWwuc2V0V2lkdGgobnVsbCl9YS5ib2R5LnNldFdpZHRoKG51bGwpO2lmKGcpe2cuc2V0V2lkdGgobnVsbCl9fWlmKGIuaGVpZ2h0TW9kZWwuYXV0byl7YS5ib2R5LnNldEhlaWdodChudWxsKTtpZihnKXtnLnNldEhlaWdodChudWxsKX19aWYoYi5jb2xsYXBzZWRWZXJ0KXtiLnNldENvbnRlbnRIZWlnaHQoMCl9ZWxzZXtpZihiLmNvbGxhcHNlZEhvcnope2Iuc2V0Q29udGVudFdpZHRoKDApfX1mb3IoYz0wO2M8ZDtjKyspe2o9bFtjXS50YXJnZXQ7aD1qLmRvY2s7aWYoaD09InJpZ2h0Iil7ai5lbC5zZXRMZWZ0KDApfWVsc2V7aWYoaCE9ImxlZnQiKXtjb250aW51ZX19fX0sY2FsY3VsYXRlOmZ1bmN0aW9uKGQpe3ZhciBrPXRoaXMsYz1rLm1lYXN1cmVBdXRvRGltZW5zaW9ucyhkLGQubWVhc3VyZURpbWVuc2lvbnMpLGI9ZC5zdGF0ZSxqPWIuaG9yekRvbmUsZT1iLnZlcnREb25lLGc9ZC5ib2R5Q29udGV4dCxhLGksaCxsO2QuYm9yZGVySW5mb3x8ZC5nZXRCb3JkZXJJbmZvKCk7ZC5wYWRkaW5nSW5mb3x8ZC5nZXRQYWRkaW5nSW5mbygpO2QuZnJhbWluZ0luZm98fGQuZ2V0RnJhbWluZygpO2cuYm9yZGVySW5mb3x8Zy5nZXRCb3JkZXJJbmZvKCk7Zy5wYWRkaW5nSW5mb3x8Zy5nZXRQYWRkaW5nSW5mbygpO2E9IWomJmsuY3JlYXRlQXhpcyhkLGMuY29udGVudFdpZHRoLGQud2lkdGhNb2RlbCwibGVmdCIsInJpZ2h0IiwieCIsIndpZHRoIiwiV2lkdGgiLGQuY29sbGFwc2VkSG9yeik7aT0hZSYmay5jcmVhdGVBeGlzKGQsYy5jb250ZW50SGVpZ2h0LGQuaGVpZ2h0TW9kZWwsInRvcCIsImJvdHRvbSIsInkiLCJoZWlnaHQiLCJIZWlnaHQiLGQuY29sbGFwc2VkVmVydCk7Zm9yKGg9MCxsPWQuZG9ja2VkSXRlbXMubGVuZ3RoO2wtLTsrK2gpe2lmKGEpe2suZG9ja0NoaWxkKGQsYSxsLGgpfWlmKGkpe2suZG9ja0NoaWxkKGQsaSxsLGgpfX1pZihhJiZrLmZpbmlzaEF4aXMoZCxhKSl7Yi5ob3J6RG9uZT1qPWF9aWYoaSYmay5maW5pc2hBeGlzKGQsaSkpe2IudmVydERvbmU9ZT1pfWlmKGomJmUmJmsuZmluaXNoQ29uc3RyYWludHMoZCxqLGUpKXtrLmZpbmlzaFBvc2l0aW9ucyhkLGosZSl9ZWxzZXtrLmRvbmU9ZmFsc2V9fSxjcmVhdGVBeGlzOmZ1bmN0aW9uKG8saixlLG4saSxzLG0sayxkKXt2YXIgdT0wLGI9dGhpcy5vd25lcixnPWJbIm1heCIra10sYz1iWyJtaW4iK2tdfHwwLGw9ZyE9bnVsbCx0PSJzZXQiK2sscSxhLHIscCxoO2lmKGUuc2hyaW5rV3JhcCl7aWYoZCl7aD0wfWVsc2V7YT1vLmJvZHlDb250ZXh0O2g9aithLmJvcmRlckluZm9bbV19fWVsc2V7cT1vLmJvcmRlckluZm87cj1vLmZyYW1pbmdJbmZvO3A9by5wYWRkaW5nSW5mbztoPW8uZ2V0UHJvcChtKTtoLT1xW2ldK3BbaV0rcltpXTt1PXFbbl0rcFtuXStyW25dfXJldHVybntzaHJpbmtXcmFwOmUuc2hyaW5rV3JhcCxzaXplTW9kZWw6ZSxiZWdpbjp1LGVuZDpoLGNvbGxhcHNlZDpkLGhvcml6b250YWw6cz09IngiLGlnbm9yZUZyYW1lQmVnaW46ZmFsc2UsaWdub3JlRnJhbWVFbmQ6ZmFsc2UsaW5pdGlhbFNpemU6aC11LGhhc01pbk1heENvbnN0cmFpbnRzOihjfHxsKSYmZS5zaHJpbmtXcmFwLG1pblNpemU6YyxtYXhTaXplOmw/ZzoxMDAwMDAwMDAwLGJvZHlQb3NQcm9wOnRoaXMub3duZXIubWFuYWdlSGVpZ2h0P3M6KCJtYXJnaW4tIituKSxkb2NrQmVnaW46bixkb2NrRW5kOmkscG9zUHJvcDpzLHNpemVQcm9wOm0sc2l6ZVByb3BDYXA6ayxzZXRTaXplOnQsZG9ja2VkUGl4ZWxzRW5kOjB9fSxkb2NrQ2hpbGQ6ZnVuY3Rpb24oYixjLGosZCl7dmFyIGU9dGhpcyxhPWIuZG9ja2VkSXRlbXNbYy5zaHJpbmtXcmFwP2o6ZF0saD1hLnRhcmdldCxpPWguZG9jayxnO2lmKGguaWdub3JlUGFyZW50RnJhbWUmJmIuaXNDb2xsYXBzaW5nT3JFeHBhbmRpbmcpe2EuY2xlYXJNYXJnaW5DYWNoZSgpfWlmKGk9PWMuZG9ja0JlZ2luKXtpZihjLnNocmlua1dyYXApe2c9ZS5kb2NrT3V0d2FyZEJlZ2luKGIsYSxoLGMpfWVsc2V7Zz1lLmRvY2tJbndhcmRCZWdpbihiLGEsaCxjKX19ZWxzZXtpZihpPT1jLmRvY2tFbmQpe2lmKGMuc2hyaW5rV3JhcCl7Zz1lLmRvY2tPdXR3YXJkRW5kKGIsYSxoLGMpfWVsc2V7Zz1lLmRvY2tJbndhcmRFbmQoYixhLGgsYyl9fWVsc2V7Zz1lLmRvY2tTdHJldGNoKGIsYSxoLGMpfX1hLmRvY2tlZEF0W2MucG9zUHJvcF09Z30sZG9ja0lud2FyZEJlZ2luOmZ1bmN0aW9uKGcsZSxkLGIpe3ZhciBpPWIuYmVnaW4saD1iLnNpemVQcm9wLGEsYztpZihkLmlnbm9yZVBhcmVudEZyYW1lKXtjPWQuZG9jaztpLT1nLmJvcmRlckluZm9bY10rZy5wYWRkaW5nSW5mb1tjXStnLmZyYW1pbmdJbmZvW2NdfWlmKCFkLm92ZXJsYXkpe2E9ZS5nZXRQcm9wKGgpK2UuZ2V0TWFyZ2luSW5mbygpW2hdO2IuYmVnaW4rPWF9cmV0dXJuIGl9LGRvY2tJbndhcmRFbmQ6ZnVuY3Rpb24oZSxkLGMsYil7dmFyIGg9Yi5zaXplUHJvcCxhPWQuZ2V0UHJvcChoKStkLmdldE1hcmdpbkluZm8oKVtoXSxnPWIuZW5kLWE7aWYoIWMub3ZlcmxheSl7Yi5lbmQ9Z31pZihjLmlnbm9yZVBhcmVudEZyYW1lKXtnKz1lLmJvcmRlckluZm9bYy5kb2NrXStlLnBhZGRpbmdJbmZvW2MuZG9ja10rZS5mcmFtaW5nSW5mb1tjLmRvY2tdfXJldHVybiBnfSxkb2NrT3V0d2FyZEJlZ2luOmZ1bmN0aW9uKGcsZSxkLGIpe3ZhciBpPWIuYmVnaW4saD1iLnNpemVQcm9wLGMsYTtpZihiLmNvbGxhcHNlZCl7Yi5pZ25vcmVGcmFtZUJlZ2luPWIuaWdub3JlRnJhbWVFbmQ9dHJ1ZX1lbHNle2lmKGQuaWdub3JlUGFyZW50RnJhbWUpe2M9ZC5kb2NrO2ktPWcuYm9yZGVySW5mb1tjXStnLnBhZGRpbmdJbmZvW2NdK2cuZnJhbWluZ0luZm9bY107Yi5pZ25vcmVGcmFtZUJlZ2luPXRydWV9fWlmKCFkLm92ZXJsYXkpe2E9ZS5nZXRQcm9wKGgpK2UuZ2V0TWFyZ2luSW5mbygpW2hdO2ktPWE7Yi5iZWdpbj1pfXJldHVybiBpfSxkb2NrT3V0d2FyZEVuZDpmdW5jdGlvbihnLGUsZCxiKXt2YXIgaT1iLmVuZCxoPWIuc2l6ZVByb3AsYyxhO2E9ZS5nZXRQcm9wKGgpK2UuZ2V0TWFyZ2luSW5mbygpW2hdO2lmKGIuY29sbGFwc2VkKXtiLmlnbm9yZUZyYW1lQmVnaW49Yi5pZ25vcmVGcmFtZUVuZD10cnVlfWVsc2V7aWYoZC5pZ25vcmVQYXJlbnRGcmFtZSl7Yz1kLmRvY2s7aSs9Zy5ib3JkZXJJbmZvW2NdK2cucGFkZGluZ0luZm9bY10rZy5mcmFtaW5nSW5mb1tjXTtiLmlnbm9yZUZyYW1lRW5kPXRydWV9fWlmKCFkLm92ZXJsYXkpe2IuZW5kPWkrYTtiLmRvY2tlZFBpeGVsc0VuZCs9YX1yZXR1cm4gaX0sZG9ja1N0cmV0Y2g6ZnVuY3Rpb24oYyxiLG4sZCl7dmFyIG89bi5kb2NrLGo9ZC5zaXplUHJvcCxhPW89PSJ0b3AifHxvPT0iYm90dG9tIixlPWIub2Zmc2V0cyxpPWMuYm9yZGVySW5mbyxtPWMucGFkZGluZ0luZm8saD1hPyJyaWdodCI6ImJvdHRvbSIscT1hPyJsZWZ0IjoidG9wIixsPWQuYmVnaW4rZVtxXSxnLHAsaztpZihuLnN0cmV0Y2ghPT1mYWxzZSl7cD1kLmVuZC1sLWVbaF07aWYobi5pZ25vcmVQYXJlbnRGcmFtZSl7az1jLmZyYW1pbmdJbmZvO2wtPWlbcV0rbVtxXStrW3FdO3ArPWlbal0rbVtqXStrW2pdfWc9Yi5nZXRNYXJnaW5JbmZvKCk7cC09Z1tqXTtiW2Quc2V0U2l6ZV0ocCl9cmV0dXJuIGx9LGZpbmlzaEF4aXM6ZnVuY3Rpb24oYyxlKXt2YXIgbz1lLmVuZC1lLmJlZ2luLGw9ZS5zZXRTaXplLGQ9ZS5kb2NrQmVnaW4saT1lLmRvY2tFbmQsaj1jLmJvcmRlckluZm8sbT1jLnBhZGRpbmdJbmZvLGs9Yy5mcmFtaW5nSW5mbyxoPW1bZF0raltkXStrW2RdLGc9Yy5ib2R5Q29udGV4dCxuLGEsYjtpZihlLnNocmlua1dyYXApe2UuZGVsdGE9LWUuYmVnaW47YT1lLmluaXRpYWxTaXplO2lmKGUuaWdub3JlRnJhbWVCZWdpbil7ZS5kZWx0YS09altkXTtuPS1lLmJlZ2luLWh9ZWxzZXtvKz1oO2UuZGVsdGErPW1bZF0ra1tkXTtuPS1lLmJlZ2lufWlmKCFlLmlnbm9yZUZyYW1lRW5kKXtvKz1tW2ldK2pbaV0ra1tpXX1lLnNpemU9bztpZighZS5ob3Jpem9udGFsJiYhdGhpcy5vd25lci5tYW5hZ2VIZWlnaHQpe2I9ZmFsc2V9fWVsc2V7ZS5kZWx0YT0taltlLmRvY2tCZWdpbl07YT1vO249ZS5iZWdpbi1ofWdbbF0oYSxiKTtnLnNldFByb3AoZS5ib2R5UG9zUHJvcCxuKTtyZXR1cm4gIWlzTmFOKG8pfSxmaW5pc2hDb25zdHJhaW50czpmdW5jdGlvbihlLGEsaCl7dmFyIGo9dGhpcy5zaXplTW9kZWxzLGw9YS5zaHJpbmtXcmFwLGI9aC5zaHJpbmtXcmFwLGMsayxkLGcsaSxtO2lmKGwpe209YS5zaXplO2lmKG08YS5taW5TaXplKXtpPWouY29uc3RyYWluZWRNaW47ZD1hLm1pblNpemV9ZWxzZXtpZihtPmEubWF4U2l6ZSl7aT1qLmNvbnN0cmFpbmVkTWF4O2Q9YS5tYXhTaXplfWVsc2V7ZD1tfX19aWYoYil7bT1oLnNpemU7aWYobTxoLm1pblNpemUpe2c9ai5jb25zdHJhaW5lZE1pbjtrPWgubWluU2l6ZX1lbHNle2lmKG0+aC5tYXhTaXplKXtnPWouY29uc3RyYWluZWRNYXg7az1oLm1heFNpemV9ZWxzZXtpZighZS5jb2xsYXBzZWRWZXJ0JiYhdGhpcy5vd25lci5tYW5hZ2VIZWlnaHQpe2M9ZmFsc2U7ZS5ib2R5Q29udGV4dC5zZXRQcm9wKCJtYXJnaW4tYm90dG9tIixoLmRvY2tlZFBpeGVsc0VuZCl9az1tfX19aWYoaXx8Zyl7aWYoaSYmZyYmaS5jb25zdHJhaW5lZE1heCYmZy5jb25zdHJhaW5lZE1pbil7ZS5pbnZhbGlkYXRlKHt3aWR0aE1vZGVsOml9KTtyZXR1cm4gZmFsc2V9aWYoIWUud2lkdGhNb2RlbC5jYWxjdWxhdGVkRnJvbVNocmlua1dyYXAmJiFlLmhlaWdodE1vZGVsLmNhbGN1bGF0ZWRGcm9tU2hyaW5rV3JhcCl7ZS5pbnZhbGlkYXRlKHt3aWR0aE1vZGVsOmksaGVpZ2h0TW9kZWw6Z30pO3JldHVybiBmYWxzZX19aWYobCl7ZS5zZXRXaWR0aChkKTtpZihpKXtlLndpZHRoTW9kZWw9aX19aWYoYil7ZS5zZXRIZWlnaHQoayxjKTtpZihnKXtlLmhlaWdodE1vZGVsPWd9fXJldHVybiB0cnVlfSxmaW5pc2hQb3NpdGlvbnM6ZnVuY3Rpb24oZCxhLGgpe3ZhciBqPWQuZG9ja2VkSXRlbXMsYz1qLmxlbmd0aCxnPWEuZGVsdGEsZT1oLmRlbHRhLGksYjtmb3IoaT0wO2k8YzsrK2kpe2I9altpXTtiLnNldFByb3AoIngiLGcrYi5kb2NrZWRBdC54KTtiLnNldFByb3AoInkiLGUrYi5kb2NrZWRBdC55KX19LGZpbmlzaGVkTGF5b3V0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMsYz1iLnRhcmdldDthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZighYi5hbmltYXRlUG9saWN5KXtpZihiLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nPT09MSl7Yy5hZnRlckNvbGxhcHNlKGZhbHNlKX1lbHNle2lmKGIuaXNDb2xsYXBzaW5nT3JFeHBhbmRpbmc9PT0yKXtjLmFmdGVyRXhwYW5kKGZhbHNlKX19fX0sZ2V0QW5pbWF0ZVBvbGljeTpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGEsZDtpZihjLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nPT0xKXthPWIubGFzdENvbGxhcHNlZFN0YXRlfWVsc2V7aWYoYy5pc0NvbGxhcHNpbmdPckV4cGFuZGluZz09Mil7YT1jLmxhc3RDb2xsYXBzZWRTdGF0ZX19aWYoYT09ImxlZnQifHxhPT0icmlnaHQiKXtkPWIuaG9yaXpvbnRhbENvbGxhcHNlUG9saWN5fWVsc2V7aWYoYT09InRvcCJ8fGE9PSJib3R0b20iKXtkPWIudmVydGljYWxDb2xsYXBzZVBvbGljeX19cmV0dXJuIGR9LGdldERvY2tlZEl0ZW1zOmZ1bmN0aW9uKGMsbil7dmFyIGo9dGhpcyxlPShjPT09InZpc3VhbCIpLGs9ZT9FeHQuQ29tcG9uZW50UXVlcnkucXVlcnkoIltyZW5kZXJlZF0iLGoub3duZXIuZG9ja2VkSXRlbXMuaXRlbXMpOmoub3duZXIuZG9ja2VkSXRlbXMuaXRlbXMsaD1rJiZrLmxlbmd0aCYmYyE9PWZhbHNlLGIsbSxsLGcsZCxhO2lmKG49PW51bGwpe2w9aCYmIWU/ay5zbGljZSgpOmt9ZWxzZXtsPVtdO2ZvcihnPTAsYT1rLmxlbmd0aDtnPGE7KytnKXttPWtbZ10uZG9jaztkPShtPT0idG9wInx8bT09ImxlZnQiKTtpZihuP2Q6IWQpe2wucHVzaChrW2ddKX19aD1oJiZsLmxlbmd0aH1pZihoKXtiPShjPWN8fCJyZW5kZXIiKT09InJlbmRlciI7RXh0LkFycmF5LnNvcnQobCxmdW5jdGlvbihvLGkpe3ZhciBwLHE7aWYoYiYmKChwPWoub3duZXIuZG9ja09yZGVyW28uZG9ja10pIT09KHE9ai5vd25lci5kb2NrT3JkZXJbaS5kb2NrXSkpKXtpZighKHArcSkpe3JldHVybiBwLXF9fXA9ai5nZXRJdGVtV2VpZ2h0KG8sYyk7cT1qLmdldEl0ZW1XZWlnaHQoaSxjKTtpZigocCE9PXVuZGVmaW5lZCkmJihxIT09dW5kZWZpbmVkKSl7cmV0dXJuIHAtcX1yZXR1cm4gMH0pfXJldHVybiBsfHxbXX0sZ2V0SXRlbVdlaWdodDpmdW5jdGlvbihiLGEpe3ZhciBjPWIud2VpZ2h0fHx0aGlzLm93bmVyLmRlZmF1bHREb2NrV2VpZ2h0c1tiLmRvY2tdO3JldHVybiBjW2FdfHxjfSxnZXRMYXlvdXRJdGVtczpmdW5jdGlvbigpe3ZhciBlPXRoaXMsYixnLGQsYyxhO2lmKGUub3duZXIuY29sbGFwc2VkKXthPWUub3duZXIuZ2V0Q29sbGFwc2VkRG9ja2VkSXRlbXMoKX1lbHNle2I9ZS5nZXREb2NrZWRJdGVtcygidmlzdWFsIik7Zz1iLmxlbmd0aDthPVtdO2ZvcihjPTA7YzxnO2MrKyl7ZD1iW2NdO2lmKCFkLmhpZGRlbil7YS5wdXNoKGQpfX19cmV0dXJuIGF9LG1lYXN1cmVDb250ZW50V2lkdGg6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ib2R5Q29udGV4dDtyZXR1cm4gYi5lbC5nZXRXaWR0aCgpLWIuZ2V0Qm9yZGVySW5mbygpLndpZHRofSxtZWFzdXJlQ29udGVudEhlaWdodDpmdW5jdGlvbihhKXt2YXIgYj1hLmJvZHlDb250ZXh0O3JldHVybiBiLmVsLmdldEhlaWdodCgpLWIuZ2V0Qm9yZGVySW5mbygpLmhlaWdodH0scmVkb0xheW91dDpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE9Yi5vd25lcjtpZihjLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nPT0xKXtpZihhLnJlRXhwYW5kZXIpe2EucmVFeHBhbmRlci5lbC5zaG93KCl9YS5hZGRDbHNXaXRoVUkoYS5jb2xsYXBzZWRDbHMpO2MucmVkbyh0cnVlKX1lbHNle2lmKGMuaXNDb2xsYXBzaW5nT3JFeHBhbmRpbmc9PTIpe2EucmVtb3ZlQ2xzV2l0aFVJKGEuY29sbGFwc2VkQ2xzKTtjLmJvZHlDb250ZXh0LnJlZG8oKX19fSxyZW5kZXJDaGlsZHJlbjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmdldERvY2tlZEl0ZW1zKCksYz1iLmdldFJlbmRlclRhcmdldCgpO2IucmVuZGVySXRlbXMoYSxjKX0scmVuZGVySXRlbXM6ZnVuY3Rpb24oayxoKXt2YXIgbD10aGlzLGM9ay5sZW5ndGgsYT0wLGI9MCxwPTAsbT1sLmdldFJlbmRlclRhcmdldCgpLmRvbS5jaGlsZE5vZGVzLG49bS5sZW5ndGgsZyxkLGUsbztmb3IoZz0wLGQ9MDtnPG47ZysrKXtlPW1bZ107aWYoRXh0LmZseShlKS5oYXNDbHMoIngtcmVzaXphYmxlLWhhbmRsZSIpKXticmVha31mb3IoZD0wO2Q8YztkKyspe289a1tkXTtpZihvLnJlbmRlcmVkJiZvLmVsLmRvbT09PWUpe2JyZWFrfX1pZihkPT09Yyl7cCsrfX1mb3IoO2E8YzthKyssYisrKXtvPWtbYV07aWYoYT09PWImJihvLmRvY2s9PT0icmlnaHQifHxvLmRvY2s9PT0iYm90dG9tIikpe2IrPXB9aWYobyYmIW8ucmVuZGVyZWQpe2wucmVuZGVySXRlbShvLGgsYil9ZWxzZXtpZighbC5pc1ZhbGlkUGFyZW50KG8saCxiKSl7bC5tb3ZlSXRlbShvLGgsYil9fX19LHVuZG9MYXlvdXQ6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhPWIub3duZXI7aWYoYy5pc0NvbGxhcHNpbmdPckV4cGFuZGluZz09MSl7aWYoYS5yZUV4cGFuZGVyKXthLnJlRXhwYW5kZXIuZWwuaGlkZSgpfWEucmVtb3ZlQ2xzV2l0aFVJKGEuY29sbGFwc2VkQ2xzKTtjLnVuZG8odHJ1ZSl9ZWxzZXtpZihjLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nPT0yKXthLmFkZENsc1dpdGhVSShhLmNvbGxhcHNlZENscyk7Yy5ib2R5Q29udGV4dC51bmRvKCl9fX0sc2l6ZVBvbGljeTp7bm9zdHJldGNoOntzZXRzV2lkdGg6MCxzZXRzSGVpZ2h0OjB9LHN0cmV0Y2hIOntzZXRzV2lkdGg6MSxzZXRzSGVpZ2h0OjB9LHN0cmV0Y2hWOntzZXRzV2lkdGg6MCxzZXRzSGVpZ2h0OjF9LGF1dG9TdHJldGNoSDp7cmVhZHNXaWR0aDoxLHNldHNXaWR0aDoxLHNldHNIZWlnaHQ6MH0sYXV0b1N0cmV0Y2hWOntyZWFkc0hlaWdodDoxLHNldHNXaWR0aDowLHNldHNIZWlnaHQ6MX19LGdldEl0ZW1TaXplUG9saWN5OmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuc2l6ZVBvbGljeSxiLGE7aWYoYy5zdHJldGNoPT09ZmFsc2Upe3JldHVybiBkLm5vc3RyZXRjaH1iPWMuZG9jazthPShiPT0ibGVmdCJ8fGI9PSJyaWdodCIpO2lmKGEpe3JldHVybiBkLnN0cmV0Y2hWfXJldHVybiBkLnN0cmV0Y2hIfSxjb25maWd1cmVJdGVtOmZ1bmN0aW9uKGEsYil7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YS5hZGRDbHMoRXh0LmJhc2VDU1NQcmVmaXgrImRvY2tlZCIpO2EuYWRkQ2xzV2l0aFVJKCJkb2NrZWQtIithLmRvY2spfSxhZnRlclJlbW92ZTpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZih0aGlzLml0ZW1DbHMpe2EuZWwucmVtb3ZlQ2xzKHRoaXMuaXRlbUNscysiLSIrYS5kb2NrKX12YXIgYj1hLmVsLmRvbTtpZighYS5kZXN0cm95aW5nJiZiKXtiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYil9dGhpcy5jaGlsZHJlbkNoYW5nZWQ9dHJ1ZX19KTtFeHQuZGVmaW5lKCJFeHQudG9vbGJhci5GaWxsIix7ZXh0ZW5kOiJFeHQuQ29tcG9uZW50IixhbGlhczoid2lkZ2V0LnRiZmlsbCIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuVG9vbGJhci5GaWxsIixpc0ZpbGw6dHJ1ZSxmbGV4OjF9KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbnRhaW5lci5ib3hPdmVyZmxvdy5Ob25lIix7YWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQubGF5b3V0LmJveE92ZXJmbG93Lk5vbmUiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGIsYSl7dGhpcy5sYXlvdXQ9YjtFeHQuYXBwbHkodGhpcyxhKX0saGFuZGxlT3ZlcmZsb3c6RXh0LmVtcHR5Rm4sY2xlYXJPdmVyZmxvdzpFeHQuZW1wdHlGbixiZWdpbkxheW91dDpFeHQuZW1wdHlGbixiZWdpbkxheW91dEN5Y2xlOkV4dC5lbXB0eUZuLGZpbmlzaGVkTGF5b3V0OkV4dC5lbXB0eUZuLGNvbXBsZXRlTGF5b3V0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMsYz1iLnN0YXRlLmJveFBsYW4sZDtpZihjJiZjLnRvb05hcnJvdyl7ZD1hLmhhbmRsZU92ZXJmbG93KGIpO2lmKGQpe2lmKGQucmVzZXJ2ZWRTcGFjZSl7YS5sYXlvdXQucHVibGlzaElubmVyQ3RTaXplKGIsZC5yZXNlcnZlZFNwYWNlKX19fWVsc2V7YS5jbGVhck92ZXJmbG93KCl9fSxvblJlbW92ZTpFeHQuZW1wdHlGbixnZXRJdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmxheW91dC5vd25lci5nZXRDb21wb25lbnQoYSl9LGdldE93bmVyVHlwZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhLmlzVG9vbGJhcil7Yj0idG9vbGJhciJ9ZWxzZXtpZihhLmlzVGFiQmFyKXtiPSJ0YWJiYXIifWVsc2V7aWYoYS5pc01lbnUpe2I9Im1lbnUifWVsc2V7Yj1hLmdldFhUeXBlKCl9fX1yZXR1cm4gYn0sZ2V0UHJlZml4Q29uZmlnOkV4dC5lbXB0eUZuLGdldFN1ZmZpeENvbmZpZzpFeHQuZW1wdHlGbixnZXRPdmVyZmxvd0NsczpmdW5jdGlvbigpe3JldHVybiIifX0pO0V4dC5kZWZpbmUoIkV4dC50b29sYmFyLkl0ZW0iLHtleHRlbmQ6IkV4dC5Db21wb25lbnQiLGFsaWFzOiJ3aWRnZXQudGJpdGVtIixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5Ub29sYmFyLkl0ZW0iLGVuYWJsZTpFeHQuZW1wdHlGbixkaXNhYmxlOkV4dC5lbXB0eUZuLGZvY3VzOkV4dC5lbXB0eUZufSk7RXh0LmRlZmluZSgiRXh0LnRvb2xiYXIuU2VwYXJhdG9yIix7ZXh0ZW5kOiJFeHQudG9vbGJhci5JdGVtIixhbGlhczoid2lkZ2V0LnRic2VwYXJhdG9yIixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5Ub29sYmFyLlNlcGFyYXRvciIsYmFzZUNsczpFeHQuYmFzZUNTU1ByZWZpeCsidG9vbGJhci1zZXBhcmF0b3IiLGZvY3VzYWJsZTpmYWxzZSxib3JkZXI6dHJ1ZX0pO0V4dC5kZWZpbmUoIkV4dC5sYXlvdXQuY29tcG9uZW50LkJ1dHRvbiIse2FsaWFzOlsibGF5b3V0LmJ1dHRvbiJdLGV4dGVuZDoiRXh0LmxheW91dC5jb21wb25lbnQuQXV0byIsdHlwZToiYnV0dG9uIixjZWxsQ2xzUkU6Ly1idG4tKHRsfGJyKVxiLyxodG1sUkU6LzwuKj4vLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5oYWNrV2lkdGg9RXh0LmlzSUUmJighRXh0LmlzU3RyaWN0fHxFeHQuaXNJRTZ8fEV4dC5pc0lFN3x8RXh0LmlzSUU4KTt0aGlzLmhlaWdodEluY2x1ZGVzUGFkZGluZz1FeHQuaXNJRTYmJkV4dC5pc1N0cmljdH0sYmVnaW5MYXlvdXQ6ZnVuY3Rpb24oYSl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5jYWNoZVRhcmdldEluZm8oYSl9LGJlZ2luTGF5b3V0Q3ljbGU6ZnVuY3Rpb24oZSl7dmFyIGM9dGhpcyxkPSIiLGE9Yy5vd25lcixiPWEuYnRuRWwsaT1hLmJ0bklubmVyRWwsZz1hLnRleHQsaDtjLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpLnNldFN0eWxlKCJvdmVyZmxvdyIsZCk7aWYoIWUud2lkdGhNb2RlbC5uYXR1cmFsKXthLmVsLnNldFN0eWxlKCJ3aWR0aCIsZCl9aD1lLmhlaWdodE1vZGVsLnNocmlua1dyYXAmJmcmJmMuaHRtbFJFLnRlc3QoZyk7Yi5zZXRTdHlsZSgid2lkdGgiLGQpO2Iuc2V0U3R5bGUoImhlaWdodCIsaD8iYXV0byI6ZCk7aS5zZXRTdHlsZSgid2lkdGgiLGQpO2kuc2V0U3R5bGUoImhlaWdodCIsaD8iYXV0byI6ZCk7aS5zZXRTdHlsZSgibGluZS1oZWlnaHQiLGg/Im5vcm1hbCI6ZCk7aS5zZXRTdHlsZSgicGFkZGluZy10b3AiLGQpO2EuYnRuSWNvbkVsLnNldFN0eWxlKCJ3aWR0aCIsZCl9LGNhbGN1bGF0ZU93bmVySGVpZ2h0RnJvbUNvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYX0sY2FsY3VsYXRlT3duZXJXaWR0aEZyb21Db250ZW50V2lkdGg6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYX0sbWVhc3VyZUNvbnRlbnRXaWR0aDpmdW5jdGlvbihjKXt2YXIgaT10aGlzLGI9aS5vd25lcixnPWIuYnRuRWwsZD1iLmJ0bklubmVyRWwsbD1iLnRleHQsbSxqLGgsYSxrLGU7aWYoYi50ZXh0JiZpLmhhY2tXaWR0aCYmZyl7bT1pLmJ0bkZyYW1lV2lkdGg7aWYobC5pbmRleE9mKCI+Iik9PT0tMSl7bD1sLnJlcGxhY2UoLzwvZywiJmx0OyIpfWo9RXh0LnV0aWwuVGV4dE1ldHJpY3MubWVhc3VyZShkLGwpO2E9ai53aWR0aCttK2kuYWRqV2lkdGg7az1jLmdldEVsKCJidG5FbCIpO2U9Yy5nZXRFbCgiYnRuSW5uZXJFbCIpO2g9KGIuaWNvbnx8Yi5pY29uQ2xzKSYmKGIuaWNvbkFsaWduPT0idG9wInx8Yi5pY29uQWxpZ249PSJib3R0b20iKTtjLnNldFdpZHRoKGEpO2suc2V0V2lkdGgoai53aWR0aCttKTtlLnNldFdpZHRoKGoud2lkdGgrbSk7aWYoaCl7Yi5idG5JY29uRWwuc2V0V2lkdGgoai53aWR0aCttKX19ZWxzZXthPWMuZWwuZ2V0V2lkdGgoKX1yZXR1cm4gYX0sbWVhc3VyZUNvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oZCl7dmFyIGo9dGhpcyxiPWoub3duZXIsZT1iLmJ0bklubmVyRWwsaT1kLmdldEVsKCJidG5FbCIpLGc9ZC5nZXRFbCgiYnRuSW5uZXJFbCIpLGM9ai5taW5UZXh0SGVpZ2h0LGg9ai5hZGpIZWlnaHQsbT1iLmdldFRleHQoKSxsLGssYTtpZihiLnZlcnRpY2FsKXtsPUV4dC51dGlsLlRleHRNZXRyaWNzLm1lYXN1cmUoZSxiLnRleHQpLndpZHRoO2wrPWouYnRuRnJhbWVIZWlnaHQraDtkLnNldEhlaWdodChsLHRydWUsdHJ1ZSl9ZWxzZXtpZihtJiZqLmh0bWxSRS50ZXN0KG0pKXtrPWUuZ2V0SGVpZ2h0KCk7aWYoazxjKXthPU1hdGguZmxvb3IoKGMtaykvMik7Zy5zZXRIZWlnaHQoYy0oai5oZWlnaHRJbmNsdWRlc1BhZGRpbmc/YTowKSk7Zy5zZXRQcm9wKCJwYWRkaW5nLXRvcCIsYSk7az1jfWw9aytofWVsc2V7bD1kLmVsLmdldEhlaWdodCgpfX1pLnNldEhlaWdodChsLWgpO3JldHVybiBsfSxwdWJsaXNoSW5uZXJIZWlnaHQ6ZnVuY3Rpb24oYyxtKXt2YXIgaj10aGlzLGE9ai5vd25lcixnPUV4dC5pc051bWJlcixpPWMuZ2V0RWwoImJ0bkVsIiksZD1hLmJ0bklubmVyRWwsaD1jLmdldEVsKCJidG5Jbm5lckVsIiksZT1nKG0pP20tai5hZGpIZWlnaHQ6bSxiPWouYnRuRnJhbWVIZWlnaHQsbD1hLmdldFRleHQoKSxrLG47aS5zZXRIZWlnaHQoZSk7aC5zZXRIZWlnaHQoZSk7aWYoIWEudmVydGljYWwmJmU+PTApe2guc2V0UHJvcCgibGluZS1oZWlnaHQiLGUtYisicHgiKX1pZihsJiZqLmh0bWxSRS50ZXN0KGwpKXtoLnNldFByb3AoImxpbmUtaGVpZ2h0Iiwibm9ybWFsIik7ZC5zZXRTdHlsZSgibGluZS1oZWlnaHQiLCJub3JtYWwiKTtrPUV4dC51dGlsLlRleHRNZXRyaWNzLm1lYXN1cmUoZCxsKS5oZWlnaHQ7bj1NYXRoLmZsb29yKE1hdGgubWF4KGUtYi1rLDApLzIpO2guc2V0UHJvcCgicGFkZGluZy10b3AiLGouYnRuRnJhbWVUb3Arbik7aC5zZXRIZWlnaHQoZS0oai5oZWlnaHRJbmNsdWRlc1BhZGRpbmc/bjowKSl9fSxwdWJsaXNoSW5uZXJXaWR0aDpmdW5jdGlvbihnLGMpe3ZhciBlPXRoaXMsaD1FeHQuaXNOdW1iZXIsYT1nLmdldEVsKCJidG5FbCIpLGI9Zy5nZXRFbCgiYnRuSW5uZXJFbCIpLGQ9aChjKT9jLWUuYWRqV2lkdGg6YzthLnNldFdpZHRoKGQpO2Iuc2V0V2lkdGgoZCl9LGNsZWFyVGFyZ2V0Q2FjaGU6ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5hZGpXaWR0aH0sY2FjaGVUYXJnZXRJbmZvOmZ1bmN0aW9uKGIpe3ZhciBnPXRoaXMsYT1nLm93bmVyLGQ9YS5zY2FsZSxpLGUsaixjLGg7aWYoISgiYWRqV2lkdGgiIGluIGcpfHxnLmxhc3RTY2FsZSE9PWQpe2lmKGcubGFzdFNjYWxlKXthLmJ0bklubmVyRWwuc2V0U3R5bGUoImxpbmUtaGVpZ2h0IiwiIil9Zy5sYXN0U2NhbGU9ZDtpPWIuZ2V0UGFkZGluZ0luZm8oKTtlPWIuZ2V0RnJhbWVJbmZvKCk7aj1iLmdldEVsKCJidG5XcmFwIikuZ2V0UGFkZGluZ0luZm8oKTtjPWIuZ2V0RWwoImJ0bklubmVyRWwiKTtoPWMuZ2V0UGFkZGluZ0luZm8oKTtFeHQuYXBwbHkoZyx7YWRqV2lkdGg6ai53aWR0aCtlLndpZHRoK2kud2lkdGgsYWRqSGVpZ2h0OmouaGVpZ2h0K2UuaGVpZ2h0K2kuaGVpZ2h0LGJ0bkZyYW1lV2lkdGg6aC53aWR0aCxidG5GcmFtZUhlaWdodDpoLmhlaWdodCxidG5GcmFtZVRvcDpoLnRvcCxtaW5UZXh0SGVpZ2h0OnBhcnNlSW50KGMuZ2V0U3R5bGUoImxpbmUtaGVpZ2h0IiksMTApfSl9Zy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGZpbmlzaGVkTGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vd25lcjt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihFeHQuaXNXZWJLaXQpe2EuZWwuZG9tLm9mZnNldFdpZHRofX19KTtFeHQuZGVmaW5lKCJFeHQubWVudS5NYW5hZ2VyIix7c2luZ2xldG9uOnRydWUscmVxdWlyZXM6WyJFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24iLCJFeHQudXRpbC5LZXlNYXAiXSxhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5tZW51Lk1lbnVNZ3IiLHVzZXM6WyJFeHQubWVudS5NZW51Il0sbWVudXM6e30sZ3JvdXBzOnt9LGF0dGFjaGVkOmZhbHNlLGxhc3RTaG93Om5ldyBEYXRlKCksaW5pdDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5hY3RpdmU9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbigpO0V4dC5nZXREb2MoKS5hZGRLZXlMaXN0ZW5lcigyNyxmdW5jdGlvbigpe2lmKGEuYWN0aXZlLmxlbmd0aD4wKXthLmhpZGVBbGwoKX19LGEpfSxoaWRlQWxsOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5hY3RpdmUsZSxiLGEsZDtpZihjJiZjLmxlbmd0aD4wKXtlPWMuY2xvbmUoKTtiPWUuaXRlbXM7ZD1iLmxlbmd0aDtmb3IoYT0wO2E8ZDthKyspe2JbYV0uaGlkZSgpfXJldHVybiB0cnVlfXJldHVybiBmYWxzZX0sb25IaWRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmFjdGl2ZTtjLnJlbW92ZShhKTtpZihjLmxlbmd0aDwxKXtFeHQuZ2V0RG9jKCkudW4oIm1vdXNlZG93biIsYi5vbk1vdXNlRG93bixiKTtiLmF0dGFjaGVkPWZhbHNlfX0sb25TaG93OmZ1bmN0aW9uKGEpe3ZhciBlPXRoaXMsZz1lLmFjdGl2ZSxkPWcubGFzdCgpLGM9ZS5hdHRhY2hlZCxiPWEuZ2V0RWwoKSxoO2UubGFzdFNob3c9bmV3IERhdGUoKTtnLmFkZChhKTtpZighYyl7RXh0LmdldERvYygpLm9uKCJtb3VzZWRvd24iLGUub25Nb3VzZURvd24sZSx7YnVmZmVyOkV4dC5pc0lFPzEwOnVuZGVmaW5lZH0pO2UuYXR0YWNoZWQ9dHJ1ZX1hLnRvRnJvbnQoKX0sb25CZWZvcmVIaWRlOmZ1bmN0aW9uKGEpe2lmKGEuYWN0aXZlQ2hpbGQpe2EuYWN0aXZlQ2hpbGQuaGlkZSgpfWlmKGEuYXV0b0hpZGVUaW1lcil7Y2xlYXJUaW1lb3V0KGEuYXV0b0hpZGVUaW1lcik7ZGVsZXRlIGEuYXV0b0hpZGVUaW1lcn19LG9uQmVmb3JlU2hvdzpmdW5jdGlvbihhKXt2YXIgYz10aGlzLmFjdGl2ZSxiPWEucGFyZW50TWVudTtjLnJlbW92ZShhKTtpZighYiYmIWEuYWxsb3dPdGhlck1lbnVzKXt0aGlzLmhpZGVBbGwoKX1lbHNle2lmKGImJmIuYWN0aXZlQ2hpbGQmJmEhPWIuYWN0aXZlQ2hpbGQpe2IuYWN0aXZlQ2hpbGQuaGlkZSgpfX19LG9uTW91c2VEb3duOmZ1bmN0aW9uKGQpe3ZhciBiPXRoaXMsYz1iLmFjdGl2ZSxhPWIubGFzdFNob3c7aWYoRXh0LkRhdGUuZ2V0RWxhcHNlZChhKT41MCYmYy5sZW5ndGg+MCYmIWQuZ2V0VGFyZ2V0KCIuIitFeHQuYmFzZUNTU1ByZWZpeCsibWVudSIpKXtiLmhpZGVBbGwoKX19LHJlZ2lzdGVyOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoIWEuYWN0aXZlKXthLmluaXQoKX1pZihiLmZsb2F0aW5nKXthLm1lbnVzW2IuaWRdPWI7Yi5vbih7YmVmb3JlaGlkZTphLm9uQmVmb3JlSGlkZSxoaWRlOmEub25IaWRlLGJlZm9yZXNob3c6YS5vbkJlZm9yZVNob3csc2hvdzphLm9uU2hvdyxzY29wZTphfSl9fSxnZXQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5tZW51cztpZih0eXBlb2YgYj09InN0cmluZyIpe2lmKCFhKXtyZXR1cm4gbnVsbH1yZXR1cm4gYVtiXX1lbHNle2lmKGIuaXNNZW51KXtyZXR1cm4gYn1lbHNle2lmKEV4dC5pc0FycmF5KGIpKXtyZXR1cm4gbmV3IEV4dC5tZW51Lk1lbnUoe2l0ZW1zOmJ9KX1lbHNle3JldHVybiBFeHQuQ29tcG9uZW50TWFuYWdlci5jcmVhdGUoYiwibWVudSIpfX19fSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGQpe3ZhciBhPXRoaXMsYj1hLm1lbnVzLGM9YS5hY3RpdmU7ZGVsZXRlIGJbZC5pZF07Yy5yZW1vdmUoZCk7ZC51bih7YmVmb3JlaGlkZTphLm9uQmVmb3JlSGlkZSxoaWRlOmEub25IaWRlLGJlZm9yZXNob3c6YS5vbkJlZm9yZVNob3csc2hvdzphLm9uU2hvdyxzY29wZTphfSl9LHJlZ2lzdGVyQ2hlY2thYmxlOmZ1bmN0aW9uKGMpe3ZhciBhPXRoaXMuZ3JvdXBzLGI9Yy5ncm91cDtpZihiKXtpZighYVtiXSl7YVtiXT1bXX1hW2JdLnB1c2goYyl9fSx1bnJlZ2lzdGVyQ2hlY2thYmxlOmZ1bmN0aW9uKGMpe3ZhciBhPXRoaXMuZ3JvdXBzLGI9Yy5ncm91cDtpZihiKXtFeHQuQXJyYXkucmVtb3ZlKGFbYl0sYyl9fSxvbkNoZWNrQ2hhbmdlOmZ1bmN0aW9uKGQsZyl7dmFyIGE9dGhpcy5ncm91cHMsYz1kLmdyb3VwLGI9MCxqLGUsaDtpZihjJiZnKXtqPWFbY107ZT1qLmxlbmd0aDtmb3IoO2I8ZTtiKyspe2g9altiXTtpZihoIT1kKXtoLnNldENoZWNrZWQoZmFsc2UpfX19fX0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLkNsaWNrUmVwZWF0ZXIiLHtleHRlbmQ6IkV4dC51dGlsLk9ic2VydmFibGUiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcztjLmVsPUV4dC5nZXQoYik7Yy5lbC51bnNlbGVjdGFibGUoKTtFeHQuYXBwbHkoYyxhKTtjLmNhbGxQYXJlbnQoKTtjLmFkZEV2ZW50cygibW91c2Vkb3duIiwiY2xpY2siLCJtb3VzZXVwIik7aWYoIWMuZGlzYWJsZWQpe2MuZGlzYWJsZWQ9dHJ1ZTtjLmVuYWJsZSgpfWlmKGMuaGFuZGxlcil7Yy5vbigiY2xpY2siLGMuaGFuZGxlcixjLnNjb3BlfHxjKX19LGludGVydmFsOjIwLGRlbGF5OjI1MCxwcmV2ZW50RGVmYXVsdDp0cnVlLHN0b3BEZWZhdWx0OmZhbHNlLHRpbWVyOjAsZW5hYmxlOmZ1bmN0aW9uKCl7aWYodGhpcy5kaXNhYmxlZCl7dGhpcy5lbC5vbigibW91c2Vkb3duIix0aGlzLmhhbmRsZU1vdXNlRG93bix0aGlzKTtpZihFeHQuaXNJRSYmIShFeHQuaXNTdHJpY3QmJkV4dC5pc0lFOSkpe3RoaXMuZWwub24oImRibGNsaWNrIix0aGlzLmhhbmRsZURibENsaWNrLHRoaXMpfWlmKHRoaXMucHJldmVudERlZmF1bHR8fHRoaXMuc3RvcERlZmF1bHQpe3RoaXMuZWwub24oImNsaWNrIix0aGlzLmV2ZW50T3B0aW9ucyx0aGlzKX19dGhpcy5kaXNhYmxlZD1mYWxzZX0sZGlzYWJsZTpmdW5jdGlvbihhKXtpZihhfHwhdGhpcy5kaXNhYmxlZCl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO2lmKHRoaXMucHJlc3NlZENscyl7dGhpcy5lbC5yZW1vdmVDbHModGhpcy5wcmVzc2VkQ2xzKX1FeHQuZ2V0RG9jKCkudW4oIm1vdXNldXAiLHRoaXMuaGFuZGxlTW91c2VVcCx0aGlzKTt0aGlzLmVsLnJlbW92ZUFsbExpc3RlbmVycygpfXRoaXMuZGlzYWJsZWQ9dHJ1ZX0sc2V0RGlzYWJsZWQ6ZnVuY3Rpb24oYSl7dGhpc1thPyJkaXNhYmxlIjoiZW5hYmxlIl0oKX0sZXZlbnRPcHRpb25zOmZ1bmN0aW9uKGEpe2lmKHRoaXMucHJldmVudERlZmF1bHQpe2EucHJldmVudERlZmF1bHQoKX1pZih0aGlzLnN0b3BEZWZhdWx0KXthLnN0b3BFdmVudCgpfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZSh0cnVlKTtFeHQuZGVzdHJveSh0aGlzLmVsKTt0aGlzLmNsZWFyTGlzdGVuZXJzKCl9LGhhbmRsZURibENsaWNrOmZ1bmN0aW9uKGEpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKTt0aGlzLmVsLmJsdXIoKTt0aGlzLmZpcmVFdmVudCgibW91c2Vkb3duIix0aGlzLGEpO3RoaXMuZmlyZUV2ZW50KCJjbGljayIsdGhpcyxhKX0saGFuZGxlTW91c2VEb3duOmZ1bmN0aW9uKGEpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVyKTt0aGlzLmVsLmJsdXIoKTtpZih0aGlzLnByZXNzZWRDbHMpe3RoaXMuZWwuYWRkQ2xzKHRoaXMucHJlc3NlZENscyl9dGhpcy5tb3VzZWRvd25UaW1lPW5ldyBEYXRlKCk7RXh0LmdldERvYygpLm9uKCJtb3VzZXVwIix0aGlzLmhhbmRsZU1vdXNlVXAsdGhpcyk7dGhpcy5lbC5vbigibW91c2VvdXQiLHRoaXMuaGFuZGxlTW91c2VPdXQsdGhpcyk7dGhpcy5maXJlRXZlbnQoIm1vdXNlZG93biIsdGhpcyxhKTt0aGlzLmZpcmVFdmVudCgiY2xpY2siLHRoaXMsYSk7aWYodGhpcy5hY2NlbGVyYXRlKXt0aGlzLmRlbGF5PTQwMH1hPW5ldyBFeHQuRXZlbnRPYmplY3RJbXBsKGEpO3RoaXMudGltZXI9RXh0LmRlZmVyKHRoaXMuY2xpY2ssdGhpcy5kZWxheXx8dGhpcy5pbnRlcnZhbCx0aGlzLFthXSl9LGNsaWNrOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJjbGljayIsdGhpcyxhKTt0aGlzLnRpbWVyPUV4dC5kZWZlcih0aGlzLmNsaWNrLHRoaXMuYWNjZWxlcmF0ZT90aGlzLmVhc2VPdXRFeHBvKEV4dC5EYXRlLmdldEVsYXBzZWQodGhpcy5tb3VzZWRvd25UaW1lKSw0MDAsLTM5MCwxMjAwMCk6dGhpcy5pbnRlcnZhbCx0aGlzLFthXSl9LGVhc2VPdXRFeHBvOmZ1bmN0aW9uKGUsYSxoLGcpe3JldHVybihlPT1nKT9hK2g6aCooLU1hdGgucG93KDIsLTEwKmUvZykrMSkrYX0saGFuZGxlTW91c2VPdXQ6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7aWYodGhpcy5wcmVzc2VkQ2xzKXt0aGlzLmVsLnJlbW92ZUNscyh0aGlzLnByZXNzZWRDbHMpfXRoaXMuZWwub24oIm1vdXNlb3ZlciIsdGhpcy5oYW5kbGVNb3VzZVJldHVybix0aGlzKX0saGFuZGxlTW91c2VSZXR1cm46ZnVuY3Rpb24oKXt0aGlzLmVsLnVuKCJtb3VzZW92ZXIiLHRoaXMuaGFuZGxlTW91c2VSZXR1cm4sdGhpcyk7aWYodGhpcy5wcmVzc2VkQ2xzKXt0aGlzLmVsLmFkZENscyh0aGlzLnByZXNzZWRDbHMpfXRoaXMuY2xpY2soKX0saGFuZGxlTW91c2VVcDpmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7dGhpcy5lbC51bigibW91c2VvdmVyIix0aGlzLmhhbmRsZU1vdXNlUmV0dXJuLHRoaXMpO3RoaXMuZWwudW4oIm1vdXNlb3V0Iix0aGlzLmhhbmRsZU1vdXNlT3V0LHRoaXMpO0V4dC5nZXREb2MoKS51bigibW91c2V1cCIsdGhpcy5oYW5kbGVNb3VzZVVwLHRoaXMpO2lmKHRoaXMucHJlc3NlZENscyl7dGhpcy5lbC5yZW1vdmVDbHModGhpcy5wcmVzc2VkQ2xzKX10aGlzLmZpcmVFdmVudCgibW91c2V1cCIsdGhpcyxhKX19KTtFeHQuZGVmaW5lKCJFeHQudXRpbC5UZXh0TWV0cmljcyIse3N0YXRpY3M6e3NoYXJlZDpudWxsLG1lYXN1cmU6ZnVuY3Rpb24oYSxkLGUpe3ZhciBiPXRoaXMsYz1iLnNoYXJlZDtpZighYyl7Yz1iLnNoYXJlZD1uZXcgYihhLGUpfWMuYmluZChhKTtjLnNldEZpeGVkV2lkdGgoZXx8ImF1dG8iKTtyZXR1cm4gYy5nZXRTaXplKGQpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztFeHQuZGVzdHJveShhLnNoYXJlZCk7YS5zaGFyZWQ9bnVsbH19LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcy5tZWFzdXJlPUV4dC5nZXRCb2R5KCkuY3JlYXRlQ2hpbGQoe2NsczpFeHQuYmFzZUNTU1ByZWZpeCsidGV4dG1ldHJpY3MifSk7dGhpcy5lbD1FeHQuZ2V0KGEpO2IucG9zaXRpb24oImFic29sdXRlIik7Yi5zZXRMZWZ0VG9wKC0xMDAwLC0xMDAwKTtiLmhpZGUoKTtpZihjKXtiLnNldFdpZHRoKGMpfX0sZ2V0U2l6ZTpmdW5jdGlvbihjKXt2YXIgYj10aGlzLm1lYXN1cmUsYTtiLnVwZGF0ZShjKTthPWIuZ2V0U2l6ZSgpO2IudXBkYXRlKCIiKTtyZXR1cm4gYX0sYmluZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2IuZWw9RXh0LmdldChhKTtiLm1lYXN1cmUuc2V0U3R5bGUoYi5lbC5nZXRTdHlsZXMoImZvbnQtc2l6ZSIsImZvbnQtc3R5bGUiLCJmb250LXdlaWdodCIsImZvbnQtZmFtaWx5IiwibGluZS1oZWlnaHQiLCJ0ZXh0LXRyYW5zZm9ybSIsImxldHRlci1zcGFjaW5nIikpfSxzZXRGaXhlZFdpZHRoOmZ1bmN0aW9uKGEpe3RoaXMubWVhc3VyZS5zZXRXaWR0aChhKX0sZ2V0V2lkdGg6ZnVuY3Rpb24oYSl7dGhpcy5tZWFzdXJlLmRvbS5zdHlsZS53aWR0aD0iYXV0byI7cmV0dXJuIHRoaXMuZ2V0U2l6ZShhKS53aWR0aH0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFNpemUoYSkuaGVpZ2h0fSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLm1lYXN1cmUucmVtb3ZlKCk7ZGVsZXRlIGEuZWw7ZGVsZXRlIGEubWVhc3VyZX19LGZ1bmN0aW9uKCl7RXh0LkVsZW1lbnQuYWRkTWV0aG9kcyh7Z2V0VGV4dFdpZHRoOmZ1bmN0aW9uKGMsYixhKXtyZXR1cm4gRXh0Lk51bWJlci5jb25zdHJhaW4oRXh0LnV0aWwuVGV4dE1ldHJpY3MubWVhc3VyZSh0aGlzLmRvbSxFeHQudmFsdWUoYyx0aGlzLmRvbS5pbm5lckhUTUwsdHJ1ZSkpLndpZHRoLGJ8fDAsYXx8MTAwMDAwMCl9fSl9KTtFeHQuZGVmaW5lKCJFeHQuYnV0dG9uLkJ1dHRvbiIse2FsaWFzOiJ3aWRnZXQuYnV0dG9uIixleHRlbmQ6IkV4dC5Db21wb25lbnQiLHJlcXVpcmVzOlsiRXh0Lm1lbnUuTWFuYWdlciIsIkV4dC51dGlsLkNsaWNrUmVwZWF0ZXIiLCJFeHQubGF5b3V0LmNvbXBvbmVudC5CdXR0b24iLCJFeHQudXRpbC5UZXh0TWV0cmljcyIsIkV4dC51dGlsLktleU1hcCJdLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LkJ1dHRvbiIsaXNCdXR0b246dHJ1ZSxjb21wb25lbnRMYXlvdXQ6ImJ1dHRvbiIsaGlkZGVuOmZhbHNlLGRpc2FibGVkOmZhbHNlLHByZXNzZWQ6ZmFsc2UsZW5hYmxlVG9nZ2xlOmZhbHNlLG1lbnVBbGlnbjoidGwtYmw/Iix0ZXh0QWxpZ246ImNlbnRlciIsdHlwZToiYnV0dG9uIixjbGlja0V2ZW50OiJjbGljayIscHJldmVudERlZmF1bHQ6dHJ1ZSxoYW5kbGVNb3VzZUV2ZW50czp0cnVlLHRvb2x0aXBUeXBlOiJxdGlwIixiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJidG4iLHByZXNzZWRDbHM6InByZXNzZWQiLG92ZXJDbHM6Im92ZXIiLGZvY3VzQ2xzOiJmb2N1cyIsbWVudUFjdGl2ZUNsczoibWVudS1hY3RpdmUiLGhyZWZUYXJnZXQ6Il9ibGFuayIsYm9yZGVyOnRydWUsY2hpbGRFbHM6WyJidG5FbCIsImJ0bldyYXAiLCJidG5Jbm5lckVsIiwiYnRuSWNvbkVsIl0scmVuZGVyVHBsOlsnPGVtIGlkPSJ7aWR9LWJ0bldyYXAiPHRwbCBpZj0ic3BsaXRDbHMiPiBjbGFzcz0ie3NwbGl0Q2xzfSI8L3RwbD4+JywnPHRwbCBpZj0iaHJlZiI+JywnPGEgaWQ9IntpZH0tYnRuRWwiIGhyZWY9IntocmVmfSIgY2xhc3M9IntidG5DbHN9IiB0YXJnZXQ9IntocmVmVGFyZ2V0fSInLCc8dHBsIGlmPSJ0YWJJbmRleCI+IHRhYkluZGV4PSJ7dGFiSW5kZXh9IjwvdHBsPicsJzx0cGwgaWY9ImRpc2FibGVkIj4gZGlzYWJsZWQ9ImRpc2FibGVkIjwvdHBsPicsJyByb2xlPSJsaW5rIj4nLCc8c3BhbiBpZD0ie2lkfS1idG5Jbm5lckVsIiBjbGFzcz0ie2Jhc2VDbHN9LWlubmVyIj4nLCJ7dGV4dH0iLCI8L3NwYW4+IiwnPHNwYW4gaWQ9IntpZH0tYnRuSWNvbkVsIiBjbGFzcz0ie2Jhc2VDbHN9LWljb24ge2ljb25DbHN9Ijx0cGwgaWY9Imljb25VcmwiPiBzdHlsZT0iYmFja2dyb3VuZC1pbWFnZTp1cmwoe2ljb25Vcmx9KSI8L3RwbD4+PC9zcGFuPicsIjwvYT4iLCI8dHBsIGVsc2U+IiwnPGJ1dHRvbiBpZD0ie2lkfS1idG5FbCIgdHlwZT0ie3R5cGV9IiBjbGFzcz0ie2J0bkNsc30iIGhpZGVmb2N1cz0idHJ1ZSInLCc8dHBsIGlmPSJ0YWJJbmRleCI+IHRhYkluZGV4PSJ7dGFiSW5kZXh9IjwvdHBsPicsJzx0cGwgaWY9ImRpc2FibGVkIj4gZGlzYWJsZWQ9ImRpc2FibGVkIjwvdHBsPicsJyByb2xlPSJidXR0b24iIGF1dG9jb21wbGV0ZT0ib2ZmIj4nLCc8c3BhbiBpZD0ie2lkfS1idG5Jbm5lckVsIiBjbGFzcz0ie2Jhc2VDbHN9LWlubmVyIiBzdHlsZT0ie2lubmVyU3BhblN0eWxlfSI+Jywie3RleHR9IiwiPC9zcGFuPiIsJzxzcGFuIGlkPSJ7aWR9LWJ0bkljb25FbCIgY2xhc3M9IntiYXNlQ2xzfS1pY29uIHtpY29uQ2xzfSI8dHBsIGlmPSJpY29uVXJsIj4gc3R5bGU9ImJhY2tncm91bmQtaW1hZ2U6dXJsKHtpY29uVXJsfSkiPC90cGw+Pjwvc3Bhbj4nLCI8L2J1dHRvbj4iLCI8L3RwbD4iLCI8L2VtPiIsJzx0cGwgaWY9ImNsb3NhYmxlIj4nLCc8YSBpZD0ie2lkfS1jbG9zZUVsIiBocmVmPSIjIiBjbGFzcz0ie2Jhc2VDbHN9LWNsb3NlLWJ0biIgdGl0bGU9IntjbG9zZVRleHR9Ij48L2E+JywiPC90cGw+Il0sc2NhbGU6InNtYWxsIixhbGxvd2VkU2NhbGVzOlsic21hbGwiLCJtZWRpdW0iLCJsYXJnZSJdLGljb25BbGlnbjoibGVmdCIsYXJyb3dBbGlnbjoicmlnaHQiLGFycm93Q2xzOiJhcnJvdyIsbWFza09uRGlzYWJsZTpmYWxzZSxwZXJzaXN0ZW50UGFkZGluZzp1bmRlZmluZWQsc2hyaW5rV3JhcDozLGZyYW1lOnRydWUsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YS5hZGRFdmVudHMoImNsaWNrIiwidG9nZ2xlIiwibW91c2VvdmVyIiwibW91c2VvdXQiLCJtZW51c2hvdyIsIm1lbnVoaWRlIiwibWVudXRyaWdnZXJvdmVyIiwibWVudXRyaWdnZXJvdXQiKTtpZihhLm1lbnUpe2Euc3BsaXQ9dHJ1ZTthLm1lbnU9RXh0Lm1lbnUuTWFuYWdlci5nZXQoYS5tZW51KTthLm1lbnUub3duZXJCdXR0b249YX1pZihhLnVybCl7YS5ocmVmPWEudXJsfWlmKGEuaHJlZiYmIWEuaGFzT3duUHJvcGVydHkoInByZXZlbnREZWZhdWx0Iikpe2EucHJldmVudERlZmF1bHQ9ZmFsc2V9aWYoRXh0LmlzU3RyaW5nKGEudG9nZ2xlR3JvdXApJiZhLnRvZ2dsZUdyb3VwIT09IiIpe2EuZW5hYmxlVG9nZ2xlPXRydWV9aWYoYS5odG1sJiYhYS50ZXh0KXthLnRleHQ9YS5odG1sO2RlbGV0ZSBhLmh0bWx9fSxnZXRBY3Rpb25FbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ0bkVsfSxnZXRGb2N1c0VsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXNlRWxGb3JGb2N1cz90aGlzLmVsOnRoaXMuYnRuRWx9LG9uRm9jdXM6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczthLnVzZUVsRm9yRm9jdXM9dHJ1ZTthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLnVzZUVsRm9yRm9jdXM9ZmFsc2V9LG9uQmx1cjpmdW5jdGlvbihhKXt0aGlzLnVzZUVsRm9yRm9jdXM9dHJ1ZTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLnVzZUVsRm9yRm9jdXM9ZmFsc2V9LG9uRGlzYWJsZTpmdW5jdGlvbigpe3RoaXMudXNlRWxGb3JGb2N1cz10cnVlO3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3RoaXMudXNlRWxGb3JGb2N1cz1mYWxzZX0sc2V0Q29tcG9uZW50Q2xzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuZ2V0Q29tcG9uZW50Q2xzKCk7aWYoIUV4dC5pc0VtcHR5KGIub2xkQ2xzKSl7Yi5yZW1vdmVDbHNXaXRoVUkoYi5vbGRDbHMpO2IucmVtb3ZlQ2xzV2l0aFVJKGIucHJlc3NlZENscyl9Yi5vbGRDbHM9YTtiLmFkZENsc1dpdGhVSShhKX0sZ2V0Q29tcG9uZW50Q2xzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPVtdO2lmKGIuaWNvbkNsc3x8Yi5pY29uKXtpZihiLnRleHQpe2EucHVzaCgiaWNvbi10ZXh0LSIrYi5pY29uQWxpZ24pfWVsc2V7YS5wdXNoKCJpY29uIil9fWVsc2V7aWYoYi50ZXh0KXthLnB1c2goIm5vaWNvbiIpfX1pZihiLnByZXNzZWQpe2EucHVzaChiLnByZXNzZWRDbHMpfXJldHVybiBhfSxiZWZvcmVSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudCgpO2Eub2xkQ2xzPWEuZ2V0Q29tcG9uZW50Q2xzKCk7YS5hZGRDbHNXaXRoVUkoYS5vbGRDbHMpO0V4dC5hcHBseUlmKGEucmVuZGVyRGF0YSxhLmdldFRlbXBsYXRlQXJncygpKTtpZihhLnNjYWxlKXthLnNldFNjYWxlKGEuc2NhbGUpfX0sb25SZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGQsYSxiO2MuZG9jPUV4dC5nZXREb2MoKTtjLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihjLnNwbGl0JiZjLmFycm93VG9vbHRpcCl7Yy5hcnJvd0VsLmRvbS5zZXRBdHRyaWJ1dGUoYy5nZXRUaXBBdHRyKCksYy5hcnJvd1Rvb2x0aXApfWE9Yy5lbDtpZihjLnRvb2x0aXApe2Muc2V0VG9vbHRpcChjLnRvb2x0aXAsdHJ1ZSl9aWYoYy5oYW5kbGVNb3VzZUV2ZW50cyl7Yj17c2NvcGU6Yyxtb3VzZW92ZXI6Yy5vbk1vdXNlT3Zlcixtb3VzZW91dDpjLm9uTW91c2VPdXQsbW91c2Vkb3duOmMub25Nb3VzZURvd259O2lmKGMuc3BsaXQpe2IubW91c2Vtb3ZlPWMub25Nb3VzZU1vdmV9fWVsc2V7Yj17c2NvcGU6Y319aWYoYy5tZW51KXtjLm1vbihjLm1lbnUse3Njb3BlOmMsc2hvdzpjLm9uTWVudVNob3csaGlkZTpjLm9uTWVudUhpZGV9KTtjLmtleU1hcD1uZXcgRXh0LnV0aWwuS2V5TWFwKHt0YXJnZXQ6Yy5lbCxrZXk6RXh0LkV2ZW50T2JqZWN0LkRPV04saGFuZGxlcjpjLm9uRG93bktleSxzY29wZTpjfSl9aWYoYy5yZXBlYXQpe2MubW9uKG5ldyBFeHQudXRpbC5DbGlja1JlcGVhdGVyKGEsRXh0LmlzT2JqZWN0KGMucmVwZWF0KT9jLnJlcGVhdDp7fSksImNsaWNrIixjLm9uUmVwZWF0Q2xpY2ssYyl9ZWxzZXtpZihiW2MuY2xpY2tFdmVudF0pe2Q9dHJ1ZX1lbHNle2JbYy5jbGlja0V2ZW50XT1jLm9uQ2xpY2t9fWMubW9uKGEsYik7aWYoZCl7Yy5tb24oYSxjLmNsaWNrRXZlbnQsYy5vbkNsaWNrLGMpfUV4dC5CdXR0b25Ub2dnbGVNYW5hZ2VyLnJlZ2lzdGVyKGMpfSxnZXRUZW1wbGF0ZUFyZ3M6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9Yy5nZXRQZXJzaXN0ZW50UGFkZGluZygpLGE9IiI7aWYoTWF0aC5tYXguYXBwbHkoTWF0aCxiKT4wKXthPSJtYXJnaW46IitFeHQuQXJyYXkubWFwKGIsZnVuY3Rpb24oZCl7cmV0dXJuIC1kKyJweCJ9KS5qb2luKCIgIil9cmV0dXJue2hyZWY6Yy5nZXRIcmVmKCksZGlzYWJsZWQ6Yy5kaXNhYmxlZCxocmVmVGFyZ2V0OmMuaHJlZlRhcmdldCx0eXBlOmMudHlwZSxidG5DbHM6Yy5nZXRCdG5DbHMoKSxzcGxpdENsczpjLmdldFNwbGl0Q2xzKCksaWNvblVybDpjLmljb24saWNvbkNsczpjLmljb25DbHMsdGV4dDpjLnRleHR8fCImIzE2MDsiLHRhYkluZGV4OmMudGFiSW5kZXgsaW5uZXJTcGFuU3R5bGU6YX19LGdldEhyZWY6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9RXh0LmFwcGx5KHt9LGEuYmFzZVBhcmFtcyk7Yj1FeHQuYXBwbHkoYixhLnBhcmFtcyk7cmV0dXJuIGEuaHJlZj9FeHQudXJsQXBwZW5kKGEuaHJlZixFeHQuT2JqZWN0LnRvUXVlcnlTdHJpbmcoYikpOmZhbHNlfSxzZXRQYXJhbXM6ZnVuY3Rpb24oYSl7dGhpcy5wYXJhbXM9YTt0aGlzLmJ0bkVsLmRvbS5ocmVmPXRoaXMuZ2V0SHJlZigpfSxnZXRTcGxpdENsczpmdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIGEuc3BsaXQ/KGEuYmFzZUNscysiLSIrYS5hcnJvd0NscykrIiAiKyhhLmJhc2VDbHMrIi0iK2EuYXJyb3dDbHMrIi0iK2EuYXJyb3dBbGlnbik6IiJ9LGdldEJ0bkNsczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHRBbGlnbj90aGlzLmJhc2VDbHMrIi0iK3RoaXMudGV4dEFsaWduOiIifSxzZXRJY29uQ2xzOmZ1bmN0aW9uKGIpe3ZhciBkPXRoaXMsYT1kLmJ0bkljb25FbCxjPWQuaWNvbkNscztkLmljb25DbHM9YjtpZihhKXthLnJlbW92ZUNscyhjKTthLmFkZENscyhifHwiIik7ZC5zZXRDb21wb25lbnRDbHMoKTtpZihkLmRpZEljb25TdGF0ZUNoYW5nZShjLGIpKXtkLnVwZGF0ZUxheW91dCgpfX1yZXR1cm4gZH0sc2V0VG9vbHRpcDpmdW5jdGlvbihjLGEpe3ZhciBiPXRoaXM7aWYoYi5yZW5kZXJlZCl7aWYoIWEpe2IuY2xlYXJUaXAoKX1pZihFeHQuaXNPYmplY3QoYykpe0V4dC50aXAuUXVpY2tUaXBNYW5hZ2VyLnJlZ2lzdGVyKEV4dC5hcHBseSh7dGFyZ2V0OmIuYnRuRWwuaWR9LGMpKTtiLnRvb2x0aXA9Y31lbHNle2IuYnRuRWwuZG9tLnNldEF0dHJpYnV0ZShiLmdldFRpcEF0dHIoKSxjKX19ZWxzZXtiLnRvb2x0aXA9Y31yZXR1cm4gYn0sc2V0VGV4dEFsaWduOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLmJ0bkVsO2lmKGEpe2EucmVtb3ZlQ2xzKGIuYmFzZUNscysiLSIrYi50ZXh0QWxpZ24pO2EuYWRkQ2xzKGIuYmFzZUNscysiLSIrYyl9Yi50ZXh0QWxpZ249YztyZXR1cm4gYn0sZ2V0VGlwQXR0cjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvb2x0aXBUeXBlPT0icXRpcCI/ImRhdGEtcXRpcCI6InRpdGxlIn0sZ2V0UmVmSXRlbXM6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5tZW51LGI7aWYoYyl7Yj1jLmdldFJlZkl0ZW1zKGEpO2IudW5zaGlmdChjKX1yZXR1cm4gYnx8W119LGNsZWFyVGlwOmZ1bmN0aW9uKCl7aWYoRXh0LmlzT2JqZWN0KHRoaXMudG9vbHRpcCkpe0V4dC50aXAuUXVpY2tUaXBNYW5hZ2VyLnVucmVnaXN0ZXIodGhpcy5idG5FbCl9fSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnJlbmRlcmVkKXthLmNsZWFyVGlwKCl9aWYoYS5tZW51JiZhLmRlc3Ryb3lNZW51IT09ZmFsc2Upe0V4dC5kZXN0cm95KGEubWVudSl9RXh0LmRlc3Ryb3koYS5idG5Jbm5lckVsLGEucmVwZWF0ZXIpO2EuY2FsbFBhcmVudCgpfSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEucmVuZGVyZWQpe2EuZG9jLnVuKCJtb3VzZW92ZXIiLGEubW9uaXRvck1vdXNlT3ZlcixhKTthLmRvYy51bigibW91c2V1cCIsYS5vbk1vdXNlVXAsYSk7ZGVsZXRlIGEuZG9jO0V4dC5CdXR0b25Ub2dnbGVNYW5hZ2VyLnVucmVnaXN0ZXIoYSk7RXh0LmRlc3Ryb3koYS5rZXlNYXApO2RlbGV0ZSBhLmtleU1hcH1hLmNhbGxQYXJlbnQoKX0sc2V0SGFuZGxlcjpmdW5jdGlvbihiLGEpe3RoaXMuaGFuZGxlcj1iO3RoaXMuc2NvcGU9YTtyZXR1cm4gdGhpc30sc2V0VGV4dDpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2EudGV4dD1iO2lmKGEucmVuZGVyZWQpe2EuYnRuSW5uZXJFbC51cGRhdGUoYnx8IiYjMTYwOyIpO2Euc2V0Q29tcG9uZW50Q2xzKCk7aWYoRXh0LmlzU3RyaWN0JiZFeHQuaXNJRTgpe2EuZWwucmVwYWludCgpfWEudXBkYXRlTGF5b3V0KCl9cmV0dXJuIGF9LHNldEljb246ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxhPWMuYnRuSWNvbkVsLGQ9Yy5pY29uO2MuaWNvbj1iO2lmKGEpe2Euc2V0U3R5bGUoImJhY2tncm91bmQtaW1hZ2UiLGI/InVybCgiK2IrIikiOiIiKTtjLnNldENvbXBvbmVudENscygpO2lmKGMuZGlkSWNvblN0YXRlQ2hhbmdlKGQsYikpe2MudXBkYXRlTGF5b3V0KCl9fXJldHVybiBjfSxkaWRJY29uU3RhdGVDaGFuZ2U6ZnVuY3Rpb24oYSxjKXt2YXIgYj1FeHQuaXNFbXB0eShjKTtyZXR1cm4gRXh0LmlzRW1wdHkoYSk/IWI6Yn0sZ2V0VGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LHRvZ2dsZTpmdW5jdGlvbihjLGEpe3ZhciBiPXRoaXM7Yz1jPT09dW5kZWZpbmVkPyFiLnByZXNzZWQ6ISFjO2lmKGMhPT1iLnByZXNzZWQpe2lmKGIucmVuZGVyZWQpe2JbYz8iYWRkQ2xzV2l0aFVJIjoicmVtb3ZlQ2xzV2l0aFVJIl0oYi5wcmVzc2VkQ2xzKX1iLnByZXNzZWQ9YztpZighYSl7Yi5maXJlRXZlbnQoInRvZ2dsZSIsYixjKTtFeHQuY2FsbGJhY2soYi50b2dnbGVIYW5kbGVyLGIuc2NvcGV8fGIsW2IsY10pfX1yZXR1cm4gYn0sbWF5YmVTaG93TWVudTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5tZW51JiYhYS5oYXNWaXNpYmxlTWVudSgpJiYhYS5pZ25vcmVOZXh0Q2xpY2spe2Euc2hvd01lbnUoKX19LHNob3dNZW51OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnJlbmRlcmVkJiZhLm1lbnUpe2lmKGEudG9vbHRpcCYmYS5nZXRUaXBBdHRyKCkhPSJ0aXRsZSIpe0V4dC50aXAuUXVpY2tUaXBNYW5hZ2VyLmdldFF1aWNrVGlwKCkuY2FuY2VsU2hvdyhhLmJ0bkVsKX1pZihhLm1lbnUuaXNWaXNpYmxlKCkpe2EubWVudS5oaWRlKCl9YS5tZW51LnNob3dCeShhLmVsLGEubWVudUFsaWduLCgoIUV4dC5pc1N0cmljdCYmRXh0LmlzSUUpfHxFeHQuaXNJRTYpP1stMiwtMl06dW5kZWZpbmVkKX1yZXR1cm4gYX0saGlkZU1lbnU6ZnVuY3Rpb24oKXtpZih0aGlzLmhhc1Zpc2libGVNZW51KCkpe3RoaXMubWVudS5oaWRlKCl9cmV0dXJuIHRoaXN9LGhhc1Zpc2libGVNZW51OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tZW51O3JldHVybiBhJiZhLnJlbmRlcmVkJiZhLmlzVmlzaWJsZSgpfSxvblJlcGVhdENsaWNrOmZ1bmN0aW9uKGEsYil7dGhpcy5vbkNsaWNrKGIpfSxvbkNsaWNrOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoYS5wcmV2ZW50RGVmYXVsdHx8KGEuZGlzYWJsZWQmJmEuZ2V0SHJlZigpKSYmYil7Yi5wcmV2ZW50RGVmYXVsdCgpfWlmKGIuYnV0dG9uIT09MCl7cmV0dXJufWlmKCFhLmRpc2FibGVkKXthLmRvVG9nZ2xlKCk7YS5tYXliZVNob3dNZW51KCk7YS5maXJlSGFuZGxlcihiKX19LGZpcmVIYW5kbGVyOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLmhhbmRsZXI7aWYoYi5maXJlRXZlbnQoImNsaWNrIixiLGMpIT09ZmFsc2Upe2lmKGEpe2EuY2FsbChiLnNjb3BlfHxiLGIsYyl9Yi5ibHVyKCl9fSxkb1RvZ2dsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5lbmFibGVUb2dnbGUmJihhLmFsbG93RGVwcmVzcyE9PWZhbHNlfHwhYS5wcmVzc2VkKSl7YS50b2dnbGUoKX19LG9uTW91c2VPdmVyOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoIWEuZGlzYWJsZWQmJiFiLndpdGhpbihhLmVsLHRydWUsdHJ1ZSkpe2Eub25Nb3VzZUVudGVyKGIpfX0sb25Nb3VzZU91dDpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKCFiLndpdGhpbihhLmVsLHRydWUsdHJ1ZSkpe2lmKGEub3Zlck1lbnVUcmlnZ2VyKXthLm9uTWVudVRyaWdnZXJPdXQoYil9YS5vbk1vdXNlTGVhdmUoYil9fSxvbk1vdXNlTW92ZTpmdW5jdGlvbihoKXt2YXIgZD10aGlzLGM9ZC5lbCxnPWQub3Zlck1lbnVUcmlnZ2VyLGIsYTtpZihkLnNwbGl0KXtpZihkLmFycm93QWxpZ249PT0icmlnaHQiKXtiPWguZ2V0WCgpLWMuZ2V0WCgpO2E9Yy5nZXRXaWR0aCgpfWVsc2V7Yj1oLmdldFkoKS1jLmdldFkoKTthPWMuZ2V0SGVpZ2h0KCl9aWYoYj4oYS1kLmdldFRyaWdnZXJTaXplKCkpKXtpZighZyl7ZC5vbk1lbnVUcmlnZ2VyT3ZlcihoKX19ZWxzZXtpZihnKXtkLm9uTWVudVRyaWdnZXJPdXQoaCl9fX19LGdldFRyaWdnZXJTaXplOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxjPWUudHJpZ2dlclNpemUsYixhLGQ7aWYoYz09PWQpe2I9ZS5hcnJvd0FsaWduO2E9Yi5jaGFyQXQoMCk7Yz1lLnRyaWdnZXJTaXplPWUuZWwuZ2V0RnJhbWVXaWR0aChhKStlLmJ0bldyYXAuZ2V0RnJhbWVXaWR0aChhKStlLmZyYW1lU2l6ZVtiXX1yZXR1cm4gY30sb25Nb3VzZUVudGVyOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5hZGRDbHNXaXRoVUkoYS5vdmVyQ2xzKTthLmZpcmVFdmVudCgibW91c2VvdmVyIixhLGIpfSxvbk1vdXNlTGVhdmU6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczthLnJlbW92ZUNsc1dpdGhVSShhLm92ZXJDbHMpO2EuZmlyZUV2ZW50KCJtb3VzZW91dCIsYSxiKX0sb25NZW51VHJpZ2dlck92ZXI6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczthLm92ZXJNZW51VHJpZ2dlcj10cnVlO2EuZmlyZUV2ZW50KCJtZW51dHJpZ2dlcm92ZXIiLGEsYS5tZW51LGIpfSxvbk1lbnVUcmlnZ2VyT3V0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7ZGVsZXRlIGEub3Zlck1lbnVUcmlnZ2VyO2EuZmlyZUV2ZW50KCJtZW51dHJpZ2dlcm91dCIsYSxhLm1lbnUsYil9LGVuYWJsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2IuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGIuYnRuRWwpe2IuYnRuRWwuZG9tLmRpc2FibGVkPWZhbHNlfWIucmVtb3ZlQ2xzV2l0aFVJKCJkaXNhYmxlZCIpO3JldHVybiBifSxkaXNhYmxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYi5idG5FbCl7Yi5idG5FbC5kb20uZGlzYWJsZWQ9dHJ1ZX1iLmFkZENsc1dpdGhVSSgiZGlzYWJsZWQiKTtiLnJlbW92ZUNsc1dpdGhVSShiLm92ZXJDbHMpO2lmKGIuYnRuSW5uZXJFbCYmKEV4dC5pc0lFNnx8RXh0LmlzSUU3KSl7Yi5idG5Jbm5lckVsLnJlcGFpbnQoKX1yZXR1cm4gYn0sc2V0U2NhbGU6ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcyxiPWEudWkucmVwbGFjZSgiLSIrYS5zY2FsZSwiIik7aWYoIUV4dC5BcnJheS5jb250YWlucyhhLmFsbG93ZWRTY2FsZXMsYykpe3Rocm93ICgiI3NldFNjYWxlOiBzY2FsZSBtdXN0IGJlIGFuIGFsbG93ZWQgc2NhbGUgKCIrYS5hbGxvd2VkU2NhbGVzLmpvaW4oIiwgIikrIikiKX1hLnNjYWxlPWM7YS5zZXRVSShiKX0sc2V0VUk6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZihhLnNjYWxlJiYhYi5tYXRjaChhLnNjYWxlKSl7Yj1iKyItIithLnNjYWxlfWEuY2FsbFBhcmVudChbYl0pfSxvbk1vdXNlRG93bjpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKCFhLmRpc2FibGVkJiZiLmJ1dHRvbj09PTApe2EuYWRkQ2xzV2l0aFVJKGEucHJlc3NlZENscyk7YS5kb2Mub24oIm1vdXNldXAiLGEub25Nb3VzZVVwLGEpfX0sb25Nb3VzZVVwOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoYi5idXR0b249PT0wKXtpZighYS5wcmVzc2VkKXthLnJlbW92ZUNsc1dpdGhVSShhLnByZXNzZWRDbHMpfWEuZG9jLnVuKCJtb3VzZXVwIixhLm9uTW91c2VVcCxhKX19LG9uTWVudVNob3c6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczthLmlnbm9yZU5leHRDbGljaz0wO2EuYWRkQ2xzV2l0aFVJKGEubWVudUFjdGl2ZUNscyk7YS5maXJlRXZlbnQoIm1lbnVzaG93IixhLGEubWVudSl9LG9uTWVudUhpZGU6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczthLnJlbW92ZUNsc1dpdGhVSShhLm1lbnVBY3RpdmVDbHMpO2EuaWdub3JlTmV4dENsaWNrPUV4dC5kZWZlcihhLnJlc3RvcmVDbGljaywyNTAsYSk7YS5maXJlRXZlbnQoIm1lbnVoaWRlIixhLGEubWVudSl9LHJlc3RvcmVDbGljazpmdW5jdGlvbigpe3RoaXMuaWdub3JlTmV4dENsaWNrPTB9LG9uRG93bktleTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoIWEuZGlzYWJsZWQpe2lmKGEubWVudSl7YS5zaG93TWVudSgpfX19LGdldFBlcnNpc3RlbnRQYWRkaW5nOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcyxlPUV4dC5zY29wZVJlc2V0Q1NTLGg9Zy5wZXJzaXN0ZW50UGFkZGluZyxiLGEsZCxpLGM7aWYoIWgpe2g9Zy5zZWxmLnByb3RvdHlwZS5wZXJzaXN0ZW50UGFkZGluZz1bMCwwLDAsMF07aWYoIUV4dC5pc0lFKXtiPW5ldyBFeHQuYnV0dG9uLkJ1dHRvbih7dGV4dDoidGVzdCIsc3R5bGU6InBvc2l0aW9uOmFic29sdXRlO3RvcDotOTk5cHg7In0pO2IuZWw9RXh0LkRvbUhlbHBlci5hcHBlbmQoRXh0LnJlc2V0RWxlbWVudCxiLmdldFJlbmRlclRyZWUoKSx0cnVlKTtiLmFwcGx5Q2hpbGRFbHMoYi5lbCk7ZD1iLmJ0bkVsO2k9Yi5idG5Jbm5lckVsO2Quc2V0U2l6ZShudWxsLG51bGwpO2E9aS5nZXRPZmZzZXRzVG8oZCk7aFswXT1hWzFdO2hbMV09ZC5nZXRXaWR0aCgpLWkuZ2V0V2lkdGgoKS1hWzBdO2hbMl09ZC5nZXRIZWlnaHQoKS1pLmdldEhlaWdodCgpLWFbMV07aFszXT1hWzBdO2IuZGVzdHJveSgpO2IuZWwucmVtb3ZlKCl9fXJldHVybiBofX0sZnVuY3Rpb24oKXt2YXIgYT17fSxiPWZ1bmN0aW9uKGQsail7aWYoail7dmFyIGg9YVtkLnRvZ2dsZUdyb3VwXSxlPWgubGVuZ3RoLGM7Zm9yKGM9MDtjPGU7YysrKXtpZihoW2NdIT09ZCl7aFtjXS50b2dnbGUoZmFsc2UpfX19fTtFeHQuQnV0dG9uVG9nZ2xlTWFuYWdlcj17cmVnaXN0ZXI6ZnVuY3Rpb24oYyl7aWYoIWMudG9nZ2xlR3JvdXApe3JldHVybn12YXIgZD1hW2MudG9nZ2xlR3JvdXBdO2lmKCFkKXtkPWFbYy50b2dnbGVHcm91cF09W119ZC5wdXNoKGMpO2Mub24oInRvZ2dsZSIsYil9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYyl7aWYoIWMudG9nZ2xlR3JvdXApe3JldHVybn12YXIgZD1hW2MudG9nZ2xlR3JvdXBdO2lmKGQpe0V4dC5BcnJheS5yZW1vdmUoZCxjKTtjLnVuKCJ0b2dnbGUiLGIpfX0sZ2V0UHJlc3NlZDpmdW5jdGlvbihoKXt2YXIgZT1hW2hdLGQ9MCxjO2lmKGUpe2ZvcihjPWUubGVuZ3RoO2Q8YztkKyspe2lmKGVbZF0ucHJlc3NlZD09PXRydWUpe3JldHVybiBlW2RdfX19cmV0dXJuIG51bGx9fX0pO0V4dC5kZWZpbmUoIkV4dC5sYXlvdXQuY29udGFpbmVyLmJveE92ZXJmbG93Lk1lbnUiLHtleHRlbmQ6IkV4dC5sYXlvdXQuY29udGFpbmVyLmJveE92ZXJmbG93Lk5vbmUiLHJlcXVpcmVzOlsiRXh0LnRvb2xiYXIuU2VwYXJhdG9yIiwiRXh0LmJ1dHRvbi5CdXR0b24iXSxhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5sYXlvdXQuYm94T3ZlcmZsb3cuTWVudSIsbm9JdGVtc01lbnVUZXh0Oic8ZGl2IGNsYXNzPSInK0V4dC5iYXNlQ1NTUHJlZml4Kyd0b29sYmFyLW5vLWl0ZW1zIj4oTm9uZSk8L2Rpdj4nLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YS50cmlnZ2VyQnV0dG9uQ2xzPWEudHJpZ2dlckJ1dHRvbkNsc3x8RXh0LmJhc2VDU1NQcmVmaXgrImJveC1tZW51LSIrYi5nZXROYW1lcygpLnJpZ2h0O2EubWVudUl0ZW1zPVtdfSxiZWdpbkxheW91dDpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLmNsZWFyT3ZlcmZsb3coYSl9LGJlZ2luTGF5b3V0Q3ljbGU6ZnVuY3Rpb24oYixhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZighYSl7dGhpcy5jbGVhck92ZXJmbG93KGIpO3RoaXMubGF5b3V0LmNhY2hlQ2hpbGRJdGVtcyhiKX19LG9uUmVtb3ZlOmZ1bmN0aW9uKGEpe0V4dC5BcnJheS5yZW1vdmUodGhpcy5tZW51SXRlbXMsYSl9LGdldFN1ZmZpeENvbmZpZzpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYj1jLmxheW91dCxhPWIub3duZXIuaWQ7Yy5tZW51PW5ldyBFeHQubWVudS5NZW51KHtsaXN0ZW5lcnM6e3Njb3BlOmMsYmVmb3Jlc2hvdzpjLmJlZm9yZU1lbnVTaG93fX0pO2MubWVudVRyaWdnZXI9bmV3IEV4dC5idXR0b24uQnV0dG9uKHtpZDphKyItbWVudS10cmlnZ2VyIixjbHM6RXh0LmxheW91dC5jb250YWluZXIuQm94LnByb3RvdHlwZS5pbm5lckNscysiICIrYy50cmlnZ2VyQnV0dG9uQ2xzLGhpZGRlbjp0cnVlLG93bmVyQ3Q6Yi5vd25lcixvd25lckxheW91dDpiLGljb25DbHM6RXh0LmJhc2VDU1NQcmVmaXgrYy5nZXRPd25lclR5cGUoYi5vd25lcikrIi1tb3JlLWljb24iLHVpOmIub3duZXIgaW5zdGFuY2VvZiBFeHQudG9vbGJhci5Ub29sYmFyPyJkZWZhdWx0LXRvb2xiYXIiOiJkZWZhdWx0IixtZW51OmMubWVudSxnZXRTcGxpdENsczpmdW5jdGlvbigpe3JldHVybiIifX0pO3JldHVybiBjLm1lbnVUcmlnZ2VyLmdldFJlbmRlclRyZWUoKX0sZ2V0T3ZlcmZsb3dDbHM6ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmJhc2VDU1NQcmVmaXgrdGhpcy5sYXlvdXQuZGlyZWN0aW9uKyItYm94LW92ZXJmbG93LWJvZHkifSxoYW5kbGVPdmVyZmxvdzpmdW5jdGlvbihkKXt2YXIgYz10aGlzLGI9Yy5sYXlvdXQsZz1iLmdldE5hbWVzKCksZT1kLnN0YXRlLmJveFBsYW4sYT1bbnVsbCxudWxsXTtjLnNob3dUcmlnZ2VyKGQpO2FbZy5oZWlnaHRJbmRleF09KGUubWF4U2l6ZS1jLm1lbnVUcmlnZ2VyW2cuZ2V0SGVpZ2h0XSgpKS8yO2MubWVudVRyaWdnZXIuc2V0UG9zaXRpb24uYXBwbHkoYy5tZW51VHJpZ2dlcixhKTtyZXR1cm57cmVzZXJ2ZWRTcGFjZTpjLm1lbnVUcmlnZ2VyW2cuZ2V0V2lkdGhdKCl9fSxjYXB0dXJlQ2hpbGRFbGVtZW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWVudVRyaWdnZXI7aWYoYS5yZW5kZXJpbmcpe2EuZmluaXNoUmVuZGVyKCl9fSxfYXNMYXlvdXRSb290Ontpc1Jvb3Q6dHJ1ZX0sY2xlYXJPdmVyZmxvdzpmdW5jdGlvbihoKXt2YXIgZz10aGlzLGI9Zy5tZW51SXRlbXMsZSxjPTAsZD1iLmxlbmd0aCxhPWcubGF5b3V0Lm93bmVyLGo9Zy5fYXNMYXlvdXRSb290O2Euc3VzcGVuZExheW91dHMoKTtnLmNhcHR1cmVDaGlsZEVsZW1lbnRzKCk7Zy5oaWRlVHJpZ2dlcigpO2EucmVzdW1lTGF5b3V0cygpO2Zvcig7YzxkO2MrKyl7ZT1iW2NdO2Uuc3VzcGVuZExheW91dHMoKTtlLnNob3coKTtlLnJlc3VtZUxheW91dHMoail9Yi5sZW5ndGg9MH0sc2hvd1RyaWdnZXI6ZnVuY3Rpb24oYyl7dmFyIG89dGhpcyxrPW8ubGF5b3V0LGE9ay5vd25lcixuPWsuZ2V0TmFtZXMoKSxyPW4ueCxlPW4ud2lkdGgscD1jLnN0YXRlLmJveFBsYW4sYj1wLnRhcmdldFNpemVbZV0saD1jLmNoaWxkSXRlbXMsbD1oLmxlbmd0aCxnPW8ubWVudVRyaWdnZXIscSxqLGQsbTtnLnN1c3BlbmRMYXlvdXRzKCk7Zy5zaG93KCk7Zy5yZXN1bWVMYXlvdXRzKG8uX2FzTGF5b3V0Um9vdCk7Yi09by5tZW51VHJpZ2dlci5nZXRXaWR0aCgpO2Euc3VzcGVuZExheW91dHMoKTtvLm1lbnVJdGVtcy5sZW5ndGg9MDtmb3IoZD0wO2Q8bDtkKyspe3E9aFtkXTttPXEucHJvcHM7aWYobVtyXSttW2VdPmIpe2o9cS50YXJnZXQ7by5tZW51SXRlbXMucHVzaChqKTtqLmhpZGUoKX19YS5yZXN1bWVMYXlvdXRzKCl9LGhpZGVUcmlnZ2VyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tZW51VHJpZ2dlcjtpZihhKXthLmhpZGUoKX19LGJlZm9yZU1lbnVTaG93OmZ1bmN0aW9uKGope3ZhciBoPXRoaXMsYj1oLm1lbnVJdGVtcyxkPTAsYT1iLmxlbmd0aCxnLGUsYz1mdW5jdGlvbihrLGkpe3JldHVybiBrLmlzWFR5cGUoImJ1dHRvbmdyb3VwIikmJiEoaSBpbnN0YW5jZW9mIEV4dC50b29sYmFyLlNlcGFyYXRvcil9O2ouc3VzcGVuZExheW91dHMoKTtoLmNsZWFyTWVudSgpO2oucmVtb3ZlQWxsKCk7Zm9yKDtkPGE7ZCsrKXtnPWJbZF07aWYoIWQmJihnIGluc3RhbmNlb2YgRXh0LnRvb2xiYXIuU2VwYXJhdG9yKSl7Y29udGludWV9aWYoZSYmKGMoZyxlKXx8YyhlLGcpKSl7ai5hZGQoIi0iKX1oLmFkZENvbXBvbmVudFRvTWVudShqLGcpO2U9Z31pZihqLml0ZW1zLmxlbmd0aDwxKXtqLmFkZChoLm5vSXRlbXNNZW51VGV4dCl9ai5yZXN1bWVMYXlvdXRzKCl9LGNyZWF0ZU1lbnVDb25maWc6ZnVuY3Rpb24oYyxhKXt2YXIgYj1FeHQuYXBwbHkoe30sYy5pbml0aWFsQ29uZmlnKSxkPWMudG9nZ2xlR3JvdXA7RXh0LmNvcHlUbyhiLGMsWyJpY29uQ2xzIiwiaWNvbiIsIml0ZW1JZCIsImRpc2FibGVkIiwiaGFuZGxlciIsInNjb3BlIiwibWVudSJdKTtFeHQuYXBwbHkoYix7dGV4dDpjLm92ZXJmbG93VGV4dHx8Yy50ZXh0LGhpZGVPbkNsaWNrOmEsZGVzdHJveU1lbnU6ZmFsc2V9KTtpZihjLmlzRm9ybUZpZWxkKXtiLnZhbHVlPWMuZ2V0VmFsdWUoKTtpZighYi5saXN0ZW5lcnMpe2IubGlzdGVuZXJzPXt9fWIubGlzdGVuZXJzLmNoYW5nZT1mdW5jdGlvbihoLGcsZSl7Yy5zZXRWYWx1ZShnKX19ZWxzZXtpZihkfHxjLmVuYWJsZVRvZ2dsZSl7RXh0LmFwcGx5KGIse2ljb25BbGlnbjoicmlnaHQiLGhpZGVPbkNsaWNrOmZhbHNlLGdyb3VwOmQsY2hlY2tlZDpjLnByZXNzZWQsbGlzdGVuZXJzOntjaGVja2NoYW5nZTpmdW5jdGlvbihnLGUpe2MudG9nZ2xlKGUpfX19KX19ZGVsZXRlIGIub3duZXJDdDtkZWxldGUgYi54dHlwZTtkZWxldGUgYi5pZDtyZXR1cm4gYn0sYWRkQ29tcG9uZW50VG9NZW51OmZ1bmN0aW9uKGcsYyl7dmFyIGU9dGhpcyxkLGIsYTtpZihjIGluc3RhbmNlb2YgRXh0LnRvb2xiYXIuU2VwYXJhdG9yKXtnLmFkZCgiLSIpfWVsc2V7aWYoYy5pc0NvbXBvbmVudCl7aWYoYy5pc1hUeXBlKCJzcGxpdGJ1dHRvbiIpKXtnLmFkZChlLmNyZWF0ZU1lbnVDb25maWcoYyx0cnVlKSl9ZWxzZXtpZihjLmlzWFR5cGUoImJ1dHRvbiIpKXtnLmFkZChlLmNyZWF0ZU1lbnVDb25maWcoYywhYy5tZW51KSl9ZWxzZXtpZihjLmlzWFR5cGUoImJ1dHRvbmdyb3VwIikpe2I9Yy5pdGVtcy5pdGVtczthPWIubGVuZ3RoO2ZvcihkPTA7ZDxhO2QrKyl7ZS5hZGRDb21wb25lbnRUb01lbnUoZyxiW2RdKX19ZWxzZXtnLmFkZChFeHQuY3JlYXRlKEV4dC5nZXRDbGFzc05hbWUoYyksZS5jcmVhdGVNZW51Q29uZmlnKGMpKSl9fX19fX0sY2xlYXJNZW51OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tZW51LGIsYyxhLGQ7aWYoZSYmZS5pdGVtcyl7Yj1lLml0ZW1zLml0ZW1zO2E9Yi5sZW5ndGg7Zm9yKGM9MDtjPGE7YysrKXtkPWJbY107aWYoZC5zZXRNZW51KXtkLnNldE1lbnUobnVsbCl9fX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1lbnVUcmlnZ2VyO2lmKGEmJiF0aGlzLmxheW91dC5vd25lci5pdGVtcy5jb250YWlucyhhKSl7ZGVsZXRlIGEub3duZXJDdH1FeHQuZGVzdHJveSh0aGlzLm1lbnUsYSl9fSk7RXh0LmRlZmluZSgiRXh0LmxheW91dC5jb250YWluZXIuYm94T3ZlcmZsb3cuU2Nyb2xsZXIiLHtleHRlbmQ6IkV4dC5sYXlvdXQuY29udGFpbmVyLmJveE92ZXJmbG93Lk5vbmUiLHJlcXVpcmVzOlsiRXh0LnV0aWwuQ2xpY2tSZXBlYXRlciIsIkV4dC5FbGVtZW50Il0sYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQubGF5b3V0LmJveE92ZXJmbG93LlNjcm9sbGVyIixtaXhpbnM6e29ic2VydmFibGU6IkV4dC51dGlsLk9ic2VydmFibGUifSxhbmltYXRlU2Nyb2xsOmZhbHNlLHNjcm9sbEluY3JlbWVudDoyMCx3aGVlbEluY3JlbWVudDoxMCxzY3JvbGxSZXBlYXRJbnRlcnZhbDo2MCxzY3JvbGxEdXJhdGlvbjo0MDAsc2Nyb2xsZXJDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImJveC1zY3JvbGxlciIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYyxhKXt2YXIgYj10aGlzO2IubGF5b3V0PWM7RXh0LmFwcGx5KGIsYXx8e30pO2IubWl4aW5zLm9ic2VydmFibGUuY29uc3RydWN0b3IuY2FsbChiKTtiLmFkZEV2ZW50cygic2Nyb2xsIik7Yi5zY3JvbGxQb3NpdGlvbj0wO2Iuc2Nyb2xsU2l6ZT0wfSxnZXRQcmVmaXhDb25maWc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuaW5pdENTU0NsYXNzZXMoKTtyZXR1cm57Y2xzOkV4dC5sYXlvdXQuY29udGFpbmVyLkJveC5wcm90b3R5cGUuaW5uZXJDbHMrIiAiK2EuYmVmb3JlQ3RDbHMsY246e2lkOmEubGF5b3V0Lm93bmVyLmlkKyItYmVmb3JlLXNjcm9sbGVyIixjbHM6YS5zY3JvbGxlckNscysiICIrYS5iZWZvcmVTY3JvbGxlckNscyxzdHlsZToiZGlzcGxheTpub25lIn19fSxnZXRTdWZmaXhDb25maWc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybntjbHM6RXh0LmxheW91dC5jb250YWluZXIuQm94LnByb3RvdHlwZS5pbm5lckNscysiICIrYS5hZnRlckN0Q2xzLGNuOntpZDphLmxheW91dC5vd25lci5pZCsiLWFmdGVyLXNjcm9sbGVyIixjbHM6YS5zY3JvbGxlckNscysiICIrYS5hZnRlclNjcm9sbGVyQ2xzLHN0eWxlOiJkaXNwbGF5Om5vbmUifX19LGdldE92ZXJmbG93Q2xzOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5iYXNlQ1NTUHJlZml4K3RoaXMubGF5b3V0LmRpcmVjdGlvbisiLWJveC1vdmVyZmxvdy1ib2R5In0saW5pdENTU0NsYXNzZXM6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGU9RXh0LmJhc2VDU1NQcmVmaXgsYz1kLmxheW91dCxnPWMuZ2V0TmFtZXMoKSxhPWcubGVmdCxoPWcucmlnaHQsYj1kLmdldE93bmVyVHlwZShjLm93bmVyKTtkLmJlZm9yZUN0Q2xzPWQuYmVmb3JlQ3RDbHN8fGUrImJveC1zY3JvbGxlci0iK2E7ZC5hZnRlckN0Q2xzPWQuYWZ0ZXJDdENsc3x8ZSsiYm94LXNjcm9sbGVyLSIraDtkLmJlZm9yZVNjcm9sbGVyQ2xzPWQuYmVmb3JlU2Nyb2xsZXJDbHN8fGUrYisiLXNjcm9sbC0iK2E7ZC5hZnRlclNjcm9sbGVyQ2xzPWQuYWZ0ZXJTY3JvbGxlckNsc3x8ZStiKyItc2Nyb2xsLSIraH0sYmVnaW5MYXlvdXQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5sYXlvdXQsYz1hLmdldE5hbWVzKCk7Yi5pbm5lckN0U2Nyb2xsUG9zPWEuaW5uZXJDdC5kb21bInNjcm9sbCIrYy5sZWZ0Q2FwXTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sY29tcGxldGVMYXlvdXQ6ZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxTaXplPWEucHJvcHNbImNvbnRlbnQiK3RoaXMubGF5b3V0LmdldE5hbWVzKCkud2lkdGhDYXBdO3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxmaW5pc2hlZExheW91dDpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE9Yi5sYXlvdXQsZD1hLmdldE5hbWVzKCksZT1NYXRoLm1pbihiLmdldE1heFNjcm9sbFBvc2l0aW9uKCksYy5pbm5lckN0U2Nyb2xsUG9zKTthLmlubmVyQ3QuZG9tWyJzY3JvbGwiK2QubGVmdENhcF09ZX0saGFuZGxlT3ZlcmZsb3c6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcyxiPWMubGF5b3V0LGU9Yi5nZXROYW1lcygpLGE9ImdldCIrZS53aWR0aENhcDtjLmNhcHR1cmVDaGlsZEVsZW1lbnRzKCk7Yy5zaG93U2Nyb2xsZXJzKCk7cmV0dXJue3Jlc2VydmVkU3BhY2U6Yy5iZWZvcmVDdFthXSgpK2MuYWZ0ZXJDdFthXSgpfX0sY2FwdHVyZUNoaWxkRWxlbWVudHM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5sYXlvdXQub3duZXIuZWwsYyxkO2lmKCFiLmJlZm9yZUN0KXtjPWIuYmVmb3JlU2Nyb2xsZXI9YS5nZXRCeUlkKGIubGF5b3V0Lm93bmVyLmlkKyItYmVmb3JlLXNjcm9sbGVyIik7ZD1iLmFmdGVyU2Nyb2xsZXI9YS5nZXRCeUlkKGIubGF5b3V0Lm93bmVyLmlkKyItYWZ0ZXItc2Nyb2xsZXIiKTtiLmJlZm9yZUN0PWMudXAoIiIpO2IuYWZ0ZXJDdD1kLnVwKCIiKTtiLmNyZWF0ZVdoZWVsTGlzdGVuZXIoKTtjLmFkZENsc09uT3ZlcihiLmJlZm9yZVNjcm9sbGVyQ2xzKyItaG92ZXIiKTtkLmFkZENsc09uT3ZlcihiLmFmdGVyU2Nyb2xsZXJDbHMrIi1ob3ZlciIpO2Muc2V0VmlzaWJpbGl0eU1vZGUoRXh0LkVsZW1lbnQuRElTUExBWSk7ZC5zZXRWaXNpYmlsaXR5TW9kZShFeHQuRWxlbWVudC5ESVNQTEFZKTtiLmJlZm9yZVJlcGVhdGVyPW5ldyBFeHQudXRpbC5DbGlja1JlcGVhdGVyKGMse2ludGVydmFsOmIuc2Nyb2xsUmVwZWF0SW50ZXJ2YWwsaGFuZGxlcjpiLnNjcm9sbExlZnQsc2NvcGU6Yn0pO2IuYWZ0ZXJSZXBlYXRlcj1uZXcgRXh0LnV0aWwuQ2xpY2tSZXBlYXRlcihkLHtpbnRlcnZhbDpiLnNjcm9sbFJlcGVhdEludGVydmFsLGhhbmRsZXI6Yi5zY3JvbGxSaWdodCxzY29wZTpifSl9fSxjcmVhdGVXaGVlbExpc3RlbmVyOmZ1bmN0aW9uKCl7dGhpcy5sYXlvdXQuaW5uZXJDdC5vbih7bW91c2V3aGVlbDpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbEJ5KGEuZ2V0V2hlZWxEZWx0YSgpKnRoaXMud2hlZWxJbmNyZW1lbnQqLTEsZmFsc2UpfSxzdG9wRXZlbnQ6dHJ1ZSxzY29wZTp0aGlzfSl9LGNsZWFyT3ZlcmZsb3c6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxheW91dDt0aGlzLmhpZGVTY3JvbGxlcnMoKX0sc2hvd1Njcm9sbGVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYXB0dXJlQ2hpbGRFbGVtZW50cygpO2EuYmVmb3JlU2Nyb2xsZXIuc2hvdygpO2EuYWZ0ZXJTY3JvbGxlci5zaG93KCk7YS51cGRhdGVTY3JvbGxCdXR0b25zKCk7YS5sYXlvdXQub3duZXIuYWRkQ2xzV2l0aFVJKCJzY3JvbGxlciIpfSxoaWRlU2Nyb2xsZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLmJlZm9yZVNjcm9sbGVyIT09dW5kZWZpbmVkKXthLmJlZm9yZVNjcm9sbGVyLmhpZGUoKTthLmFmdGVyU2Nyb2xsZXIuaGlkZSgpO2EubGF5b3V0Lm93bmVyLnJlbW92ZUNsc1dpdGhVSSgic2Nyb2xsZXIiKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO0V4dC5kZXN0cm95KGEuYmVmb3JlUmVwZWF0ZXIsYS5hZnRlclJlcGVhdGVyLGEuYmVmb3JlU2Nyb2xsZXIsYS5hZnRlclNjcm9sbGVyLGEuYmVmb3JlQ3QsYS5hZnRlckN0KX0sc2Nyb2xsQnk6ZnVuY3Rpb24oYixhKXt0aGlzLnNjcm9sbFRvKHRoaXMuZ2V0U2Nyb2xsUG9zaXRpb24oKStiLGEpfSxnZXRTY3JvbGxBbmltOmZ1bmN0aW9uKCl7cmV0dXJue2R1cmF0aW9uOnRoaXMuc2Nyb2xsRHVyYXRpb24sY2FsbGJhY2s6dGhpcy51cGRhdGVTY3JvbGxCdXR0b25zLHNjb3BlOnRoaXN9fSx1cGRhdGVTY3JvbGxCdXR0b25zOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxlLGMsYSxiO2lmKGQuYmVmb3JlU2Nyb2xsZXI9PT11bmRlZmluZWR8fGQuYWZ0ZXJTY3JvbGxlcj09PXVuZGVmaW5lZCl7cmV0dXJufWU9ZC5hdEV4dHJlbWVCZWZvcmUoKT8iYWRkQ2xzIjoicmVtb3ZlQ2xzIjtjPWQuYXRFeHRyZW1lQWZ0ZXIoKT8iYWRkQ2xzIjoicmVtb3ZlQ2xzIjthPWQuYmVmb3JlU2Nyb2xsZXJDbHMrIi1kaXNhYmxlZCI7Yj1kLmFmdGVyU2Nyb2xsZXJDbHMrIi1kaXNhYmxlZCI7ZC5iZWZvcmVTY3JvbGxlcltlXShhKTtkLmFmdGVyU2Nyb2xsZXJbY10oYik7ZC5zY3JvbGxpbmc9ZmFsc2V9LGF0RXh0cmVtZUJlZm9yZTpmdW5jdGlvbigpe3JldHVybiAhdGhpcy5nZXRTY3JvbGxQb3NpdGlvbigpfSxzY3JvbGxMZWZ0OmZ1bmN0aW9uKCl7dGhpcy5zY3JvbGxCeSgtdGhpcy5zY3JvbGxJbmNyZW1lbnQsZmFsc2UpfSxzY3JvbGxSaWdodDpmdW5jdGlvbigpe3RoaXMuc2Nyb2xsQnkodGhpcy5zY3JvbGxJbmNyZW1lbnQsZmFsc2UpfSxnZXRTY3JvbGxQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYj1jLmxheW91dCxhO2lmKGMuaGFzT3duUHJvcGVydHkoInNjcm9sbFBvc2l0aW9uIikpe2E9Yy5zY3JvbGxQb3NpdGlvbn1lbHNle2E9cGFyc2VJbnQoYi5pbm5lckN0LmRvbVsic2Nyb2xsIitiLmdldE5hbWVzKCkubGVmdENhcF0sMTApfHwwfXJldHVybiBhfSxnZXRNYXhTY3JvbGxQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmxheW91dCxjPWEuZ2V0TmFtZXMoKSxkPWIuc2Nyb2xsU2l6ZS1hLmlubmVyQ3RbImdldCIrYy53aWR0aENhcF0oKTtyZXR1cm4oZDwwKT8wOmR9LGF0RXh0cmVtZUFmdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsUG9zaXRpb24oKT49dGhpcy5nZXRNYXhTY3JvbGxQb3NpdGlvbigpfSxzY3JvbGxUbzpmdW5jdGlvbihhLGIpe3ZhciBnPXRoaXMsZT1nLmxheW91dCxoPWUuZ2V0TmFtZXMoKSxkPWcuZ2V0U2Nyb2xsUG9zaXRpb24oKSxjPUV4dC5OdW1iZXIuY29uc3RyYWluKGEsMCxnLmdldE1heFNjcm9sbFBvc2l0aW9uKCkpO2lmKGMhPWQmJiFnLnNjcm9sbGluZyl7ZGVsZXRlIGcuc2Nyb2xsUG9zaXRpb247aWYoYj09PXVuZGVmaW5lZCl7Yj1nLmFuaW1hdGVTY3JvbGx9ZS5pbm5lckN0LnNjcm9sbFRvKGgubGVmdCxjLGI/Zy5nZXRTY3JvbGxBbmltKCk6ZmFsc2UpO2lmKGIpe2cuc2Nyb2xsaW5nPXRydWV9ZWxzZXtnLnVwZGF0ZVNjcm9sbEJ1dHRvbnMoKX1nLmZpcmVFdmVudCgic2Nyb2xsIixnLGMsYj9nLmdldFNjcm9sbEFuaW0oKTpmYWxzZSl9fSxzY3JvbGxUb0l0ZW06ZnVuY3Rpb24oaCxiKXt2YXIgZz10aGlzLGU9Zy5sYXlvdXQsaT1lLmdldE5hbWVzKCksYSxkLGM7aD1nLmdldEl0ZW0oaCk7aWYoaCE9PXVuZGVmaW5lZCl7YT1nLmdldEl0ZW1WaXNpYmlsaXR5KGgpO2lmKCFhLmZ1bGx5VmlzaWJsZSl7ZD1oLmdldEJveCh0cnVlLHRydWUpO2M9ZFtpLnhdO2lmKGEuaGlkZGVuRW5kKXtjLT0oZy5sYXlvdXQuaW5uZXJDdFsiZ2V0IitpLndpZHRoQ2FwXSgpLWRbaS53aWR0aF0pfWcuc2Nyb2xsVG8oYyxiKX19fSxnZXRJdGVtVmlzaWJpbGl0eTpmdW5jdGlvbihqKXt2YXIgaD10aGlzLGI9aC5nZXRJdGVtKGopLmdldEJveCh0cnVlLHRydWUpLGM9aC5sYXlvdXQsZz1jLmdldE5hbWVzKCksZT1iW2cueF0sZD1lK2JbZy53aWR0aF0sYT1oLmdldFNjcm9sbFBvc2l0aW9uKCksaT1hK2MuaW5uZXJDdFsiZ2V0IitnLndpZHRoQ2FwXSgpO3JldHVybntoaWRkZW5TdGFydDplPGEsaGlkZGVuRW5kOmQ+aSxmdWxseVZpc2libGU6ZT5hJiZkPGl9fX0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLk9mZnNldCIse3N0YXRpY3M6e2Zyb21PYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyB0aGlzKGEueCxhLnkpfX0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSxiKXt0aGlzLng9KGEhPW51bGwmJiFpc05hTihhKSk/YTowO3RoaXMueT0oYiE9bnVsbCYmIWlzTmFOKGIpKT9iOjA7cmV0dXJuIHRoaXN9LGNvcHk6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEV4dC51dGlsLk9mZnNldCh0aGlzLngsdGhpcy55KX0sY29weUZyb206ZnVuY3Rpb24oYSl7dGhpcy54PWEueDt0aGlzLnk9YS55fSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJPZmZzZXRbIit0aGlzLngrIiwiK3RoaXMueSsiXSJ9LGVxdWFsczpmdW5jdGlvbihhKXtyZXR1cm4odGhpcy54PT1hLngmJnRoaXMueT09YS55KX0scm91bmQ6ZnVuY3Rpb24oYil7aWYoIWlzTmFOKGIpKXt2YXIgYT1NYXRoLnBvdygxMCxiKTt0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngqYSkvYTt0aGlzLnk9TWF0aC5yb3VuZCh0aGlzLnkqYSkvYX1lbHNle3RoaXMueD1NYXRoLnJvdW5kKHRoaXMueCk7dGhpcy55PU1hdGgucm91bmQodGhpcy55KX19LGlzWmVybzpmdW5jdGlvbigpe3JldHVybiB0aGlzLng9PTAmJnRoaXMueT09MH19KTtFeHQuZGVmaW5lKCJFeHQudXRpbC5SZWdpb24iLHtyZXF1aXJlczpbIkV4dC51dGlsLk9mZnNldCJdLHN0YXRpY3M6e2dldFJlZ2lvbjpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LmZseShhKS5nZXRQYWdlQm94KHRydWUpfSxmcm9tOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgdGhpcyhhLnRvcCxhLnJpZ2h0LGEuYm90dG9tLGEubGVmdCl9fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihkLGcsYSxjKXt2YXIgZT10aGlzO2UueT1lLnRvcD1lWzFdPWQ7ZS5yaWdodD1nO2UuYm90dG9tPWE7ZS54PWUubGVmdD1lWzBdPWN9LGNvbnRhaW5zOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7cmV0dXJuKGIueD49YS54JiZiLnJpZ2h0PD1hLnJpZ2h0JiZiLnk+PWEueSYmYi5ib3R0b208PWEuYm90dG9tKX0saW50ZXJzZWN0OmZ1bmN0aW9uKGgpe3ZhciBnPXRoaXMsZD1NYXRoLm1heChnLnksaC55KSxlPU1hdGgubWluKGcucmlnaHQsaC5yaWdodCksYT1NYXRoLm1pbihnLmJvdHRvbSxoLmJvdHRvbSksYz1NYXRoLm1heChnLngsaC54KTtpZihhPmQmJmU+Yyl7cmV0dXJuIG5ldyB0aGlzLnNlbGYoZCxlLGEsYyl9ZWxzZXtyZXR1cm4gZmFsc2V9fSx1bmlvbjpmdW5jdGlvbihoKXt2YXIgZz10aGlzLGQ9TWF0aC5taW4oZy55LGgueSksZT1NYXRoLm1heChnLnJpZ2h0LGgucmlnaHQpLGE9TWF0aC5tYXgoZy5ib3R0b20saC5ib3R0b20pLGM9TWF0aC5taW4oZy54LGgueCk7cmV0dXJuIG5ldyB0aGlzLnNlbGYoZCxlLGEsYyl9LGNvbnN0cmFpblRvOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMsYz1FeHQuTnVtYmVyLmNvbnN0cmFpbjthLnRvcD1hLnk9YyhhLnRvcCxiLnksYi5ib3R0b20pO2EuYm90dG9tPWMoYS5ib3R0b20sYi55LGIuYm90dG9tKTthLmxlZnQ9YS54PWMoYS5sZWZ0LGIueCxiLnJpZ2h0KTthLnJpZ2h0PWMoYS5yaWdodCxiLngsYi5yaWdodCk7cmV0dXJuIGF9LGFkanVzdDpmdW5jdGlvbihkLGcsYSxjKXt2YXIgZT10aGlzO2UudG9wPWUueSs9ZDtlLmxlZnQ9ZS54Kz1jO2UucmlnaHQrPWc7ZS5ib3R0b20rPWE7cmV0dXJuIGV9LGdldE91dE9mQm91bmRPZmZzZXQ6ZnVuY3Rpb24oYSxiKXtpZighRXh0LmlzT2JqZWN0KGEpKXtpZihhPT0ieCIpe3JldHVybiB0aGlzLmdldE91dE9mQm91bmRPZmZzZXRYKGIpfWVsc2V7cmV0dXJuIHRoaXMuZ2V0T3V0T2ZCb3VuZE9mZnNldFkoYil9fWVsc2V7Yj1hO3ZhciBjPW5ldyBFeHQudXRpbC5PZmZzZXQoKTtjLng9dGhpcy5nZXRPdXRPZkJvdW5kT2Zmc2V0WChiLngpO2MueT10aGlzLmdldE91dE9mQm91bmRPZmZzZXRZKGIueSk7cmV0dXJuIGN9fSxnZXRPdXRPZkJvdW5kT2Zmc2V0WDpmdW5jdGlvbihhKXtpZihhPD10aGlzLngpe3JldHVybiB0aGlzLngtYX1lbHNle2lmKGE+PXRoaXMucmlnaHQpe3JldHVybiB0aGlzLnJpZ2h0LWF9fXJldHVybiAwfSxnZXRPdXRPZkJvdW5kT2Zmc2V0WTpmdW5jdGlvbihhKXtpZihhPD10aGlzLnkpe3JldHVybiB0aGlzLnktYX1lbHNle2lmKGE+PXRoaXMuYm90dG9tKXtyZXR1cm4gdGhpcy5ib3R0b20tYX19cmV0dXJuIDB9LGlzT3V0T2ZCb3VuZDpmdW5jdGlvbihhLGIpe2lmKCFFeHQuaXNPYmplY3QoYSkpe2lmKGE9PSJ4Iil7cmV0dXJuIHRoaXMuaXNPdXRPZkJvdW5kWChiKX1lbHNle3JldHVybiB0aGlzLmlzT3V0T2ZCb3VuZFkoYil9fWVsc2V7Yj1hO3JldHVybih0aGlzLmlzT3V0T2ZCb3VuZFgoYi54KXx8dGhpcy5pc091dE9mQm91bmRZKGIueSkpfX0saXNPdXRPZkJvdW5kWDpmdW5jdGlvbihhKXtyZXR1cm4oYTx0aGlzLnh8fGE+dGhpcy5yaWdodCl9LGlzT3V0T2ZCb3VuZFk6ZnVuY3Rpb24oYSl7cmV0dXJuKGE8dGhpcy55fHxhPnRoaXMuYm90dG9tKX0scmVzdHJpY3Q6ZnVuY3Rpb24oYixkLGEpe2lmKEV4dC5pc09iamVjdChiKSl7dmFyIGM7YT1kO2Q9YjtpZihkLmNvcHkpe2M9ZC5jb3B5KCl9ZWxzZXtjPXt4OmQueCx5OmQueX19Yy54PXRoaXMucmVzdHJpY3RYKGQueCxhKTtjLnk9dGhpcy5yZXN0cmljdFkoZC55LGEpO3JldHVybiBjfWVsc2V7aWYoYj09IngiKXtyZXR1cm4gdGhpcy5yZXN0cmljdFgoZCxhKX1lbHNle3JldHVybiB0aGlzLnJlc3RyaWN0WShkLGEpfX19LHJlc3RyaWN0WDpmdW5jdGlvbihiLGEpe2lmKCFhKXthPTF9aWYoYjw9dGhpcy54KXtiLT0oYi10aGlzLngpKmF9ZWxzZXtpZihiPj10aGlzLnJpZ2h0KXtiLT0oYi10aGlzLnJpZ2h0KSphfX1yZXR1cm4gYn0scmVzdHJpY3RZOmZ1bmN0aW9uKGIsYSl7aWYoIWEpe2E9MX1pZihiPD10aGlzLnkpe2ItPShiLXRoaXMueSkqYX1lbHNle2lmKGI+PXRoaXMuYm90dG9tKXtiLT0oYi10aGlzLmJvdHRvbSkqYX19cmV0dXJuIGJ9LGdldFNpemU6ZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6dGhpcy5yaWdodC10aGlzLngsaGVpZ2h0OnRoaXMuYm90dG9tLXRoaXMueX19LGNvcHk6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuc2VsZih0aGlzLnksdGhpcy5yaWdodCx0aGlzLmJvdHRvbSx0aGlzLngpfSxjb3B5RnJvbTpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2EudG9wPWEueT1hWzFdPWIueTthLnJpZ2h0PWIucmlnaHQ7YS5ib3R0b209Yi5ib3R0b207YS5sZWZ0PWEueD1hWzBdPWIueDtyZXR1cm4gdGhpc30sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4iUmVnaW9uWyIrdGhpcy50b3ArIiwiK3RoaXMucmlnaHQrIiwiK3RoaXMuYm90dG9tKyIsIit0aGlzLmxlZnQrIl0ifSx0cmFuc2xhdGVCeTpmdW5jdGlvbihhLGMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe2M9YS55O2E9YS54fXZhciBiPXRoaXM7Yi50b3A9Yi55Kz1jO2IucmlnaHQrPWE7Yi5ib3R0b20rPWM7Yi5sZWZ0PWIueCs9YTtyZXR1cm4gYn0scm91bmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EudG9wPWEueT1NYXRoLnJvdW5kKGEueSk7YS5yaWdodD1NYXRoLnJvdW5kKGEucmlnaHQpO2EuYm90dG9tPU1hdGgucm91bmQoYS5ib3R0b20pO2EubGVmdD1hLng9TWF0aC5yb3VuZChhLngpO3JldHVybiBhfSxlcXVhbHM6ZnVuY3Rpb24oYSl7cmV0dXJuKHRoaXMudG9wPT1hLnRvcCYmdGhpcy5yaWdodD09YS5yaWdodCYmdGhpcy5ib3R0b209PWEuYm90dG9tJiZ0aGlzLmxlZnQ9PWEubGVmdCl9fSk7RXh0LmRlZmluZSgiRXh0LmRkLkRyYWdEcm9wTWFuYWdlciIse3NpbmdsZXRvbjp0cnVlLHJlcXVpcmVzOlsiRXh0LnV0aWwuUmVnaW9uIl0sdXNlczpbIkV4dC50aXAuUXVpY2tUaXBNYW5hZ2VyIl0sYWx0ZXJuYXRlQ2xhc3NOYW1lOlsiRXh0LmRkLkRyYWdEcm9wTWdyIiwiRXh0LmRkLkRETSJdLGlkczp7fSxoYW5kbGVJZHM6e30sZHJhZ0N1cnJlbnQ6bnVsbCxkcmFnT3ZlcnM6e30sZGVsdGFYOjAsZGVsdGFZOjAscHJldmVudERlZmF1bHQ6dHJ1ZSxzdG9wUHJvcGFnYXRpb246dHJ1ZSxpbml0aWFsaXplZDpmYWxzZSxsb2NrZWQ6ZmFsc2UsaW5pdDpmdW5jdGlvbigpe3RoaXMuaW5pdGlhbGl6ZWQ9dHJ1ZX0sUE9JTlQ6MCxJTlRFUlNFQ1Q6MSxtb2RlOjAsbm90aWZ5T2NjbHVkZWQ6ZmFsc2UsX2V4ZWNPbkFsbDpmdW5jdGlvbihjLGIpe3ZhciBkLGEsZTtmb3IoZCBpbiB0aGlzLmlkcyl7Zm9yKGEgaW4gdGhpcy5pZHNbZF0pe2U9dGhpcy5pZHNbZF1bYV07aWYoIXRoaXMuaXNUeXBlT2ZERChlKSl7Y29udGludWV9ZVtjXS5hcHBseShlLGIpfX19LF9vbkxvYWQ6ZnVuY3Rpb24oKXt0aGlzLmluaXQoKTt2YXIgYT1FeHQuRXZlbnRNYW5hZ2VyO2Eub24oZG9jdW1lbnQsIm1vdXNldXAiLHRoaXMuaGFuZGxlTW91c2VVcCx0aGlzLHRydWUpO2Eub24oZG9jdW1lbnQsIm1vdXNlbW92ZSIsdGhpcy5oYW5kbGVNb3VzZU1vdmUsdGhpcyx0cnVlKTthLm9uKHdpbmRvdywidW5sb2FkIix0aGlzLl9vblVubG9hZCx0aGlzLHRydWUpO2Eub24od2luZG93LCJyZXNpemUiLHRoaXMuX29uUmVzaXplLHRoaXMsdHJ1ZSl9LF9vblJlc2l6ZTpmdW5jdGlvbihhKXt0aGlzLl9leGVjT25BbGwoInJlc2V0Q29uc3RyYWludHMiLFtdKX0sbG9jazpmdW5jdGlvbigpe3RoaXMubG9ja2VkPXRydWV9LHVubG9jazpmdW5jdGlvbigpe3RoaXMubG9ja2VkPWZhbHNlfSxpc0xvY2tlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2tlZH0sbG9jYXRpb25DYWNoZTp7fSx1c2VDYWNoZTp0cnVlLGNsaWNrUGl4ZWxUaHJlc2g6MyxjbGlja1RpbWVUaHJlc2g6MzUwLGRyYWdUaHJlc2hNZXQ6ZmFsc2UsY2xpY2tUaW1lb3V0Om51bGwsc3RhcnRYOjAsc3RhcnRZOjAscmVnRHJhZ0Ryb3A6ZnVuY3Rpb24oYixhKXtpZighdGhpcy5pbml0aWFsaXplZCl7dGhpcy5pbml0KCl9aWYoIXRoaXMuaWRzW2FdKXt0aGlzLmlkc1thXT17fX10aGlzLmlkc1thXVtiLmlkXT1ifSxyZW1vdmVEREZyb21Hcm91cDpmdW5jdGlvbihjLGEpe2lmKCF0aGlzLmlkc1thXSl7dGhpcy5pZHNbYV09e319dmFyIGI9dGhpcy5pZHNbYV07aWYoYiYmYltjLmlkXSl7ZGVsZXRlIGJbYy5pZF19fSxfcmVtb3ZlOmZ1bmN0aW9uKGIpe2Zvcih2YXIgYSBpbiBiLmdyb3Vwcyl7aWYoYSYmdGhpcy5pZHNbYV0mJnRoaXMuaWRzW2FdW2IuaWRdKXtkZWxldGUgdGhpcy5pZHNbYV1bYi5pZF19fWRlbGV0ZSB0aGlzLmhhbmRsZUlkc1tiLmlkXX0scmVnSGFuZGxlOmZ1bmN0aW9uKGIsYSl7aWYoIXRoaXMuaGFuZGxlSWRzW2JdKXt0aGlzLmhhbmRsZUlkc1tiXT17fX10aGlzLmhhbmRsZUlkc1tiXVthXT1hfSxpc0RyYWdEcm9wOmZ1bmN0aW9uKGEpe3JldHVybih0aGlzLmdldEREQnlJZChhKSk/dHJ1ZTpmYWxzZX0sZ2V0UmVsYXRlZDpmdW5jdGlvbihnLGIpe3ZhciBlPVtdLGQsYyxhO2ZvcihkIGluIGcuZ3JvdXBzKXtmb3IoYyBpbiB0aGlzLmlkc1tkXSl7YT10aGlzLmlkc1tkXVtjXTtpZighdGhpcy5pc1R5cGVPZkREKGEpKXtjb250aW51ZX1pZighYnx8YS5pc1RhcmdldCl7ZVtlLmxlbmd0aF09YX19fXJldHVybiBlfSxpc0xlZ2FsVGFyZ2V0OmZ1bmN0aW9uKGUsZCl7dmFyIGI9dGhpcy5nZXRSZWxhdGVkKGUsdHJ1ZSksYyxhO2ZvcihjPTAsYT1iLmxlbmd0aDtjPGE7KytjKXtpZihiW2NdLmlkPT1kLmlkKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfSxpc1R5cGVPZkREOmZ1bmN0aW9uKGEpe3JldHVybihhJiZhLl9feWdEcmFnRHJvcCl9LGlzSGFuZGxlOmZ1bmN0aW9uKGIsYSl7cmV0dXJuKHRoaXMuaGFuZGxlSWRzW2JdJiZ0aGlzLmhhbmRsZUlkc1tiXVthXSl9LGdldEREQnlJZDpmdW5jdGlvbihkKXt2YXIgYz10aGlzLGIsYTtmb3IoYiBpbiB0aGlzLmlkcyl7YT10aGlzLmlkc1tiXVtkXTtpZihhIGluc3RhbmNlb2YgRXh0LmRkLkREVGFyZ2V0KXtyZXR1cm4gYX19cmV0dXJuIG51bGx9LGhhbmRsZU1vdXNlRG93bjpmdW5jdGlvbihjLGIpe2lmKEV4dC50aXAuUXVpY2tUaXBNYW5hZ2VyKXtFeHQudGlwLlF1aWNrVGlwTWFuYWdlci5kZERpc2FibGUoKX1pZih0aGlzLmRyYWdDdXJyZW50KXt0aGlzLmhhbmRsZU1vdXNlVXAoYyl9dGhpcy5jdXJyZW50VGFyZ2V0PWMuZ2V0VGFyZ2V0KCk7dGhpcy5kcmFnQ3VycmVudD1iO3ZhciBhPWIuZ2V0RWwoKTtpZihFeHQuaXNJRSYmYS5zZXRDYXB0dXJlKXthLnNldENhcHR1cmUoKX10aGlzLnN0YXJ0WD1jLmdldFBhZ2VYKCk7dGhpcy5zdGFydFk9Yy5nZXRQYWdlWSgpO3RoaXMuZGVsdGFYPXRoaXMuc3RhcnRYLWEub2Zmc2V0TGVmdDt0aGlzLmRlbHRhWT10aGlzLnN0YXJ0WS1hLm9mZnNldFRvcDt0aGlzLmRyYWdUaHJlc2hNZXQ9ZmFsc2U7dGhpcy5jbGlja1RpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBkPUV4dC5kZC5EcmFnRHJvcE1hbmFnZXI7ZC5zdGFydERyYWcoZC5zdGFydFgsZC5zdGFydFkpfSx0aGlzLmNsaWNrVGltZVRocmVzaCl9LHN0YXJ0RHJhZzpmdW5jdGlvbihhLGIpe2NsZWFyVGltZW91dCh0aGlzLmNsaWNrVGltZW91dCk7aWYodGhpcy5kcmFnQ3VycmVudCl7dGhpcy5kcmFnQ3VycmVudC5iNFN0YXJ0RHJhZyhhLGIpO3RoaXMuZHJhZ0N1cnJlbnQuc3RhcnREcmFnKGEsYil9dGhpcy5kcmFnVGhyZXNoTWV0PXRydWV9LGhhbmRsZU1vdXNlVXA6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5kcmFnQ3VycmVudDtpZihFeHQudGlwJiZFeHQudGlwLlF1aWNrVGlwTWFuYWdlcil7RXh0LnRpcC5RdWlja1RpcE1hbmFnZXIuZGRFbmFibGUoKX1pZighYSl7cmV0dXJufWlmKEV4dC5pc0lFJiZkb2N1bWVudC5yZWxlYXNlQ2FwdHVyZSl7ZG9jdW1lbnQucmVsZWFzZUNhcHR1cmUoKX1jbGVhclRpbWVvdXQodGhpcy5jbGlja1RpbWVvdXQpO2lmKHRoaXMuZHJhZ1RocmVzaE1ldCl7dGhpcy5maXJlRXZlbnRzKGIsdHJ1ZSl9dGhpcy5zdG9wRHJhZyhiKTt0aGlzLnN0b3BFdmVudChiKX0sc3RvcEV2ZW50OmZ1bmN0aW9uKGEpe2lmKHRoaXMuc3RvcFByb3BhZ2F0aW9uKXthLnN0b3BQcm9wYWdhdGlvbigpfWlmKHRoaXMucHJldmVudERlZmF1bHQpe2EucHJldmVudERlZmF1bHQoKX19LHN0b3BEcmFnOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZHJhZ0N1cnJlbnQpe2lmKHRoaXMuZHJhZ1RocmVzaE1ldCl7dGhpcy5kcmFnQ3VycmVudC5iNEVuZERyYWcoYSk7dGhpcy5kcmFnQ3VycmVudC5lbmREcmFnKGEpfXRoaXMuZHJhZ0N1cnJlbnQub25Nb3VzZVVwKGEpfXRoaXMuZHJhZ0N1cnJlbnQ9bnVsbDt0aGlzLmRyYWdPdmVycz17fX0saGFuZGxlTW91c2VNb3ZlOmZ1bmN0aW9uKGQpe3ZhciBjPXRoaXMsYixhO2lmKCFjLmRyYWdDdXJyZW50KXtyZXR1cm4gdHJ1ZX1pZighYy5kcmFnVGhyZXNoTWV0KXtiPU1hdGguYWJzKGMuc3RhcnRYLWQuZ2V0UGFnZVgoKSk7YT1NYXRoLmFicyhjLnN0YXJ0WS1kLmdldFBhZ2VZKCkpO2lmKGI+Yy5jbGlja1BpeGVsVGhyZXNofHxhPmMuY2xpY2tQaXhlbFRocmVzaCl7Yy5zdGFydERyYWcoYy5zdGFydFgsYy5zdGFydFkpfX1pZihjLmRyYWdUaHJlc2hNZXQpe2MuZHJhZ0N1cnJlbnQuYjREcmFnKGQpO2MuZHJhZ0N1cnJlbnQub25EcmFnKGQpO2lmKCFjLmRyYWdDdXJyZW50Lm1vdmVPbmx5KXtjLmZpcmVFdmVudHMoZCxmYWxzZSl9fWMuc3RvcEV2ZW50KGQpO3JldHVybiB0cnVlfSxmaXJlRXZlbnRzOmZ1bmN0aW9uKG4scSl7dmFyIHA9dGhpcyxrPXAuZHJhZ0N1cnJlbnQscj1uLmdldFBvaW50KCksYix0LGQ9W10sYT1bXSxnPVtdLGw9W10saj1bXSxjPVtdLG8saCxtLHM7aWYoIWt8fGsuaXNMb2NrZWQoKSl7cmV0dXJufWZvcihoIGluIHAuZHJhZ092ZXJzKXtiPXAuZHJhZ092ZXJzW2hdO2lmKCFwLmlzVHlwZU9mREQoYikpe2NvbnRpbnVlfWlmKCF0aGlzLmlzT3ZlclRhcmdldChyLGIscC5tb2RlKSl7Zy5wdXNoKGIpfWFbaF09dHJ1ZTtkZWxldGUgcC5kcmFnT3ZlcnNbaF19Zm9yKHMgaW4gay5ncm91cHMpe2lmKCJzdHJpbmciIT10eXBlb2Ygcyl7Y29udGludWV9Zm9yKGggaW4gcC5pZHNbc10pe2I9cC5pZHNbc11baF07aWYocC5pc1R5cGVPZkREKGIpJiYodD1iLmdldEVsKCkpJiYoYi5pc1RhcmdldCkmJighYi5pc0xvY2tlZCgpKSYmKEV4dC5mbHkodCkuaXNWaXNpYmxlKHRydWUpKSYmKChiIT1rKXx8KGsuaWdub3JlU2VsZj09PWZhbHNlKSkpe2lmKChiLnpJbmRleD1wLmdldFpJbmRleCh0KSkhPT0tMSl7bz10cnVlfWQucHVzaChiKX19fWlmKG8pe0V4dC5BcnJheS5zb3J0KGQscC5ieVpJbmRleCl9Zm9yKGg9MCxtPWQubGVuZ3RoO2g8bTtoKyspe2I9ZFtoXTtpZihwLmlzT3ZlclRhcmdldChyLGIscC5tb2RlKSl7aWYocSl7ai5wdXNoKGIpfWVsc2V7aWYoIWFbYi5pZF0pe2MucHVzaChiKX1lbHNle2wucHVzaChiKX1wLmRyYWdPdmVyc1tiLmlkXT1ifWlmKCFwLm5vdGlmeU9jY2x1ZGVkKXticmVha319fWlmKHAubW9kZSl7aWYoZy5sZW5ndGgpe2suYjREcmFnT3V0KG4sZyk7ay5vbkRyYWdPdXQobixnKX1pZihjLmxlbmd0aCl7ay5vbkRyYWdFbnRlcihuLGMpfWlmKGwubGVuZ3RoKXtrLmI0RHJhZ092ZXIobixsKTtrLm9uRHJhZ092ZXIobixsKX1pZihqLmxlbmd0aCl7ay5iNERyYWdEcm9wKG4saik7ay5vbkRyYWdEcm9wKG4sail9fWVsc2V7Zm9yKGg9MCxtPWcubGVuZ3RoO2g8bTsrK2gpe2suYjREcmFnT3V0KG4sZ1toXS5pZCk7ay5vbkRyYWdPdXQobixnW2hdLmlkKX1mb3IoaD0wLG09Yy5sZW5ndGg7aDxtOysraCl7ay5vbkRyYWdFbnRlcihuLGNbaF0uaWQpfWZvcihoPTAsbT1sLmxlbmd0aDtoPG07KytoKXtrLmI0RHJhZ092ZXIobixsW2hdLmlkKTtrLm9uRHJhZ092ZXIobixsW2hdLmlkKX1mb3IoaD0wLG09ai5sZW5ndGg7aDxtOysraCl7ay5iNERyYWdEcm9wKG4saltoXS5pZCk7ay5vbkRyYWdEcm9wKG4saltoXS5pZCl9fWlmKHEmJiFqLmxlbmd0aCl7ay5vbkludmFsaWREcm9wKG4pfX0sZ2V0WkluZGV4OmZ1bmN0aW9uKGIpe3ZhciBhPWRvY3VtZW50LmJvZHksYyxkPS0xO2I9RXh0LmdldERvbShiKTt3aGlsZShiIT09YSl7aWYoIWlzTmFOKGM9TnVtYmVyKEV4dC5mbHkoYikuZ2V0U3R5bGUoInpJbmRleCIpKSkpe2Q9Y31iPWIucGFyZW50Tm9kZX1yZXR1cm4gZH0sYnlaSW5kZXg6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYi56SW5kZXg8YS56SW5kZXh9LGdldEJlc3RNYXRjaDpmdW5jdGlvbihjKXt2YXIgZT1udWxsLGI9Yy5sZW5ndGgsZCxhO2lmKGI9PTEpe2U9Y1swXX1lbHNle2ZvcihkPTA7ZDxiOysrZCl7YT1jW2RdO2lmKGEuY3Vyc29ySXNPdmVyKXtlPWE7YnJlYWt9ZWxzZXtpZighZXx8ZS5vdmVybGFwLmdldEFyZWEoKTxhLm92ZXJsYXAuZ2V0QXJlYSgpKXtlPWF9fX19cmV0dXJuIGV9LHJlZnJlc2hDYWNoZTpmdW5jdGlvbihiKXt2YXIgYSxjLGQsZTtmb3IoYSBpbiBiKXtpZigic3RyaW5nIiE9dHlwZW9mIGEpe2NvbnRpbnVlfWZvcihjIGluIHRoaXMuaWRzW2FdKXtkPXRoaXMuaWRzW2FdW2NdO2lmKHRoaXMuaXNUeXBlT2ZERChkKSl7ZT10aGlzLmdldExvY2F0aW9uKGQpO2lmKGUpe3RoaXMubG9jYXRpb25DYWNoZVtkLmlkXT1lfWVsc2V7ZGVsZXRlIHRoaXMubG9jYXRpb25DYWNoZVtkLmlkXX19fX19LHZlcmlmeUVsOmZ1bmN0aW9uKGIpe2lmKGIpe3ZhciBhO2lmKEV4dC5pc0lFKXt0cnl7YT1iLm9mZnNldFBhcmVudH1jYXRjaChjKXt9fWVsc2V7YT1iLm9mZnNldFBhcmVudH1pZihhKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfSxnZXRMb2NhdGlvbjpmdW5jdGlvbihpKXtpZighdGhpcy5pc1R5cGVPZkREKGkpKXtyZXR1cm4gbnVsbH1pZihpLmdldFJlZ2lvbil7cmV0dXJuIGkuZ2V0UmVnaW9uKCl9dmFyIGc9aS5nZXRFbCgpLG0sZCxjLG8sbixwLGEsayxoO3RyeXttPUV4dC5FbGVtZW50LmdldFhZKGcpfWNhdGNoKGope31pZighbSl7cmV0dXJuIG51bGx9ZD1tWzBdO2M9ZCtnLm9mZnNldFdpZHRoO289bVsxXTtuPW8rZy5vZmZzZXRIZWlnaHQ7cD1vLWkucGFkZGluZ1swXTthPWMraS5wYWRkaW5nWzFdO2s9bitpLnBhZGRpbmdbMl07aD1kLWkucGFkZGluZ1szXTtyZXR1cm4gbmV3IEV4dC51dGlsLlJlZ2lvbihwLGEsayxoKX0saXNPdmVyVGFyZ2V0OmZ1bmN0aW9uKGosYSxjKXt2YXIgZT10aGlzLmxvY2F0aW9uQ2FjaGVbYS5pZF0saSxnLGIsZCxoO2lmKCFlfHwhdGhpcy51c2VDYWNoZSl7ZT10aGlzLmdldExvY2F0aW9uKGEpO3RoaXMubG9jYXRpb25DYWNoZVthLmlkXT1lfWlmKCFlKXtyZXR1cm4gZmFsc2V9YS5jdXJzb3JJc092ZXI9ZS5jb250YWlucyhqKTtpPXRoaXMuZHJhZ0N1cnJlbnQ7aWYoIWl8fCFpLmdldFRhcmdldENvb3JkfHwoIWMmJiFpLmNvbnN0cmFpblgmJiFpLmNvbnN0cmFpblkpKXtyZXR1cm4gYS5jdXJzb3JJc092ZXJ9YS5vdmVybGFwPW51bGw7Zz1pLmdldFRhcmdldENvb3JkKGoueCxqLnkpO2I9aS5nZXREcmFnRWwoKTtkPW5ldyBFeHQudXRpbC5SZWdpb24oZy55LGcueCtiLm9mZnNldFdpZHRoLGcueStiLm9mZnNldEhlaWdodCxnLngpO2g9ZC5pbnRlcnNlY3QoZSk7aWYoaCl7YS5vdmVybGFwPWg7cmV0dXJuKGMpP3RydWU6YS5jdXJzb3JJc092ZXJ9ZWxzZXtyZXR1cm4gZmFsc2V9fSxfb25VbmxvYWQ6ZnVuY3Rpb24oYixhKXtFeHQuZGQuRHJhZ0Ryb3BNYW5hZ2VyLnVucmVnQWxsKCl9LHVucmVnQWxsOmZ1bmN0aW9uKCl7aWYodGhpcy5kcmFnQ3VycmVudCl7dGhpcy5zdG9wRHJhZygpO3RoaXMuZHJhZ0N1cnJlbnQ9bnVsbH10aGlzLl9leGVjT25BbGwoInVucmVnIixbXSk7Zm9yKHZhciBhIGluIHRoaXMuZWxlbWVudENhY2hlKXtkZWxldGUgdGhpcy5lbGVtZW50Q2FjaGVbYV19dGhpcy5lbGVtZW50Q2FjaGU9e307dGhpcy5pZHM9e319LGVsZW1lbnRDYWNoZTp7fSxnZXRFbFdyYXBwZXI6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5lbGVtZW50Q2FjaGVbYl07aWYoIWF8fCFhLmVsKXthPXRoaXMuZWxlbWVudENhY2hlW2JdPW5ldyB0aGlzLkVsZW1lbnRXcmFwcGVyKEV4dC5nZXREb20oYikpfXJldHVybiBhfSxnZXRFbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuZ2V0RG9tKGEpfSxnZXRDc3M6ZnVuY3Rpb24oYil7dmFyIGE9RXh0LmdldERvbShiKTtyZXR1cm4oYSk/YS5zdHlsZTpudWxsfSxFbGVtZW50V3JhcHBlcjpmdW5jdGlvbihhKXt0aGlzLmVsPWF8fG51bGw7dGhpcy5pZD10aGlzLmVsJiZhLmlkO3RoaXMuY3NzPXRoaXMuZWwmJmEuc3R5bGV9LGdldFBvc1g6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5FbGVtZW50LmdldFgoYSl9LGdldFBvc1k6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5FbGVtZW50LmdldFkoYSl9LHN3YXBOb2RlOmZ1bmN0aW9uKGMsYSl7aWYoYy5zd2FwTm9kZSl7Yy5zd2FwTm9kZShhKX1lbHNle3ZhciBkPWEucGFyZW50Tm9kZSxiPWEubmV4dFNpYmxpbmc7aWYoYj09Yyl7ZC5pbnNlcnRCZWZvcmUoYyxhKX1lbHNle2lmKGE9PWMubmV4dFNpYmxpbmcpe2QuaW5zZXJ0QmVmb3JlKGEsYyl9ZWxzZXtjLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGEsYyk7ZC5pbnNlcnRCZWZvcmUoYyxiKX19fX0sZ2V0U2Nyb2xsOmZ1bmN0aW9uKCl7dmFyIGQ9d2luZG93LmRvY3VtZW50LGU9ZC5kb2N1bWVudEVsZW1lbnQsYT1kLmJvZHksYz0wLGI9MDtpZihFeHQuaXNHZWNrbzQpe2M9d2luZG93LnNjcm9sbFlPZmZzZXQ7Yj13aW5kb3cuc2Nyb2xsWE9mZnNldH1lbHNle2lmKGUmJihlLnNjcm9sbFRvcHx8ZS5zY3JvbGxMZWZ0KSl7Yz1lLnNjcm9sbFRvcDtiPWUuc2Nyb2xsTGVmdH1lbHNle2lmKGEpe2M9YS5zY3JvbGxUb3A7Yj1hLnNjcm9sbExlZnR9fX1yZXR1cm57dG9wOmMsbGVmdDpifX0sZ2V0U3R5bGU6ZnVuY3Rpb24oYixhKXtyZXR1cm4gRXh0LmZseShiKS5nZXRTdHlsZShhKX0sZ2V0U2Nyb2xsVG9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsKCkudG9wfSxnZXRTY3JvbGxMZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsKCkubGVmdH0sbW92ZVRvRWw6ZnVuY3Rpb24oYSxjKXt2YXIgYj1FeHQuRWxlbWVudC5nZXRYWShjKTtFeHQuRWxlbWVudC5zZXRYWShhLGIpfSxudW1lcmljU29ydDpmdW5jdGlvbihkLGMpe3JldHVybihkLWMpfSxfdGltZW91dENvdW50OjAsX2FkZExpc3RlbmVyczpmdW5jdGlvbigpe2lmKGRvY3VtZW50KXt0aGlzLl9vbkxvYWQoKX1lbHNle2lmKHRoaXMuX3RpbWVvdXRDb3VudDw9MjAwMCl7c2V0VGltZW91dCh0aGlzLl9hZGRMaXN0ZW5lcnMsMTApO2lmKGRvY3VtZW50JiZkb2N1bWVudC5ib2R5KXt0aGlzLl90aW1lb3V0Q291bnQrPTF9fX19LGhhbmRsZVdhc0NsaWNrZWQ6ZnVuY3Rpb24oYSxjKXtpZih0aGlzLmlzSGFuZGxlKGMsYS5pZCkpe3JldHVybiB0cnVlfWVsc2V7dmFyIGI9YS5wYXJlbnROb2RlO3doaWxlKGIpe2lmKHRoaXMuaXNIYW5kbGUoYyxiLmlkKSl7cmV0dXJuIHRydWV9ZWxzZXtiPWIucGFyZW50Tm9kZX19fXJldHVybiBmYWxzZX19LGZ1bmN0aW9uKCl7dGhpcy5fYWRkTGlzdGVuZXJzKCl9KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbnRhaW5lci5Cb3giLHthbGlhczpbImxheW91dC5ib3giXSxleHRlbmQ6IkV4dC5sYXlvdXQuY29udGFpbmVyLkNvbnRhaW5lciIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQubGF5b3V0LkJveExheW91dCIscmVxdWlyZXM6WyJFeHQubGF5b3V0LmNvbnRhaW5lci5ib3hPdmVyZmxvdy5Ob25lIiwiRXh0LmxheW91dC5jb250YWluZXIuYm94T3ZlcmZsb3cuTWVudSIsIkV4dC5sYXlvdXQuY29udGFpbmVyLmJveE92ZXJmbG93LlNjcm9sbGVyIiwiRXh0LnV0aWwuRm9ybWF0IiwiRXh0LmRkLkRyYWdEcm9wTWFuYWdlciJdLGRlZmF1bHRNYXJnaW5zOnt0b3A6MCxyaWdodDowLGJvdHRvbTowLGxlZnQ6MH0scGFkZGluZzowLHBhY2s6InN0YXJ0IixmbGV4OnVuZGVmaW5lZCxzdHJldGNoTWF4UGFydG5lcjp1bmRlZmluZWQsdHlwZToiYm94IixzY3JvbGxPZmZzZXQ6MCxpdGVtQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJib3gtaXRlbSIsdGFyZ2V0Q2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJib3gtbGF5b3V0LWN0Iixpbm5lckNsczpFeHQuYmFzZUNTU1ByZWZpeCsiYm94LWlubmVyIixhdmFpbGFibGVTcGFjZU9mZnNldDowLHJlc2VydmVPZmZzZXQ6dHJ1ZSxtYW5hZ2VNYXJnaW5zOnRydWUsY2hpbGRFbHM6WyJpbm5lckN0IiwidGFyZ2V0RWwiXSxyZW5kZXJUcGw6WyJ7JXZhciBvYyxsPXZhbHVlcy4kY29tcC5sYXlvdXQsb2g9bC5vdmVyZmxvd0hhbmRsZXI7IiwiaWYgKG9oLmdldFByZWZpeENvbmZpZyE9PUV4dC5lbXB0eUZuKSB7IiwiaWYob2M9b2guZ2V0UHJlZml4Q29uZmlnKCkpZGguZ2VuZXJhdGVNYXJrdXAob2MsIG91dCkiLCJ9JX0iLCc8ZGl2IGlkPSJ7b3duZXJJZH0taW5uZXJDdCIgY2xhc3M9IntbbC5pbm5lckNsc119IHtbb2guZ2V0T3ZlcmZsb3dDbHMoKV19IiByb2xlPSJwcmVzZW50YXRpb24iPicsJzxkaXYgaWQ9Intvd25lcklkfS10YXJnZXRFbCIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOycsIndpZHRoOjIwMDAwcHg7IiwibGVmdDowcHg7dG9wOjBweDsiLCdoZWlnaHQ6MXB4Ij4nLCJ7JXRoaXMucmVuZGVyQm9keShvdXQsIHZhbHVlcyklfSIsIjwvZGl2PiIsIjwvZGl2PiIsInslaWYgKG9oLmdldFN1ZmZpeENvbmZpZyE9PUV4dC5lbXB0eUZuKSB7IiwiaWYob2M9b2guZ2V0U3VmZml4Q29uZmlnKCkpZGguZ2VuZXJhdGVNYXJrdXAob2MsIG91dCkiLCJ9JX0iLHtkaXNhYmxlRm9ybWF0czp0cnVlLGRlZmluaXRpb25zOiJ2YXIgZGg9RXh0LkRvbUhlbHBlcjsifV0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxiO2MuY2FsbFBhcmVudChhcmd1bWVudHMpO2MuZmxleFNvcnRGbj1FeHQuRnVuY3Rpb24uYmluZChjLmZsZXhTb3J0LGMpO2MuaW5pdE92ZXJmbG93SGFuZGxlcigpO2I9dHlwZW9mIGMucGFkZGluZztpZihiPT0ic3RyaW5nInx8Yj09Im51bWJlciIpe2MucGFkZGluZz1FeHQudXRpbC5Gb3JtYXQucGFyc2VCb3goYy5wYWRkaW5nKTtjLnBhZGRpbmcuaGVpZ2h0PWMucGFkZGluZy50b3ArYy5wYWRkaW5nLmJvdHRvbTtjLnBhZGRpbmcud2lkdGg9Yy5wYWRkaW5nLmxlZnQrYy5wYWRkaW5nLnJpZ2h0fX0sZ2V0TmFtZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lc30sX3BlcmNlbnRhZ2VSZTovXlxzKihcZCsoPzpcLlxkKik/KVxzKlslXVxzKiQvLGdldEl0ZW1TaXplUG9saWN5OmZ1bmN0aW9uKG0sbil7dmFyIGo9dGhpcyxoPWouc2l6ZVBvbGljeSxnPWouYWxpZ24sZT1tLmZsZXgsaz1nLGk9ai5uYW1lcyxhPW1baS53aWR0aF0sbD1tW2kuaGVpZ2h0XSxjPWouX3BlcmNlbnRhZ2VSZSxiPWMudGVzdChhKSxkPShnPT0ic3RyZXRjaCIpO2lmKChkfHxlfHxiKSYmIW4pe249ai5vd25lci5nZXRTaXplTW9kZWwoKX1pZihkKXtpZighYy50ZXN0KGwpJiZuW2kuaGVpZ2h0XS5zaHJpbmtXcmFwKXtrPSJzdHJldGNobWF4In19ZWxzZXtpZihnIT0ic3RyZXRjaG1heCIpe2lmKGMudGVzdChsKSl7az0ic3RyZXRjaCJ9ZWxzZXtrPSIifX19aWYoZXx8Yil7aWYoIW5baS53aWR0aF0uc2hyaW5rV3JhcCl7aD1oLmZsZXh9fXJldHVybiBoW2tdfSxmbGV4U29ydDpmdW5jdGlvbihkLGMpe3ZhciBlPXRoaXMuZ2V0TmFtZXMoKS5tYXhXaWR0aCxnPUluZmluaXR5O2Q9ZC50YXJnZXRbZV18fGc7Yz1jLnRhcmdldFtlXXx8ZztpZighaXNGaW5pdGUoZCkmJiFpc0Zpbml0ZShjKSl7cmV0dXJuIDB9cmV0dXJuIGQtY30saXNJdGVtQm94UGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybiB0cnVlfSxpc0l0ZW1TaHJpbmtXcmFwOmZ1bmN0aW9uKGEpe3JldHVybiB0cnVlfSxtaW5TaXplU29ydEZuOmZ1bmN0aW9uKGQsYyl7cmV0dXJuIGMuYXZhaWxhYmxlLWQuYXZhaWxhYmxlfSxyb3VuZEZsZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguY2VpbChhKX0sYmVnaW5Db2xsYXBzZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKGEuZGlyZWN0aW9uPT09InZlcnRpY2FsIiYmYi5jb2xsYXBzZWRWZXJ0aWNhbCgpKXtiLmNvbGxhcHNlTWVtZW50by5jYXB0dXJlKFsiZmxleCJdKTtkZWxldGUgYi5mbGV4fWVsc2V7aWYoYS5kaXJlY3Rpb249PT0iaG9yaXpvbnRhbCImJmIuY29sbGFwc2VkSG9yaXpvbnRhbCgpKXtiLmNvbGxhcHNlTWVtZW50by5jYXB0dXJlKFsiZmxleCJdKTtkZWxldGUgYi5mbGV4fX19LGJlZ2luRXhwYW5kOmZ1bmN0aW9uKGEpe2EuY29sbGFwc2VNZW1lbnRvLnJlc3RvcmUoWyJmbGV4Il0pfSxiZWdpbkxheW91dDpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGU9Yi5vd25lci5zdHJldGNoTWF4UGFydG5lcixhPWIuaW5uZXJDdC5kb20uc3R5bGUsZD1iLmdldE5hbWVzKCk7Yy5ib3hOYW1lcz1kO2Iub3ZlcmZsb3dIYW5kbGVyLmJlZ2luTGF5b3V0KGMpO2lmKHR5cGVvZiBlPT09InN0cmluZyIpe2U9RXh0LmdldENtcChlKXx8Yi5vd25lci5xdWVyeShlKVswXX1jLnN0cmV0Y2hNYXhQYXJ0bmVyPWUmJmMuY29udGV4dC5nZXRDbXAoZSk7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7Yy5pbm5lckN0Q29udGV4dD1jLmdldEVsKCJpbm5lckN0IixiKTtiLnNjcm9sbFBhcmFsbGVsPSEhKGIub3duZXIuYXV0b1Njcm9sbHx8Yi5vd25lcltkLm92ZXJmbG93WF0pO2Iuc2Nyb2xsUGVycGVuZGljdWxhcj0hIShiLm93bmVyLmF1dG9TY3JvbGx8fGIub3duZXJbZC5vdmVyZmxvd1ldKTtpZihiLnNjcm9sbFBhcmFsbGVsKXtiLnNjcm9sbFBvcz1iLm93bmVyLmdldFRhcmdldEVsKCkuZG9tW2Quc2Nyb2xsTGVmdF19YS53aWR0aD0iIjthLmhlaWdodD0iIn0sYmVnaW5MYXlvdXRDeWNsZTpmdW5jdGlvbihlLGEpe3ZhciBkPXRoaXMsaD1kLmFsaWduLGc9ZS5ib3hOYW1lcyxiPWQucGFjayxjPWcuaGVpZ2h0TW9kZWw7ZC5vdmVyZmxvd0hhbmRsZXIuYmVnaW5MYXlvdXRDeWNsZShlLGEpO2QuY2FsbFBhcmVudChhcmd1bWVudHMpO2UucGFyYWxsZWxTaXplTW9kZWw9ZVtnLndpZHRoTW9kZWxdO2UucGVycGVuZGljdWxhclNpemVNb2RlbD1lW2NdO2UuYm94T3B0aW9ucz17YWxpZ246aD17c3RyZXRjaDpoPT0ic3RyZXRjaCIsc3RyZXRjaG1heDpoPT0ic3RyZXRjaG1heCIsY2VudGVyOmg9PWcuY2VudGVyfSxwYWNrOmI9e2NlbnRlcjpiPT0iY2VudGVyIixlbmQ6Yj09ImVuZCJ9fTtpZihoLnN0cmV0Y2gmJmUucGVycGVuZGljdWxhclNpemVNb2RlbC5zaHJpbmtXcmFwKXtoLnN0cmV0Y2htYXg9dHJ1ZTtoLnN0cmV0Y2g9ZmFsc2V9aC5ub3N0cmV0Y2g9IShoLnN0cmV0Y2h8fGguc3RyZXRjaG1heCk7aWYoZS5wYXJhbGxlbFNpemVNb2RlbC5zaHJpbmtXcmFwKXtiLmNlbnRlcj1iLmVuZD1mYWxzZX1kLmNhY2hlRmxleGVzKGUpO2lmKEV4dC5pc1dlYktpdCl7ZC50YXJnZXRFbC5zZXRXaWR0aCgyMDAwMCl9fSxjYWNoZUZsZXhlczpmdW5jdGlvbihrKXt2YXIgdT10aGlzLGw9ay5ib3hOYW1lcyxhPWwud2lkdGhNb2RlbCxkPWwuaGVpZ2h0TW9kZWwsYz1rLmJveE9wdGlvbnMuYWxpZ24ubm9zdHJldGNoLG89MCxiPWsuY2hpbGRJdGVtcyxxPWIubGVuZ3RoLHM9W10sbT0wLGo9bC5taW5XaWR0aCxnPXUuX3BlcmNlbnRhZ2VSZSxyPTAsdD0wLGUsbixwLGg7d2hpbGUocS0tKXtuPWJbcV07ZT1uLnRhcmdldDtpZihuW2FdLmNhbGN1bGF0ZWQpe24uZmxleD1wPWUuZmxleDtpZihwKXtvKz1wO3MucHVzaChuKTttKz1lW2pdfHwwfWVsc2V7aD1nLmV4ZWMoZVtsLndpZHRoXSk7bi5wZXJjZW50YWdlUGFyYWxsZWw9cGFyc2VGbG9hdChoWzFdKS8xMDA7KytyfX1pZihjJiZuW2RdLmNhbGN1bGF0ZWQpe2g9Zy5leGVjKGVbbC5oZWlnaHRdKTtuLnBlcmNlbnRhZ2VQZXJwZW5kaWN1bGFyPXBhcnNlRmxvYXQoaFsxXSkvMTAwOysrdH19ay5mbGV4ZWRJdGVtcz1zO2suZmxleGVkTWluU2l6ZT1tO2sudG90YWxGbGV4PW87ay5wZXJjZW50YWdlV2lkdGhzPXI7ay5wZXJjZW50YWdlSGVpZ2h0cz10O0V4dC5BcnJheS5zb3J0KHMsdS5mbGV4U29ydEZuKX0sY2FsY3VsYXRlOmZ1bmN0aW9uKGQpe3ZhciBiPXRoaXMsYT1iLmdldENvbnRhaW5lclNpemUoZCksZz1kLmJveE5hbWVzLGM9ZC5zdGF0ZSxlPWMuYm94UGxhbnx8KGMuYm94UGxhbj17fSk7ZS50YXJnZXRTaXplPWE7aWYoIWQucGFyYWxsZWxTaXplTW9kZWwuc2hyaW5rV3JhcCYmIWFbZy5nb3RXaWR0aF0pe2IuZG9uZT1mYWxzZTtyZXR1cm59aWYoIWMucGFyYWxsZWxEb25lKXtjLnBhcmFsbGVsRG9uZT1iLmNhbGN1bGF0ZVBhcmFsbGVsKGQsZyxlKX1pZighYy5wZXJwZW5kaWN1bGFyRG9uZSl7Yy5wZXJwZW5kaWN1bGFyRG9uZT1iLmNhbGN1bGF0ZVBlcnBlbmRpY3VsYXIoZCxnLGUpfWlmKGMucGFyYWxsZWxEb25lJiZjLnBlcnBlbmRpY3VsYXJEb25lKXtpZihiLm93bmVyLmRvY2smJihFeHQuaXNJRTZ8fEV4dC5pc0lFN3x8RXh0LmlzSUVRdWlya3MpJiYhYi5vd25lci53aWR0aCYmIWIuaG9yaXpvbnRhbCl7ZS5pc0lFVmVydGljYWxEb2NrPXRydWU7ZS5jYWxjdWxhdGVkV2lkdGg9ZS5tYXhTaXplK2QuZ2V0UGFkZGluZ0luZm8oKS53aWR0aCtkLmdldEZyYW1lSW5mbygpLndpZHRofWIucHVibGlzaElubmVyQ3RTaXplKGQsYi5yZXNlcnZlT2Zmc2V0P2IuYXZhaWxhYmxlU3BhY2VPZmZzZXQ6MCk7aWYoYi5kb25lJiZkLmNoaWxkSXRlbXMubGVuZ3RoPjEmJmQuYm94T3B0aW9ucy5hbGlnbi5zdHJldGNobWF4JiYhYy5zdHJldGNoTWF4RG9uZSl7Yi5jYWxjdWxhdGVTdHJldGNoTWF4KGQsZyxlKTtjLnN0cmV0Y2hNYXhEb25lPXRydWV9fWVsc2V7Yi5kb25lPWZhbHNlfX0sY2FsY3VsYXRlUGFyYWxsZWw6ZnVuY3Rpb24oayxuLGIpe3ZhciBGPXRoaXMsej1uLndpZHRoLGE9ay5jaGlsZEl0ZW1zLGQ9bi5sZWZ0LHI9bi5yaWdodCxxPW4uc2V0V2lkdGgsQT1hLmxlbmd0aCx4PWsuZmxleGVkSXRlbXMscz14Lmxlbmd0aCx2PWsuYm94T3B0aW9ucy5wYWNrLG09Ri5wYWRkaW5nLGg9Yi50YXJnZXRTaXplW3pdLEI9MCxlPW1bZF0sRT1lK21bcl0rRi5zY3JvbGxPZmZzZXQrKEYucmVzZXJ2ZU9mZnNldD9GLmF2YWlsYWJsZVNwYWNlT2Zmc2V0OjApLHc9RXh0LmdldFNjcm9sbGJhclNpemUoKVtuLndpZHRoXSx1LGwsZyx5LG8sdCxELHAsQyxjLGo7aWYodyYmRi5zY3JvbGxQZXJwZW5kaWN1bGFyJiZrLnBhcmFsbGVsU2l6ZU1vZGVsLnNocmlua1dyYXAmJiFrLmJveE9wdGlvbnMuYWxpZ24uc3RyZXRjaCYmIWsucGVycGVuZGljdWxhclNpemVNb2RlbC5zaHJpbmtXcmFwKXtpZighay5zdGF0ZS5wZXJwZW5kaWN1bGFyRG9uZSl7cmV0dXJuIGZhbHNlfUM9dHJ1ZX1mb3IodT0wO3U8QTsrK3Upe289YVt1XTtsPW8ubWFyZ2luSW5mb3x8by5nZXRNYXJnaW5JbmZvKCk7Qis9bFt6XTtpZighb1tuLndpZHRoTW9kZWxdLmNhbGN1bGF0ZWQpe2M9by5nZXRQcm9wKHopO0UrPWM7aWYoaXNOYU4oRSkpe3JldHVybiBmYWxzZX19fUUrPUI7aWYoay5wZXJjZW50YWdlV2lkdGhzKXtqPWgtQjtpZihpc05hTihqKSl7cmV0dXJuIGZhbHNlfWZvcih1PTA7dTxBOysrdSl7bz1hW3VdO2lmKG8ucGVyY2VudGFnZVBhcmFsbGVsKXtjPU1hdGguY2VpbChqKm8ucGVyY2VudGFnZVBhcmFsbGVsKTtjPW8uc2V0V2lkdGgoYyk7RSs9Y319fWlmKGsucGFyYWxsZWxTaXplTW9kZWwuc2hyaW5rV3JhcCl7Yi5hdmFpbGFibGVTcGFjZT0wO2IudG9vTmFycm93PWZhbHNlfWVsc2V7Yi5hdmFpbGFibGVTcGFjZT1oLUU7Yi50b29OYXJyb3c9Yi5hdmFpbGFibGVTcGFjZTxrLmZsZXhlZE1pblNpemU7aWYoYi50b29OYXJyb3cmJkV4dC5nZXRTY3JvbGxiYXJTaXplKClbbi5oZWlnaHRdJiZGLnNjcm9sbFBhcmFsbGVsJiZrLnN0YXRlLnBlcnBlbmRpY3VsYXJEb25lKXtrLnN0YXRlLnBlcnBlbmRpY3VsYXJEb25lPWZhbHNlO2Zvcih1PTA7dTxBOysrdSl7YVt1XS5pbnZhbGlkYXRlKCl9fX1wPUU7Zz1iLmF2YWlsYWJsZVNwYWNlO3k9ay50b3RhbEZsZXg7Zm9yKHU9MDt1PHM7dSsrKXtvPXhbdV07dD1vLmZsZXg7RD1GLnJvdW5kRmxleCgodC95KSpnKTtEPW9bcV0oRCk7cCs9RDtnPU1hdGgubWF4KDAsZy1EKTt5LT10fWlmKHYuY2VudGVyKXtlKz1nLzI7aWYoZTwwKXtlPTB9fWVsc2V7aWYodi5lbmQpe2UrPWd9fWZvcih1PTA7dTxBOysrdSl7bz1hW3VdO2w9by5tYXJnaW5JbmZvO2UrPWxbZF07by5zZXRQcm9wKG4ueCxlKTtlKz1sW3JdK28ucHJvcHNbel19cCs9ay50YXJnZXRDb250ZXh0LmdldFBhZGRpbmdJbmZvKClbel07ay5zdGF0ZS5jb250ZW50V2lkdGg9cDtpZihDJiYoay5wZWVrKG4uY29udGVudEhlaWdodCk+Yi50YXJnZXRTaXplW24uaGVpZ2h0XSkpe3ArPXc7a1tuLmhhc092ZXJmbG93WV09dHJ1ZTtrLnRhcmdldC5jb21wb25lbnRMYXlvdXRbbi5zZXRXaWR0aEluRG9tXT10cnVlO2tbbi5pbnZhbGlkYXRlU2Nyb2xsWV09KEV4dC5pc1N0cmljdCYmRXh0LmlzSUU4KX1rW24uc2V0Q29udGVudFdpZHRoXShwKTtyZXR1cm4gdHJ1ZX0sY2FsY3VsYXRlUGVycGVuZGljdWxhcjpmdW5jdGlvbihyLHYsYyl7dmFyIEc9dGhpcyxhPXIucGVycGVuZGljdWxhclNpemVNb2RlbC5zaHJpbmtXcmFwLGQ9Yy50YXJnZXRTaXplLGI9ci5jaGlsZEl0ZW1zLEU9Yi5sZW5ndGgsSj1NYXRoLm1heCxIPXYuaGVpZ2h0LG09di5zZXRIZWlnaHQscD12LnRvcCxGPXYueSx1PUcucGFkZGluZyx3PXVbcF0saD1kW0hdLXctdVt2LmJvdHRvbV0sQj1yLmJveE9wdGlvbnMuYWxpZ24sbz1CLnN0cmV0Y2gsej1CLnN0cmV0Y2htYXgsbj1CLmNlbnRlcixBPTAsZz0wLGw9RXh0LmdldFNjcm9sbGJhclNpemUoKS5oZWlnaHQsSSxDLGUsdCxzLHkseCxrLGoscSxEO2lmKG98fChuJiYhYSkpe2lmKGlzTmFOKGgpKXtyZXR1cm4gZmFsc2V9fWlmKEcuc2Nyb2xsUGFyYWxsZWwmJmMudG9vTmFycm93KXtpZihhKXtxPXRydWV9ZWxzZXtoLT1sO2MudGFyZ2V0U2l6ZVtIXS09bH19aWYobyl7eT1ofWVsc2V7Zm9yKEM9MDtDPEU7QysrKXt4PWJbQ107dD0oeC5tYXJnaW5JbmZvfHx4LmdldE1hcmdpbkluZm8oKSlbSF07aWYoIShEPXgucGVyY2VudGFnZVBlcnBlbmRpY3VsYXIpKXtlPXguZ2V0UHJvcChIKX1lbHNleysrZztpZihhKXtjb250aW51ZX1lbHNle2U9RCpoLXQ7ZT14W3Yuc2V0SGVpZ2h0XShlKX19aWYoaXNOYU4oQT1KKEEsZSt0LHgudGFyZ2V0W3YubWluSGVpZ2h0XXx8MCkpKXtyZXR1cm4gZmFsc2V9fWlmKHEpe0ErPWw7clt2Lmhhc092ZXJmbG93WF09dHJ1ZTtyLnRhcmdldC5jb21wb25lbnRMYXlvdXRbdi5zZXRIZWlnaHRJbkRvbV09dHJ1ZTtyW3YuaW52YWxpZGF0ZVNjcm9sbFhdPShFeHQuaXNTdHJpY3QmJkV4dC5pc0lFOCl9az1yLnN0cmV0Y2hNYXhQYXJ0bmVyO2lmKGspe3Iuc2V0UHJvcCgibWF4Q2hpbGRIZWlnaHQiLEEpO2o9ay5jaGlsZEl0ZW1zO2lmKGomJmoubGVuZ3RoKXtBPUooQSxrLmdldFByb3AoIm1heENoaWxkSGVpZ2h0IikpO2lmKGlzTmFOKEEpKXtyZXR1cm4gZmFsc2V9fX1yW3Yuc2V0Q29udGVudEhlaWdodF0oQStHLnBhZGRpbmdbSF0rci50YXJnZXRDb250ZXh0LmdldFBhZGRpbmdJbmZvKClbSF0pO2lmKHEpe0EtPWx9Yy5tYXhTaXplPUE7aWYoeil7eT1BfWVsc2V7aWYobnx8Zyl7eT1hP0E6SihoLEEpO3ktPXIuaW5uZXJDdENvbnRleHQuZ2V0Qm9yZGVySW5mbygpW0hdfX19Zm9yKEM9MDtDPEU7QysrKXt4PWJbQ107dD14Lm1hcmdpbkluZm98fHguZ2V0TWFyZ2luSW5mbygpO0k9dyt0W3BdO2lmKG8pe3hbbV0oeS10W0hdKX1lbHNle0Q9eC5wZXJjZW50YWdlUGVycGVuZGljdWxhcjtpZihhJiZEKXt0PXgubWFyZ2luSW5mb3x8eC5nZXRNYXJnaW5JbmZvKCk7ZT1EKnktdFtIXTtlPXguc2V0SGVpZ2h0KGUpfWlmKG4pe3M9eS14LnByb3BzW0hdO2lmKHM+MCl7ST13K01hdGgucm91bmQocy8yKX19fXguc2V0UHJvcChGLEkpfXJldHVybiB0cnVlfSxjYWxjdWxhdGVTdHJldGNoTWF4OmZ1bmN0aW9uKGQsayxtKXt2YXIgbD10aGlzLGg9ay5oZWlnaHQsbj1rLndpZHRoLGc9ZC5jaGlsZEl0ZW1zLGI9Zy5sZW5ndGgsbz1tLm1heFNpemUsYT1sLm9uQmVmb3JlSW52YWxpZGF0ZUNoaWxkLHE9bC5vbkFmdGVySW52YWxpZGF0ZUNoaWxkLHAsaixlLGM7Zm9yKGU9MDtlPGI7KytlKXtwPWdbZV07aj1wLnByb3BzO2M9by1wLmdldE1hcmdpbkluZm8oKVtoXTtpZihjIT1qW2hdfHxwW2suaGVpZ2h0TW9kZWxdLmNvbnN0cmFpbmVkKXtwLmludmFsaWRhdGUoe2JlZm9yZTphLGFmdGVyOnEsbGF5b3V0OmwsY2hpbGRXaWR0aDpqW25dLGNoaWxkSGVpZ2h0OmMsY2hpbGRYOmoueCxjaGlsZFk6ai55LG5hbWVzOmt9KX19fSxjb21wbGV0ZUxheW91dDpmdW5jdGlvbihiKXt2YXIgaj10aGlzLGk9Yi5ib3hOYW1lcyxoPWIuaW52YWxpZGF0ZVNjcm9sbFgsZz1iLmludmFsaWRhdGVTY3JvbGxZLGQsYSxlLGMsaztqLm92ZXJmbG93SGFuZGxlci5jb21wbGV0ZUxheW91dChiKTtpZihofHxnKXthPWouZ2V0VGFyZ2V0KCk7ZD1hLmRvbTtrPWQuc3R5bGU7aWYoaCl7ZT1hLmdldFN0eWxlKCJvdmVyZmxvd1giKTtpZihlPT0iYXV0byIpe2U9ay5vdmVyZmxvd1g7ay5vdmVyZmxvd1g9InNjcm9sbCJ9ZWxzZXtoPWZhbHNlfX1pZihnKXtjPWEuZ2V0U3R5bGUoIm92ZXJmbG93WSIpO2lmKGM9PSJhdXRvIil7Yz1rLm92ZXJmbG93WTtrLm92ZXJmbG93WT0ic2Nyb2xsIn1lbHNle2c9ZmFsc2V9fWlmKGh8fGcpe2Quc2Nyb2xsV2lkdGg7aWYoaCl7ay5vdmVyZmxvd1g9ZX1pZihnKXtrLm92ZXJmbG93WT1jfX19aWYoai5zY3JvbGxQYXJhbGxlbCl7ai5vd25lci5nZXRUYXJnZXRFbCgpLmRvbVtpLnNjcm9sbExlZnRdPWouc2Nyb2xsUG9zfX0sZmluaXNoZWRMYXlvdXQ6ZnVuY3Rpb24oYSl7dGhpcy5vdmVyZmxvd0hhbmRsZXIuZmluaXNoZWRMYXlvdXQoYSk7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoRXh0LmlzV2ViS2l0KXt0aGlzLnRhcmdldEVsLnNldFdpZHRoKGEuaW5uZXJDdENvbnRleHQucHJvcHMud2lkdGgpfX0sb25CZWZvcmVJbnZhbGlkYXRlQ2hpbGQ6ZnVuY3Rpb24oYixhKXt2YXIgYz1hLm5hbWVzLmhlaWdodE1vZGVsO2lmKCFiW2NdLmNvbnN0cmFpbmVkTWF4KXtiW2NdPUV4dC5sYXlvdXQuU2l6ZU1vZGVsLmNhbGN1bGF0ZWR9fSxvbkFmdGVySW52YWxpZGF0ZUNoaWxkOmZ1bmN0aW9uKGQsYyl7dmFyIGc9Yy5uYW1lcyxlPUV4dC5nZXRTY3JvbGxiYXJTaXplKCksYT1jLmNoaWxkSGVpZ2h0LGI9Yy5jaGlsZFdpZHRoO2Quc2V0UHJvcCgieCIsYy5jaGlsZFgpO2Quc2V0UHJvcCgieSIsYy5jaGlsZFkpO2lmKGRbZy5oZWlnaHRNb2RlbF0uY2FsY3VsYXRlZCl7ZFtnLnNldEhlaWdodF0oYSl9aWYoZFtnLndpZHRoTW9kZWxdLmNhbGN1bGF0ZWQpe2RbZy5zZXRXaWR0aF0oYil9fSxwdWJsaXNoSW5uZXJDdFNpemU6ZnVuY3Rpb24oYSxkKXt2YXIgaT10aGlzLGg9YS5ib3hOYW1lcyxnPWguaGVpZ2h0LGs9aC53aWR0aCxlPWEuYm94T3B0aW9ucy5hbGlnbixvPWkub3duZXIuZG9jayxsPWkucGFkZGluZyxqPWEuc3RhdGUuYm94UGxhbixjPWoudGFyZ2V0U2l6ZSxuPWNbZ10scD1hLmlubmVyQ3RDb250ZXh0LGI9KGEucGFyYWxsZWxTaXplTW9kZWwuc2hyaW5rV3JhcHx8KGoudG9vTmFycm93JiZpLnNjcm9sbFBhcmFsbGVsKT9hLnN0YXRlLmNvbnRlbnRXaWR0aDpjW2tdKS0oZHx8MCksbTtpZihlLnN0cmV0Y2gpe209bn1lbHNle209ai5tYXhTaXplK2xbaC50b3BdK2xbaC5ib3R0b21dK3AuZ2V0Qm9yZGVySW5mbygpW2ddO2lmKCFhLnBlcnBlbmRpY3VsYXJTaXplTW9kZWwuc2hyaW5rV3JhcCYmZS5jZW50ZXIpe209TWF0aC5tYXgobixtKX19cFtoLnNldFdpZHRoXShiKTtwW2guc2V0SGVpZ2h0XShtKTtpZihpc05hTihiK20pKXtpLmRvbmU9ZmFsc2V9aWYoai5jYWxjdWxhdGVkV2lkdGgmJihvPT0ibGVmdCJ8fG89PSJyaWdodCIpKXthLnNldFdpZHRoKGouY2FsY3VsYXRlZFdpZHRoLHRydWUsdHJ1ZSl9fSxvblJlbW92ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2IuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGIub3ZlcmZsb3dIYW5kbGVyKXtiLm92ZXJmbG93SGFuZGxlci5vblJlbW92ZShhKX1pZihhLmxheW91dE1hcmdpbkNhcD09Yi5pZCl7ZGVsZXRlIGEubGF5b3V0TWFyZ2luQ2FwfX0saW5pdE92ZXJmbG93SGFuZGxlcjpmdW5jdGlvbigpe3ZhciBkPXRoaXMsYz1kLm92ZXJmbG93SGFuZGxlcixiLGE7aWYodHlwZW9mIGM9PSJzdHJpbmciKXtjPXt0eXBlOmN9fWI9Ik5vbmUiO2lmKGMmJmMudHlwZSE9PXVuZGVmaW5lZCl7Yj1jLnR5cGV9YT1FeHQubGF5b3V0LmNvbnRhaW5lci5ib3hPdmVyZmxvd1tiXTtpZihhW2QudHlwZV0pe2E9YVtkLnR5cGVdfWQub3ZlcmZsb3dIYW5kbGVyPUV4dC5jcmVhdGUoIkV4dC5sYXlvdXQuY29udGFpbmVyLmJveE92ZXJmbG93LiIrYixkLGMpfSxnZXRSZW5kZXJUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YXJnZXRFbH0sZ2V0RWxlbWVudFRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlubmVyQ3R9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuZGVzdHJveSh0aGlzLmlubmVyQ3QsdGhpcy5vdmVyZmxvd0hhbmRsZXIpO3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfX0pO0V4dC5kZWZpbmUoIkV4dC5sYXlvdXQuY29udGFpbmVyLkhCb3giLHthbGlhczpbImxheW91dC5oYm94Il0sZXh0ZW5kOiJFeHQubGF5b3V0LmNvbnRhaW5lci5Cb3giLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmxheW91dC5IQm94TGF5b3V0IixhbGlnbjoidG9wIix0eXBlOiJoYm94IixkaXJlY3Rpb246Imhvcml6b250YWwiLGhvcml6b250YWw6dHJ1ZSxuYW1lczp7bHI6ImxyIixsZWZ0OiJsZWZ0IixsZWZ0Q2FwOiJMZWZ0IixyaWdodDoicmlnaHQiLHBvc2l0aW9uOiJsZWZ0Iix3aWR0aDoid2lkdGgiLGNvbnRlbnRXaWR0aDoiY29udGVudFdpZHRoIixtaW5XaWR0aDoibWluV2lkdGgiLG1heFdpZHRoOiJtYXhXaWR0aCIsd2lkdGhDYXA6IldpZHRoIix3aWR0aE1vZGVsOiJ3aWR0aE1vZGVsIix3aWR0aEluZGV4OjAseDoieCIsc2Nyb2xsTGVmdDoic2Nyb2xsTGVmdCIsb3ZlcmZsb3dYOiJvdmVyZmxvd1giLGhhc092ZXJmbG93WDoiaGFzT3ZlcmZsb3dYIixpbnZhbGlkYXRlU2Nyb2xsWDoiaW52YWxpZGF0ZVNjcm9sbFgiLGNlbnRlcjoibWlkZGxlIix0b3A6InRvcCIsdG9wUG9zaXRpb246InRvcCIsYm90dG9tOiJib3R0b20iLGhlaWdodDoiaGVpZ2h0Iixjb250ZW50SGVpZ2h0OiJjb250ZW50SGVpZ2h0IixtaW5IZWlnaHQ6Im1pbkhlaWdodCIsbWF4SGVpZ2h0OiJtYXhIZWlnaHQiLGhlaWdodENhcDoiSGVpZ2h0IixoZWlnaHRNb2RlbDoiaGVpZ2h0TW9kZWwiLGhlaWdodEluZGV4OjEseToieSIsc2Nyb2xsVG9wOiJzY3JvbGxUb3AiLG92ZXJmbG93WToib3ZlcmZsb3dZIixoYXNPdmVyZmxvd1k6Imhhc092ZXJmbG93WSIsaW52YWxpZGF0ZVNjcm9sbFk6ImludmFsaWRhdGVTY3JvbGxZIixnZXRXaWR0aDoiZ2V0V2lkdGgiLGdldEhlaWdodDoiZ2V0SGVpZ2h0IixzZXRXaWR0aDoic2V0V2lkdGgiLHNldEhlaWdodDoic2V0SGVpZ2h0Iixnb3RXaWR0aDoiZ290V2lkdGgiLGdvdEhlaWdodDoiZ290SGVpZ2h0IixzZXRDb250ZW50V2lkdGg6InNldENvbnRlbnRXaWR0aCIsc2V0Q29udGVudEhlaWdodDoic2V0Q29udGVudEhlaWdodCIsc2V0V2lkdGhJbkRvbToic2V0V2lkdGhJbkRvbSIsc2V0SGVpZ2h0SW5Eb206InNldEhlaWdodEluRG9tIn0sc2l6ZVBvbGljeTp7ZmxleDp7IiI6e3NldHNXaWR0aDoxLHNldHNIZWlnaHQ6MH0sc3RyZXRjaDp7c2V0c1dpZHRoOjEsc2V0c0hlaWdodDoxfSxzdHJldGNobWF4OntyZWFkc0hlaWdodDoxLHNldHNXaWR0aDoxLHNldHNIZWlnaHQ6MX19LCIiOntzZXRzV2lkdGg6MCxzZXRzSGVpZ2h0OjB9LHN0cmV0Y2g6e3NldHNXaWR0aDowLHNldHNIZWlnaHQ6MX0sc3RyZXRjaG1heDp7cmVhZHNIZWlnaHQ6MSxzZXRzV2lkdGg6MCxzZXRzSGVpZ2h0OjF9fX0pO0V4dC5kZWZpbmUoIkV4dC5sYXlvdXQuY29udGFpbmVyLlZCb3giLHthbGlhczpbImxheW91dC52Ym94Il0sZXh0ZW5kOiJFeHQubGF5b3V0LmNvbnRhaW5lci5Cb3giLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmxheW91dC5WQm94TGF5b3V0IixhbGlnbjoibGVmdCIsdHlwZToidmJveCIsZGlyZWN0aW9uOiJ2ZXJ0aWNhbCIsaG9yaXpvbnRhbDpmYWxzZSxuYW1lczp7bHI6InRiIixsZWZ0OiJ0b3AiLGxlZnRDYXA6IlRvcCIscmlnaHQ6ImJvdHRvbSIscG9zaXRpb246InRvcCIsd2lkdGg6ImhlaWdodCIsY29udGVudFdpZHRoOiJjb250ZW50SGVpZ2h0IixtaW5XaWR0aDoibWluSGVpZ2h0IixtYXhXaWR0aDoibWF4SGVpZ2h0Iix3aWR0aENhcDoiSGVpZ2h0Iix3aWR0aE1vZGVsOiJoZWlnaHRNb2RlbCIsd2lkdGhJbmRleDoxLHg6InkiLHNjcm9sbExlZnQ6InNjcm9sbFRvcCIsb3ZlcmZsb3dYOiJvdmVyZmxvd1kiLGhhc092ZXJmbG93WDoiaGFzT3ZlcmZsb3dZIixpbnZhbGlkYXRlU2Nyb2xsWDoiaW52YWxpZGF0ZVNjcm9sbFkiLGNlbnRlcjoiY2VudGVyIix0b3A6ImxlZnQiLHRvcFBvc2l0aW9uOiJsZWZ0Iixib3R0b206InJpZ2h0IixoZWlnaHQ6IndpZHRoIixjb250ZW50SGVpZ2h0OiJjb250ZW50V2lkdGgiLG1pbkhlaWdodDoibWluV2lkdGgiLG1heEhlaWdodDoibWF4V2lkdGgiLGhlaWdodENhcDoiV2lkdGgiLGhlaWdodE1vZGVsOiJ3aWR0aE1vZGVsIixoZWlnaHRJbmRleDowLHk6IngiLHNjcm9sbFRvcDoic2Nyb2xsTGVmdCIsb3ZlcmZsb3dZOiJvdmVyZmxvd1giLGhhc092ZXJmbG93WToiaGFzT3ZlcmZsb3dYIixpbnZhbGlkYXRlU2Nyb2xsWToiaW52YWxpZGF0ZVNjcm9sbFgiLGdldFdpZHRoOiJnZXRIZWlnaHQiLGdldEhlaWdodDoiZ2V0V2lkdGgiLHNldFdpZHRoOiJzZXRIZWlnaHQiLHNldEhlaWdodDoic2V0V2lkdGgiLGdvdFdpZHRoOiJnb3RIZWlnaHQiLGdvdEhlaWdodDoiZ290V2lkdGgiLHNldENvbnRlbnRXaWR0aDoic2V0Q29udGVudEhlaWdodCIsc2V0Q29udGVudEhlaWdodDoic2V0Q29udGVudFdpZHRoIixzZXRXaWR0aEluRG9tOiJzZXRIZWlnaHRJbkRvbSIsc2V0SGVpZ2h0SW5Eb206InNldFdpZHRoSW5Eb20ifSxzaXplUG9saWN5OntmbGV4OnsiIjp7c2V0c1dpZHRoOjAsc2V0c0hlaWdodDoxfSxzdHJldGNoOntzZXRzV2lkdGg6MSxzZXRzSGVpZ2h0OjF9LHN0cmV0Y2htYXg6e3JlYWRzV2lkdGg6MSxzZXRzV2lkdGg6MSxzZXRzSGVpZ2h0OjF9fSwiIjp7c2V0c1dpZHRoOjAsc2V0c0hlaWdodDowfSxzdHJldGNoOntzZXRzV2lkdGg6MSxzZXRzSGVpZ2h0OjB9LHN0cmV0Y2htYXg6e3JlYWRzV2lkdGg6MSxzZXRzV2lkdGg6MSxzZXRzSGVpZ2h0OjB9fX0pO0V4dC5kZWZpbmUoIkV4dC50b29sYmFyLlRvb2xiYXIiLHtleHRlbmQ6IkV4dC5jb250YWluZXIuQ29udGFpbmVyIixyZXF1aXJlczpbIkV4dC50b29sYmFyLkZpbGwiLCJFeHQubGF5b3V0LmNvbnRhaW5lci5IQm94IiwiRXh0LmxheW91dC5jb250YWluZXIuVkJveCJdLHVzZXM6WyJFeHQudG9vbGJhci5TZXBhcmF0b3IiXSxhbGlhczoid2lkZ2V0LnRvb2xiYXIiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LlRvb2xiYXIiLGlzVG9vbGJhcjp0cnVlLGJhc2VDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInRvb2xiYXIiLGFyaWFSb2xlOiJ0b29sYmFyIixkZWZhdWx0VHlwZToiYnV0dG9uIix2ZXJ0aWNhbDpmYWxzZSxlbmFibGVPdmVyZmxvdzpmYWxzZSxtZW51VHJpZ2dlckNsczpFeHQuYmFzZUNTU1ByZWZpeCsidG9vbGJhci1tb3JlLWljb24iLHRyYWNrTWVudXM6dHJ1ZSxpdGVtQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ0b29sYmFyLWl0ZW0iLHN0YXRpY3M6e3Nob3J0Y3V0czp7Ii0iOiJ0YnNlcGFyYXRvciIsIiAiOiJ0YnNwYWNlciJ9LHNob3J0Y3V0c0hWOnswOnsiLT4iOnt4dHlwZToidGJmaWxsIixoZWlnaHQ6MH19LDE6eyItPiI6e3h0eXBlOiJ0YmZpbGwiLHdpZHRoOjB9fX19LGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE7aWYoIWIubGF5b3V0JiZiLmVuYWJsZU92ZXJmbG93KXtiLmxheW91dD17b3ZlcmZsb3dIYW5kbGVyOiJNZW51In19aWYoYi5kb2NrPT09InJpZ2h0Inx8Yi5kb2NrPT09ImxlZnQiKXtiLnZlcnRpY2FsPXRydWV9Yi5sYXlvdXQ9RXh0LmFwcGx5SWYoRXh0LmlzU3RyaW5nKGIubGF5b3V0KT97dHlwZTpiLmxheW91dH06Yi5sYXlvdXR8fHt9LHt0eXBlOmIudmVydGljYWw/InZib3giOiJoYm94IixhbGlnbjpiLnZlcnRpY2FsPyJzdHJldGNobWF4IjoibWlkZGxlIn0pO2lmKGIudmVydGljYWwpe2IuYWRkQ2xzV2l0aFVJKCJ2ZXJ0aWNhbCIpfWlmKGIudWk9PT0iZm9vdGVyIil7Yi5pZ25vcmVCb3JkZXJNYW5hZ2VtZW50PXRydWV9Yi5jYWxsUGFyZW50KCk7Yi5hZGRFdmVudHMoIm92ZXJmbG93Y2hhbmdlIil9LGdldFJlZkl0ZW1zOmZ1bmN0aW9uKGEpe3ZhciBlPXRoaXMsYj1lLmNhbGxQYXJlbnQoYXJndW1lbnRzKSxkPWUubGF5b3V0LGM7aWYoYSYmZS5lbmFibGVPdmVyZmxvdyl7Yz1kLm92ZXJmbG93SGFuZGxlcjtpZihjJiZjLm1lbnUpe2I9Yi5jb25jYXQoYy5tZW51LmdldFJlZkl0ZW1zKGEpKX19cmV0dXJuIGJ9LGxvb2t1cENvbXBvbmVudDpmdW5jdGlvbihkKXtpZih0eXBlb2YgZD09InN0cmluZyIpe3ZhciBiPUV4dC50b29sYmFyLlRvb2xiYXIsYT1iLnNob3J0Y3V0c0hWW3RoaXMudmVydGljYWw/MTowXVtkXXx8Yi5zaG9ydGN1dHNbZF07aWYodHlwZW9mIGE9PSJzdHJpbmciKXtkPXt4dHlwZTphfX1lbHNle2lmKGEpe2Q9RXh0LmFwcGx5KHt9LGEpfWVsc2V7ZD17eHR5cGU6InRidGV4dCIsdGV4dDpkfX19dGhpcy5hcHBseURlZmF1bHRzKGQpfXJldHVybiB0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sYXBwbHlEZWZhdWx0czpmdW5jdGlvbihhKXtpZighRXh0LmlzU3RyaW5nKGEpKXthPXRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfXJldHVybiBhfSx0cmFja01lbnU6ZnVuY3Rpb24oYyxhKXtpZih0aGlzLnRyYWNrTWVudXMmJmMubWVudSl7dmFyIGQ9YT8ibXVuIjoibW9uIixiPXRoaXM7YltkXShjLCJtb3VzZW92ZXIiLGIub25CdXR0b25PdmVyLGIpO2JbZF0oYywibWVudXNob3ciLGIub25CdXR0b25NZW51U2hvdyxiKTtiW2RdKGMsIm1lbnVoaWRlIixiLm9uQnV0dG9uTWVudUhpZGUsYil9fSxjb25zdHJ1Y3RCdXR0b246ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZXZlbnRzP2E6RXh0LndpZGdldChhLnNwbGl0PyJzcGxpdGJ1dHRvbiI6dGhpcy5kZWZhdWx0VHlwZSxhKX0sb25CZWZvcmVBZGQ6ZnVuY3Rpb24oYSl7aWYoYS5pcygiZmllbGQiKXx8KGEuaXMoImJ1dHRvbiIpJiZ0aGlzLnVpIT0iZm9vdGVyIikpe2EudWk9YS51aSsiLXRvb2xiYXIifWlmKGEgaW5zdGFuY2VvZiBFeHQudG9vbGJhci5TZXBhcmF0b3Ipe2Euc2V0VUkoKHRoaXMudmVydGljYWwpPyJ2ZXJ0aWNhbCI6Imhvcml6b250YWwiKX10aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sb25BZGQ6ZnVuY3Rpb24oYSl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy50cmFja01lbnUoYSl9LG9uUmVtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3RoaXMudHJhY2tNZW51KGEsdHJ1ZSl9LGdldENoaWxkSXRlbXNUb0Rpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVtcy5nZXRSYW5nZSgpfSxvbkJ1dHRvbk92ZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5hY3RpdmVNZW51QnRuJiZ0aGlzLmFjdGl2ZU1lbnVCdG4hPWEpe3RoaXMuYWN0aXZlTWVudUJ0bi5oaWRlTWVudSgpO2Euc2hvd01lbnUoKTt0aGlzLmFjdGl2ZU1lbnVCdG49YX19LG9uQnV0dG9uTWVudVNob3c6ZnVuY3Rpb24oYSl7dGhpcy5hY3RpdmVNZW51QnRuPWF9LG9uQnV0dG9uTWVudUhpZGU6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuYWN0aXZlTWVudUJ0bn19KTtFeHQuZGVmaW5lKCJFeHQuY29udGFpbmVyLkRvY2tpbmdDb250YWluZXIiLHtyZXF1aXJlczpbIkV4dC51dGlsLk1peGVkQ29sbGVjdGlvbiIsIkV4dC5FbGVtZW50Il0saXNEb2NraW5nQ29udGFpbmVyOnRydWUsZGVmYXVsdERvY2tXZWlnaHRzOnt0b3A6e3JlbmRlcjoxLHZpc3VhbDoxfSxsZWZ0OntyZW5kZXI6Myx2aXN1YWw6NX0scmlnaHQ6e3JlbmRlcjo1LHZpc3VhbDo3fSxib3R0b206e3JlbmRlcjo3LHZpc3VhbDozfX0sZG9ja09yZGVyOnt0b3A6LTEsbGVmdDotMSxyaWdodDoxLGJvdHRvbToxfSxhZGREb2NrZWQ6ZnVuY3Rpb24oYSxnKXt2YXIgZT10aGlzLGI9MCxkLGM7YT1lLnByZXBhcmVJdGVtcyhhKTtjPWEubGVuZ3RoO2Zvcig7YjxjO2IrKyl7ZD1hW2JdO2QuZG9jaz1kLmRvY2t8fCJ0b3AiO2lmKGchPT11bmRlZmluZWQpe2UuZG9ja2VkSXRlbXMuaW5zZXJ0KGcrYixkKX1lbHNle2UuZG9ja2VkSXRlbXMuYWRkKGQpfWlmKGQub25BZGRlZCE9PUV4dC5lbXB0eUZuKXtkLm9uQWRkZWQoZSxiKX1pZihlLm9uRG9ja2VkQWRkIT09RXh0LmVtcHR5Rm4pe2Uub25Eb2NrZWRBZGQoZCl9fWlmKGUucmVuZGVyZWQmJiFlLnN1c3BlbmRMYXlvdXQpe2UudXBkYXRlTGF5b3V0KCl9cmV0dXJuIGF9LGRlc3Ryb3lEb2NrZWRJdGVtczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZG9ja2VkSXRlbXMsYjtpZihhKXt3aGlsZSgoYj1hLmZpcnN0KCkpKXt0aGlzLnJlbW92ZURvY2tlZChiLHRydWUpfX19LGRvUmVuZGVyRG9ja2VkSXRlbXM6ZnVuY3Rpb24oYyxnLGgpe3ZhciBlPWcuJGNvbXAsZD1lLmNvbXBvbmVudExheW91dCxiLGE7aWYoZC5nZXREb2NrZWRJdGVtcyYmIWcuJHNraXBEb2NrZWRJdGVtcyl7Yj1kLmdldERvY2tlZEl0ZW1zKCJyZW5kZXIiLCFoKTthPWImJmQuZ2V0SXRlbXNSZW5kZXJUcmVlKGIpO2lmKGEpe0V4dC5Eb21IZWxwZXIuZ2VuZXJhdGVNYXJrdXAoYSxjKX19fSxnZXREb2NrZWRDb21wb25lbnQ6ZnVuY3Rpb24oYSl7aWYoRXh0LmlzT2JqZWN0KGEpKXthPWEuZ2V0SXRlbUlkKCl9cmV0dXJuIHRoaXMuZG9ja2VkSXRlbXMuZ2V0KGEpfSxnZXREb2NrZWRJdGVtczpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXMuZ2V0Q29tcG9uZW50TGF5b3V0KCkuZ2V0RG9ja2VkSXRlbXMoInJlbmRlciIsYyk7aWYoYSYmYi5sZW5ndGgpe2I9RXh0LkNvbXBvbmVudFF1ZXJ5LnF1ZXJ5KGEsYil9cmV0dXJuIGJ9LGdldERvY2tpbmdSZWZJdGVtczpmdW5jdGlvbihiLGUpe3ZhciBhPWImJiIqLCogKiIsZD10aGlzLmdldERvY2tlZEl0ZW1zKGEsdHJ1ZSksYztkLnB1c2guYXBwbHkoZCxlKTtjPXRoaXMuZ2V0RG9ja2VkSXRlbXMoYSxmYWxzZSk7ZC5wdXNoLmFwcGx5KGQsYyk7cmV0dXJuIGR9LGluaXREb2NraW5nSXRlbXM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5kb2NrZWRJdGVtcztiLmRvY2tlZEl0ZW1zPW5ldyBFeHQudXRpbC5BYnN0cmFjdE1peGVkQ29sbGVjdGlvbihmYWxzZSxiLmdldENvbXBvbmVudElkKTtpZihhKXtiLmFkZERvY2tlZChhKX19LGluc2VydERvY2tlZDpmdW5jdGlvbihiLGEpe3RoaXMuYWRkRG9ja2VkKGEsYil9LG9uRG9ja2VkQWRkOkV4dC5lbXB0eUZuLG9uRG9ja2VkUmVtb3ZlOkV4dC5lbXB0eUZuLHJlbW92ZURvY2tlZDpmdW5jdGlvbihlLGIpe3ZhciBkPXRoaXMsYyxhO2lmKCFkLmRvY2tlZEl0ZW1zLmNvbnRhaW5zKGUpKXtyZXR1cm4gZX1jPWQuY29tcG9uZW50TGF5b3V0O2E9YyYmZC5yZW5kZXJlZDtpZihhKXtjLm9uUmVtb3ZlKGUpfWQuZG9ja2VkSXRlbXMucmVtb3ZlKGUpO2Uub25SZW1vdmVkKCk7ZC5vbkRvY2tlZFJlbW92ZShlKTtpZihiPT09dHJ1ZXx8KGIhPT1mYWxzZSYmZC5hdXRvRGVzdHJveSkpe2UuZGVzdHJveSgpfWVsc2V7aWYoYSl7Yy5hZnRlclJlbW92ZShlKX19aWYoIWQuZGVzdHJveWluZyYmIWQuc3VzcGVuZExheW91dCl7ZC51cGRhdGVMYXlvdXQoKX1yZXR1cm4gZX0sc2V0dXBEb2NraW5nUmVuZGVyVHBsOmZ1bmN0aW9uKGEpe2EucmVuZGVyRG9ja2VkSXRlbXM9dGhpcy5kb1JlbmRlckRvY2tlZEl0ZW1zfX0pO0V4dC5kZWZpbmUoIkV4dC5wYW5lbC5BYnN0cmFjdFBhbmVsIix7ZXh0ZW5kOiJFeHQuY29udGFpbmVyLkNvbnRhaW5lciIsbWl4aW5zOntkb2NraW5nOiJFeHQuY29udGFpbmVyLkRvY2tpbmdDb250YWluZXIifSxyZXF1aXJlczpbIkV4dC51dGlsLk1peGVkQ29sbGVjdGlvbiIsIkV4dC5FbGVtZW50IiwiRXh0LnRvb2xiYXIuVG9vbGJhciJdLGJhc2VDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInBhbmVsIixpc1BhbmVsOnRydWUsY29tcG9uZW50TGF5b3V0OiJkb2NrIixjaGlsZEVsczpbImJvZHkiXSxyZW5kZXJUcGw6WyJ7JSB0aGlzLnJlbmRlckRvY2tlZEl0ZW1zKG91dCx2YWx1ZXMsMCk7ICV9IiwoRXh0LmlzSUU2fHxFeHQuaXNJRTd8fEV4dC5pc0lFUXVpcmtzKT8iPGRpdj48L2Rpdj4iOiIiLCc8ZGl2IGlkPSJ7aWR9LWJvZHkiIGNsYXNzPSJ7YmFzZUNsc30tYm9keTx0cGwgaWY9ImJvZHlDbHMiPiB7Ym9keUNsc308L3RwbD4nLCcge2Jhc2VDbHN9LWJvZHkte3VpfTx0cGwgaWY9InVpQ2xzIj4nLCc8dHBsIGZvcj0idWlDbHMiPiB7cGFyZW50LmJhc2VDbHN9LWJvZHkte3BhcmVudC51aX0tey59PC90cGw+JywnPC90cGw+Ijx0cGwgaWY9ImJvZHlTdHlsZSI+IHN0eWxlPSJ7Ym9keVN0eWxlfSI8L3RwbD4+JywieyV0aGlzLnJlbmRlckNvbnRhaW5lcihvdXQsdmFsdWVzKTslfSIsIjwvZGl2PiIsInslIHRoaXMucmVuZGVyRG9ja2VkSXRlbXMob3V0LHZhbHVlcywxKTsgJX0iXSxib2R5UG9zUHJvcHM6e3g6IngiLHk6InkifSxib3JkZXI6dHJ1ZSxlbXB0eUFycmF5OltdLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuZnJhbWUmJmEuYm9yZGVyJiZhLmJvZHlCb3JkZXI9PT11bmRlZmluZWQpe2EuYm9keUJvcmRlcj1mYWxzZX1pZihhLmZyYW1lJiZhLmJvcmRlciYmKGEuYm9keUJvcmRlcj09PWZhbHNlfHxhLmJvZHlCb3JkZXI9PT0wKSl7YS5tYW5hZ2VCb2R5Qm9yZGVycz10cnVlfWEuY2FsbFBhcmVudCgpfSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5kZXN0cm95RG9ja2VkSXRlbXMoKTt0aGlzLmNhbGxQYXJlbnQoKX0saW5pdEl0ZW1zOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KCk7dGhpcy5pbml0RG9ja2luZ0l0ZW1zKCl9LGluaXRSZW5kZXJEYXRhOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY2FsbFBhcmVudCgpO2EuaW5pdEJvZHlTdHlsZXMoKTthLnByb3RvQm9keS53cml0ZVRvKGIpO2RlbGV0ZSBhLnByb3RvQm9keTtyZXR1cm4gYn0sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGI9PT11bmRlZmluZWQmJiFFeHQuaXNOdW1iZXIoYSkpe2I9dGhpcy5nZXREb2NrZWRDb21wb25lbnQoYSl9cmV0dXJuIGJ9LGdldFByb3RvQm9keTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLnByb3RvQm9keTtpZighYSl7Yi5wcm90b0JvZHk9YT1uZXcgRXh0LnV0aWwuUHJvdG9FbGVtZW50KHtjbHM6Yi5ib2R5Q2xzLHN0eWxlOmIuYm9keVN0eWxlLGNsc1Byb3A6ImJvZHlDbHMiLHN0eWxlUHJvcDoiYm9keVN0eWxlIixzdHlsZUlzVGV4dDp0cnVlfSl9cmV0dXJuIGF9LGluaXRCb2R5U3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxhPWMuZ2V0UHJvdG9Cb2R5KCksYj1FeHQuRWxlbWVudDtpZihjLmJvZHlQYWRkaW5nIT09dW5kZWZpbmVkKXthLnNldFN0eWxlKCJwYWRkaW5nIixiLnVuaXRpemVCb3goKGMuYm9keVBhZGRpbmc9PT10cnVlKT81OmMuYm9keVBhZGRpbmcpKX1pZihjLmZyYW1lJiZjLmJvZHlCb3JkZXIpe2lmKCFFeHQuaXNOdW1iZXIoYy5ib2R5Qm9yZGVyKSl7Yy5ib2R5Qm9yZGVyPTF9YS5zZXRTdHlsZSgiYm9yZGVyLXdpZHRoIixiLnVuaXRpemVCb3goYy5ib2R5Qm9yZGVyKSl9fSxnZXRDb2xsYXBzZWREb2NrZWRJdGVtczpmdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIGEuY29sbGFwc2VNb2RlPT0icGxhY2Vob2xkZXIiP2EuZW1wdHlBcnJheTpbYS5nZXRSZUV4cGFuZGVyKCldfSxzZXRCb2R5U3R5bGU6ZnVuY3Rpb24oYixkKXt2YXIgYz10aGlzLGE9Yy5yZW5kZXJlZD9jLmJvZHk6Yy5nZXRQcm90b0JvZHkoKTtpZihFeHQuaXNGdW5jdGlvbihiKSl7Yj1iKCl9aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7aWYoRXh0LmlzU3RyaW5nKGIpKXtiPUV4dC5FbGVtZW50LnBhcnNlU3R5bGVzKGIpfWEuc2V0U3R5bGUoYil9ZWxzZXthLnNldFN0eWxlKGIsZCl9cmV0dXJuIGN9LGFkZEJvZHlDbHM6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxhPWMucmVuZGVyZWQ/Yy5ib2R5OmMuZ2V0UHJvdG9Cb2R5KCk7YS5hZGRDbHMoYik7cmV0dXJuIGN9LHJlbW92ZUJvZHlDbHM6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxhPWMucmVuZGVyZWQ/Yy5ib2R5OmMuZ2V0UHJvdG9Cb2R5KCk7YS5yZW1vdmVDbHMoYik7cmV0dXJuIGN9LGFkZFVJQ2xzVG9FbGVtZW50OmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMsYT1jLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtjLmFkZEJvZHlDbHMoW0V4dC5iYXNlQ1NTUHJlZml4K2IsYy5iYXNlQ2xzKyItYm9keS0iK2IsYy5iYXNlQ2xzKyItYm9keS0iK2MudWkrIi0iK2JdKTtyZXR1cm4gYX0scmVtb3ZlVUlDbHNGcm9tRWxlbWVudDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLGE9Yy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7Yy5yZW1vdmVCb2R5Q2xzKFtFeHQuYmFzZUNTU1ByZWZpeCtiLGMuYmFzZUNscysiLWJvZHktIitiLGMuYmFzZUNscysiLWJvZHktIitjLnVpKyItIitiXSk7cmV0dXJuIGF9LGFkZFVJVG9FbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLmFkZEJvZHlDbHMoYS5iYXNlQ2xzKyItYm9keS0iK2EudWkpfSxyZW1vdmVVSUZyb21FbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLnJlbW92ZUJvZHlDbHMoYS5iYXNlQ2xzKyItYm9keS0iK2EudWkpfSxnZXRUYXJnZXRFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHl9LGdldFJlZkl0ZW1zOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3JldHVybiB0aGlzLmdldERvY2tpbmdSZWZJdGVtcyhhLGIpfSxzZXR1cFJlbmRlclRwbDpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLnNldHVwRG9ja2luZ1JlbmRlclRwbChhKX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbXBvbmVudC5Cb2R5Iix7YWxpYXM6WyJsYXlvdXQuYm9keSJdLGV4dGVuZDoiRXh0LmxheW91dC5jb21wb25lbnQuQXV0byIsdHlwZToiYm9keSIsYmVnaW5MYXlvdXQ6ZnVuY3Rpb24oYSl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YS5ib2R5Q29udGV4dD1hLmdldEVsKCJib2R5Iil9LGNhbGN1bGF0ZU93bmVySGVpZ2h0RnJvbUNvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oYyxiKXt2YXIgYT10aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihjLnRhcmdldENvbnRleHQhPWMpe2ErPWMuZ2V0UGFkZGluZ0luZm8oKS5oZWlnaHR9cmV0dXJuIGF9LGNhbGN1bGF0ZU93bmVyV2lkdGhGcm9tQ29udGVudFdpZHRoOmZ1bmN0aW9uKGMsYSl7dmFyIGI9dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYy50YXJnZXRDb250ZXh0IT1jKXtiKz1jLmdldFBhZGRpbmdJbmZvKCkud2lkdGh9cmV0dXJuIGJ9LG1lYXN1cmVDb250ZW50V2lkdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuYm9keUNvbnRleHQuc2V0V2lkdGgoYS5ib2R5Q29udGV4dC5lbC5kb20ub2Zmc2V0V2lkdGgsZmFsc2UpfSxtZWFzdXJlQ29udGVudEhlaWdodDpmdW5jdGlvbihhKXtyZXR1cm4gYS5ib2R5Q29udGV4dC5zZXRIZWlnaHQoYS5ib2R5Q29udGV4dC5lbC5kb20ub2Zmc2V0SGVpZ2h0LGZhbHNlKX0scHVibGlzaElubmVySGVpZ2h0OmZ1bmN0aW9uKGMsYSl7dmFyIGQ9YS1jLmdldEZyYW1lSW5mbygpLmhlaWdodCxiPWMudGFyZ2V0Q29udGV4dDtpZihiIT1jKXtkLT1jLmdldFBhZGRpbmdJbmZvKCkuaGVpZ2h0fXJldHVybiBjLmJvZHlDb250ZXh0LnNldEhlaWdodChkLCFjLmhlaWdodE1vZGVsLm5hdHVyYWwpfSxwdWJsaXNoSW5uZXJXaWR0aDpmdW5jdGlvbihkLGMpe3ZhciBhPWMtZC5nZXRGcmFtZUluZm8oKS53aWR0aCxiPWQudGFyZ2V0Q29udGV4dDtpZihiIT1kKXthLT1kLmdldFBhZGRpbmdJbmZvKCkud2lkdGh9ZC5ib2R5Q29udGV4dC5zZXRXaWR0aChhLCFkLndpZHRoTW9kZWwubmF0dXJhbCl9fSk7RXh0LmRlZmluZSgiRXh0LnBhbmVsLkhlYWRlciIse2V4dGVuZDoiRXh0LmNvbnRhaW5lci5Db250YWluZXIiLHVzZXM6WyJFeHQucGFuZWwuVG9vbCIsIkV4dC5kcmF3LkNvbXBvbmVudCIsIkV4dC51dGlsLkNTUyIsIkV4dC5sYXlvdXQuY29tcG9uZW50LkJvZHkiLCJFeHQuSW1nIl0sYWxpYXM6IndpZGdldC5oZWFkZXIiLGlzSGVhZGVyOnRydWUsZGVmYXVsdFR5cGU6InRvb2wiLGluZGljYXRlRHJhZzpmYWxzZSx3ZWlnaHQ6LTEsY29tcG9uZW50TGF5b3V0OiJib2R5Iix0aXRsZUFsaWduOiJsZWZ0IixjaGlsZEVsczpbImJvZHkiXSxyZW5kZXJUcGw6Wyc8ZGl2IGlkPSJ7aWR9LWJvZHkiIGNsYXNzPSJ7YmFzZUNsc30tYm9keSB7Ym9keUNsc30nLCc8dHBsIGZvcj0idWlDbHMiPiB7cGFyZW50LmJhc2VDbHN9LWJvZHkte3BhcmVudC51aX0tey59PC90cGw+IicsJzx0cGwgaWY9ImJvZHlTdHlsZSI+IHN0eWxlPSJ7Ym9keVN0eWxlfSI8L3RwbD4+JywieyV0aGlzLnJlbmRlckNvbnRhaW5lcihvdXQsdmFsdWVzKSV9IiwiPC9kaXY+Il0saGVhZGluZ1RwbDonPHNwYW4gaWQ9IntpZH0tdGV4dEVsIiBjbGFzcz0ie2Nsc30tdGV4dCB7Y2xzfS10ZXh0LXt1aX0iPnt0aXRsZX08L3NwYW4+JyxzaHJpbmtXcmFwOjMsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsZSxkLGEsYyxnO2IuYWRkRXZlbnRzKCJjbGljayIsImRibGNsaWNrIik7Yi5pbmRpY2F0ZURyYWdDbHM9Yi5iYXNlQ2xzKyItZHJhZ2dhYmxlIjtiLnRpdGxlPWIudGl0bGV8fCImIzE2MDsiO2IudG9vbHM9Yi50b29sc3x8W107Yi5pdGVtcz1iLml0ZW1zfHxbXTtiLm9yaWVudGF0aW9uPWIub3JpZW50YXRpb258fCJob3Jpem9udGFsIjtiLmRvY2s9KGIuZG9jayk/Yi5kb2NrOihiLm9yaWVudGF0aW9uPT0iaG9yaXpvbnRhbCIpPyJ0b3AiOiJsZWZ0IjtiLmFkZENsc1dpdGhVSShbYi5vcmllbnRhdGlvbixiLmRvY2tdKTtpZihiLmluZGljYXRlRHJhZyl7Yi5hZGRDbHMoYi5pbmRpY2F0ZURyYWdDbHMpfWlmKCFFeHQuaXNFbXB0eShiLmljb25DbHMpfHwhRXh0LmlzRW1wdHkoYi5pY29uKSl7Yi5pbml0SWNvbkNtcCgpO2IuaXRlbXMucHVzaChiLmljb25DbXApfWlmKGIub3JpZW50YXRpb249PSJ2ZXJ0aWNhbCIpe2IubGF5b3V0PXt0eXBlOiJ2Ym94IixhbGlnbjoiY2VudGVyIn07Yi50ZXh0Q29uZmlnPXt3aWR0aDoxNixjbHM6Yi5iYXNlQ2xzKyItdGV4dCIsdHlwZToidGV4dCIsdGV4dDpiLnRpdGxlLHJvdGF0ZTp7ZGVncmVlczo5MH19O2M9Yi51aTtpZihFeHQuaXNBcnJheShjKSl7Yz1jWzBdfWU9Ii4iK2IuYmFzZUNscysiLXRleHQtIitjO2lmKEV4dC5zY29wZVJlc2V0Q1NTKXtlPSIuIitFeHQuYmFzZUNTU1ByZWZpeCsicmVzZXQgIitlfWQ9RXh0LnV0aWwuQ1NTLmdldFJ1bGUoZSk7aWYoZCl7YT1kLnN0eWxlfWVsc2V7YT0oZz1FeHQucmVzZXRFbGVtZW50LmNyZWF0ZUNoaWxkKHtzdHlsZToicG9zaXRpb246YWJzb2x1dGUiLGNsczpiLmJhc2VDbHMrIi10ZXh0LSIrY30pKS5nZXRTdHlsZXMoImZvbnRGYW1pbHkiLCJmb250V2VpZ2h0IiwiZm9udFNpemUiLCJjb2xvciIpO2cucmVtb3ZlKCl9aWYoYSl7RXh0LmFwcGx5KGIudGV4dENvbmZpZyx7ImZvbnQtZmFtaWx5IjphLmZvbnRGYW1pbHksImZvbnQtd2VpZ2h0IjphLmZvbnRXZWlnaHQsImZvbnQtc2l6ZSI6YS5mb250U2l6ZSxmaWxsOmEuY29sb3J9KX1iLnRpdGxlQ21wPW5ldyBFeHQuZHJhdy5Db21wb25lbnQoe3dpZHRoOjE2LGFyaWFSb2xlOiJoZWFkaW5nIixmb2N1c2FibGU6ZmFsc2Usdmlld0JveDpmYWxzZSxmbGV4OjEsaWQ6Yi5pZCsiX2hkIixhdXRvU2l6ZTp0cnVlLGl0ZW1zOmIudGV4dENvbmZpZyx4aG9va3M6e3NldFNpemU6ZnVuY3Rpb24oaCl7dGhpcy5jYWxsUGFyZW50KFtoXSl9fSxjaGlsZEVsczpbe25hbWU6InRleHRFbCIsc2VsZWN0OiIuIitiLmJhc2VDbHMrIi10ZXh0In1dfSl9ZWxzZXtiLmxheW91dD17dHlwZToiaGJveCIsYWxpZ246Im1pZGRsZSJ9O2IudGl0bGVDbXA9bmV3IEV4dC5Db21wb25lbnQoe2FyaWFSb2xlOiJoZWFkaW5nIixmb2N1c2FibGU6ZmFsc2Usbm9XcmFwOnRydWUsZmxleDoxLGlkOmIuaWQrIl9oZCIsc3R5bGU6InRleHQtYWxpZ246IitiLnRpdGxlQWxpZ24sY2xzOmIuYmFzZUNscysiLXRleHQtY29udGFpbmVyIixyZW5kZXJUcGw6Yi5nZXRUcGwoImhlYWRpbmdUcGwiKSxyZW5kZXJEYXRhOnt0aXRsZTpiLnRpdGxlLGNsczpiLmJhc2VDbHMsdWk6Yi51aX0sY2hpbGRFbHM6WyJ0ZXh0RWwiXX0pfWIuaXRlbXMucHVzaChiLnRpdGxlQ21wKTtiLml0ZW1zPWIuaXRlbXMuY29uY2F0KGIudG9vbHMpO2IuY2FsbFBhcmVudCgpO2Iub24oe2RibGNsaWNrOmIub25EYmxDbGljayxjbGljazpiLm9uQ2xpY2ssZWxlbWVudDoiZWwiLHNjb3BlOmJ9KX0saW5pdEljb25DbXA6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9e2ZvY3VzYWJsZTpmYWxzZSxzcmM6RXh0LkJMQU5LX0lNQUdFX1VSTCxjbHM6W2IuYmFzZUNscysiLWljb24iLGIuaWNvbkNsc10saWQ6Yi5pZCsiLWljb25FbCIsaWNvbkNsczpiLmljb25DbHN9O2lmKCFFeHQuaXNFbXB0eShiLmljb24pKXtkZWxldGUgYS5pY29uQ2xzO2Euc3JjPWIuaWNvbn1iLmljb25DbXA9bmV3IEV4dC5JbWcoYSl9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5lbC51bnNlbGVjdGFibGUoKTt0aGlzLmNhbGxQYXJlbnQoKX0sYWRkVUlDbHNUb0VsZW1lbnQ6ZnVuY3Rpb24oYil7dmFyIGU9dGhpcyxhPWUuY2FsbFBhcmVudChhcmd1bWVudHMpLGQ9W2UuYmFzZUNscysiLWJvZHktIitiLGUuYmFzZUNscysiLWJvZHktIitlLnVpKyItIitiXSxnLGM7aWYoZS5ib2R5Q2xzKXtnPWUuYm9keUNscy5zcGxpdCgiICIpO2ZvcihjPTA7YzxkLmxlbmd0aDtjKyspe2lmKCFFeHQuQXJyYXkuY29udGFpbnMoZyxkW2NdKSl7Zy5wdXNoKGRbY10pfX1lLmJvZHlDbHM9Zy5qb2luKCIgIil9ZWxzZXtlLmJvZHlDbHM9ZC5qb2luKCIgIil9cmV0dXJuIGF9LHJlbW92ZVVJQ2xzRnJvbUVsZW1lbnQ6ZnVuY3Rpb24oYil7dmFyIGU9dGhpcyxhPWUuY2FsbFBhcmVudChhcmd1bWVudHMpLGQ9W2UuYmFzZUNscysiLWJvZHktIitiLGUuYmFzZUNscysiLWJvZHktIitlLnVpKyItIitiXSxnLGM7aWYoZS5ib2R5Q2xzKXtnPWUuYm9keUNscy5zcGxpdCgiICIpO2ZvcihjPTA7YzxkLmxlbmd0aDtjKyspe0V4dC5BcnJheS5yZW1vdmUoZyxkW2NdKX1lLmJvZHlDbHM9Zy5qb2luKCIgIil9cmV0dXJuIGF9LGFkZFVJVG9FbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjLGE7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YT1iLmJhc2VDbHMrIi1ib2R5LSIrYi51aTtpZihiLnJlbmRlcmVkKXtpZihiLmJvZHlDbHMpe2IuYm9keS5hZGRDbHMoYi5ib2R5Q2xzKX1lbHNle2IuYm9keS5hZGRDbHMoYSl9fWVsc2V7aWYoYi5ib2R5Q2xzKXtjPWIuYm9keUNscy5zcGxpdCgiICIpO2lmKCFFeHQuQXJyYXkuY29udGFpbnMoYyxhKSl7Yy5wdXNoKGEpfWIuYm9keUNscz1jLmpvaW4oIiAiKX1lbHNle2IuYm9keUNscz1hfX1pZihiLnRpdGxlQ21wJiZiLnRpdGxlQ21wLnJlbmRlcmVkJiZiLnRpdGxlQ21wLnRleHRFbCl7Yi50aXRsZUNtcC50ZXh0RWwuYWRkQ2xzKGIuYmFzZUNscysiLXRleHQtIitiLnVpKX19LHJlbW92ZVVJRnJvbUVsZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGMsYTtiLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthPWIuYmFzZUNscysiLWJvZHktIitiLnVpO2lmKGIucmVuZGVyZWQpe2lmKGIuYm9keUNscyl7Yi5ib2R5LnJlbW92ZUNscyhiLmJvZHlDbHMpfWVsc2V7Yi5ib2R5LnJlbW92ZUNscyhhKX19ZWxzZXtpZihiLmJvZHlDbHMpe2M9Yi5ib2R5Q2xzLnNwbGl0KCIgIik7RXh0LkFycmF5LnJlbW92ZShjLGEpO2IuYm9keUNscz1jLmpvaW4oIiAiKX1lbHNle2IuYm9keUNscz1hfX1pZihiLnRpdGxlQ21wJiZiLnRpdGxlQ21wLnJlbmRlcmVkJiZiLnRpdGxlQ21wLnRleHRFbCl7Yi50aXRsZUNtcC50ZXh0RWwucmVtb3ZlQ2xzKGIuYmFzZUNscysiLXRleHQtIitiLnVpKX19LG9uQ2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5maXJlQ2xpY2tFdmVudCgiY2xpY2siLGEpfSxvbkRibENsaWNrOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUNsaWNrRXZlbnQoImRibGNsaWNrIixhKX0sZmlyZUNsaWNrRXZlbnQ6ZnVuY3Rpb24oYSxjKXt2YXIgYj0iLiIrRXh0LnBhbmVsLlRvb2wucHJvdG90eXBlLmJhc2VDbHM7aWYoIWMuZ2V0VGFyZ2V0KGIpKXt0aGlzLmZpcmVFdmVudChhLHRoaXMsYyl9fSxnZXRGb2N1c0VsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWx9LGdldFRhcmdldEVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keXx8dGhpcy5mcmFtZUJvZHl8fHRoaXMuZWx9LHNldFRpdGxlOmZ1bmN0aW9uKGQpe3ZhciBjPXRoaXMsYixhO2lmKGMucmVuZGVyZWQpe2lmKGMudGl0bGVDbXAucmVuZGVyZWQpe2lmKGMudGl0bGVDbXAuc3VyZmFjZSl7Yy50aXRsZT1kfHwiIjtiPWMudGl0bGVDbXAuc3VyZmFjZS5pdGVtcy5pdGVtc1swXTthPWMudGl0bGVDbXAuc3VyZmFjZTthLnJlbW92ZShiKTtjLnRleHRDb25maWcudHlwZT0idGV4dCI7Yy50ZXh0Q29uZmlnLnRleHQ9ZDtiPWEuYWRkKGMudGV4dENvbmZpZyk7Yi5zZXRBdHRyaWJ1dGVzKHtyb3RhdGU6e2RlZ3JlZXM6OTB9fSx0cnVlKTtjLnRpdGxlQ21wLmF1dG9TaXplU3VyZmFjZSgpfWVsc2V7Yy50aXRsZT1kO2MudGl0bGVDbXAudGV4dEVsLnVwZGF0ZShjLnRpdGxlfHwiJiMxNjA7Iil9Yy50aXRsZUNtcC51cGRhdGVMYXlvdXQoKX1lbHNle2MudGl0bGVDbXAub24oe3JlbmRlcjpmdW5jdGlvbigpe2Muc2V0VGl0bGUoZCl9LHNpbmdsZTp0cnVlfSl9fWVsc2V7Yy50aXRsZT1kfX0sZ2V0TWluV2lkdGg6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGQ9ZS50aXRsZUNtcC50ZXh0RWwuZG9tLGEsZz1lLnRvb2xzLGIsYztkLnN0eWxlLmRpc3BsYXk9ImlubGluZSI7YT1kLm9mZnNldFdpZHRoO2Quc3R5bGUuZGlzcGxheT0iIjtpZihnJiYoYj1nLmxlbmd0aCkpe2ZvcihjPTA7YzxiO2MrKyl7aWYoZ1tjXS5lbCl7YSs9Z1tjXS5lbC5kb20ub2Zmc2V0V2lkdGh9fX1pZihlLmljb25DbXApe2ErPWUuaWNvbkNtcC5lbC5kb20ub2Zmc2V0V2lkdGh9cmV0dXJuIGErMTB9LHNldEljb25DbHM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxkPSFhfHwhYS5sZW5ndGgsYz1iLmljb25DbXA7Yi5pY29uQ2xzPWE7aWYoIWIuaWNvbkNtcCYmIWQpe2IuaW5pdEljb25DbXAoKTtiLmluc2VydCgwLGIuaWNvbkNtcCl9ZWxzZXtpZihjKXtpZihkKXtiLmljb25DbXAuZGVzdHJveSgpO2RlbGV0ZSBiLmljb25DbXB9ZWxzZXtjLnJlbW92ZUNscyhjLmljb25DbHMpO2MuYWRkQ2xzKGEpO2MuaWNvbkNscz1hfX19fSxzZXRJY29uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsZD0hYXx8IWEubGVuZ3RoLGM9Yi5pY29uQ21wO2IuaWNvbj1hO2lmKCFiLmljb25DbXAmJiFkKXtiLmluaXRJY29uQ21wKCk7Yi5pbnNlcnQoMCxiLmljb25DbXApfWVsc2V7aWYoYyl7aWYoZCl7Yi5pY29uQ21wLmRlc3Ryb3koKTtkZWxldGUgYi5pY29uQ21wfWVsc2V7Yy5zZXRTcmMoYi5pY29uKX19fX0sYWRkVG9vbDpmdW5jdGlvbihhKXt0aGlzLnRvb2xzLnB1c2godGhpcy5hZGQoYSkpfSxvbkFkZDpmdW5jdGlvbihiLGEpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGIgaW5zdGFuY2VvZiBFeHQucGFuZWwuVG9vbCl7Yi5iaW5kVG8odGhpcy5vd25lckN0KTt0aGlzLnRvb2xzW2IudHlwZV09Yn19LGluaXRSZW5kZXJEYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5hcHBseUlmKHRoaXMuY2FsbFBhcmVudCgpLHtib2R5Q2xzOnRoaXMuYm9keUNsc30pfX0pO0V4dC5kZWZpbmUoIkV4dC5meC50YXJnZXQuVGFyZ2V0Iix7aXNBbmltVGFyZ2V0OnRydWUsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dGhpcy50YXJnZXQ9YTt0aGlzLmlkPXRoaXMuZ2V0SWQoKX0sZ2V0SWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YXJnZXQuaWR9fSk7RXh0LmRlZmluZSgiRXh0LmZ4LnRhcmdldC5FbGVtZW50Iix7ZXh0ZW5kOiJFeHQuZngudGFyZ2V0LlRhcmdldCIsdHlwZToiZWxlbWVudCIsZ2V0RWxWYWw6ZnVuY3Rpb24oYixhLGMpe2lmKGM9PXVuZGVmaW5lZCl7aWYoYT09PSJ4Iil7Yz1iLmdldFgoKX1lbHNle2lmKGE9PT0ieSIpe2M9Yi5nZXRZKCl9ZWxzZXtpZihhPT09InNjcm9sbFRvcCIpe2M9Yi5nZXRTY3JvbGwoKS50b3B9ZWxzZXtpZihhPT09InNjcm9sbExlZnQiKXtjPWIuZ2V0U2Nyb2xsKCkubGVmdH1lbHNle2lmKGE9PT0iaGVpZ2h0Iil7Yz1iLmdldEhlaWdodCgpfWVsc2V7aWYoYT09PSJ3aWR0aCIpe2M9Yi5nZXRXaWR0aCgpfWVsc2V7Yz1iLmdldFN0eWxlKGEpfX19fX19fXJldHVybiBjfSxnZXRBdHRyOmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcy50YXJnZXQ7cmV0dXJuW1tiLHRoaXMuZ2V0RWxWYWwoYixhLGMpXV19LHNldEF0dHI6ZnVuY3Rpb24obCl7dmFyIGc9dGhpcy50YXJnZXQsaz1sLmxlbmd0aCxuLGgsYixlLGMsYSxkLG07Zm9yKGU9MDtlPGs7ZSsrKXtuPWxbZV0uYXR0cnM7Zm9yKGggaW4gbil7aWYobi5oYXNPd25Qcm9wZXJ0eShoKSl7YT1uW2hdLmxlbmd0aDtmb3IoYz0wO2M8YTtjKyspe2I9bltoXVtjXTtkPWJbMF07bT1iWzFdO2lmKGg9PT0ieCIpe2Quc2V0WChtKX1lbHNle2lmKGg9PT0ieSIpe2Quc2V0WShtKX1lbHNle2lmKGg9PT0ic2Nyb2xsVG9wIil7ZC5zY3JvbGxUbygidG9wIixtKX1lbHNle2lmKGg9PT0ic2Nyb2xsTGVmdCIpe2Quc2Nyb2xsVG8oImxlZnQiLG0pfWVsc2V7aWYoaD09PSJ3aWR0aCIpe2Quc2V0V2lkdGgobSl9ZWxzZXtpZihoPT09ImhlaWdodCIpe2Quc2V0SGVpZ2h0KG0pfWVsc2V7ZC5zZXRTdHlsZShoLG0pfX19fX19fX19fX19KTtFeHQuZGVmaW5lKCJFeHQuZngudGFyZ2V0LkVsZW1lbnRDU1MiLHtleHRlbmQ6IkV4dC5meC50YXJnZXQuRWxlbWVudCIsc2V0QXR0cjpmdW5jdGlvbihuLGUpe3ZhciBxPXthdHRyczpbXSxkdXJhdGlvbjpbXSxlYXNpbmc6W119LG09bi5sZW5ndGgsZyxwLGssbCxjLGIsaCxkLGE7Zm9yKGg9MDtoPG07aCsrKXtwPW5baF07Yz1wLmR1cmF0aW9uO2w9cC5lYXNpbmc7cD1wLmF0dHJzO2ZvcihrIGluIHApe2lmKEV4dC5BcnJheS5pbmRleE9mKHEuYXR0cnMsayk9PS0xKXtxLmF0dHJzLnB1c2goay5yZXBsYWNlKC9bQS1aXS9nLGZ1bmN0aW9uKGkpe3JldHVybiItIitpLnRvTG93ZXJDYXNlKCl9KSk7cS5kdXJhdGlvbi5wdXNoKGMrIm1zIik7cS5lYXNpbmcucHVzaChsKX19fWc9cS5hdHRycy5qb2luKCIsIik7Yz1xLmR1cmF0aW9uLmpvaW4oIiwiKTtsPXEuZWFzaW5nLmpvaW4oIiwgIik7Zm9yKGg9MDtoPG07aCsrKXtwPW5baF0uYXR0cnM7Zm9yKGsgaW4gcCl7YT1wW2tdLmxlbmd0aDtmb3IoZD0wO2Q8YTtkKyspe2I9cFtrXVtkXTtiWzBdLnNldFN0eWxlKEV4dC5zdXBwb3J0cy5DU1MzUHJlZml4KyJUcmFuc2l0aW9uUHJvcGVydHkiLGU/IiI6Zyk7YlswXS5zZXRTdHlsZShFeHQuc3VwcG9ydHMuQ1NTM1ByZWZpeCsiVHJhbnNpdGlvbkR1cmF0aW9uIixlPyIiOmMpO2JbMF0uc2V0U3R5bGUoRXh0LnN1cHBvcnRzLkNTUzNQcmVmaXgrIlRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbiIsZT8iIjpsKTtiWzBdLnNldFN0eWxlKGssYlsxXSk7aWYoZSl7Yj1iWzBdLmRvbS5vZmZzZXRXaWR0aH1lbHNle2JbMF0ub24oRXh0LnN1cHBvcnRzLkNTUzNUcmFuc2l0aW9uRW5kLGZ1bmN0aW9uKCl7dGhpcy5zZXRTdHlsZShFeHQuc3VwcG9ydHMuQ1NTM1ByZWZpeCsiVHJhbnNpdGlvblByb3BlcnR5IixudWxsKTt0aGlzLnNldFN0eWxlKEV4dC5zdXBwb3J0cy5DU1MzUHJlZml4KyJUcmFuc2l0aW9uRHVyYXRpb24iLG51bGwpO3RoaXMuc2V0U3R5bGUoRXh0LnN1cHBvcnRzLkNTUzNQcmVmaXgrIlRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbiIsbnVsbCl9LGJbMF0se3NpbmdsZTp0cnVlfSl9fX19fX0pO0V4dC5kZWZpbmUoIkV4dC5meC50YXJnZXQuQ29tcG9zaXRlRWxlbWVudCIse2V4dGVuZDoiRXh0LmZ4LnRhcmdldC5FbGVtZW50Iixpc0NvbXBvc2l0ZTp0cnVlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe2EuaWQ9YS5pZHx8RXh0LmlkKG51bGwsImV4dC1jb21wb3NpdGUtIik7dGhpcy5jYWxsUGFyZW50KFthXSl9LGdldEF0dHI6ZnVuY3Rpb24oYSxoKXt2YXIgYj1bXSxnPXRoaXMudGFyZ2V0LmVsZW1lbnRzLGU9Zy5sZW5ndGgsYyxkO2ZvcihjPTA7YzxlO2MrKyl7ZD1nW2NdO2lmKGQpe2Q9dGhpcy50YXJnZXQuZ2V0RWxlbWVudChkKTtiLnB1c2goW2QsdGhpcy5nZXRFbFZhbChkLGEsaCldKX19cmV0dXJuIGJ9fSk7RXh0LmRlZmluZSgiRXh0LmZ4LnRhcmdldC5Db21wb3NpdGVFbGVtZW50Q1NTIix7ZXh0ZW5kOiJFeHQuZngudGFyZ2V0LkNvbXBvc2l0ZUVsZW1lbnQiLHJlcXVpcmVzOlsiRXh0LmZ4LnRhcmdldC5FbGVtZW50Q1NTIl0sc2V0QXR0cjpmdW5jdGlvbigpe3JldHVybiBFeHQuZngudGFyZ2V0LkVsZW1lbnRDU1MucHJvdG90eXBlLnNldEF0dHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pO0V4dC5kZWZpbmUoIkV4dC5meC50YXJnZXQuU3ByaXRlIix7ZXh0ZW5kOiJFeHQuZngudGFyZ2V0LlRhcmdldCIsdHlwZToiZHJhdyIsZ2V0RnJvbVByaW06ZnVuY3Rpb24oYixhKXt2YXIgYztzd2l0Y2goYSl7Y2FzZSJyb3RhdGUiOmNhc2Uicm90YXRpb24iOmM9Yi5hdHRyLnJvdGF0aW9uO3JldHVybnt4OmMueHx8MCx5OmMueXx8MCxkZWdyZWVzOmMuZGVncmVlc3x8MH07Y2FzZSJzY2FsZSI6Y2FzZSJzY2FsaW5nIjpjPWIuYXR0ci5zY2FsaW5nO3JldHVybnt4OmMueHx8MSx5OmMueXx8MSxjeDpjLmN4fHwwLGN5OmMuY3l8fDB9O2Nhc2UidHJhbnNsYXRlIjpjYXNlInRyYW5zbGF0aW9uIjpjPWIuYXR0ci50cmFuc2xhdGlvbjtyZXR1cm57eDpjLnh8fDAseTpjLnl8fDB9O2RlZmF1bHQ6cmV0dXJuIGIuYXR0clthXX19LGdldEF0dHI6ZnVuY3Rpb24oYSxiKXtyZXR1cm5bW3RoaXMudGFyZ2V0LGIhPXVuZGVmaW5lZD9iOnRoaXMuZ2V0RnJvbVByaW0odGhpcy50YXJnZXQsYSldXX0sc2V0QXR0cjpmdW5jdGlvbihtKXt2YXIgZz1tLmxlbmd0aCxrPVtdLGIsZSxwLHIscSxvLG4sZCxjLGwsaCxhO2ZvcihkPTA7ZDxnO2QrKyl7Yj1tW2RdLmF0dHJzO2ZvcihlIGluIGIpe3A9YltlXTthPXAubGVuZ3RoO2ZvcihjPTA7YzxhO2MrKyl7cT1wW2NdWzBdO3I9cFtjXVsxXTtpZihlPT09InRyYW5zbGF0ZSJ8fGU9PT0idHJhbnNsYXRpb24iKXtuPXt4OnIueCx5OnIueX19ZWxzZXtpZihlPT09InJvdGF0ZSJ8fGU9PT0icm90YXRpb24iKXtsPXIueDtpZihpc05hTihsKSl7bD1udWxsfWg9ci55O2lmKGlzTmFOKGgpKXtoPW51bGx9bj17ZGVncmVlczpyLmRlZ3JlZXMseDpsLHk6aH19ZWxzZXtpZihlPT09InNjYWxlInx8ZT09PSJzY2FsaW5nIil7bD1yLng7aWYoaXNOYU4obCkpe2w9bnVsbH1oPXIueTtpZihpc05hTihoKSl7aD1udWxsfW49e3g6bCx5OmgsY3g6ci5jeCxjeTpyLmN5fX1lbHNle2lmKGU9PT0id2lkdGgifHxlPT09ImhlaWdodCJ8fGU9PT0ieCJ8fGU9PT0ieSIpe249cGFyc2VGbG9hdChyKX1lbHNle249cn19fX1vPUV4dC5BcnJheS5pbmRleE9mKGsscSk7aWYobz09LTEpe2sucHVzaChbcSx7fV0pO289ay5sZW5ndGgtMX1rW29dWzFdW2VdPW59fX1nPWsubGVuZ3RoO2ZvcihkPTA7ZDxnO2QrKyl7a1tkXVswXS5zZXRBdHRyaWJ1dGVzKGtbZF1bMV0pfXRoaXMudGFyZ2V0LnJlZHJhdygpfX0pO0V4dC5kZWZpbmUoIkV4dC5meC50YXJnZXQuQ29tcG9zaXRlU3ByaXRlIix7ZXh0ZW5kOiJFeHQuZngudGFyZ2V0LlNwcml0ZSIsZ2V0QXR0cjpmdW5jdGlvbihhLGgpe3ZhciBiPVtdLGc9W10uY29uY2F0KHRoaXMudGFyZ2V0Lml0ZW1zKSxlPWcubGVuZ3RoLGQsYztmb3IoZD0wO2Q8ZTtkKyspe2M9Z1tkXTtiLnB1c2goW2MsaCE9dW5kZWZpbmVkP2g6dGhpcy5nZXRGcm9tUHJpbShjLGEpXSl9cmV0dXJuIGJ9fSk7RXh0LmRlZmluZSgiRXh0LmZ4LnRhcmdldC5Db21wb25lbnQiLHtleHRlbmQ6IkV4dC5meC50YXJnZXQuVGFyZ2V0Iix0eXBlOiJjb21wb25lbnQiLGdldFByb3BNZXRob2Q6e3RvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFBvc2l0aW9uKHRydWUpWzFdfSxsZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UG9zaXRpb24odHJ1ZSlbMF19LHg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQb3NpdGlvbigpWzBdfSx5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UG9zaXRpb24oKVsxXX0saGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0SGVpZ2h0KCl9LHdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0V2lkdGgoKX0sb3BhY2l0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsLmdldFN0eWxlKCJvcGFjaXR5Iil9fSxjb21wTWV0aG9kOnt0b3A6InNldFBvc2l0aW9uIixsZWZ0OiJzZXRQb3NpdGlvbiIseDoic2V0UGFnZVBvc2l0aW9uIix5OiJzZXRQYWdlUG9zaXRpb24iLGhlaWdodDoic2V0U2l6ZSIsd2lkdGg6InNldFNpemUiLG9wYWNpdHk6InNldE9wYWNpdHkifSxnZXRBdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuW1t0aGlzLnRhcmdldCxiIT09dW5kZWZpbmVkP2I6dGhpcy5nZXRQcm9wTWV0aG9kW2FdLmNhbGwodGhpcy50YXJnZXQpXV19LHNldEF0dHI6ZnVuY3Rpb24odCxlLGIpe3ZhciByPXRoaXMsbT1yLnRhcmdldCxxPXQubGVuZ3RoLHYsbixhLGcsZCxwLGwsYyxzLHUsaztmb3IoZz0wO2c8cTtnKyspe3Y9dFtnXS5hdHRycztmb3IobiBpbiB2KXtsPXZbbl0ubGVuZ3RoO3A9e3NldFBvc2l0aW9uOnt9LHNldFBhZ2VQb3NpdGlvbjp7fSxzZXRTaXplOnt9LHNldE9wYWNpdHk6e319O2ZvcihkPTA7ZDxsO2QrKyl7YT12W25dW2RdO3Bbci5jb21wTWV0aG9kW25dXS50YXJnZXQ9YVswXTtwW3IuY29tcE1ldGhvZFtuXV1bbl09YVsxXX1pZihwLnNldFBvc2l0aW9uLnRhcmdldCl7YT1wLnNldFBvc2l0aW9uO2M9KGEubGVmdD09PXVuZGVmaW5lZCk/dW5kZWZpbmVkOnBhcnNlRmxvYXQoYS5sZWZ0KTtzPShhLnRvcD09PXVuZGVmaW5lZCk/dW5kZWZpbmVkOnBhcnNlRmxvYXQoYS50b3ApO2EudGFyZ2V0LnNldFBvc2l0aW9uKGMscyl9aWYocC5zZXRQYWdlUG9zaXRpb24udGFyZ2V0KXthPXAuc2V0UGFnZVBvc2l0aW9uO2EudGFyZ2V0LnNldFBhZ2VQb3NpdGlvbihhLngsYS55KX1pZihwLnNldFNpemUudGFyZ2V0KXthPXAuc2V0U2l6ZTt1PShhLndpZHRoPT09dW5kZWZpbmVkKT9hLnRhcmdldC5nZXRXaWR0aCgpOnBhcnNlRmxvYXQoYS53aWR0aCk7az0oYS5oZWlnaHQ9PT11bmRlZmluZWQpP2EudGFyZ2V0LmdldEhlaWdodCgpOnBhcnNlRmxvYXQoYS5oZWlnaHQpO2lmKGJ8fHIuZHluYW1pYyl7YS50YXJnZXQuc2V0U2l6ZSh1LGspfWVsc2V7YS50YXJnZXQuZWwuc2V0U2l6ZSh1LGspfX1pZihwLnNldE9wYWNpdHkudGFyZ2V0KXthPXAuc2V0T3BhY2l0eTthLnRhcmdldC5lbC5zZXRTdHlsZSgib3BhY2l0eSIsYS5vcGFjaXR5KX19fX19KTtFeHQuZGVmaW5lKCJFeHQuZnguUXVldWUiLHtyZXF1aXJlczpbIkV4dC51dGlsLkhhc2hNYXAiXSxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3RoaXMudGFyZ2V0cz1uZXcgRXh0LnV0aWwuSGFzaE1hcCgpO3RoaXMuZnhRdWV1ZT17fX0sZ2V0RnhEZWZhdWx0czpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnRhcmdldHMuZ2V0KGEpO2lmKGIpe3JldHVybiBiLmZ4RGVmYXVsdHN9cmV0dXJue319LHNldEZ4RGVmYXVsdHM6ZnVuY3Rpb24oYSxjKXt2YXIgYj10aGlzLnRhcmdldHMuZ2V0KGEpO2lmKGIpe2IuZnhEZWZhdWx0cz1FeHQuYXBwbHkoYi5meERlZmF1bHRzfHx7fSxjKX19LHN0b3BBbmltYXRpb246ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcyxhPWQuZ2V0RnhRdWV1ZShiKSxjPWEubGVuZ3RoO3doaWxlKGMpe2FbYy0xXS5lbmQoKTtjLS19fSxnZXRBY3RpdmVBbmltYXRpb246ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5nZXRGeFF1ZXVlKGIpO3JldHVybihhJiYhIWEubGVuZ3RoKT9hWzBdOmZhbHNlfSxoYXNGeEJsb2NrOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ2V0RnhRdWV1ZShiKTtyZXR1cm4gYSYmYVswXSYmYVswXS5ibG9ja30sZ2V0RnhRdWV1ZTpmdW5jdGlvbihiKXtpZighYil7cmV0dXJuIGZhbHNlfXZhciBjPXRoaXMsYT1jLmZ4UXVldWVbYl0sZD1jLnRhcmdldHMuZ2V0KGIpO2lmKCFkKXtyZXR1cm4gZmFsc2V9aWYoIWEpe2MuZnhRdWV1ZVtiXT1bXTtpZihkLnR5cGUhPSJlbGVtZW50Iil7ZC50YXJnZXQub24oImRlc3Ryb3kiLGZ1bmN0aW9uKCl7Yy5meFF1ZXVlW2JdPVtdfSl9fXJldHVybiBjLmZ4UXVldWVbYl19LHF1ZXVlRng6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcyxlPWQudGFyZ2V0LGEsYjtpZighZSl7cmV0dXJufWE9Yy5nZXRGeFF1ZXVlKGUuZ2V0SWQoKSk7Yj1hLmxlbmd0aDtpZihiKXtpZihkLmNvbmN1cnJlbnQpe2QucGF1c2VkPWZhbHNlfWVsc2V7YVtiLTFdLm9uKCJhZnRlcmFuaW1hdGUiLGZ1bmN0aW9uKCl7ZC5wYXVzZWQ9ZmFsc2V9KX19ZWxzZXtkLnBhdXNlZD1mYWxzZX1kLm9uKCJhZnRlcmFuaW1hdGUiLGZ1bmN0aW9uKCl7RXh0LkFycmF5LnJlbW92ZShhLGQpO2lmKGQucmVtb3ZlKXtpZihlLnR5cGU9PSJlbGVtZW50Iil7dmFyIGc9RXh0LmdldChlLmlkKTtpZihnKXtnLnJlbW92ZSgpfX19fSx0aGlzKTthLnB1c2goZCl9fSk7RXh0LmRlZmluZSgiRXh0LmZ4Lk1hbmFnZXIiLHtzaW5nbGV0b246dHJ1ZSxyZXF1aXJlczpbIkV4dC51dGlsLk1peGVkQ29sbGVjdGlvbiIsIkV4dC5meC50YXJnZXQuRWxlbWVudCIsIkV4dC5meC50YXJnZXQuRWxlbWVudENTUyIsIkV4dC5meC50YXJnZXQuQ29tcG9zaXRlRWxlbWVudCIsIkV4dC5meC50YXJnZXQuQ29tcG9zaXRlRWxlbWVudENTUyIsIkV4dC5meC50YXJnZXQuU3ByaXRlIiwiRXh0LmZ4LnRhcmdldC5Db21wb3NpdGVTcHJpdGUiLCJFeHQuZngudGFyZ2V0LkNvbXBvbmVudCJdLG1peGluczp7cXVldWU6IkV4dC5meC5RdWV1ZSJ9LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dGhpcy5pdGVtcz1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKCk7dGhpcy5taXhpbnMucXVldWUuY29uc3RydWN0b3IuY2FsbCh0aGlzKX0saW50ZXJ2YWw6MTYsZm9yY2VKUzp0cnVlLGNyZWF0ZVRhcmdldDpmdW5jdGlvbihkKXt2YXIgYj10aGlzLGM9IWIuZm9yY2VKUyYmRXh0LnN1cHBvcnRzLlRyYW5zaXRpb25zLGE7Yi51c2VDU1MzPWM7aWYoZCl7aWYoZC50YWdOYW1lfHxFeHQuaXNTdHJpbmcoZCl8fGQuaXNGbHkpe2Q9RXh0LmdldChkKTthPW5ldyBFeHQuZngudGFyZ2V0WyJFbGVtZW50IisoYz8iQ1NTIjoiIildKGQpfWVsc2V7aWYoZC5kb20pe2E9bmV3IEV4dC5meC50YXJnZXRbIkVsZW1lbnQiKyhjPyJDU1MiOiIiKV0oZCl9ZWxzZXtpZihkLmlzQ29tcG9zaXRlKXthPW5ldyBFeHQuZngudGFyZ2V0WyJDb21wb3NpdGVFbGVtZW50IisoYz8iQ1NTIjoiIildKGQpfWVsc2V7aWYoZC5pc1Nwcml0ZSl7YT1uZXcgRXh0LmZ4LnRhcmdldC5TcHJpdGUoZCl9ZWxzZXtpZihkLmlzQ29tcG9zaXRlU3ByaXRlKXthPW5ldyBFeHQuZngudGFyZ2V0LkNvbXBvc2l0ZVNwcml0ZShkKX1lbHNle2lmKGQuaXNDb21wb25lbnQpe2E9bmV3IEV4dC5meC50YXJnZXQuQ29tcG9uZW50KGQpfWVsc2V7aWYoZC5pc0FuaW1UYXJnZXQpe3JldHVybiBkfWVsc2V7cmV0dXJuIG51bGx9fX19fX19Yi50YXJnZXRzLmFkZChhKTtyZXR1cm4gYX1lbHNle3JldHVybiBudWxsfX0sYWRkQW5pbTpmdW5jdGlvbihjKXt2YXIgYj10aGlzLml0ZW1zLGE9dGhpcy50YXNrO2IuYWRkKGMuaWQsYyk7aWYoIWEmJmIubGVuZ3RoKXthPXRoaXMudGFzaz17cnVuOnRoaXMucnVubmVyLGludGVydmFsOnRoaXMuaW50ZXJ2YWwsc2NvcGU6dGhpc307RXh0LlRhc2tNYW5hZ2VyLnN0YXJ0KGEpfX0scmVtb3ZlQW5pbTpmdW5jdGlvbihkKXt2YXIgYz10aGlzLGI9Yy5pdGVtcyxhPWMudGFzaztiLnJlbW92ZUF0S2V5KGQuaWQpO2lmKGEmJiFiLmxlbmd0aCl7RXh0LlRhc2tNYW5hZ2VyLnN0b3AoYSk7ZGVsZXRlIGMudGFza319LHJ1bm5lcjpmdW5jdGlvbigpe3ZhciBkPXRoaXMsYj1kLml0ZW1zLmdldFJhbmdlKCksYz0wLGE9Yi5sZW5ndGgsZTtkLnRhcmdldEFycj17fTtkLnRpbWVzdGFtcD1uZXcgRGF0ZSgpO2Zvcig7YzxhO2MrKyl7ZT1iW2NdO2lmKGUuaXNSZWFkeSgpKXtkLnN0YXJ0QW5pbShlKX19Zm9yKGM9MDtjPGE7YysrKXtlPWJbY107aWYoZS5pc1J1bm5pbmcoKSl7ZC5ydW5BbmltKGUpfX1kLmFwcGx5UGVuZGluZ0F0dHJzKCl9LHN0YXJ0QW5pbTpmdW5jdGlvbihhKXthLnN0YXJ0KHRoaXMudGltZXN0YW1wKX0scnVuQW5pbTpmdW5jdGlvbihlKXtpZighZSl7cmV0dXJufXZhciBkPXRoaXMsYj1lLnRhcmdldC5nZXRJZCgpLGg9ZC51c2VDU1MzJiZlLnRhcmdldC50eXBlPT0iZWxlbWVudCIsYT1kLnRpbWVzdGFtcC1lLnN0YXJ0VGltZSxjPShhPj1lLmR1cmF0aW9uKSxnLGk7Zz10aGlzLmNvbGxlY3RUYXJnZXREYXRhKGUsYSxoLGMpO2lmKGgpe2UudGFyZ2V0LnNldEF0dHIoZy5hbmltc1tlLmlkXS5hdHRyaWJ1dGVzLHRydWUpO2QuY29sbGVjdFRhcmdldERhdGEoZSxlLmR1cmF0aW9uLGgsYyk7ZS5wYXVzZWQ9dHJ1ZTtnPWUudGFyZ2V0LnRhcmdldDtpZihlLnRhcmdldC5pc0NvbXBvc2l0ZSl7Zz1lLnRhcmdldC50YXJnZXQubGFzdCgpfWk9e307aVtFeHQuc3VwcG9ydHMuQ1NTM1RyYW5zaXRpb25FbmRdPWUubGFzdEZyYW1lO2kuc2NvcGU9ZTtpLnNpbmdsZT10cnVlO2cub24oaSl9fSxjb2xsZWN0VGFyZ2V0RGF0YTpmdW5jdGlvbihjLGEsZSxnKXt2YXIgYj1jLnRhcmdldC5nZXRJZCgpLGQ9dGhpcy50YXJnZXRBcnJbYl07aWYoIWQpe2Q9dGhpcy50YXJnZXRBcnJbYl09e2lkOmIsZWw6Yy50YXJnZXQsYW5pbXM6e319fWQuYW5pbXNbYy5pZF09e2lkOmMuaWQsYW5pbTpjLGVsYXBzZWQ6YSxpc0xhc3RGcmFtZTpnLGF0dHJpYnV0ZXM6W3tkdXJhdGlvbjpjLmR1cmF0aW9uLGVhc2luZzooZSYmYy5yZXZlcnNlKT9jLmVhc2luZ0ZuLnJldmVyc2UoKS50b0NTUzMoKTpjLmVhc2luZyxhdHRyczpjLnJ1bkFuaW0oYSl9XX07cmV0dXJuIGR9LGFwcGx5UGVuZGluZ0F0dHJzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50YXJnZXRBcnIsZyxjLGIsZCxhO2ZvcihjIGluIGUpe2lmKGUuaGFzT3duUHJvcGVydHkoYykpe2c9ZVtjXTtmb3IoYSBpbiBnLmFuaW1zKXtpZihnLmFuaW1zLmhhc093blByb3BlcnR5KGEpKXtiPWcuYW5pbXNbYV07ZD1iLmFuaW07aWYoYi5hdHRyaWJ1dGVzJiZkLmlzUnVubmluZygpKXtnLmVsLnNldEF0dHIoYi5hdHRyaWJ1dGVzLGZhbHNlLGIuaXNMYXN0RnJhbWUpO2lmKGIuaXNMYXN0RnJhbWUpe2QubGFzdEZyYW1lKCl9fX19fX19fSk7RXh0LmRlZmluZSgiRXh0LmZ4LkFuaW1hdG9yIix7bWl4aW5zOntvYnNlcnZhYmxlOiJFeHQudXRpbC5PYnNlcnZhYmxlIn0scmVxdWlyZXM6WyJFeHQuZnguTWFuYWdlciJdLGlzQW5pbWF0b3I6dHJ1ZSxkdXJhdGlvbjoyNTAsZGVsYXk6MCxkZWxheVN0YXJ0OjAsZHluYW1pYzpmYWxzZSxlYXNpbmc6ImVhc2UiLHJ1bm5pbmc6ZmFsc2UscGF1c2VkOmZhbHNlLGRhbXBlcjoxLGl0ZXJhdGlvbnM6MSxjdXJyZW50SXRlcmF0aW9uOjAsa2V5ZnJhbWVTdGVwOjAsYW5pbUtleUZyYW1lc1JFOi9eKGZyb218dG98XGQrJT8pJC8sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczthPUV4dC5hcHBseShiLGF8fHt9KTtiLmNvbmZpZz1hO2IuaWQ9RXh0LmlkKG51bGwsImV4dC1hbmltYXRvci0iKTtiLmFkZEV2ZW50cygiYmVmb3JlYW5pbWF0ZSIsImtleWZyYW1lIiwiYWZ0ZXJhbmltYXRlIik7Yi5taXhpbnMub2JzZXJ2YWJsZS5jb25zdHJ1Y3Rvci5jYWxsKGIsYSk7Yi50aW1lbGluZT1bXTtiLmNyZWF0ZVRpbWVsaW5lKGIua2V5ZnJhbWVzKTtpZihiLnRhcmdldCl7Yi5hcHBseUFuaW1hdG9yKGIudGFyZ2V0KTtFeHQuZnguTWFuYWdlci5hZGRBbmltKGIpfX0sc29ydGVyOmZ1bmN0aW9uKGQsYyl7cmV0dXJuIGQucGN0LWMucGN0fSxjcmVhdGVUaW1lbGluZTpmdW5jdGlvbihnKXt2YXIgaz10aGlzLG49W10sbD1rLnRvfHx7fSxjPWsuZHVyYXRpb24sbyxhLGUsaixtLGIsZCxoO2ZvcihtIGluIGcpe2lmKGcuaGFzT3duUHJvcGVydHkobSkmJmsuYW5pbUtleUZyYW1lc1JFLnRlc3QobSkpe2g9e2F0dHJzOkV4dC5hcHBseShnW21dLGwpfTtpZihtPT0iZnJvbSIpe209MH1lbHNle2lmKG09PSJ0byIpe209MTAwfX1oLnBjdD1wYXJzZUludChtLDEwKTtuLnB1c2goaCl9fUV4dC5BcnJheS5zb3J0KG4say5zb3J0ZXIpO2o9bi5sZW5ndGg7Zm9yKGU9MDtlPGo7ZSsrKXtvPShuW2UtMV0pP2MqKG5bZS0xXS5wY3QvMTAwKTowO2E9YyoobltlXS5wY3QvMTAwKTtrLnRpbWVsaW5lLnB1c2goe2R1cmF0aW9uOmEtbyxhdHRyczpuW2VdLmF0dHJzfSl9fSxhcHBseUFuaW1hdG9yOmZ1bmN0aW9uKGUpe3ZhciBrPXRoaXMsbD1bXSxvPWsudGltZWxpbmUsZz1rLnJldmVyc2Usaj1vLmxlbmd0aCxiLGgsYSxkLG4sbSxjO2lmKGsuZmlyZUV2ZW50KCJiZWZvcmVhbmltYXRlIixrKSE9PWZhbHNlKXtmb3IoYz0wO2M8ajtjKyspe2I9b1tjXTtuPWIuYXR0cnM7aD1uLmVhc2luZ3x8ay5lYXNpbmc7YT1uLmRhbXBlcnx8ay5kYW1wZXI7ZGVsZXRlIG4uZWFzaW5nO2RlbGV0ZSBuLmRhbXBlcjtiPW5ldyBFeHQuZnguQW5pbSh7dGFyZ2V0OmUsZWFzaW5nOmgsZGFtcGVyOmEsZHVyYXRpb246Yi5kdXJhdGlvbixwYXVzZWQ6dHJ1ZSx0bzpufSk7bC5wdXNoKGIpfWsuYW5pbWF0aW9ucz1sO2sudGFyZ2V0PWIudGFyZ2V0O2ZvcihjPTA7YzxqLTE7YysrKXtiPWxbY107Yi5uZXh0QW5pbT1sW2MrMV07Yi5vbigiYWZ0ZXJhbmltYXRlIixmdW5jdGlvbigpe3RoaXMubmV4dEFuaW0ucGF1c2VkPWZhbHNlfSk7Yi5vbigiYWZ0ZXJhbmltYXRlIixmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJrZXlmcmFtZSIsdGhpcywrK3RoaXMua2V5ZnJhbWVTdGVwKX0sayl9bFtqLTFdLm9uKCJhZnRlcmFuaW1hdGUiLGZ1bmN0aW9uKCl7dGhpcy5sYXN0RnJhbWUoKX0sayl9fSxzdGFydDpmdW5jdGlvbihkKXt2YXIgZT10aGlzLGM9ZS5kZWxheSxiPWUuZGVsYXlTdGFydCxhO2lmKGMpe2lmKCFiKXtlLmRlbGF5U3RhcnQ9ZDtyZXR1cm59ZWxzZXthPWQtYjtpZihhPGMpe3JldHVybn1lbHNle2Q9bmV3IERhdGUoYi5nZXRUaW1lKCkrYyl9fX1pZihlLmZpcmVFdmVudCgiYmVmb3JlYW5pbWF0ZSIsZSkhPT1mYWxzZSl7ZS5zdGFydFRpbWU9ZDtlLnJ1bm5pbmc9dHJ1ZTtlLmFuaW1hdGlvbnNbZS5rZXlmcmFtZVN0ZXBdLnBhdXNlZD1mYWxzZX19LGxhc3RGcmFtZTpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYT1jLml0ZXJhdGlvbnMsYj1jLmN1cnJlbnRJdGVyYXRpb247YisrO2lmKGI8YSl7Yy5zdGFydFRpbWU9bmV3IERhdGUoKTtjLmN1cnJlbnRJdGVyYXRpb249YjtjLmtleWZyYW1lU3RlcD0wO2MuYXBwbHlBbmltYXRvcihjLnRhcmdldCk7Yy5hbmltYXRpb25zW2Mua2V5ZnJhbWVTdGVwXS5wYXVzZWQ9ZmFsc2V9ZWxzZXtjLmN1cnJlbnRJdGVyYXRpb249MDtjLmVuZCgpfX0sZW5kOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmZpcmVFdmVudCgiYWZ0ZXJhbmltYXRlIixhLGEuc3RhcnRUaW1lLG5ldyBEYXRlKCktYS5zdGFydFRpbWUpfSxpc1JlYWR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGF1c2VkPT09ZmFsc2UmJnRoaXMucnVubmluZz09PWZhbHNlJiZ0aGlzLml0ZXJhdGlvbnM+MH0saXNSdW5uaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlfX0pO0V4dC5kZWZpbmUoIkV4dC5meC5DdWJpY0JlemllciIse3NpbmdsZXRvbjp0cnVlLGN1YmljQmV6aWVyQXRUaW1lOmZ1bmN0aW9uKG8sZCxiLG4sbSxpKXt2YXIgaj0zKmQsbD0zKihuLWQpLWosYT0xLWotbCxoPTMqYixrPTMqKG0tYiktaCxwPTEtaC1rO2Z1bmN0aW9uIGcocSl7cmV0dXJuKChhKnErbCkqcStqKSpxfWZ1bmN0aW9uIGMocSxzKXt2YXIgcj1lKHEscyk7cmV0dXJuKChwKnIraykqcitoKSpyfWZ1bmN0aW9uIGUocSx5KXt2YXIgdyx2LHQscix1LHM7Zm9yKHQ9cSxzPTA7czw4O3MrKyl7cj1nKHQpLXE7aWYoTWF0aC5hYnMocik8eSl7cmV0dXJuIHR9dT0oMyphKnQrMipsKSp0K2o7aWYoTWF0aC5hYnModSk8MC4wMDAwMDEpe2JyZWFrfXQ9dC1yL3V9dz0wO3Y9MTt0PXE7aWYodDx3KXtyZXR1cm4gd31pZih0PnYpe3JldHVybiB2fXdoaWxlKHc8dil7cj1nKHQpO2lmKE1hdGguYWJzKHItcSk8eSl7cmV0dXJuIHR9aWYocT5yKXt3PXR9ZWxzZXt2PXR9dD0odi13KS8yK3d9cmV0dXJuIHR9cmV0dXJuIGMobywxLygyMDAqaSkpfSxjdWJpY0JlemllcjpmdW5jdGlvbihiLGUsYSxjKXt2YXIgZD1mdW5jdGlvbihnKXtyZXR1cm4gRXh0LmZ4LkN1YmljQmV6aWVyLmN1YmljQmV6aWVyQXRUaW1lKGcsYixlLGEsYywxKX07ZC50b0NTUzM9ZnVuY3Rpb24oKXtyZXR1cm4iY3ViaWMtYmV6aWVyKCIrW2IsZSxhLGNdLmpvaW4oIiwiKSsiKSJ9O2QucmV2ZXJzZT1mdW5jdGlvbigpe3JldHVybiBFeHQuZnguQ3ViaWNCZXppZXIuY3ViaWNCZXppZXIoMS1hLDEtYywxLWIsMS1lKX07cmV0dXJuIGR9fSk7RXh0Lm5zKCJFeHQuZngiKTtFeHQucmVxdWlyZSgiRXh0LmZ4LkN1YmljQmV6aWVyIixmdW5jdGlvbigpe3ZhciBlPU1hdGgsaD1lLlBJLGQ9ZS5wb3csYj1lLnNpbixnPWUuc3FydCxhPWUuYWJzLGM9MS43MDE1ODtFeHQuZnguRWFzaW5nPXt9O0V4dC5hcHBseShFeHQuZnguRWFzaW5nLHtsaW5lYXI6ZnVuY3Rpb24oaSl7cmV0dXJuIGl9LGVhc2U6ZnVuY3Rpb24obCl7dmFyIGk9MC4wNzgxMy1sLzIsbT0tMC4yNSxvPWcoMC4wMDY2K2kqaSkscj1vLWksaz1kKGEociksMS8zKSoocjwwPy0xOjEpLHA9LW8taSxqPWQoYShwKSwxLzMpKihwPDA/LTE6MSkscz1rK2orMC4yNTtyZXR1cm4gZCgxLXMsMikqMypzKjAuMSsoMS1zKSozKnMqcytzKnMqc30sZWFzZUluOmZ1bmN0aW9uKGkpe3JldHVybiBkKGksMS43KX0sZWFzZU91dDpmdW5jdGlvbihpKXtyZXR1cm4gZChpLDAuNDgpfSxlYXNlSW5PdXQ6ZnVuY3Rpb24ocil7dmFyIGw9MC40OC1yLzEuMDQsaz1nKDAuMTczNCtsKmwpLGk9ay1sLHA9ZChhKGkpLDEvMykqKGk8MD8tMToxKSxvPS1rLWwsbT1kKGEobyksMS8zKSoobzwwPy0xOjEpLGo9cCttKzAuNTtyZXR1cm4oMS1qKSozKmoqaitqKmoqan0sYmFja0luOmZ1bmN0aW9uKGkpe3JldHVybiBpKmkqKChjKzEpKmktYyl9LGJhY2tPdXQ6ZnVuY3Rpb24oaSl7aT1pLTE7cmV0dXJuIGkqaSooKGMrMSkqaStjKSsxfSxlbGFzdGljSW46ZnVuY3Rpb24oayl7aWYoaz09PTB8fGs9PT0xKXtyZXR1cm4ga312YXIgaj0wLjMsaT1qLzQ7cmV0dXJuIGQoMiwtMTAqaykqYigoay1pKSooMipoKS9qKSsxfSxlbGFzdGljT3V0OmZ1bmN0aW9uKGkpe3JldHVybiAxLUV4dC5meC5FYXNpbmcuZWxhc3RpY0luKDEtaSl9LGJvdW5jZUluOmZ1bmN0aW9uKGkpe3JldHVybiAxLUV4dC5meC5FYXNpbmcuYm91bmNlT3V0KDEtaSl9LGJvdW5jZU91dDpmdW5jdGlvbihtKXt2YXIgaj03LjU2MjUsaz0yLjc1LGk7aWYobTwoMS9rKSl7aT1qKm0qbX1lbHNle2lmKG08KDIvaykpe20tPSgxLjUvayk7aT1qKm0qbSswLjc1fWVsc2V7aWYobTwoMi41L2spKXttLT0oMi4yNS9rKTtpPWoqbSptKzAuOTM3NX1lbHNle20tPSgyLjYyNS9rKTtpPWoqbSptKzAuOTg0Mzc1fX19cmV0dXJuIGl9fSk7RXh0LmFwcGx5KEV4dC5meC5FYXNpbmcseyJiYWNrLWluIjpFeHQuZnguRWFzaW5nLmJhY2tJbiwiYmFjay1vdXQiOkV4dC5meC5FYXNpbmcuYmFja091dCwiZWFzZS1pbiI6RXh0LmZ4LkVhc2luZy5lYXNlSW4sImVhc2Utb3V0IjpFeHQuZnguRWFzaW5nLmVhc2VPdXQsImVsYXN0aWMtaW4iOkV4dC5meC5FYXNpbmcuZWxhc3RpY0luLCJlbGFzdGljLW91dCI6RXh0LmZ4LkVhc2luZy5lbGFzdGljSW4sImJvdW5jZS1pbiI6RXh0LmZ4LkVhc2luZy5ib3VuY2VJbiwiYm91bmNlLW91dCI6RXh0LmZ4LkVhc2luZy5ib3VuY2VPdXQsImVhc2UtaW4tb3V0IjpFeHQuZnguRWFzaW5nLmVhc2VJbk91dH0pfSk7RXh0LmRlZmluZSgiRXh0LmRyYXcuQ29sb3IiLHtjb2xvclRvSGV4UmU6LyguKj8pcmdiXCgoXGQrKSxccyooXGQrKSxccyooXGQrKVwpLyxyZ2JSZTovXHMqcmdiXHMqXChccyooWzAtOV0rKVxzKixccyooWzAtOV0rKVxzKixccyooWzAtOV0rKVxzKlwpXHMqLyxoZXhSZTovXHMqIyhbMC05YS1mQS1GXVswLTlhLWZBLUZdPykoWzAtOWEtZkEtRl1bMC05YS1mQS1GXT8pKFswLTlhLWZBLUZdWzAtOWEtZkEtRl0/KVxzKi8sbGlnaHRuZXNzRmFjdG9yOjAuMixjb25zdHJ1Y3RvcjpmdW5jdGlvbihkLGMsYSl7dmFyIGI9dGhpcyxlPUV4dC5OdW1iZXIuY29uc3RyYWluO2Iucj1lKGQsMCwyNTUpO2IuZz1lKGMsMCwyNTUpO2IuYj1lKGEsMCwyNTUpfSxnZXRSZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yfSxnZXRHcmVlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmd9LGdldEJsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ifSxnZXRSR0I6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVyblthLnIsYS5nLGEuYl19LGdldEhTTDpmdW5jdGlvbigpe3ZhciBqPXRoaXMsYT1qLnIvMjU1LGk9ai5nLzI1NSxrPWouYi8yNTUsbT1NYXRoLm1heChhLGksayksZD1NYXRoLm1pbihhLGksayksbj1tLWQsZSxvPTAsYz0wLjUqKG0rZCk7aWYoZCE9bSl7bz0oYzwwLjUpP24vKG0rZCk6bi8oMi1tLWQpO2lmKGE9PW0pe2U9NjAqKGktaykvbn1lbHNle2lmKGk9PW0pe2U9MTIwKzYwKihrLWEpL259ZWxzZXtlPTI0MCs2MCooYS1pKS9ufX1pZihlPDApe2UrPTM2MH1pZihlPj0zNjApe2UtPTM2MH19cmV0dXJuW2UsbyxjXX0sZ2V0TGlnaHRlcjpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldEhTTCgpO2I9Ynx8dGhpcy5saWdodG5lc3NGYWN0b3I7YVsyXT1FeHQuTnVtYmVyLmNvbnN0cmFpbihhWzJdK2IsMCwxKTtyZXR1cm4gdGhpcy5mcm9tSFNMKGFbMF0sYVsxXSxhWzJdKX0sZ2V0RGFya2VyOmZ1bmN0aW9uKGEpe2E9YXx8dGhpcy5saWdodG5lc3NGYWN0b3I7cmV0dXJuIHRoaXMuZ2V0TGlnaHRlcigtYSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxjPU1hdGgucm91bmQsZT1jKGgucikudG9TdHJpbmcoMTYpLGQ9YyhoLmcpLnRvU3RyaW5nKDE2KSxhPWMoaC5iKS50b1N0cmluZygxNik7ZT0oZS5sZW5ndGg9PTEpPyIwIitlOmU7ZD0oZC5sZW5ndGg9PTEpPyIwIitkOmQ7YT0oYS5sZW5ndGg9PTEpPyIwIithOmE7cmV0dXJuWyIjIixlLGQsYV0uam9pbigiIil9LHRvSGV4OmZ1bmN0aW9uKGIpe2lmKEV4dC5pc0FycmF5KGIpKXtiPWJbMF19aWYoIUV4dC5pc1N0cmluZyhiKSl7cmV0dXJuIiJ9aWYoYi5zdWJzdHIoMCwxKT09PSIjIil7cmV0dXJuIGJ9dmFyIGU9dGhpcy5jb2xvclRvSGV4UmUuZXhlYyhiKSxnLGQsYSxjO2lmKEV4dC5pc0FycmF5KGUpKXtnPXBhcnNlSW50KGVbMl0sMTApO2Q9cGFyc2VJbnQoZVszXSwxMCk7YT1wYXJzZUludChlWzRdLDEwKTtjPWF8KGQ8PDgpfChnPDwxNik7cmV0dXJuIGVbMV0rIiMiKygiMDAwMDAwIitjLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTYpfWVsc2V7cmV0dXJuIGJ9fSxmcm9tU3RyaW5nOmZ1bmN0aW9uKGkpe3ZhciBjLGUsZCxhLGg9cGFyc2VJbnQ7aWYoKGkubGVuZ3RoPT00fHxpLmxlbmd0aD09NykmJmkuc3Vic3RyKDAsMSk9PT0iIyIpe2M9aS5tYXRjaCh0aGlzLmhleFJlKTtpZihjKXtlPWgoY1sxXSwxNik+PjA7ZD1oKGNbMl0sMTYpPj4wO2E9aChjWzNdLDE2KT4+MDtpZihpLmxlbmd0aD09NCl7ZSs9KGUqMTYpO2QrPShkKjE2KTthKz0oYSoxNil9fX1lbHNle2M9aS5tYXRjaCh0aGlzLnJnYlJlKTtpZihjKXtlPWNbMV07ZD1jWzJdO2E9Y1szXX19cmV0dXJuKHR5cGVvZiBlPT0idW5kZWZpbmVkIik/dW5kZWZpbmVkOm5ldyBFeHQuZHJhdy5Db2xvcihlLGQsYSl9LGdldEdyYXlzY2FsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnIqMC4zK3RoaXMuZyowLjU5K3RoaXMuYiowLjExfSxmcm9tSFNMOmZ1bmN0aW9uKGcsbyxkKXt2YXIgYSxiLGMsZSxrPVtdLG49TWF0aC5hYnMsaj1NYXRoLmZsb29yO2lmKG89PTB8fGc9PW51bGwpe2s9W2QsZCxkXX1lbHNle2cvPTYwO2E9byooMS1uKDIqZC0xKSk7Yj1hKigxLW4oZy0yKmooZy8yKS0xKSk7Yz1kLWEvMjtzd2l0Y2goaihnKSl7Y2FzZSAwOms9W2EsYiwwXTticmVhaztjYXNlIDE6az1bYixhLDBdO2JyZWFrO2Nhc2UgMjprPVswLGEsYl07YnJlYWs7Y2FzZSAzOms9WzAsYixhXTticmVhaztjYXNlIDQ6az1bYiwwLGFdO2JyZWFrO2Nhc2UgNTprPVthLDAsYl07YnJlYWt9az1ba1swXStjLGtbMV0rYyxrWzJdK2NdfXJldHVybiBuZXcgRXh0LmRyYXcuQ29sb3Ioa1swXSoyNTUsa1sxXSoyNTUsa1syXSoyNTUpfX0sZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb3RvdHlwZTt0aGlzLmFkZFN0YXRpY3Moe2Zyb21IU0w6ZnVuY3Rpb24oKXtyZXR1cm4gYS5mcm9tSFNMLmFwcGx5KGEsYXJndW1lbnRzKX0sZnJvbVN0cmluZzpmdW5jdGlvbigpe3JldHVybiBhLmZyb21TdHJpbmcuYXBwbHkoYSxhcmd1bWVudHMpfSx0b0hleDpmdW5jdGlvbigpe3JldHVybiBhLnRvSGV4LmFwcGx5KGEsYXJndW1lbnRzKX19KX0pO0V4dC5kZWZpbmUoIkV4dC5kcmF3LkRyYXciLHtzaW5nbGV0b246dHJ1ZSxyZXF1aXJlczpbIkV4dC5kcmF3LkNvbG9yIl0scGF0aFRvU3RyaW5nUkU6Lyw/KFthY2hsbXFyc3R2eHpdKSw/L2dpLHBhdGhDb21tYW5kUkU6LyhbYWNobG1xc3R2el0pW1xzLF0qKCgtP1xkKlwuP1xkKig/OmVbLStdP1xkKyk/XHMqLD9ccyopKykvaWcscGF0aFZhbHVlc1JFOi8oLT9cZCpcLj9cZCooPzplWy0rXT9cZCspPylccyosP1xzKi9pZyxzdG9wc1JFOi9eKFxkKyU/KSQvLHJhZGlhbjpNYXRoLlBJLzE4MCxhdmFpbGFibGVBbmltQXR0cnM6e2Fsb25nOiJhbG9uZyIsYmx1cjpudWxsLCJjbGlwLXJlY3QiOiJjc3YiLGN4Om51bGwsY3k6bnVsbCxmaWxsOiJjb2xvciIsImZpbGwtb3BhY2l0eSI6bnVsbCwiZm9udC1zaXplIjpudWxsLGhlaWdodDpudWxsLG9wYWNpdHk6bnVsbCxwYXRoOiJwYXRoIixyOm51bGwscm90YXRpb246ImNzdiIscng6bnVsbCxyeTpudWxsLHNjYWxlOiJjc3YiLHN0cm9rZToiY29sb3IiLCJzdHJva2Utb3BhY2l0eSI6bnVsbCwic3Ryb2tlLXdpZHRoIjpudWxsLHRyYW5zbGF0aW9uOiJjc3YiLHdpZHRoOm51bGwseDpudWxsLHk6bnVsbH0saXM6ZnVuY3Rpb24oYixhKXthPVN0cmluZyhhKS50b0xvd2VyQ2FzZSgpO3JldHVybihhPT0ib2JqZWN0IiYmYj09PU9iamVjdChiKSl8fChhPT0idW5kZWZpbmVkIiYmdHlwZW9mIGI9PWEpfHwoYT09Im51bGwiJiZiPT09bnVsbCl8fChhPT0iYXJyYXkiJiZBcnJheS5pc0FycmF5JiZBcnJheS5pc0FycmF5KGIpKXx8KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChiKS50b0xvd2VyQ2FzZSgpLnNsaWNlKDgsLTEpKT09YX0sZWxsaXBzZVBhdGg6ZnVuY3Rpb24oYil7dmFyIGE9Yi5hdHRyO3JldHVybiBFeHQuU3RyaW5nLmZvcm1hdCgiTXswfSx7MX1BezJ9LHszfSwwLDEsMSx7MH0sezR9QXsyfSx7M30sMCwxLDEsezB9LHsxfXoiLGEueCxhLnktYS5yeSxhLnJ4LGEucnksYS55K2EucnkpfSxyZWN0UGF0aDpmdW5jdGlvbihiKXt2YXIgYT1iLmF0dHI7aWYoYS5yYWRpdXMpe3JldHVybiBFeHQuU3RyaW5nLmZvcm1hdCgiTXswfSx7MX1sezJ9LDBhezN9LHszfSwwLDAsMSx7M30sezN9bDAsezV9YXszfSx7M30sMCwwLDEsezR9LHszfWx7Nn0sMGF7M30sezN9LDAsMCwxLHs0fSx7NH1sMCx7N31hezN9LHszfSwwLDAsMSx7M30sezR9eiIsYS54K2EucmFkaXVzLGEueSxhLndpZHRoLWEucmFkaXVzKjIsYS5yYWRpdXMsLWEucmFkaXVzLGEuaGVpZ2h0LWEucmFkaXVzKjIsYS5yYWRpdXMqMi1hLndpZHRoLGEucmFkaXVzKjItYS5oZWlnaHQpfWVsc2V7cmV0dXJuIEV4dC5TdHJpbmcuZm9ybWF0KCJNezB9LHsxfUx7Mn0sezF9LHsyfSx7M30sezB9LHszfXoiLGEueCxhLnksYS53aWR0aCthLngsYS5oZWlnaHQrYS55KX19LHBhdGgyc3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuam9pbigiLCIpLnJlcGxhY2UoRXh0LmRyYXcuRHJhdy5wYXRoVG9TdHJpbmdSRSwiJDEiKX0scGF0aFRvU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBhLmpvaW4oIiwiKS5yZXBsYWNlKEV4dC5kcmF3LkRyYXcucGF0aFRvU3RyaW5nUkUsIiQxIil9LHBhcnNlUGF0aFN0cmluZzpmdW5jdGlvbihhKXtpZighYSl7cmV0dXJuIG51bGx9dmFyIGQ9e2E6NyxjOjYsaDoxLGw6MixtOjIscTo0LHM6NCx0OjIsdjoxLHo6MH0sYz1bXSxiPXRoaXM7aWYoYi5pcyhhLCJhcnJheSIpJiZiLmlzKGFbMF0sImFycmF5Iikpe2M9Yi5wYXRoQ2xvbmUoYSl9aWYoIWMubGVuZ3RoKXtTdHJpbmcoYSkucmVwbGFjZShiLnBhdGhDb21tYW5kUkUsZnVuY3Rpb24oZyxlLGope3ZhciBpPVtdLGg9ZS50b0xvd2VyQ2FzZSgpO2oucmVwbGFjZShiLnBhdGhWYWx1ZXNSRSxmdW5jdGlvbihsLGspe2smJmkucHVzaCgrayl9KTtpZihoPT0ibSImJmkubGVuZ3RoPjIpe2MucHVzaChbZV0uY29uY2F0KEV4dC5BcnJheS5zcGxpY2UoaSwwLDIpKSk7aD0ibCI7ZT0oZT09Im0iKT8ibCI6IkwifXdoaWxlKGkubGVuZ3RoPj1kW2hdKXtjLnB1c2goW2VdLmNvbmNhdChFeHQuQXJyYXkuc3BsaWNlKGksMCxkW2hdKSkpO2lmKCFkW2hdKXticmVha319fSl9Yy50b1N0cmluZz1iLnBhdGgyc3RyaW5nO3JldHVybiBjfSxtYXBQYXRoOmZ1bmN0aW9uKGwsZyl7aWYoIWcpe3JldHVybiBsfXZhciBoLGUsYyxrLGEsZCxiO2w9dGhpcy5wYXRoMmN1cnZlKGwpO2ZvcihjPTAsaz1sLmxlbmd0aDtjPGs7YysrKXtiPWxbY107Zm9yKGE9MSxkPWIubGVuZ3RoO2E8ZC0xO2ErPTIpe2g9Zy54KGJbYV0sYlthKzFdKTtlPWcueShiW2FdLGJbYSsxXSk7YlthXT1oO2JbYSsxXT1lfX1yZXR1cm4gbH0scGF0aENsb25lOmZ1bmN0aW9uKGcpe3ZhciBjPVtdLGEsZSxiLGQ7aWYoIXRoaXMuaXMoZywiYXJyYXkiKXx8IXRoaXMuaXMoZyYmZ1swXSwiYXJyYXkiKSl7Zz10aGlzLnBhcnNlUGF0aFN0cmluZyhnKX1mb3IoYj0wLGQ9Zy5sZW5ndGg7YjxkO2IrKyl7Y1tiXT1bXTtmb3IoYT0wLGU9Z1tiXS5sZW5ndGg7YTxlO2ErKyl7Y1tiXVthXT1nW2JdW2FdfX1jLnRvU3RyaW5nPXRoaXMucGF0aDJzdHJpbmc7cmV0dXJuIGN9LHBhdGhUb0Fic29sdXRlOmZ1bmN0aW9uKGMpe2lmKCF0aGlzLmlzKGMsImFycmF5Iil8fCF0aGlzLmlzKGMmJmNbMF0sImFycmF5Iikpe2M9dGhpcy5wYXJzZVBhdGhTdHJpbmcoYyl9dmFyIGs9W10sbT0wLGw9MCxvPTAsbj0wLGc9MCxoPWMubGVuZ3RoLGIsZCxlLGE7aWYoaCYmY1swXVswXT09Ik0iKXttPStjWzBdWzFdO2w9K2NbMF1bMl07bz1tO249bDtnKys7a1swXT1bIk0iLG0sbF19Zm9yKDtnPGg7ZysrKXtiPWtbZ109W107ZD1jW2ddO2lmKGRbMF0hPWRbMF0udG9VcHBlckNhc2UoKSl7YlswXT1kWzBdLnRvVXBwZXJDYXNlKCk7c3dpdGNoKGJbMF0pe2Nhc2UiQSI6YlsxXT1kWzFdO2JbMl09ZFsyXTtiWzNdPWRbM107Yls0XT1kWzRdO2JbNV09ZFs1XTtiWzZdPSsoZFs2XSttKTtiWzddPSsoZFs3XStsKTticmVhaztjYXNlIlYiOmJbMV09K2RbMV0rbDticmVhaztjYXNlIkgiOmJbMV09K2RbMV0rbTticmVhaztjYXNlIk0iOm89K2RbMV0rbTtuPStkWzJdK2w7ZGVmYXVsdDplPTE7YT1kLmxlbmd0aDtmb3IoO2U8YTtlKyspe2JbZV09K2RbZV0rKChlJTIpP206bCl9fX1lbHNle2U9MDthPWQubGVuZ3RoO2Zvcig7ZTxhO2UrKyl7a1tnXVtlXT1kW2VdfX1zd2l0Y2goYlswXSl7Y2FzZSJaIjptPW87bD1uO2JyZWFrO2Nhc2UiSCI6bT1iWzFdO2JyZWFrO2Nhc2UiViI6bD1iWzFdO2JyZWFrO2Nhc2UiTSI6ZD1rW2ddO2E9ZC5sZW5ndGg7bz1kW2EtMl07bj1kW2EtMV07ZGVmYXVsdDpkPWtbZ107YT1kLmxlbmd0aDttPWRbYS0yXTtsPWRbYS0xXX19ay50b1N0cmluZz10aGlzLnBhdGgyc3RyaW5nO3JldHVybiBrfSxwYXRoVG9SZWxhdGl2ZTpmdW5jdGlvbihkKXtpZighdGhpcy5pcyhkLCJhcnJheSIpfHwhdGhpcy5pcyhkJiZkWzBdLCJhcnJheSIpKXtkPXRoaXMucGFyc2VQYXRoU3RyaW5nKGQpfXZhciBuPVtdLHA9MCxvPTAsdD0wLHM9MCxjPTAsYSxxLGgsZyxlLG0sdSxsLGI7aWYoZFswXVswXT09Ik0iKXtwPWRbMF1bMV07bz1kWzBdWzJdO3Q9cDtzPW87YysrO24ucHVzaChbIk0iLHAsb10pfWZvcihoPWMsdT1kLmxlbmd0aDtoPHU7aCsrKXthPW5baF09W107cT1kW2hdO2lmKHFbMF0hPXFbMF0udG9Mb3dlckNhc2UoKSl7YVswXT1xWzBdLnRvTG93ZXJDYXNlKCk7c3dpdGNoKGFbMF0pe2Nhc2UiYSI6YVsxXT1xWzFdO2FbMl09cVsyXTthWzNdPXFbM107YVs0XT1xWzRdO2FbNV09cVs1XTthWzZdPSsocVs2XS1wKS50b0ZpeGVkKDMpO2FbN109KyhxWzddLW8pLnRvRml4ZWQoMyk7YnJlYWs7Y2FzZSJ2IjphWzFdPSsocVsxXS1vKS50b0ZpeGVkKDMpO2JyZWFrO2Nhc2UibSI6dD1xWzFdO3M9cVsyXTtkZWZhdWx0OmZvcihnPTEsbD1xLmxlbmd0aDtnPGw7ZysrKXthW2ddPSsocVtnXS0oKGclMik/cDpvKSkudG9GaXhlZCgzKX19fWVsc2V7YT1uW2hdPVtdO2lmKHFbMF09PSJtIil7dD1xWzFdK3A7cz1xWzJdK299Zm9yKGU9MCxiPXEubGVuZ3RoO2U8YjtlKyspe25baF1bZV09cVtlXX19bT1uW2hdLmxlbmd0aDtzd2l0Y2gobltoXVswXSl7Y2FzZSJ6IjpwPXQ7bz1zO2JyZWFrO2Nhc2UiaCI6cCs9K25baF1bbS0xXTticmVhaztjYXNlInYiOm8rPStuW2hdW20tMV07YnJlYWs7ZGVmYXVsdDpwKz0rbltoXVttLTJdO28rPStuW2hdW20tMV19fW4udG9TdHJpbmc9dGhpcy5wYXRoMnN0cmluZztyZXR1cm4gbn0scGF0aDJjdXJ2ZTpmdW5jdGlvbihrKXt2YXIgZD10aGlzLGg9ZC5wYXRoVG9BYnNvbHV0ZShrKSxjPWgubGVuZ3RoLGo9e3g6MCx5OjAsYng6MCxieTowLFg6MCxZOjAscXg6bnVsbCxxeTpudWxsfSxiLGEsZyxlO2ZvcihiPTA7YjxjO2IrKyl7aFtiXT1kLmNvbW1hbmQyY3VydmUoaFtiXSxqKTtpZihoW2JdLmxlbmd0aD43KXtoW2JdLnNoaWZ0KCk7ZT1oW2JdO3doaWxlKGUubGVuZ3RoKXtFeHQuQXJyYXkuc3BsaWNlKGgsYisrLDAsWyJDIl0uY29uY2F0KEV4dC5BcnJheS5zcGxpY2UoZSwwLDYpKSl9RXh0LkFycmF5LmVyYXNlKGgsYiwxKTtjPWgubGVuZ3RoO2ItLX1hPWhbYl07Zz1hLmxlbmd0aDtqLng9YVtnLTJdO2oueT1hW2ctMV07ai5ieD1wYXJzZUZsb2F0KGFbZy00XSl8fGoueDtqLmJ5PXBhcnNlRmxvYXQoYVtnLTNdKXx8ai55fXJldHVybiBofSxpbnRlcnBvbGF0ZVBhdGhzOmZ1bmN0aW9uKHIsbCl7dmFyIGo9dGhpcyxkPWoucGF0aFRvQWJzb2x1dGUociksbT1qLnBhdGhUb0Fic29sdXRlKGwpLG49e3g6MCx5OjAsYng6MCxieTowLFg6MCxZOjAscXg6bnVsbCxxeTpudWxsfSxhPXt4OjAseTowLGJ4OjAsYnk6MCxYOjAsWTowLHF4Om51bGwscXk6bnVsbH0sYj1mdW5jdGlvbihwLHMpe2lmKHBbc10ubGVuZ3RoPjcpe3Bbc10uc2hpZnQoKTt2YXIgdD1wW3NdO3doaWxlKHQubGVuZ3RoKXtFeHQuQXJyYXkuc3BsaWNlKHAscysrLDAsWyJDIl0uY29uY2F0KEV4dC5BcnJheS5zcGxpY2UodCwwLDYpKSl9RXh0LkFycmF5LmVyYXNlKHAscywxKTtvPU1hdGgubWF4KGQubGVuZ3RoLG0ubGVuZ3RofHwwKX19LGM9ZnVuY3Rpb24odix1LHMscCx0KXtpZih2JiZ1JiZ2W3RdWzBdPT0iTSImJnVbdF1bMF0hPSJNIil7RXh0LkFycmF5LnNwbGljZSh1LHQsMCxbIk0iLHAueCxwLnldKTtzLmJ4PTA7cy5ieT0wO3MueD12W3RdWzFdO3MueT12W3RdWzJdO289TWF0aC5tYXgoZC5sZW5ndGgsbS5sZW5ndGh8fDApfX0saCxvLGcscSxlLGs7Zm9yKGg9MCxvPU1hdGgubWF4KGQubGVuZ3RoLG0ubGVuZ3RofHwwKTtoPG87aCsrKXtkW2hdPWouY29tbWFuZDJjdXJ2ZShkW2hdLG4pO2IoZCxoKTsobVtoXT1qLmNvbW1hbmQyY3VydmUobVtoXSxhKSk7YihtLGgpO2MoZCxtLG4sYSxoKTtjKG0sZCxhLG4saCk7Zz1kW2hdO3E9bVtoXTtlPWcubGVuZ3RoO2s9cS5sZW5ndGg7bi54PWdbZS0yXTtuLnk9Z1tlLTFdO24uYng9cGFyc2VGbG9hdChnW2UtNF0pfHxuLng7bi5ieT1wYXJzZUZsb2F0KGdbZS0zXSl8fG4ueTthLmJ4PShwYXJzZUZsb2F0KHFbay00XSl8fGEueCk7YS5ieT0ocGFyc2VGbG9hdChxW2stM10pfHxhLnkpO2EueD1xW2stMl07YS55PXFbay0xXX1yZXR1cm5bZCxtXX0sY29tbWFuZDJjdXJ2ZTpmdW5jdGlvbihjLGIpe3ZhciBhPXRoaXM7aWYoIWMpe3JldHVyblsiQyIsYi54LGIueSxiLngsYi55LGIueCxiLnldfWlmKGNbMF0hPSJUIiYmY1swXSE9IlEiKXtiLnF4PWIucXk9bnVsbH1zd2l0Y2goY1swXSl7Y2FzZSJNIjpiLlg9Y1sxXTtiLlk9Y1syXTticmVhaztjYXNlIkEiOmM9WyJDIl0uY29uY2F0KGEuYXJjMmN1cnZlLmFwcGx5KGEsW2IueCxiLnldLmNvbmNhdChjLnNsaWNlKDEpKSkpO2JyZWFrO2Nhc2UiUyI6Yz1bIkMiLGIueCsoYi54LShiLmJ4fHxiLngpKSxiLnkrKGIueS0oYi5ieXx8Yi55KSldLmNvbmNhdChjLnNsaWNlKDEpKTticmVhaztjYXNlIlQiOmIucXg9Yi54KyhiLngtKGIucXh8fGIueCkpO2IucXk9Yi55KyhiLnktKGIucXl8fGIueSkpO2M9WyJDIl0uY29uY2F0KGEucXVhZHJhdGljMmN1cnZlKGIueCxiLnksYi5xeCxiLnF5LGNbMV0sY1syXSkpO2JyZWFrO2Nhc2UiUSI6Yi5xeD1jWzFdO2IucXk9Y1syXTtjPVsiQyJdLmNvbmNhdChhLnF1YWRyYXRpYzJjdXJ2ZShiLngsYi55LGNbMV0sY1syXSxjWzNdLGNbNF0pKTticmVhaztjYXNlIkwiOmM9WyJDIl0uY29uY2F0KGIueCxiLnksY1sxXSxjWzJdLGNbMV0sY1syXSk7YnJlYWs7Y2FzZSJIIjpjPVsiQyJdLmNvbmNhdChiLngsYi55LGNbMV0sYi55LGNbMV0sYi55KTticmVhaztjYXNlIlYiOmM9WyJDIl0uY29uY2F0KGIueCxiLnksYi54LGNbMV0sYi54LGNbMV0pO2JyZWFrO2Nhc2UiWiI6Yz1bIkMiXS5jb25jYXQoYi54LGIueSxiLlgsYi5ZLGIuWCxiLlkpO2JyZWFrfXJldHVybiBjfSxxdWFkcmF0aWMyY3VydmU6ZnVuY3Rpb24oYixkLGgsZSxhLGMpe3ZhciBnPTEvMyxpPTIvMztyZXR1cm5bZypiK2kqaCxnKmQraSplLGcqYStpKmgsZypjK2kqZSxhLGNdfSxyb3RhdGU6ZnVuY3Rpb24oYixoLGEpe3ZhciBkPU1hdGguY29zKGEpLGM9TWF0aC5zaW4oYSksZz1iKmQtaCpjLGU9YipjK2gqZDtyZXR1cm57eDpnLHk6ZX19LGFyYzJjdXJ2ZTpmdW5jdGlvbih2LGFoLEosSCxCLG8saix1LGFnLEMpe3ZhciB6PXRoaXMsZT1NYXRoLlBJLEE9ei5yYWRpYW4sRz1lKjEyMC8xODAsYj1BKigrQnx8MCksTz1bXSxMPU1hdGgsVj1MLmNvcyxhPUwuc2luLFg9TC5zcXJ0LHc9TC5hYnMscD1MLmFzaW4sSyxjLHIsUSxQLGFjLGQsVCxXLEUsRCxuLG0scyxsLGFmLGcsYWUsUixVLFMsYWQsYWIsYWEsWSxOLFosTSxGLEkscTtpZighQyl7Sz16LnJvdGF0ZSh2LGFoLC1iKTt2PUsueDthaD1LLnk7Sz16LnJvdGF0ZSh1LGFnLC1iKTt1PUsueDthZz1LLnk7Yz1WKEEqQik7cj1hKEEqQik7UT0odi11KS8yO1A9KGFoLWFnKS8yO2FjPShRKlEpLyhKKkopKyhQKlApLyhIKkgpO2lmKGFjPjEpe2FjPVgoYWMpO0o9YWMqSjtIPWFjKkh9ZD1KKko7VD1IKkg7Vz0obz09aj8tMToxKSpYKHcoKGQqVC1kKlAqUC1UKlEqUSkvKGQqUCpQK1QqUSpRKSkpO0U9VypKKlAvSCsodit1KS8yO0Q9VyotSCpRL0orKGFoK2FnKS8yO249cCgoKGFoLUQpL0gpLnRvRml4ZWQoNykpO209cCgoKGFnLUQpL0gpLnRvRml4ZWQoNykpO249djxFP2UtbjpuO209dTxFP2UtbTptO2lmKG48MCl7bj1lKjIrbn1pZihtPDApe209ZSoyK219aWYoaiYmbj5tKXtuPW4tZSoyfWlmKCFqJiZtPm4pe209bS1lKjJ9fWVsc2V7bj1DWzBdO209Q1sxXTtFPUNbMl07RD1DWzNdfXM9bS1uO2lmKHcocyk+Ryl7Rj1tO0k9dTtxPWFnO209bitHKihqJiZtPm4/MTotMSk7dT1FK0oqVihtKTthZz1EK0gqYShtKTtPPXouYXJjMmN1cnZlKHUsYWcsSixILEIsMCxqLEkscSxbbSxGLEUsRF0pfXM9bS1uO2w9VihuKTthZj1hKG4pO2c9VihtKTthZT1hKG0pO1I9TC50YW4ocy80KTtVPTQvMypKKlI7Uz00LzMqSCpSO2FkPVt2LGFoXTthYj1bditVKmFmLGFoLVMqbF07YWE9W3UrVSphZSxhZy1TKmddO1k9W3UsYWddO2FiWzBdPTIqYWRbMF0tYWJbMF07YWJbMV09MiphZFsxXS1hYlsxXTtpZihDKXtyZXR1cm5bYWIsYWEsWV0uY29uY2F0KE8pfWVsc2V7Tz1bYWIsYWEsWV0uY29uY2F0KE8pLmpvaW4oKS5zcGxpdCgiLCIpO049W107TT1PLmxlbmd0aDtmb3IoWj0wO1o8TTtaKyspe05bWl09WiUyP3oucm90YXRlKE9bWi0xXSxPW1pdLGIpLnk6ei5yb3RhdGUoT1taXSxPW1orMV0sYikueH1yZXR1cm4gTn19LHJvdGF0ZUFuZFRyYW5zbGF0ZVBhdGg6ZnVuY3Rpb24oayl7dmFyIGM9ay5yb3RhdGlvbi5kZWdyZWVzLGQ9ay5yb3RhdGlvbi54LGI9ay5yb3RhdGlvbi55LG89ay50cmFuc2xhdGlvbi54LGw9ay50cmFuc2xhdGlvbi55LG4sZyxhLG0sZSxoPVtdO2lmKCFjJiYhbyYmIWwpe3JldHVybiB0aGlzLnBhdGhUb0Fic29sdXRlKGsuYXR0ci5wYXRoKX1vPW98fDA7bD1sfHwwO249dGhpcy5wYXRoVG9BYnNvbHV0ZShrLmF0dHIucGF0aCk7Zm9yKGc9bi5sZW5ndGg7Zy0tOyl7YT1oW2ddPW5bZ10uc2xpY2UoKTtpZihhWzBdPT0iQSIpe209dGhpcy5yb3RhdGVQb2ludChhWzZdLGFbN10sYyxkLGIpO2FbNl09bS54K287YVs3XT1tLnkrbH1lbHNle2U9MTt3aGlsZShhW2UrMV0hPW51bGwpe209dGhpcy5yb3RhdGVQb2ludChhW2VdLGFbZSsxXSxjLGQsYik7YVtlXT1tLngrbzthW2UrMV09bS55K2w7ZSs9Mn19fXJldHVybiBofSxyb3RhdGVQb2ludDpmdW5jdGlvbihiLGgsZSxhLGcpe2lmKCFlKXtyZXR1cm57eDpiLHk6aH19YT1hfHwwO2c9Z3x8MDtiPWItYTtoPWgtZztlPWUqdGhpcy5yYWRpYW47dmFyIGQ9TWF0aC5jb3MoZSksYz1NYXRoLnNpbihlKTtyZXR1cm57eDpiKmQtaCpjK2EseTpiKmMraCpkK2d9fSxwYXRoRGltZW5zaW9uczpmdW5jdGlvbihtKXtpZighbXx8IShtKyIiKSl7cmV0dXJue3g6MCx5OjAsd2lkdGg6MCxoZWlnaHQ6MH19bT10aGlzLnBhdGgyY3VydmUobSk7dmFyIGs9MCxqPTAsZD1bXSxiPVtdLGU9MCxoPW0ubGVuZ3RoLGMsYSxsLGc7Zm9yKDtlPGg7ZSsrKXtjPW1bZV07aWYoY1swXT09Ik0iKXtrPWNbMV07aj1jWzJdO2QucHVzaChrKTtiLnB1c2goail9ZWxzZXtnPXRoaXMuY3VydmVEaW0oayxqLGNbMV0sY1syXSxjWzNdLGNbNF0sY1s1XSxjWzZdKTtkPWQuY29uY2F0KGcubWluLngsZy5tYXgueCk7Yj1iLmNvbmNhdChnLm1pbi55LGcubWF4LnkpO2s9Y1s1XTtqPWNbNl19fWE9TWF0aC5taW4uYXBwbHkoMCxkKTtsPU1hdGgubWluLmFwcGx5KDAsYik7cmV0dXJue3g6YSx5OmwscGF0aDptLHdpZHRoOk1hdGgubWF4LmFwcGx5KDAsZCktYSxoZWlnaHQ6TWF0aC5tYXguYXBwbHkoMCxiKS1sfX0saW50ZXJzZWN0SW5zaWRlOmZ1bmN0aW9uKGIsYyxhKXtyZXR1cm4oYVswXS1jWzBdKSooYlsxXS1jWzFdKT4oYVsxXS1jWzFdKSooYlswXS1jWzBdKX0saW50ZXJzZWN0SW50ZXJzZWN0aW9uOmZ1bmN0aW9uKG4sbSxnLGQpe3ZhciBjPVtdLGI9Z1swXS1kWzBdLGE9Z1sxXS1kWzFdLGs9blswXS1tWzBdLGk9blsxXS1tWzFdLGw9Z1swXSpkWzFdLWdbMV0qZFswXSxqPW5bMF0qbVsxXS1uWzFdKm1bMF0saD0xLyhiKmktYSprKTtjWzBdPShsKmstaipiKSpoO2NbMV09KGwqaS1qKmEpKmg7cmV0dXJuIGN9LGludGVyc2VjdDpmdW5jdGlvbihvLGMpe3ZhciBuPXRoaXMsaz0wLG09Yy5sZW5ndGgsaD1jW20tMV0scT1vLGcscixsLHAsYSxiLGQ7Zm9yKDtrPG07KytrKXtnPWNba107Yj1xO3E9W107cj1iW2IubGVuZ3RoLTFdO2Q9MDthPWIubGVuZ3RoO2Zvcig7ZDxhO2QrKyl7bD1iW2RdO2lmKG4uaW50ZXJzZWN0SW5zaWRlKGwsaCxnKSl7aWYoIW4uaW50ZXJzZWN0SW5zaWRlKHIsaCxnKSl7cS5wdXNoKG4uaW50ZXJzZWN0SW50ZXJzZWN0aW9uKHIsbCxoLGcpKX1xLnB1c2gobCl9ZWxzZXtpZihuLmludGVyc2VjdEluc2lkZShyLGgsZykpe3EucHVzaChuLmludGVyc2VjdEludGVyc2VjdGlvbihyLGwsaCxnKSl9fXI9bH1oPWd9cmV0dXJuIHF9LGJlemllcjpmdW5jdGlvbihoLGcsbSxsLGUpe2lmKGU9PT0wKXtyZXR1cm4gaH1lbHNle2lmKGU9PT0xKXtyZXR1cm4gbH19dmFyIGo9MS1lLGk9aipqKmosaz1lL2o7cmV0dXJuIGkqKGgrayooMypnK2sqKDMqbStsKmspKSl9LGJlemllckRpbTpmdW5jdGlvbih0LHEsbixtKXt2YXIgdj1bXSxnLGoscCxoLHUsZSx3LGssbyxsO2lmKHQrMypuPT1tKzMqcSl7Zz10LXE7Zy89MioodC1xLXErbik7aWYoZzwxJiZnPjApe3YucHVzaChnKX19ZWxzZXtqPXQtMypxKzMqbi1tO3A9MioodC1xLXErbik7aD10LXE7dT1wKnAtNCpqKmg7ZT1qK2o7aWYodT09PTApe2c9cC9lO2lmKGc8MSYmZz4wKXt2LnB1c2goZyl9fWVsc2V7aWYodT4wKXt3PU1hdGguc3FydCh1KTtnPSh3K3ApL2U7aWYoZzwxJiZnPjApe3YucHVzaChnKX1nPShwLXcpL2U7aWYoZzwxJiZnPjApe3YucHVzaChnKX19fX1rPU1hdGgubWluKHQsbSk7bz1NYXRoLm1heCh0LG0pO2ZvcihsPTA7bDx2Lmxlbmd0aDtsKyspe2s9TWF0aC5taW4oayx0aGlzLmJlemllcih0LHEsbixtLHZbbF0pKTtvPU1hdGgubWF4KG8sdGhpcy5iZXppZXIodCxxLG4sbSx2W2xdKSl9cmV0dXJuW2ssb119LGN1cnZlRGltOmZ1bmN0aW9uKGIsYSxkLGMsayxqLGgsZSl7dmFyIGk9dGhpcy5iZXppZXJEaW0oYixkLGssaCksZz10aGlzLmJlemllckRpbShhLGMsaixlKTtyZXR1cm57bWluOnt4OmlbMF0seTpnWzBdfSxtYXg6e3g6aVsxXSx5OmdbMV19fX0sZ2V0QW5jaG9yczpmdW5jdGlvbihlLGQsayxqLHYsdSxxKXtxPXF8fDQ7dmFyIGk9TWF0aCxwPWkuUEkscj1wLzIsbT1pLmFicyxhPWkuc2luLGI9aS5jb3MsZz1pLmF0YW4sdCxzLGgsbCxvLG4seCx3LGM7dD0oay1lKS9xO3M9KHYtaykvcTtpZigoaj49ZCYmaj49dSl8fChqPD1kJiZqPD11KSl7aD1sPXJ9ZWxzZXtoPWcoKGstZSkvbShqLWQpKTtpZihkPGope2g9cC1ofWw9Zygodi1rKS9tKGotdSkpO2lmKHU8ail7bD1wLWx9fWM9ci0oKGgrbCklKHAqMikpLzI7aWYoYz5yKXtjLT1wfWgrPWM7bCs9YztvPWstdCphKGgpO249ait0KmIoaCk7eD1rK3MqYShsKTt3PWorcypiKGwpO2lmKChqPmQmJm48ZCl8fChqPGQmJm4+ZCkpe28rPW0oZC1uKSooby1rKS8obi1qKTtuPWR9aWYoKGo+dSYmdzx1KXx8KGo8dSYmdz51KSl7eC09bSh1LXcpKih4LWspLyh3LWopO3c9dX1yZXR1cm57eDE6byx5MTpuLHgyOngseTI6d319LHNtb290aDpmdW5jdGlvbihhLHIpe3ZhciBxPXRoaXMucGF0aDJjdXJ2ZShhKSxlPVtxWzBdXSxrPXFbMF1bMV0saD1xWzBdWzJdLHMsdSx2PTEsbD1xLmxlbmd0aCxnPTEsbj1rLG09aCxjPTAsYj0wLEEseix3LG8sdCxwLGQ7Zm9yKDt2PGw7disrKXtBPXFbdl07ej1BLmxlbmd0aDt3PXFbdi0xXTtvPXcubGVuZ3RoO3Q9cVt2KzFdO3A9dCYmdC5sZW5ndGg7aWYoQVswXT09Ik0iKXtuPUFbMV07bT1BWzJdO3M9disxO3doaWxlKHFbc11bMF0hPSJDIil7cysrfWM9cVtzXVs1XTtiPXFbc11bNl07ZS5wdXNoKFsiTSIsbixtXSk7Zz1lLmxlbmd0aDtrPW47aD1tO2NvbnRpbnVlfWlmKEFbei0yXT09biYmQVt6LTFdPT1tJiYoIXR8fHRbMF09PSJNIikpe2Q9ZVtnXS5sZW5ndGg7dT10aGlzLmdldEFuY2hvcnMod1tvLTJdLHdbby0xXSxuLG0sZVtnXVtkLTJdLGVbZ11bZC0xXSxyKTtlW2ddWzFdPXUueDI7ZVtnXVsyXT11LnkyfWVsc2V7aWYoIXR8fHRbMF09PSJNIil7dT17eDE6QVt6LTJdLHkxOkFbei0xXX19ZWxzZXt1PXRoaXMuZ2V0QW5jaG9ycyh3W28tMl0sd1tvLTFdLEFbei0yXSxBW3otMV0sdFtwLTJdLHRbcC0xXSxyKX19ZS5wdXNoKFsiQyIsayxoLHUueDEsdS55MSxBW3otMl0sQVt6LTFdXSk7az11LngyO2g9dS55Mn1yZXR1cm4gZX0sZmluZERvdEF0U2VnbWVudDpmdW5jdGlvbihiLGEsZCxjLGosaSxoLGcsayl7dmFyIGU9MS1rO3JldHVybnt4Ok1hdGgucG93KGUsMykqYitNYXRoLnBvdyhlLDIpKjMqaypkK2UqMyprKmsqaitNYXRoLnBvdyhrLDMpKmgseTpNYXRoLnBvdyhlLDMpKmErTWF0aC5wb3coZSwyKSozKmsqYytlKjMqayprKmkrTWF0aC5wb3coaywzKSpnfX0sc25hcEVuZHM6ZnVuY3Rpb24ocixzLGQsbil7aWYoRXh0LmlzRGF0ZShyKSl7cmV0dXJuIHRoaXMuc25hcEVuZHNCeURhdGUocixzLGQpfXZhciBjPShzLXIpL2QsYT1NYXRoLmZsb29yKE1hdGgubG9nKGMpL01hdGguTE4xMCkrMSxlPU1hdGgucG93KDEwLGEpLHQscD1NYXRoLnJvdW5kKChjJWUpKk1hdGgucG93KDEwLDItYSkpLGI9W1swLDE1XSxbMjAsNF0sWzMwLDJdLFs0MCw0XSxbNTAsOV0sWzYwLDRdLFs3MCwyXSxbODAsNF0sWzEwMCwxNV1dLGg9MCxxLGssaixnLGw9MTAwMDAwMDAwMCxvPWIubGVuZ3RoO3Q9cj1NYXRoLmZsb29yKHIvZSkqZTtpZihuKXtmb3Ioaj0wO2o8bztqKyspe3E9YltqXVswXTtrPShxLXApPDA/MTAwMDAwMDoocS1wKS9iW2pdWzFdO2lmKGs8bCl7Zz1xO2w9a319Yz1NYXRoLmZsb29yKGMqTWF0aC5wb3coMTAsLWEpKSpNYXRoLnBvdygxMCxhKStnKk1hdGgucG93KDEwLGEtMik7d2hpbGUodDxzKXt0Kz1jO2grK31zPSt0LnRvRml4ZWQoMTApfWVsc2V7aD1kfXJldHVybntmcm9tOnIsdG86cyxwb3dlcjphLHN0ZXA6YyxzdGVwczpofX0sc25hcEVuZHNCeURhdGU6ZnVuY3Rpb24oayxsLGIsbSl7dmFyIGU9ZmFsc2UsaD1bW0V4dC5EYXRlLk1JTExJLFsxLDIsMyw1LDEwLDIwLDMwLDUwLDEwMCwyMDAsMzAwLDUwMF1dLFtFeHQuRGF0ZS5TRUNPTkQsWzEsMiwzLDUsMTAsMTUsMzBdXSxbRXh0LkRhdGUuTUlOVVRFLFsxLDIsMyw1LDEwLDIwLDMwXV0sW0V4dC5EYXRlLkhPVVIsWzEsMiwzLDQsNiwxMl1dLFtFeHQuRGF0ZS5EQVksWzEsMiwzLDcsMTRdXSxbRXh0LkRhdGUuTU9OVEgsWzEsMiwzLDQsNl1dXSxnPWgubGVuZ3RoLGk9ZmFsc2UsYyxkLGEsbjtmb3Iobj0wO248ZztuKyspe2M9aFtuXTtpZighaSl7Zm9yKGQ9MDtkPGNbMV0ubGVuZ3RoO2QrKyl7aWYobDxFeHQuRGF0ZS5hZGQoayxjWzBdLGNbMV1bZF0qYikpe2U9W2NbMF0sY1sxXVtkXV07aT10cnVlO2JyZWFrfX19fWlmKCFlKXthPXRoaXMuc25hcEVuZHMoay5nZXRGdWxsWWVhcigpLGwuZ2V0RnVsbFllYXIoKSsxLGIsbSk7ZT1bRGF0ZS5ZRUFSLE1hdGgucm91bmQoYS5zdGVwKV19cmV0dXJuIHRoaXMuc25hcEVuZHNCeURhdGVBbmRTdGVwKGssbCxlLG0pfSxzbmFwRW5kc0J5RGF0ZUFuZFN0ZXA6ZnVuY3Rpb24oaSxoLGUsYSl7dmFyIGQ9W2kuZ2V0RnVsbFllYXIoKSxpLmdldE1vbnRoKCksaS5nZXREYXRlKCksaS5nZXRIb3VycygpLGkuZ2V0TWludXRlcygpLGkuZ2V0U2Vjb25kcygpLGkuZ2V0TWlsbGlzZWNvbmRzKCldLGI9MCxnLGM7aWYoYSl7Zz1pfWVsc2V7c3dpdGNoKGVbMF0pe2Nhc2UgRXh0LkRhdGUuTUlMTEk6Zz1uZXcgRGF0ZShkWzBdLGRbMV0sZFsyXSxkWzNdLGRbNF0sZFs1XSxNYXRoLmZsb29yKGRbNl0vZVsxXSkqZVsxXSk7YnJlYWs7Y2FzZSBFeHQuRGF0ZS5TRUNPTkQ6Zz1uZXcgRGF0ZShkWzBdLGRbMV0sZFsyXSxkWzNdLGRbNF0sTWF0aC5mbG9vcihkWzVdL2VbMV0pKmVbMV0sMCk7YnJlYWs7Y2FzZSBFeHQuRGF0ZS5NSU5VVEU6Zz1uZXcgRGF0ZShkWzBdLGRbMV0sZFsyXSxkWzNdLE1hdGguZmxvb3IoZFs0XS9lWzFdKSplWzFdLDAsMCk7YnJlYWs7Y2FzZSBFeHQuRGF0ZS5IT1VSOmc9bmV3IERhdGUoZFswXSxkWzFdLGRbMl0sTWF0aC5mbG9vcihkWzNdL2VbMV0pKmVbMV0sMCwwLDApO2JyZWFrO2Nhc2UgRXh0LkRhdGUuREFZOmc9bmV3IERhdGUoZFswXSxkWzFdLE1hdGguZmxvb3IoZFsyXS0xL2VbMV0pKmVbMV0rMSwwLDAsMCwwKTticmVhaztjYXNlIEV4dC5EYXRlLk1PTlRIOmc9bmV3IERhdGUoZFswXSxNYXRoLmZsb29yKGRbMV0vZVsxXSkqZVsxXSwxLDAsMCwwLDApO2JyZWFrO2RlZmF1bHQ6Zz1uZXcgRGF0ZShNYXRoLmZsb29yKGRbMF0vZVsxXSkqZVsxXSwwLDEsMCwwLDAsMCk7YnJlYWt9fWM9Zzt3aGlsZShjPGgpe2M9RXh0LkRhdGUuYWRkKGMsZVswXSxlWzFdKTtiKyt9aWYoYSl7Yz1ofXJldHVybntmcm9tOitnLHRvOitjLHN0ZXA6KGMtZykvYixzdGVwczpifX0sc29ydGVyOmZ1bmN0aW9uKGQsYyl7cmV0dXJuIGQub2Zmc2V0LWMub2Zmc2V0fSxyYWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGElMzYwKk1hdGguUEkvMTgwfSxkZWdyZWVzOmZ1bmN0aW9uKGEpe3JldHVybiBhKjE4MC9NYXRoLlBJJTM2MH0sd2l0aGluQm94OmZ1bmN0aW9uKGEsYyxiKXtiPWJ8fHt9O3JldHVybihhPj1iLngmJmE8PShiLngrYi53aWR0aCkmJmM+PWIueSYmYzw9KGIueStiLmhlaWdodCkpfSxwYXJzZUdyYWRpZW50OmZ1bmN0aW9uKGspe3ZhciBlPXRoaXMsZz1rLnR5cGV8fCJsaW5lYXIiLGM9ay5hbmdsZXx8MCxpPWUucmFkaWFuLGw9ay5zdG9wcyxhPVtdLGosYixoLGQ7aWYoZz09ImxpbmVhciIpe2I9WzAsMCxNYXRoLmNvcyhjKmkpLE1hdGguc2luKGMqaSldO2g9MS8oTWF0aC5tYXgoTWF0aC5hYnMoYlsyXSksTWF0aC5hYnMoYlszXSkpfHwxKTtiWzJdKj1oO2JbM10qPWg7aWYoYlsyXTwwKXtiWzBdPS1iWzJdO2JbMl09MH1pZihiWzNdPDApe2JbMV09LWJbM107YlszXT0wfX1mb3IoaiBpbiBsKXtpZihsLmhhc093blByb3BlcnR5KGopJiZlLnN0b3BzUkUudGVzdChqKSl7ZD17b2Zmc2V0OnBhcnNlSW50KGosMTApLGNvbG9yOkV4dC5kcmF3LkNvbG9yLnRvSGV4KGxbal0uY29sb3IpfHwiI2ZmZmZmZiIsb3BhY2l0eTpsW2pdLm9wYWNpdHl8fDF9O2EucHVzaChkKX19RXh0LkFycmF5LnNvcnQoYSxlLnNvcnRlcik7aWYoZz09ImxpbmVhciIpe3JldHVybntpZDprLmlkLHR5cGU6Zyx2ZWN0b3I6YixzdG9wczphfX1lbHNle3JldHVybntpZDprLmlkLHR5cGU6ZyxjZW50ZXJYOmsuY2VudGVyWCxjZW50ZXJZOmsuY2VudGVyWSxmb2NhbFg6ay5mb2NhbFgsZm9jYWxZOmsuZm9jYWxZLHJhZGl1czprLnJhZGl1cyx2ZWN0b3I6YixzdG9wczphfX19fSk7RXh0LmRlZmluZSgiRXh0LmZ4LlByb3BlcnR5SGFuZGxlciIse3JlcXVpcmVzOlsiRXh0LmRyYXcuRHJhdyJdLHN0YXRpY3M6e2RlZmF1bHRIYW5kbGVyOntwaXhlbERlZmF1bHRzUkU6L3dpZHRofGhlaWdodHx0b3AkfGJvdHRvbSR8bGVmdCR8cmlnaHQkL2ksdW5pdFJFOi9eKC0/XGQqXC4/XGQqKXsxfShlbXxleHxweHxpbnxjbXxtbXxwdHxwY3wlKSokLyxzY3JvbGxSRTovXnNjcm9sbC9pLGNvbXB1dGVEZWx0YTpmdW5jdGlvbihqLGMsYSxnLGkpe2E9KHR5cGVvZiBhPT0ibnVtYmVyIik/YToxO3ZhciBoPXRoaXMudW5pdFJFLGQ9aC5leGVjKGopLGIsZTtpZihkKXtqPWRbMV07ZT1kWzJdO2lmKCF0aGlzLnNjcm9sbFJFLnRlc3QoaSkmJiFlJiZ0aGlzLnBpeGVsRGVmYXVsdHNSRS50ZXN0KGkpKXtlPSJweCJ9fWo9K2p8fDA7ZD1oLmV4ZWMoYyk7aWYoZCl7Yz1kWzFdO2U9ZFsyXXx8ZX1jPStjfHwwO2I9KGchPW51bGwpP2c6ajtyZXR1cm57ZnJvbTpqLGRlbHRhOihjLWIpKmEsdW5pdHM6ZX19LGdldDpmdW5jdGlvbihvLGIsYSxuLGspe3ZhciBtPW8ubGVuZ3RoLGQ9W10sZSxoLGwsYyxnO2ZvcihlPTA7ZTxtO2UrKyl7aWYobil7aD1uW2VdWzFdLmZyb219aWYoRXh0LmlzQXJyYXkob1tlXVsxXSkmJkV4dC5pc0FycmF5KGIpKXtsPVtdO2M9MDtnPW9bZV1bMV0ubGVuZ3RoO2Zvcig7YzxnO2MrKyl7bC5wdXNoKHRoaXMuY29tcHV0ZURlbHRhKG9bZV1bMV1bY10sYltjXSxhLGgsaykpfWQucHVzaChbb1tlXVswXSxsXSl9ZWxzZXtkLnB1c2goW29bZV1bMF0sdGhpcy5jb21wdXRlRGVsdGEob1tlXVsxXSxiLGEsaCxrKV0pfX1yZXR1cm4gZH0sc2V0OmZ1bmN0aW9uKGwsZyl7dmFyIGg9bC5sZW5ndGgsYz1bXSxkLGEsayxlLGI7Zm9yKGQ9MDtkPGg7ZCsrKXthPWxbZF1bMV07aWYoRXh0LmlzQXJyYXkoYSkpe2s9W107Yj0wO2U9YS5sZW5ndGg7Zm9yKDtiPGU7YisrKXtrLnB1c2goYVtiXS5mcm9tK2FbYl0uZGVsdGEqZysoYVtiXS51bml0c3x8MCkpfWMucHVzaChbbFtkXVswXSxrXSl9ZWxzZXtjLnB1c2goW2xbZF1bMF0sYS5mcm9tK2EuZGVsdGEqZysoYS51bml0c3x8MCldKX19cmV0dXJuIGN9fSxzdHJpbmdIYW5kbGVyOntjb21wdXRlRGVsdGE6ZnVuY3Rpb24oZSxiLGQsYyxhKXtyZXR1cm57ZnJvbTplLGRlbHRhOmJ9fSxnZXQ6ZnVuY3Rpb24obyxiLGEsbixrKXt2YXIgbT1vLmxlbmd0aCxkPVtdLGUsaCxsLGMsZztmb3IoZT0wO2U8bTtlKyspe2QucHVzaChbb1tlXVswXSx0aGlzLmNvbXB1dGVEZWx0YShvW2VdWzFdLGIsYSxoLGspXSl9cmV0dXJuIGR9LHNldDpmdW5jdGlvbihsLGcpe3ZhciBoPWwubGVuZ3RoLGM9W10sZCxhLGssZSxiO2ZvcihkPTA7ZDxoO2QrKyl7YT1sW2RdWzFdO2MucHVzaChbbFtkXVswXSxhLmRlbHRhXSl9cmV0dXJuIGN9fSxjb2xvcjp7cmdiUkU6L15yZ2JcKChbMC05XSspXHMqLFxzKihbMC05XSspXHMqLFxzKihbMC05XSspXCkkL2ksaGV4UkU6L14jPyhbMC05QS1GXXsyfSkoWzAtOUEtRl17Mn0pKFswLTlBLUZdezJ9KSQvaSxoZXgzUkU6L14jPyhbMC05QS1GXXsxfSkoWzAtOUEtRl17MX0pKFswLTlBLUZdezF9KSQvaSxwYXJzZUNvbG9yOmZ1bmN0aW9uKGUsYSl7YT0odHlwZW9mIGE9PSJudW1iZXIiKT9hOjE7dmFyIGc9ZmFsc2UsYz1bdGhpcy5oZXhSRSx0aGlzLnJnYlJFLHRoaXMuaGV4M1JFXSxkPWMubGVuZ3RoLGosYixrLGg7Zm9yKGg9MDtoPGQ7aCsrKXtrPWNbaF07Yj0oaCUyPT09MCk/MTY6MTA7aj1rLmV4ZWMoZSk7aWYoaiYmai5sZW5ndGg9PT00KXtpZihoPT09Mil7alsxXSs9alsxXTtqWzJdKz1qWzJdO2pbM10rPWpbM119Zz17cmVkOnBhcnNlSW50KGpbMV0sYiksZ3JlZW46cGFyc2VJbnQoalsyXSxiKSxibHVlOnBhcnNlSW50KGpbM10sYil9O2JyZWFrfX1yZXR1cm4gZ3x8ZX0sY29tcHV0ZURlbHRhOmZ1bmN0aW9uKGgsYSxlLGMpe2g9dGhpcy5wYXJzZUNvbG9yKGgpO2E9dGhpcy5wYXJzZUNvbG9yKGEsZSk7dmFyIGc9Yz9jOmgsYj10eXBlb2YgZyxkPXR5cGVvZiBhO2lmKGI9PSJzdHJpbmcifHxiPT0idW5kZWZpbmVkInx8ZD09InN0cmluZyJ8fGQ9PSJ1bmRlZmluZWQiKXtyZXR1cm4gYXx8Z31yZXR1cm57ZnJvbTpoLGRlbHRhOntyZWQ6TWF0aC5yb3VuZCgoYS5yZWQtZy5yZWQpKmUpLGdyZWVuOk1hdGgucm91bmQoKGEuZ3JlZW4tZy5ncmVlbikqZSksYmx1ZTpNYXRoLnJvdW5kKChhLmJsdWUtZy5ibHVlKSplKX19fSxnZXQ6ZnVuY3Rpb24oaixhLGcsZCl7dmFyIGg9ai5sZW5ndGgsYz1bXSxlLGI7Zm9yKGU9MDtlPGg7ZSsrKXtpZihkKXtiPWRbZV1bMV0uZnJvbX1jLnB1c2goW2pbZV1bMF0sdGhpcy5jb21wdXRlRGVsdGEoaltlXVsxXSxhLGcsYildKX1yZXR1cm4gY30sc2V0OmZ1bmN0aW9uKGssZSl7dmFyIGc9ay5sZW5ndGgsYz1bXSxkLGIsYSxoLGo7Zm9yKGQ9MDtkPGc7ZCsrKXtiPWtbZF1bMV07aWYoYil7aD1iLmZyb207aj1iLmRlbHRhO2I9KHR5cGVvZiBiPT0ib2JqZWN0IiYmInJlZCIgaW4gYik/InJnYigiK2IucmVkKyIsICIrYi5ncmVlbisiLCAiK2IuYmx1ZSsiKSI6YjtiPSh0eXBlb2YgYj09Im9iamVjdCImJmIubGVuZ3RoKT9iWzBdOmI7aWYodHlwZW9mIGI9PSJ1bmRlZmluZWQiKXtyZXR1cm5bXX1hPXR5cGVvZiBiPT0ic3RyaW5nIj9iOiJyZ2IoIitbKGgucmVkK01hdGgucm91bmQoai5yZWQqZSkpJTI1NiwoaC5ncmVlbitNYXRoLnJvdW5kKGouZ3JlZW4qZSkpJTI1NiwoaC5ibHVlK01hdGgucm91bmQoai5ibHVlKmUpKSUyNTZdLmpvaW4oIiwiKSsiKSI7Yy5wdXNoKFtrW2RdWzBdLGFdKX19cmV0dXJuIGN9fSxvYmplY3Q6e2ludGVycG9sYXRlOmZ1bmN0aW9uKGQsYil7Yj0odHlwZW9mIGI9PSJudW1iZXIiKT9iOjE7dmFyIGE9e30sYztmb3IoYyBpbiBkKXthW2NdPXBhcnNlRmxvYXQoZFtjXSkqYn1yZXR1cm4gYX0sY29tcHV0ZURlbHRhOmZ1bmN0aW9uKGgsYSxjLGIpe2g9dGhpcy5pbnRlcnBvbGF0ZShoKTthPXRoaXMuaW50ZXJwb2xhdGUoYSxjKTt2YXIgZz1iP2I6aCxlPXt9LGQ7Zm9yKGQgaW4gYSl7ZVtkXT1hW2RdLWdbZF19cmV0dXJue2Zyb206aCxkZWx0YTplfX0sZ2V0OmZ1bmN0aW9uKGosYSxnLGQpe3ZhciBoPWoubGVuZ3RoLGM9W10sZSxiO2ZvcihlPTA7ZTxoO2UrKyl7aWYoZCl7Yj1kW2VdWzFdLmZyb219Yy5wdXNoKFtqW2VdWzBdLHRoaXMuY29tcHV0ZURlbHRhKGpbZV1bMV0sYSxnLGIpXSl9cmV0dXJuIGN9LHNldDpmdW5jdGlvbihsLGcpe3ZhciBoPWwubGVuZ3RoLGM9W10sZT17fSxkLGosayxiLGE7Zm9yKGQ9MDtkPGg7ZCsrKXtiPWxbZF1bMV07aj1iLmZyb207az1iLmRlbHRhO2ZvcihhIGluIGope2VbYV09althXStrW2FdKmd9Yy5wdXNoKFtsW2RdWzBdLGVdKX1yZXR1cm4gY319LHBhdGg6e2NvbXB1dGVEZWx0YTpmdW5jdGlvbihlLGEsYyxiKXtjPSh0eXBlb2YgYz09Im51bWJlciIpP2M6MTt2YXIgZDtlPStlfHwwO2E9K2F8fDA7ZD0oYiE9bnVsbCk/YjplO3JldHVybntmcm9tOmUsZGVsdGE6KGEtZCkqY319LGZvcmNlUGF0aDpmdW5jdGlvbihhKXtpZighRXh0LmlzQXJyYXkoYSkmJiFFeHQuaXNBcnJheShhWzBdKSl7YT1FeHQuZHJhdy5EcmF3LnBhcnNlUGF0aFN0cmluZyhhKX1yZXR1cm4gYX0sZ2V0OmZ1bmN0aW9uKGIsbCxhLHEpe3ZhciBjPXRoaXMuZm9yY2VQYXRoKGwpLG49W10scz1iLmxlbmd0aCxkLGgsbyxnLHAsbSxlLHQscjtmb3Iobz0wO288cztvKyspe3I9dGhpcy5mb3JjZVBhdGgoYltvXVsxXSk7Zz1FeHQuZHJhdy5EcmF3LmludGVycG9sYXRlUGF0aHMocixjKTtyPWdbMF07Yz1nWzFdO2Q9ci5sZW5ndGg7dD1bXTtmb3IobT0wO208ZDttKyspe2c9W3JbbV1bMF1dO2g9clttXS5sZW5ndGg7Zm9yKGU9MTtlPGg7ZSsrKXtwPXEmJnFbMF1bMV1bbV1bZV0uZnJvbTtnLnB1c2godGhpcy5jb21wdXRlRGVsdGEoclttXVtlXSxjW21dW2VdLGEscCkpfXQucHVzaChnKX1uLnB1c2goW2Jbb11bMF0sdF0pfXJldHVybiBufSxzZXQ6ZnVuY3Rpb24ocCxuKXt2YXIgbz1wLmxlbmd0aCxlPVtdLGgsZyxkLGwsbSxjLGEsYjtmb3IoaD0wO2g8bztoKyspe2M9cFtoXVsxXTtsPVtdO2E9Yy5sZW5ndGg7Zm9yKGc9MDtnPGE7ZysrKXttPVtjW2ddWzBdXTtiPWNbZ10ubGVuZ3RoO2ZvcihkPTE7ZDxiO2QrKyl7bS5wdXNoKGNbZ11bZF0uZnJvbStjW2ddW2RdLmRlbHRhKm4pfWwucHVzaChtLmpvaW4oIiwiKSl9ZS5wdXNoKFtwW2hdWzBdLGwuam9pbigiLCIpXSl9cmV0dXJuIGV9fX19LGZ1bmN0aW9uKCl7dmFyIGI9WyJvdXRsaW5lQ29sb3IiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJDb2xvciIsImJvcmRlclRvcENvbG9yIiwiYm9yZGVyUmlnaHRDb2xvciIsImJvcmRlckJvdHRvbUNvbG9yIiwiYm9yZGVyTGVmdENvbG9yIiwiZmlsbCIsInN0cm9rZSJdLGM9Yi5sZW5ndGgsYT0wLGQ7Zm9yKDthPGM7YSsrKXtkPWJbYV07dGhpc1tkXT10aGlzLmNvbG9yfWI9WyJjdXJzb3IiXTtjPWIubGVuZ3RoO2E9MDtmb3IoO2E8YzthKyspe2Q9YlthXTt0aGlzW2RdPXRoaXMuc3RyaW5nSGFuZGxlcn19KTtFeHQuZGVmaW5lKCJFeHQuZnguQW5pbSIse21peGluczp7b2JzZXJ2YWJsZToiRXh0LnV0aWwuT2JzZXJ2YWJsZSJ9LHJlcXVpcmVzOlsiRXh0LmZ4Lk1hbmFnZXIiLCJFeHQuZnguQW5pbWF0b3IiLCJFeHQuZnguRWFzaW5nIiwiRXh0LmZ4LkN1YmljQmV6aWVyIiwiRXh0LmZ4LlByb3BlcnR5SGFuZGxlciJdLGlzQW5pbWF0aW9uOnRydWUsZHVyYXRpb246MjUwLGRlbGF5OjAsZGVsYXlTdGFydDowLGR5bmFtaWM6ZmFsc2UsZWFzaW5nOiJlYXNlIixkYW1wZXI6MSxiZXppZXJSRTovXig/OmN1YmljLSk/YmV6aWVyXCgoW14sXSspLChbXixdKyksKFteLF0rKSwoW15cKV0rKVwpLyxyZXZlcnNlOmZhbHNlLHJ1bm5pbmc6ZmFsc2UscGF1c2VkOmZhbHNlLGl0ZXJhdGlvbnM6MSxhbHRlcm5hdGU6ZmFsc2UsY3VycmVudEl0ZXJhdGlvbjowLHN0YXJ0VGltZTowLGZyYW1lQ291bnQ6MCxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM7YT1hfHx7fTtpZihhLmtleWZyYW1lcyl7cmV0dXJuIG5ldyBFeHQuZnguQW5pbWF0b3IoYSl9RXh0LmFwcGx5KGIsYSk7aWYoYi5mcm9tPT09dW5kZWZpbmVkKXtiLmZyb209e319Yi5wcm9wSGFuZGxlcnM9e307Yi5jb25maWc9YTtiLnRhcmdldD1FeHQuZnguTWFuYWdlci5jcmVhdGVUYXJnZXQoYi50YXJnZXQpO2IuZWFzaW5nRm49RXh0LmZ4LkVhc2luZ1tiLmVhc2luZ107Yi50YXJnZXQuZHluYW1pYz1iLmR5bmFtaWM7aWYoIWIuZWFzaW5nRm4pe2IuZWFzaW5nRm49U3RyaW5nKGIuZWFzaW5nKS5tYXRjaChiLmJlemllclJFKTtpZihiLmVhc2luZ0ZuJiZiLmVhc2luZ0ZuLmxlbmd0aD09NSl7Yz1iLmVhc2luZ0ZuO2IuZWFzaW5nRm49RXh0LmZ4LkN1YmljQmV6aWVyLmN1YmljQmV6aWVyKCtjWzFdLCtjWzJdLCtjWzNdLCtjWzRdKX19Yi5pZD1FeHQuaWQobnVsbCwiZXh0LWFuaW0tIik7Yi5hZGRFdmVudHMoImJlZm9yZWFuaW1hdGUiLCJhZnRlcmFuaW1hdGUiLCJsYXN0ZnJhbWUiKTtiLm1peGlucy5vYnNlcnZhYmxlLmNvbnN0cnVjdG9yLmNhbGwoYik7RXh0LmZ4Lk1hbmFnZXIuYWRkQW5pbShiKX0sc2V0QXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBFeHQuZnguTWFuYWdlci5pdGVtcy5nZXQodGhpcy5pZCkuc2V0QXR0cih0aGlzLnRhcmdldCxhLGIpfSxpbml0QXR0cnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGg9ZS5mcm9tLGk9ZS50byxnPWUuaW5pdGlhbEZyb218fHt9LGM9e30sYSxiLGosZDtmb3IoZCBpbiBpKXtpZihpLmhhc093blByb3BlcnR5KGQpKXthPWUudGFyZ2V0LmdldEF0dHIoZCxoW2RdKTtiPWlbZF07aWYoIUV4dC5meC5Qcm9wZXJ0eUhhbmRsZXJbZF0pe2lmKEV4dC5pc09iamVjdChiKSl7aj1lLnByb3BIYW5kbGVyc1tkXT1FeHQuZnguUHJvcGVydHlIYW5kbGVyLm9iamVjdH1lbHNle2o9ZS5wcm9wSGFuZGxlcnNbZF09RXh0LmZ4LlByb3BlcnR5SGFuZGxlci5kZWZhdWx0SGFuZGxlcn19ZWxzZXtqPWUucHJvcEhhbmRsZXJzW2RdPUV4dC5meC5Qcm9wZXJ0eUhhbmRsZXJbZF19Y1tkXT1qLmdldChhLGIsZS5kYW1wZXIsZ1tkXSxkKX19ZS5jdXJyZW50QXR0cnM9Y30sc3RhcnQ6ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcyxjPWUuZGVsYXksYj1lLmRlbGF5U3RhcnQsYTtpZihjKXtpZighYil7ZS5kZWxheVN0YXJ0PWQ7cmV0dXJufWVsc2V7YT1kLWI7aWYoYTxjKXtyZXR1cm59ZWxzZXtkPW5ldyBEYXRlKGIuZ2V0VGltZSgpK2MpfX19aWYoZS5maXJlRXZlbnQoImJlZm9yZWFuaW1hdGUiLGUpIT09ZmFsc2Upe2Uuc3RhcnRUaW1lPWQ7aWYoIWUucGF1c2VkJiYhZS5jdXJyZW50QXR0cnMpe2UuaW5pdEF0dHJzKCl9ZS5ydW5uaW5nPXRydWU7ZS5mcmFtZUNvdW50PTB9fSxydW5BbmltOmZ1bmN0aW9uKGwpe3ZhciBpPXRoaXMsaz1pLmN1cnJlbnRBdHRycyxkPWkuZHVyYXRpb24sYz1pLmVhc2luZ0ZuLGI9aS5wcm9wSGFuZGxlcnMsZz17fSxoLGosZSxhO2lmKGw+PWQpe2w9ZDthPXRydWV9aWYoaS5yZXZlcnNlKXtsPWQtbH1mb3IoZSBpbiBrKXtpZihrLmhhc093blByb3BlcnR5KGUpKXtqPWtbZV07aD1hPzE6YyhsL2QpO2dbZV09YltlXS5zZXQoaixoKX19aS5mcmFtZUNvdW50Kys7cmV0dXJuIGd9LGxhc3RGcmFtZTpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYT1jLml0ZXJhdGlvbnMsYj1jLmN1cnJlbnRJdGVyYXRpb247YisrO2lmKGI8YSl7aWYoYy5hbHRlcm5hdGUpe2MucmV2ZXJzZT0hYy5yZXZlcnNlfWMuc3RhcnRUaW1lPW5ldyBEYXRlKCk7Yy5jdXJyZW50SXRlcmF0aW9uPWI7Yy5wYXVzZWQ9ZmFsc2V9ZWxzZXtjLmN1cnJlbnRJdGVyYXRpb249MDtjLmVuZCgpO2MuZmlyZUV2ZW50KCJsYXN0ZnJhbWUiLGMsYy5zdGFydFRpbWUpfX0sZW5kV2FzQ2FsbGVkOjAsZW5kOmZ1bmN0aW9uKCl7aWYodGhpcy5lbmRXYXNDYWxsZWQrKyl7cmV0dXJufXZhciBhPXRoaXM7YS5zdGFydFRpbWU9MDthLnBhdXNlZD1mYWxzZTthLnJ1bm5pbmc9ZmFsc2U7RXh0LmZ4Lk1hbmFnZXIucmVtb3ZlQW5pbShhKTthLmZpcmVFdmVudCgiYWZ0ZXJhbmltYXRlIixhLGEuc3RhcnRUaW1lKTtFeHQuY2FsbGJhY2soYS5jYWxsYmFjayxhLnNjb3BlLFthLGEuc3RhcnRUaW1lXSl9LGlzUmVhZHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXVzZWQ9PT1mYWxzZSYmdGhpcy5ydW5uaW5nPT09ZmFsc2UmJnRoaXMuaXRlcmF0aW9ucz4wfSxpc1J1bm5pbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXVzZWQ9PT1mYWxzZSYmdGhpcy5ydW5uaW5nPT09dHJ1ZSYmdGhpcy5pc0FuaW1hdG9yIT09dHJ1ZX19KTtFeHQuZW5hYmxlRng9dHJ1ZTtFeHQuZGVmaW5lKCJFeHQuZGQuRHJhZ0Ryb3AiLHtyZXF1aXJlczpbIkV4dC5kZC5EcmFnRHJvcE1hbmFnZXIiXSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihjLGEsYil7aWYoYyl7dGhpcy5pbml0KGMsYSxiKX19LGlkOm51bGwsY29uZmlnOm51bGwsZHJhZ0VsSWQ6bnVsbCxoYW5kbGVFbElkOm51bGwsaW52YWxpZEhhbmRsZVR5cGVzOm51bGwsaW52YWxpZEhhbmRsZUlkczpudWxsLGludmFsaWRIYW5kbGVDbGFzc2VzOm51bGwsc3RhcnRQYWdlWDowLHN0YXJ0UGFnZVk6MCxncm91cHM6bnVsbCxsb2NrZWQ6ZmFsc2UsbG9jazpmdW5jdGlvbigpe3RoaXMubG9ja2VkPXRydWV9LG1vdmVPbmx5OmZhbHNlLHVubG9jazpmdW5jdGlvbigpe3RoaXMubG9ja2VkPWZhbHNlfSxpc1RhcmdldDp0cnVlLHBhZGRpbmc6bnVsbCxfZG9tUmVmOm51bGwsX195Z0RyYWdEcm9wOnRydWUsY29uc3RyYWluWDpmYWxzZSxjb25zdHJhaW5ZOmZhbHNlLG1pblg6MCxtYXhYOjAsbWluWTowLG1heFk6MCxtYWludGFpbk9mZnNldDpmYWxzZSx4VGlja3M6bnVsbCx5VGlja3M6bnVsbCxwcmltYXJ5QnV0dG9uT25seTp0cnVlLGF2YWlsYWJsZTpmYWxzZSxoYXNPdXRlckhhbmRsZXM6ZmFsc2UsYjRTdGFydERyYWc6ZnVuY3Rpb24oYSxiKXt9LHN0YXJ0RHJhZzpmdW5jdGlvbihhLGIpe30sYjREcmFnOmZ1bmN0aW9uKGEpe30sb25EcmFnOmZ1bmN0aW9uKGEpe30sb25EcmFnRW50ZXI6ZnVuY3Rpb24oYSxiKXt9LGI0RHJhZ092ZXI6ZnVuY3Rpb24oYSl7fSxvbkRyYWdPdmVyOmZ1bmN0aW9uKGEsYil7fSxiNERyYWdPdXQ6ZnVuY3Rpb24oYSl7fSxvbkRyYWdPdXQ6ZnVuY3Rpb24oYSxiKXt9LGI0RHJhZ0Ryb3A6ZnVuY3Rpb24oYSl7fSxvbkRyYWdEcm9wOmZ1bmN0aW9uKGEsYil7fSxvbkludmFsaWREcm9wOmZ1bmN0aW9uKGEpe30sYjRFbmREcmFnOmZ1bmN0aW9uKGEpe30sZW5kRHJhZzpmdW5jdGlvbihhKXt9LGI0TW91c2VEb3duOmZ1bmN0aW9uKGEpe30sb25Nb3VzZURvd246ZnVuY3Rpb24oYSl7fSxvbk1vdXNlVXA6ZnVuY3Rpb24oYSl7fSxvbkF2YWlsYWJsZTpmdW5jdGlvbigpe30sZGVmYXVsdFBhZGRpbmc6e2xlZnQ6MCxyaWdodDowLHRvcDowLGJvdHRvbTowfSxjb25zdHJhaW5UbzpmdW5jdGlvbihpLGcsbil7aWYoRXh0LmlzTnVtYmVyKGcpKXtnPXtsZWZ0OmcscmlnaHQ6Zyx0b3A6Zyxib3R0b206Z319Zz1nfHx0aGlzLmRlZmF1bHRQYWRkaW5nO3ZhciBrPUV4dC5nZXQodGhpcy5nZXRFbCgpKS5nZXRCb3goKSxhPUV4dC5nZXQoaSksbT1hLmdldFNjcm9sbCgpLGosZD1hLmRvbSxsLGgsZTtpZihkPT1kb2N1bWVudC5ib2R5KXtqPXt4Om0ubGVmdCx5Om0udG9wLHdpZHRoOkV4dC5FbGVtZW50LmdldFZpZXdXaWR0aCgpLGhlaWdodDpFeHQuRWxlbWVudC5nZXRWaWV3SGVpZ2h0KCl9fWVsc2V7bD1hLmdldFhZKCk7aj17eDpsWzBdLHk6bFsxXSx3aWR0aDpkLmNsaWVudFdpZHRoLGhlaWdodDpkLmNsaWVudEhlaWdodH19aD1rLnktai55O2U9ay54LWoueDt0aGlzLnJlc2V0Q29uc3RyYWludHMoKTt0aGlzLnNldFhDb25zdHJhaW50KGUtKGcubGVmdHx8MCksai53aWR0aC1lLWsud2lkdGgtKGcucmlnaHR8fDApLHRoaXMueFRpY2tTaXplKTt0aGlzLnNldFlDb25zdHJhaW50KGgtKGcudG9wfHwwKSxqLmhlaWdodC1oLWsuaGVpZ2h0LShnLmJvdHRvbXx8MCksdGhpcy55VGlja1NpemUpfSxnZXRFbDpmdW5jdGlvbigpe2lmKCF0aGlzLl9kb21SZWYpe3RoaXMuX2RvbVJlZj1FeHQuZ2V0RG9tKHRoaXMuaWQpfXJldHVybiB0aGlzLl9kb21SZWZ9LGdldERyYWdFbDpmdW5jdGlvbigpe3JldHVybiBFeHQuZ2V0RG9tKHRoaXMuZHJhZ0VsSWQpfSxpbml0OmZ1bmN0aW9uKGMsYSxiKXt0aGlzLmluaXRUYXJnZXQoYyxhLGIpO0V4dC5FdmVudE1hbmFnZXIub24odGhpcy5pZCwibW91c2Vkb3duIix0aGlzLmhhbmRsZU1vdXNlRG93bix0aGlzKX0saW5pdFRhcmdldDpmdW5jdGlvbihjLGEsYil7dGhpcy5jb25maWc9Ynx8e307dGhpcy5ERE1JbnN0YW5jZT1FeHQuZGQuRHJhZ0Ryb3BNYW5hZ2VyO3RoaXMuZ3JvdXBzPXt9O2lmKHR5cGVvZiBjIT09InN0cmluZyIpe2M9RXh0LmlkKGMpfXRoaXMuaWQ9Yzt0aGlzLmFkZFRvR3JvdXAoKGEpP2E6ImRlZmF1bHQiKTt0aGlzLmhhbmRsZUVsSWQ9Yzt0aGlzLnNldERyYWdFbElkKGMpO3RoaXMuaW52YWxpZEhhbmRsZVR5cGVzPXtBOiJBIn07dGhpcy5pbnZhbGlkSGFuZGxlSWRzPXt9O3RoaXMuaW52YWxpZEhhbmRsZUNsYXNzZXM9W107dGhpcy5hcHBseUNvbmZpZygpO3RoaXMuaGFuZGxlT25BdmFpbGFibGUoKX0sYXBwbHlDb25maWc6ZnVuY3Rpb24oKXt0aGlzLnBhZGRpbmc9dGhpcy5jb25maWcucGFkZGluZ3x8WzAsMCwwLDBdO3RoaXMuaXNUYXJnZXQ9KHRoaXMuY29uZmlnLmlzVGFyZ2V0IT09ZmFsc2UpO3RoaXMubWFpbnRhaW5PZmZzZXQ9KHRoaXMuY29uZmlnLm1haW50YWluT2Zmc2V0KTt0aGlzLnByaW1hcnlCdXR0b25Pbmx5PSh0aGlzLmNvbmZpZy5wcmltYXJ5QnV0dG9uT25seSE9PWZhbHNlKX0saGFuZGxlT25BdmFpbGFibGU6ZnVuY3Rpb24oKXt0aGlzLmF2YWlsYWJsZT10cnVlO3RoaXMucmVzZXRDb25zdHJhaW50cygpO3RoaXMub25BdmFpbGFibGUoKX0sc2V0UGFkZGluZzpmdW5jdGlvbihjLGEsZCxiKXtpZighYSYmMCE9PWEpe3RoaXMucGFkZGluZz1bYyxjLGMsY119ZWxzZXtpZighZCYmMCE9PWQpe3RoaXMucGFkZGluZz1bYyxhLGMsYV19ZWxzZXt0aGlzLnBhZGRpbmc9W2MsYSxkLGJdfX19LHNldEluaXRQb3NpdGlvbjpmdW5jdGlvbihkLGMpe3ZhciBlPXRoaXMuZ2V0RWwoKSxiLGEsZztpZighdGhpcy5ERE1JbnN0YW5jZS52ZXJpZnlFbChlKSl7cmV0dXJufWI9ZHx8MDthPWN8fDA7Zz1FeHQuRWxlbWVudC5nZXRYWShlKTt0aGlzLmluaXRQYWdlWD1nWzBdLWI7dGhpcy5pbml0UGFnZVk9Z1sxXS1hO3RoaXMubGFzdFBhZ2VYPWdbMF07dGhpcy5sYXN0UGFnZVk9Z1sxXTt0aGlzLnNldFN0YXJ0UG9zaXRpb24oZyl9LHNldFN0YXJ0UG9zaXRpb246ZnVuY3Rpb24oYil7dmFyIGE9Ynx8RXh0LkVsZW1lbnQuZ2V0WFkodGhpcy5nZXRFbCgpKTt0aGlzLmRlbHRhU2V0WFk9bnVsbDt0aGlzLnN0YXJ0UGFnZVg9YVswXTt0aGlzLnN0YXJ0UGFnZVk9YVsxXX0sYWRkVG9Hcm91cDpmdW5jdGlvbihhKXt0aGlzLmdyb3Vwc1thXT10cnVlO3RoaXMuRERNSW5zdGFuY2UucmVnRHJhZ0Ryb3AodGhpcyxhKX0scmVtb3ZlRnJvbUdyb3VwOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZ3JvdXBzW2FdKXtkZWxldGUgdGhpcy5ncm91cHNbYV19dGhpcy5ERE1JbnN0YW5jZS5yZW1vdmVEREZyb21Hcm91cCh0aGlzLGEpfSxzZXREcmFnRWxJZDpmdW5jdGlvbihhKXt0aGlzLmRyYWdFbElkPWF9LHNldEhhbmRsZUVsSWQ6ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGEhPT0ic3RyaW5nIil7YT1FeHQuaWQoYSl9dGhpcy5oYW5kbGVFbElkPWE7dGhpcy5ERE1JbnN0YW5jZS5yZWdIYW5kbGUodGhpcy5pZCxhKX0sc2V0T3V0ZXJIYW5kbGVFbElkOmZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhIT09InN0cmluZyIpe2E9RXh0LmlkKGEpfUV4dC5FdmVudE1hbmFnZXIub24oYSwibW91c2Vkb3duIix0aGlzLmhhbmRsZU1vdXNlRG93bix0aGlzKTt0aGlzLnNldEhhbmRsZUVsSWQoYSk7dGhpcy5oYXNPdXRlckhhbmRsZXM9dHJ1ZX0sdW5yZWc6ZnVuY3Rpb24oKXtFeHQuRXZlbnRNYW5hZ2VyLnVuKHRoaXMuaWQsIm1vdXNlZG93biIsdGhpcy5oYW5kbGVNb3VzZURvd24sdGhpcyk7dGhpcy5fZG9tUmVmPW51bGw7dGhpcy5ERE1JbnN0YW5jZS5fcmVtb3ZlKHRoaXMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy51bnJlZygpfSxpc0xvY2tlZDpmdW5jdGlvbigpe3JldHVybih0aGlzLkRETUluc3RhbmNlLmlzTG9ja2VkKCl8fHRoaXMubG9ja2VkKX0saGFuZGxlTW91c2VEb3duOmZ1bmN0aW9uKGIsYSl7aWYodGhpcy5wcmltYXJ5QnV0dG9uT25seSYmYi5idXR0b24hPTApe3JldHVybn1pZih0aGlzLmlzTG9ja2VkKCkpe3JldHVybn10aGlzLkRETUluc3RhbmNlLnJlZnJlc2hDYWNoZSh0aGlzLmdyb3Vwcyk7aWYodGhpcy5oYXNPdXRlckhhbmRsZXN8fHRoaXMuRERNSW5zdGFuY2UuaXNPdmVyVGFyZ2V0KGIuZ2V0UG9pbnQoKSx0aGlzKSl7aWYodGhpcy5jbGlja1ZhbGlkYXRvcihiKSl7dGhpcy5zZXRTdGFydFBvc2l0aW9uKCk7dGhpcy5iNE1vdXNlRG93bihiKTt0aGlzLm9uTW91c2VEb3duKGIpO3RoaXMuRERNSW5zdGFuY2UuaGFuZGxlTW91c2VEb3duKGIsdGhpcyk7dGhpcy5ERE1JbnN0YW5jZS5zdG9wRXZlbnQoYil9fX0sY2xpY2tWYWxpZGF0b3I6ZnVuY3Rpb24oYil7dmFyIGE9Yi5nZXRUYXJnZXQoKTtyZXR1cm4odGhpcy5pc1ZhbGlkSGFuZGxlQ2hpbGQoYSkmJih0aGlzLmlkPT10aGlzLmhhbmRsZUVsSWR8fHRoaXMuRERNSW5zdGFuY2UuaGFuZGxlV2FzQ2xpY2tlZChhLHRoaXMuaWQpKSl9LGFkZEludmFsaWRIYW5kbGVUeXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG9VcHBlckNhc2UoKTt0aGlzLmludmFsaWRIYW5kbGVUeXBlc1tiXT1ifSxhZGRJbnZhbGlkSGFuZGxlSWQ6ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGEhPT0ic3RyaW5nIil7YT1FeHQuaWQoYSl9dGhpcy5pbnZhbGlkSGFuZGxlSWRzW2FdPWF9LGFkZEludmFsaWRIYW5kbGVDbGFzczpmdW5jdGlvbihhKXt0aGlzLmludmFsaWRIYW5kbGVDbGFzc2VzLnB1c2goYSl9LHJlbW92ZUludmFsaWRIYW5kbGVUeXBlOmZ1bmN0aW9uKGEpe3ZhciBiPWEudG9VcHBlckNhc2UoKTtkZWxldGUgdGhpcy5pbnZhbGlkSGFuZGxlVHlwZXNbYl19LHJlbW92ZUludmFsaWRIYW5kbGVJZDpmdW5jdGlvbihhKXtpZih0eXBlb2YgYSE9PSJzdHJpbmciKXthPUV4dC5pZChhKX1kZWxldGUgdGhpcy5pbnZhbGlkSGFuZGxlSWRzW2FdfSxyZW1vdmVJbnZhbGlkSGFuZGxlQ2xhc3M6ZnVuY3Rpb24oYil7Zm9yKHZhciBjPTAsYT10aGlzLmludmFsaWRIYW5kbGVDbGFzc2VzLmxlbmd0aDtjPGE7KytjKXtpZih0aGlzLmludmFsaWRIYW5kbGVDbGFzc2VzW2NdPT1iKXtkZWxldGUgdGhpcy5pbnZhbGlkSGFuZGxlQ2xhc3Nlc1tjXX19fSxpc1ZhbGlkSGFuZGxlQ2hpbGQ6ZnVuY3Rpb24oZCl7dmFyIGM9dHJ1ZSxoLGIsYTt0cnl7aD1kLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCl9Y2F0Y2goZyl7aD1kLm5vZGVOYW1lfWM9YyYmIXRoaXMuaW52YWxpZEhhbmRsZVR5cGVzW2hdO2M9YyYmIXRoaXMuaW52YWxpZEhhbmRsZUlkc1tkLmlkXTtmb3IoYj0wLGE9dGhpcy5pbnZhbGlkSGFuZGxlQ2xhc3Nlcy5sZW5ndGg7YyYmYjxhOysrYil7Yz0hRXh0LmZseShkKS5oYXNDbHModGhpcy5pbnZhbGlkSGFuZGxlQ2xhc3Nlc1tiXSl9cmV0dXJuIGN9LHNldFhUaWNrczpmdW5jdGlvbihkLGEpe3RoaXMueFRpY2tzPVtdO3RoaXMueFRpY2tTaXplPWE7dmFyIGM9e30sYjtmb3IoYj10aGlzLmluaXRQYWdlWDtiPj10aGlzLm1pblg7Yj1iLWEpe2lmKCFjW2JdKXt0aGlzLnhUaWNrc1t0aGlzLnhUaWNrcy5sZW5ndGhdPWI7Y1tiXT10cnVlfX1mb3IoYj10aGlzLmluaXRQYWdlWDtiPD10aGlzLm1heFg7Yj1iK2Epe2lmKCFjW2JdKXt0aGlzLnhUaWNrc1t0aGlzLnhUaWNrcy5sZW5ndGhdPWI7Y1tiXT10cnVlfX1FeHQuQXJyYXkuc29ydCh0aGlzLnhUaWNrcyx0aGlzLkRETUluc3RhbmNlLm51bWVyaWNTb3J0KX0sc2V0WVRpY2tzOmZ1bmN0aW9uKGQsYSl7dGhpcy55VGlja3M9W107dGhpcy55VGlja1NpemU9YTt2YXIgYz17fSxiO2ZvcihiPXRoaXMuaW5pdFBhZ2VZO2I+PXRoaXMubWluWTtiPWItYSl7aWYoIWNbYl0pe3RoaXMueVRpY2tzW3RoaXMueVRpY2tzLmxlbmd0aF09YjtjW2JdPXRydWV9fWZvcihiPXRoaXMuaW5pdFBhZ2VZO2I8PXRoaXMubWF4WTtiPWIrYSl7aWYoIWNbYl0pe3RoaXMueVRpY2tzW3RoaXMueVRpY2tzLmxlbmd0aF09YjtjW2JdPXRydWV9fUV4dC5BcnJheS5zb3J0KHRoaXMueVRpY2tzLHRoaXMuRERNSW5zdGFuY2UubnVtZXJpY1NvcnQpfSxzZXRYQ29uc3RyYWludDpmdW5jdGlvbihjLGIsYSl7dGhpcy5sZWZ0Q29uc3RyYWludD1jO3RoaXMucmlnaHRDb25zdHJhaW50PWI7dGhpcy5taW5YPXRoaXMuaW5pdFBhZ2VYLWM7dGhpcy5tYXhYPXRoaXMuaW5pdFBhZ2VYK2I7aWYoYSl7dGhpcy5zZXRYVGlja3ModGhpcy5pbml0UGFnZVgsYSl9dGhpcy5jb25zdHJhaW5YPXRydWV9LGNsZWFyQ29uc3RyYWludHM6ZnVuY3Rpb24oKXt0aGlzLmNvbnN0cmFpblg9ZmFsc2U7dGhpcy5jb25zdHJhaW5ZPWZhbHNlO3RoaXMuY2xlYXJUaWNrcygpfSxjbGVhclRpY2tzOmZ1bmN0aW9uKCl7dGhpcy54VGlja3M9bnVsbDt0aGlzLnlUaWNrcz1udWxsO3RoaXMueFRpY2tTaXplPTA7dGhpcy55VGlja1NpemU9MH0sc2V0WUNvbnN0cmFpbnQ6ZnVuY3Rpb24oYSxjLGIpe3RoaXMudG9wQ29uc3RyYWludD1hO3RoaXMuYm90dG9tQ29uc3RyYWludD1jO3RoaXMubWluWT10aGlzLmluaXRQYWdlWS1hO3RoaXMubWF4WT10aGlzLmluaXRQYWdlWStjO2lmKGIpe3RoaXMuc2V0WVRpY2tzKHRoaXMuaW5pdFBhZ2VZLGIpfXRoaXMuY29uc3RyYWluWT10cnVlfSxyZXNldENvbnN0cmFpbnRzOmZ1bmN0aW9uKCl7aWYodGhpcy5pbml0UGFnZVh8fHRoaXMuaW5pdFBhZ2VYPT09MCl7dmFyIGI9KHRoaXMubWFpbnRhaW5PZmZzZXQpP3RoaXMubGFzdFBhZ2VYLXRoaXMuaW5pdFBhZ2VYOjAsYT0odGhpcy5tYWludGFpbk9mZnNldCk/dGhpcy5sYXN0UGFnZVktdGhpcy5pbml0UGFnZVk6MDt0aGlzLnNldEluaXRQb3NpdGlvbihiLGEpfWVsc2V7dGhpcy5zZXRJbml0UG9zaXRpb24oKX1pZih0aGlzLmNvbnN0cmFpblgpe3RoaXMuc2V0WENvbnN0cmFpbnQodGhpcy5sZWZ0Q29uc3RyYWludCx0aGlzLnJpZ2h0Q29uc3RyYWludCx0aGlzLnhUaWNrU2l6ZSl9aWYodGhpcy5jb25zdHJhaW5ZKXt0aGlzLnNldFlDb25zdHJhaW50KHRoaXMudG9wQ29uc3RyYWludCx0aGlzLmJvdHRvbUNvbnN0cmFpbnQsdGhpcy55VGlja1NpemUpfX0sZ2V0VGljazpmdW5jdGlvbihoLGQpe2lmKCFkKXtyZXR1cm4gaH1lbHNle2lmKGRbMF0+PWgpe3JldHVybiBkWzBdfWVsc2V7dmFyIGIsYSxjLGcsZTtmb3IoYj0wLGE9ZC5sZW5ndGg7YjxhOysrYil7Yz1iKzE7aWYoZFtjXSYmZFtjXT49aCl7Zz1oLWRbYl07ZT1kW2NdLWg7cmV0dXJuKGU+Zyk/ZFtiXTpkW2NdfX1yZXR1cm4gZFtkLmxlbmd0aC0xXX19fSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybigiRHJhZ0Ryb3AgIit0aGlzLmlkKX19KTtFeHQuZGVmaW5lKCJFeHQuZGQuREQiLHtleHRlbmQ6IkV4dC5kZC5EcmFnRHJvcCIscmVxdWlyZXM6WyJFeHQuZGQuRHJhZ0Ryb3BNYW5hZ2VyIl0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYyxhLGIpe2lmKGMpe3RoaXMuaW5pdChjLGEsYil9fSxzY3JvbGw6dHJ1ZSxhdXRvT2Zmc2V0OmZ1bmN0aW9uKGMsYil7dmFyIGE9Yy10aGlzLnN0YXJ0UGFnZVgsZD1iLXRoaXMuc3RhcnRQYWdlWTt0aGlzLnNldERlbHRhKGEsZCl9LHNldERlbHRhOmZ1bmN0aW9uKGIsYSl7dGhpcy5kZWx0YVg9Yjt0aGlzLmRlbHRhWT1hfSxzZXREcmFnRWxQb3M6ZnVuY3Rpb24oYyxiKXt2YXIgYT10aGlzLmdldERyYWdFbCgpO3RoaXMuYWxpZ25FbFdpdGhNb3VzZShhLGMsYil9LGFsaWduRWxXaXRoTW91c2U6ZnVuY3Rpb24oYixlLGMpe3ZhciBnPXRoaXMuZ2V0VGFyZ2V0Q29vcmQoZSxjKSxkPWIuZG9tP2I6RXh0LmZseShiLCJfZGQiKSxsPWQuZ2V0U2l6ZSgpLGk9RXh0LkVsZW1lbnQsaixhLGssaDtpZighdGhpcy5kZWx0YVNldFhZKXtqPXRoaXMuY2FjaGVkVmlld3BvcnRTaXplPXt3aWR0aDppLmdldERvY3VtZW50V2lkdGgoKSxoZWlnaHQ6aS5nZXREb2N1bWVudEhlaWdodCgpfTthPVtNYXRoLm1heCgwLE1hdGgubWluKGcueCxqLndpZHRoLWwud2lkdGgpKSxNYXRoLm1heCgwLE1hdGgubWluKGcueSxqLmhlaWdodC1sLmhlaWdodCkpXTtkLnNldFhZKGEpO2s9ZC5nZXRMb2NhbFgoKTtoPWQuZ2V0TG9jYWxZKCk7dGhpcy5kZWx0YVNldFhZPVtrLWcueCxoLWcueV19ZWxzZXtqPXRoaXMuY2FjaGVkVmlld3BvcnRTaXplO2Quc2V0TGVmdFRvcChNYXRoLm1heCgwLE1hdGgubWluKGcueCt0aGlzLmRlbHRhU2V0WFlbMF0sai53aWR0aC1sLndpZHRoKSksTWF0aC5tYXgoMCxNYXRoLm1pbihnLnkrdGhpcy5kZWx0YVNldFhZWzFdLGouaGVpZ2h0LWwuaGVpZ2h0KSkpfXRoaXMuY2FjaGVQb3NpdGlvbihnLngsZy55KTt0aGlzLmF1dG9TY3JvbGwoZy54LGcueSxiLm9mZnNldEhlaWdodCxiLm9mZnNldFdpZHRoKTtyZXR1cm4gZ30sY2FjaGVQb3NpdGlvbjpmdW5jdGlvbihiLGEpe2lmKGIpe3RoaXMubGFzdFBhZ2VYPWI7dGhpcy5sYXN0UGFnZVk9YX1lbHNle3ZhciBjPUV4dC5FbGVtZW50LmdldFhZKHRoaXMuZ2V0RWwoKSk7dGhpcy5sYXN0UGFnZVg9Y1swXTt0aGlzLmxhc3RQYWdlWT1jWzFdfX0sYXV0b1Njcm9sbDpmdW5jdGlvbihsLGssZSxtKXtpZih0aGlzLnNjcm9sbCl7dmFyIG49RXh0LkVsZW1lbnQuZ2V0Vmlld0hlaWdodCgpLGI9RXh0LkVsZW1lbnQuZ2V0Vmlld1dpZHRoKCkscD10aGlzLkRETUluc3RhbmNlLmdldFNjcm9sbFRvcCgpLGQ9dGhpcy5ERE1JbnN0YW5jZS5nZXRTY3JvbGxMZWZ0KCksaj1lK2ssbz1tK2wsaT0obitwLWstdGhpcy5kZWx0YVkpLGc9KGIrZC1sLXRoaXMuZGVsdGFYKSxjPTQwLGE9KGRvY3VtZW50LmFsbCk/ODA6MzA7aWYoaj5uJiZpPGMpe3dpbmRvdy5zY3JvbGxUbyhkLHArYSl9aWYoazxwJiZwPjAmJmstcDxjKXt3aW5kb3cuc2Nyb2xsVG8oZCxwLWEpfWlmKG8+YiYmZzxjKXt3aW5kb3cuc2Nyb2xsVG8oZCthLHApfWlmKGw8ZCYmZD4wJiZsLWQ8Yyl7d2luZG93LnNjcm9sbFRvKGQtYSxwKX19fSxnZXRUYXJnZXRDb29yZDpmdW5jdGlvbihjLGIpe3ZhciBhPWMtdGhpcy5kZWx0YVgsZD1iLXRoaXMuZGVsdGFZO2lmKHRoaXMuY29uc3RyYWluWCl7aWYoYTx0aGlzLm1pblgpe2E9dGhpcy5taW5YfWlmKGE+dGhpcy5tYXhYKXthPXRoaXMubWF4WH19aWYodGhpcy5jb25zdHJhaW5ZKXtpZihkPHRoaXMubWluWSl7ZD10aGlzLm1pbll9aWYoZD50aGlzLm1heFkpe2Q9dGhpcy5tYXhZfX1hPXRoaXMuZ2V0VGljayhhLHRoaXMueFRpY2tzKTtkPXRoaXMuZ2V0VGljayhkLHRoaXMueVRpY2tzKTtyZXR1cm57eDphLHk6ZH19LGFwcGx5Q29uZmlnOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KCk7dGhpcy5zY3JvbGw9KHRoaXMuY29uZmlnLnNjcm9sbCE9PWZhbHNlKX0sYjRNb3VzZURvd246ZnVuY3Rpb24oYSl7dGhpcy5hdXRvT2Zmc2V0KGEuZ2V0UGFnZVgoKSxhLmdldFBhZ2VZKCkpfSxiNERyYWc6ZnVuY3Rpb24oYSl7dGhpcy5zZXREcmFnRWxQb3MoYS5nZXRQYWdlWCgpLGEuZ2V0UGFnZVkoKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuKCJERCAiK3RoaXMuaWQpfX0pO0V4dC5kZWZpbmUoIkV4dC5kZC5ERFByb3h5Iix7ZXh0ZW5kOiJFeHQuZGQuREQiLHN0YXRpY3M6e2RyYWdFbElkOiJ5Z2RkZmRpdiJ9LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGMsYSxiKXtpZihjKXt0aGlzLmluaXQoYyxhLGIpO3RoaXMuaW5pdEZyYW1lKCl9fSxyZXNpemVGcmFtZTp0cnVlLGNlbnRlckZyYW1lOmZhbHNlLGNyZWF0ZUZyYW1lOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWRvY3VtZW50LmJvZHksZCxjO2lmKCFhfHwhYS5maXJzdENoaWxkKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5jcmVhdGVGcmFtZSgpfSw1MCk7cmV0dXJufWQ9dGhpcy5nZXREcmFnRWwoKTtpZighZCl7ZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtkLmlkPXRoaXMuZHJhZ0VsSWQ7Yz1kLnN0eWxlO2MucG9zaXRpb249ImFic29sdXRlIjtjLnZpc2liaWxpdHk9ImhpZGRlbiI7Yy5jdXJzb3I9Im1vdmUiO2MuYm9yZGVyPSIycHggc29saWQgI2FhYSI7Yy56SW5kZXg9OTk5O2EuaW5zZXJ0QmVmb3JlKGQsYS5maXJzdENoaWxkKX19LGluaXRGcmFtZTpmdW5jdGlvbigpe3RoaXMuY3JlYXRlRnJhbWUoKX0sYXBwbHlDb25maWc6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt0aGlzLnJlc2l6ZUZyYW1lPSh0aGlzLmNvbmZpZy5yZXNpemVGcmFtZSE9PWZhbHNlKTt0aGlzLmNlbnRlckZyYW1lPSh0aGlzLmNvbmZpZy5jZW50ZXJGcmFtZSk7dGhpcy5zZXREcmFnRWxJZCh0aGlzLmNvbmZpZy5kcmFnRWxJZHx8RXh0LmRkLkREUHJveHkuZHJhZ0VsSWQpfSxzaG93RnJhbWU6ZnVuY3Rpb24oZSxkKXt2YXIgYz10aGlzLmdldEVsKCksYT10aGlzLmdldERyYWdFbCgpLGI9YS5zdHlsZTt0aGlzLl9yZXNpemVQcm94eSgpO2lmKHRoaXMuY2VudGVyRnJhbWUpe3RoaXMuc2V0RGVsdGEoTWF0aC5yb3VuZChwYXJzZUludChiLndpZHRoLDEwKS8yKSxNYXRoLnJvdW5kKHBhcnNlSW50KGIuaGVpZ2h0LDEwKS8yKSl9dGhpcy5zZXREcmFnRWxQb3MoZSxkKTtFeHQuZmx5KGEpLnNob3coKX0sX3Jlc2l6ZVByb3h5OmZ1bmN0aW9uKCl7aWYodGhpcy5yZXNpemVGcmFtZSl7dmFyIGE9dGhpcy5nZXRFbCgpO0V4dC5mbHkodGhpcy5nZXREcmFnRWwoKSkuc2V0U2l6ZShhLm9mZnNldFdpZHRoLGEub2Zmc2V0SGVpZ2h0KX19LGI0TW91c2VEb3duOmZ1bmN0aW9uKGIpe3ZhciBhPWIuZ2V0UGFnZVgoKSxjPWIuZ2V0UGFnZVkoKTt0aGlzLmF1dG9PZmZzZXQoYSxjKTt0aGlzLnNldERyYWdFbFBvcyhhLGMpfSxiNFN0YXJ0RHJhZzpmdW5jdGlvbihhLGIpe3RoaXMuc2hvd0ZyYW1lKGEsYil9LGI0RW5kRHJhZzpmdW5jdGlvbihhKXtFeHQuZmx5KHRoaXMuZ2V0RHJhZ0VsKCkpLmhpZGUoKX0sZW5kRHJhZzpmdW5jdGlvbihjKXt2YXIgYj10aGlzLmdldEVsKCksYT10aGlzLmdldERyYWdFbCgpO2Euc3R5bGUudmlzaWJpbGl0eT0iIjt0aGlzLmJlZm9yZU1vdmUoKTtiLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiI7RXh0LmRkLkRETS5tb3ZlVG9FbChiLGEpO2Euc3R5bGUudmlzaWJpbGl0eT0iaGlkZGVuIjtiLnN0eWxlLnZpc2liaWxpdHk9IiI7dGhpcy5hZnRlckRyYWcoKX0sYmVmb3JlTW92ZTpmdW5jdGlvbigpe30sYWZ0ZXJEcmFnOmZ1bmN0aW9uKCl7fSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybigiRERQcm94eSAiK3RoaXMuaWQpfX0pO0V4dC5kZWZpbmUoIkV4dC5kZC5TdGF0dXNQcm94eSIse2V4dGVuZDoiRXh0LkNvbXBvbmVudCIsYW5pbVJlcGFpcjpmYWxzZSxjaGlsZEVsczpbImdob3N0Il0scmVuZGVyVHBsOlsnPGRpdiBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsnZGQtZHJvcC1pY29uIj48L2Rpdj48ZGl2IGlkPSJ7aWR9LWdob3N0IiBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsnZGQtZHJhZy1naG9zdCI+PC9kaXY+J10sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczthPWF8fHt9O0V4dC5hcHBseShiLHtoaWRlTW9kZToidmlzaWJpbGl0eSIsaGlkZGVuOnRydWUsZmxvYXRpbmc6dHJ1ZSxpZDpiLmlkfHxFeHQuaWQoKSxjbHM6RXh0LmJhc2VDU1NQcmVmaXgrImRkLWRyYWctcHJveHkgIit0aGlzLmRyb3BOb3RBbGxvd2VkLHNoYWRvdzphLnNoYWRvd3x8ZmFsc2UscmVuZGVyVG86RXh0LmdldERldGFjaGVkQm9keSgpfSk7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5kcm9wU3RhdHVzPXRoaXMuZHJvcE5vdEFsbG93ZWR9LGRyb3BBbGxvd2VkOkV4dC5iYXNlQ1NTUHJlZml4KyJkZC1kcm9wLW9rIixkcm9wTm90QWxsb3dlZDpFeHQuYmFzZUNTU1ByZWZpeCsiZGQtZHJvcC1ub2Ryb3AiLHNldFN0YXR1czpmdW5jdGlvbihhKXthPWF8fHRoaXMuZHJvcE5vdEFsbG93ZWQ7aWYodGhpcy5kcm9wU3RhdHVzIT1hKXt0aGlzLmVsLnJlcGxhY2VDbHModGhpcy5kcm9wU3RhdHVzLGEpO3RoaXMuZHJvcFN0YXR1cz1hfX0scmVzZXQ6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxhPUV4dC5iYXNlQ1NTUHJlZml4KyJkZC1kcmFnLXByb3h5ICI7Yy5lbC5yZXBsYWNlQ2xzKGErYy5kcm9wQWxsb3dlZCxhK2MuZHJvcE5vdEFsbG93ZWQpO2MuZHJvcFN0YXR1cz1jLmRyb3BOb3RBbGxvd2VkO2lmKGIpe2MuZ2hvc3QudXBkYXRlKCIiKX19LHVwZGF0ZTpmdW5jdGlvbihhKXtpZih0eXBlb2YgYT09InN0cmluZyIpe3RoaXMuZ2hvc3QudXBkYXRlKGEpfWVsc2V7dGhpcy5naG9zdC51cGRhdGUoIiIpO2Euc3R5bGUubWFyZ2luPSIwIjt0aGlzLmdob3N0LmRvbS5hcHBlbmRDaGlsZChhKX12YXIgYj10aGlzLmdob3N0LmRvbS5maXJzdENoaWxkO2lmKGIpe0V4dC5mbHkoYikuc2V0U3R5bGUoImZsb2F0Iiwibm9uZSIpfX0sZ2V0R2hvc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5naG9zdH0saGlkZTpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoKTtpZihhKXt0aGlzLnJlc2V0KHRydWUpfX0sc3RvcDpmdW5jdGlvbigpe2lmKHRoaXMuYW5pbSYmdGhpcy5hbmltLmlzQW5pbWF0ZWQmJnRoaXMuYW5pbS5pc0FuaW1hdGVkKCkpe3RoaXMuYW5pbS5zdG9wKCl9fSxzeW5jOmZ1bmN0aW9uKCl7dGhpcy5lbC5zeW5jKCl9LHJlcGFpcjpmdW5jdGlvbihjLGQsYSl7dmFyIGI9dGhpcztiLmNhbGxiYWNrPWQ7Yi5zY29wZT1hO2lmKGMmJmIuYW5pbVJlcGFpciE9PWZhbHNlKXtiLmVsLmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsiZGQtZHJhZy1yZXBhaXIiKTtiLmVsLmhpZGVVbmRlcnModHJ1ZSk7Yi5hbmltPWIuZWwuYW5pbWF0ZSh7ZHVyYXRpb246Yi5yZXBhaXJEdXJhdGlvbnx8NTAwLGVhc2luZzoiZWFzZS1vdXQiLHRvOnt4OmNbMF0seTpjWzFdfSxzdG9wQW5pbWF0aW9uOnRydWUsY2FsbGJhY2s6Yi5hZnRlclJlcGFpcixzY29wZTpifSl9ZWxzZXtiLmFmdGVyUmVwYWlyKCl9fSxhZnRlclJlcGFpcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5oaWRlKHRydWUpO2EuZWwucmVtb3ZlQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJkZC1kcmFnLXJlcGFpciIpO2lmKHR5cGVvZiBhLmNhbGxiYWNrPT0iZnVuY3Rpb24iKXthLmNhbGxiYWNrLmNhbGwoYS5zY29wZXx8YSl9ZGVsZXRlIGEuY2FsbGJhY2s7ZGVsZXRlIGEuc2NvcGV9fSk7RXh0LmRlZmluZSgiRXh0LmRkLkRyYWdTb3VyY2UiLHtleHRlbmQ6IkV4dC5kZC5ERFByb3h5IixyZXF1aXJlczpbIkV4dC5kZC5TdGF0dXNQcm94eSIsIkV4dC5kZC5EcmFnRHJvcE1hbmFnZXIiXSxkcm9wQWxsb3dlZDpFeHQuYmFzZUNTU1ByZWZpeCsiZGQtZHJvcC1vayIsZHJvcE5vdEFsbG93ZWQ6RXh0LmJhc2VDU1NQcmVmaXgrImRkLWRyb3Atbm9kcm9wIixhbmltUmVwYWlyOnRydWUscmVwYWlySGlnaGxpZ2h0Q29sb3I6ImMzZGFmOSIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYixhKXt0aGlzLmVsPUV4dC5nZXQoYik7aWYoIXRoaXMuZHJhZ0RhdGEpe3RoaXMuZHJhZ0RhdGE9e319RXh0LmFwcGx5KHRoaXMsYSk7aWYoIXRoaXMucHJveHkpe3RoaXMucHJveHk9bmV3IEV4dC5kZC5TdGF0dXNQcm94eSh7aWQ6dGhpcy5lbC5pZCsiLWRyYWctc3RhdHVzLXByb3h5IixhbmltUmVwYWlyOnRoaXMuYW5pbVJlcGFpcn0pfXRoaXMuY2FsbFBhcmVudChbdGhpcy5lbC5kb20sdGhpcy5kZEdyb3VwfHx0aGlzLmdyb3VwLHtkcmFnRWxJZDp0aGlzLnByb3h5LmlkLHJlc2l6ZUZyYW1lOmZhbHNlLGlzVGFyZ2V0OmZhbHNlLHNjcm9sbDp0aGlzLnNjcm9sbD09PXRydWV9XSk7dGhpcy5kcmFnZ2luZz1mYWxzZX0sZ2V0RHJhZ0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZHJhZ0RhdGF9LG9uRHJhZ0VudGVyOmZ1bmN0aW9uKGMsZCl7dmFyIGI9RXh0LmRkLkRyYWdEcm9wTWFuYWdlci5nZXREREJ5SWQoZCksYTt0aGlzLmNhY2hlZFRhcmdldD1iO2lmKHRoaXMuYmVmb3JlRHJhZ0VudGVyKGIsYyxkKSE9PWZhbHNlKXtpZihiLmlzTm90aWZ5VGFyZ2V0KXthPWIubm90aWZ5RW50ZXIodGhpcyxjLHRoaXMuZHJhZ0RhdGEpO3RoaXMucHJveHkuc2V0U3RhdHVzKGEpfWVsc2V7dGhpcy5wcm94eS5zZXRTdGF0dXModGhpcy5kcm9wQWxsb3dlZCl9aWYodGhpcy5hZnRlckRyYWdFbnRlcil7dGhpcy5hZnRlckRyYWdFbnRlcihiLGMsZCl9fX0sYmVmb3JlRHJhZ0VudGVyOmZ1bmN0aW9uKGIsYSxjKXtyZXR1cm4gdHJ1ZX0sb25EcmFnT3ZlcjpmdW5jdGlvbihjLGQpe3ZhciBiPXRoaXMuY2FjaGVkVGFyZ2V0fHxFeHQuZGQuRHJhZ0Ryb3BNYW5hZ2VyLmdldEREQnlJZChkKSxhO2lmKHRoaXMuYmVmb3JlRHJhZ092ZXIoYixjLGQpIT09ZmFsc2Upe2lmKGIuaXNOb3RpZnlUYXJnZXQpe2E9Yi5ub3RpZnlPdmVyKHRoaXMsYyx0aGlzLmRyYWdEYXRhKTt0aGlzLnByb3h5LnNldFN0YXR1cyhhKX1pZih0aGlzLmFmdGVyRHJhZ092ZXIpe3RoaXMuYWZ0ZXJEcmFnT3ZlcihiLGMsZCl9fX0sYmVmb3JlRHJhZ092ZXI6ZnVuY3Rpb24oYixhLGMpe3JldHVybiB0cnVlfSxvbkRyYWdPdXQ6ZnVuY3Rpb24oYixjKXt2YXIgYT10aGlzLmNhY2hlZFRhcmdldHx8RXh0LmRkLkRyYWdEcm9wTWFuYWdlci5nZXREREJ5SWQoYyk7aWYodGhpcy5iZWZvcmVEcmFnT3V0KGEsYixjKSE9PWZhbHNlKXtpZihhLmlzTm90aWZ5VGFyZ2V0KXthLm5vdGlmeU91dCh0aGlzLGIsdGhpcy5kcmFnRGF0YSl9dGhpcy5wcm94eS5yZXNldCgpO2lmKHRoaXMuYWZ0ZXJEcmFnT3V0KXt0aGlzLmFmdGVyRHJhZ091dChhLGIsYyl9fXRoaXMuY2FjaGVkVGFyZ2V0PW51bGx9LGJlZm9yZURyYWdPdXQ6ZnVuY3Rpb24oYixhLGMpe3JldHVybiB0cnVlfSxvbkRyYWdEcm9wOmZ1bmN0aW9uKGIsYyl7dmFyIGE9dGhpcy5jYWNoZWRUYXJnZXR8fEV4dC5kZC5EcmFnRHJvcE1hbmFnZXIuZ2V0RERCeUlkKGMpO2lmKHRoaXMuYmVmb3JlRHJhZ0Ryb3AoYSxiLGMpIT09ZmFsc2Upe2lmKGEuaXNOb3RpZnlUYXJnZXQpe2lmKGEubm90aWZ5RHJvcCh0aGlzLGIsdGhpcy5kcmFnRGF0YSkhPT1mYWxzZSl7dGhpcy5vblZhbGlkRHJvcChhLGIsYyl9ZWxzZXt0aGlzLm9uSW52YWxpZERyb3AoYSxiLGMpfX1lbHNle3RoaXMub25WYWxpZERyb3AoYSxiLGMpfWlmKHRoaXMuYWZ0ZXJEcmFnRHJvcCl7dGhpcy5hZnRlckRyYWdEcm9wKGEsYixjKX19ZGVsZXRlIHRoaXMuY2FjaGVkVGFyZ2V0fSxiZWZvcmVEcmFnRHJvcDpmdW5jdGlvbihiLGEsYyl7cmV0dXJuIHRydWV9LG9uVmFsaWREcm9wOmZ1bmN0aW9uKGIsYSxjKXt0aGlzLmhpZGVQcm94eSgpO2lmKHRoaXMuYWZ0ZXJWYWxpZERyb3Ape3RoaXMuYWZ0ZXJWYWxpZERyb3AoYixhLGMpfX0sZ2V0UmVwYWlyWFk6ZnVuY3Rpb24oYixhKXtyZXR1cm4gdGhpcy5lbC5nZXRYWSgpfSxvbkludmFsaWREcm9wOmZ1bmN0aW9uKGIsYSxjKXtpZighYSl7YT1iO2I9bnVsbDtjPWEuZ2V0VGFyZ2V0KCkuaWR9dGhpcy5iZWZvcmVJbnZhbGlkRHJvcChiLGEsYyk7aWYodGhpcy5jYWNoZWRUYXJnZXQpe2lmKHRoaXMuY2FjaGVkVGFyZ2V0LmlzTm90aWZ5VGFyZ2V0KXt0aGlzLmNhY2hlZFRhcmdldC5ub3RpZnlPdXQodGhpcyxhLHRoaXMuZHJhZ0RhdGEpfXRoaXMuY2FjaGVUYXJnZXQ9bnVsbH10aGlzLnByb3h5LnJlcGFpcih0aGlzLmdldFJlcGFpclhZKGEsdGhpcy5kcmFnRGF0YSksdGhpcy5hZnRlclJlcGFpcix0aGlzKTtpZih0aGlzLmFmdGVySW52YWxpZERyb3Ape3RoaXMuYWZ0ZXJJbnZhbGlkRHJvcChhLGMpfX0sYWZ0ZXJSZXBhaXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKEV4dC5lbmFibGVGeCl7YS5lbC5oaWdobGlnaHQoYS5yZXBhaXJIaWdobGlnaHRDb2xvcil9YS5kcmFnZ2luZz1mYWxzZX0sYmVmb3JlSW52YWxpZERyb3A6ZnVuY3Rpb24oYixhLGMpe3JldHVybiB0cnVlfSxoYW5kbGVNb3VzZURvd246ZnVuY3Rpb24oYil7aWYodGhpcy5kcmFnZ2luZyl7cmV0dXJufXZhciBhPXRoaXMuZ2V0RHJhZ0RhdGEoYik7aWYoYSYmdGhpcy5vbkJlZm9yZURyYWcoYSxiKSE9PWZhbHNlKXt0aGlzLmRyYWdEYXRhPWE7dGhpcy5wcm94eS5zdG9wKCk7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9fSxvbkJlZm9yZURyYWc6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdHJ1ZX0sb25TdGFydERyYWc6RXh0LmVtcHR5Rm4sYWxpZ25FbFdpdGhNb3VzZTpmdW5jdGlvbigpe3RoaXMucHJveHkuZW5zdXJlQXR0YWNoZWRUb0JvZHkodHJ1ZSk7cmV0dXJuIHRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxzdGFydERyYWc6ZnVuY3Rpb24oYSxiKXt0aGlzLnByb3h5LnJlc2V0KCk7dGhpcy5wcm94eS5oaWRkZW49ZmFsc2U7dGhpcy5kcmFnZ2luZz10cnVlO3RoaXMucHJveHkudXBkYXRlKCIiKTt0aGlzLm9uSW5pdERyYWcoYSxiKTt0aGlzLnByb3h5LnNob3coKX0sb25Jbml0RHJhZzpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXMuZWwuZG9tLmNsb25lTm9kZSh0cnVlKTtiLmlkPUV4dC5pZCgpO3RoaXMucHJveHkudXBkYXRlKGIpO3RoaXMub25TdGFydERyYWcoYSxjKTtyZXR1cm4gdHJ1ZX0sZ2V0UHJveHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm94eX0saGlkZVByb3h5OmZ1bmN0aW9uKCl7dGhpcy5wcm94eS5oaWRlKCk7dGhpcy5wcm94eS5yZXNldCh0cnVlKTt0aGlzLmRyYWdnaW5nPWZhbHNlfSx0cmlnZ2VyQ2FjaGVSZWZyZXNoOmZ1bmN0aW9uKCl7RXh0LmRkLkRETS5yZWZyZXNoQ2FjaGUodGhpcy5ncm91cHMpfSxiNEVuZERyYWc6ZnVuY3Rpb24oYSl7fSxlbmREcmFnOmZ1bmN0aW9uKGEpe3RoaXMub25FbmREcmFnKHRoaXMuZHJhZ0RhdGEsYSl9LG9uRW5kRHJhZzpmdW5jdGlvbihhLGIpe30sYXV0b09mZnNldDpmdW5jdGlvbihhLGIpe3RoaXMuc2V0RGVsdGEoLTEyLC0yMCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTtFeHQuZGVzdHJveSh0aGlzLnByb3h5KX19KTtFeHQuZGVmaW5lKCJFeHQucGFuZWwuUHJveHkiLHthbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5kZC5QYW5lbFByb3h5Iixtb3ZlT25EcmFnOnRydWUsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzO2MucGFuZWw9YTtjLmlkPWMucGFuZWwuaWQrIi1kZHByb3h5IjtFeHQuYXBwbHkoYyxiKX0saW5zZXJ0UHJveHk6dHJ1ZSxzZXRTdGF0dXM6RXh0LmVtcHR5Rm4scmVzZXQ6RXh0LmVtcHR5Rm4sdXBkYXRlOkV4dC5lbXB0eUZuLHN0b3A6RXh0LmVtcHR5Rm4sc3luYzpFeHQuZW1wdHlGbixnZXRFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdob3N0LmVsfSxnZXRHaG9zdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdob3N0fSxnZXRQcm94eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3h5fSxoaWRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLmdob3N0KXtpZihhLnByb3h5KXthLnByb3h5LnJlbW92ZSgpO2RlbGV0ZSBhLnByb3h5fWEucGFuZWwudW5naG9zdChudWxsLGEubW92ZU9uRHJhZyk7ZGVsZXRlIGEuZ2hvc3R9fSxzaG93OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhO2lmKCFiLmdob3N0KXthPWIucGFuZWwuZ2V0U2l6ZSgpO2IucGFuZWwuZWwuc2V0VmlzaWJpbGl0eU1vZGUoRXh0LkVsZW1lbnQuRElTUExBWSk7Yi5naG9zdD1iLnBhbmVsLmdob3N0KCk7aWYoYi5pbnNlcnRQcm94eSl7Yi5wcm94eT1iLnBhbmVsLmVsLmluc2VydFNpYmxpbmcoe2NsczpFeHQuYmFzZUNTU1ByZWZpeCsicGFuZWwtZGQtc3BhY2VyIn0pO2IucHJveHkuc2V0U2l6ZShhKX19fSxyZXBhaXI6ZnVuY3Rpb24oYixjLGEpe3RoaXMuaGlkZSgpO0V4dC5jYWxsYmFjayhjLGF8fHRoaXMpfSxtb3ZlUHJveHk6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnByb3h5KXthLmluc2VydEJlZm9yZSh0aGlzLnByb3h5LmRvbSxiKX19fSk7RXh0LmRlZmluZSgiRXh0LnBhbmVsLkREIix7ZXh0ZW5kOiJFeHQuZGQuRHJhZ1NvdXJjZSIscmVxdWlyZXM6WyJFeHQucGFuZWwuUHJveHkiXSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXM7Yy5wYW5lbD1iO2MuZHJhZ0RhdGE9e3BhbmVsOmJ9O2MucGFuZWxQcm94eT1uZXcgRXh0LnBhbmVsLlByb3h5KGIsYSk7Yy5wcm94eT1jLnBhbmVsUHJveHkucHJveHk7Yy5jYWxsUGFyZW50KFtiLmVsLGFdKTtjLnNldHVwRWwoYil9LHNldHVwRWw6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxkPWEuaGVhZGVyLGI9YS5ib2R5O2lmKGQpe2Muc2V0SGFuZGxlRWxJZChkLmlkKTtiPWQuZWx9aWYoYil7Yi5zZXRTdHlsZSgiY3Vyc29yIiwibW92ZSIpO2Muc2Nyb2xsPWZhbHNlfWVsc2V7YS5vbigiYm94cmVhZHkiLGMuc2V0dXBFbCxjLHtzaW5nbGU6dHJ1ZX0pfX0sc2hvd0ZyYW1lOkV4dC5lbXB0eUZuLHN0YXJ0RHJhZzpFeHQuZW1wdHlGbixiNFN0YXJ0RHJhZzpmdW5jdGlvbihhLGIpe3RoaXMucGFuZWxQcm94eS5zaG93KCl9LGI0TW91c2VEb3duOmZ1bmN0aW9uKGIpe3ZhciBhPWIuZ2V0UGFnZVgoKSxjPWIuZ2V0UGFnZVkoKTt0aGlzLmF1dG9PZmZzZXQoYSxjKX0sb25Jbml0RHJhZzpmdW5jdGlvbihhLGIpe3RoaXMub25TdGFydERyYWcoYSxiKTtyZXR1cm4gdHJ1ZX0sY3JlYXRlRnJhbWU6RXh0LmVtcHR5Rm4sZ2V0RHJhZ0VsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnBhbmVsUHJveHkuZ2hvc3QuZWwuZG9tfSxlbmREcmFnOmZ1bmN0aW9uKGEpe3RoaXMucGFuZWxQcm94eS5oaWRlKCk7dGhpcy5wYW5lbC5zYXZlU3RhdGUoKX0sYXV0b09mZnNldDpmdW5jdGlvbihhLGIpe2EtPXRoaXMuc3RhcnRQYWdlWDtiLT10aGlzLnN0YXJ0UGFnZVk7dGhpcy5zZXREZWx0YShhLGIpfSxvbkludmFsaWREcm9wOmZ1bmN0aW9uKGMsYixkKXt2YXIgYT10aGlzO2EuYmVmb3JlSW52YWxpZERyb3AoYyxiLGQpO2lmKGEuY2FjaGVkVGFyZ2V0KXtpZihhLmNhY2hlZFRhcmdldC5pc05vdGlmeVRhcmdldCl7YS5jYWNoZWRUYXJnZXQubm90aWZ5T3V0KGEsYixhLmRyYWdEYXRhKX1hLmNhY2hlVGFyZ2V0PW51bGx9aWYoYS5hZnRlckludmFsaWREcm9wKXthLmFmdGVySW52YWxpZERyb3AoYixkKX19fSk7RXh0LmRlZmluZSgiRXh0LnV0aWwuTWVtZW50byIsKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZChpLGgsaixnKXtpW2c/ZytqOmpdPWhbal19ZnVuY3Rpb24gYyhoLGcsaSl7ZGVsZXRlIGhbaV19ZnVuY3Rpb24gZShrLGosbCxpKXt2YXIgZz1pP2krbDpsLGg9a1tnXTtpZihofHxrLmhhc093blByb3BlcnR5KGcpKXthKGosbCxoKX19ZnVuY3Rpb24gYShoLGksZyl7aWYoRXh0LmlzRGVmaW5lZChnKSl7aFtpXT1nfWVsc2V7ZGVsZXRlIGhbaV19fWZ1bmN0aW9uIGIoaCxtLGwsaSxqKXtpZihtKXtpZihFeHQuaXNBcnJheShpKSl7dmFyIGssZz1pLmxlbmd0aDtmb3Ioaz0wO2s8ZztrKyspe2gobSxsLGlba10sail9fWVsc2V7aChtLGwsaSxqKX19fXJldHVybntkYXRhOm51bGwsdGFyZ2V0Om51bGwsY29uc3RydWN0b3I6ZnVuY3Rpb24oaCxnKXtpZihoKXt0aGlzLnRhcmdldD1oO2lmKGcpe3RoaXMuY2FwdHVyZShnKX19fSxjYXB0dXJlOmZ1bmN0aW9uKGcsaixpKXt2YXIgaD10aGlzO2IoZCxoLmRhdGF8fChoLmRhdGE9e30pLGp8fGgudGFyZ2V0LGcsaSl9LHJlbW92ZTpmdW5jdGlvbihnKXtiKGMsdGhpcy5kYXRhLG51bGwsZyl9LHJlc3RvcmU6ZnVuY3Rpb24oaCxnLGosaSl7YihlLHRoaXMuZGF0YSxqfHx0aGlzLnRhcmdldCxoLGkpO2lmKGchPT1mYWxzZSl7dGhpcy5yZW1vdmUoaCl9fSxyZXN0b3JlQWxsOmZ1bmN0aW9uKGcsayl7dmFyIGk9dGhpcyxoPWt8fHRoaXMudGFyZ2V0LGo9aS5kYXRhLGw7Zm9yKGwgaW4gail7aWYoai5oYXNPd25Qcm9wZXJ0eShsKSl7YShoLGwsaltsXSl9fWlmKGchPT1mYWxzZSl7ZGVsZXRlIGkuZGF0YX19fX0oKSkpO0V4dC5kZWZpbmUoIkV4dC5wYW5lbC5QYW5lbCIse2V4dGVuZDoiRXh0LnBhbmVsLkFic3RyYWN0UGFuZWwiLHJlcXVpcmVzOlsiRXh0LnBhbmVsLkhlYWRlciIsIkV4dC5meC5BbmltIiwiRXh0LnV0aWwuS2V5TWFwIiwiRXh0LnBhbmVsLkREIiwiRXh0LlhUZW1wbGF0ZSIsIkV4dC5sYXlvdXQuY29tcG9uZW50LkRvY2siLCJFeHQudXRpbC5NZW1lbnRvIl0sYWxpYXM6IndpZGdldC5wYW5lbCIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuUGFuZWwiLGNvbGxhcHNlZENsczoiY29sbGFwc2VkIixhbmltQ29sbGFwc2U6RXh0LmVuYWJsZUZ4LG1pbkJ1dHRvbldpZHRoOjc1LGNvbGxhcHNlZDpmYWxzZSxjb2xsYXBzZUZpcnN0OnRydWUsaGlkZUNvbGxhcHNlVG9vbDpmYWxzZSx0aXRsZUNvbGxhcHNlOmZhbHNlLGZsb2F0YWJsZTp0cnVlLGNvbGxhcHNpYmxlOmZhbHNlLGNsb3NhYmxlOmZhbHNlLGNsb3NlQWN0aW9uOiJkZXN0cm95IixwbGFjZWhvbGRlckNvbGxhcHNlSGlkZU1vZGU6RXh0LkVsZW1lbnQuVklTSUJJTElUWSxwcmV2ZW50SGVhZGVyOmZhbHNlLGhlYWRlcjp1bmRlZmluZWQsaGVhZGVyUG9zaXRpb246InRvcCIsZnJhbWU6ZmFsc2UsZnJhbWVIZWFkZXI6dHJ1ZSx0aXRsZUFsaWduOiJsZWZ0IixtYW5hZ2VIZWlnaHQ6dHJ1ZSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmFkZEV2ZW50cygiYmVmb3JlY2xvc2UiLCJjbG9zZSIsImJlZm9yZWV4cGFuZCIsImJlZm9yZWNvbGxhcHNlIiwiZXhwYW5kIiwiY29sbGFwc2UiLCJ0aXRsZWNoYW5nZSIsImljb25jaGFuZ2UiLCJpY29uY2xzY2hhbmdlIik7aWYoYS5jb2xsYXBzaWJsZSl7dGhpcy5hZGRTdGF0ZUV2ZW50cyhbImV4cGFuZCIsImNvbGxhcHNlIl0pfWlmKGEudW5zdHlsZWQpe2Euc2V0VUkoInBsYWluIil9aWYoYS5mcmFtZSl7YS5zZXRVSShhLnVpKyItZnJhbWVkIil9YS5icmlkZ2VUb29sYmFycygpO2EuY2FsbFBhcmVudCgpO2EuY29sbGFwc2VEaXJlY3Rpb249YS5jb2xsYXBzZURpcmVjdGlvbnx8YS5oZWFkZXJQb3NpdGlvbnx8RXh0LkNvbXBvbmVudC5ESVJFQ1RJT05fVE9QO2EuaGlkZGVuT25Db2xsYXBzZT1uZXcgRXh0LmRvbS5Db21wb3NpdGVFbGVtZW50KCl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO0V4dC5kZXN0cm95KGEucGxhY2Vob2xkZXIsYS5naG9zdFBhbmVsLGEuZGQpO2EuY2FsbFBhcmVudCgpfSxpbml0QXJpYTpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudCgpO3RoaXMuaW5pdEhlYWRlckFyaWEoKX0sZ2V0Rm9jdXNFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSxpbml0SGVhZGVyQXJpYTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmVsLGM9Yi5oZWFkZXI7aWYoYSYmYyl7YS5kb20uc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsbGVkYnkiLGMudGl0bGVDbXAuaWQpfX0sZ2V0SGVhZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGVhZGVyfSxzZXRUaXRsZTpmdW5jdGlvbihnKXt2YXIgYz10aGlzLGI9Yy50aXRsZSxlPWMuaGVhZGVyLGE9Yy5yZUV4cGFuZGVyLGQ9Yy5wbGFjZWhvbGRlcjtjLnRpdGxlPWc7aWYoZSl7aWYoZS5pc0hlYWRlcil7ZS5zZXRUaXRsZShnKX1lbHNle2UudGl0bGU9Z319ZWxzZXtjLnVwZGF0ZUhlYWRlcigpfWlmKGEpe2Euc2V0VGl0bGUoZyl9aWYoZCYmZC5zZXRUaXRsZSl7ZC5zZXRUaXRsZShnKX1jLmZpcmVFdmVudCgidGl0bGVjaGFuZ2UiLGMsZyxiKX0sc2V0SWNvbkNsczpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGI9Yy5pY29uQ2xzLGU9Yy5oZWFkZXIsZD1jLnBsYWNlaG9sZGVyO2MuaWNvbkNscz1hO2lmKGUpe2lmKGUuaXNIZWFkZXIpe2Uuc2V0SWNvbkNscyhhKX1lbHNle2UuaWNvbkNscz1hfX1lbHNle2MudXBkYXRlSGVhZGVyKCl9aWYoZCYmZC5zZXRJY29uQ2xzKXtkLnNldEljb25DbHMoYSl9Yy5maXJlRXZlbnQoImljb25jbHNjaGFuZ2UiLGMsYSxiKX0sc2V0SWNvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5pY29uLGU9Yi5oZWFkZXIsZD1iLnBsYWNlaG9sZGVyO2IuaWNvbj1hO2lmKGUpe2lmKGUuaXNIZWFkZXIpe2Uuc2V0SWNvbihhKX1lbHNle2UuaWNvbj1hfX1lbHNle2IudXBkYXRlSGVhZGVyKCl9aWYoZCYmZC5zZXRJY29uKXtkLnNldEljb24oYSl9Yi5maXJlRXZlbnQoImljb25jaGFuZ2UiLGIsYSxjKX0sYnJpZGdlVG9vbGJhcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGc9W10sYyxiLGU9YS5taW5CdXR0b25XaWR0aDtmdW5jdGlvbiBkKGgsaixpKXtpZihFeHQuaXNBcnJheShoKSl7aD17eHR5cGU6InRvb2xiYXIiLGl0ZW1zOmh9fWVsc2V7aWYoIWgueHR5cGUpe2gueHR5cGU9InRvb2xiYXIifX1oLmRvY2s9ajtpZihqPT0ibGVmdCJ8fGo9PSJyaWdodCIpe2gudmVydGljYWw9dHJ1ZX1pZihpKXtoLmxheW91dD1FeHQuYXBwbHlJZihoLmxheW91dHx8e30se3BhY2s6e2xlZnQ6InN0YXJ0IixjZW50ZXI6ImNlbnRlciJ9W2EuYnV0dG9uQWxpZ25dfHwiZW5kIn0pfXJldHVybiBofWlmKGEudGJhcil7Zy5wdXNoKGQoYS50YmFyLCJ0b3AiKSk7YS50YmFyPW51bGx9aWYoYS5iYmFyKXtnLnB1c2goZChhLmJiYXIsImJvdHRvbSIpKTthLmJiYXI9bnVsbH1pZihhLmJ1dHRvbnMpe2EuZmJhcj1hLmJ1dHRvbnM7YS5idXR0b25zPW51bGx9aWYoYS5mYmFyKXtjPWQoYS5mYmFyLCJib3R0b20iLHRydWUpO2MudWk9ImZvb3RlciI7aWYoZSl7Yj1jLmRlZmF1bHRzO2MuZGVmYXVsdHM9ZnVuY3Rpb24oaCl7dmFyIGk9Ynx8e307aWYoKCFoLnh0eXBlfHxoLnh0eXBlPT09ImJ1dHRvbiJ8fChoLmlzQ29tcG9uZW50JiZoLmlzWFR5cGUoImJ1dHRvbiIpKSkmJiEoIm1pbldpZHRoIiBpbiBpKSl7aT1FeHQuYXBwbHkoe21pbldpZHRoOmV9LGkpfXJldHVybiBpfX1nLnB1c2goYyk7YS5mYmFyPW51bGx9aWYoYS5sYmFyKXtnLnB1c2goZChhLmxiYXIsImxlZnQiKSk7YS5sYmFyPW51bGx9aWYoYS5yYmFyKXtnLnB1c2goZChhLnJiYXIsInJpZ2h0IikpO2EucmJhcj1udWxsfWlmKGEuZG9ja2VkSXRlbXMpe2lmKCFFeHQuaXNBcnJheShhLmRvY2tlZEl0ZW1zKSl7YS5kb2NrZWRJdGVtcz1bYS5kb2NrZWRJdGVtc119YS5kb2NrZWRJdGVtcz1hLmRvY2tlZEl0ZW1zLmNvbmNhdChnKX1lbHNle2EuZG9ja2VkSXRlbXM9Z319LGlzUGxhY2VIb2xkZXJDb2xsYXBzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbGxhcHNlTW9kZT09InBsYWNlaG9sZGVyIn0sb25Cb3hSZWFkeTpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudCgpO2lmKHRoaXMuY29sbGFwc2VkKXt0aGlzLnNldEhpZGRlbkRvY2tlZCgpfX0sYmVmb3JlUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhO2IuY2FsbFBhcmVudCgpO2IuaW5pdFRvb2xzKCk7aWYoIShiLnByZXZlbnRIZWFkZXJ8fChiLmhlYWRlcj09PWZhbHNlKSkpe2IudXBkYXRlSGVhZGVyKCl9aWYoYi5jb2xsYXBzZWQpe2lmKGIuaXNQbGFjZUhvbGRlckNvbGxhcHNlKCkpe2IuaGlkZGVuPXRydWU7Yi5wbGFjZWhvbGRlckNvbGxhcHNlKCk7YT1iLmNvbGxhcHNlZDtiLmNvbGxhcHNlZD1mYWxzZX1lbHNle2IuYmVnaW5Db2xsYXBzZSgpO2IuYWRkQ2xzV2l0aFVJKGIuY29sbGFwc2VkQ2xzKX19aWYoYSl7Yi5jb2xsYXBzZWQ9YX19LGluaXRUb29sczpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS50b29scz1hLnRvb2xzP0V4dC5BcnJheS5jbG9uZShhLnRvb2xzKTpbXTtpZihhLmNvbGxhcHNpYmxlJiYhKGEuaGlkZUNvbGxhcHNlVG9vbHx8YS5oZWFkZXI9PT1mYWxzZXx8YS5wcmV2ZW50SGVhZGVyKSl7YS5jb2xsYXBzZURpcmVjdGlvbj1hLmNvbGxhcHNlRGlyZWN0aW9ufHxhLmhlYWRlclBvc2l0aW9ufHwidG9wIjthLmNvbGxhcHNlVG9vbD1hLmV4cGFuZFRvb2w9RXh0LndpZGdldCh7eHR5cGU6InRvb2wiLHR5cGU6KGEuY29sbGFwc2VkJiYhYS5pc1BsYWNlSG9sZGVyQ29sbGFwc2UoKSk/KCJleHBhbmQtIithLmdldE9wcG9zaXRlRGlyZWN0aW9uKGEuY29sbGFwc2VEaXJlY3Rpb24pKTooImNvbGxhcHNlLSIrYS5jb2xsYXBzZURpcmVjdGlvbiksaGFuZGxlcjphLnRvZ2dsZUNvbGxhcHNlLHNjb3BlOmF9KTtpZihhLmNvbGxhcHNlRmlyc3Qpe2EudG9vbHMudW5zaGlmdChhLmNvbGxhcHNlVG9vbCl9fWEuYWRkVG9vbHMoKTtpZihhLmNsb3NhYmxlKXthLmFkZENsc1dpdGhVSSgiY2xvc2FibGUiKTthLmFkZFRvb2woe3R5cGU6ImNsb3NlIixoYW5kbGVyOkV4dC5GdW5jdGlvbi5iaW5kKGEuY2xvc2UsYSxbXSl9KX1pZihhLmNvbGxhcHNlVG9vbCYmIWEuY29sbGFwc2VGaXJzdCl7YS5hZGRUb29sKGEuY29sbGFwc2VUb29sKX19LGFkZFRvb2xzOkV4dC5lbXB0eUZuLGNsb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWNsb3NlIix0aGlzKSE9PWZhbHNlKXt0aGlzLmRvQ2xvc2UoKX19LGRvQ2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgiY2xvc2UiLHRoaXMpO3RoaXNbdGhpcy5jbG9zZUFjdGlvbl0oKX0sdXBkYXRlSGVhZGVyOmZ1bmN0aW9uKGQpe3ZhciBjPXRoaXMsaD1jLmhlYWRlcixnPWMudGl0bGUsZT1jLnRvb2xzLGI9Yy5pY29ufHxjLmljb25DbHMsYT1jLmhlYWRlclBvc2l0aW9uPT0ibGVmdCJ8fGMuaGVhZGVyUG9zaXRpb249PSJyaWdodCI7aWYoKGghPT1mYWxzZSkmJihkfHwoZ3x8Yil8fChlJiZlLmxlbmd0aCl8fChjLmNvbGxhcHNpYmxlJiYhYy50aXRsZUNvbGxhcHNlKSkpe2lmKGgmJmguaXNIZWFkZXIpe2guc2hvdygpfWVsc2V7aD1jLmhlYWRlcj1FeHQud2lkZ2V0KEV4dC5hcHBseSh7eHR5cGU6ImhlYWRlciIsdGl0bGU6Zyx0aXRsZUFsaWduOmMudGl0bGVBbGlnbixvcmllbnRhdGlvbjphPyJ2ZXJ0aWNhbCI6Imhvcml6b250YWwiLGRvY2s6Yy5oZWFkZXJQb3NpdGlvbnx8InRvcCIsdGV4dENsczpjLmhlYWRlclRleHRDbHMsaWNvbkNsczpjLmljb25DbHMsaWNvbjpjLmljb24sYmFzZUNsczpjLmJhc2VDbHMrIi1oZWFkZXIiLHRvb2xzOmUsdWk6Yy51aSxpZDpjLmlkKyJfaGVhZGVyIixpbmRpY2F0ZURyYWc6Yy5kcmFnZ2FibGUsZnJhbWU6KGMuZnJhbWV8fGMuYWx3YXlzRnJhbWVkKSYmYy5mcmFtZUhlYWRlcixpZ25vcmVQYXJlbnRGcmFtZTpjLmZyYW1lfHxjLm92ZXJsYXBIZWFkZXIsaWdub3JlQm9yZGVyTWFuYWdlbWVudDpjLmZyYW1lfHxjLmlnbm9yZUhlYWRlckJvcmRlck1hbmFnZW1lbnQsbGlzdGVuZXJzOmMuY29sbGFwc2libGUmJmMudGl0bGVDb2xsYXBzZT97Y2xpY2s6Yy50b2dnbGVDb2xsYXBzZSxzY29wZTpjfTpudWxsfSxjLmhlYWRlcikpO2MuYWRkRG9ja2VkKGgsMCk7Yy50b29scz1oLnRvb2xzfWMuaW5pdEhlYWRlckFyaWEoKX1lbHNle2lmKGgpe2guaGlkZSgpfX19LHNldFVJOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYS5oZWFkZXImJmEuaGVhZGVyLnJlbmRlcmVkKXthLmhlYWRlci5zZXRVSShiKX19LGdldENvbnRlbnRUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib2R5fSxnZXRUYXJnZXRFbDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIGEuYm9keXx8YS5wcm90b0JvZHl8fGEuZnJhbWVCb2R5fHxhLmVsfSxpc1Zpc2libGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihiLmNvbGxhcHNlZCYmYi5wbGFjZWhvbGRlcil7cmV0dXJuIGIucGxhY2Vob2xkZXIuaXNWaXNpYmxlKGEpfXJldHVybiBiLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sb25IaWRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLmNvbGxhcHNlZCYmYS5wbGFjZWhvbGRlcil7YS5wbGFjZWhvbGRlci5oaWRlKCl9ZWxzZXthLmNhbGxQYXJlbnQoYXJndW1lbnRzKX19LG9uU2hvdzpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5jb2xsYXBzZWQmJmEucGxhY2Vob2xkZXIpe2EuaGlkZGVuPXRydWU7YS5wbGFjZWhvbGRlci5zaG93KCl9ZWxzZXthLmNhbGxQYXJlbnQoYXJndW1lbnRzKX19LG9uUmVtb3ZlZDpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGEucGxhY2Vob2xkZXImJiFiKXthLm93bmVyQ3QucmVtb3ZlKGEucGxhY2Vob2xkZXIsZmFsc2UpfX0sYWRkVG9vbDpmdW5jdGlvbihlKXtlPVtdLmNvbmNhdChlKTt2YXIgZD10aGlzLGc9ZC5oZWFkZXIsYyxhPWUubGVuZ3RoLGI7Zm9yKGM9MDtjPGE7YysrKXtiPWVbY107ZC50b29scy5wdXNoKGIpO2lmKGcmJmcuaXNIZWFkZXIpe2cuYWRkVG9vbChiKX19ZC51cGRhdGVIZWFkZXIoKX0sZ2V0T3Bwb3NpdGVEaXJlY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9RXh0LkNvbXBvbmVudDtzd2l0Y2goYSl7Y2FzZSBiLkRJUkVDVElPTl9UT1A6cmV0dXJuIGIuRElSRUNUSU9OX0JPVFRPTTtjYXNlIGIuRElSRUNUSU9OX1JJR0hUOnJldHVybiBiLkRJUkVDVElPTl9MRUZUO2Nhc2UgYi5ESVJFQ1RJT05fQk9UVE9NOnJldHVybiBiLkRJUkVDVElPTl9UT1A7Y2FzZSBiLkRJUkVDVElPTl9MRUZUOnJldHVybiBiLkRJUkVDVElPTl9SSUdIVH19LGdldFdpZHRoQXV0aG9yaXR5OmZ1bmN0aW9uKCl7aWYodGhpcy5jb2xsYXBzZWQmJnRoaXMuY29sbGFwc2VkSG9yaXpvbnRhbCgpKXtyZXR1cm4gMX1yZXR1cm4gdGhpcy5jYWxsUGFyZW50KCl9LGdldEhlaWdodEF1dGhvcml0eTpmdW5jdGlvbigpe2lmKHRoaXMuY29sbGFwc2VkJiZ0aGlzLmNvbGxhcHNlZFZlcnRpY2FsKCkpe3JldHVybiAxfXJldHVybiB0aGlzLmNhbGxQYXJlbnQoKX0sY29sbGFwc2VkSG9yaXpvbnRhbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0Q29sbGFwc2VkKCk7cmV0dXJuIGE9PSJsZWZ0Inx8YT09InJpZ2h0In0sY29sbGFwc2VkVmVydGljYWw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldENvbGxhcHNlZCgpO3JldHVybiBhPT0idG9wInx8YT09ImJvdHRvbSJ9LHJlc3RvcmVEaW1lbnNpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbGxhcHNlRGlyZWN0aW9uO3JldHVybihhPT09InRvcCJ8fGE9PT0iYm90dG9tIik/ImhlaWdodCI6IndpZHRoIn0sZ2V0Q29sbGFwc2VkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLmNvbGxhcHNlZD09PXRydWUpe3JldHVybiBhLmNvbGxhcHNlRGlyZWN0aW9ufXJldHVybiBhLmNvbGxhcHNlZH0sZ2V0U3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jYWxsUGFyZW50KCksYztiPWEuYWRkUHJvcGVydHlUb1N0YXRlKGIsImNvbGxhcHNlZCIpO2lmKGEuY29sbGFwc2VkKXtjPWEuY29sbGFwc2VNZW1lbnRvO2M9YyYmYy5kYXRhO2lmKGEuY29sbGFwc2VkVmVydGljYWwoKSl7aWYoYil7ZGVsZXRlIGIuaGVpZ2h0fWlmKGMpe2I9YS5hZGRQcm9wZXJ0eVRvU3RhdGUoYiwiaGVpZ2h0IixjLmhlaWdodCl9fWVsc2V7aWYoYil7ZGVsZXRlIGIud2lkdGh9aWYoYyl7Yj1hLmFkZFByb3BlcnR5VG9TdGF0ZShiLCJ3aWR0aCIsYy53aWR0aCl9fX1yZXR1cm4gYn0sZmluZFJlRXhwYW5kZXI6ZnVuY3Rpb24oaCl7dmFyIGc9dGhpcyxqPUV4dC5Db21wb25lbnQsZT1nLmRvY2tlZEl0ZW1zLml0ZW1zLGE9ZS5sZW5ndGgsYixkO2lmKGcuY29sbGFwc2VNb2RlPT0ibWluaSIpe3JldHVybn1zd2l0Y2goaCl7Y2FzZSBqLkRJUkVDVElPTl9UT1A6Y2FzZSBqLkRJUkVDVElPTl9CT1RUT006Zm9yKGQ9MDtkPGE7ZCsrKXtiPWVbZF07aWYoIWIuaGlkZGVuKXtpZihiLmlzSGVhZGVyJiYoIWIuZG9ja3x8Yi5kb2NrPT0idG9wInx8Yi5kb2NrPT0iYm90dG9tIikpe3JldHVybiBifX19YnJlYWs7Y2FzZSBqLkRJUkVDVElPTl9MRUZUOmNhc2Ugai5ESVJFQ1RJT05fUklHSFQ6Zm9yKGQ9MDtkPGE7ZCsrKXtiPWVbZF07aWYoIWIuaGlkZGVuKXtpZihiLmlzSGVhZGVyJiYoYi5kb2NrPT0ibGVmdCJ8fGIuZG9jaz09InJpZ2h0Iikpe3JldHVybiBifX19YnJlYWs7ZGVmYXVsdDp0aHJvdyAoIlBhbmVsI2ZpbmRSZUV4cGFuZGVyIG11c3QgYmUgcGFzc2VkIGEgdmFsaWQgY29sbGFwc2VEaXJlY3Rpb24iKX19LGdldFJlRXhwYW5kZXI6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxkPWN8fGIuY29sbGFwc2VEaXJlY3Rpb24sYT1iLnJlRXhwYW5kZXJ8fGIuZmluZFJlRXhwYW5kZXIoZCk7Yi5leHBhbmREaXJlY3Rpb249Yi5nZXRPcHBvc2l0ZURpcmVjdGlvbihkKTtpZighYSl7Yi5yZUV4cGFuZGVyPWE9Yi5jcmVhdGVSZUV4cGFuZGVyKGQse2RvY2s6ZCxjbHM6RXh0LmJhc2VDU1NQcmVmaXgrImRvY2tlZCAiK2IuYmFzZUNscysiLSIrYi51aSsiLWNvbGxhcHNlZCIsb3duZXJDdDpiLG93bmVyTGF5b3V0OmIuY29tcG9uZW50TGF5b3V0fSk7Yi5kb2NrZWRJdGVtcy5pbnNlcnQoMCxhKX1yZXR1cm4gYX0sY3JlYXRlUmVFeHBhbmRlcjpmdW5jdGlvbihnLGUpe3ZhciBkPXRoaXMsaT1nPT0ibGVmdCIsYz1nPT0icmlnaHQiLGg9aXx8YyxiLGE9RXh0LmFwcGx5KHtoaWRlTW9kZToib2Zmc2V0cyIsdGl0bGU6ZC50aXRsZSxvcmllbnRhdGlvbjpoPyJ2ZXJ0aWNhbCI6Imhvcml6b250YWwiLHRleHRDbHM6ZC5oZWFkZXJUZXh0Q2xzLGljb246ZC5pY29uLGljb25DbHM6ZC5pY29uQ2xzLGJhc2VDbHM6ZC5iYXNlQ2xzKyItaGVhZGVyIix1aTpkLnVpLGZyYW1lOmQuZnJhbWUmJmQuZnJhbWVIZWFkZXIsaWdub3JlUGFyZW50RnJhbWU6ZC5mcmFtZXx8ZC5vdmVybGFwSGVhZGVyLGluZGljYXRlRHJhZzpkLmRyYWdnYWJsZX0sZSk7aWYoZC5jb2xsYXBzZU1vZGU9PSJtaW5pIil7aWYoaCl7YS53aWR0aD0xfWVsc2V7YS5oZWlnaHQ9MX19aWYoIWQuaGlkZUNvbGxhcHNlVG9vbCl7Yj1pfHwoYyYmZC5pc1BsYWNlSG9sZGVyQ29sbGFwc2UoKSk7YVtiPyJpdGVtcyI6InRvb2xzIl09W3t4dHlwZToidG9vbCIsdHlwZToiZXhwYW5kLSIrZC5nZXRPcHBvc2l0ZURpcmVjdGlvbihnKSx1aUNsczpbInRvcCJdLGhhbmRsZXI6ZC50b2dnbGVDb2xsYXBzZSxzY29wZTpkfV19YT1uZXcgRXh0LnBhbmVsLkhlYWRlcihhKTthLmFkZENsc1dpdGhVSShkLmdldEhlYWRlckNvbGxhcHNlZENsYXNzZXMoYSkpO3JldHVybiBhfSxnZXRIZWFkZXJDb2xsYXBzZWRDbGFzc2VzOmZ1bmN0aW9uKGQpe3ZhciBiPXRoaXMsYz1iLmNvbGxhcHNlZENscyxhO2E9W2MsYysiLSIrZC5kb2NrXTtpZihiLmJvcmRlciYmKCFiLmZyYW1lfHwoYi5mcmFtZSYmRXh0LnN1cHBvcnRzLkNTUzNCb3JkZXJSYWRpdXMpKSl7YS5wdXNoKGMrIi1ib3JkZXItIitkLmRvY2spfXJldHVybiBhfSxiZWdpbkNvbGxhcHNlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxjPWUubGFzdEJveCxnPWUucmVuZGVyZWQsYj1lLmNvbGxhcHNlTWVtZW50b3x8KGUuY29sbGFwc2VNZW1lbnRvPW5ldyBFeHQudXRpbC5NZW1lbnRvKGUpKSxkPWUuZ2V0U2l6ZU1vZGVsKCksYTtiLmNhcHR1cmUoWyJoZWlnaHQiLCJtaW5IZWlnaHQiLCJ3aWR0aCIsIm1pbldpZHRoIl0pO2lmKGMpe2IuY2FwdHVyZShlLnJlc3RvcmVEaW1lbnNpb24oKSxjLCJsYXN0LiIpfWlmKGUuY29sbGFwc2VkVmVydGljYWwoKSl7aWYoZC53aWR0aC5zaHJpbmtXcmFwKXtlLndpZHRoPWc/ZS5nZXRXaWR0aCgpOmUud2lkdGh8fGUubWluV2lkdGh8fDEwMH1kZWxldGUgZS5oZWlnaHQ7ZS5taW5IZWlnaHQ9MH1lbHNle2lmKGUuY29sbGFwc2VkSG9yaXpvbnRhbCgpKXtpZihkLmhlaWdodC5zaHJpbmtXcmFwKXtlLmhlaWdodD1nP2UuZ2V0SGVpZ2h0KCk6ZS5oZWlnaHR8fGUubWluSGVpZ2h0fHwxMDB9ZGVsZXRlIGUud2lkdGg7ZS5taW5XaWR0aD0wfX1pZihlLm93bmVyQ3Qpe2Uub3duZXJDdC5nZXRMYXlvdXQoKS5iZWdpbkNvbGxhcHNlKGUpfWlmKCFlLmlzUGxhY2VIb2xkZXJDb2xsYXBzZSgpKXtpZihlLmhlYWRlcj09PShhPWUuZ2V0UmVFeHBhbmRlcigpKSl7ZS5oZWFkZXIuYWRkQ2xzV2l0aFVJKGUuZ2V0SGVhZGVyQ29sbGFwc2VkQ2xhc3NlcyhlLmhlYWRlcikpO2lmKGUuaGVhZGVyLnJlbmRlcmVkKXtlLmhlYWRlci51cGRhdGVGcmFtZSgpfX1lbHNle2lmKGEuZWwpe2EuZWwuc2hvdygpO2EuaGlkZGVuPWZhbHNlfX19aWYoZS5yZXNpemVyKXtlLnJlc2l6ZXIuZGlzYWJsZSgpfX0sYmVnaW5FeHBhbmQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGQ9ZS5sYXN0Qm94LGM9ZS5jb2xsYXBzZU1lbWVudG8sYT10aGlzLnJlc3RvcmVEaW1lbnNpb24oKSxiO2MucmVzdG9yZShbIm1pbkhlaWdodCIsIm1pbldpZHRoIixhXSk7aWYoZCl7Yy5yZXN0b3JlKGEsdHJ1ZSxkLCJsYXN0LiIpfWlmKGUub3duZXJDdCl7ZS5vd25lckN0LmdldExheW91dCgpLmJlZ2luRXhwYW5kKGUpfWlmKCFlLmlzUGxhY2VIb2xkZXJDb2xsYXBzZSgpKXtpZihlLmhlYWRlcj09PShiPWUuZ2V0UmVFeHBhbmRlcigpKSl7ZS5oZWFkZXIucmVtb3ZlQ2xzV2l0aFVJKGUuZ2V0SGVhZGVyQ29sbGFwc2VkQ2xhc3NlcyhlLmhlYWRlcikpO2lmKGUuaGVhZGVyLnJlbmRlcmVkKXtlLmhlYWRlci51cGRhdGVGcmFtZSgpfX1lbHNle2IuaGlkZGVuPXRydWU7Yi5lbC5oaWRlKCl9fWlmKGUucmVzaXplcil7ZS5yZXNpemVyLmVuYWJsZSgpfX0sY29sbGFwc2U6ZnVuY3Rpb24oZCxhKXt2YXIgYz10aGlzLGU9ZHx8Yy5jb2xsYXBzZURpcmVjdGlvbixiPWMub3duZXJDdDtpZihjLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nKXtyZXR1cm4gY31pZihhcmd1bWVudHMubGVuZ3RoPDIpe2E9Yy5hbmltQ29sbGFwc2V9aWYoYy5jb2xsYXBzZWR8fGMuZmlyZUV2ZW50KCJiZWZvcmVjb2xsYXBzZSIsYyxkLGEpPT09ZmFsc2Upe3JldHVybiBjfWlmKGImJmMuaXNQbGFjZUhvbGRlckNvbGxhcHNlKCkpe3JldHVybiBjLnBsYWNlaG9sZGVyQ29sbGFwc2UoZCxhKX1jLmNvbGxhcHNlZD1lO2MuYmVnaW5Db2xsYXBzZSgpO2MuZmlyZUhpZXJhcmNoeUV2ZW50KCJjb2xsYXBzZSIpO3JldHVybiBjLmRvQ29sbGFwc2VFeHBhbmQoMSxhKX0sZG9Db2xsYXBzZUV4cGFuZDpmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMsYz1kLmFuaW1Db2xsYXBzZSxlPWQub3duZXJMYXlvdXQ7ZC5hbmltQ29sbGFwc2U9YjtkLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nPWE7aWYoZSYmIWIpe2Uub25Db250ZW50Q2hhbmdlKGQpfWVsc2V7ZC51cGRhdGVMYXlvdXQoe2lzUm9vdDp0cnVlfSl9ZC5hbmltQ29sbGFwc2U9YztyZXR1cm4gZH0sYWZ0ZXJDb2xsYXBzZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzLGM9YS5vd25lckxheW91dDthLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nPTA7aWYoYS5jb2xsYXBzZVRvb2wpe2EuY29sbGFwc2VUb29sLnNldFR5cGUoImV4cGFuZC0iK2EuZ2V0T3Bwb3NpdGVEaXJlY3Rpb24oYS5jb2xsYXBzZURpcmVjdGlvbikpfWlmKGMmJmIpe2Mub25Db250ZW50Q2hhbmdlKGEpfWEuc2V0SGlkZGVuRG9ja2VkKCk7YS5maXJlRXZlbnQoImNvbGxhcHNlIixhKX0sc2V0SGlkZGVuRG9ja2VkOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxkPWguaGlkZGVuT25Db2xsYXBzZSxiPWguZ2V0UmVFeHBhbmRlcigpLGM9aC5nZXREb2NrZWRJdGVtcygpLGE9Yy5sZW5ndGgsZT0wLGc7ZC5hZGQoaC5ib2R5KTtmb3IoO2U8YTtlKyspe2c9Y1tlXTtpZihnJiZnIT09YiYmZy5lbCl7ZC5hZGQoZy5lbCl9fWQuc2V0U3R5bGUoInZpc2liaWxpdHkiLCJoaWRkZW4iKX0scmVzdG9yZUhpZGRlbkRvY2tlZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaGlkZGVuT25Db2xsYXBzZTthLnNldFN0eWxlKCJ2aXNpYmlsaXR5IiwiIik7YS5jbGVhcigpfSxnZXRQbGFjZWhvbGRlcjpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGU9Y3x8Yi5jb2xsYXBzZURpcmVjdGlvbixhPW51bGwsZD1iLnBsYWNlaG9sZGVyO2lmKCFkKXtpZihiLmZsb2F0YWJsZXx8KGIuY29sbGFwc2libGUmJmIudGl0bGVDb2xsYXBzZSkpe2E9e2NsaWNrOntmbjpiLmZsb2F0YWJsZT9iLmZsb2F0Q29sbGFwc2VkUGFuZWw6Yi50b2dnbGVDb2xsYXBzZSxlbGVtZW50OiJlbCIsc2NvcGU6Yn19fWIucGxhY2Vob2xkZXI9ZD1FeHQud2lkZ2V0KGIuY3JlYXRlUmVFeHBhbmRlcihlLHtpZDpiLmlkKyItcGxhY2Vob2xkZXIiLGxpc3RlbmVyczphfSkpfWlmKCFkLnBsYWNlaG9sZGVyRm9yKXtpZighZC5pc0NvbXBvbmVudCl7Yi5wbGFjZWhvbGRlcj1kPWIubG9va3VwQ29tcG9uZW50KGQpfUV4dC5hcHBseUlmKGQse21hcmdpbnM6Yi5tYXJnaW5zLHBsYWNlaG9sZGVyRm9yOmJ9KTtkLmFkZENscyhbRXh0LmJhc2VDU1NQcmVmaXgrInJlZ2lvbi1jb2xsYXBzZWQtcGxhY2Vob2xkZXIiLEV4dC5iYXNlQ1NTUHJlZml4KyJyZWdpb24tY29sbGFwc2VkLSIrZSsiLXBsYWNlaG9sZGVyIixiLmNvbGxhcHNlZENsc10pfXJldHVybiBkfSxwbGFjZWhvbGRlckNvbGxhcHNlOmZ1bmN0aW9uKGUsYSl7dmFyIGQ9dGhpcyxjPWQub3duZXJDdCxoPWV8fGQuY29sbGFwc2VEaXJlY3Rpb24sYj1FeHQuYmFzZUNTU1ByZWZpeCsiYm9yZGVyLXJlZ2lvbi1zbGlkZS1pbiIsZz1kLmdldFBsYWNlaG9sZGVyKGUpO2QuaXNDb2xsYXBzaW5nT3JFeHBhbmRpbmc9MTtkLmhpZGRlbj10cnVlO2QuY29sbGFwc2VkPWg7aWYoZy5yZW5kZXJlZCl7aWYoZy5lbC5kb20ucGFyZW50Tm9kZSE9PWQuZWwuZG9tLnBhcmVudE5vZGUpe2QuZWwuZG9tLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGcuZWwuZG9tLGQuZWwuZG9tKX1nLmhpZGRlbj1mYWxzZTtnLmVsLnNob3coKTtjLnVwZGF0ZUxheW91dCgpfWVsc2V7Yy5pbnNlcnQoYy5pdGVtcy5pbmRleE9mKGQpLGcpfWlmKGQucmVuZGVyZWQpe2QuZWwuc2V0VmlzaWJpbGl0eU1vZGUoZC5wbGFjZWhvbGRlckNvbGxhcHNlSGlkZU1vZGUpO2lmKGEpe2QuZWwuYWRkQ2xzKGIpO2cuZWwuaGlkZSgpO2QuZWwuc2xpZGVPdXQoaC5zdWJzdHIoMCwxKSx7cHJlc2VydmVTY3JvbGw6dHJ1ZSxkdXJhdGlvbjpFeHQuTnVtYmVyLmZyb20oYSxFeHQuZnguQW5pbS5wcm90b3R5cGUuZHVyYXRpb24pLGxpc3RlbmVyczp7YWZ0ZXJhbmltYXRlOmZ1bmN0aW9uKCl7ZC5lbC5yZW1vdmVDbHMoYik7Zy5lbC5zaG93KCkuc2V0U3R5bGUoImRpc3BsYXkiLCJub25lIikuc2xpZGVJbihoLnN1YnN0cigwLDEpLHtlYXNpbmc6ImxpbmVhciIsZHVyYXRpb246MTAwLGxpc3RlbmVyczp7YWZ0ZXJhbmltYXRlOmZ1bmN0aW9uKCl7Zy5mb2N1cygpO2QuaXNDb2xsYXBzaW5nT3JFeHBhbmRpbmc9MDtkLmZpcmVFdmVudCgiY29sbGFwc2UiLGQpfX19KX19fSl9ZWxzZXtkLmVsLmhpZGUoKTtkLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nPTA7ZC5maXJlRXZlbnQoImNvbGxhcHNlIixkKX19ZWxzZXtkLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nPTA7ZC5maXJlRXZlbnQoImNvbGxhcHNlIixkKX1yZXR1cm4gZH0sZmxvYXRDb2xsYXBzZWRQYW5lbDpmdW5jdGlvbigpe3ZhciBnPXRoaXMsaT1nLnBsYWNlaG9sZGVyLGg9aS5nZXRCb3godHJ1ZSksZCxlPUV4dC5iYXNlQ1NTUHJlZml4KyJib3JkZXItcmVnaW9uLXNsaWRlLWluIixiPWcuY29sbGFwc2VkLGo9Zy5vd25lckN0fHxnLGE7aWYoZy5lbC5oYXNDbHMoZSkpe2cuc2xpZGVPdXRGbG9hdGVkUGFuZWwoKTtyZXR1cm59aWYoZy5pc1NsaWRpbmcpe3JldHVybn1nLmlzU2xpZGluZz10cnVlO2Z1bmN0aW9uIGMobCl7aWYoIWcuaXNEZXN0cm95ZWQpe3ZhciBrPWcuZWwuZ2V0UmVnaW9uKCkudW5pb24oaS5lbC5nZXRSZWdpb24oKSkuYWRqdXN0KDEsLTEsLTEsMSk7aWYoIWsuY29udGFpbnMobC5nZXRQb2ludCgpKSl7Zy5zbGlkZU91dEZsb2F0ZWRQYW5lbCgpfX19Zy5wbGFjZWhvbGRlci5lbC5oaWRlKCk7Zy5wbGFjZWhvbGRlci5oaWRkZW49dHJ1ZTtnLmVsLnNob3coKTtnLmhpZGRlbj1mYWxzZTtnLmNvbGxhcHNlZD1mYWxzZTtqLnVwZGF0ZUxheW91dCgpO2Q9Zy5nZXRCb3godHJ1ZSk7Zy5wbGFjZWhvbGRlci5lbC5zaG93KCk7Zy5wbGFjZWhvbGRlci5oaWRkZW49ZmFsc2U7Zy5lbC5oaWRlKCk7Zy5oaWRkZW49dHJ1ZTtnLmNvbGxhcHNlZD1iO2oudXBkYXRlTGF5b3V0KCk7Zy5wbGFjZWhvbGRlck1vdXNlTW9uPWkuZWwubW9uaXRvck1vdXNlTGVhdmUoNTAwLGMpO2cucGFuZWxNb3VzZU1vbj1nLmVsLm1vbml0b3JNb3VzZUxlYXZlKDUwMCxjKTtnLmVsLmFkZENscyhlKTtpZihnLmNvbGxhcHNlVG9vbCl7Zy5jb2xsYXBzZVRvb2wuZWwuaGlkZSgpfXN3aXRjaChnLmNvbGxhcHNlZCl7Y2FzZSJ0b3AiOmcuZWwuc2V0TGVmdFRvcChoLngsaC55K2guaGVpZ2h0LTEpO2E9InQiO2JyZWFrO2Nhc2UicmlnaHQiOmcuZWwuc2V0TGVmdFRvcChoLngtZC53aWR0aCsxLGgueSk7YT0iciI7YnJlYWs7Y2FzZSJib3R0b20iOmcuZWwuc2V0TGVmdFRvcChoLngsaC55LWQuaGVpZ2h0KzEpO2E9ImIiO2JyZWFrO2Nhc2UibGVmdCI6Zy5lbC5zZXRMZWZ0VG9wKGgueCtoLndpZHRoLTEsaC55KTthPSJsIjticmVha31nLmZsb2F0ZWRGcm9tQ29sbGFwc2U9Zy5jb2xsYXBzZWQ7Zy5jb2xsYXBzZWQ9Zy5oaWRkZW49ZmFsc2U7Zy5lbC5zbGlkZUluKGEse3ByZXNlcnZlU2Nyb2xsOnRydWUsbGlzdGVuZXJzOnthZnRlcmFuaW1hdGU6ZnVuY3Rpb24oKXtnLmlzU2xpZGluZz1mYWxzZX19fSl9LGlzTGF5b3V0Um9vdDpmdW5jdGlvbigpe2lmKHRoaXMuZmxvYXRlZEZyb21Db2xsYXBzZSl7cmV0dXJuIHRydWV9cmV0dXJuIHRoaXMuY2FsbFBhcmVudCgpfSxzbGlkZU91dEZsb2F0ZWRQYW5lbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYz10aGlzLmVsLGI7aWYoYS5pc1NsaWRpbmcpe3JldHVybn1hLmlzU2xpZGluZz10cnVlO2Euc2xpZGVPdXRGbG9hdGVkUGFuZWxCZWdpbigpO2lmKHR5cGVvZiBhLmNvbGxhcHNlZD09InN0cmluZyIpe2I9YS5jb2xsYXBzZWQuY2hhckF0KDApfWMuc2xpZGVPdXQoYix7cHJlc2VydmVTY3JvbGw6dHJ1ZSxsaXN0ZW5lcnM6e2FmdGVyYW5pbWF0ZTpmdW5jdGlvbigpe2Euc2xpZGVPdXRGbG9hdGVkUGFuZWxFbmQoKTthLmVsLnJlbW92ZUNscyhFeHQuYmFzZUNTU1ByZWZpeCsiYm9yZGVyLXJlZ2lvbi1zbGlkZS1pbiIpO2EuaXNTbGlkaW5nPWZhbHNlfX19KX0sc2xpZGVPdXRGbG9hdGVkUGFuZWxCZWdpbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj10aGlzLmVsO2EuY29sbGFwc2VkPWEuZmxvYXRlZEZyb21Db2xsYXBzZTthLmhpZGRlbj10cnVlO2EuZmxvYXRlZEZyb21Db2xsYXBzZT1udWxsO2IudW4oYS5wYW5lbE1vdXNlTW9uKTthLnBsYWNlaG9sZGVyLmVsLnVuKGEucGxhY2Vob2xkZXJNb3VzZU1vbil9LHNsaWRlT3V0RmxvYXRlZFBhbmVsRW5kOmZ1bmN0aW9uKCl7aWYodGhpcy5jb2xsYXBzZVRvb2wpe3RoaXMuY29sbGFwc2VUb29sLmVsLnNob3coKX19LGV4cGFuZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGIuaXNDb2xsYXBzaW5nT3JFeHBhbmRpbmcpe3JldHVybiBifWlmKCFhcmd1bWVudHMubGVuZ3RoKXthPWIuYW5pbUNvbGxhcHNlfWlmKCFiLmNvbGxhcHNlZCYmIWIuZmxvYXRlZEZyb21Db2xsYXBzZSl7cmV0dXJuIGJ9aWYoYi5maXJlRXZlbnQoImJlZm9yZWV4cGFuZCIsYixhKT09PWZhbHNlKXtyZXR1cm4gYn1pZihiLmlzUGxhY2VIb2xkZXJDb2xsYXBzZSgpKXtyZXR1cm4gYi5wbGFjZWhvbGRlckV4cGFuZChhKX1iLnJlc3RvcmVIaWRkZW5Eb2NrZWQoKTtiLmJlZ2luRXhwYW5kKCk7Yi5jb2xsYXBzZWQ9ZmFsc2U7Yi5maXJlSGllcmFyY2h5RXZlbnQoImV4cGFuZCIpO3JldHVybiBiLmRvQ29sbGFwc2VFeHBhbmQoMixhKX0scGxhY2Vob2xkZXJFeHBhbmQ6ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcyxoPWQuY29sbGFwc2VkLGM9RXh0LmJhc2VDU1NQcmVmaXgrImJvcmRlci1yZWdpb24tc2xpZGUtaW4iLGUsYSxnO2lmKGQuZmxvYXRlZEZyb21Db2xsYXBzZSl7YT1kLmdldFBvc2l0aW9uKHRydWUpO2Quc2xpZGVPdXRGbG9hdGVkUGFuZWxCZWdpbigpO2Quc2xpZGVPdXRGbG9hdGVkUGFuZWxFbmQoKX1kLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nPTI7ZC5wbGFjZWhvbGRlci5oaWRkZW49dHJ1ZTtkLnBsYWNlaG9sZGVyLmVsLmhpZGUoKTtkLmNvbGxhcHNlZD1mYWxzZTtkLnNob3coKTtpZihiKXtpZihhKXtlPWQuZWwuZ2V0WFkoKTtkLmVsLnNldExlZnRUb3AoYVswXSxhWzFdKTtkLmVsLm1vdmVUbyhlWzBdLGVbMV0se2R1cmF0aW9uOkV4dC5OdW1iZXIuZnJvbShiLEV4dC5meC5BbmltLnByb3RvdHlwZS5kdXJhdGlvbiksbGlzdGVuZXJzOnthZnRlcmFuaW1hdGU6ZnVuY3Rpb24oKXtkLmVsLnJlbW92ZUNscyhjKTtkLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nPTA7ZC5maXJlRXZlbnQoImV4cGFuZCIsZCl9fX0pfWVsc2V7ZC5oaWRkZW49dHJ1ZTtkLmVsLmFkZENscyhjKTtkLmVsLmhpZGUoKTtkLmNvbGxhcHNlZD1oO2QucGxhY2Vob2xkZXIuc2hvdygpO2c9aC5zdWJzdHIoMCwxKTtkLmhpZGRlbj1mYWxzZTtkLmVsLnNsaWRlSW4oZyx7cHJlc2VydmVTY3JvbGw6dHJ1ZSxkdXJhdGlvbjpFeHQuTnVtYmVyLmZyb20oYixFeHQuZnguQW5pbS5wcm90b3R5cGUuZHVyYXRpb24pLGxpc3RlbmVyczp7YWZ0ZXJhbmltYXRlOmZ1bmN0aW9uKCl7ZC5jb2xsYXBzZWQ9ZmFsc2U7ZC5lbC5yZW1vdmVDbHMoYyk7ZC5wbGFjZWhvbGRlci5oaWRlKCk7ZC5pc0NvbGxhcHNpbmdPckV4cGFuZGluZz0wO2QuZmlyZUV2ZW50KCJleHBhbmQiLGQpfX19KX19ZWxzZXtkLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nPTA7ZC5maXJlRXZlbnQoImV4cGFuZCIsZCl9cmV0dXJuIGR9LGFmdGVyRXhwYW5kOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMsYz1hLm93bmVyTGF5b3V0O2EuaXNDb2xsYXBzaW5nT3JFeHBhbmRpbmc9MDtpZihhLmNvbGxhcHNlVG9vbCl7YS5jb2xsYXBzZVRvb2wuc2V0VHlwZSgiY29sbGFwc2UtIithLmNvbGxhcHNlRGlyZWN0aW9uKX1pZihjJiZiKXtjLm9uQ29udGVudENoYW5nZShhKX1hLmZpcmVFdmVudCgiZXhwYW5kIixhKX0sc2V0Qm9yZGVyOmZ1bmN0aW9uKGEsYyl7aWYoYyl7cmV0dXJufXZhciBiPXRoaXMsZD1iLmhlYWRlcjtpZighYSl7YT0wfWVsc2V7YT1FeHQuRWxlbWVudC51bml0aXplQm94KChhPT09dHJ1ZSk/MTphKX1pZihkKXtpZihkLmlzSGVhZGVyKXtkLnNldEJvcmRlcihhKX1lbHNle2QuYm9yZGVyPWF9fWlmKGIucmVuZGVyZWQmJmIuYm9keUJvcmRlciE9PWZhbHNlKXtiLmJvZHkuc2V0U3R5bGUoImJvcmRlci13aWR0aCIsYSl9Yi51cGRhdGVMYXlvdXQoKTtiLmJvcmRlcj1hfSx0b2dnbGVDb2xsYXBzZTpmdW5jdGlvbigpe3JldHVybih0aGlzLmNvbGxhcHNlZHx8dGhpcy5mbG9hdGVkRnJvbUNvbGxhcHNlKT90aGlzLmV4cGFuZCgpOnRoaXMuY29sbGFwc2UoKX0sZ2V0S2V5TWFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMua2V5TWFwfHwodGhpcy5rZXlNYXA9bmV3IEV4dC51dGlsLktleU1hcChFeHQuYXBwbHkoe3RhcmdldDp0aGlzLmVsfSx0aGlzLmtleXMpKSl9LGluaXREcmFnZ2FibGU6ZnVuY3Rpb24oKXt0aGlzLmRkPW5ldyBFeHQucGFuZWwuREQodGhpcyxFeHQuaXNCb29sZWFuKHRoaXMuZHJhZ2dhYmxlKT9udWxsOnRoaXMuZHJhZ2dhYmxlKX0sZ2hvc3RUb29sczpmdW5jdGlvbigpe3ZhciBlPVtdLGc9dGhpcy5oZWFkZXIsZD1nP2cucXVlcnkoInRvb2xbaGlkZGVuPWZhbHNlXSIpOltdLGMsYSxiO2lmKGQubGVuZ3RoKXtjPTA7YT1kLmxlbmd0aDtmb3IoO2M8YTtjKyspe2I9ZFtjXTtlLnB1c2goe3R5cGU6Yi50eXBlfSl9fWVsc2V7ZT1be3R5cGU6InBsYWNlaG9sZGVyIn1dfXJldHVybiBlfSxnaG9zdDpmdW5jdGlvbihhKXt2YXIgZD10aGlzLGI9ZC5naG9zdFBhbmVsLGM9ZC5nZXRCb3goKSxlO2lmKCFiKXtiPW5ldyBFeHQucGFuZWwuUGFuZWwoe3JlbmRlclRvOmRvY3VtZW50LmJvZHksZmxvYXRpbmc6e3NoYWRvdzpmYWxzZX0sZnJhbWU6ZC5mcmFtZSYmIWQuYWx3YXlzRnJhbWVkLGFsd2F5c0ZyYW1lZDpkLmFsd2F5c0ZyYW1lZCxvdmVybGFwSGVhZGVyOmQub3ZlcmxhcEhlYWRlcixoZWFkZXJQb3NpdGlvbjpkLmhlYWRlclBvc2l0aW9uLGJhc2VDbHM6ZC5iYXNlQ2xzLGNsczpkLmJhc2VDbHMrIi1naG9zdCAiKyhhfHwiIil9KTtkLmdob3N0UGFuZWw9Yn1lbHNle2IuZWwuc2hvdygpfWIuZmxvYXRQYXJlbnQ9ZC5mbG9hdFBhcmVudDtpZihkLmZsb2F0aW5nKXtiLnNldFpJbmRleChFeHQuTnVtYmVyLmZyb20oZC5lbC5nZXRTdHlsZSgiekluZGV4IiksMCkpfWVsc2V7Yi50b0Zyb250KCl9aWYoIShkLnByZXZlbnRIZWFkZXJ8fChkLmhlYWRlcj09PWZhbHNlKSkpe2U9Yi5oZWFkZXI7aWYoZSl7ZS5zdXNwZW5kTGF5b3V0cygpO0V4dC5BcnJheS5mb3JFYWNoKGUucXVlcnkoInRvb2wiKSxlLnJlbW92ZSxlKTtlLnJlc3VtZUxheW91dHMoKX1iLmFkZFRvb2woZC5naG9zdFRvb2xzKCkpO2Iuc2V0VGl0bGUoZC50aXRsZSk7Yi5zZXRJY29uQ2xzKGQuaWNvbkNscyl9Yi5zZXRQYWdlUG9zaXRpb24oYy54LGMueSk7Yi5zZXRTaXplKGMud2lkdGgsYy5oZWlnaHQpO2QuZWwuaGlkZSgpO3JldHVybiBifSx1bmdob3N0OmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcztpZighYy5naG9zdFBhbmVsKXtyZXR1cm59aWYoYiE9PWZhbHNlKXtjLmVsLnNob3coKTtpZihhIT09ZmFsc2Upe2Muc2V0UGFnZVBvc2l0aW9uKGMuZ2hvc3RQYW5lbC5lbC5nZXRYWSgpKTtpZihjLmhpZGVNb2RlPT0ib2Zmc2V0cyIpe2RlbGV0ZSBjLmVsLmhpZGVNb2RlU3R5bGVzfX1FeHQuZGVmZXIoYy5mb2N1cywxMCxjKX1jLmdob3N0UGFuZWwuZWwuaGlkZSgpfSxiZWdpbkRyYWc6ZnVuY3Rpb24oKXtpZih0aGlzLmZsb2F0aW5nRGVzY2VuZGFudHMpe3RoaXMuZmxvYXRpbmdEZXNjZW5kYW50cy5oaWRlKCl9fSxlbmREcmFnOmZ1bmN0aW9uKCl7aWYodGhpcy5mbG9hdGluZ0Rlc2NlbmRhbnRzKXt0aGlzLmZsb2F0aW5nRGVzY2VuZGFudHMuc2hvdygpfX0saW5pdFJlc2l6YWJsZTpmdW5jdGlvbihhKXtpZih0aGlzLmNvbGxhcHNlZCl7YS5kaXNhYmxlZD10cnVlfXRoaXMuY2FsbFBhcmVudChbYV0pfX0sZnVuY3Rpb24oKXt0aGlzLnByb3RvdHlwZS5hbmltQ29sbGFwc2U9RXh0LmVuYWJsZUZ4fSk7RXh0LmRlZmluZSgiRXh0LnRpcC5UaXAiLHtleHRlbmQ6IkV4dC5wYW5lbC5QYW5lbCIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuVGlwIixtaW5XaWR0aDo0MCxtYXhXaWR0aDozMDAsc2hhZG93OiJzaWRlcyIsZGVmYXVsdEFsaWduOiJ0bC1ibD8iLGNvbnN0cmFpblBvc2l0aW9uOnRydWUsYXV0b1JlbmRlcjp0cnVlLGhpZGRlbjp0cnVlLGJhc2VDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInRpcCIsZmxvYXRpbmc6e3NoYWRvdzp0cnVlLHNoaW06dHJ1ZSxjb25zdHJhaW46dHJ1ZX0sZm9jdXNPblRvRnJvbnQ6ZmFsc2UsY2xvc2VBY3Rpb246ImhpZGUiLGFyaWFSb2xlOiJ0b29sdGlwIixhbHdheXNGcmFtZWQ6dHJ1ZSxmcmFtZUhlYWRlcjpmYWxzZSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmZsb2F0aW5nPUV4dC5hcHBseSh7fSx7c2hhZG93OmEuc2hhZG93fSxhLnNlbGYucHJvdG90eXBlLmZsb2F0aW5nKTthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLmNvbnN0cmFpbj1hLmNvbnN0cmFpbnx8YS5jb25zdHJhaW5Qb3NpdGlvbn0sc2hvd0F0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYS5pc1Zpc2libGUoKSl7YS5zZXRQYWdlUG9zaXRpb24oYlswXSxiWzFdKTtpZihhLmNvbnN0cmFpblBvc2l0aW9ufHxhLmNvbnN0cmFpbil7YS5kb0NvbnN0cmFpbigpfWEudG9Gcm9udCh0cnVlKX19LHNob3dCeTpmdW5jdGlvbihhLGIpe3RoaXMuc2hvd0F0KHRoaXMuZWwuZ2V0QWxpZ25Ub1hZKGEsYnx8dGhpcy5kZWZhdWx0QWxpZ24pKX0saW5pdERyYWdnYWJsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5kcmFnZ2FibGU9e2VsOmEuZ2V0RHJhZ0VsKCksZGVsZWdhdGU6YS5oZWFkZXIuZWwsY29uc3RyYWluOmEsY29uc3RyYWluVG86YS5lbC5nZXRTY29wZVBhcmVudCgpfTtFeHQuQ29tcG9uZW50LnByb3RvdHlwZS5pbml0RHJhZ2dhYmxlLmNhbGwoYSl9LGdob3N0OnVuZGVmaW5lZCx1bmdob3N0OnVuZGVmaW5lZH0pO0V4dC5kZWZpbmUoIkV4dC50aXAuVG9vbFRpcCIse2V4dGVuZDoiRXh0LnRpcC5UaXAiLGFsaWFzOiJ3aWRnZXQudG9vbHRpcCIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuVG9vbFRpcCIsYXV0b0hpZGU6dHJ1ZSxzaG93RGVsYXk6NTAwLGhpZGVEZWxheToyMDAsZGlzbWlzc0RlbGF5OjUwMDAsdHJhY2tNb3VzZTpmYWxzZSxhbmNob3JUb1RhcmdldDp0cnVlLGFuY2hvck9mZnNldDowLHRhcmdldENvdW50ZXI6MCxxdWlja1Nob3dJbnRlcnZhbDoyNTAsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YS5sYXN0QWN0aXZlPW5ldyBEYXRlKCk7YS5zZXRUYXJnZXQoYS50YXJnZXQpO2Eub3JpZ0FuY2hvcj1hLmFuY2hvcn0sb25SZW5kZXI6ZnVuY3Rpb24oYixhKXt2YXIgYz10aGlzO2MuY2FsbFBhcmVudChhcmd1bWVudHMpO2MuYW5jaG9yQ2xzPUV4dC5iYXNlQ1NTUHJlZml4KyJ0aXAtYW5jaG9yLSIrYy5nZXRBbmNob3JQb3NpdGlvbigpO2MuYW5jaG9yRWw9Yy5lbC5jcmVhdGVDaGlsZCh7Y2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ0aXAtYW5jaG9yICIrYy5hbmNob3JDbHN9KX0sc2V0VGFyZ2V0OmZ1bmN0aW9uKGQpe3ZhciBiPXRoaXMsYT1FeHQuZ2V0KGQpLGM7aWYoYi50YXJnZXQpe2M9RXh0LmdldChiLnRhcmdldCk7Yi5tdW4oYywibW91c2VvdmVyIixiLm9uVGFyZ2V0T3ZlcixiKTtiLm11bihjLCJtb3VzZW91dCIsYi5vblRhcmdldE91dCxiKTtiLm11bihjLCJtb3VzZW1vdmUiLGIub25Nb3VzZU1vdmUsYil9Yi50YXJnZXQ9YTtpZihhKXtiLm1vbihhLHtmcmVlemVFdmVudDp0cnVlLG1vdXNlb3ZlcjpiLm9uVGFyZ2V0T3Zlcixtb3VzZW91dDpiLm9uVGFyZ2V0T3V0LG1vdXNlbW92ZTpiLm9uTW91c2VNb3ZlLHNjb3BlOmJ9KX1pZihiLmFuY2hvcil7Yi5hbmNob3JUYXJnZXQ9Yi50YXJnZXR9fSxvbk1vdXNlTW92ZTpmdW5jdGlvbihkKXt2YXIgYj10aGlzLGE9Yi5kZWxlZ2F0ZT9kLmdldFRhcmdldChiLmRlbGVnYXRlKTpiLnRyaWdnZXJFbGVtZW50PXRydWUsYztpZihhKXtiLnRhcmdldFhZPWQuZ2V0WFkoKTtpZihhPT09Yi50cmlnZ2VyRWxlbWVudCl7aWYoIWIuaGlkZGVuJiZiLnRyYWNrTW91c2Upe2M9Yi5nZXRUYXJnZXRYWSgpO2lmKGIuY29uc3RyYWluUG9zaXRpb24pe2M9Yi5lbC5hZGp1c3RGb3JDb25zdHJhaW50cyhjLGIuZWwuZ2V0U2NvcGVQYXJlbnQoKSl9Yi5zZXRQYWdlUG9zaXRpb24oYyl9fWVsc2V7Yi5oaWRlKCk7Yi5sYXN0QWN0aXZlPW5ldyBEYXRlKDApO2Iub25UYXJnZXRPdmVyKGQpfX1lbHNle2lmKCghYi5jbG9zYWJsZSYmYi5pc1Zpc2libGUoKSkmJmIuYXV0b0hpZGUhPT1mYWxzZSl7Yi5oaWRlKCl9fX0sZ2V0VGFyZ2V0WFk6ZnVuY3Rpb24oKXt2YXIgaj10aGlzLGQsYyxuLGEsaSxsLGUsbSxrLGIsaCxnO2lmKGouZGVsZWdhdGUpe2ouYW5jaG9yVGFyZ2V0PWoudHJpZ2dlckVsZW1lbnR9aWYoai5hbmNob3Ipe2oudGFyZ2V0Q291bnRlcisrO2M9ai5nZXRPZmZzZXRzKCk7bj0oai5hbmNob3JUb1RhcmdldCYmIWoudHJhY2tNb3VzZSk/ai5lbC5nZXRBbGlnblRvWFkoai5hbmNob3JUYXJnZXQsai5nZXRBbmNob3JBbGlnbigpKTpqLnRhcmdldFhZO2E9RXh0LkVsZW1lbnQuZ2V0Vmlld1dpZHRoKCktNTtpPUV4dC5FbGVtZW50LmdldFZpZXdIZWlnaHQoKS01O2w9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2U9ZG9jdW1lbnQuYm9keTttPShsLnNjcm9sbExlZnR8fGUuc2Nyb2xsTGVmdHx8MCkrNTtrPShsLnNjcm9sbFRvcHx8ZS5zY3JvbGxUb3B8fDApKzU7Yj1bblswXStjWzBdLG5bMV0rY1sxXV07aD1qLmdldFNpemUoKTtnPWouY29uc3RyYWluUG9zaXRpb247ai5hbmNob3JFbC5yZW1vdmVDbHMoai5hbmNob3JDbHMpO2lmKGoudGFyZ2V0Q291bnRlcjwyJiZnKXtpZihiWzBdPG0pe2lmKGouYW5jaG9yVG9UYXJnZXQpe2ouZGVmYXVsdEFsaWduPSJsLXIiO2lmKGoubW91c2VPZmZzZXQpe2oubW91c2VPZmZzZXRbMF0qPS0xfX1qLmFuY2hvcj0ibGVmdCI7cmV0dXJuIGouZ2V0VGFyZ2V0WFkoKX1pZihiWzBdK2gud2lkdGg+YSl7aWYoai5hbmNob3JUb1RhcmdldCl7ai5kZWZhdWx0QWxpZ249InItbCI7aWYoai5tb3VzZU9mZnNldCl7ai5tb3VzZU9mZnNldFswXSo9LTF9fWouYW5jaG9yPSJyaWdodCI7cmV0dXJuIGouZ2V0VGFyZ2V0WFkoKX1pZihiWzFdPGspe2lmKGouYW5jaG9yVG9UYXJnZXQpe2ouZGVmYXVsdEFsaWduPSJ0LWIiO2lmKGoubW91c2VPZmZzZXQpe2oubW91c2VPZmZzZXRbMV0qPS0xfX1qLmFuY2hvcj0idG9wIjtyZXR1cm4gai5nZXRUYXJnZXRYWSgpfWlmKGJbMV0raC5oZWlnaHQ+aSl7aWYoai5hbmNob3JUb1RhcmdldCl7ai5kZWZhdWx0QWxpZ249ImItdCI7aWYoai5tb3VzZU9mZnNldCl7ai5tb3VzZU9mZnNldFsxXSo9LTF9fWouYW5jaG9yPSJib3R0b20iO3JldHVybiBqLmdldFRhcmdldFhZKCl9fWouYW5jaG9yQ2xzPUV4dC5iYXNlQ1NTUHJlZml4KyJ0aXAtYW5jaG9yLSIrai5nZXRBbmNob3JQb3NpdGlvbigpO2ouYW5jaG9yRWwuYWRkQ2xzKGouYW5jaG9yQ2xzKTtqLnRhcmdldENvdW50ZXI9MDtyZXR1cm4gYn1lbHNle2Q9ai5nZXRNb3VzZU9mZnNldCgpO3JldHVybihqLnRhcmdldFhZKT9bai50YXJnZXRYWVswXStkWzBdLGoudGFyZ2V0WFlbMV0rZFsxXV06ZH19LGdldE1vdXNlT2Zmc2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuYW5jaG9yP1swLDBdOlsxNSwxOF07aWYoYS5tb3VzZU9mZnNldCl7YlswXSs9YS5tb3VzZU9mZnNldFswXTtiWzFdKz1hLm1vdXNlT2Zmc2V0WzFdfXJldHVybiBifSxnZXRBbmNob3JQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYTtpZihiLmFuY2hvcil7Yi50aXBBbmNob3I9Yi5hbmNob3IuY2hhckF0KDApfWVsc2V7YT1iLmRlZmF1bHRBbGlnbi5tYXRjaCgvXihbYS16XSspLShbYS16XSspKFw/KT8kLyk7Yi50aXBBbmNob3I9YVsxXS5jaGFyQXQoMCl9c3dpdGNoKGIudGlwQW5jaG9yKXtjYXNlInQiOnJldHVybiJ0b3AiO2Nhc2UiYiI6cmV0dXJuImJvdHRvbSI7Y2FzZSJyIjpyZXR1cm4icmlnaHQifXJldHVybiJsZWZ0In0sZ2V0QW5jaG9yQWxpZ246ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5hbmNob3Ipe2Nhc2UidG9wIjpyZXR1cm4idGwtYmwiO2Nhc2UibGVmdCI6cmV0dXJuInRsLXRyIjtjYXNlInJpZ2h0IjpyZXR1cm4idHItdGwiO2RlZmF1bHQ6cmV0dXJuImJsLXRsIn19LGdldE9mZnNldHM6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGQsYixhPWMuZ2V0QW5jaG9yUG9zaXRpb24oKS5jaGFyQXQoMCk7aWYoYy5hbmNob3JUb1RhcmdldCYmIWMudHJhY2tNb3VzZSl7c3dpdGNoKGEpe2Nhc2UidCI6Yj1bMCw5XTticmVhaztjYXNlImIiOmI9WzAsLTEzXTticmVhaztjYXNlInIiOmI9Wy0xMywwXTticmVhaztkZWZhdWx0OmI9WzksMF07YnJlYWt9fWVsc2V7c3dpdGNoKGEpe2Nhc2UidCI6Yj1bLTE1LWMuYW5jaG9yT2Zmc2V0LDMwXTticmVhaztjYXNlImIiOmI9Wy0xOS1jLmFuY2hvck9mZnNldCwtMTMtYy5lbC5kb20ub2Zmc2V0SGVpZ2h0XTticmVhaztjYXNlInIiOmI9Wy0xNS1jLmVsLmRvbS5vZmZzZXRXaWR0aCwtMTMtYy5hbmNob3JPZmZzZXRdO2JyZWFrO2RlZmF1bHQ6Yj1bMjUsLTEzLWMuYW5jaG9yT2Zmc2V0XTticmVha319ZD1jLmdldE1vdXNlT2Zmc2V0KCk7YlswXSs9ZFswXTtiWzFdKz1kWzFdO3JldHVybiBifSxvblRhcmdldE92ZXI6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhO2lmKGIuZGlzYWJsZWR8fGMud2l0aGluKGIudGFyZ2V0LmRvbSx0cnVlKSl7cmV0dXJufWE9Yy5nZXRUYXJnZXQoYi5kZWxlZ2F0ZSk7aWYoYSl7Yi50cmlnZ2VyRWxlbWVudD1hO2IuY2xlYXJUaW1lcigiaGlkZSIpO2IudGFyZ2V0WFk9Yy5nZXRYWSgpO2IuZGVsYXlTaG93KCl9fSxkZWxheVNob3c6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuaGlkZGVuJiYhYS5zaG93VGltZXIpe2lmKEV4dC5EYXRlLmdldEVsYXBzZWQoYS5sYXN0QWN0aXZlKTxhLnF1aWNrU2hvd0ludGVydmFsKXthLnNob3coKX1lbHNle2Euc2hvd1RpbWVyPUV4dC5kZWZlcihhLnNob3csYS5zaG93RGVsYXksYSl9fWVsc2V7aWYoIWEuaGlkZGVuJiZhLmF1dG9IaWRlIT09ZmFsc2Upe2Euc2hvdygpfX19LG9uU2hvd1ZldG86ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt0aGlzLmNsZWFyVGltZXIoInNob3ciKX0sb25UYXJnZXRPdXQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZihhLmRpc2FibGVkfHxiLndpdGhpbihhLnRhcmdldC5kb20sdHJ1ZSkpe3JldHVybn1hLmNsZWFyVGltZXIoInNob3ciKTtpZihhLmF1dG9IaWRlIT09ZmFsc2Upe2EuZGVsYXlIaWRlKCl9fSxkZWxheUhpZGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKCFhLmhpZGRlbiYmIWEuaGlkZVRpbWVyKXthLmhpZGVUaW1lcj1FeHQuZGVmZXIoYS5oaWRlLGEuaGlkZURlbGF5LGEpfX0saGlkZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jbGVhclRpbWVyKCJkaXNtaXNzIik7YS5sYXN0QWN0aXZlPW5ldyBEYXRlKCk7aWYoYS5hbmNob3JFbCl7YS5hbmNob3JFbC5oaWRlKCl9YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7ZGVsZXRlIGEudHJpZ2dlckVsZW1lbnR9LHNob3c6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuY2FsbFBhcmVudCgpO2lmKHRoaXMuaGlkZGVuPT09ZmFsc2Upe2Euc2V0UGFnZVBvc2l0aW9uKC0xMDAwMCwtMTAwMDApO2lmKGEuYW5jaG9yKXthLmFuY2hvcj1hLm9yaWdBbmNob3J9aWYoIWEuY2FsbGVkRnJvbVNob3dBdCl7YS5zaG93QXQoYS5nZXRUYXJnZXRYWSgpKX1pZihhLmFuY2hvcil7YS5zeW5jQW5jaG9yKCk7YS5hbmNob3JFbC5zaG93KCl9ZWxzZXthLmFuY2hvckVsLmhpZGUoKX19fSxzaG93QXQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczthLmxhc3RBY3RpdmU9bmV3IERhdGUoKTthLmNsZWFyVGltZXJzKCk7YS5jYWxsZWRGcm9tU2hvd0F0PXRydWU7aWYoIWEuaXNWaXNpYmxlKCkpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfWlmKGEuaXNWaXNpYmxlKCkpe2Euc2V0UGFnZVBvc2l0aW9uKGJbMF0sYlsxXSk7aWYoYS5jb25zdHJhaW5Qb3NpdGlvbnx8YS5jb25zdHJhaW4pe2EuZG9Db25zdHJhaW4oKX1hLnRvRnJvbnQodHJ1ZSk7YS5lbC5zeW5jKHRydWUpO2lmKGEuZGlzbWlzc0RlbGF5JiZhLmF1dG9IaWRlIT09ZmFsc2Upe2EuZGlzbWlzc1RpbWVyPUV4dC5kZWZlcihhLmhpZGUsYS5kaXNtaXNzRGVsYXksYSl9aWYoYS5hbmNob3Ipe2Euc3luY0FuY2hvcigpO2lmKCFhLmFuY2hvckVsLmlzVmlzaWJsZSgpKXthLmFuY2hvckVsLnNob3coKX19ZWxzZXthLmFuY2hvckVsLmhpZGUoKX19ZGVsZXRlIGEuY2FsbGVkRnJvbVNob3dBdH0sc3luY0FuY2hvcjpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYSxiLGQ7c3dpdGNoKGMudGlwQW5jaG9yLmNoYXJBdCgwKSl7Y2FzZSJ0IjphPSJiIjtiPSJ0bCI7ZD1bMjArYy5hbmNob3JPZmZzZXQsMV07YnJlYWs7Y2FzZSJyIjphPSJsIjtiPSJ0ciI7ZD1bLTEsMTIrYy5hbmNob3JPZmZzZXRdO2JyZWFrO2Nhc2UiYiI6YT0idCI7Yj0iYmwiO2Q9WzIwK2MuYW5jaG9yT2Zmc2V0LC0xXTticmVhaztkZWZhdWx0OmE9InIiO2I9InRsIjtkPVsxLDEyK2MuYW5jaG9yT2Zmc2V0XTticmVha31jLmFuY2hvckVsLmFsaWduVG8oYy5lbCxhKyItIitiLGQpO2MuYW5jaG9yRWwuc2V0U3R5bGUoInotaW5kZXgiLHBhcnNlSW50KGMuZWwuZ2V0WkluZGV4KCksMTApfHwwKzEpLnNldFZpc2liaWxpdHlNb2RlKEV4dC5FbGVtZW50LkRJU1BMQVkpfSxzZXRQYWdlUG9zaXRpb246ZnVuY3Rpb24oYSxjKXt2YXIgYj10aGlzO2IuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGIuYW5jaG9yKXtiLnN5bmNBbmNob3IoKX19LGNsZWFyVGltZXI6ZnVuY3Rpb24oYSl7YT1hKyJUaW1lciI7Y2xlYXJUaW1lb3V0KHRoaXNbYV0pO2RlbGV0ZSB0aGlzW2FdfSxjbGVhclRpbWVyczpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jbGVhclRpbWVyKCJzaG93Iik7YS5jbGVhclRpbWVyKCJkaXNtaXNzIik7YS5jbGVhclRpbWVyKCJoaWRlIil9LG9uU2hvdzpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KCk7YS5tb24oRXh0LmdldERvYygpLCJtb3VzZWRvd24iLGEub25Eb2NNb3VzZURvd24sYSl9LG9uSGlkZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KCk7YS5tdW4oRXh0LmdldERvYygpLCJtb3VzZWRvd24iLGEub25Eb2NNb3VzZURvd24sYSl9LG9uRG9jTW91c2VEb3duOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoIWEuY2xvc2FibGUmJiFiLndpdGhpbihhLmVsLmRvbSkpe2EuZGlzYWJsZSgpO0V4dC5kZWZlcihhLmRvRW5hYmxlLDEwMCxhKX19LGRvRW5hYmxlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNEZXN0cm95ZWQpe3RoaXMuZW5hYmxlKCl9fSxvbkRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt0aGlzLmNsZWFyVGltZXJzKCk7dGhpcy5oaWRlKCl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2xlYXJUaW1lcnMoKTtFeHQuZGVzdHJveShhLmFuY2hvckVsKTtkZWxldGUgYS5hbmNob3JFbDtkZWxldGUgYS50YXJnZXQ7ZGVsZXRlIGEuYW5jaG9yVGFyZ2V0O2RlbGV0ZSBhLnRyaWdnZXJFbGVtZW50O2EuY2FsbFBhcmVudCgpfSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuZ2V0RG9jKCkudW4oIm1vdXNlZG93biIsdGhpcy5vbkRvY01vdXNlRG93bix0aGlzKTt0aGlzLmNhbGxQYXJlbnQoKX19KTtFeHQuZGVmaW5lKCJFeHQudGlwLlF1aWNrVGlwIix7ZXh0ZW5kOiJFeHQudGlwLlRvb2xUaXAiLGFsaWFzOiJ3aWRnZXQucXVpY2t0aXAiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LlF1aWNrVGlwIixpbnRlcmNlcHRUaXRsZXM6ZmFsc2UsdGl0bGU6IiYjMTYwOyIsdGFnQ29uZmlnOntuYW1lc3BhY2U6ImRhdGEtIixhdHRyaWJ1dGU6InF0aXAiLHdpZHRoOiJxd2lkdGgiLHRhcmdldDoidGFyZ2V0Iix0aXRsZToicXRpdGxlIixoaWRlOiJoaWRlIixjbHM6InFjbGFzcyIsYWxpZ246InFhbGlnbiIsYW5jaG9yOiJhbmNob3IifSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLnRhcmdldD1hLnRhcmdldHx8RXh0LmdldERvYygpO2EudGFyZ2V0cz1hLnRhcmdldHN8fHt9O2EuY2FsbFBhcmVudCgpfSxyZWdpc3RlcjpmdW5jdGlvbihjKXt2YXIgaD1FeHQuaXNBcnJheShjKT9jOmFyZ3VtZW50cyxkPTAsYT1oLmxlbmd0aCxnLGIsZTtmb3IoO2Q8YTtkKyspe2M9aFtkXTtnPWMudGFyZ2V0O2lmKGcpe2lmKEV4dC5pc0FycmF5KGcpKXtmb3IoYj0wLGU9Zy5sZW5ndGg7YjxlO2IrKyl7dGhpcy50YXJnZXRzW0V4dC5pZChnW2JdKV09Y319ZWxzZXt0aGlzLnRhcmdldHNbRXh0LmlkKGcpXT1jfX19fSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLnRhcmdldHNbRXh0LmlkKGEpXX0sY2FuY2VsU2hvdzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5hY3RpdmVUYXJnZXQ7YT1FeHQuZ2V0KGEpLmRvbTtpZihiLmlzVmlzaWJsZSgpKXtpZihjJiZjLmVsPT1hKXtiLmhpZGUoKX19ZWxzZXtpZihjJiZjLmVsPT1hKXtiLmNsZWFyVGltZXIoInNob3ciKX19fSxnZXRUaXBDZmc6ZnVuY3Rpb24oZCl7dmFyIGM9ZC5nZXRUYXJnZXQoKSxiPWMudGl0bGUsYTtpZih0aGlzLmludGVyY2VwdFRpdGxlcyYmYiYmRXh0LmlzU3RyaW5nKGIpKXtjLnF0aXA9YjtjLnJlbW92ZUF0dHJpYnV0ZSgidGl0bGUiKTtkLnByZXZlbnREZWZhdWx0KCk7cmV0dXJue3RleHQ6Yn19ZWxzZXthPXRoaXMudGFnQ29uZmlnO2M9ZC5nZXRUYXJnZXQoIlsiK2EubmFtZXNwYWNlK2EuYXR0cmlidXRlKyJdIik7aWYoYyl7cmV0dXJue3RhcmdldDpjLHRleHQ6Yy5nZXRBdHRyaWJ1dGUoYS5uYW1lc3BhY2UrYS5hdHRyaWJ1dGUpfX19fSxvblRhcmdldE92ZXI6ZnVuY3Rpb24oaSl7dmFyIGs9dGhpcyxqPWkuZ2V0VGFyZ2V0KGsuZGVsZWdhdGUpLGEsZCxiLGgsbCxjLG4sZyxwLG0sbztpZihrLmRpc2FibGVkKXtyZXR1cm59ay50YXJnZXRYWT1pLmdldFhZKCk7aWYoIWp8fGoubm9kZVR5cGUhPT0xfHxqPT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnR8fGo9PWRvY3VtZW50LmJvZHkpe3JldHVybn1pZihrLmFjdGl2ZVRhcmdldCYmKChqPT1rLmFjdGl2ZVRhcmdldC5lbCl8fEV4dC5mbHkoay5hY3RpdmVUYXJnZXQuZWwpLmNvbnRhaW5zKGopKSl7ay5jbGVhclRpbWVyKCJoaWRlIik7ay5zaG93KCk7cmV0dXJufWlmKGope2c9ay50YXJnZXRzO2ZvcihvIGluIGcpe2lmKGcuaGFzT3duUHJvcGVydHkobykpe209Z1tvXTtwPUV4dC5mbHkobS50YXJnZXQpO2lmKHAmJihwLmRvbT09PWp8fHAuY29udGFpbnMoaikpKXtiPXAuZG9tO2JyZWFrfX19aWYoYil7ay5hY3RpdmVUYXJnZXQ9ay50YXJnZXRzW2IuaWRdO2suYWN0aXZlVGFyZ2V0LmVsPWo7ay5hbmNob3I9ay5hY3RpdmVUYXJnZXQuYW5jaG9yO2lmKGsuYW5jaG9yKXtrLmFuY2hvclRhcmdldD1qfWE9RXh0LmlzRGVmaW5lZChrLmFjdGl2ZVRhcmdldC5zaG93RGVsYXkpO2lmKGEpe2Q9ay5zaG93RGVsYXk7ay5zaG93RGVsYXk9ay5hY3RpdmVUYXJnZXQuc2hvd0RlbGF5fWsuZGVsYXlTaG93KCk7aWYoYSl7ay5zaG93RGVsYXk9ZH1yZXR1cm59fWI9RXh0LmZseShqLCJfcXVpY2t0aXAtdGFyZ2V0Iik7aD1rLnRhZ0NvbmZpZztsPWgubmFtZXNwYWNlO2M9ay5nZXRUaXBDZmcoaSk7aWYoYyl7aWYoYy50YXJnZXQpe2o9Yy50YXJnZXQ7Yj1FeHQuZmx5KGosIl9xdWlja3RpcC10YXJnZXQiKX1uPWIuZ2V0QXR0cmlidXRlKGwraC5oaWRlKTtrLmFjdGl2ZVRhcmdldD17ZWw6aix0ZXh0OmMudGV4dCx3aWR0aDorYi5nZXRBdHRyaWJ1dGUobCtoLndpZHRoKXx8bnVsbCxhdXRvSGlkZTpuIT0idXNlciImJm4hPT0iZmFsc2UiLHRpdGxlOmIuZ2V0QXR0cmlidXRlKGwraC50aXRsZSksY2xzOmIuZ2V0QXR0cmlidXRlKGwraC5jbHMpLGFsaWduOmIuZ2V0QXR0cmlidXRlKGwraC5hbGlnbil9O2suYW5jaG9yPWIuZ2V0QXR0cmlidXRlKGwraC5hbmNob3IpO2lmKGsuYW5jaG9yKXtrLmFuY2hvclRhcmdldD1qfWE9RXh0LmlzRGVmaW5lZChrLmFjdGl2ZVRhcmdldC5zaG93RGVsYXkpO2lmKGEpe2Q9ay5zaG93RGVsYXk7ay5zaG93RGVsYXk9ay5hY3RpdmVUYXJnZXQuc2hvd0RlbGF5fWsuZGVsYXlTaG93KCk7aWYoYSl7ay5zaG93RGVsYXk9ZH19fSxvblRhcmdldE91dDpmdW5jdGlvbihnKXt2YXIgYz10aGlzLGQ9Yy5hY3RpdmVUYXJnZXQsYSxiO2lmKGQmJmcud2l0aGluKGMuYWN0aXZlVGFyZ2V0LmVsKSYmIWMuZ2V0VGlwQ2ZnKGcpKXtyZXR1cm59Yy5jbGVhclRpbWVyKCJzaG93Iik7ZGVsZXRlIGMuYWN0aXZlVGFyZ2V0O2lmKGMuYXV0b0hpZGUhPT1mYWxzZSl7YT1kJiZFeHQuaXNEZWZpbmVkKGQuaGlkZURlbGF5KTtpZihhKXtiPWMuaGlkZURlbGF5O2MuaGlkZURlbGF5PWQuaGlkZURlbGF5fWMuZGVsYXlIaWRlKCk7aWYoYSl7Yy5oaWRlRGVsYXk9Yn19fSxzaG93QXQ6ZnVuY3Rpb24oZCl7dmFyIGI9dGhpcyxjPWIuYWN0aXZlVGFyZ2V0LGE7aWYoYyl7aWYoIWIucmVuZGVyZWQpe2IucmVuZGVyKEV4dC5nZXRCb2R5KCkpO2IuYWN0aXZlVGFyZ2V0PWN9Yi5zdXNwZW5kTGF5b3V0cygpO2lmKGMudGl0bGUpe2Iuc2V0VGl0bGUoYy50aXRsZSk7Yi5oZWFkZXIuc2hvdygpfWVsc2V7Yi5oZWFkZXIuaGlkZSgpfWIudXBkYXRlKGMudGV4dCk7Yi5hdXRvSGlkZT1jLmF1dG9IaWRlO2IuZGlzbWlzc0RlbGF5PWMuZGlzbWlzc0RlbGF5fHxiLmRpc21pc3NEZWxheTtpZihjLm1vdXNlT2Zmc2V0KXtkWzBdKz1jLm1vdXNlT2Zmc2V0WzBdO2RbMV0rPWMubW91c2VPZmZzZXRbMV19YT1iLmxhc3RDbHM7aWYoYSl7Yi5yZW1vdmVDbHMoYSk7ZGVsZXRlIGIubGFzdENsc31hPWMuY2xzO2lmKGEpe2IuYWRkQ2xzKGEpO2IubGFzdENscz1hfWIuc2V0V2lkdGgoYy53aWR0aCk7aWYoYi5hbmNob3Ipe2IuY29uc3RyYWluUG9zaXRpb249ZmFsc2V9ZWxzZXtpZihjLmFsaWduKXtkPWIuZWwuZ2V0QWxpZ25Ub1hZKGMuZWwsYy5hbGlnbik7Yi5jb25zdHJhaW5Qb3NpdGlvbj1mYWxzZX1lbHNle2IuY29uc3RyYWluUG9zaXRpb249dHJ1ZX19Yi5yZXN1bWVMYXlvdXRzKHRydWUpfWIuY2FsbFBhcmVudChbZF0pfSxoaWRlOmZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuYWN0aXZlVGFyZ2V0O3RoaXMuY2FsbFBhcmVudCgpfX0pO0V4dC5kZWZpbmUoIkV4dC50aXAuUXVpY2tUaXBNYW5hZ2VyIiwoZnVuY3Rpb24oKXt2YXIgYixhPWZhbHNlO3JldHVybntyZXF1aXJlczpbIkV4dC50aXAuUXVpY2tUaXAiXSxzaW5nbGV0b246dHJ1ZSxhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5RdWlja1RpcHMiLGluaXQ6ZnVuY3Rpb24oZyxkKXtpZighYil7aWYoIUV4dC5pc1JlYWR5KXtFeHQub25SZWFkeShmdW5jdGlvbigpe0V4dC50aXAuUXVpY2tUaXBNYW5hZ2VyLmluaXQoZyxkKX0pO3JldHVybn12YXIgYz1FeHQuYXBwbHkoe2Rpc2FibGVkOmEsaWQ6ImV4dC1xdWlja3RpcHMtdGlwIn0sZCksZT1jLmNsYXNzTmFtZSxoPWMueHR5cGU7aWYoZSl7ZGVsZXRlIGMuY2xhc3NOYW1lfWVsc2V7aWYoaCl7ZT0id2lkZ2V0LiIraDtkZWxldGUgYy54dHlwZX19aWYoZyE9PWZhbHNlKXtjLnJlbmRlclRvPWRvY3VtZW50LmJvZHl9Yj1FeHQuY3JlYXRlKGV8fCJFeHQudGlwLlF1aWNrVGlwIixjKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZihiKXt2YXIgYztiLmRlc3Ryb3koKTtiPWN9fSxkZERpc2FibGU6ZnVuY3Rpb24oKXtpZihiJiYhYSl7Yi5kaXNhYmxlKCl9fSxkZEVuYWJsZTpmdW5jdGlvbigpe2lmKGImJiFhKXtiLmVuYWJsZSgpfX0sZW5hYmxlOmZ1bmN0aW9uKCl7aWYoYil7Yi5lbmFibGUoKX1hPWZhbHNlfSxkaXNhYmxlOmZ1bmN0aW9uKCl7aWYoYil7Yi5kaXNhYmxlKCl9YT10cnVlfSxpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gYiE9PXVuZGVmaW5lZCYmIWIuZGlzYWJsZWR9LGdldFF1aWNrVGlwOmZ1bmN0aW9uKCl7cmV0dXJuIGJ9LHJlZ2lzdGVyOmZ1bmN0aW9uKCl7Yi5yZWdpc3Rlci5hcHBseShiLGFyZ3VtZW50cyl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oKXtiLnVucmVnaXN0ZXIuYXBwbHkoYixhcmd1bWVudHMpfSx0aXBzOmZ1bmN0aW9uKCl7Yi5yZWdpc3Rlci5hcHBseShiLGFyZ3VtZW50cyl9fX0oKSkpO0V4dC5kZWZpbmUoIkV4dC5hcHAuRXZlbnRCdXMiLHtyZXF1aXJlczpbIkV4dC51dGlsLkV2ZW50IiwiRXh0LkNvbXBvbmVudCJdLG1peGluczp7b2JzZXJ2YWJsZToiRXh0LnV0aWwuT2JzZXJ2YWJsZSJ9LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dGhpcy5taXhpbnMub2JzZXJ2YWJsZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO3RoaXMuYnVzPXt9O3ZhciBhPXRoaXM7RXh0Lm92ZXJyaWRlKEV4dC5Db21wb25lbnQse2ZpcmVFdmVudDpmdW5jdGlvbihiKXtpZihFeHQudXRpbC5PYnNlcnZhYmxlLnByb3RvdHlwZS5maXJlRXZlbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpIT09ZmFsc2Upe3JldHVybiBhLmRpc3BhdGNoLmNhbGwoYSxiLHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gZmFsc2V9fSl9LGRpc3BhdGNoOmZ1bmN0aW9uKGwsZyxrKXt2YXIgaD10aGlzLmJ1cyxtPWhbbF0sZCxjLGIsbixhLGUsajtpZihtKXtmb3IoZCBpbiBtKXtpZihtLmhhc093blByb3BlcnR5KGQpJiZnLmlzKGQpKXtjPW1bZF07Zm9yKGIgaW4gYyl7aWYoYy5oYXNPd25Qcm9wZXJ0eShiKSl7bj1jW2JdO2ZvcihlPTAsaj1uLmxlbmd0aDtlPGo7ZSsrKXthPW5bZV07aWYoYS5maXJlLmFwcGx5KGEsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoaywxKSk9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfX19fX19fXJldHVybiB0cnVlfSxjb250cm9sOmZ1bmN0aW9uKGwsaixlKXt2YXIgaD10aGlzLmJ1cyxpLG8sZyxkLG4sYyxtLGEsYixrO2lmKEV4dC5pc1N0cmluZyhsKSl7ZD1sO2w9e307bFtkXT1qO3RoaXMuY29udHJvbChsLG51bGwsZSk7cmV0dXJufWk9RXh0LnV0aWwuT2JzZXJ2YWJsZS5IYXNMaXN0ZW5lcnMucHJvdG90eXBlO2ZvcihkIGluIGwpe2lmKGwuaGFzT3duUHJvcGVydHkoZCkpe2I9bFtkXXx8e307Zm9yKGsgaW4gYil7aWYoYi5oYXNPd25Qcm9wZXJ0eShrKSl7bj17fTtjPWJba107bT1lO2E9bmV3IEV4dC51dGlsLkV2ZW50KGUsayk7aWYoRXh0LmlzT2JqZWN0KGMpKXtuPWM7Yz1uLmZuO209bi5zY29wZXx8ZTtkZWxldGUgbi5mbjtkZWxldGUgbi5zY29wZX1hLmFkZExpc3RlbmVyKGMsbSxuKTtpW2tdPTE7bz1oW2tdfHwoaFtrXT17fSk7bz1vW2RdfHwob1tkXT17fSk7Zz1vW2UuaWRdfHwob1tlLmlkXT1bXSk7Zy5wdXNoKGEpfX19fX19KTtFeHQuZGVmaW5lKCJFeHQuYXBwLkFwcGxpY2F0aW9uIix7ZXh0ZW5kOiJFeHQuYXBwLkNvbnRyb2xsZXIiLHJlcXVpcmVzOlsiRXh0Lk1vZGVsTWFuYWdlciIsIkV4dC5kYXRhLk1vZGVsIiwiRXh0LmRhdGEuU3RvcmVNYW5hZ2VyIiwiRXh0LnRpcC5RdWlja1RpcE1hbmFnZXIiLCJFeHQuQ29tcG9uZW50TWFuYWdlciIsIkV4dC5hcHAuRXZlbnRCdXMiXSxzY29wZTp1bmRlZmluZWQsZW5hYmxlUXVpY2tUaXBzOnRydWUsYXBwRm9sZGVyOiJhcHAiLGF1dG9DcmVhdGVWaWV3cG9ydDpmYWxzZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihiKXtiPWJ8fHt9O0V4dC5hcHBseSh0aGlzLGIpO3ZhciBnPXRoaXMsbD1iLnJlcXVpcmVzfHxbXSxhLGUsYyxkLGssaixoO0V4dC5Mb2FkZXIuc2V0UGF0aChnLm5hbWUsZy5hcHBGb2xkZXIpO2lmKGcucGF0aHMpe2s9Zy5wYXRocztmb3IoaCBpbiBrKXtpZihrLmhhc093blByb3BlcnR5KGgpKXtqPWtbaF07RXh0LkxvYWRlci5zZXRQYXRoKGgsail9fX1nLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtnLmV2ZW50YnVzPW5ldyBFeHQuYXBwLkV2ZW50QnVzO2E9RXh0LkFycmF5LmZyb20oZy5jb250cm9sbGVycyk7ZT1hJiZhLmxlbmd0aDtnLmNvbnRyb2xsZXJzPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oKTtpZihnLmF1dG9DcmVhdGVWaWV3cG9ydCl7bC5wdXNoKGcuZ2V0TW9kdWxlQ2xhc3NOYW1lKCJWaWV3cG9ydCIsInZpZXciKSl9Zm9yKGM9MDtjPGU7YysrKXtsLnB1c2goZy5nZXRNb2R1bGVDbGFzc05hbWUoYVtjXSwiY29udHJvbGxlciIpKX1FeHQucmVxdWlyZShsKTtFeHQub25SZWFkeShmdW5jdGlvbigpe2cuaW5pdChnKTtmb3IoYz0wO2M8ZTtjKyspe2Q9Zy5nZXRDb250cm9sbGVyKGFbY10pO2QuaW5pdChnKX1nLm9uQmVmb3JlTGF1bmNoLmNhbGwoZyl9LGcpfSxjb250cm9sOmZ1bmN0aW9uKGIsYyxhKXt0aGlzLmV2ZW50YnVzLmNvbnRyb2woYixjLGEpfSxsYXVuY2g6RXh0LmVtcHR5Rm4sb25CZWZvcmVMYXVuY2g6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGUsZyxkLGE7aWYoYi5lbmFibGVRdWlja1RpcHMpe0V4dC50aXAuUXVpY2tUaXBNYW5hZ2VyLmluaXQoKX1pZihiLmF1dG9DcmVhdGVWaWV3cG9ydCl7Yi5nZXRWaWV3KCJWaWV3cG9ydCIpLmNyZWF0ZSgpfWIubGF1bmNoLmNhbGwodGhpcy5zY29wZXx8dGhpcyk7Yi5sYXVuY2hlZD10cnVlO2IuZmlyZUV2ZW50KCJsYXVuY2giLHRoaXMpO2U9Yi5jb250cm9sbGVycy5pdGVtcztkPWUubGVuZ3RoO2ZvcihnPTA7ZzxkO2crKyl7YT1lW2ddO2Eub25MYXVuY2godGhpcyl9fSxnZXRNb2R1bGVDbGFzc05hbWU6ZnVuY3Rpb24oYSxiKXtpZihhLmluZGV4T2YoIi4iKSE9PS0xJiYoRXh0LkNsYXNzTWFuYWdlci5pc0NyZWF0ZWQoYSl8fEV4dC5Mb2FkZXIuaXNBQ2xhc3NOYW1lV2l0aEFLbm93blByZWZpeChhKSkpe3JldHVybiBhfWVsc2V7cmV0dXJuIHRoaXMubmFtZSsiLiIrYisiLiIrYX19LGdldENvbnRyb2xsZXI6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5jb250cm9sbGVycy5nZXQoYik7aWYoIWEpe2E9RXh0LmNyZWF0ZSh0aGlzLmdldE1vZHVsZUNsYXNzTmFtZShiLCJjb250cm9sbGVyIikse2FwcGxpY2F0aW9uOnRoaXMsaWQ6Yn0pO3RoaXMuY29udHJvbGxlcnMuYWRkKGEpfXJldHVybiBhfSxnZXRTdG9yZTpmdW5jdGlvbihiKXt2YXIgYT1FeHQuU3RvcmVNYW5hZ2VyLmdldChiKTtpZighYSl7YT1FeHQuY3JlYXRlKHRoaXMuZ2V0TW9kdWxlQ2xhc3NOYW1lKGIsInN0b3JlIikse3N0b3JlSWQ6Yn0pfXJldHVybiBhfSxnZXRNb2RlbDpmdW5jdGlvbihhKXthPXRoaXMuZ2V0TW9kdWxlQ2xhc3NOYW1lKGEsIm1vZGVsIik7cmV0dXJuIEV4dC5Nb2RlbE1hbmFnZXIuZ2V0TW9kZWwoYSl9LGdldFZpZXc6ZnVuY3Rpb24oYSl7YT10aGlzLmdldE1vZHVsZUNsYXNzTmFtZShhLCJ2aWV3Iik7cmV0dXJuIEV4dC5DbGFzc01hbmFnZXIuZ2V0KGEpfX0pO0V4dC5kZWZpbmUoIkV4dC5idXR0b24uU3BsaXQiLHthbGlhczoid2lkZ2V0LnNwbGl0YnV0dG9uIixleHRlbmQ6IkV4dC5idXR0b24uQnV0dG9uIixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5TcGxpdEJ1dHRvbiIsYXJyb3dDbHM6InNwbGl0IixzcGxpdDp0cnVlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt0aGlzLmFkZEV2ZW50cygiYXJyb3djbGljayIpfSxzZXRBcnJvd0hhbmRsZXI6ZnVuY3Rpb24oYixhKXt0aGlzLmFycm93SGFuZGxlcj1iO3RoaXMuc2NvcGU9YX0sb25DbGljazpmdW5jdGlvbihjLGEpe3ZhciBiPXRoaXM7Yy5wcmV2ZW50RGVmYXVsdCgpO2lmKCFiLmRpc2FibGVkKXtpZihiLm92ZXJNZW51VHJpZ2dlcil7Yi5tYXliZVNob3dNZW51KCk7Yi5maXJlRXZlbnQoImFycm93Y2xpY2siLGIsYyk7aWYoYi5hcnJvd0hhbmRsZXIpe2IuYXJyb3dIYW5kbGVyLmNhbGwoYi5zY29wZXx8YixiLGMpfX1lbHNle2IuZG9Ub2dnbGUoKTtiLmZpcmVIYW5kbGVyKGMpfX19fSk7RXh0LmRlZmluZSgiRXh0LmJ1dHRvbi5DeWNsZSIse2FsaWFzOiJ3aWRnZXQuY3ljbGUiLGV4dGVuZDoiRXh0LmJ1dHRvbi5TcGxpdCIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuQ3ljbGVCdXR0b24iLGdldEJ1dHRvblRleHQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcyxjPSIiO2lmKGImJmEuc2hvd1RleHQ9PT10cnVlKXtpZihhLnByZXBlbmRUZXh0KXtjKz1hLnByZXBlbmRUZXh0fWMrPWIudGV4dDtyZXR1cm4gY31yZXR1cm4gYS50ZXh0fSxzZXRBY3RpdmVJdGVtOmZ1bmN0aW9uKGMsYSl7dmFyIGI9dGhpcztpZighRXh0LmlzT2JqZWN0KGMpKXtjPWIubWVudS5nZXRDb21wb25lbnQoYyl9aWYoYyl7aWYoIWIucmVuZGVyZWQpe2IudGV4dD1iLmdldEJ1dHRvblRleHQoYyk7Yi5pY29uQ2xzPWMuaWNvbkNsc31lbHNle2Iuc2V0VGV4dChiLmdldEJ1dHRvblRleHQoYykpO2Iuc2V0SWNvbkNscyhjLmljb25DbHMpfWIuYWN0aXZlSXRlbT1jO2lmKCFjLmNoZWNrZWQpe2Muc2V0Q2hlY2tlZCh0cnVlLGZhbHNlKX1pZihiLmZvcmNlSWNvbil7Yi5zZXRJY29uQ2xzKGIuZm9yY2VJY29uKX1pZighYSl7Yi5maXJlRXZlbnQoImNoYW5nZSIsYixjKX19fSxnZXRBY3RpdmVJdGVtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlSXRlbX0saW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBnPXRoaXMsZT0wLGIsYyxhLGQ7Zy5hZGRFdmVudHMoImNoYW5nZSIpO2lmKGcuY2hhbmdlSGFuZGxlcil7Zy5vbigiY2hhbmdlIixnLmNoYW5nZUhhbmRsZXIsZy5zY29wZXx8Zyk7ZGVsZXRlIGcuY2hhbmdlSGFuZGxlcn1iPShnLm1lbnUuaXRlbXN8fFtdKS5jb25jYXQoZy5pdGVtc3x8W10pO2cubWVudT1FeHQuYXBwbHlJZih7Y2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJjeWNsZS1tZW51IixpdGVtczpbXX0sZy5tZW51KTthPWIubGVuZ3RoO2ZvcihjPTA7YzxhO2MrKyl7ZD1iW2NdO2Q9RXh0LmFwcGx5SWYoe2dyb3VwOmcuaWQsaXRlbUluZGV4OmMsY2hlY2tIYW5kbGVyOmcuY2hlY2tIYW5kbGVyLHNjb3BlOmcsY2hlY2tlZDpkLmNoZWNrZWR8fGZhbHNlfSxkKTtnLm1lbnUuaXRlbXMucHVzaChkKTtpZihkLmNoZWNrZWQpe2U9Y319Zy5pdGVtQ291bnQ9Zy5tZW51Lml0ZW1zLmxlbmd0aDtnLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtnLm9uKCJjbGljayIsZy50b2dnbGVTZWxlY3RlZCxnKTtnLnNldEFjdGl2ZUl0ZW0oZSxnKTtpZihnLndpZHRoJiZnLnNob3dUZXh0KXtnLmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsiY3ljbGUtZml4ZWQtd2lkdGgiKX19LGNoZWNrSGFuZGxlcjpmdW5jdGlvbihhLGIpe2lmKGIpe3RoaXMuc2V0QWN0aXZlSXRlbShhKX19LHRvZ2dsZVNlbGVjdGVkOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxhPWMubWVudSxiO2I9Yy5hY3RpdmVJdGVtLm5leHQoIjpub3QoW2Rpc2FibGVkXSkiKXx8YS5pdGVtcy5nZXRBdCgwKTtiLnNldENoZWNrZWQodHJ1ZSl9fSk7RXh0LmRlZmluZSgiRXh0LmNoYXJ0LkNhbGxvdXQiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXtpZihhLmNhbGxvdXRzKXthLmNhbGxvdXRzLnN0eWxlcz1FeHQuYXBwbHlJZihhLmNhbGxvdXRzLnN0eWxlc3x8e30se2NvbG9yOiIjMDAwIixmb250OiIxMXB4IEhlbHZldGljYSwgc2Fucy1zZXJpZiJ9KTt0aGlzLmNhbGxvdXRzPUV4dC5hcHBseSh0aGlzLmNhbGxvdXRzfHx7fSxhLmNhbGxvdXRzKTt0aGlzLmNhbGxvdXRzQXJyYXk9W119fSxyZW5kZXJDYWxsb3V0czpmdW5jdGlvbigpe2lmKCF0aGlzLmNhbGxvdXRzKXtyZXR1cm59dmFyIHY9dGhpcyxtPXYuaXRlbXMsYT12LmNoYXJ0LmFuaW1hdGUsdT12LmNhbGxvdXRzLGg9dS5zdHlsZXMsZT12LmNhbGxvdXRzQXJyYXksYj12LmNoYXJ0LnN0b3JlLHM9Yi5nZXRDb3VudCgpLGQ9bS5sZW5ndGgvcyxsPVtdLHIsYyxxLG4sdCxnLGssbztmb3Iocj0wLGM9MDtyPHM7cisrKXtmb3IocT0wO3E8ZDtxKyspe3Q9bVtjXTtnPWVbY107az1iLmdldEF0KHIpO289dS5maWx0ZXIoayk7aWYoIW8mJiFnKXtjKys7Y29udGludWV9aWYoIWcpe2VbY109Zz12Lm9uQ3JlYXRlQ2FsbG91dChrLHQscixvLHEsYyl9Zm9yKG4gaW4gZyl7aWYoZ1tuXSYmZ1tuXS5zZXRBdHRyaWJ1dGVzKXtnW25dLnNldEF0dHJpYnV0ZXMoaCx0cnVlKX19aWYoIW8pe2ZvcihuIGluIGcpe2lmKGdbbl0pe2lmKGdbbl0uc2V0QXR0cmlidXRlcyl7Z1tuXS5zZXRBdHRyaWJ1dGVzKHtoaWRkZW46dHJ1ZX0sdHJ1ZSl9ZWxzZXtpZihnW25dLnNldFZpc2libGUpe2dbbl0uc2V0VmlzaWJsZShmYWxzZSl9fX19fXUucmVuZGVyZXIoZyxrKTt2Lm9uUGxhY2VDYWxsb3V0KGcsayx0LHIsbyxhLHEsYyxsKTtsLnB1c2goZyk7YysrfX10aGlzLmhpZGVDYWxsb3V0cyhjKX0sb25DcmVhdGVDYWxsb3V0OmZ1bmN0aW9uKGcsbixlLGope3ZhciBrPXRoaXMsbD1rLmNhbGxvdXRzR3JvdXAsZD1rLmNhbGxvdXRzLG89ZC5zdHlsZXMsYz1vLndpZHRoLG09by5oZWlnaHQsaD1rLmNoYXJ0LGI9aC5zdXJmYWNlLGE9e2xpbmVzOmZhbHNlfTthLmxpbmVzPWIuYWRkKEV4dC5hcHBseSh7fSx7dHlwZToicGF0aCIscGF0aDoiTTAsMCIsc3Ryb2tlOmsuZ2V0TGVnZW5kQ29sb3IoKXx8IiM1NTUifSxvKSk7aWYoZC5pdGVtcyl7YS5wYW5lbD1uZXcgRXh0LlBhbmVsKHtzdHlsZToicG9zaXRpb246IGFic29sdXRlOyIsd2lkdGg6YyxoZWlnaHQ6bSxpdGVtczpkLml0ZW1zLHJlbmRlclRvOmguZWx9KX1yZXR1cm4gYX0saGlkZUNhbGxvdXRzOmZ1bmN0aW9uKGIpe3ZhciBkPXRoaXMuY2FsbG91dHNBcnJheSxhPWQubGVuZ3RoLGUsYzt3aGlsZShhLS0+Yil7ZT1kW2FdO2ZvcihjIGluIGUpe2lmKGVbY10pe2VbY10uaGlkZSh0cnVlKX19fX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbXBvbmVudC5EcmF3Iix7YWxpYXM6ImxheW91dC5kcmF3IixleHRlbmQ6IkV4dC5sYXlvdXQuY29tcG9uZW50LkF1dG8iLHR5cGU6ImRyYXciLG1lYXN1cmVDb250ZW50V2lkdGg6ZnVuY3Rpb24oYil7dmFyIGM9Yi50YXJnZXQsYT1iLmdldFBhZGRpbmdJbmZvKCksZD10aGlzLmdldEJCb3goYik7aWYoIWMudmlld0JveCl7aWYoYy5hdXRvU2l6ZSl7cmV0dXJuIGQud2lkdGgrYS53aWR0aH1lbHNle3JldHVybiBkLngrZC53aWR0aCthLndpZHRofX1lbHNle2lmKGIuaGVpZ2h0TW9kZWwuc2hyaW5rV3JhcCl7cmV0dXJuIGEud2lkdGh9ZWxzZXtyZXR1cm4gZC53aWR0aC9kLmhlaWdodCooYi5nZXRQcm9wKCJjb250ZW50SGVpZ2h0IiktYS5oZWlnaHQpK2Eud2lkdGh9fX0sbWVhc3VyZUNvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oYil7dmFyIGM9Yi50YXJnZXQsYT1iLmdldFBhZGRpbmdJbmZvKCksZD10aGlzLmdldEJCb3goYik7aWYoIWIudGFyZ2V0LnZpZXdCb3gpe2lmKGMuYXV0b1NpemUpe3JldHVybiBkLmhlaWdodCthLmhlaWdodH1lbHNle3JldHVybiBkLnkrZC5oZWlnaHQrYS5oZWlnaHR9fWVsc2V7aWYoYi53aWR0aE1vZGVsLnNocmlua1dyYXApe3JldHVybiBhLmhlaWdodH1lbHNle3JldHVybiBkLmhlaWdodC9kLndpZHRoKihiLmdldFByb3AoImNvbnRlbnRXaWR0aCIpLWEud2lkdGgpK2EuaGVpZ2h0fX19LGdldEJCb3g6ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdXJmYWNlQkJveDtpZighYil7Yj1hLnRhcmdldC5zdXJmYWNlLml0ZW1zLmdldEJCb3goKTtpZihiLndpZHRoPT09LUluZmluaXR5JiZiLmhlaWdodD09PS1JbmZpbml0eSl7Yi53aWR0aD1iLmhlaWdodD1iLng9Yi55PTB9YS5zdXJmYWNlQkJveD1ifXJldHVybiBifSxwdWJsaXNoSW5uZXJXaWR0aDpmdW5jdGlvbihiLGEpe2Iuc2V0Q29udGVudFdpZHRoKGEtYi5nZXRGcmFtZUluZm8oKS53aWR0aCx0cnVlKX0scHVibGlzaElubmVySGVpZ2h0OmZ1bmN0aW9uKGIsYSl7Yi5zZXRDb250ZW50SGVpZ2h0KGEtYi5nZXRGcmFtZUluZm8oKS5oZWlnaHQsdHJ1ZSl9LGZpbmlzaGVkTGF5b3V0OmZ1bmN0aW9uKGMpe3ZhciBiPWMucHJvcHMsYT1jLmdldFBhZGRpbmdJbmZvKCk7dGhpcy5vd25lci5zZXRTdXJmYWNlU2l6ZShiLmNvbnRlbnRXaWR0aC1hLndpZHRoLGIuY29udGVudEhlaWdodC1hLmhlaWdodCk7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9fSk7RXh0LmRlZmluZSgiRXh0LmRyYXcuQ29tcG9zaXRlU3ByaXRlIix7ZXh0ZW5kOiJFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24iLG1peGluczp7YW5pbWF0ZToiRXh0LnV0aWwuQW5pbWF0ZSJ9LGF1dG9EZXN0cm95OmZhbHNlLGlzQ29tcG9zaXRlU3ByaXRlOnRydWUsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczthPWF8fHt9O0V4dC5hcHBseShiLGEpO2IuYWRkRXZlbnRzKCJtb3VzZWRvd24iLCJtb3VzZXVwIiwibW91c2VvdmVyIiwibW91c2VvdXQiLCJjbGljayIpO2IuaWQ9RXh0LmlkKG51bGwsImV4dC1zcHJpdGUtZ3JvdXAtIik7Yi5jYWxsUGFyZW50KCl9LG9uQ2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoImNsaWNrIixhKX0sb25Nb3VzZVVwOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJtb3VzZXVwIixhKX0sb25Nb3VzZURvd246ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoIm1vdXNlZG93biIsYSl9LG9uTW91c2VPdmVyOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJtb3VzZW92ZXIiLGEpfSxvbk1vdXNlT3V0OmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJtb3VzZW91dCIsYSl9LGF0dGFjaEV2ZW50czpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2Iub24oe3Njb3BlOmEsbW91c2Vkb3duOmEub25Nb3VzZURvd24sbW91c2V1cDphLm9uTW91c2VVcCxtb3VzZW92ZXI6YS5vbk1vdXNlT3Zlcixtb3VzZW91dDphLm9uTW91c2VPdXQsY2xpY2s6YS5vbkNsaWNrfSl9LGFkZDpmdW5jdGlvbihiLGMpe3ZhciBhPXRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3RoaXMuYXR0YWNoRXZlbnRzKGEpO3JldHVybiBhfSxpbnNlcnQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0scmVtb3ZlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7Yi51bih7c2NvcGU6YSxtb3VzZWRvd246YS5vbk1vdXNlRG93bixtb3VzZXVwOmEub25Nb3VzZVVwLG1vdXNlb3ZlcjphLm9uTW91c2VPdmVyLG1vdXNlb3V0OmEub25Nb3VzZU91dCxjbGljazphLm9uQ2xpY2t9KTtyZXR1cm4gYS5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGdldEJCb3g6ZnVuY3Rpb24oKXt2YXIgZT0wLG4saixrPXRoaXMuaXRlbXMsZz10aGlzLmxlbmd0aCxoPUluZmluaXR5LGM9aCxtPS1oLGI9aCxsPS1oLGQsYTtmb3IoO2U8ZztlKyspe249a1tlXTtpZihuLmVsJiYhbi5iYm94RXhjbHVkZWQpe2o9bi5nZXRCQm94KCk7Yz1NYXRoLm1pbihjLGoueCk7Yj1NYXRoLm1pbihiLGoueSk7bT1NYXRoLm1heChtLGouaGVpZ2h0K2oueSk7bD1NYXRoLm1heChsLGoud2lkdGgrai54KX19cmV0dXJue3g6Yyx5OmIsaGVpZ2h0Om0tYix3aWR0aDpsLWN9fSxzZXRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGMsZSl7dmFyIGQ9MCxiPXRoaXMuaXRlbXMsYT10aGlzLmxlbmd0aDtmb3IoO2Q8YTtkKyspe2JbZF0uc2V0QXR0cmlidXRlcyhjLGUpfXJldHVybiB0aGlzfSxoaWRlOmZ1bmN0aW9uKGQpe3ZhciBjPTAsYj10aGlzLml0ZW1zLGE9dGhpcy5sZW5ndGg7Zm9yKDtjPGE7YysrKXtiW2NdLmhpZGUoZCl9cmV0dXJuIHRoaXN9LHNob3c6ZnVuY3Rpb24oZCl7dmFyIGM9MCxiPXRoaXMuaXRlbXMsYT10aGlzLmxlbmd0aDtmb3IoO2M8YTtjKyspe2JbY10uc2hvdyhkKX1yZXR1cm4gdGhpc30scmVkcmF3OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxkPTAsYz1lLml0ZW1zLGI9ZS5nZXRTdXJmYWNlKCksYT1lLmxlbmd0aDtpZihiKXtmb3IoO2Q8YTtkKyspe2IucmVuZGVySXRlbShjW2RdKX19cmV0dXJuIGV9LHNldFN0eWxlOmZ1bmN0aW9uKGcpe3ZhciBjPTAsYj10aGlzLml0ZW1zLGE9dGhpcy5sZW5ndGgsZSxkO2Zvcig7YzxhO2MrKyl7ZT1iW2NdO2Q9ZS5lbDtpZihkKXtkLnNldFN0eWxlKGcpfX19LGFkZENsczpmdW5jdGlvbihlKXt2YXIgZD0wLGM9dGhpcy5pdGVtcyxiPXRoaXMuZ2V0U3VyZmFjZSgpLGE9dGhpcy5sZW5ndGg7aWYoYil7Zm9yKDtkPGE7ZCsrKXtiLmFkZENscyhjW2RdLGUpfX19LHJlbW92ZUNsczpmdW5jdGlvbihlKXt2YXIgZD0wLGM9dGhpcy5pdGVtcyxiPXRoaXMuZ2V0U3VyZmFjZSgpLGE9dGhpcy5sZW5ndGg7aWYoYil7Zm9yKDtkPGE7ZCsrKXtiLnJlbW92ZUNscyhjW2RdLGUpfX19LGdldFN1cmZhY2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmZpcnN0KCk7aWYoYSl7cmV0dXJuIGEuc3VyZmFjZX1yZXR1cm4gbnVsbH0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBkPXRoaXMsYT1kLmdldFN1cmZhY2UoKSxjPWQuYXV0b0Rlc3Ryb3ksYjtpZihhKXt3aGlsZShkLmdldENvdW50KCk+MCl7Yj1kLmZpcnN0KCk7ZC5yZW1vdmUoYik7YS5yZW1vdmUoYixjKX19ZC5jbGVhckxpc3RlbmVycygpfX0pO0V4dC5kZWZpbmUoIkV4dC5kcmF3LlN1cmZhY2UiLHttaXhpbnM6e29ic2VydmFibGU6IkV4dC51dGlsLk9ic2VydmFibGUifSxyZXF1aXJlczpbIkV4dC5kcmF3LkNvbXBvc2l0ZVNwcml0ZSJdLHVzZXM6WyJFeHQuZHJhdy5lbmdpbmUuU3ZnIiwiRXh0LmRyYXcuZW5naW5lLlZtbCIsIkV4dC5kcmF3LmVuZ2luZS5TdmdFeHBvcnRlciIsIkV4dC5kcmF3LmVuZ2luZS5JbWFnZUV4cG9ydGVyIl0sc2VwYXJhdG9yUmU6L1ssIF0rLyxzdGF0aWNzOntjcmVhdGU6ZnVuY3Rpb24oYixkKXtkPWR8fFsiU3ZnIiwiVm1sIl07dmFyIGM9MCxhPWQubGVuZ3RoLGU7Zm9yKDtjPGE7YysrKXtpZihFeHQuc3VwcG9ydHNbZFtjXV0hPT1mYWxzZSl7cmV0dXJuIEV4dC5jcmVhdGUoIkV4dC5kcmF3LmVuZ2luZS4iK2RbY10sYil9fXJldHVybiBmYWxzZX0sc2F2ZTpmdW5jdGlvbihhLGIpe2I9Ynx8e307dmFyIGU9eyJpbWFnZS9wbmciOiJJbWFnZSIsImltYWdlL2pwZWciOiJJbWFnZSIsImltYWdlL3N2Zyt4bWwiOiJTdmcifSxkPWVbYi50eXBlXXx8IlN2ZyIsYz1FeHQuZHJhdy5lbmdpbmVbZCsiRXhwb3J0ZXIiXTtyZXR1cm4gYy5nZW5lcmF0ZShhLGIpfX0sYXZhaWxhYmxlQXR0cnM6e2JsdXI6MCwiY2xpcC1yZWN0IjoiMCAwIDFlOSAxZTkiLGN1cnNvcjoiZGVmYXVsdCIsY3g6MCxjeTowLCJkb21pbmFudC1iYXNlbGluZSI6ImF1dG8iLGZpbGw6Im5vbmUiLCJmaWxsLW9wYWNpdHkiOjEsZm9udDonMTBweCAiQXJpYWwiJywiZm9udC1mYW1pbHkiOiciQXJpYWwiJywiZm9udC1zaXplIjoiMTAiLCJmb250LXN0eWxlIjoibm9ybWFsIiwiZm9udC13ZWlnaHQiOjQwMCxncmFkaWVudDoiIixoZWlnaHQ6MCxoaWRkZW46ZmFsc2UsaHJlZjoiaHR0cDovL3NlbmNoYS5jb20vIixvcGFjaXR5OjEscGF0aDoiTTAsMCIscmFkaXVzOjAscng6MCxyeTowLHNjYWxlOiIxIDEiLHNyYzoiIixzdHJva2U6Im5vbmUiLCJzdHJva2UtZGFzaGFycmF5IjoiIiwic3Ryb2tlLWxpbmVjYXAiOiJidXR0Iiwic3Ryb2tlLWxpbmVqb2luIjoiYnV0dCIsInN0cm9rZS1taXRlcmxpbWl0IjowLCJzdHJva2Utb3BhY2l0eSI6MSwic3Ryb2tlLXdpZHRoIjoxLHRhcmdldDoiX2JsYW5rIix0ZXh0OiIiLCJ0ZXh0LWFuY2hvciI6Im1pZGRsZSIsdGl0bGU6IkV4dCBEcmF3Iix3aWR0aDowLHg6MCx5OjAsekluZGV4OjB9LGNvbnRhaW5lcjp1bmRlZmluZWQsaGVpZ2h0OjM1Mix3aWR0aDo1MTIseDowLHk6MCxvcmRlclNwcml0ZXNCeVpJbmRleDp0cnVlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YT1hfHx7fTtFeHQuYXBwbHkoYixhKTtiLmRvbVJlZj1FeHQuZ2V0RG9jKCkuZG9tO2IuY3VzdG9tQXR0cmlidXRlcz17fTtiLmFkZEV2ZW50cygibW91c2Vkb3duIiwibW91c2V1cCIsIm1vdXNlb3ZlciIsIm1vdXNlb3V0IiwibW91c2Vtb3ZlIiwibW91c2VlbnRlciIsIm1vdXNlbGVhdmUiLCJjbGljayIsImRibGNsaWNrIik7Yi5taXhpbnMub2JzZXJ2YWJsZS5jb25zdHJ1Y3Rvci5jYWxsKGIpO2IuZ2V0SWQoKTtiLmluaXRHcmFkaWVudHMoKTtiLmluaXRJdGVtcygpO2lmKGIucmVuZGVyVG8pe2IucmVuZGVyKGIucmVuZGVyVG8pO2RlbGV0ZSBiLnJlbmRlclRvfWIuaW5pdEJhY2tncm91bmQoYS5iYWNrZ3JvdW5kKX0saW5pdFN1cmZhY2U6RXh0LmVtcHR5Rm4scmVuZGVySXRlbTpFeHQuZW1wdHlGbixyZW5kZXJJdGVtczpFeHQuZW1wdHlGbixzZXRWaWV3Qm94OmZ1bmN0aW9uKGIsZCxjLGEpe2lmKGlzRmluaXRlKGIpJiZpc0Zpbml0ZShkKSYmaXNGaW5pdGUoYykmJmlzRmluaXRlKGEpKXt0aGlzLnZpZXdCb3g9e3g6Yix5OmQsd2lkdGg6YyxoZWlnaHQ6YX07dGhpcy5hcHBseVZpZXdCb3goKX19LGFkZENsczpFeHQuZW1wdHlGbixyZW1vdmVDbHM6RXh0LmVtcHR5Rm4sc2V0U3R5bGU6RXh0LmVtcHR5Rm4saW5pdEdyYWRpZW50czpmdW5jdGlvbigpe2lmKHRoaXMuaGFzT3duUHJvcGVydHkoImdyYWRpZW50cyIpKXt2YXIgYT10aGlzLmdyYWRpZW50cyxkPWEubGVuZ3RoLGI9dGhpcy5hZGRHcmFkaWVudCxjO2lmKGEpe2ZvcihjPTA7YzxkO2MrKyl7aWYoYi5jYWxsKHRoaXMsYVtjXSxjLGQpPT09ZmFsc2Upe2JyZWFrfX19fX0saW5pdEl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pdGVtczt0aGlzLml0ZW1zPW5ldyBFeHQuZHJhdy5Db21wb3NpdGVTcHJpdGUoKTt0aGlzLml0ZW1zLmF1dG9EZXN0cm95PXRydWU7dGhpcy5ncm91cHM9bmV3IEV4dC5kcmF3LkNvbXBvc2l0ZVNwcml0ZSgpO2lmKGEpe3RoaXMuYWRkKGEpfX0saW5pdEJhY2tncm91bmQ6ZnVuY3Rpb24oYil7dmFyIGU9dGhpcyxkPWUud2lkdGgsYT1lLmhlaWdodCxnLGgsYztpZihFeHQuaXNTdHJpbmcoYikpe2I9e2ZpbGw6Yn19aWYoYil7aWYoYi5ncmFkaWVudCl7aD1iLmdyYWRpZW50O2c9aC5pZDtlLmFkZEdyYWRpZW50KGgpO2UuYmFja2dyb3VuZD1lLmFkZCh7dHlwZToicmVjdCIseDowLHk6MCx3aWR0aDpkLGhlaWdodDphLGZpbGw6InVybCgjIitnKyIpIix6SW5kZXg6LTF9KX1lbHNle2lmKGIuZmlsbCl7ZS5iYWNrZ3JvdW5kPWUuYWRkKHt0eXBlOiJyZWN0Iix4OjAseTowLHdpZHRoOmQsaGVpZ2h0OmEsZmlsbDpiLmZpbGwsekluZGV4Oi0xfSl9ZWxzZXtpZihiLmltYWdlKXtlLmJhY2tncm91bmQ9ZS5hZGQoe3R5cGU6ImltYWdlIix4OjAseTowLHdpZHRoOmQsaGVpZ2h0OmEsc3JjOmIuaW1hZ2UsekluZGV4Oi0xfSl9fX1lLmJhY2tncm91bmQuYmJveEV4Y2x1ZGVkPXRydWV9fSxzZXRTaXplOmZ1bmN0aW9uKGEsYil7dGhpcy5hcHBseVZpZXdCb3goKX0sc2NydWJBdHRyczpmdW5jdGlvbihkKXt2YXIgYyxiPXt9LGE9e30sZT1kLmF0dHI7Zm9yKGMgaW4gZSl7aWYodGhpcy50cmFuc2xhdGVBdHRycy5oYXNPd25Qcm9wZXJ0eShjKSl7Ylt0aGlzLnRyYW5zbGF0ZUF0dHJzW2NdXT1lW2NdO2FbdGhpcy50cmFuc2xhdGVBdHRyc1tjXV09dHJ1ZX1lbHNle2lmKHRoaXMuYXZhaWxhYmxlQXR0cnMuaGFzT3duUHJvcGVydHkoYykmJiFhW2NdKXtiW2NdPWVbY119fX1yZXR1cm4gYn0sb25DbGljazpmdW5jdGlvbihhKXt0aGlzLnByb2Nlc3NFdmVudCgiY2xpY2siLGEpfSxvbkRibENsaWNrOmZ1bmN0aW9uKGEpe3RoaXMucHJvY2Vzc0V2ZW50KCJkYmxjbGljayIsYSl9LG9uTW91c2VVcDpmdW5jdGlvbihhKXt0aGlzLnByb2Nlc3NFdmVudCgibW91c2V1cCIsYSl9LG9uTW91c2VEb3duOmZ1bmN0aW9uKGEpe3RoaXMucHJvY2Vzc0V2ZW50KCJtb3VzZWRvd24iLGEpfSxvbk1vdXNlT3ZlcjpmdW5jdGlvbihhKXt0aGlzLnByb2Nlc3NFdmVudCgibW91c2VvdmVyIixhKX0sb25Nb3VzZU91dDpmdW5jdGlvbihhKXt0aGlzLnByb2Nlc3NFdmVudCgibW91c2VvdXQiLGEpfSxvbk1vdXNlTW92ZTpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgibW91c2Vtb3ZlIixhKX0sb25Nb3VzZUVudGVyOkV4dC5lbXB0eUZuLG9uTW91c2VMZWF2ZTpFeHQuZW1wdHlGbixhZGRHcmFkaWVudDpFeHQuZW1wdHlGbixhZGQ6ZnVuY3Rpb24oKXt2YXIgZz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLGosZCxhPWcubGVuZ3RoPjEsaCxiLGMsZSxrO2lmKGF8fEV4dC5pc0FycmF5KGdbMF0pKXtoPWE/ZzpnWzBdO2I9W107Zm9yKGM9MCxlPWgubGVuZ3RoO2M8ZTtjKyspe2s9aFtjXTtrPXRoaXMuYWRkKGspO2IucHVzaChrKX1yZXR1cm4gYn1qPXRoaXMucHJlcGFyZUl0ZW1zKGdbMF0sdHJ1ZSlbMF07dGhpcy5pbnNlcnRCeVpJbmRleChqKTt0aGlzLm9uQWRkKGopO3JldHVybiBqfSxpbnNlcnRCeVpJbmRleDpmdW5jdGlvbihqKXt2YXIgZz10aGlzLGQ9Zy5pdGVtcy5pdGVtcyxjPWQubGVuZ3RoLGs9TWF0aC5jZWlsLGg9ai5hdHRyLnpJbmRleCxpPWMsYj1pLTEsZT0wLGE7aWYoZy5vcmRlclNwcml0ZXNCeVpJbmRleCYmYyYmaDxkW2JdLmF0dHIuekluZGV4KXt3aGlsZShlPD1iKXtpPWsoKGUrYikvMik7YT1kW2ldLmF0dHIuekluZGV4O2lmKGE+aCl7Yj1pLTF9ZWxzZXtpZihhPGgpe2U9aSsxfWVsc2V7YnJlYWt9fX13aGlsZShpPGMmJmRbaV0uYXR0ci56SW5kZXg8PWgpe2krK319Zy5pdGVtcy5pbnNlcnQoaSxqKTtyZXR1cm4gaX0sb25BZGQ6ZnVuY3Rpb24oZCl7dmFyIGc9ZC5ncm91cCxiPWQuZHJhZ2dhYmxlLGEsZSxjO2lmKGcpe2E9W10uY29uY2F0KGcpO2U9YS5sZW5ndGg7Zm9yKGM9MDtjPGU7YysrKXtnPWFbY107dGhpcy5nZXRHcm91cChnKS5hZGQoZCl9ZGVsZXRlIGQuZ3JvdXB9aWYoYil7ZC5pbml0RHJhZ2dhYmxlKCl9fSxyZW1vdmU6ZnVuY3Rpb24oYixlKXtpZihiKXt0aGlzLml0ZW1zLnJlbW92ZShiKTt2YXIgYT1bXS5jb25jYXQodGhpcy5ncm91cHMuaXRlbXMpLGQ9YS5sZW5ndGgsYztmb3IoYz0wO2M8ZDtjKyspe2FbY10ucmVtb3ZlKGIpfWIub25SZW1vdmUoKTtpZihlPT09dHJ1ZSl7Yi5kZXN0cm95KCl9fX0scmVtb3ZlQWxsOmZ1bmN0aW9uKGQpe3ZhciBhPXRoaXMuaXRlbXMuaXRlbXMsYz1hLmxlbmd0aCxiO2ZvcihiPWMtMTtiPi0xO2ItLSl7dGhpcy5yZW1vdmUoYVtiXSxkKX19LG9uUmVtb3ZlOkV4dC5lbXB0eUZuLG9uRGVzdHJveTpFeHQuZW1wdHlGbixhcHBseVZpZXdCb3g6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGw9ZC52aWV3Qm94LGE9ZC53aWR0aHx8MSxoPWQuaGVpZ2h0fHwxLGcsZSxqLGIsaSxjLGs7aWYobCYmKGF8fGgpKXtnPWwueDtlPWwueTtqPWwud2lkdGg7Yj1sLmhlaWdodDtpPWgvYjtjPWEvajtrPU1hdGgubWluKGMsaSk7aWYoaiprPGEpe2ctPShhLWoqaykvMi9rfWlmKGIqazxoKXtlLT0oaC1iKmspLzIva31kLnZpZXdCb3hTaGlmdD17ZHg6LWcsZHk6LWUsc2NhbGU6a307aWYoZC5iYWNrZ3JvdW5kKXtkLmJhY2tncm91bmQuc2V0QXR0cmlidXRlcyhFeHQuYXBwbHkoe30se3g6Zyx5OmUsd2lkdGg6YS9rLGhlaWdodDpoL2t9LHtoaWRkZW46ZmFsc2V9KSx0cnVlKX19ZWxzZXtpZihkLmJhY2tncm91bmQmJmEmJmgpe2QuYmFja2dyb3VuZC5zZXRBdHRyaWJ1dGVzKEV4dC5hcHBseSh7eDowLHk6MCx3aWR0aDphLGhlaWdodDpofSx7aGlkZGVuOmZhbHNlfSksdHJ1ZSl9fX0sZ2V0QkJveDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbImdldFBhdGgiK2EudHlwZV0oYSk7aWYoYil7YS5iYm94LnBsYWluPWEuYmJveC5wbGFpbnx8RXh0LmRyYXcuRHJhdy5wYXRoRGltZW5zaW9ucyhjKTtyZXR1cm4gYS5iYm94LnBsYWlufWlmKGEuZGlydHlUcmFuc2Zvcm0pe3RoaXMuYXBwbHlUcmFuc2Zvcm1hdGlvbnMoYSx0cnVlKX1hLmJib3gudHJhbnNmb3JtPWEuYmJveC50cmFuc2Zvcm18fEV4dC5kcmF3LkRyYXcucGF0aERpbWVuc2lvbnMoRXh0LmRyYXcuRHJhdy5tYXBQYXRoKGMsYS5tYXRyaXgpKTtyZXR1cm4gYS5iYm94LnRyYW5zZm9ybX0sdHJhbnNmb3JtVG9WaWV3Qm94OmZ1bmN0aW9uKGEsZCl7aWYodGhpcy52aWV3Qm94U2hpZnQpe3ZhciBjPXRoaXMsYj1jLnZpZXdCb3hTaGlmdDtyZXR1cm5bYS9iLnNjYWxlLWIuZHgsZC9iLnNjYWxlLWIuZHldfWVsc2V7cmV0dXJuW2EsZF19fSxhcHBseVRyYW5zZm9ybWF0aW9uczpmdW5jdGlvbihiLGQpe2lmKGIudHlwZT09InRleHQiKXtiLmJib3gudHJhbnNmb3JtPTA7dGhpcy50cmFuc2Zvcm0oYixmYWxzZSl9Yi5kaXJ0eVRyYW5zZm9ybT1mYWxzZTt2YXIgYz10aGlzLGE9Yi5hdHRyO2lmKGEudHJhbnNsYXRpb24ueCE9bnVsbHx8YS50cmFuc2xhdGlvbi55IT1udWxsKXtjLnRyYW5zbGF0ZShiKX1pZihhLnNjYWxpbmcueCE9bnVsbHx8YS5zY2FsaW5nLnkhPW51bGwpe2Muc2NhbGUoYil9aWYoYS5yb3RhdGlvbi5kZWdyZWVzIT1udWxsKXtjLnJvdGF0ZShiKX1iLmJib3gudHJhbnNmb3JtPTA7dGhpcy50cmFuc2Zvcm0oYixkKTtiLnRyYW5zZm9ybWF0aW9ucz1bXX0scm90YXRlOmZ1bmN0aW9uKGEpe3ZhciBlLGI9YS5hdHRyLnJvdGF0aW9uLmRlZ3JlZXMsZD1hLmF0dHIucm90YXRpb24ueCxjPWEuYXR0ci5yb3RhdGlvbi55O2lmKCFFeHQuaXNOdW1iZXIoZCl8fCFFeHQuaXNOdW1iZXIoYykpe2U9dGhpcy5nZXRCQm94KGEsdHJ1ZSk7ZD0hRXh0LmlzTnVtYmVyKGQpP2UueCtlLndpZHRoLzI6ZDtjPSFFeHQuaXNOdW1iZXIoYyk/ZS55K2UuaGVpZ2h0LzI6Y31hLnRyYW5zZm9ybWF0aW9ucy5wdXNoKHt0eXBlOiJyb3RhdGUiLGRlZ3JlZXM6Yix4OmQseTpjfSl9LHRyYW5zbGF0ZTpmdW5jdGlvbihiKXt2YXIgYT1iLmF0dHIudHJhbnNsYXRpb24ueHx8MCxjPWIuYXR0ci50cmFuc2xhdGlvbi55fHwwO2IudHJhbnNmb3JtYXRpb25zLnB1c2goe3R5cGU6InRyYW5zbGF0ZSIseDphLHk6Y30pfSxzY2FsZTpmdW5jdGlvbihiKXt2YXIgZSxhPWIuYXR0ci5zY2FsaW5nLnh8fDEsZz1iLmF0dHIuc2NhbGluZy55fHwxLGQ9Yi5hdHRyLnNjYWxpbmcuY2VudGVyWCxjPWIuYXR0ci5zY2FsaW5nLmNlbnRlclk7aWYoIUV4dC5pc051bWJlcihkKXx8IUV4dC5pc051bWJlcihjKSl7ZT10aGlzLmdldEJCb3goYix0cnVlKTtkPSFFeHQuaXNOdW1iZXIoZCk/ZS54K2Uud2lkdGgvMjpkO2M9IUV4dC5pc051bWJlcihjKT9lLnkrZS5oZWlnaHQvMjpjfWIudHJhbnNmb3JtYXRpb25zLnB1c2goe3R5cGU6InNjYWxlIix4OmEseTpnLGNlbnRlclg6ZCxjZW50ZXJZOmN9KX0scmVjdFBhdGg6ZnVuY3Rpb24oYSxlLGIsYyxkKXtpZihkKXtyZXR1cm5bWyJNIixhK2QsZV0sWyJsIixiLWQqMiwwXSxbImEiLGQsZCwwLDAsMSxkLGRdLFsibCIsMCxjLWQqMl0sWyJhIixkLGQsMCwwLDEsLWQsZF0sWyJsIixkKjItYiwwXSxbImEiLGQsZCwwLDAsMSwtZCwtZF0sWyJsIiwwLGQqMi1jXSxbImEiLGQsZCwwLDAsMSxkLC1kXSxbInoiXV19cmV0dXJuW1siTSIsYSxlXSxbImwiLGIsMF0sWyJsIiwwLGNdLFsibCIsLWIsMF0sWyJ6Il1dfSxlbGxpcHNlUGF0aDpmdW5jdGlvbihhLGQsYyxiKXtpZihiPT1udWxsKXtiPWN9cmV0dXJuW1siTSIsYSxkXSxbIm0iLDAsLWJdLFsiYSIsYyxiLDAsMSwxLDAsMipiXSxbImEiLGMsYiwwLDEsMSwwLC0yKmJdLFsieiJdXX0sZ2V0UGF0aHBhdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXR0ci5wYXRofSxnZXRQYXRoY2lyY2xlOmZ1bmN0aW9uKGMpe3ZhciBiPWMuYXR0cjtyZXR1cm4gdGhpcy5lbGxpcHNlUGF0aChiLngsYi55LGIucmFkaXVzLGIucmFkaXVzKX0sZ2V0UGF0aGVsbGlwc2U6ZnVuY3Rpb24oYyl7dmFyIGI9Yy5hdHRyO3JldHVybiB0aGlzLmVsbGlwc2VQYXRoKGIueCxiLnksYi5yYWRpdXNYfHwoYi53aWR0aC8yKXx8MCxiLnJhZGl1c1l8fChiLmhlaWdodC8yKXx8MCl9LGdldFBhdGhyZWN0OmZ1bmN0aW9uKGMpe3ZhciBiPWMuYXR0cjtyZXR1cm4gdGhpcy5yZWN0UGF0aChiLnh8fDAsYi55fHwwLGIud2lkdGh8fDAsYi5oZWlnaHR8fDAsYi5yfHwwKX0sZ2V0UGF0aGltYWdlOmZ1bmN0aW9uKGMpe3ZhciBiPWMuYXR0cjtyZXR1cm4gdGhpcy5yZWN0UGF0aChiLnh8fDAsYi55fHwwLGIud2lkdGgsYi5oZWlnaHQpfSxnZXRQYXRodGV4dDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldEJCb3hUZXh0KGEpO3JldHVybiB0aGlzLnJlY3RQYXRoKGIueCxiLnksYi53aWR0aCxiLmhlaWdodCl9LGNyZWF0ZUdyb3VwOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ3JvdXBzLmdldChiKTtpZighYSl7YT1uZXcgRXh0LmRyYXcuQ29tcG9zaXRlU3ByaXRlKHtzdXJmYWNlOnRoaXN9KTthLmlkPWJ8fEV4dC5pZChudWxsLCJleHQtc3VyZmFjZS1ncm91cC0iKTt0aGlzLmdyb3Vwcy5hZGQoYSl9cmV0dXJuIGF9LGdldEdyb3VwOmZ1bmN0aW9uKGIpe3ZhciBhO2lmKHR5cGVvZiBiPT0ic3RyaW5nIil7YT10aGlzLmdyb3Vwcy5nZXQoYik7aWYoIWEpe2E9dGhpcy5jcmVhdGVHcm91cChiKX19ZWxzZXthPWJ9cmV0dXJuIGF9LHByZXBhcmVJdGVtczpmdW5jdGlvbihhLGMpe2E9W10uY29uY2F0KGEpO3ZhciBlLGIsZDtmb3IoYj0wLGQ9YS5sZW5ndGg7YjxkO2IrKyl7ZT1hW2JdO2lmKCEoZSBpbnN0YW5jZW9mIEV4dC5kcmF3LlNwcml0ZSkpe2Uuc3VyZmFjZT10aGlzO2FbYl09dGhpcy5jcmVhdGVJdGVtKGUpfWVsc2V7ZS5zdXJmYWNlPXRoaXN9fXJldHVybiBhfSxzZXRUZXh0OkV4dC5lbXB0eUZuLGNyZWF0ZUl0ZW06RXh0LmVtcHR5Rm4sZ2V0SWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZHx8KHRoaXMuaWQ9RXh0LmlkKG51bGwsImV4dC1zdXJmYWNlLSIpKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7ZGVsZXRlIGEuZG9tUmVmO2lmKGEuYmFja2dyb3VuZCl7YS5iYWNrZ3JvdW5kLmRlc3Ryb3koKX1hLnJlbW92ZUFsbCh0cnVlKTtFeHQuZGVzdHJveShhLmdyb3Vwcy5pdGVtcyl9fSk7RXh0LmRlZmluZSgiRXh0LmRyYXcuQ29tcG9uZW50Iix7YWxpYXM6IndpZGdldC5kcmF3IixleHRlbmQ6IkV4dC5Db21wb25lbnQiLHJlcXVpcmVzOlsiRXh0LmRyYXcuU3VyZmFjZSIsIkV4dC5sYXlvdXQuY29tcG9uZW50LkRyYXciXSxlbmdpbmVQcmlvcml0eTpbIlN2ZyIsIlZtbCJdLGJhc2VDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInN1cmZhY2UiLGNvbXBvbmVudExheW91dDoiZHJhdyIsdmlld0JveDp0cnVlLHNocmlua1dyYXA6MyxhdXRvU2l6ZTpmYWxzZSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5hZGRFdmVudHMoIm1vdXNlZG93biIsIm1vdXNldXAiLCJtb3VzZW1vdmUiLCJtb3VzZWVudGVyIiwibW91c2VsZWF2ZSIsImNsaWNrIiwiZGJsY2xpY2siKX0sb25SZW5kZXI6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGo9ZC52aWV3Qm94LGI9ZC5hdXRvU2l6ZSxoLGMsYSxpLGcsZTtkLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihkLmNyZWF0ZVN1cmZhY2UoKSE9PWZhbHNlKXtjPWQuc3VyZmFjZS5pdGVtcztpZihqfHxiKXtoPWMuZ2V0QkJveCgpO2E9aC53aWR0aDtpPWguaGVpZ2h0O2c9aC54O2U9aC55O2lmKGQudmlld0JveCl7ZC5zdXJmYWNlLnNldFZpZXdCb3goZyxlLGEsaSl9ZWxzZXtkLmF1dG9TaXplU3VyZmFjZSgpfX19fSxhdXRvU2l6ZVN1cmZhY2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnN1cmZhY2UuaXRlbXMuZ2V0QkJveCgpO3RoaXMuc2V0U3VyZmFjZVNpemUoYS53aWR0aCxhLmhlaWdodCl9LHNldFN1cmZhY2VTaXplOmZ1bmN0aW9uKGIsYSl7dGhpcy5zdXJmYWNlLnNldFNpemUoYixhKTtpZih0aGlzLmF1dG9TaXplKXt2YXIgYz10aGlzLnN1cmZhY2UuaXRlbXMuZ2V0QkJveCgpO3RoaXMuc3VyZmFjZS5zZXRWaWV3Qm94KGMueCxjLnktKCtFeHQuaXNPcGVyYSksYixhKX19LGNyZWF0ZVN1cmZhY2U6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGI9RXh0LmFwcGx5SWYoe3JlbmRlclRvOmQuZWwsaGVpZ2h0OmQuaGVpZ2h0LHdpZHRoOmQud2lkdGgsaXRlbXM6ZC5pdGVtc30sZC5pbml0aWFsQ29uZmlnKSxhO2RlbGV0ZSBiLmxpc3RlbmVyczthPUV4dC5kcmF3LlN1cmZhY2UuY3JlYXRlKGIpO2lmKCFhKXtyZXR1cm4gZmFsc2V9ZC5zdXJmYWNlPWE7ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZnVuY3Rpb24oZyl7ZC5maXJlRXZlbnQoZSxnKX19YS5vbih7c2NvcGU6ZCxtb3VzZXVwOmMoIm1vdXNldXAiKSxtb3VzZWRvd246YygibW91c2Vkb3duIiksbW91c2Vtb3ZlOmMoIm1vdXNlbW92ZSIpLG1vdXNlZW50ZXI6YygibW91c2VlbnRlciIpLG1vdXNlbGVhdmU6YygibW91c2VsZWF2ZSIpLGNsaWNrOmMoImNsaWNrIiksZGJsY2xpY2s6YygiZGJsY2xpY2siKX0pfSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuZGVzdHJveSh0aGlzLnN1cmZhY2UpO3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfX0pO0V4dC5kZWZpbmUoIkV4dC5jaGFydC5TaGFwZSIse3NpbmdsZXRvbjp0cnVlLGNpcmNsZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLmFkZChFeHQuYXBwbHkoe3R5cGU6ImNpcmNsZSIseDpiLngseTpiLnksc3Ryb2tlOm51bGwscmFkaXVzOmIucmFkaXVzfSxiKSl9LGxpbmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5hZGQoRXh0LmFwcGx5KHt0eXBlOiJyZWN0Iix4OmIueC1iLnJhZGl1cyx5OmIueS1iLnJhZGl1cyxoZWlnaHQ6MipiLnJhZGl1cyx3aWR0aDoyKmIucmFkaXVzLzV9LGIpKX0sc3F1YXJlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuYWRkKEV4dC5hcHBseUlmKHt0eXBlOiJyZWN0Iix4OmIueC1iLnJhZGl1cyx5OmIueS1iLnJhZGl1cyxoZWlnaHQ6MipiLnJhZGl1cyx3aWR0aDoyKmIucmFkaXVzLHJhZGl1czpudWxsfSxiKSl9LHRyaWFuZ2xlOmZ1bmN0aW9uKGEsYil7Yi5yYWRpdXMqPTEuNzU7cmV0dXJuIGEuYWRkKEV4dC5hcHBseSh7dHlwZToicGF0aCIsc3Ryb2tlOm51bGwscGF0aDoiTSIuY29uY2F0KGIueCwiLCIsYi55LCJtMC0iLGIucmFkaXVzKjAuNTgsImwiLGIucmFkaXVzKjAuNSwiLCIsYi5yYWRpdXMqMC44NywiLSIsYi5yYWRpdXMsIiwweiIpfSxiKSl9LGRpYW1vbmQ6ZnVuY3Rpb24oYSxjKXt2YXIgYj1jLnJhZGl1cztiKj0xLjU7cmV0dXJuIGEuYWRkKEV4dC5hcHBseSh7dHlwZToicGF0aCIsc3Ryb2tlOm51bGwscGF0aDpbIk0iLGMueCxjLnktYiwibCIsYixiLC1iLGIsLWIsLWIsYiwtYiwieiJdfSxjKSl9LGNyb3NzOmZ1bmN0aW9uKGEsYyl7dmFyIGI9Yy5yYWRpdXM7Yj1iLzEuNztyZXR1cm4gYS5hZGQoRXh0LmFwcGx5KHt0eXBlOiJwYXRoIixzdHJva2U6bnVsbCxwYXRoOiJNIi5jb25jYXQoYy54LWIsIiwiLGMueSwibCIsWy1iLC1iLGIsLWIsYixiLGIsLWIsYixiLC1iLGIsYixiLC1iLGIsLWIsLWIsLWIsYiwtYiwtYiwieiJdKX0sYykpfSxwbHVzOmZ1bmN0aW9uKGEsYyl7dmFyIGI9Yy5yYWRpdXMvMS4zO3JldHVybiBhLmFkZChFeHQuYXBwbHkoe3R5cGU6InBhdGgiLHN0cm9rZTpudWxsLHBhdGg6Ik0iLmNvbmNhdChjLngtYi8yLCIsIixjLnktYi8yLCJsIixbMCwtYixiLDAsMCxiLGIsMCwwLGIsLWIsMCwwLGIsLWIsMCwwLC1iLC1iLDAsMCwtYiwieiJdKX0sYykpfSxhcnJvdzpmdW5jdGlvbihhLGMpe3ZhciBiPWMucmFkaXVzO3JldHVybiBhLmFkZChFeHQuYXBwbHkoe3R5cGU6InBhdGgiLHBhdGg6Ik0iLmNvbmNhdChjLngtYiowLjcsIiwiLGMueS1iKjAuNCwibCIsW2IqMC42LDAsMCwtYiowLjQsYixiKjAuOCwtYixiKjAuOCwwLC1iKjAuNCwtYiowLjYsMF0sInoiKX0sYykpfSxkcm9wOmZ1bmN0aW9uKGIsYSxnLGUsYyxkKXtjPWN8fDMwO2Q9ZHx8MDtiLmFkZCh7dHlwZToicGF0aCIscGF0aDpbIk0iLGEsZywibCIsYywwLCJBIixjKjAuNCxjKjAuNCwwLDEsMCxhK2MqMC43LGctYyowLjcsInoiXSxmaWxsOiIjMDAwIixzdHJva2U6Im5vbmUiLHJvdGF0ZTp7ZGVncmVlczoyMi41LWQseDphLHk6Z319KTtkPShkKzkwKSpNYXRoLlBJLzE4MDtiLmFkZCh7dHlwZToidGV4dCIseDphK2MqTWF0aC5zaW4oZCktMTAseTpnK2MqTWF0aC5jb3MoZCkrNSx0ZXh0OmUsImZvbnQtc2l6ZSI6YyoxMi80MCxzdHJva2U6Im5vbmUiLGZpbGw6IiNmZmYifSl9fSk7RXh0LmRlZmluZSgiRXh0LmNoYXJ0LkxlZ2VuZEl0ZW0iLHtleHRlbmQ6IkV4dC5kcmF3LkNvbXBvc2l0ZVNwcml0ZSIscmVxdWlyZXM6WyJFeHQuY2hhcnQuU2hhcGUiXSx4OjAseTowLHpJbmRleDo1MDAsYm9sZFJlOi9ib2xkXHNcZHsxLH0uKi9pLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3RoaXMuY3JlYXRlTGVnZW5kKGEpfSxjcmVhdGVMZWdlbmQ6ZnVuY3Rpb24ocyl7dmFyIHQ9dGhpcyxpPXMueUZpZWxkSW5kZXgsbD10LnNlcmllcyxhPWwudHlwZSxtPXQueUZpZWxkSW5kZXgsZD10LmxlZ2VuZCxwPXQuc3VyZmFjZSxxPWQueCt0Lngsbj1kLnkrdC55LGMsaz10LnpJbmRleCxiLGoscixlLG89ZmFsc2UsaD1FeHQuYXBwbHkobC5zZXJpZXNTdHlsZSxsLnN0eWxlKTtmdW5jdGlvbiBnKHUpe3ZhciB2PWxbdV07cmV0dXJuKEV4dC5pc0FycmF5KHYpP3ZbbV06dil9aj10LmFkZCgibGFiZWwiLHAuYWRkKHt0eXBlOiJ0ZXh0Iix4OjIwLHk6MCx6SW5kZXg6KGt8fDApKzIsZmlsbDpkLmxhYmVsQ29sb3IsZm9udDpkLmxhYmVsRm9udCx0ZXh0OmcoInRpdGxlIil8fGcoInlGaWVsZCIpLHN0eWxlOntjdXJzb3I6InBvaW50ZXIifX0pKTtpZihhPT09ImxpbmUifHxhPT09InNjYXR0ZXIiKXtpZihhPT09ImxpbmUiKXt0LmFkZCgibGluZSIscC5hZGQoe3R5cGU6InBhdGgiLHBhdGg6Ik0wLjUsMC41TDE2LjUsMC41Iix6SW5kZXg6KGt8fDApKzIsInN0cm9rZS13aWR0aCI6bC5saW5lV2lkdGgsInN0cm9rZS1saW5lam9pbiI6InJvdW5kIiwic3Ryb2tlLWRhc2hhcnJheSI6bC5kYXNoLHN0cm9rZTpoLnN0cm9rZXx8bC5nZXRMZWdlbmRDb2xvcihpKXx8IiMwMDAiLHN0eWxlOntjdXJzb3I6InBvaW50ZXIifX0pKX1pZihsLnNob3dNYXJrZXJzfHxhPT09InNjYXR0ZXIiKXtiPUV4dC5hcHBseShsLm1hcmtlclN0eWxlLGwubWFya2VyQ29uZmlnfHx7fSx7ZmlsbDpsLmdldExlZ2VuZENvbG9yKGkpfSk7dC5hZGQoIm1hcmtlciIsRXh0LmNoYXJ0LlNoYXBlW2IudHlwZV0ocCx7ZmlsbDpiLmZpbGwseDo4LjUseTowLjUsekluZGV4OihrfHwwKSsyLHJhZGl1czpiLnJhZGl1c3x8Yi5zaXplLHN0eWxlOntjdXJzb3I6InBvaW50ZXIifX0pKX19ZWxzZXt0LmFkZCgiYm94IixwLmFkZCh7dHlwZToicmVjdCIsekluZGV4OihrfHwwKSsyLHg6MCx5OjAsd2lkdGg6MTIsaGVpZ2h0OjEyLGZpbGw6bC5nZXRMZWdlbmRDb2xvcihpKSxzdHlsZTp7Y3Vyc29yOiJwb2ludGVyIn19KSl9dC5zZXRBdHRyaWJ1dGVzKHtoaWRkZW46ZmFsc2V9LHRydWUpO2M9dC5nZXRCQm94KCk7cj10LmFkZCgibWFzayIscC5hZGQoe3R5cGU6InJlY3QiLHg6Yy54LHk6Yy55LHdpZHRoOmMud2lkdGh8fDIwLGhlaWdodDpjLmhlaWdodHx8MjAsekluZGV4OihrfHwwKSsxLGZpbGw6dC5sZWdlbmQuYm94RmlsbCxzdHlsZTp7Y3Vyc29yOiJwb2ludGVyIn19KSk7dC5vbigibW91c2VvdmVyIixmdW5jdGlvbigpe2ouc2V0U3R5bGUoeyJmb250LXdlaWdodCI6ImJvbGQifSk7ci5zZXRTdHlsZSh7Y3Vyc29yOiJwb2ludGVyIn0pO2wuX2luZGV4PWk7bC5oaWdobGlnaHRJdGVtKCl9LHQpO3Qub24oIm1vdXNlb3V0IixmdW5jdGlvbigpe2ouc2V0U3R5bGUoeyJmb250LXdlaWdodCI6ZC5sYWJlbEZvbnQmJnQuYm9sZFJlLnRlc3QoZC5sYWJlbEZvbnQpPyJib2xkIjoibm9ybWFsIn0pO2wuX2luZGV4PWk7bC51bkhpZ2hsaWdodEl0ZW0oKX0sdCk7aWYoIWwudmlzaWJsZUluTGVnZW5kKGkpKXtvPXRydWU7ai5zZXRBdHRyaWJ1dGVzKHtvcGFjaXR5OjAuNX0sdHJ1ZSl9dC5vbigibW91c2Vkb3duIixmdW5jdGlvbigpe2lmKCFvKXtsLmhpZGVBbGwoaSk7ai5zZXRBdHRyaWJ1dGVzKHtvcGFjaXR5OjAuNX0sdHJ1ZSl9ZWxzZXtsLnNob3dBbGwoaSk7ai5zZXRBdHRyaWJ1dGVzKHtvcGFjaXR5OjF9LHRydWUpfW89IW87dC5sZWdlbmQuY2hhcnQucmVkcmF3KCl9LHQpO3QudXBkYXRlUG9zaXRpb24oe3g6MCx5OjB9KX0sdXBkYXRlUG9zaXRpb246ZnVuY3Rpb24oYyl7dmFyIGc9dGhpcyxhPWcuaXRlbXMsZT1hLmxlbmd0aCxiPTAsZDtpZighYyl7Yz1nLmxlZ2VuZH1mb3IoO2I8ZTtiKyspe2Q9YVtiXTtzd2l0Y2goZC50eXBlKXtjYXNlInRleHQiOmQuc2V0QXR0cmlidXRlcyh7eDoyMCtjLngrZy54LHk6Yy55K2cueX0sdHJ1ZSk7YnJlYWs7Y2FzZSJyZWN0IjpkLnNldEF0dHJpYnV0ZXMoe3RyYW5zbGF0ZTp7eDpjLngrZy54LHk6Yy55K2cueS02fX0sdHJ1ZSk7YnJlYWs7ZGVmYXVsdDpkLnNldEF0dHJpYnV0ZXMoe3RyYW5zbGF0ZTp7eDpjLngrZy54LHk6Yy55K2cueX19LHRydWUpfX19fSk7RXh0LmRlZmluZSgiRXh0LmNoYXJ0LkxlZ2VuZCIse3JlcXVpcmVzOlsiRXh0LmNoYXJ0LkxlZ2VuZEl0ZW0iXSx2aXNpYmxlOnRydWUsdXBkYXRlOnRydWUscG9zaXRpb246ImJvdHRvbSIseDowLHk6MCxsYWJlbENvbG9yOiIjMDAwIixsYWJlbEZvbnQ6IjEycHggSGVsdmV0aWNhLCBzYW5zLXNlcmlmIixib3hTdHJva2U6IiMwMDAiLGJveFN0cm9rZVdpZHRoOjEsYm94RmlsbDoiI0ZGRiIsaXRlbVNwYWNpbmc6MTAscGFkZGluZzo1LHdpZHRoOjAsaGVpZ2h0OjAsYm94WkluZGV4OjEwMCxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGEpe0V4dC5hcHBseShiLGEpfWIuaXRlbXM9W107Yi5pc1ZlcnRpY2FsPSgibGVmdHxyaWdodHxmbG9hdCIuaW5kZXhPZihiLnBvc2l0aW9uKSE9PS0xKTtiLm9yaWdYPWIueDtiLm9yaWdZPWIueX0sY3JlYXRlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxhPWUuY2hhcnQuc2VyaWVzLml0ZW1zLGMsZCxiO2UuY3JlYXRlQm94KCk7aWYoZS5yZWJ1aWxkIT09ZmFsc2Upe2UuY3JlYXRlSXRlbXMoKX1pZighZS5jcmVhdGVkJiZlLmlzRGlzcGxheWVkKCkpe2UuY3JlYXRlZD10cnVlO2ZvcihjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKXtiPWFbY107Yi5vbigidGl0bGVjaGFuZ2UiLGZ1bmN0aW9uKCl7ZS5jcmVhdGUoKTtlLnVwZGF0ZVBvc2l0aW9uKCl9KX19fSxpc0Rpc3BsYXllZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpc2libGUmJnRoaXMuY2hhcnQuc2VyaWVzLmZpbmRJbmRleCgic2hvd0luTGVnZW5kIix0cnVlKSE9PS0xfSxjcmVhdGVJdGVtczpmdW5jdGlvbigpe3ZhciBIPXRoaXMscz1ILmNoYXJ0LGI9cy5zZXJpZXMuaXRlbXMsbyxxLEE9cy5zdXJmYWNlLHU9SC5pdGVtcyxyPUgucGFkZGluZyxLPUguaXRlbVNwYWNpbmcsbT0yLEU9MCx6PTAsaD0wLEc9MCxkPUguaXNWZXJ0aWNhbCxnPU1hdGgsZT1nLmZsb29yLEo9Zy5tYXgsbD0wLEM9MCxEPXU/dS5sZW5ndGg6MCxwLG4sayxGLGEsdCx3LHYsYyxJLEI7aWYoRCl7Zm9yKDtDPEQ7QysrKXt1W0NdLmRlc3Ryb3koKX19dS5sZW5ndGg9W107Zm9yKEM9MCxvPWIubGVuZ3RoO0M8bztDKyspe3E9YltDXTtpZihxLnNob3dJbkxlZ2VuZCl7dj1bXS5jb25jYXQocS55RmllbGQpO2ZvcihCPTAsST12Lmxlbmd0aDtCPEk7QisrKXtjPXZbQl07Rj1uZXcgRXh0LmNoYXJ0LkxlZ2VuZEl0ZW0oe2xlZ2VuZDp0aGlzLHNlcmllczpxLHN1cmZhY2U6cy5zdXJmYWNlLHlGaWVsZEluZGV4OkJ9KTthPUYuZ2V0QkJveCgpO3c9YS53aWR0aDt0PWEuaGVpZ2h0O2lmKEMrQj09PTApe2s9ZD9yK3QvMjpyfWVsc2V7az1LLyhkPzI6MSl9Ri54PWUoZD9yOmgrayk7Ri55PWUoZD9HK2s6cit0LzIpO2grPXcraztHKz10K2s7RT1KKEUsdyk7ej1KKHosdCk7dS5wdXNoKEYpfX19SC53aWR0aD1lKChkP0U6aCkrcioyKTtpZihkJiZ1Lmxlbmd0aD09PTEpe209MX1ILmhlaWdodD1lKChkP0ctbSprOnopKyhyKjIpKTtILml0ZW1IZWlnaHQ9en0sZ2V0QkJveDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJue3g6TWF0aC5yb3VuZChhLngpLWEuYm94U3Ryb2tlV2lkdGgvMix5Ok1hdGgucm91bmQoYS55KS1hLmJveFN0cm9rZVdpZHRoLzIsd2lkdGg6YS53aWR0aCxoZWlnaHQ6YS5oZWlnaHR9fSxjcmVhdGVCb3g6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGEsYztpZihiLmJveFNwcml0ZSl7Yi5ib3hTcHJpdGUuZGVzdHJveSgpfWM9Yi5nZXRCQm94KCk7aWYoaXNOYU4oYy53aWR0aCl8fGlzTmFOKGMuaGVpZ2h0KSl7Yi5ib3hTcHJpdGU9ZmFsc2U7cmV0dXJufWE9Yi5ib3hTcHJpdGU9Yi5jaGFydC5zdXJmYWNlLmFkZChFeHQuYXBwbHkoe3R5cGU6InJlY3QiLHN0cm9rZTpiLmJveFN0cm9rZSwic3Ryb2tlLXdpZHRoIjpiLmJveFN0cm9rZVdpZHRoLGZpbGw6Yi5ib3hGaWxsLHpJbmRleDpiLmJveFpJbmRleH0sYykpO2EucmVkcmF3KCl9LHVwZGF0ZVBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIHU9dGhpcyxwPXUuaXRlbXMscixqLGwsaCxuPXUud2lkdGh8fDAsYz11LmhlaWdodHx8MCxtPXUucGFkZGluZyxvPXUuY2hhcnQsaz1vLmNoYXJ0QkJveCxzPW8uaW5zZXRQYWRkaW5nLHQ9ay53aWR0aC0ocyoyKSxkPWsuaGVpZ2h0LShzKjIpLGc9ay54K3MsZT1rLnkrcyxxPW8uc3VyZmFjZSxiPU1hdGguZmxvb3IsYTtpZih1LmlzRGlzcGxheWVkKCkpe3N3aXRjaCh1LnBvc2l0aW9uKXtjYXNlImxlZnQiOmw9cztoPWIoZStkLzItYy8yKTticmVhaztjYXNlInJpZ2h0IjpsPWIocS53aWR0aC1uKS1zO2g9YihlK2QvMi1jLzIpO2JyZWFrO2Nhc2UidG9wIjpsPWIoZyt0LzItbi8yKTtoPXM7YnJlYWs7Y2FzZSJib3R0b20iOmw9YihnK3QvMi1uLzIpO2g9YihxLmhlaWdodC1jKS1zO2JyZWFrO2RlZmF1bHQ6bD1iKHUub3JpZ1gpK3M7aD1iKHUub3JpZ1kpK3N9dS54PWw7dS55PWg7Zm9yKHI9MCxqPXAubGVuZ3RoO3I8ajtyKyspe3Bbcl0udXBkYXRlUG9zaXRpb24oKX1hPXUuZ2V0QkJveCgpO2lmKGlzTmFOKGEud2lkdGgpfHxpc05hTihhLmhlaWdodCkpe2lmKHUuYm94U3ByaXRlKXt1LmJveFNwcml0ZS5oaWRlKHRydWUpfX1lbHNle2lmKCF1LmJveFNwcml0ZSl7dS5jcmVhdGVCb3goKX11LmJveFNwcml0ZS5zZXRBdHRyaWJ1dGVzKGEsdHJ1ZSk7dS5ib3hTcHJpdGUuc2hvdyh0cnVlKX19fSx0b2dnbGU6ZnVuY3Rpb24oYil7dmFyIGU9dGhpcyxkPTAsYz1lLml0ZW1zLGE9Yy5sZW5ndGg7aWYoZS5ib3hTcHJpdGUpe2lmKGIpe2UuYm94U3ByaXRlLnNob3codHJ1ZSl9ZWxzZXtlLmJveFNwcml0ZS5oaWRlKHRydWUpfX1mb3IoO2Q8YTsrK2Qpe2lmKGIpe2NbZF0uc2hvdyh0cnVlKX1lbHNle2NbZF0uaGlkZSh0cnVlKX19ZS52aXNpYmxlPWJ9fSk7RXh0LmRlZmluZSgiRXh0LmNoYXJ0LnRoZW1lLlRoZW1lIix7cmVxdWlyZXM6WyJFeHQuZHJhdy5Db2xvciJdLHRoZW1lOiJCYXNlIix0aGVtZUF0dHJzOmZhbHNlLGluaXRUaGVtZTpmdW5jdGlvbihlKXt2YXIgZD10aGlzLGI9RXh0LmNoYXJ0LnRoZW1lLGMsYTtpZihlKXtlPWUuc3BsaXQoIjoiKTtmb3IoYyBpbiBiKXtpZihjPT1lWzBdKXthPWVbMV09PSJncmFkaWVudHMiO2QudGhlbWVBdHRycz1uZXcgYltjXSh7dXNlR3JhZGllbnRzOmF9KTtpZihhKXtkLmdyYWRpZW50cz1kLnRoZW1lQXR0cnMuZ3JhZGllbnRzfWlmKGQudGhlbWVBdHRycy5iYWNrZ3JvdW5kKXtkLmJhY2tncm91bmQ9ZC50aGVtZUF0dHJzLmJhY2tncm91bmR9cmV0dXJufX19fX0sZnVuY3Rpb24oKXsoZnVuY3Rpb24oKXtFeHQuY2hhcnQudGhlbWU9ZnVuY3Rpb24oYyxiKXtjPWN8fHt9O3ZhciBtPTAscD0rbmV3IERhdGUoKSxqLGEsayxyLHMsZyxvLHEsbj1bXSxlLGg7aWYoYy5iYXNlQ29sb3Ipe2U9RXh0LmRyYXcuQ29sb3IuZnJvbVN0cmluZyhjLmJhc2VDb2xvcik7aD1lLmdldEhTTCgpWzJdO2lmKGg8MC4xNSl7ZT1lLmdldExpZ2h0ZXIoMC4zKX1lbHNle2lmKGg8MC4zKXtlPWUuZ2V0TGlnaHRlcigwLjE1KX1lbHNle2lmKGg+MC44NSl7ZT1lLmdldERhcmtlcigwLjMpfWVsc2V7aWYoaD4wLjcpe2U9ZS5nZXREYXJrZXIoMC4xNSl9fX19Yy5jb2xvcnM9W2UuZ2V0RGFya2VyKDAuMykudG9TdHJpbmcoKSxlLmdldERhcmtlcigwLjE1KS50b1N0cmluZygpLGUudG9TdHJpbmcoKSxlLmdldExpZ2h0ZXIoMC4xNSkudG9TdHJpbmcoKSxlLmdldExpZ2h0ZXIoMC4zKS50b1N0cmluZygpXTtkZWxldGUgYy5iYXNlQ29sb3J9aWYoYy5jb2xvcnMpe2E9Yy5jb2xvcnMuc2xpY2UoKTtzPWIubWFya2VyVGhlbWVzO3I9Yi5zZXJpZXNUaGVtZXM7aj1hLmxlbmd0aDtiLmNvbG9ycz1hO2Zvcig7bTxqO20rKyl7az1hW21dO289c1ttXXx8e307Zz1yW21dfHx7fTtvLmZpbGw9Zy5maWxsPW8uc3Ryb2tlPWcuc3Ryb2tlPWs7c1ttXT1vO3JbbV09Z31iLm1hcmtlclRoZW1lcz1zLnNsaWNlKDAsaik7Yi5zZXJpZXNUaGVtZXM9ci5zbGljZSgwLGopfWZvcihxIGluIGIpe2lmKHEgaW4gYyl7aWYoRXh0LmlzT2JqZWN0KGNbcV0pJiZFeHQuaXNPYmplY3QoYltxXSkpe0V4dC5hcHBseShiW3FdLGNbcV0pfWVsc2V7YltxXT1jW3FdfX19aWYoYy51c2VHcmFkaWVudHMpe2E9Yi5jb2xvcnN8fChmdW5jdGlvbigpe3ZhciBkPVtdO2ZvcihtPTAscj1iLnNlcmllc1RoZW1lcyxqPXIubGVuZ3RoO208ajttKyspe2QucHVzaChyW21dLmZpbGx8fHJbbV0uc3Ryb2tlKX1yZXR1cm4gZH0oKSk7Zm9yKG09MCxqPWEubGVuZ3RoO208ajttKyspe2U9RXh0LmRyYXcuQ29sb3IuZnJvbVN0cmluZyhhW21dKTtpZihlKXtrPWUuZ2V0RGFya2VyKDAuMSkudG9TdHJpbmcoKTtlPWUudG9TdHJpbmcoKTtxPSJ0aGVtZS0iK2Uuc3Vic3RyKDEpKyItIitrLnN1YnN0cigxKSsiLSIrcDtuLnB1c2goe2lkOnEsYW5nbGU6NDUsc3RvcHM6ezA6e2NvbG9yOmUudG9TdHJpbmcoKX0sMTAwOntjb2xvcjprLnRvU3RyaW5nKCl9fX0pO2FbbV09InVybCgjIitxKyIpIn19Yi5ncmFkaWVudHM9bjtiLmNvbG9ycz1hfUV4dC5hcHBseSh0aGlzLGIpfX0oKSl9KTtFeHQuZGVmaW5lKCJFeHQuY2hhcnQudGhlbWUuQmFzZSIse3JlcXVpcmVzOlsiRXh0LmNoYXJ0LnRoZW1lLlRoZW1lIl0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7RXh0LmNoYXJ0LnRoZW1lLmNhbGwodGhpcyxhLHtiYWNrZ3JvdW5kOmZhbHNlLGF4aXM6e3N0cm9rZToiIzQ0NCIsInN0cm9rZS13aWR0aCI6MX0sYXhpc0xhYmVsVG9wOntmaWxsOiIjNDQ0Iixmb250OiIxMnB4IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiLHNwYWNpbmc6MixwYWRkaW5nOjUscmVuZGVyZXI6ZnVuY3Rpb24oYil7cmV0dXJuIGJ9fSxheGlzTGFiZWxSaWdodDp7ZmlsbDoiIzQ0NCIsZm9udDoiMTJweCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmIixzcGFjaW5nOjIscGFkZGluZzo1LHJlbmRlcmVyOmZ1bmN0aW9uKGIpe3JldHVybiBifX0sYXhpc0xhYmVsQm90dG9tOntmaWxsOiIjNDQ0Iixmb250OiIxMnB4IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiLHNwYWNpbmc6MixwYWRkaW5nOjUscmVuZGVyZXI6ZnVuY3Rpb24oYil7cmV0dXJuIGJ9fSxheGlzTGFiZWxMZWZ0OntmaWxsOiIjNDQ0Iixmb250OiIxMnB4IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWYiLHNwYWNpbmc6MixwYWRkaW5nOjUscmVuZGVyZXI6ZnVuY3Rpb24oYil7cmV0dXJuIGJ9fSxheGlzVGl0bGVUb3A6e2ZvbnQ6ImJvbGQgMThweCBBcmlhbCIsZmlsbDoiIzQ0NCJ9LGF4aXNUaXRsZVJpZ2h0Ontmb250OiJib2xkIDE4cHggQXJpYWwiLGZpbGw6IiM0NDQiLHJvdGF0ZTp7eDowLHk6MCxkZWdyZWVzOjI3MH19LGF4aXNUaXRsZUJvdHRvbTp7Zm9udDoiYm9sZCAxOHB4IEFyaWFsIixmaWxsOiIjNDQ0In0sYXhpc1RpdGxlTGVmdDp7Zm9udDoiYm9sZCAxOHB4IEFyaWFsIixmaWxsOiIjNDQ0Iixyb3RhdGU6e3g6MCx5OjAsZGVncmVlczoyNzB9fSxzZXJpZXM6eyJzdHJva2Utd2lkdGgiOjB9LHNlcmllc0xhYmVsOntmb250OiIxMnB4IEFyaWFsIixmaWxsOiIjMzMzIn0sbWFya2VyOntzdHJva2U6IiM1NTUiLHJhZGl1czozLHNpemU6M30sY29sb3JzOlsiIzk0YWUwYSIsIiMxMTVmYTYiLCIjYTYxMTIwIiwiI2ZmODgwOSIsIiNmZmQxM2UiLCIjYTYxMTg3IiwiIzI0YWQ5YSIsIiM3Yzc0NzQiLCIjYTY2MTExIl0sc2VyaWVzVGhlbWVzOlt7ZmlsbDoiIzExNWZhNiJ9LHtmaWxsOiIjOTRhZTBhIn0se2ZpbGw6IiNhNjExMjAifSx7ZmlsbDoiI2ZmODgwOSJ9LHtmaWxsOiIjZmZkMTNlIn0se2ZpbGw6IiNhNjExODcifSx7ZmlsbDoiIzI0YWQ5YSJ9LHtmaWxsOiIjN2M3NDc0In0se2ZpbGw6IiMxMTVmYTYifSx7ZmlsbDoiIzk0YWUwYSJ9LHtmaWxsOiIjYTYxMTIwIn0se2ZpbGw6IiNmZjg4MDkifSx7ZmlsbDoiI2ZmZDEzZSJ9LHtmaWxsOiIjYTYxMTg3In0se2ZpbGw6IiMyNGFkOWEifSx7ZmlsbDoiIzdjNzQ3NCJ9LHtmaWxsOiIjYTY2MTExIn1dLG1hcmtlclRoZW1lczpbe2ZpbGw6IiMxMTVmYTYiLHR5cGU6ImNpcmNsZSJ9LHtmaWxsOiIjOTRhZTBhIix0eXBlOiJjcm9zcyJ9LHtmaWxsOiIjMTE1ZmE2Iix0eXBlOiJwbHVzIn0se2ZpbGw6IiM5NGFlMGEiLHR5cGU6ImNpcmNsZSJ9LHtmaWxsOiIjYTYxMTIwIix0eXBlOiJjcm9zcyJ9XX0pfX0sZnVuY3Rpb24oKXt2YXIgYz1bIiNiMWRhNWEiLCIjNGNlMGU3IiwiI2U4NGI2NyIsIiNkYTVhYmQiLCIjNGQ3ZmU2IiwiI2ZlYzkzNSJdLGs9WyJHcmVlbiIsIlNreSIsIlJlZCIsIlB1cnBsZSIsIkJsdWUiLCJZZWxsb3ciXSxoPTAsZz0wLGI9Yy5sZW5ndGgsYT1FeHQuY2hhcnQudGhlbWUsZD1bWyIjZjBhNTBhIiwiI2MyMDAyNCIsIiMyMDQ0YmEiLCIjODEwMDY1IiwiIzdlYWUyOSJdLFsiIzZkOTgyNCIsIiM4NzE0NmUiLCIjMmE5MTk2IiwiI2QzOTAwNiIsIiMxZTQwYWMiXSxbIiNmYmJjMjkiLCIjY2UyZTRlIiwiIzdlMDA2MiIsIiMxNThiOTAiLCIjNTc4ODBlIl0sWyIjZWY1NzczIiwiI2ZjYmQyYSIsIiM0Zjc3MGQiLCIjMWQzZWFhIiwiIzliMDAxZiJdLFsiIzdlYWUyOSIsIiNmZGJlMmEiLCIjOTEwMDE5IiwiIzI3YjRiYyIsIiNkNzRkYmMiXSxbIiM0NGRjZTEiLCIjMGIyNTkyIiwiIzk5NmUwNSIsIiM3ZmIzMjUiLCIjYjgyMWExIl1dLGU9ZC5sZW5ndGg7Zm9yKDtoPGI7aCsrKXthW2tbaF1dPShmdW5jdGlvbihpKXtyZXR1cm4gRXh0LmV4dGVuZChhLkJhc2Use2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGope2EuQmFzZS5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLEV4dC5hcHBseSh7YmFzZUNvbG9yOml9LGopKX19KX0oY1toXSkpfWZvcihoPTA7aDxlO2grKyl7YVsiQ2F0ZWdvcnkiKyhoKzEpXT0oZnVuY3Rpb24oaSl7cmV0dXJuIEV4dC5leHRlbmQoYS5CYXNlLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihqKXthLkJhc2UucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxFeHQuYXBwbHkoe2NvbG9yczppfSxqKSl9fSl9KGRbaF0pKX19KTtFeHQuZGVmaW5lKCJFeHQuY2hhcnQuTWFza0xheWVyIix7ZXh0ZW5kOiJFeHQuQ29tcG9uZW50Iixjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXthPUV4dC5hcHBseShhfHx7fSx7c3R5bGU6InBvc2l0aW9uOmFic29sdXRlO2JhY2tncm91bmQtY29sb3I6Izg4ODtjdXJzb3I6bW92ZTtvcGFjaXR5OjAuNjtib3JkZXI6MXB4IHNvbGlkICMyMjI7In0pO3RoaXMuY2FsbFBhcmVudChbYV0pfSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLmFkZEV2ZW50cygibW91c2Vkb3duIiwibW91c2V1cCIsIm1vdXNlbW92ZSIsIm1vdXNlZW50ZXIiLCJtb3VzZWxlYXZlIil9LGluaXREcmFnZ2FibGU6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLmRkLm9uU3RhcnQ9ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhPWIuY29tcDt0aGlzLnN0YXJ0UG9zaXRpb249YS5nZXRQb3NpdGlvbih0cnVlKTtpZihhLmdob3N0JiYhYS5saXZlRHJhZyl7Yi5wcm94eT1hLmdob3N0KCk7Yi5kcmFnVGFyZ2V0PWIucHJveHkuaGVhZGVyLmVsfWlmKGIuY29uc3RyYWlufHxiLmNvbnN0cmFpbkRlbGVnYXRlKXtiLmNvbnN0cmFpblRvPWIuY2FsY3VsYXRlQ29uc3RyYWluUmVnaW9uKCl9fX19KTtFeHQuZGVmaW5lKCJFeHQuY2hhcnQuTWFzayIse3JlcXVpcmVzOlsiRXh0LmNoYXJ0Lk1hc2tMYXllciJdLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsYjtjLmFkZEV2ZW50cygic2VsZWN0Iik7aWYoYSl7RXh0LmFwcGx5KGMsYSl9aWYoYy5lbmFibGVNYXNrKXtjLm9uKCJhZnRlcnJlbmRlciIsZnVuY3Rpb24oKXt2YXIgZD1uZXcgRXh0LmNoYXJ0Lk1hc2tMYXllcih7cmVuZGVyVG86Yy5lbCxoaWRkZW46dHJ1ZX0pO2QuZWwub24oe21vdXNlbW92ZTpmdW5jdGlvbihnKXtjLm9uTW91c2VNb3ZlKGcpfSxtb3VzZXVwOmZ1bmN0aW9uKGcpe2MucmVzaXplZChnKX19KTtiPW5ldyBFeHQucmVzaXplci5SZXNpemVyKHtlbDpkLmVsLGhhbmRsZXM6ImFsbCIscGlubmVkOnRydWV9KTtiLm9uKHtyZXNpemU6ZnVuY3Rpb24oZyl7Yy5yZXNpemVkKGcpfX0pO2QuaW5pdERyYWdnYWJsZSgpO2MubWFza1R5cGU9Yy5tYXNrO2MubWFzaz1kO2MubWFza1Nwcml0ZT1jLnN1cmZhY2UuYWRkKHt0eXBlOiJwYXRoIixwYXRoOlsiTSIsMCwwXSx6SW5kZXg6MTAwMSxvcGFjaXR5OjAuNyxoaWRkZW46dHJ1ZSxzdHJva2U6IiM0NDQifSl9LGMse3NpbmdsZTp0cnVlfSl9fSxyZXNpemVkOmZ1bmN0aW9uKGQpe3ZhciBnPXRoaXMsbD1nLmJib3h8fGcuY2hhcnRCQm94LGo9bC54LGk9bC55LGE9bC53aWR0aCxtPWwuaGVpZ2h0LGM9Zy5tYXNrLmdldEJveCh0cnVlKSxoPU1hdGgubWF4LGI9TWF0aC5taW4sbj1jLngtaixrPWMueS1pO249aChuLGopO2s9aChrLGkpO249YihuLGEpO2s9YihrLG0pO2MueD1uO2MueT1rO2cuZmlyZUV2ZW50KCJzZWxlY3QiLGcsYyl9LG9uTW91c2VVcDpmdW5jdGlvbihjKXt2YXIgYT10aGlzLGQ9YS5iYm94fHxhLmNoYXJ0QkJveCxiPWEubWFza1NlbGVjdGlvbjthLm1hc2tNb3VzZURvd249ZmFsc2U7YS5tb3VzZURvd249ZmFsc2U7aWYoYS5tb3VzZU1vdmVkKXthLm9uTW91c2VNb3ZlKGMpO2EubW91c2VNb3ZlZD1mYWxzZTthLmZpcmVFdmVudCgic2VsZWN0IixhLHt4OmIueC1kLngseTpiLnktZC55LHdpZHRoOmIud2lkdGgsaGVpZ2h0OmIuaGVpZ2h0fSl9fSxvbk1vdXNlRG93bjpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2EubW91c2VEb3duPXRydWU7YS5tb3VzZU1vdmVkPWZhbHNlO2EubWFza01vdXNlRG93bj17eDpiLmdldFBhZ2VYKCktYS5lbC5nZXRYKCkseTpiLmdldFBhZ2VZKCktYS5lbC5nZXRZKCl9fSxvbk1vdXNlTW92ZTpmdW5jdGlvbih0KXt2YXIgdT10aGlzLG89dS5tYXNrVHlwZSxhPXUuYmJveHx8dS5jaGFydEJCb3gsaT1hLngsaD1hLnksYj1NYXRoLHE9Yi5mbG9vcixqPWIuYWJzLG49Yi5taW4scD1iLm1heCxrPXEoaCthLmhlaWdodCksbT1xKGkrYS53aWR0aCksZD10LmdldFBhZ2VYKCksYz10LmdldFBhZ2VZKCkscz1kLXUuZWwuZ2V0WCgpLHI9Yy11LmVsLmdldFkoKSxnPXUubWFza01vdXNlRG93bixsO3UubW91c2VNb3ZlZD11Lm1vdXNlRG93bjtzPXAocyxpKTtyPXAocixoKTtzPW4ocyxtKTtyPW4ocixrKTtpZihnJiZ1Lm1vdXNlRG93bil7aWYobz09Imhvcml6b250YWwiKXtyPWg7Zy55PWs7Yz11LmVsLmdldFkoKSthLmhlaWdodCt1Lmluc2V0UGFkZGluZ31lbHNle2lmKG89PSJ2ZXJ0aWNhbCIpe3M9aTtnLng9bX19bT1nLngtcztrPWcueS1yO2w9WyJNIixzLHIsImwiLG0sMCwwLGssLW0sMCwieiJdO3UubWFza1NlbGVjdGlvbj17eDptPjA/czpzK20seTprPjA/cjpyK2ssd2lkdGg6aihtKSxoZWlnaHQ6aihrKX07dS5tYXNrLnVwZGF0ZUJveCh1Lm1hc2tTZWxlY3Rpb24pO3UubWFzay5zaG93KCk7dS5tYXNrU3ByaXRlLnNldEF0dHJpYnV0ZXMoe2hpZGRlbjp0cnVlfSx0cnVlKX1lbHNle2lmKG89PSJob3Jpem9udGFsIil7bD1bIk0iLHMsaCwiTCIscyxrXX1lbHNle2lmKG89PSJ2ZXJ0aWNhbCIpe2w9WyJNIixpLHIsIkwiLG0scl19ZWxzZXtsPVsiTSIscyxoLCJMIixzLGssIk0iLGksciwiTCIsbSxyXX19dS5tYXNrU3ByaXRlLnNldEF0dHJpYnV0ZXMoe3BhdGg6bCxmaWxsOnUubWFza01vdXNlRG93bj91Lm1hc2tTcHJpdGUuc3Ryb2tlOmZhbHNlLCJzdHJva2Utd2lkdGgiOm89PT10cnVlPzE6MyxoaWRkZW46ZmFsc2V9LHRydWUpfX0sb25Nb3VzZUxlYXZlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5tb3VzZU1vdmVkPWZhbHNlO2EubW91c2VEb3duPWZhbHNlO2EubWFza01vdXNlRG93bj1mYWxzZTthLm1hc2suaGlkZSgpO2EubWFza1Nwcml0ZS5oaWRlKHRydWUpfX0pO0V4dC5kZWZpbmUoIkV4dC5jaGFydC5OYXZpZ2F0aW9uIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXt0aGlzLm9yaWdpbmFsU3RvcmU9dGhpcy5zdG9yZX0sc2V0Wm9vbTpmdW5jdGlvbihrKXt2YXIgaj10aGlzLGc9ai5heGVzLGE9Zy5pdGVtcyxlLGgsYyxwPWouY2hhcnRCQm94LG89MS9wLndpZHRoLGI9MS9wLmhlaWdodCxkPXt4OmsueCpvLHk6ay55KmIsd2lkdGg6ay53aWR0aCpvLGhlaWdodDprLmhlaWdodCpifSxsLG4sbTtmb3IoZT0wLGg9YS5sZW5ndGg7ZTxoO2UrKyl7Yz1hW2VdO2w9Yy5jYWxjRW5kcygpO2lmKGMucG9zaXRpb249PSJib3R0b20ifHxjLnBvc2l0aW9uPT0idG9wIil7bj0obC50by1sLmZyb20pKmQueCtsLmZyb207bT0obC50by1sLmZyb20pKmQud2lkdGgrbjtjLm1pbmltdW09bjtjLm1heGltdW09bX1lbHNle209KGwudG8tbC5mcm9tKSooMS1kLnkpK2wuZnJvbTtuPW0tKGwudG8tbC5mcm9tKSpkLmhlaWdodDtjLm1pbmltdW09bjtjLm1heGltdW09bX19ai5yZWRyYXcoZmFsc2UpfSxyZXN0b3JlWm9vbTpmdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxTdG9yZSl7dGhpcy5zdG9yZT10aGlzLnN1YnN0b3JlPXRoaXMub3JpZ2luYWxTdG9yZTt0aGlzLnJlZHJhdyh0cnVlKX19fSk7RXh0LmRlZmluZSgiRXh0LmNoYXJ0LkNoYXJ0Iix7YWxpYXM6IndpZGdldC5jaGFydCIsZXh0ZW5kOiJFeHQuZHJhdy5Db21wb25lbnQiLG1peGluczp7dGhlbWVNYW5hZ2VyOiJFeHQuY2hhcnQudGhlbWUuVGhlbWUiLG1hc2s6IkV4dC5jaGFydC5NYXNrIixuYXZpZ2F0aW9uOiJFeHQuY2hhcnQuTmF2aWdhdGlvbiIsYmluZGFibGU6IkV4dC51dGlsLkJpbmRhYmxlIixvYnNlcnZhYmxlOiJFeHQudXRpbC5PYnNlcnZhYmxlIn0sdXNlczpbIkV4dC5jaGFydC5zZXJpZXMuU2VyaWVzIl0scmVxdWlyZXM6WyJFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24iLCJFeHQuZGF0YS5TdG9yZU1hbmFnZXIiLCJFeHQuY2hhcnQuTGVnZW5kIiwiRXh0LmNoYXJ0LnRoZW1lLkJhc2UiLCJFeHQuY2hhcnQudGhlbWUuVGhlbWUiLCJFeHQudXRpbC5EZWxheWVkVGFzayJdLHZpZXdCb3g6ZmFsc2UsYW5pbWF0ZTpmYWxzZSxsZWdlbmQ6ZmFsc2UsaW5zZXRQYWRkaW5nOjEwLGVuZ2luZVByaW9yaXR5OlsiU3ZnIiwiVm1sIl0sYmFja2dyb3VuZDpmYWxzZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihiKXt2YXIgYz10aGlzLGE7Yj1FeHQuYXBwbHkoe30sYik7Yy5pbml0VGhlbWUoYi50aGVtZXx8Yy50aGVtZSk7aWYoYy5ncmFkaWVudHMpe0V4dC5hcHBseShiLHtncmFkaWVudHM6Yy5ncmFkaWVudHN9KX1pZihjLmJhY2tncm91bmQpe0V4dC5hcHBseShiLHtiYWNrZ3JvdW5kOmMuYmFja2dyb3VuZH0pfWlmKGIuYW5pbWF0ZSl7YT17ZWFzaW5nOiJlYXNlIixkdXJhdGlvbjo1MDB9O2lmKEV4dC5pc09iamVjdChiLmFuaW1hdGUpKXtiLmFuaW1hdGU9RXh0LmFwcGx5SWYoYi5hbmltYXRlLGEpfWVsc2V7Yi5hbmltYXRlPWF9fWMubWl4aW5zLm9ic2VydmFibGUuY29uc3RydWN0b3IuY2FsbChjLGIpO2lmKGIuZW5hYmxlTWFzayl7Yy5taXhpbnMubWFzay5jb25zdHJ1Y3Rvci5jYWxsKGMpfWMubWl4aW5zLm5hdmlnYXRpb24uY29uc3RydWN0b3IuY2FsbChjKTtjLmNhbGxQYXJlbnQoW2JdKX0sZ2V0Q2hhcnRTdG9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN1YnN0b3JlfHx0aGlzLnN0b3JlfSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjLGE7Yi5jYWxsUGFyZW50KCk7Yi5hZGRFdmVudHMoIml0ZW1tb3VzZWRvd24iLCJpdGVtbW91c2V1cCIsIml0ZW1tb3VzZW92ZXIiLCJpdGVtbW91c2VvdXQiLCJpdGVtY2xpY2siLCJpdGVtZGJsY2xpY2siLCJpdGVtZHJhZ3N0YXJ0IiwiaXRlbWRyYWciLCJpdGVtZHJhZ2VuZCIsImJlZm9yZXJlZnJlc2giLCJyZWZyZXNoIik7RXh0LmFwcGx5SWYoYix7em9vbTp7d2lkdGg6MSxoZWlnaHQ6MSx4OjAseTowfX0pO2IubWF4R3V0dGVyPVswLDBdO2Iuc3RvcmU9RXh0LmRhdGEuU3RvcmVNYW5hZ2VyLmxvb2t1cChiLnN0b3JlKTtjPWIuYXhlcztiLmF4ZXM9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbihmYWxzZSxmdW5jdGlvbihkKXtyZXR1cm4gZC5wb3NpdGlvbn0pO2lmKGMpe2IuYXhlcy5hZGRBbGwoYyl9YT1iLnNlcmllcztiLnNlcmllcz1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKGZhbHNlLGZ1bmN0aW9uKGQpe3JldHVybiBkLnNlcmllc0lkfHwoZC5zZXJpZXNJZD1FeHQuaWQobnVsbCwiZXh0LWNoYXJ0LXNlcmllcy0iKSl9KTtpZihhKXtiLnNlcmllcy5hZGRBbGwoYSl9aWYoYi5sZWdlbmQhPT1mYWxzZSl7Yi5sZWdlbmQ9bmV3IEV4dC5jaGFydC5MZWdlbmQoRXh0LmFwcGx5SWYoe2NoYXJ0OmJ9LGIubGVnZW5kKSl9Yi5vbih7bW91c2Vtb3ZlOmIub25Nb3VzZU1vdmUsbW91c2VsZWF2ZTpiLm9uTW91c2VMZWF2ZSxtb3VzZWRvd246Yi5vbk1vdXNlRG93bixtb3VzZXVwOmIub25Nb3VzZVVwLGNsaWNrOmIub25DbGljayxkYmxjbGljazpiLm9uRGJsQ2xpY2ssc2NvcGU6Yn0pfSxhZnRlckNvbXBvbmVudExheW91dDpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXM7aWYoRXh0LmlzTnVtYmVyKGIpJiZFeHQuaXNOdW1iZXIoYSkpe2lmKGIhPT1jLmN1cldpZHRofHxhIT09Yy5jdXJIZWlnaHQpe2MuY3VyV2lkdGg9YjtjLmN1ckhlaWdodD1hO2MucmVkcmF3KHRydWUpfWVsc2V7aWYoYy5uZWVkc1JlZHJhdyl7ZGVsZXRlIGMubmVlZHNSZWRyYXc7Yy5yZWRyYXcoKX19fXRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxyZWRyYXc6ZnVuY3Rpb24oYil7dmFyIGg9dGhpcyxnPWguc2VyaWVzLml0ZW1zLGQ9Zy5sZW5ndGgsYT1oLmF4ZXMuaXRlbXMsYz1hLmxlbmd0aCxlLGs9aC5jaGFydEJCb3g9e3g6MCx5OjAsaGVpZ2h0OmguY3VySGVpZ2h0LHdpZHRoOmguY3VyV2lkdGh9LGo9aC5sZWdlbmQ7aC5zdXJmYWNlLnNldFNpemUoay53aWR0aCxrLmhlaWdodCk7Zm9yKGU9MDtlPGQ7ZSsrKXtoLmluaXRpYWxpemVTZXJpZXMoZ1tlXSxlKX1mb3IoZT0wO2U8YztlKyspe2guaW5pdGlhbGl6ZUF4aXMoYVtlXSl9Zm9yKGU9MDtlPGM7ZSsrKXthW2VdLnByb2Nlc3NWaWV3KCl9Zm9yKGU9MDtlPGM7ZSsrKXthW2VdLmRyYXdBeGlzKHRydWUpfWlmKGohPT1mYWxzZSYmai52aXNpYmxlKXtpZihqLnVwZGF0ZXx8IWouY3JlYXRlZCl7ai5jcmVhdGUoKX19aC5hbGlnbkF4ZXMoKTtpZihqIT09ZmFsc2UmJmoudmlzaWJsZSl7ai51cGRhdGVQb3NpdGlvbigpfWguZ2V0TWF4R3V0dGVyKCk7aC5yZXNpemluZz0hIWI7Zm9yKGU9MDtlPGM7ZSsrKXthW2VdLmRyYXdBeGlzKCl9Zm9yKGU9MDtlPGQ7ZSsrKXtoLmRyYXdDaGFydHMoZ1tlXSl9aC5yZXNpemluZz1mYWxzZX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYixhPXRoaXM7dGhpcy5jYWxsUGFyZW50KCk7aWYoYS5jYXRlZ29yeU5hbWVzKXthLnNldENhdGVnb3J5TmFtZXMoYS5jYXRlZ29yeU5hbWVzKX1pZihhLnRpcFJlbmRlcmVyKXtiPWEuZ2V0RnVuY3Rpb25SZWYoYS50aXBSZW5kZXJlcik7YS5zZXRUaXBSZW5kZXJlcihiLmZuLGIuc2NvcGUpfWEuYmluZFN0b3JlKGEuc3RvcmUsdHJ1ZSk7YS5yZWZyZXNoKCk7aWYoYS5zdXJmYWNlLmVuZ2luZT09PSJWbWwiKXthLm9uKCJhZGRlZCIsYS5vbkFkZGVkVm1sLGEpO2EubW9uKEV4dC5jb250YWluZXIuQ29udGFpbmVyLmhpZXJhcmNoeUV2ZW50U291cmNlLCJhZGRlZCIsYS5vbkNvbnRhaW5lckFkZGVkVm1sLGEpfX0sb25BZGRlZFZtbDpmdW5jdGlvbigpe3RoaXMubmVlZHNSZWRyYXc9dHJ1ZX0sb25Db250YWluZXJBZGRlZFZtbDpmdW5jdGlvbihhKXtpZih0aGlzLmlzRGVzY2VuZGFudE9mKGEpKXt0aGlzLm5lZWRzUmVkcmF3PXRydWV9fSxnZXRFdmVudFhZOmZ1bmN0aW9uKGQpe3ZhciBjPXRoaXMsYj10aGlzLnN1cmZhY2UuZ2V0UmVnaW9uKCksaD1kLmdldFhZKCksYT1oWzBdLWIubGVmdCxnPWhbMV0tYi50b3A7cmV0dXJuW2EsZ119LG9uQ2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5oYW5kbGVDbGljaygiaXRlbWNsaWNrIixhKX0sb25EYmxDbGljazpmdW5jdGlvbihhKXt0aGlzLmhhbmRsZUNsaWNrKCJpdGVtZGJsY2xpY2siLGEpfSxoYW5kbGVDbGljazpmdW5jdGlvbihhLGgpe3ZhciBrPXRoaXMsZz1rLmdldEV2ZW50WFkoaCksZD1rLnNlcmllcy5pdGVtcyxiLGosYyxsO2ZvcihiPTAsaj1kLmxlbmd0aDtiPGo7YisrKXtjPWRbYl07aWYoRXh0LmRyYXcuRHJhdy53aXRoaW5Cb3goZ1swXSxnWzFdLGMuYmJveCkpe2lmKGMuZ2V0SXRlbUZvclBvaW50KXtsPWMuZ2V0SXRlbUZvclBvaW50KGdbMF0sZ1sxXSk7aWYobCl7Yy5maXJlRXZlbnQoYSxsKX19fX19LG9uTW91c2VEb3duOmZ1bmN0aW9uKGspe3ZhciBqPXRoaXMsYT1qLmdldEV2ZW50WFkoayksYj1qLnNlcmllcy5pdGVtcyxkLGgsYyxnO2lmKGouZW5hYmxlTWFzayl7ai5taXhpbnMubWFzay5vbk1vdXNlRG93bi5jYWxsKGosayl9Zm9yKGQ9MCxoPWIubGVuZ3RoO2Q8aDtkKyspe2M9YltkXTtpZihFeHQuZHJhdy5EcmF3LndpdGhpbkJveChhWzBdLGFbMV0sYy5iYm94KSl7aWYoYy5nZXRJdGVtRm9yUG9pbnQpe2c9Yy5nZXRJdGVtRm9yUG9pbnQoYVswXSxhWzFdKTtpZihnKXtjLmZpcmVFdmVudCgiaXRlbW1vdXNlZG93biIsZyl9fX19fSxvbk1vdXNlVXA6ZnVuY3Rpb24oayl7dmFyIGo9dGhpcyxhPWouZ2V0RXZlbnRYWShrKSxiPWouc2VyaWVzLml0ZW1zLGQsaCxjLGc7aWYoai5lbmFibGVNYXNrKXtqLm1peGlucy5tYXNrLm9uTW91c2VVcC5jYWxsKGosayl9Zm9yKGQ9MCxoPWIubGVuZ3RoO2Q8aDtkKyspe2M9YltkXTtpZihFeHQuZHJhdy5EcmF3LndpdGhpbkJveChhWzBdLGFbMV0sYy5iYm94KSl7aWYoYy5nZXRJdGVtRm9yUG9pbnQpe2c9Yy5nZXRJdGVtRm9yUG9pbnQoYVswXSxhWzFdKTtpZihnKXtjLmZpcmVFdmVudCgiaXRlbW1vdXNldXAiLGcpfX19fX0sb25Nb3VzZU1vdmU6ZnVuY3Rpb24oaCl7dmFyIGs9dGhpcyxkPWsuZ2V0RXZlbnRYWShoKSxjPWsuc2VyaWVzLml0ZW1zLGEsaixiLG4sbCxnLG07aWYoay5lbmFibGVNYXNrKXtrLm1peGlucy5tYXNrLm9uTW91c2VNb3ZlLmNhbGwoayxoKX1mb3IoYT0wLGo9Yy5sZW5ndGg7YTxqO2ErKyl7Yj1jW2FdO2lmKEV4dC5kcmF3LkRyYXcud2l0aGluQm94KGRbMF0sZFsxXSxiLmJib3gpKXtpZihiLmdldEl0ZW1Gb3JQb2ludCl7bj1iLmdldEl0ZW1Gb3JQb2ludChkWzBdLGRbMV0pO2w9Yi5fbGFzdEl0ZW1Gb3JQb2ludDtnPWIuX2xhc3RTdG9yZUl0ZW07bT1iLl9sYXN0U3RvcmVGaWVsZDtpZihuIT09bHx8biYmKG4uc3RvcmVJdGVtIT1nfHxuLnN0b3JlRmllbGQhPW0pKXtpZihsKXtiLmZpcmVFdmVudCgiaXRlbW1vdXNlb3V0IixsKTtkZWxldGUgYi5fbGFzdEl0ZW1Gb3JQb2ludDtkZWxldGUgYi5fbGFzdFN0b3JlRmllbGQ7ZGVsZXRlIGIuX2xhc3RTdG9yZUl0ZW19aWYobil7Yi5maXJlRXZlbnQoIml0ZW1tb3VzZW92ZXIiLG4pO2IuX2xhc3RJdGVtRm9yUG9pbnQ9bjtiLl9sYXN0U3RvcmVJdGVtPW4uc3RvcmVJdGVtO2IuX2xhc3RTdG9yZUZpZWxkPW4uc3RvcmVGaWVsZH19fX1lbHNle2w9Yi5fbGFzdEl0ZW1Gb3JQb2ludDtpZihsKXtiLmZpcmVFdmVudCgiaXRlbW1vdXNlb3V0IixsKTtkZWxldGUgYi5fbGFzdEl0ZW1Gb3JQb2ludDtkZWxldGUgYi5fbGFzdFN0b3JlRmllbGQ7ZGVsZXRlIGIuX2xhc3RTdG9yZUl0ZW19fX19LG9uTW91c2VMZWF2ZTpmdW5jdGlvbihoKXt2YXIgZz10aGlzLGE9Zy5zZXJpZXMuaXRlbXMsYyxkLGI7aWYoZy5lbmFibGVNYXNrKXtnLm1peGlucy5tYXNrLm9uTW91c2VMZWF2ZS5jYWxsKGcsaCl9Zm9yKGM9MCxkPWEubGVuZ3RoO2M8ZDtjKyspe2I9YVtjXTtkZWxldGUgYi5fbGFzdEl0ZW1Gb3JQb2ludH19LGRlbGF5UmVmcmVzaDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoIWEucmVmcmVzaFRhc2spe2EucmVmcmVzaFRhc2s9bmV3IEV4dC51dGlsLkRlbGF5ZWRUYXNrKGEucmVmcmVzaCxhKX1hLnJlZnJlc2hUYXNrLmRlbGF5KGEucmVmcmVzaEJ1ZmZlcil9LHJlZnJlc2g6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEucmVuZGVyZWQmJmEuY3VyV2lkdGghPT11bmRlZmluZWQmJmEuY3VySGVpZ2h0IT09dW5kZWZpbmVkKXtpZighYS5pc1Zpc2libGUodHJ1ZSkmJiFhLnJlZnJlc2hQZW5kaW5nKXthLnNldFNob3dMaXN0ZW5lcnMoIm1vbiIpO2EucmVmcmVzaFBlbmRpbmc9dHJ1ZTtyZXR1cm59aWYoYS5maXJlRXZlbnQoImJlZm9yZXJlZnJlc2giLGEpIT09ZmFsc2Upe2EucmVkcmF3KCk7YS5maXJlRXZlbnQoInJlZnJlc2giLGEpfX19LG9uU2hvdzpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYS5yZWZyZXNoUGVuZGluZyl7YS5kZWxheVJlZnJlc2goKTthLnNldFNob3dMaXN0ZW5lcnMoIm11biIpfWRlbGV0ZSBhLnJlZnJlc2hQZW5kaW5nfSxzZXRTaG93TGlzdGVuZXJzOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YVtiXShFeHQuY29udGFpbmVyLkNvbnRhaW5lci5oaWVyYXJjaHlFdmVudFNvdXJjZSx7c2NvcGU6YSxzaW5nbGU6dHJ1ZSxzaG93OmEuZm9yY2VSZWZyZXNoLGV4cGFuZDphLmZvcmNlUmVmcmVzaH0pfSxmb3JjZVJlZnJlc2g6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihiLmlzRGVzY2VuZGFudE9mKGEpJiZiLnJlZnJlc2hQZW5kaW5nKXtiLnNldFNob3dMaXN0ZW5lcnMoIm11biIpO2IuZGVsYXlSZWZyZXNoKCl9ZGVsZXRlIGIucmVmcmVzaFBlbmRpbmd9LGJpbmRTdG9yZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7Yy5taXhpbnMuYmluZGFibGUuYmluZFN0b3JlLmFwcGx5KGMsYXJndW1lbnRzKTtpZihjLnN0b3JlJiYhYil7Yy5yZWZyZXNoKCl9fSxnZXRTdG9yZUxpc3RlbmVyczpmdW5jdGlvbigpe3ZhciBiPXRoaXMucmVmcmVzaCxhPXRoaXMuZGVsYXlSZWZyZXNoO3JldHVybntyZWZyZXNoOmIsYWRkOmEscmVtb3ZlOmEsdXBkYXRlOmEsY2xlYXI6Yn19LGluaXRpYWxpemVBeGlzOmZ1bmN0aW9uKGIpe3ZhciBlPXRoaXMsaz1lLmNoYXJ0QkJveCxqPWsud2lkdGgsZD1rLmhlaWdodCxpPWsueCxnPWsueSxjPWUudGhlbWVBdHRycyxhPXtjaGFydDplfTtpZihjKXthLmF4aXNTdHlsZT1FeHQuYXBwbHkoe30sYy5heGlzKTthLmF4aXNMYWJlbExlZnRTdHlsZT1FeHQuYXBwbHkoe30sYy5heGlzTGFiZWxMZWZ0KTthLmF4aXNMYWJlbFJpZ2h0U3R5bGU9RXh0LmFwcGx5KHt9LGMuYXhpc0xhYmVsUmlnaHQpO2EuYXhpc0xhYmVsVG9wU3R5bGU9RXh0LmFwcGx5KHt9LGMuYXhpc0xhYmVsVG9wKTthLmF4aXNMYWJlbEJvdHRvbVN0eWxlPUV4dC5hcHBseSh7fSxjLmF4aXNMYWJlbEJvdHRvbSk7YS5heGlzVGl0bGVMZWZ0U3R5bGU9RXh0LmFwcGx5KHt9LGMuYXhpc1RpdGxlTGVmdCk7YS5heGlzVGl0bGVSaWdodFN0eWxlPUV4dC5hcHBseSh7fSxjLmF4aXNUaXRsZVJpZ2h0KTthLmF4aXNUaXRsZVRvcFN0eWxlPUV4dC5hcHBseSh7fSxjLmF4aXNUaXRsZVRvcCk7YS5heGlzVGl0bGVCb3R0b21TdHlsZT1FeHQuYXBwbHkoe30sYy5heGlzVGl0bGVCb3R0b20pfXN3aXRjaChiLnBvc2l0aW9uKXtjYXNlInRvcCI6RXh0LmFwcGx5KGEse2xlbmd0aDpqLHdpZHRoOmQseDppLHk6Z30pO2JyZWFrO2Nhc2UiYm90dG9tIjpFeHQuYXBwbHkoYSx7bGVuZ3RoOmosd2lkdGg6ZCx4OmkseTpkfSk7YnJlYWs7Y2FzZSJsZWZ0IjpFeHQuYXBwbHkoYSx7bGVuZ3RoOmQsd2lkdGg6aix4OmkseTpkfSk7YnJlYWs7Y2FzZSJyaWdodCI6RXh0LmFwcGx5KGEse2xlbmd0aDpkLHdpZHRoOmoseDpqLHk6ZH0pO2JyZWFrfWlmKCFiLmNoYXJ0KXtFeHQuYXBwbHkoYSxiKTtiPWUuYXhlcy5yZXBsYWNlKEV4dC5jcmVhdGVCeUFsaWFzKCJheGlzLiIrYi50eXBlLnRvTG93ZXJDYXNlKCksYSkpfWVsc2V7RXh0LmFwcGx5KGIsYSl9fSxhbGlnbkF4ZXM6ZnVuY3Rpb24oKXt2YXIgbD10aGlzLGs9bC5heGVzLGE9ay5pdGVtcyxlLHA9bC5sZWdlbmQsZz1bInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCJdLGIsaCxqLHIsbz1sLmluc2V0UGFkZGluZyxkPXt0b3A6byxyaWdodDpvLGJvdHRvbTpvLGxlZnQ6b30sbixxLG07ZnVuY3Rpb24gYyh0KXt2YXIgcz1rLmZpbmRJbmRleCgicG9zaXRpb24iLHQpO3JldHVybihzPDApP251bGw6ay5nZXRBdChzKX1mb3IoaD0wLGo9Zy5sZW5ndGg7aDxqO2grKyl7Yj1nW2hdO249KGI9PT0ibGVmdCJ8fGI9PT0icmlnaHQiKTtlPWMoYik7aWYocCE9PWZhbHNlKXtpZihwLnBvc2l0aW9uPT09Yil7cT1wLmdldEJCb3goKTtkW2JdKz0obj9xLndpZHRoOnEuaGVpZ2h0KStkW2JdfX1pZihlJiZlLmJib3gpe3E9ZS5iYm94O2RbYl0rPShuP3Eud2lkdGg6cS5oZWlnaHQpfX1yPXt4OmQubGVmdCx5OmQudG9wLHdpZHRoOmwuY3VyV2lkdGgtZC5sZWZ0LWQucmlnaHQsaGVpZ2h0OmwuY3VySGVpZ2h0LWQudG9wLWQuYm90dG9tfTtsLmNoYXJ0QkJveD1yO2ZvcihoPTAsaj1hLmxlbmd0aDtoPGo7aCsrKXtlPWFbaF07bT1lLnBvc2l0aW9uO249KG09PT0ibGVmdCJ8fG09PT0icmlnaHQiKTtlLng9KG09PT0icmlnaHQiP3IueCtyLndpZHRoOnIueCk7ZS55PShtPT09InRvcCI/ci55OnIueStyLmhlaWdodCk7ZS53aWR0aD0obj9yLndpZHRoOnIuaGVpZ2h0KTtlLmxlbmd0aD0obj9yLmhlaWdodDpyLndpZHRoKX19LGluaXRpYWxpemVTZXJpZXM6ZnVuY3Rpb24oaCxrKXt2YXIgaj10aGlzLGQ9ai50aGVtZUF0dHJzLGMsZSxuLHAsbyxtPVtdLGc9MCxiLGE9e2NoYXJ0Omosc2VyaWVzSWQ6aC5zZXJpZXNJZH07aWYoZCl7bj1kLnNlcmllc1RoZW1lcztvPWQubWFya2VyVGhlbWVzO2M9RXh0LmFwcGx5KHt9LGQuc2VyaWVzKTtlPUV4dC5hcHBseSh7fSxkLm1hcmtlcik7YS5zZXJpZXNTdHlsZT1FeHQuYXBwbHkoYyxuW2slbi5sZW5ndGhdKTthLnNlcmllc0xhYmVsU3R5bGU9RXh0LmFwcGx5KHt9LGQuc2VyaWVzTGFiZWwpO2EubWFya2VyU3R5bGU9RXh0LmFwcGx5KGUsb1trJW8ubGVuZ3RoXSk7aWYoZC5jb2xvcnMpe2EuY29sb3JBcnJheVN0eWxlPWQuY29sb3JzfWVsc2V7bT1bXTtmb3IoYj1uLmxlbmd0aDtnPGI7ZysrKXtwPW5bZ107aWYocC5maWxsfHxwLnN0cm9rZSl7bS5wdXNoKHAuZmlsbHx8cC5zdHJva2UpfX1pZihtLmxlbmd0aCl7YS5jb2xvckFycmF5U3R5bGU9bX19YS5zZXJpZXNJZHg9a31pZihoIGluc3RhbmNlb2YgRXh0LmNoYXJ0LnNlcmllcy5TZXJpZXMpe0V4dC5hcHBseShoLGEpfWVsc2V7RXh0LmFwcGx5SWYoYSxoKTtoPWouc2VyaWVzLnJlcGxhY2UoRXh0LmNyZWF0ZUJ5QWxpYXMoInNlcmllcy4iK2gudHlwZS50b0xvd2VyQ2FzZSgpLGEpKX1pZihoLmluaXRpYWxpemUpe2guaW5pdGlhbGl6ZSgpfX0sZ2V0TWF4R3V0dGVyOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcyxhPWcuc2VyaWVzLml0ZW1zLGQsZSxjLGI9WzAsMF0saDtmb3IoZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKyl7Yz1hW2RdO2g9Yy5nZXRHdXR0ZXJzJiZjLmdldEd1dHRlcnMoKXx8WzAsMF07YlswXT1NYXRoLm1heChiWzBdLGhbMF0pO2JbMV09TWF0aC5tYXgoYlsxXSxoWzFdKX1nLm1heEd1dHRlcj1ifSxkcmF3QXhpczpmdW5jdGlvbihhKXthLmRyYXdBeGlzKCl9LGRyYXdDaGFydHM6ZnVuY3Rpb24oYSl7YS50cmlnZ2VyYWZ0ZXJyZW5kZXI9ZmFsc2U7YS5kcmF3U2VyaWVzKCk7aWYoIXRoaXMuYW5pbWF0ZSl7YS5maXJlRXZlbnQoImFmdGVycmVuZGVyIil9fSxzYXZlOmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuZHJhdy5TdXJmYWNlLnNhdmUodGhpcy5zdXJmYWNlLGEpfSxkZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy5zdXJmYWNlKTt0aGlzLmJpbmRTdG9yZShudWxsKTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX19KTtFeHQuZGVmaW5lKCJFeHQuY2hhcnQuSGlnaGxpZ2h0Iix7cmVxdWlyZXM6WyJFeHQuZnguQW5pbSJdLGhpZ2hsaWdodDpmYWxzZSxoaWdobGlnaHRDZmc6e2ZpbGw6IiNmZGQiLCJzdHJva2Utd2lkdGgiOjUsc3Ryb2tlOiIjZjU1In0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7aWYoYS5oaWdobGlnaHQpe2lmKGEuaGlnaGxpZ2h0IT09dHJ1ZSl7dGhpcy5oaWdobGlnaHRDZmc9RXh0Lm1lcmdlKHRoaXMuaGlnaGxpZ2h0Q2ZnLGEuaGlnaGxpZ2h0KX19fSxoaWdobGlnaHRJdGVtOmZ1bmN0aW9uKGspe2lmKCFrKXtyZXR1cm59dmFyIGc9dGhpcyxqPWsuc3ByaXRlLGE9RXh0Lm1lcmdlKHt9LGcuaGlnaGxpZ2h0Q2ZnLGcuaGlnaGxpZ2h0KSxkPWcuY2hhcnQuc3VyZmFjZSxjPWcuY2hhcnQuYW5pbWF0ZSxiLGksaCxlO2lmKCFnLmhpZ2hsaWdodHx8IWp8fGouX2hpZ2hsaWdodGVkKXtyZXR1cm59aWYoai5fYW5pbSl7ai5fYW5pbS5wYXVzZWQ9dHJ1ZX1qLl9oaWdobGlnaHRlZD10cnVlO2lmKCFqLl9kZWZhdWx0cyl7ai5fZGVmYXVsdHM9RXh0LmFwcGx5KHt9LGouYXR0cik7aT17fTtoPXt9O2ZvcihiIGluIGEpe2lmKCEoYiBpbiBqLl9kZWZhdWx0cykpe2ouX2RlZmF1bHRzW2JdPWQuYXZhaWxhYmxlQXR0cnNbYl19aVtiXT1qLl9kZWZhdWx0c1tiXTtoW2JdPWFbYl07aWYoRXh0LmlzT2JqZWN0KGFbYl0pKXtpW2JdPXt9O2hbYl09e307RXh0LmFwcGx5KGouX2RlZmF1bHRzW2JdLGouYXR0cltiXSk7RXh0LmFwcGx5KGlbYl0sai5fZGVmYXVsdHNbYl0pO2ZvcihlIGluIGouX2RlZmF1bHRzW2JdKXtpZighKGUgaW4gYVtiXSkpe2hbYl1bZV09aVtiXVtlXX1lbHNle2hbYl1bZV09YVtiXVtlXX19Zm9yKGUgaW4gYVtiXSl7aWYoIShlIGluIGhbYl0pKXtoW2JdW2VdPWFbYl1bZV19fX19ai5fZnJvbT1pO2ouX3RvPWg7ai5fZW5kU3R5bGU9aH1pZihjKXtqLl9hbmltPW5ldyBFeHQuZnguQW5pbSh7dGFyZ2V0OmosZnJvbTpqLl9mcm9tLHRvOmouX3RvLGR1cmF0aW9uOjE1MH0pfWVsc2V7ai5zZXRBdHRyaWJ1dGVzKGouX3RvLHRydWUpfX0sdW5IaWdobGlnaHRJdGVtOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaGlnaGxpZ2h0fHwhdGhpcy5pdGVtcyl7cmV0dXJufXZhciBqPXRoaXMsaD1qLml0ZW1zLGc9aC5sZW5ndGgsYT1FeHQubWVyZ2Uoe30sai5oaWdobGlnaHRDZmcsai5oaWdobGlnaHQpLGM9ai5jaGFydC5hbmltYXRlLGU9MCxkLGIsaztmb3IoO2U8ZztlKyspe2lmKCFoW2VdKXtjb250aW51ZX1rPWhbZV0uc3ByaXRlO2lmKGsmJmsuX2hpZ2hsaWdodGVkKXtpZihrLl9hbmltKXtrLl9hbmltLnBhdXNlZD10cnVlfWQ9e307Zm9yKGIgaW4gYSl7aWYoRXh0LmlzT2JqZWN0KGsuX2RlZmF1bHRzW2JdKSl7ZFtiXT17fTtFeHQuYXBwbHkoZFtiXSxrLl9kZWZhdWx0c1tiXSl9ZWxzZXtkW2JdPWsuX2RlZmF1bHRzW2JdfX1pZihjKXtrLl9lbmRTdHlsZT1kO2suX2FuaW09bmV3IEV4dC5meC5BbmltKHt0YXJnZXQ6ayx0bzpkLGR1cmF0aW9uOjE1MH0pfWVsc2V7ay5zZXRBdHRyaWJ1dGVzKGQsdHJ1ZSl9ZGVsZXRlIGsuX2hpZ2hsaWdodGVkfX19LGNsZWFuSGlnaGxpZ2h0czpmdW5jdGlvbigpe2lmKCF0aGlzLmhpZ2hsaWdodCl7cmV0dXJufXZhciBkPXRoaXMuZ3JvdXAsYz10aGlzLm1hcmtlckdyb3VwLGI9MCxhO2ZvcihhPWQuZ2V0Q291bnQoKTtiPGE7YisrKXtkZWxldGUgZC5nZXRBdChiKS5fZGVmYXVsdHN9aWYoYyl7Zm9yKGE9Yy5nZXRDb3VudCgpO2I8YTtiKyspe2RlbGV0ZSBjLmdldEF0KGIpLl9kZWZhdWx0c319fX0pO0V4dC5kZWZpbmUoIkV4dC5jaGFydC5MYWJlbCIse3JlcXVpcmVzOlsiRXh0LmRyYXcuQ29sb3IiXSxjb2xvclN0cmluZ1JlOi91cmxccypcKFxzKiMoW15cLyldKylccypcKS8sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLmxhYmVsPUV4dC5hcHBseUlmKGIubGFiZWx8fHt9LHtkaXNwbGF5OiJub25lIixjb2xvcjoiIzAwMCIsZmllbGQ6Im5hbWUiLG1pbk1hcmdpbjo1MCxmb250OiIxMXB4IEhlbHZldGljYSwgc2Fucy1zZXJpZiIsb3JpZW50YXRpb246Imhvcml6b250YWwiLHJlbmRlcmVyOmZ1bmN0aW9uKGMpe3JldHVybiBjfX0pO2lmKGIubGFiZWwuZGlzcGxheSE9PSJub25lIil7Yi5sYWJlbHNHcm91cD1iLmNoYXJ0LnN1cmZhY2UuZ2V0R3JvdXAoYi5zZXJpZXNJZCsiLWxhYmVscyIpfX0scmVuZGVyTGFiZWxzOmZ1bmN0aW9uKCl7dmFyIG89dGhpcyxMPW8uY2hhcnQseD1MLmdyYWRpZW50cyxyPW8uaXRlbXMsSD1MLmFuaW1hdGUsQT1vLmxhYmVsLHU9QS5kaXNwbGF5LHY9QS5jb2xvcixkPVtdLmNvbmNhdChBLmZpZWxkKSxxPW8ubGFiZWxzR3JvdXAsbD0ocXx8MCkmJnEubGVuZ3RoLGI9by5jaGFydC5nZXRDaGFydFN0b3JlKCkscD1iLmdldENvdW50KCksaD0ocnx8MCkmJnIubGVuZ3RoLEQ9aC9wLHo9KHh8fDApJiZ4Lmxlbmd0aCxtPUV4dC5kcmF3LkNvbG9yLEs9W10sbixKLEUsYyx5LEksRyxlLGcsdCx3LEYsTSxzLE4sQyxCLGE7aWYodT09Im5vbmUiKXtyZXR1cm59aWYoaD09MCl7d2hpbGUobC0tKXtLLnB1c2gobCl9fWVsc2V7Zm9yKEo9MCxFPTAsYz0wO0o8cDtKKyspe3k9MDtmb3IoST0wO0k8RDtJKyspe3c9cltFXTtGPXEuZ2V0QXQoYyk7TT1iLmdldEF0KEopO3doaWxlKHRoaXMuX19leGNsdWRlcyYmdGhpcy5fX2V4Y2x1ZGVzW3ldKXt5Kyt9aWYoIXcmJkYpe0YuaGlkZSh0cnVlKTtjKyt9aWYodyYmZFtJXSl7aWYoIUYpe0Y9by5vbkNyZWF0ZUxhYmVsKE0sdyxKLHUsSSx5KX1vLm9uUGxhY2VMYWJlbChGLE0sdyxKLHUsSCxJLHkpO2MrKztpZihBLmNvbnRyYXN0JiZ3LnNwcml0ZSl7cz13LnNwcml0ZTtpZihzLl9lbmRTdHlsZSl7YT1zLl9lbmRTdHlsZS5maWxsfWVsc2V7aWYocy5fdG8pe2E9cy5fdG8uZmlsbH1lbHNle2E9cy5hdHRyLmZpbGx9fWE9YXx8cy5hdHRyLmZpbGw7Tj1tLmZyb21TdHJpbmcoYSk7aWYoYSYmIU4pe2E9YS5tYXRjaChvLmNvbG9yU3RyaW5nUmUpWzFdO2ZvcihHPTA7Rzx6O0crKyl7bj14W0ddO2lmKG4uaWQ9PWEpe3Q9MDtlPTA7Zm9yKGcgaW4gbi5zdG9wcyl7dCsrO2UrPW0uZnJvbVN0cmluZyhuLnN0b3BzW2ddLmNvbG9yKS5nZXRHcmF5c2NhbGUoKX1DPShlL3QpLzI1NTticmVha319fWVsc2V7Qz1OLmdldEdyYXlzY2FsZSgpLzI1NX1pZihGLmlzT3V0c2lkZSl7Qz0xfUI9bS5mcm9tU3RyaW5nKEYuYXR0ci5jb2xvcnx8Ri5hdHRyLmZpbGwpLmdldEhTTCgpO0JbMl09Qz4wLjU/MC4yOjAuODtGLnNldEF0dHJpYnV0ZXMoe2ZpbGw6U3RyaW5nKG0uZnJvbUhTTC5hcHBseSh7fSxCKSl9LHRydWUpfX1FKys7eSsrfX1sPXEubGVuZ3RoO3doaWxlKGw+Yyl7Sy5wdXNoKGMpO2MrK319by5oaWRlTGFiZWxzKEspfSxoaWRlTGFiZWxzOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMubGFiZWxzR3JvdXAsYz0hIWImJmIubGVuZ3RoO2lmKCFhKXtyZXR1cm59aWYoYz09PWZhbHNlKXtjPWEuZ2V0Q291bnQoKTt3aGlsZShjLS0pe2EuZ2V0QXQoYykuaGlkZSh0cnVlKX19ZWxzZXt3aGlsZShjLS0pe2EuZ2V0QXQoYltjXSkuaGlkZSh0cnVlKX19fX0pO0V4dC5kZWZpbmUoIkV4dC5jaGFydC5UaXBTdXJmYWNlIix7ZXh0ZW5kOiJFeHQuZHJhdy5Db21wb25lbnQiLHNwcml0ZUFycmF5OmZhbHNlLHJlbmRlckZpcnN0OnRydWUsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dGhpcy5jYWxsUGFyZW50KFthXSk7aWYoYS5zcHJpdGVzKXt0aGlzLnNwcml0ZUFycmF5PVtdLmNvbmNhdChhLnNwcml0ZXMpO2RlbGV0ZSBhLnNwcml0ZXN9fSxvblJlbmRlcjpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYj0wLGE9MCxkLGU7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7ZT1jLnNwcml0ZUFycmF5O2lmKGMucmVuZGVyRmlyc3QmJmUpe2MucmVuZGVyRmlyc3Q9ZmFsc2U7Zm9yKGE9ZS5sZW5ndGg7YjxhO2IrKyl7ZD1jLnN1cmZhY2UuYWRkKGVbYl0pO2Quc2V0QXR0cmlidXRlcyh7aGlkZGVuOmZhbHNlfSx0cnVlKX19fX0pO0V4dC5kZWZpbmUoIkV4dC5jaGFydC5UaXAiLHtyZXF1aXJlczpbIkV4dC50aXAuVG9vbFRpcCIsIkV4dC5jaGFydC5UaXBTdXJmYWNlIl0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxhLGQsZTtpZihiLnRpcHMpe2MudGlwVGltZW91dD1udWxsO2MudGlwQ29uZmlnPUV4dC5hcHBseSh7fSxiLnRpcHMse3JlbmRlcmVyOkV4dC5lbXB0eUZuLGNvbnN0cmFpblBvc2l0aW9uOnRydWUsYXV0b0hpZGU6dHJ1ZX0pO2MudG9vbHRpcD1uZXcgRXh0LnRpcC5Ub29sVGlwKGMudGlwQ29uZmlnKTtjLmNoYXJ0LnN1cmZhY2Uub24oIm1vdXNlbW92ZSIsYy50b29sdGlwLm9uTW91c2VNb3ZlLGMudG9vbHRpcCk7Yy5jaGFydC5zdXJmYWNlLm9uKCJtb3VzZWxlYXZlIixmdW5jdGlvbigpe2MuaGlkZVRpcCgpfSk7aWYoYy50aXBDb25maWcuc3VyZmFjZSl7YT1jLnRpcENvbmZpZy5zdXJmYWNlO2Q9YS5zcHJpdGVzO2U9bmV3IEV4dC5jaGFydC5UaXBTdXJmYWNlKHtpZDoidGlwU3VyZmFjZUNvbXBvbmVudCIsc3ByaXRlczpkfSk7aWYoYS53aWR0aCYmYS5oZWlnaHQpe2Uuc2V0U2l6ZShhLndpZHRoLGEuaGVpZ2h0KX1jLnRvb2x0aXAuYWRkKGUpO2Muc3ByaXRlVGlwPWV9fX0sc2hvd1RpcDpmdW5jdGlvbihsKXt2YXIgZT10aGlzLG0sYSxjLGQsayxiLGosaCxpLGc7aWYoIWUudG9vbHRpcCl7cmV0dXJufWNsZWFyVGltZW91dChlLnRpcFRpbWVvdXQpO209ZS50b29sdGlwO2E9ZS5zcHJpdGVUaXA7Yz1lLnRpcENvbmZpZztkPW0udHJhY2tNb3VzZTtpZighZCl7bS50cmFja01vdXNlPXRydWU7az1sLnNwcml0ZTtiPWsuc3VyZmFjZTtqPUV4dC5nZXQoYi5nZXRJZCgpKTtpZihqKXtoPWouZ2V0WFkoKTtpPWhbMF0rKGsuYXR0ci54fHwwKSsoay5hdHRyLnRyYW5zbGF0aW9uJiZrLmF0dHIudHJhbnNsYXRpb24ueHx8MCk7Zz1oWzFdKyhrLmF0dHIueXx8MCkrKGsuYXR0ci50cmFuc2xhdGlvbiYmay5hdHRyLnRyYW5zbGF0aW9uLnl8fDApO20udGFyZ2V0WFk9W2ksZ119fWlmKGEpe2MucmVuZGVyZXIuY2FsbChtLGwuc3RvcmVJdGVtLGwsYS5zdXJmYWNlKX1lbHNle2MucmVuZGVyZXIuY2FsbChtLGwuc3RvcmVJdGVtLGwpfW0uc2hvdygpO20udHJhY2tNb3VzZT1kfSxoaWRlVGlwOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMudG9vbHRpcDtpZighYil7cmV0dXJufWNsZWFyVGltZW91dCh0aGlzLnRpcFRpbWVvdXQpO3RoaXMudGlwVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5oaWRlKCl9LDApfX0pO0V4dC5kZWZpbmUoIkV4dC5jaGFydC5heGlzLkFic3RyYWN0Iix7cmVxdWlyZXM6WyJFeHQuY2hhcnQuQ2hhcnQiXSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXthPWF8fHt9O3ZhciBiPXRoaXMsYz1hLnBvc2l0aW9ufHwibGVmdCI7Yz1jLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Muc3Vic3RyaW5nKDEpO2EubGFiZWw9RXh0LmFwcGx5KGFbImF4aXNMYWJlbCIrYysiU3R5bGUiXXx8e30sYS5sYWJlbHx8e30pO2EuYXhpc1RpdGxlU3R5bGU9RXh0LmFwcGx5KGFbImF4aXNUaXRsZSIrYysiU3R5bGUiXXx8e30sYS5sYWJlbFRpdGxlfHx7fSk7RXh0LmFwcGx5KGIsYSk7Yi5maWVsZHM9RXh0LkFycmF5LmZyb20oYi5maWVsZHMpO3RoaXMuY2FsbFBhcmVudCgpO2IubGFiZWxzPVtdO2IuZ2V0SWQoKTtiLmxhYmVsR3JvdXA9Yi5jaGFydC5zdXJmYWNlLmdldEdyb3VwKGIuYXhpc0lkKyItbGFiZWxzIil9LGFsaWdubWVudDpudWxsLGdyaWQ6ZmFsc2Usc3RlcHM6MTAseDowLHk6MCxtaW5WYWx1ZTowLG1heFZhbHVlOjAsZ2V0SWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5heGlzSWR8fCh0aGlzLmF4aXNJZD1FeHQuaWQobnVsbCwiZXh0LWF4aXMtIikpfSxwcm9jZXNzVmlldzpFeHQuZW1wdHlGbixkcmF3QXhpczpFeHQuZW1wdHlGbixhZGREaXNwbGF5QW5kTGFiZWxzOkV4dC5lbXB0eUZufSk7RXh0LmRlZmluZSgiRXh0LmNoYXJ0LmF4aXMuQXhpcyIse2V4dGVuZDoiRXh0LmNoYXJ0LmF4aXMuQWJzdHJhY3QiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmNoYXJ0LkF4aXMiLHJlcXVpcmVzOlsiRXh0LmRyYXcuRHJhdyJdLGZvcmNlTWluTWF4OmZhbHNlLGRhc2hTaXplOjMscG9zaXRpb246ImJvdHRvbSIsc2tpcEZpcnN0OmZhbHNlLGxlbmd0aDowLHdpZHRoOjAsYWRqdXN0RW5kOnRydWUsbWFqb3JUaWNrU3RlcHM6ZmFsc2UsYXBwbHlEYXRhOkV4dC5lbXB0eUZuLGdldFJhbmdlOmZ1bmN0aW9uKCl7dmFyIEM9dGhpcyxwPUMuY2hhcnQsbD1wLmdldENoYXJ0U3RvcmUoKSxFPWwuZGF0YS5pdGVtcyxvPXAuc2VyaWVzLml0ZW1zLEQ9Qy5wb3NpdGlvbixxLGE9RXh0LmNoYXJ0LnNlcmllcyx2PVtdLHU9SW5maW5pdHkseT0tSW5maW5pdHksYz1DLnBvc2l0aW9uPT09ImxlZnQifHxDLnBvc2l0aW9uPT09InJpZ2h0Iix6LG4sZCx4LHcsbT1FLmxlbmd0aCxnLEI9e30sdD17fSxBPXRydWUscixoLGUsYixzO3I9Qy5maWVsZHM7Zm9yKHg9MCxuPXIubGVuZ3RoO3g8bjt4Kyspe3Rbclt4XV09dHJ1ZX1mb3Ioej0wLG49by5sZW5ndGg7ejxuO3orKyl7aWYob1t6XS5zZXJpZXNJc0hpZGRlbil7Y29udGludWV9aWYoIW9bel0uZ2V0QXhlc0ZvclhBbmRZRmllbGRzKXtjb250aW51ZX1xPW9bel0uZ2V0QXhlc0ZvclhBbmRZRmllbGRzKCk7aWYocS54QXhpcyYmcS54QXhpcyE9PUQmJnEueUF4aXMmJnEueUF4aXMhPT1EKXtjb250aW51ZX1pZihhLkJhciYmb1t6XSBpbnN0YW5jZW9mIGEuQmFyJiYhb1t6XS5jb2x1bW4pe3I9Yz9FeHQuQXJyYXkuZnJvbShvW3pdLnhGaWVsZCk6RXh0LkFycmF5LmZyb20ob1t6XS55RmllbGQpfWVsc2V7cj1jP0V4dC5BcnJheS5mcm9tKG9bel0ueUZpZWxkKTpFeHQuQXJyYXkuZnJvbShvW3pdLnhGaWVsZCl9aWYoQy5maWVsZHMubGVuZ3RoKXtmb3IoeD0wLGQ9ci5sZW5ndGg7eDxkO3grKyl7aWYodFtyW3hdXSl7YnJlYWt9fWlmKHg9PWQpe2NvbnRpbnVlfX1pZihnPW9bel0uc3RhY2tlZCl7aWYoYS5CYXImJm9bel0gaW5zdGFuY2VvZiBhLkJhcil7aWYob1t6XS5jb2x1bW4hPWMpe2c9ZmFsc2U7QT1mYWxzZX19ZWxzZXtpZighYyl7Zz1mYWxzZTtBPWZhbHNlfX19aWYoZyl7aD17fTtmb3IoeD0wO3g8ci5sZW5ndGg7eCsrKXtpZihBJiZvW3pdLl9fZXhjbHVkZXMmJm9bel0uX19leGNsdWRlc1t4XSl7Y29udGludWV9aWYoIXRbclt4XV0pe0V4dC5Mb2dnZXIud2FybigiRmllbGQgYCIrclt4XSsiYCBpcyBub3QgaW5jbHVkZWQgaW4gdGhlICIrRCsiIGF4aXMgY29uZmlnLiIpfXRbclt4XV09aFtyW3hdXT10cnVlfXYucHVzaCh7ZmllbGRzOmgsdmFsdWU6MH0pfWVsc2V7aWYoIXJ8fHIubGVuZ3RoPT0wKXtyPUMuZmllbGRzfWZvcih4PTA7eDxyLmxlbmd0aDt4Kyspe2lmKEEmJm9bel0uX19leGNsdWRlcyYmb1t6XS5fX2V4Y2x1ZGVzW3hdKXtjb250aW51ZX10W3JbeF1dPUJbclt4XV09dHJ1ZX19fWZvcih6PTA7ejxtO3orKyl7ZT1FW3pdO2Zvcih3PTA7dzx2Lmxlbmd0aDt3Kyspe3Zbd10udmFsdWU9MH1mb3IoYiBpbiB0KXtzPWUuZ2V0KGIpO2lmKGlzTmFOKHMpKXtjb250aW51ZX1pZihzPT09dW5kZWZpbmVkKXtzPTB9aWYoQltiXSl7aWYodT5zKXt1PXN9aWYoeTxzKXt5PXN9fWZvcih3PTA7dzx2Lmxlbmd0aDt3Kyspe2lmKHZbd10uZmllbGRzW2JdKXt2W3ddLnZhbHVlKz1zO2lmKHU+MCl7dT0wfWlmKHk8dlt3XS52YWx1ZSl7eT12W3ddLnZhbHVlfX19fX1pZighaXNGaW5pdGUoeSkpe3k9Qy5wcmV2TWF4fHwwfWlmKCFpc0Zpbml0ZSh1KSl7dT1DLnByZXZNaW58fDB9aWYodSE9eSYmKHkhPU1hdGguZmxvb3IoeSkpKXt5PU1hdGguZmxvb3IoeSkrMX1pZighaXNOYU4oQy5taW5pbXVtKSl7dT1DLm1pbmltdW19aWYoIWlzTmFOKEMubWF4aW11bSkpe3k9Qy5tYXhpbXVtfWlmKHU+PXkpe3k9dSsxfXJldHVybnttaW46dSxtYXg6eX19LGNhbGNFbmRzOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxkPWguZ2V0UmFuZ2UoKSxnPWQubWluLGE9ZC5tYXgsYyxpLGUsYjtjPShFeHQuaXNOdW1iZXIoaC5tYWpvclRpY2tTdGVwcyk/aC5tYWpvclRpY2tTdGVwcysxOmguc3RlcHMpO2k9IShFeHQuaXNOdW1iZXIoaC5tYXhpbXVtKSYmRXh0LmlzTnVtYmVyKGgubWluaW11bSkmJkV4dC5pc051bWJlcihoLm1ham9yVGlja1N0ZXBzKSYmaC5tYWpvclRpY2tTdGVwcz4wKTtlPUV4dC5kcmF3LkRyYXcuc25hcEVuZHMoZyxhLGMsaSk7aWYoRXh0LmlzTnVtYmVyKGgubWF4aW11bSkpe2UudG89aC5tYXhpbXVtO2I9dHJ1ZX1pZihFeHQuaXNOdW1iZXIoaC5taW5pbXVtKSl7ZS5mcm9tPWgubWluaW11bTtiPXRydWV9aWYoaC5hZGp1c3RNYXhpbXVtQnlNYWpvclVuaXQpe2UudG89TWF0aC5jZWlsKGUudG8vZS5zdGVwKSplLnN0ZXA7Yj10cnVlfWlmKGguYWRqdXN0TWluaW11bUJ5TWFqb3JVbml0KXtlLmZyb209TWF0aC5mbG9vcihlLmZyb20vZS5zdGVwKSplLnN0ZXA7Yj10cnVlfWlmKGIpe2Uuc3RlcHM9TWF0aC5jZWlsKChlLnRvLWUuZnJvbSkvZS5zdGVwKX1oLnByZXZNaW49KGc9PWE/MDpnKTtoLnByZXZNYXg9YTtyZXR1cm4gZX0sZHJhd0F4aXM6ZnVuY3Rpb24ocil7dmFyIEM9dGhpcyxzLGo9Qy54LGg9Qy55LEE9Qy5jaGFydC5tYXhHdXR0ZXJbMF0sej1DLmNoYXJ0Lm1heEd1dHRlclsxXSxlPUMuZGFzaFNpemUsdz1DLm1pbm9yVGlja1N0ZXBzfHwwLHY9Qy5taW5vclRpY2tTdGVwc3x8MCxiPUMubGVuZ3RoLEQ9Qy5wb3NpdGlvbixnPVtdLG09ZmFsc2UsYz1DLmFwcGx5RGF0YSgpLGQ9Yy5zdGVwLHQ9Yy5zdGVwcyxxPWMuZnJvbSxhPWMudG8sdSxwLG8sbixsLGssQjtpZihDLmhpZGRlbnx8aXNOYU4oZCl8fChxPmEpKXtyZXR1cm59Qy5mcm9tPWMuZnJvbTtDLnRvPWMudG87aWYoRD09ImxlZnQifHxEPT0icmlnaHQiKXtwPU1hdGguZmxvb3IoaikrMC41O249WyJNIixwLGgsImwiLDAsLWJdO3U9Yi0oeioyKX1lbHNle289TWF0aC5mbG9vcihoKSswLjU7bj1bIk0iLGosbywibCIsYiwwXTt1PWItKEEqMil9Qj10JiZ1L3Q7bD1NYXRoLm1heCh3KzEsMCk7az1NYXRoLm1heCh2KzEsMCk7aWYoQy50eXBlPT0iTnVtZXJpYyJ8fEMudHlwZT09IlRpbWUiKXttPXRydWU7Qy5sYWJlbHM9W2MuZnJvbV19aWYoRD09InJpZ2h0Inx8RD09ImxlZnQiKXtvPWgtejtwPWotKChEPT0ibGVmdCIpKmUqMik7d2hpbGUobz49aC16LXUpe24ucHVzaCgiTSIscCxNYXRoLmZsb29yKG8pKzAuNSwibCIsZSoyKzEsMCk7aWYobyE9aC16KXtmb3Iocz0xO3M8aztzKyspe24ucHVzaCgiTSIscCtlLE1hdGguZmxvb3IobytCKnMvaykrMC41LCJsIixlKzEsMCl9fWcucHVzaChbTWF0aC5mbG9vcihqKSxNYXRoLmZsb29yKG8pXSk7by09QjtpZihtKXtDLmxhYmVscy5wdXNoKEMubGFiZWxzW0MubGFiZWxzLmxlbmd0aC0xXStkKX1pZihCPT09MCl7YnJlYWt9fWlmKE1hdGgucm91bmQobytCLShoLXotdSkpKXtuLnB1c2goIk0iLHAsTWF0aC5mbG9vcihoLWIreikrMC41LCJsIixlKjIrMSwwKTtmb3Iocz0xO3M8aztzKyspe24ucHVzaCgiTSIscCtlLE1hdGguZmxvb3IoaC1iK3orQipzL2spKzAuNSwibCIsZSsxLDApfWcucHVzaChbTWF0aC5mbG9vcihqKSxNYXRoLmZsb29yKG8pXSk7aWYobSl7Qy5sYWJlbHMucHVzaChDLmxhYmVsc1tDLmxhYmVscy5sZW5ndGgtMV0rZCl9fX1lbHNle3A9aitBO289aC0oKEQ9PSJ0b3AiKSplKjIpO3doaWxlKHA8PWorQSt1KXtuLnB1c2goIk0iLE1hdGguZmxvb3IocCkrMC41LG8sImwiLDAsZSoyKzEpO2lmKHAhPWorQSl7Zm9yKHM9MTtzPGw7cysrKXtuLnB1c2goIk0iLE1hdGguZmxvb3IocC1CKnMvbCkrMC41LG8sImwiLDAsZSsxKX19Zy5wdXNoKFtNYXRoLmZsb29yKHApLE1hdGguZmxvb3IoaCldKTtwKz1CO2lmKG0pe0MubGFiZWxzLnB1c2goQy5sYWJlbHNbQy5sYWJlbHMubGVuZ3RoLTFdK2QpfWlmKEI9PT0wKXticmVha319aWYoTWF0aC5yb3VuZChwLUItKGorQSt1KSkpe24ucHVzaCgiTSIsTWF0aC5mbG9vcihqK2ItQSkrMC41LG8sImwiLDAsZSoyKzEpO2ZvcihzPTE7czxsO3MrKyl7bi5wdXNoKCJNIixNYXRoLmZsb29yKGorYi1BLUIqcy9sKSswLjUsbywibCIsMCxlKzEpfWcucHVzaChbTWF0aC5mbG9vcihwKSxNYXRoLmZsb29yKGgpXSk7aWYobSl7Qy5sYWJlbHMucHVzaChDLmxhYmVsc1tDLmxhYmVscy5sZW5ndGgtMV0rZCl9fX1pZihtKXtDLmxhYmVsc1tnLmxlbmd0aC0xXT0rKEMubGFiZWxzW2cubGVuZ3RoLTFdKS50b0ZpeGVkKDEwKX1pZighQy5heGlzKXtDLmF4aXM9Qy5jaGFydC5zdXJmYWNlLmFkZChFeHQuYXBwbHkoe3R5cGU6InBhdGgiLHBhdGg6bn0sQy5heGlzU3R5bGUpKX1DLmF4aXMuc2V0QXR0cmlidXRlcyh7cGF0aDpufSx0cnVlKTtDLmluZmxlY3Rpb25zPWc7aWYoIXImJkMuZ3JpZCl7Qy5kcmF3R3JpZCgpfUMuYXhpc0JCb3g9Qy5heGlzLmdldEJCb3goKTtDLmRyYXdMYWJlbCgpfSxkcmF3R3JpZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMsbz10LmNoYXJ0LnN1cmZhY2UsYj10LmdyaWQsZD1iLm9kZCxlPWIuZXZlbixoPXQuaW5mbGVjdGlvbnMsaj1oLmxlbmd0aC0oKGR8fGUpPzA6MSksdT10LnBvc2l0aW9uLGM9dC5jaGFydC5tYXhHdXR0ZXIsbj10LndpZHRoLTIscCxxLHI9MSxtPVtdLGcsYSxrLGw9W10scz1bXTtpZigoY1sxXSE9PTAmJih1PT0ibGVmdCJ8fHU9PSJyaWdodCIpKXx8KGNbMF0hPT0wJiYodT09InRvcCJ8fHU9PSJib3R0b20iKSkpe3I9MDtqKyt9Zm9yKDtyPGo7cisrKXtwPWhbcl07cT1oW3ItMV07aWYoZHx8ZSl7bT0ociUyKT9sOnM7Zz0oKHIlMik/ZDplKXx8e307YT0oZy5saW5lV2lkdGh8fGdbInN0cm9rZS13aWR0aCJdfHwwKS8yO2s9MiphO2lmKHU9PSJsZWZ0Iil7bS5wdXNoKCJNIixxWzBdKzErYSxxWzFdKzAuNS1hLCJMIixxWzBdKzErbi1hLHFbMV0rMC41LWEsIkwiLHBbMF0rMStuLWEscFsxXSswLjUrYSwiTCIscFswXSsxK2EscFsxXSswLjUrYSwiWiIpfWVsc2V7aWYodT09InJpZ2h0Iil7bS5wdXNoKCJNIixxWzBdLWEscVsxXSswLjUtYSwiTCIscVswXS1uK2EscVsxXSswLjUtYSwiTCIscFswXS1uK2EscFsxXSswLjUrYSwiTCIscFswXS1hLHBbMV0rMC41K2EsIloiKX1lbHNle2lmKHU9PSJ0b3AiKXttLnB1c2goIk0iLHFbMF0rMC41K2EscVsxXSsxK2EsIkwiLHFbMF0rMC41K2EscVsxXSsxK24tYSwiTCIscFswXSswLjUtYSxwWzFdKzErbi1hLCJMIixwWzBdKzAuNS1hLHBbMV0rMSthLCJaIil9ZWxzZXttLnB1c2goIk0iLHFbMF0rMC41K2EscVsxXS1hLCJMIixxWzBdKzAuNSthLHFbMV0tbithLCJMIixwWzBdKzAuNS1hLHBbMV0tbithLCJMIixwWzBdKzAuNS1hLHBbMV0tYSwiWiIpfX19fWVsc2V7aWYodT09ImxlZnQiKXttPW0uY29uY2F0KFsiTSIscFswXSswLjUscFsxXSswLjUsImwiLG4sMF0pfWVsc2V7aWYodT09InJpZ2h0Iil7bT1tLmNvbmNhdChbIk0iLHBbMF0tMC41LHBbMV0rMC41LCJsIiwtbiwwXSl9ZWxzZXtpZih1PT0idG9wIil7bT1tLmNvbmNhdChbIk0iLHBbMF0rMC41LHBbMV0rMC41LCJsIiwwLG5dKX1lbHNle209bS5jb25jYXQoWyJNIixwWzBdKzAuNSxwWzFdLTAuNSwibCIsMCwtbl0pfX19fX1pZihkfHxlKXtpZihsLmxlbmd0aCl7aWYoIXQuZ3JpZE9kZCYmbC5sZW5ndGgpe3QuZ3JpZE9kZD1vLmFkZCh7dHlwZToicGF0aCIscGF0aDpsfSl9dC5ncmlkT2RkLnNldEF0dHJpYnV0ZXMoRXh0LmFwcGx5KHtwYXRoOmwsaGlkZGVuOmZhbHNlfSxkfHx7fSksdHJ1ZSl9aWYocy5sZW5ndGgpe2lmKCF0LmdyaWRFdmVuKXt0LmdyaWRFdmVuPW8uYWRkKHt0eXBlOiJwYXRoIixwYXRoOnN9KX10LmdyaWRFdmVuLnNldEF0dHJpYnV0ZXMoRXh0LmFwcGx5KHtwYXRoOnMsaGlkZGVuOmZhbHNlfSxlfHx7fSksdHJ1ZSl9fWVsc2V7aWYobS5sZW5ndGgpe2lmKCF0LmdyaWRMaW5lcyl7dC5ncmlkTGluZXM9dC5jaGFydC5zdXJmYWNlLmFkZCh7dHlwZToicGF0aCIscGF0aDptLCJzdHJva2Utd2lkdGgiOnQubGluZVdpZHRofHwxLHN0cm9rZTp0LmdyaWRDb2xvcnx8IiNjY2MifSl9dC5ncmlkTGluZXMuc2V0QXR0cmlidXRlcyh7aGlkZGVuOmZhbHNlLHBhdGg6bX0sdHJ1ZSl9ZWxzZXtpZih0LmdyaWRMaW5lcyl7dC5ncmlkTGluZXMuaGlkZSh0cnVlKX19fX0sZ2V0T3JDcmVhdGVMYWJlbDpmdW5jdGlvbihjLGcpe3ZhciBkPXRoaXMsYj1kLmxhYmVsR3JvdXAsZT1iLmdldEF0KGMpLGE9ZC5jaGFydC5zdXJmYWNlO2lmKGUpe2lmKGchPWUuYXR0ci50ZXh0KXtlLnNldEF0dHJpYnV0ZXMoRXh0LmFwcGx5KHt0ZXh0Omd9LGQubGFiZWwpLHRydWUpO2UuX2Jib3g9ZS5nZXRCQm94KCl9fWVsc2V7ZT1hLmFkZChFeHQuYXBwbHkoe2dyb3VwOmIsdHlwZToidGV4dCIseDowLHk6MCx0ZXh0Omd9LGQubGFiZWwpKTthLnJlbmRlckl0ZW0oZSk7ZS5fYmJveD1lLmdldEJCb3goKX1pZihkLmxhYmVsLnJvdGF0aW9uKXtlLnNldEF0dHJpYnV0ZXMoe3JvdGF0aW9uOntkZWdyZWVzOjB9fSx0cnVlKTtlLl91YmJveD1lLmdldEJCb3goKTtlLnNldEF0dHJpYnV0ZXMoZC5sYWJlbCx0cnVlKX1lbHNle2UuX3ViYm94PWUuX2Jib3h9cmV0dXJuIGV9LHJlY3QycG9pbnRBcnJheTpmdW5jdGlvbihsKXt2YXIgYj10aGlzLmNoYXJ0LnN1cmZhY2UsZz1iLmdldEJCb3gobCx0cnVlKSxtPVtnLngsZy55XSxkPW0uc2xpY2UoKSxrPVtnLngrZy53aWR0aCxnLnldLGE9ay5zbGljZSgpLGo9W2cueCtnLndpZHRoLGcueStnLmhlaWdodF0sZT1qLnNsaWNlKCksaT1bZy54LGcueStnLmhlaWdodF0sYz1pLnNsaWNlKCksaD1sLm1hdHJpeDttWzBdPWgueC5hcHBseShoLGQpO21bMV09aC55LmFwcGx5KGgsZCk7a1swXT1oLnguYXBwbHkoaCxhKTtrWzFdPWgueS5hcHBseShoLGEpO2pbMF09aC54LmFwcGx5KGgsZSk7alsxXT1oLnkuYXBwbHkoaCxlKTtpWzBdPWgueC5hcHBseShoLGMpO2lbMV09aC55LmFwcGx5KGgsYyk7cmV0dXJuW20sayxqLGldfSxpbnRlcnNlY3Q6ZnVuY3Rpb24oYyxhKXt2YXIgZD10aGlzLnJlY3QycG9pbnRBcnJheShjKSxiPXRoaXMucmVjdDJwb2ludEFycmF5KGEpO3JldHVybiAhIUV4dC5kcmF3LkRyYXcuaW50ZXJzZWN0KGQsYikubGVuZ3RofSxkcmF3SG9yaXpvbnRhbExhYmVsczpmdW5jdGlvbigpe3ZhciBDPXRoaXMsZT1DLmxhYmVsLHc9TWF0aC5mbG9vcix1PU1hdGgubWF4LHY9Qy5jaGFydC5heGVzLGc9Qy5jaGFydC5pbnNldFBhZGRpbmcsRD1DLnBvc2l0aW9uLGo9Qy5pbmZsZWN0aW9ucyxuPWoubGVuZ3RoLEE9Qy5sYWJlbHMscj0wLGgsYyxzLG8sYixCPUMuYWRqdXN0RW5kLGE9di5maW5kSW5kZXgoInBvc2l0aW9uIiwibGVmdCIpIT0tMSxtPXYuZmluZEluZGV4KCJwb3NpdGlvbiIsInJpZ2h0IikhPS0xLHoscSxsLHAsayx0LGQ7bD1uLTE7cz1qWzBdO2Q9Qy5nZXRPckNyZWF0ZUxhYmVsKDAsQy5sYWJlbC5yZW5kZXJlcihBWzBdKSk7aD1NYXRoLmZsb29yKE1hdGguYWJzKE1hdGguc2luKGUucm90YXRlJiYoZS5yb3RhdGUuZGVncmVlcypNYXRoLlBJLzE4MCl8fDApKSk7Zm9yKHQ9MDt0PG47dCsrKXtzPWpbdF07cT1DLmxhYmVsLnJlbmRlcmVyKEFbdF0pO3o9Qy5nZXRPckNyZWF0ZUxhYmVsKHQscSk7Yz16Ll9iYm94O3I9dShyLGMuaGVpZ2h0K0MuZGFzaFNpemUrQy5sYWJlbC5wYWRkaW5nKTtwPXcoc1swXS0oaD9jLmhlaWdodDpjLndpZHRoKS8yKTtpZihCJiZDLmNoYXJ0Lm1heEd1dHRlclswXT09MCl7aWYodD09MCYmIWEpe3A9c1swXX1lbHNle2lmKHQ9PWwmJiFtKXtwPU1hdGgubWluKHAsc1swXS1jLndpZHRoK2cpfX19aWYoRD09InRvcCIpe2s9c1sxXS0oQy5kYXNoU2l6ZSoyKS1DLmxhYmVsLnBhZGRpbmctKGMuaGVpZ2h0LzIpfWVsc2V7az1zWzFdKyhDLmRhc2hTaXplKjIpK0MubGFiZWwucGFkZGluZysoYy5oZWlnaHQvMil9ei5zZXRBdHRyaWJ1dGVzKHtoaWRkZW46ZmFsc2UseDpwLHk6a30sdHJ1ZSk7aWYodCE9MCYmKEMuaW50ZXJzZWN0KHosbyl8fEMuaW50ZXJzZWN0KHosZCkpKXtpZih0PT09bCYmYiE9PTApe28uaGlkZSh0cnVlKX1lbHNle3ouaGlkZSh0cnVlKTtjb250aW51ZX19bz16O2I9dH1yZXR1cm4gcn0sZHJhd1ZlcnRpY2FsTGFiZWxzOmZ1bmN0aW9uKCl7dmFyIEM9dGhpcyxlPUMuaW5mbGVjdGlvbnMsRD1DLnBvc2l0aW9uLGo9ZS5sZW5ndGgsbz1DLmNoYXJ0LGQ9by5pbnNldFBhZGRpbmcsQj1DLmxhYmVscyx1PTAscj1NYXRoLm1heCx0PU1hdGguZmxvb3IsYz1NYXRoLmNlaWwscz1DLmNoYXJ0LmF4ZXMsdz1DLmNoYXJ0Lm1heEd1dHRlclsxXSxiLHAsayxhLG49cy5maW5kSW5kZXgoInBvc2l0aW9uIiwidG9wIikhPS0xLHY9cy5maW5kSW5kZXgoInBvc2l0aW9uIiwiYm90dG9tIikhPS0xLEE9Qy5hZGp1c3RFbmQseixtLGg9ai0xLGwsZyxxO2ZvcihxPTA7cTxqO3ErKyl7cD1lW3FdO209Qy5sYWJlbC5yZW5kZXJlcihCW3FdKTt6PUMuZ2V0T3JDcmVhdGVMYWJlbChxLG0pO2I9ei5fYmJveDt1PXIodSxiLndpZHRoK0MuZGFzaFNpemUrQy5sYWJlbC5wYWRkaW5nKTtnPXBbMV07aWYoQSYmdzxiLmhlaWdodC8yKXtpZihxPT1oJiYhbil7Zz1NYXRoLm1heChnLEMueS1DLmxlbmd0aCtjKGIuaGVpZ2h0LzIpLWQpfWVsc2V7aWYocT09MCYmIXYpe2c9Qy55K3ctdChiLmhlaWdodC8yKX19fWlmKEQ9PSJsZWZ0Iil7bD1wWzBdLWIud2lkdGgtQy5kYXNoU2l6ZS1DLmxhYmVsLnBhZGRpbmctMn1lbHNle2w9cFswXStDLmRhc2hTaXplK0MubGFiZWwucGFkZGluZysyfXouc2V0QXR0cmlidXRlcyhFeHQuYXBwbHkoe2hpZGRlbjpmYWxzZSx4OmwseTpnfSxDLmxhYmVsKSx0cnVlKTtpZihxIT0wJiZDLmludGVyc2VjdCh6LGspKXtpZihxPT09aCYmYSE9PTApe2suaGlkZSh0cnVlKX1lbHNle3ouaGlkZSh0cnVlKTtjb250aW51ZX19az16O2E9cX1yZXR1cm4gdX0sZHJhd0xhYmVsOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxhPWgucG9zaXRpb24sYj1oLmxhYmVsR3JvdXAsaj1oLmluZmxlY3Rpb25zLGc9MCxlPTAsZCxjO2lmKGE9PSJsZWZ0Inx8YT09InJpZ2h0Iil7Zz1oLmRyYXdWZXJ0aWNhbExhYmVscygpfWVsc2V7ZT1oLmRyYXdIb3Jpem9udGFsTGFiZWxzKCl9ZD1iLmdldENvdW50KCk7Yz1qLmxlbmd0aDtmb3IoO2M8ZDtjKyspe2IuZ2V0QXQoYykuaGlkZSh0cnVlKX1oLmJib3g9e307RXh0LmFwcGx5KGguYmJveCxoLmF4aXNCQm94KTtoLmJib3guaGVpZ2h0PWU7aC5iYm94LndpZHRoPWc7aWYoRXh0LmlzU3RyaW5nKGgudGl0bGUpKXtoLmRyYXdUaXRsZShnLGUpfX0sc2V0VGl0bGU6ZnVuY3Rpb24oYSl7dGhpcy50aXRsZT1hO3RoaXMuZHJhd0xhYmVsKCl9LGRyYXdUaXRsZTpmdW5jdGlvbihsLG0pe3ZhciBoPXRoaXMsZz1oLnBvc2l0aW9uLGI9aC5jaGFydC5zdXJmYWNlLGM9aC5kaXNwbGF5U3ByaXRlLGs9aC50aXRsZSxlPShnPT0ibGVmdCJ8fGc9PSJyaWdodCIpLGo9aC54LGk9aC55LGEsbixkO2lmKGMpe2Muc2V0QXR0cmlidXRlcyh7dGV4dDprfSx0cnVlKX1lbHNle2E9e3R5cGU6InRleHQiLHg6MCx5OjAsdGV4dDprfTtjPWguZGlzcGxheVNwcml0ZT1iLmFkZChFeHQuYXBwbHkoYSxoLmF4aXNUaXRsZVN0eWxlLGgubGFiZWxUaXRsZSkpO2IucmVuZGVySXRlbShjKX1uPWMuZ2V0QkJveCgpO2Q9aC5kYXNoU2l6ZStoLmxhYmVsLnBhZGRpbmc7aWYoZSl7aS09KChoLmxlbmd0aC8yKS0obi5oZWlnaHQvMikpO2lmKGc9PSJsZWZ0Iil7ai09KGwrZCsobi53aWR0aC8yKSl9ZWxzZXtqKz0obCtkK24ud2lkdGgtKG4ud2lkdGgvMikpfWguYmJveC53aWR0aCs9bi53aWR0aCsxMH1lbHNle2orPShoLmxlbmd0aC8yKS0obi53aWR0aCowLjUpO2lmKGc9PSJ0b3AiKXtpLT0obStkKyhuLmhlaWdodCowLjMpKX1lbHNle2krPShtK2QrKG4uaGVpZ2h0KjAuOCkpfWguYmJveC5oZWlnaHQrPW4uaGVpZ2h0KzEwfWMuc2V0QXR0cmlidXRlcyh7dHJhbnNsYXRlOnt4OmoseTppfX0sdHJ1ZSl9fSk7RXh0LmRlZmluZSgiRXh0LmNoYXJ0LmF4aXMuQ2F0ZWdvcnkiLHtleHRlbmQ6IkV4dC5jaGFydC5heGlzLkF4aXMiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmNoYXJ0LkNhdGVnb3J5QXhpcyIsYWxpYXM6ImF4aXMuY2F0ZWdvcnkiLGNhdGVnb3J5TmFtZXM6bnVsbCxjYWxjdWxhdGVDYXRlZ29yeUNvdW50OmZhbHNlLHNldExhYmVsczpmdW5jdGlvbigpe3ZhciBjPXRoaXMuY2hhcnQuZ2V0Q2hhcnRTdG9yZSgpLGo9Yy5kYXRhLml0ZW1zLGssZyxiLGE9dGhpcy5maWVsZHMsaD1hLmxlbmd0aCxlO3RoaXMubGFiZWxzPVtdO2ZvcihrPTAsZz1qLmxlbmd0aDtrPGc7aysrKXtiPWpba107Zm9yKGU9MDtlPGg7ZSsrKXt0aGlzLmxhYmVscy5wdXNoKGIuZ2V0KGFbZV0pKX19fSxhcHBseURhdGE6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt0aGlzLnNldExhYmVscygpO3ZhciBhPXRoaXMuY2hhcnQuZ2V0Q2hhcnRTdG9yZSgpLmdldENvdW50KCk7cmV0dXJue2Zyb206MCx0bzphLTEscG93ZXI6MSxzdGVwOjEsc3RlcHM6YS0xfX19KTtFeHQuZGVmaW5lKCJFeHQuY2hhcnQuYXhpcy5HYXVnZSIse2V4dGVuZDoiRXh0LmNoYXJ0LmF4aXMuQWJzdHJhY3QiLHBvc2l0aW9uOiJnYXVnZSIsYWxpYXM6ImF4aXMuZ2F1Z2UiLGRyYXdBeGlzOmZ1bmN0aW9uKHEpe3ZhciBqPXRoaXMuY2hhcnQsYT1qLnN1cmZhY2UscD1qLmNoYXJ0QkJveCxkPXAueCsocC53aWR0aC8yKSxiPXAueStwLmhlaWdodCxjPXRoaXMubWFyZ2lufHwxMCxtPU1hdGgubWluKHAud2lkdGgsMipwLmhlaWdodCkvMitjLGg9W10sbixsPXRoaXMuc3RlcHMsZSxnPU1hdGguUEksbz1NYXRoLmNvcyxrPU1hdGguc2luO2lmKHRoaXMuc3ByaXRlcyYmIWoucmVzaXppbmcpe3RoaXMuZHJhd0xhYmVsKCk7cmV0dXJufWlmKHRoaXMubWFyZ2luPj0wKXtpZighdGhpcy5zcHJpdGVzKXtmb3IoZT0wO2U8PWw7ZSsrKXtuPWEuYWRkKHt0eXBlOiJwYXRoIixwYXRoOlsiTSIsZCsobS1jKSpvKGUvbCpnLWcpLGIrKG0tYykqayhlL2wqZy1nKSwiTCIsZCttKm8oZS9sKmctZyksYittKmsoZS9sKmctZyksIloiXSxzdHJva2U6IiNjY2MifSk7bi5zZXRBdHRyaWJ1dGVzKHtoaWRkZW46ZmFsc2V9LHRydWUpO2gucHVzaChuKX19ZWxzZXtoPXRoaXMuc3ByaXRlcztmb3IoZT0wO2U8PWw7ZSsrKXtoW2VdLnNldEF0dHJpYnV0ZXMoe3BhdGg6WyJNIixkKyhtLWMpKm8oZS9sKmctZyksYisobS1jKSprKGUvbCpnLWcpLCJMIixkK20qbyhlL2wqZy1nKSxiK20qayhlL2wqZy1nKSwiWiJdLHN0cm9rZToiI2NjYyJ9LHRydWUpfX19dGhpcy5zcHJpdGVzPWg7dGhpcy5kcmF3TGFiZWwoKTtpZih0aGlzLnRpdGxlKXt0aGlzLmRyYXdUaXRsZSgpfX0sZHJhd1RpdGxlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxkPWUuY2hhcnQsYT1kLnN1cmZhY2UsZz1kLmNoYXJ0QkJveCxjPWUudGl0bGVTcHJpdGUsYjtpZighYyl7ZS50aXRsZVNwcml0ZT1jPWEuYWRkKHt0eXBlOiJ0ZXh0Iix6SW5kZXg6Mn0pfWMuc2V0QXR0cmlidXRlcyhFeHQuYXBwbHkoe3RleHQ6ZS50aXRsZX0sZS5sYWJlbHx8e30pLHRydWUpO2I9Yy5nZXRCQm94KCk7Yy5zZXRBdHRyaWJ1dGVzKHt4OmcueCsoZy53aWR0aC8yKS0oYi53aWR0aC8yKSx5OmcueStnLmhlaWdodC0oYi5oZWlnaHQvMiktNH0sdHJ1ZSl9LHNldFRpdGxlOmZ1bmN0aW9uKGEpe3RoaXMudGl0bGU9YTt0aGlzLmRyYXdUaXRsZSgpfSxkcmF3TGFiZWw6ZnVuY3Rpb24oKXt2YXIgbD10aGlzLmNoYXJ0LHA9bC5zdXJmYWNlLGI9bC5jaGFydEJCb3gsaj1iLngrKGIud2lkdGgvMiksaD1iLnkrYi5oZWlnaHQsbT10aGlzLm1hcmdpbnx8MTAsZD1NYXRoLm1pbihiLndpZHRoLDIqYi5oZWlnaHQpLzIrMiptLHU9TWF0aC5yb3VuZCxuPVtdLGcscz10aGlzLm1heGltdW18fDAsaz10aGlzLm1pbmltdW18fDAscj10aGlzLnN0ZXBzLHE9MCx2LHQ9TWF0aC5QSSxjPU1hdGguY29zLGE9TWF0aC5zaW4sZT10aGlzLmxhYmVsLG89ZS5yZW5kZXJlcnx8ZnVuY3Rpb24oaSl7cmV0dXJuIGl9O2lmKCF0aGlzLmxhYmVsQXJyYXkpe2ZvcihxPTA7cTw9cjtxKyspe3Y9KHE9PT0wfHxxPT09cik/NzowO2c9cC5hZGQoe3R5cGU6InRleHQiLHRleHQ6byh1KGsrcS9yKihzLWspKSkseDpqK2QqYyhxL3IqdC10KSx5OmgrZCphKHEvcip0LXQpLXYsInRleHQtYW5jaG9yIjoibWlkZGxlIiwic3Ryb2tlLXdpZHRoIjowLjIsekluZGV4OjEwLHN0cm9rZToiIzMzMyJ9KTtnLnNldEF0dHJpYnV0ZXMoe2hpZGRlbjpmYWxzZX0sdHJ1ZSk7bi5wdXNoKGcpfX1lbHNle249dGhpcy5sYWJlbEFycmF5O2ZvcihxPTA7cTw9cjtxKyspe3Y9KHE9PT0wfHxxPT09cik/NzowO25bcV0uc2V0QXR0cmlidXRlcyh7dGV4dDpvKHUoaytxL3IqKHMtaykpKSx4OmorZCpjKHEvcip0LXQpLHk6aCtkKmEocS9yKnQtdCktdn0sdHJ1ZSl9fXRoaXMubGFiZWxBcnJheT1ufX0pO0V4dC5kZWZpbmUoIkV4dC5jaGFydC5heGlzLk51bWVyaWMiLHtleHRlbmQ6IkV4dC5jaGFydC5heGlzLkF4aXMiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmNoYXJ0Lk51bWVyaWNBeGlzIix0eXBlOiJudW1lcmljIixhbGlhczoiYXhpcy5udW1lcmljIix1c2VzOlsiRXh0LmRhdGEuU3RvcmUiXSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihjKXt2YXIgZD10aGlzLGE9ISEoYy5sYWJlbCYmYy5sYWJlbC5yZW5kZXJlciksYjtkLmNhbGxQYXJlbnQoW2NdKTtiPWQubGFiZWw7aWYoYy5jb25zdHJhaW49PW51bGwpe2QuY29uc3RyYWluPShjLm1pbmltdW0hPW51bGwmJmMubWF4aW11bSE9bnVsbCl9aWYoIWEpe2IucmVuZGVyZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGQucm91bmRUb0RlY2ltYWwoZSxkLmRlY2ltYWxzKX19fSxyb3VuZFRvRGVjaW1hbDpmdW5jdGlvbihhLGMpe3ZhciBiPU1hdGgucG93KDEwLGN8fDApO3JldHVybiBNYXRoLnJvdW5kKGEqYikvYn0sbWluaW11bTpOYU4sbWF4aW11bTpOYU4sY29uc3RyYWluOnRydWUsZGVjaW1hbHM6MixzY2FsZToibGluZWFyIixkb0NvbnN0cmFpbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMsYj10LmNoYXJ0LnN0b3JlLGg9Yi5kYXRhLml0ZW1zLHMsdSxhLGU9dC5jaGFydC5zZXJpZXMuaXRlbXMsaj10LmZpZWxkcyxjPWoubGVuZ3RoLGc9dC5jYWxjRW5kcygpLG09Zy5mcm9tLHA9Zy50byxxLG4scj1mYWxzZSxrLHY9W10sbztmb3IocT0wLG49ZS5sZW5ndGg7cTxuO3ErKyl7aWYoZVtxXS50eXBlPT09ImJhciImJmVbcV0uc3RhY2tlZCl7cmV0dXJufX1mb3Iocz0wLHU9aC5sZW5ndGg7czx1O3MrKyl7bz10cnVlO2E9aFtzXTtmb3IocT0wO3E8YztxKyspe2s9YS5nZXQoaltxXSk7aWYoK2s8K20pe289ZmFsc2U7YnJlYWt9aWYoK2s+K3Ape289ZmFsc2U7YnJlYWt9fWlmKG8pe3YucHVzaChhKX19dC5jaGFydC5zdWJzdG9yZT1FeHQuY3JlYXRlKCJFeHQuZGF0YS5TdG9yZSIse21vZGVsOmIubW9kZWx9KTt0LmNoYXJ0LnN1YnN0b3JlLmxvYWREYXRhKHYpfSxwb3NpdGlvbjoibGVmdCIsYWRqdXN0TWF4aW11bUJ5TWFqb3JVbml0OmZhbHNlLGFkanVzdE1pbmltdW1CeU1ham9yVW5pdDpmYWxzZSxwcm9jZXNzVmlldzpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNvbnN0cmFpbjtpZihiKXthLmRvQ29uc3RyYWluKCl9fSxhcHBseURhdGE6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTtyZXR1cm4gdGhpcy5jYWxjRW5kcygpfX0pO0V4dC5kZWZpbmUoIkV4dC5jaGFydC5heGlzLlJhZGlhbCIse2V4dGVuZDoiRXh0LmNoYXJ0LmF4aXMuQWJzdHJhY3QiLHBvc2l0aW9uOiJyYWRpYWwiLGFsaWFzOiJheGlzLnJhZGlhbCIsZHJhd0F4aXM6ZnVuY3Rpb24odSl7dmFyIG09dGhpcy5jaGFydCxhPW0uc3VyZmFjZSx0PW0uY2hhcnRCQm94LHE9bS5zdG9yZSxiPXEuZ2V0Q291bnQoKSxlPXQueCsodC53aWR0aC8yKSxjPXQueSsodC5oZWlnaHQvMikscD1NYXRoLm1pbih0LndpZHRoLHQuaGVpZ2h0KS8yLGs9W10scixvPXRoaXMuc3RlcHMsZyxkLGg9TWF0aC5QSSoyLHM9TWF0aC5jb3Msbj1NYXRoLnNpbjtpZih0aGlzLnNwcml0ZXMmJiFtLnJlc2l6aW5nKXt0aGlzLmRyYXdMYWJlbCgpO3JldHVybn1pZighdGhpcy5zcHJpdGVzKXtmb3IoZz0xO2c8PW87ZysrKXtyPWEuYWRkKHt0eXBlOiJjaXJjbGUiLHg6ZSx5OmMscmFkaXVzOk1hdGgubWF4KHAqZy9vLDApLHN0cm9rZToiI2NjYyJ9KTtyLnNldEF0dHJpYnV0ZXMoe2hpZGRlbjpmYWxzZX0sdHJ1ZSk7ay5wdXNoKHIpfWZvcihnPTA7ZzxiO2crKyl7cj1hLmFkZCh7dHlwZToicGF0aCIscGF0aDpbIk0iLGUsYywiTCIsZStwKnMoZy9iKmgpLGMrcCpuKGcvYipoKSwiWiJdLHN0cm9rZToiI2NjYyJ9KTtyLnNldEF0dHJpYnV0ZXMoe2hpZGRlbjpmYWxzZX0sdHJ1ZSk7ay5wdXNoKHIpfX1lbHNle2s9dGhpcy5zcHJpdGVzO2ZvcihnPTA7ZzxvO2crKyl7a1tnXS5zZXRBdHRyaWJ1dGVzKHt4OmUseTpjLHJhZGl1czpNYXRoLm1heChwKihnKzEpL28sMCksc3Ryb2tlOiIjY2NjIn0sdHJ1ZSl9Zm9yKGQ9MDtkPGI7ZCsrKXtrW2crZF0uc2V0QXR0cmlidXRlcyh7cGF0aDpbIk0iLGUsYywiTCIsZStwKnMoZC9iKmgpLGMrcCpuKGQvYipoKSwiWiJdLHN0cm9rZToiI2NjYyJ9LHRydWUpfX10aGlzLnNwcml0ZXM9azt0aGlzLmRyYXdMYWJlbCgpfSxkcmF3TGFiZWw6ZnVuY3Rpb24oKXt2YXIgdz10aGlzLmNoYXJ0LGM9dy5zZXJpZXMuaXRlbXMscixCPXcuc3VyZmFjZSxiPXcuY2hhcnRCQm94LGw9dy5zdG9yZSxKPWwuZGF0YS5pdGVtcyxwLGssbz1iLngrKGIud2lkdGgvMiksbj1iLnkrKGIuaGVpZ2h0LzIpLGg9TWF0aC5taW4oYi53aWR0aCxiLmhlaWdodCkvMixGPU1hdGgubWF4LEk9TWF0aC5yb3VuZCx4PVtdLG0sej1bXSxkLEE9W10sZyx2PSF0aGlzLm1heGltdW0sSD10aGlzLm1heGltdW18fDAsRz10aGlzLnN0ZXBzLEU9MCxELHQscyx5PU1hdGguUEkqMixlPU1hdGguY29zLGE9TWF0aC5zaW4sQz10aGlzLmxhYmVsLmRpc3BsYXkscT1DIT09Im5vbmUiLHU9MTA7aWYoIXEpe3JldHVybn1mb3IoRT0wLHA9Yy5sZW5ndGg7RTxwO0UrKyl7cj1jW0VdO3oucHVzaChyLnlGaWVsZCk7Zz1yLnhGaWVsZH1mb3IoRD0wLHA9Si5sZW5ndGg7RDxwO0QrKyl7az1KW0RdO2lmKHYpe2ZvcihFPTAsZD16Lmxlbmd0aDtFPGQ7RSsrKXtIPUYoK2suZ2V0KHpbRV0pLEgpfX1BLnB1c2goay5nZXQoZykpfWlmKCF0aGlzLmxhYmVsQXJyYXkpe2lmKEMhPSJjYXRlZ29yaWVzIil7Zm9yKEU9MTtFPD1HO0UrKyl7bT1CLmFkZCh7dHlwZToidGV4dCIsdGV4dDpJKEUvRypIKSx4Om8seTpuLWgqRS9HLCJ0ZXh0LWFuY2hvciI6Im1pZGRsZSIsInN0cm9rZS13aWR0aCI6MC4xLHN0cm9rZToiIzMzMyJ9KTttLnNldEF0dHJpYnV0ZXMoe2hpZGRlbjpmYWxzZX0sdHJ1ZSk7eC5wdXNoKG0pfX1pZihDIT0ic2NhbGUiKXtmb3IoRD0wLEc9QS5sZW5ndGg7RDxHO0QrKyl7dD1lKEQvRyp5KSooaCt1KTtzPWEoRC9HKnkpKihoK3UpO209Qi5hZGQoe3R5cGU6InRleHQiLHRleHQ6QVtEXSx4Om8rdCx5Om4rcywidGV4dC1hbmNob3IiOnQqdDw9MC4wMDE/Im1pZGRsZSI6KHQ8MD8iZW5kIjoic3RhcnQiKX0pO20uc2V0QXR0cmlidXRlcyh7aGlkZGVuOmZhbHNlfSx0cnVlKTt4LnB1c2gobSl9fX1lbHNle3g9dGhpcy5sYWJlbEFycmF5O2lmKEMhPSJjYXRlZ29yaWVzIil7Zm9yKEU9MDtFPEc7RSsrKXt4W0VdLnNldEF0dHJpYnV0ZXMoe3RleHQ6SSgoRSsxKS9HKkgpLHg6byx5Om4taCooRSsxKS9HLCJ0ZXh0LWFuY2hvciI6Im1pZGRsZSIsInN0cm9rZS13aWR0aCI6MC4xLHN0cm9rZToiIzMzMyJ9LHRydWUpfX1pZihDIT0ic2NhbGUiKXtmb3IoRD0wLEc9QS5sZW5ndGg7RDxHO0QrKyl7dD1lKEQvRyp5KSooaCt1KTtzPWEoRC9HKnkpKihoK3UpO2lmKHhbRStEXSl7eFtFK0RdLnNldEF0dHJpYnV0ZXMoe3R5cGU6InRleHQiLHRleHQ6QVtEXSx4Om8rdCx5Om4rcywidGV4dC1hbmNob3IiOnQqdDw9MC4wMDE/Im1pZGRsZSI6KHQ8MD8iZW5kIjoic3RhcnQiKX0sdHJ1ZSl9fX19dGhpcy5sYWJlbEFycmF5PXh9fSk7RXh0LmRlZmluZSgiRXh0LmNoYXJ0LmF4aXMuVGltZSIse2V4dGVuZDoiRXh0LmNoYXJ0LmF4aXMuTnVtZXJpYyIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuY2hhcnQuVGltZUF4aXMiLGFsaWFzOiJheGlzLnRpbWUiLHVzZXM6WyJFeHQuZGF0YS5TdG9yZSJdLGRhdGVGb3JtYXQ6ZmFsc2UsZnJvbURhdGU6ZmFsc2UsdG9EYXRlOmZhbHNlLHN0ZXA6W0V4dC5EYXRlLkRBWSwxXSxjb25zdHJhaW46ZmFsc2UsY29uc3RydWN0b3I6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxhLGQsZTtjLmNhbGxQYXJlbnQoW2JdKTthPWMubGFiZWx8fHt9O2U9dGhpcy5kYXRlRm9ybWF0O2lmKGUpe2lmKGEucmVuZGVyZXIpe2Q9YS5yZW5kZXJlcjthLnJlbmRlcmVyPWZ1bmN0aW9uKGcpe2c9ZChnKTtyZXR1cm4gRXh0LkRhdGUuZm9ybWF0KG5ldyBEYXRlKGQoZykpLGUpfX1lbHNle2EucmVuZGVyZXI9ZnVuY3Rpb24oZyl7cmV0dXJuIEV4dC5EYXRlLmZvcm1hdChuZXcgRGF0ZShnPj4wKSxlKX19fX0scHJvY2Vzc1ZpZXc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuZnJvbURhdGUpe2EubWluaW11bT0rYS5mcm9tRGF0ZX1pZihhLnRvRGF0ZSl7YS5tYXhpbXVtPSthLnRvRGF0ZX1pZihhLmNvbnN0cmFpbil7YS5kb0NvbnN0cmFpbigpfX0sY2FsY0VuZHM6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGEsYj1jLnN0ZXA7aWYoYil7YT1jLmdldFJhbmdlKCk7YT1FeHQuZHJhdy5EcmF3LnNuYXBFbmRzQnlEYXRlQW5kU3RlcChuZXcgRGF0ZShhLm1pbiksbmV3IERhdGUoYS5tYXgpLEV4dC5pc051bWJlcihiKT9bRGF0ZS5NSUxMSSxiXTpiKTtpZihjLm1pbmltdW0pe2EuZnJvbT1jLm1pbmltdW19aWYoYy5tYXhpbXVtKXthLnRvPWMubWF4aW11bX1hLnN0ZXA9KGEudG8tYS5mcm9tKS9hLnN0ZXBzO3JldHVybiBhfWVsc2V7cmV0dXJuIGMuY2FsbFBhcmVudChhcmd1bWVudHMpfX19KTtFeHQuZGVmaW5lKCJFeHQuY2hhcnQuc2VyaWVzLlNlcmllcyIse21peGluczp7b2JzZXJ2YWJsZToiRXh0LnV0aWwuT2JzZXJ2YWJsZSIsbGFiZWxzOiJFeHQuY2hhcnQuTGFiZWwiLGhpZ2hsaWdodHM6IkV4dC5jaGFydC5IaWdobGlnaHQiLHRpcHM6IkV4dC5jaGFydC5UaXAiLGNhbGxvdXRzOiJFeHQuY2hhcnQuQ2FsbG91dCJ9LHR5cGU6bnVsbCx0aXRsZTpudWxsLHNob3dJbkxlZ2VuZDp0cnVlLHJlbmRlcmVyOmZ1bmN0aW9uKGUsYSxjLGQsYil7cmV0dXJuIGN9LHNoYWRvd0F0dHJpYnV0ZXM6bnVsbCxhbmltYXRpbmc6ZmFsc2UsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihhKXtFeHQuYXBwbHkoYixhKX1iLnNoYWRvd0dyb3Vwcz1bXTtiLm1peGlucy5sYWJlbHMuY29uc3RydWN0b3IuY2FsbChiLGEpO2IubWl4aW5zLmhpZ2hsaWdodHMuY29uc3RydWN0b3IuY2FsbChiLGEpO2IubWl4aW5zLnRpcHMuY29uc3RydWN0b3IuY2FsbChiLGEpO2IubWl4aW5zLmNhbGxvdXRzLmNvbnN0cnVjdG9yLmNhbGwoYixhKTtiLmFkZEV2ZW50cyh7c2NvcGU6YixpdGVtbW91c2VvdmVyOnRydWUsaXRlbW1vdXNlb3V0OnRydWUsaXRlbW1vdXNlZG93bjp0cnVlLGl0ZW1tb3VzZXVwOnRydWUsbW91c2VsZWF2ZTp0cnVlLGFmdGVyZHJhdzp0cnVlLHRpdGxlY2hhbmdlOnRydWV9KTtiLm1peGlucy5vYnNlcnZhYmxlLmNvbnN0cnVjdG9yLmNhbGwoYixhKTtiLm9uKHtzY29wZTpiLGl0ZW1tb3VzZW92ZXI6Yi5vbkl0ZW1Nb3VzZU92ZXIsaXRlbW1vdXNlb3V0OmIub25JdGVtTW91c2VPdXQsbW91c2VsZWF2ZTpiLm9uTW91c2VMZWF2ZX0pO2lmKGIuc3R5bGUpe0V4dC5hcHBseShiLnNlcmllc1N0eWxlLGIuc3R5bGUpfX0sZWFjaFJlY29yZDpmdW5jdGlvbihjLGIpe3ZhciBhPXRoaXMuY2hhcnQ7KGEuc3Vic3RvcmV8fGEuc3RvcmUpLmVhY2goYyxiKX0sZ2V0UmVjb3JkQ291bnQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmNoYXJ0LGE9Yi5zdWJzdG9yZXx8Yi5zdG9yZTtyZXR1cm4gYT9hLmdldENvdW50KCk6MH0saXNFeGNsdWRlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9fZXhjbHVkZXM7cmV0dXJuICEhKGImJmJbYV0pfSxzZXRCQm94OmZ1bmN0aW9uKGEpe3ZhciBlPXRoaXMsYz1lLmNoYXJ0LGI9Yy5jaGFydEJCb3gsZz1hPzA6Yy5tYXhHdXR0ZXJbMF0sZD1hPzA6Yy5tYXhHdXR0ZXJbMV0saCxpO2g9e3g6Yi54LHk6Yi55LHdpZHRoOmIud2lkdGgsaGVpZ2h0OmIuaGVpZ2h0fTtlLmNsaXBCb3g9aDtpPXt4OihoLngrZyktKGMuem9vbS54KmMuem9vbS53aWR0aCkseTooaC55K2QpLShjLnpvb20ueSpjLnpvb20uaGVpZ2h0KSx3aWR0aDooaC53aWR0aC0oZyoyKSkqYy56b29tLndpZHRoLGhlaWdodDooaC5oZWlnaHQtKGQqMikpKmMuem9vbS5oZWlnaHR9O2UuYmJveD1pfSxvbkFuaW1hdGU6ZnVuY3Rpb24oYixhKXt2YXIgYz10aGlzO2Iuc3RvcEFuaW1hdGlvbigpO2lmKGMuYW5pbWF0aW5nKXtyZXR1cm4gYi5hbmltYXRlKEV4dC5hcHBseUlmKGEsYy5jaGFydC5hbmltYXRlKSl9ZWxzZXtjLmFuaW1hdGluZz10cnVlO3JldHVybiBiLmFuaW1hdGUoRXh0LmFwcGx5KEV4dC5hcHBseUlmKGEsYy5jaGFydC5hbmltYXRlKSx7bGlzdGVuZXJzOnthZnRlcmFuaW1hdGU6ZnVuY3Rpb24oKXtjLmFuaW1hdGluZz1mYWxzZTtjLmZpcmVFdmVudCgiYWZ0ZXJyZW5kZXIiKX19fSkpfX0sZ2V0R3V0dGVyczpmdW5jdGlvbigpe3JldHVyblswLDBdfSxvbkl0ZW1Nb3VzZU92ZXI6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZihiLnNlcmllcz09PWEpe2lmKGEuaGlnaGxpZ2h0KXthLmhpZ2hsaWdodEl0ZW0oYil9aWYoYS50b29sdGlwKXthLnNob3dUaXAoYil9fX0sb25JdGVtTW91c2VPdXQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZihiLnNlcmllcz09PWEpe2EudW5IaWdobGlnaHRJdGVtKCk7aWYoYS50b29sdGlwKXthLmhpZGVUaXAoYil9fX0sb25Nb3VzZUxlYXZlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLnVuSGlnaGxpZ2h0SXRlbSgpO2lmKGEudG9vbHRpcCl7YS5oaWRlVGlwKCl9fSxnZXRJdGVtRm9yUG9pbnQ6ZnVuY3Rpb24oYSxqKXtpZighdGhpcy5pdGVtc3x8IXRoaXMuaXRlbXMubGVuZ3RofHx0aGlzLnNlcmllc0lzSGlkZGVuKXtyZXR1cm4gbnVsbH12YXIgZz10aGlzLGI9Zy5pdGVtcyxoPWcuYmJveCxlLGMsZDtpZighRXh0LmRyYXcuRHJhdy53aXRoaW5Cb3goYSxqLGgpKXtyZXR1cm4gbnVsbH1mb3IoYz0wLGQ9Yi5sZW5ndGg7YzxkO2MrKyl7aWYoYltjXSYmdGhpcy5pc0l0ZW1JblBvaW50KGEsaixiW2NdLGMpKXtyZXR1cm4gYltjXX19cmV0dXJuIG51bGx9LGlzSXRlbUluUG9pbnQ6ZnVuY3Rpb24oYSxkLGMsYil7cmV0dXJuIGZhbHNlfSxoaWRlQWxsOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxnPWguaXRlbXMsbSxlLGQsYyxhLGssYjtoLnNlcmllc0lzSGlkZGVuPXRydWU7aC5fcHJldlNob3dNYXJrZXJzPWguc2hvd01hcmtlcnM7aC5zaG93TWFya2Vycz1mYWxzZTtoLmhpZGVMYWJlbHMoMCk7Zm9yKGQ9MCxlPWcubGVuZ3RoO2Q8ZTtkKyspe209Z1tkXTtrPW0uc3ByaXRlO2lmKGspe2suc2V0QXR0cmlidXRlcyh7aGlkZGVuOnRydWV9LHRydWUpfWlmKGsmJmsuc2hhZG93cyl7Yj1rLnNoYWRvd3M7Zm9yKGM9MCxhPWIubGVuZ3RoO2M8YTsrK2Mpe2JbY10uc2V0QXR0cmlidXRlcyh7aGlkZGVuOnRydWV9LHRydWUpfX19fSxzaG93QWxsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY2hhcnQuYW5pbWF0ZTthLmNoYXJ0LmFuaW1hdGU9ZmFsc2U7YS5zZXJpZXNJc0hpZGRlbj1mYWxzZTthLnNob3dNYXJrZXJzPWEuX3ByZXZTaG93TWFya2VyczthLmRyYXdTZXJpZXMoKTthLmNoYXJ0LmFuaW1hdGU9Yn0saGlkZTpmdW5jdGlvbigpe2lmKHRoaXMuaXRlbXMpe3ZhciBoPXRoaXMsYj1oLml0ZW1zLGQsYyxhLGcsZTtpZihiJiZiLmxlbmd0aCl7Zm9yKGQ9MCxnPWIubGVuZ3RoO2Q8ZzsrK2Qpe2lmKGJbZF0uc3ByaXRlKXtiW2RdLnNwcml0ZS5oaWRlKHRydWUpO2U9YltkXS5zaGFkb3dzfHxiW2RdLnNwcml0ZS5zaGFkb3dzO2lmKGUpe2ZvcihjPTAsYT1lLmxlbmd0aDtjPGE7KytjKXtlW2NdLmhpZGUodHJ1ZSl9fX19aC5oaWRlTGFiZWxzKCl9fX0sZ2V0TGVnZW5kQ29sb3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxkLGM7aWYoYi5zZXJpZXNTdHlsZSl7ZD1iLnNlcmllc1N0eWxlLmZpbGw7Yz1iLnNlcmllc1N0eWxlLnN0cm9rZTtpZihkJiZkIT0ibm9uZSIpe3JldHVybiBkfWlmKGMpe3JldHVybiBjfX1yZXR1cm4oYi5jb2xvckFycmF5U3R5bGUpP2IuY29sb3JBcnJheVN0eWxlW2Iuc2VyaWVzSWR4JWIuY29sb3JBcnJheVN0eWxlLmxlbmd0aF06IiMwMDAifSx2aXNpYmxlSW5MZWdlbmQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fX2V4Y2x1ZGVzO2lmKGIpe3JldHVybiAhYlthXX1yZXR1cm4gIXRoaXMuc2VyaWVzSXNIaWRkZW59LHNldFRpdGxlOmZ1bmN0aW9uKGEsZCl7dmFyIGM9dGhpcyxiPWMudGl0bGU7aWYoRXh0LmlzU3RyaW5nKGEpKXtkPWE7YT0wfWlmKEV4dC5pc0FycmF5KGIpKXtiW2FdPWR9ZWxzZXtjLnRpdGxlPWR9Yy5maXJlRXZlbnQoInRpdGxlY2hhbmdlIixkLGEpfX0pO0V4dC5kZWZpbmUoIkV4dC5jaGFydC5zZXJpZXMuQ2FydGVzaWFuIix7ZXh0ZW5kOiJFeHQuY2hhcnQuc2VyaWVzLlNlcmllcyIsYWx0ZXJuYXRlQ2xhc3NOYW1lOlsiRXh0LmNoYXJ0LkNhcnRlc2lhblNlcmllcyIsIkV4dC5jaGFydC5DYXJ0ZXNpYW5DaGFydCJdLHhGaWVsZDpudWxsLHlGaWVsZDpudWxsLGF4aXM6ImxlZnQiLGdldExlZ2VuZExhYmVsczpmdW5jdGlvbigpe3ZhciBqPXRoaXMsZT1bXSxnLGQsaCxrPWouY29tYmluYXRpb25zLGwsYSxjLGI7Zz1bXS5jb25jYXQoai55RmllbGQpO2ZvcihkPTAsaD1nLmxlbmd0aDtkPGg7ZCsrKXtsPWoudGl0bGU7ZS5wdXNoKChFeHQuaXNBcnJheShsKT9sW2RdOmwpfHxnW2RdKX1pZihrKXtrPUV4dC5BcnJheS5mcm9tKGspO2ZvcihkPTAsaD1rLmxlbmd0aDtkPGg7ZCsrKXthPWtbZF07Yz1lW2FbMF1dO2I9ZVthWzFdXTtlW2FbMV1dPWMrIiAmICIrYjtlLnNwbGljZShhWzBdLDEpfX1yZXR1cm4gZX0sZWFjaFlWYWx1ZTpmdW5jdGlvbihiLGUsZCl7dmFyIGo9dGhpcyxoPWouZ2V0WVZhbHVlQWNjZXNzb3JzKCksYyxnLGE7Zm9yKGM9MCxnPWgubGVuZ3RoO2M8ZztjKyspe2E9aFtjXTtlLmNhbGwoZCxhKGIpLGMpfX0sZ2V0WVZhbHVlQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRZVmFsdWVBY2Nlc3NvcnMoKS5sZW5ndGh9LGNvbWJpbmU6ZnVuY3Rpb24oZyxlKXt2YXIgZD10aGlzLGM9ZC5nZXRZVmFsdWVBY2Nlc3NvcnMoKSxiPWNbZ10sYT1jW2VdO2NbZV09ZnVuY3Rpb24oaCl7cmV0dXJuIGIoaCkrYShoKX07Yy5zcGxpY2UoZywxKTtkLmNhbGxQYXJlbnQoW2csZV0pfSxjbGVhckNvbWJpbmF0aW9uczpmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLnlWYWx1ZUFjY2Vzc29yczt0aGlzLmNhbGxQYXJlbnQoKX0sZ2V0WVZhbHVlQWNjZXNzb3JzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxhPWUueVZhbHVlQWNjZXNzb3JzLGcsYyxiLGQ7aWYoIWEpe2E9ZS55VmFsdWVBY2Nlc3NvcnM9W107Zz1bXS5jb25jYXQoZS55RmllbGQpO2ZvcihiPTAsZD1nLmxlbmd0aDtiPGQ7YisrKXtjPWdbYl07YS5wdXNoKGZ1bmN0aW9uKGgpe3JldHVybiBoLmdldChjKX0pfX1yZXR1cm4gYX0sZ2V0TWluTWF4WFZhbHVlczpmdW5jdGlvbigpe3ZhciBrPXRoaXMsaj1rLmNoYXJ0LG09ai5nZXRDaGFydFN0b3JlKCksZD1tLmRhdGEuaXRlbXMsZSxoLGcsYyxsLGE9ay54RmllbGQsYjtpZihrLmdldFJlY29yZENvdW50KCk+MCl7Yz1JbmZpbml0eTtsPS1jO2ZvcihlPTAsaD1kLmxlbmd0aDtlPGg7ZSsrKXtnPWRbZV07Yj1nLmdldChhKTtpZihiPmwpe2w9Yn1pZihiPGMpe2M9Yn19fWVsc2V7Yz1sPTB9cmV0dXJuW2MsbF19LGdldE1pbk1heFlWYWx1ZXM6ZnVuY3Rpb24oKXt2YXIgaz10aGlzLGo9ay5jaGFydCxvPWouZ2V0Q2hhcnRTdG9yZSgpLGM9by5kYXRhLml0ZW1zLGQsaCxlLGc9ay5zdGFja2VkLGIsbCxuLG07ZnVuY3Rpb24gYShyLHEpe2lmKCFrLmlzRXhjbHVkZWQocSkpe2lmKHI8MCl7bSs9cn1lbHNle24rPXJ9fX1mdW5jdGlvbiBwKHIscSl7aWYoIWsuaXNFeGNsdWRlZChxKSl7aWYocj5sKXtsPXJ9aWYocjxiKXtiPXJ9fX1pZihrLmdldFJlY29yZENvdW50KCk+MCl7Yj1JbmZpbml0eTtsPS1iO2ZvcihkPTAsaD1jLmxlbmd0aDtkPGg7ZCsrKXtlPWNbZF07aWYoZyl7bj0wO209MDtrLmVhY2hZVmFsdWUoZSxhKTtpZihuPmwpe2w9bn1pZihtPGIpe2I9bX19ZWxzZXtrLmVhY2hZVmFsdWUoZSxwKX19fWVsc2V7Yj1sPTB9cmV0dXJuW2IsbF19LGdldEF4ZXNGb3JYQW5kWUZpZWxkczpmdW5jdGlvbigpe3ZhciBtPXRoaXMsbD1tLmNoYXJ0LmF4ZXMsZD1bXS5jb25jYXQobS5heGlzKSxjPXt9LGU9W10uY29uY2F0KG0ueUZpZWxkKSxuPXt9LG89W10uY29uY2F0KG0ueEZpZWxkKSxqLGIsYSxoLGssZztnPW0udHlwZT09PSJiYXIiJiZtLmNvbHVtbj09PWZhbHNlO2lmKGcpe2o9ZTtlPW87bz1qfWlmKEV4dC5BcnJheS5pbmRleE9mKGQsInRvcCIpPi0xKXtiPSJ0b3AifWVsc2V7aWYoRXh0LkFycmF5LmluZGV4T2YoZCwiYm90dG9tIik+LTEpe2I9ImJvdHRvbSJ9ZWxzZXtpZihsLmdldCgidG9wIikmJmwuZ2V0KCJib3R0b20iKSl7Zm9yKGg9MCxrPW8ubGVuZ3RoO2g8aztoKyspe25bb1toXV09dHJ1ZX1qPVtdLmNvbmNhdChsLmdldCgiYm90dG9tIikuZmllbGRzKTtmb3IoaD0wLGs9ai5sZW5ndGg7aDxrO2grKyl7aWYobltqW2hdXSl7Yj0iYm90dG9tIjticmVha319aj1bXS5jb25jYXQobC5nZXQoInRvcCIpLmZpZWxkcyk7Zm9yKGg9MCxrPWoubGVuZ3RoO2g8aztoKyspe2lmKG5baltoXV0pe2I9InRvcCI7YnJlYWt9fX1lbHNle2lmKGwuZ2V0KCJ0b3AiKSl7Yj0idG9wIn1lbHNle2lmKGwuZ2V0KCJib3R0b20iKSl7Yj0iYm90dG9tIn19fX19aWYoRXh0LkFycmF5LmluZGV4T2YoZCwibGVmdCIpPi0xKXthPSJsZWZ0In1lbHNle2lmKEV4dC5BcnJheS5pbmRleE9mKGQsInJpZ2h0Iik+LTEpe2E9InJpZ2h0In1lbHNle2lmKGwuZ2V0KCJsZWZ0IikmJmwuZ2V0KCJyaWdodCIpKXtmb3IoaD0wLGs9ZS5sZW5ndGg7aDxrO2grKyl7Y1tlW2hdXT10cnVlfWo9W10uY29uY2F0KGwuZ2V0KCJyaWdodCIpLmZpZWxkcyk7Zm9yKGg9MCxrPWoubGVuZ3RoO2g8aztoKyspe2lmKGNbaltoXV0pe2JyZWFrfX1qPVtdLmNvbmNhdChsLmdldCgibGVmdCIpLmZpZWxkcyk7Zm9yKGg9MCxrPWoubGVuZ3RoO2g8aztoKyspe2lmKGNbaltoXV0pe2E9ImxlZnQiO2JyZWFrfX19ZWxzZXtpZihsLmdldCgibGVmdCIpKXthPSJsZWZ0In1lbHNle2lmKGwuZ2V0KCJyaWdodCIpKXthPSJyaWdodCJ9fX19fXJldHVybiBnP3t4QXhpczphLHlBeGlzOmJ9Ont4QXhpczpiLHlBeGlzOmF9fX0pO0V4dC5kZWZpbmUoIkV4dC5jaGFydC5zZXJpZXMuQXJlYSIse2V4dGVuZDoiRXh0LmNoYXJ0LnNlcmllcy5DYXJ0ZXNpYW4iLGFsaWFzOiJzZXJpZXMuYXJlYSIscmVxdWlyZXM6WyJFeHQuY2hhcnQuYXhpcy5BeGlzIiwiRXh0LmRyYXcuQ29sb3IiLCJFeHQuZnguQW5pbSJdLHR5cGU6ImFyZWEiLHN0YWNrZWQ6dHJ1ZSxzdHlsZTp7fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihjKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt2YXIgZT10aGlzLGE9ZS5jaGFydC5zdXJmYWNlLGQsYjtjLmhpZ2hsaWdodENmZz1FeHQuT2JqZWN0Lm1lcmdlKHt9LHtsaW5lV2lkdGg6MyxzdHJva2U6IiM1NWMiLG9wYWNpdHk6MC44LGNvbG9yOiIjZjAwIn0sYy5oaWdobGlnaHRDZmcpO0V4dC5hcHBseShlLGMse19fZXhjbHVkZXM6W119KTtpZihlLmhpZ2hsaWdodCl7ZS5oaWdobGlnaHRTcHJpdGU9YS5hZGQoe3R5cGU6InBhdGgiLHBhdGg6WyJNIiwwLDBdLHpJbmRleDoxMDAwLG9wYWNpdHk6MC4zLGxpbmVXaWR0aDo1LGhpZGRlbjp0cnVlLHN0cm9rZToiIzQ0NCJ9KX1lLmdyb3VwPWEuZ2V0R3JvdXAoZS5zZXJpZXNJZCl9LHNocmluazpmdW5jdGlvbihiLG4sbyl7dmFyIGs9Yi5sZW5ndGgsbT1NYXRoLmZsb29yKGsvbyksaCxnLGQ9MCxsPXRoaXMuYXJlYXMubGVuZ3RoLGE9W10sZT1bXSxjPVtdO2ZvcihnPTA7ZzxsOysrZyl7YVtnXT0wfWZvcihoPTA7aDxrOysraCl7ZCs9K2JbaF07Zm9yKGc9MDtnPGw7KytnKXthW2ddKz0rbltoXVtnXX1pZihoJW09PTApe2UucHVzaChkL20pO2ZvcihnPTA7ZzxsOysrZyl7YVtnXS89bX1jLnB1c2goYSk7ZD0wO2ZvcihnPTAsYT1bXTtnPGw7KytnKXthW2ddPTB9fX1yZXR1cm57eDplLHk6Y319LGdldEJvdW5kczpmdW5jdGlvbigpe3ZhciBqPXRoaXMsTT1qLmNoYXJ0LGE9TS5nZXRDaGFydFN0b3JlKCksTD1hLmRhdGEuaXRlbXMsSSxGLHgsdj1bXS5jb25jYXQoai55RmllbGQpLEE9di5sZW5ndGgsej1bXSxEPVtdLGc9SW5maW5pdHksQz1nLEI9ZyxuPS1nLG09LWcscz1NYXRoLHc9cy5taW4sZT1zLm1heCxwPWouZ2V0QXhlc0ZvclhBbmRZRmllbGRzKCksSj1wLnhBeGlzLHU9cC55QXhpcyxHLHIsayxoLEUscSxOLEssYix0LEgsYyxkLG8seTtqLnNldEJCb3goKTtrPWouYmJveDtpZihvPU0uYXhlcy5nZXQoSikpe2lmKG8udHlwZT09PSJUaW1lIil7cj10cnVlfUc9by5hcHBseURhdGEoKTtDPUcuZnJvbTtuPUcudG99aWYobz1NLmF4ZXMuZ2V0KHUpKXtHPW8uYXBwbHlEYXRhKCk7Qj1HLmZyb207bT1HLnRvfWlmKGoueEZpZWxkJiYhRXh0LmlzTnVtYmVyKEMpKXtvPWouZ2V0TWluTWF4WFZhbHVlcygpO3I9dHJ1ZTtDPW9bMF07bj1vWzFdfWlmKGoueUZpZWxkJiYhRXh0LmlzTnVtYmVyKEIpKXtvPWouZ2V0TWluTWF4WVZhbHVlcygpO0I9b1swXTttPW9bMV19aWYoIUV4dC5pc051bWJlcihCKSl7Qj0wfWlmKCFFeHQuaXNOdW1iZXIobSkpe209MH1mb3IoST0wLEY9TC5sZW5ndGg7STxGO0krKyl7eD1MW0ldO3E9eC5nZXQoai54RmllbGQpO049W107aWYodHlwZW9mIHEhPSJudW1iZXIiKXtpZihyKXtxPStxfWVsc2V7cT1JfX16LnB1c2gocSk7Yj0wO2ZvcihLPTA7SzxBO0srKyl7aWYoai5fX2V4Y2x1ZGVzW0tdKXtjb250aW51ZX1kPXguZ2V0KHZbS10pO2lmKHR5cGVvZiBkPT0ibnVtYmVyIil7Ti5wdXNoKGQpfX1ELnB1c2goTil9aD1rLndpZHRoLygobi1DKXx8MSk7RT1rLmhlaWdodC8oKG0tQil8fDEpO3Q9ei5sZW5ndGg7aWYoKHQ+ay53aWR0aCkmJmouYXJlYXMpe0g9ai5zaHJpbmsoeixELGsud2lkdGgpO3o9SC54O0Q9SC55fXJldHVybntiYm94OmssbWluWDpDLG1pblk6Qix4VmFsdWVzOnoseVZhbHVlczpELHhTY2FsZTpoLHlTY2FsZTpFLGFyZWFzTGVuOkF9fSxnZXRQYXRoczpmdW5jdGlvbigpe3ZhciB3PXRoaXMsbT13LmNoYXJ0LGM9bS5nZXRDaGFydFN0b3JlKCksZT10cnVlLGc9dy5nZXRCb3VuZHMoKSxhPWcuYmJveCxuPXcuaXRlbXM9W10sdj1bXSxiLGQ9MCxwPVtdLHMsaixrLGgscSx0LGwseixyLHUsbztqPWcueFZhbHVlcy5sZW5ndGg7Zm9yKHM9MDtzPGo7cysrKXtxPWcueFZhbHVlc1tzXTt0PWcueVZhbHVlc1tzXTtrPWEueCsocS1nLm1pblgpKmcueFNjYWxlO2w9MDtkPTA7Zm9yKHo9MDt6PGcuYXJlYXNMZW47eisrKXtpZih3Ll9fZXhjbHVkZXNbel0pe2NvbnRpbnVlfWlmKCF2W3pdKXt2W3pdPVtdfXU9dFtkXTtsKz11O2g9YS55K2EuaGVpZ2h0LShsLWcubWluWSkqZy55U2NhbGU7aWYoIXBbel0pe3Bbel09WyJNIixrLGhdO3Zbel0ucHVzaChbIkwiLGssaF0pfWVsc2V7cFt6XS5wdXNoKCJMIixrLGgpO3Zbel0ucHVzaChbIkwiLGssaF0pfWlmKCFuW3pdKXtuW3pdPXtwb2ludHNVcDpbXSxwb2ludHNEb3duOltdLHNlcmllczp3fX1uW3pdLnBvaW50c1VwLnB1c2goW2ssaF0pO2QrK319Zm9yKHo9MDt6PGcuYXJlYXNMZW47eisrKXtpZih3Ll9fZXhjbHVkZXNbel0pe2NvbnRpbnVlfW89cFt6XTtpZih6PT0wfHxlKXtlPWZhbHNlO28ucHVzaCgiTCIsayxhLnkrYS5oZWlnaHQsIkwiLGEueCxhLnkrYS5oZWlnaHQsIloiKX1lbHNle2I9dltyXTtiLnJldmVyc2UoKTtvLnB1c2goIkwiLGssYlswXVsyXSk7Zm9yKHM9MDtzPGo7cysrKXtvLnB1c2goYltzXVswXSxiW3NdWzFdLGJbc11bMl0pO25bel0ucG9pbnRzRG93bltqLXMtMV09W2Jbc11bMV0sYltzXVsyXV19by5wdXNoKCJMIixhLngsb1syXSwiWiIpfXI9en1yZXR1cm57cGF0aHM6cCxhcmVhc0xlbjpnLmFyZWFzTGVufX0sZHJhd1NlcmllczpmdW5jdGlvbigpe3ZhciBoPXRoaXMsZz1oLmNoYXJ0LGk9Zy5nZXRDaGFydFN0b3JlKCksYz1nLnN1cmZhY2UsYj1nLmFuaW1hdGUsaz1oLmdyb3VwLGE9RXh0LmFwcGx5KGguc2VyaWVzU3R5bGUsaC5zdHlsZSksbD1oLmNvbG9yQXJyYXlTdHlsZSxvPWwmJmwubGVuZ3RofHwwLGQsZSxuLG0sajtoLnVuSGlnaGxpZ2h0SXRlbSgpO2guY2xlYW5IaWdobGlnaHRzKCk7aWYoIWl8fCFpLmdldENvdW50KCl8fGguc2VyaWVzSXNIaWRkZW4pe2guaGlkZSgpO2guaXRlbXM9W107cmV0dXJufW49aC5nZXRQYXRocygpO2lmKCFoLmFyZWFzKXtoLmFyZWFzPVtdfWZvcihkPTA7ZDxuLmFyZWFzTGVuO2QrKyl7aWYoaC5fX2V4Y2x1ZGVzW2RdKXtjb250aW51ZX1pZighaC5hcmVhc1tkXSl7aC5pdGVtc1tkXS5zcHJpdGU9aC5hcmVhc1tkXT1jLmFkZChFeHQuYXBwbHkoe30se3R5cGU6InBhdGgiLGdyb3VwOmsscGF0aDpuLnBhdGhzW2RdLHN0cm9rZTphLnN0cm9rZXx8bFtkJW9dLGZpbGw6bFtkJW9dfSxhfHx7fSkpfWU9aC5hcmVhc1tkXTttPW4ucGF0aHNbZF07aWYoYil7aj1oLnJlbmRlcmVyKGUsZmFsc2Use3BhdGg6bSxmaWxsOmxbZCVvXSxzdHJva2U6YS5zdHJva2V8fGxbZCVvXX0sZCxpKTtoLmFuaW1hdGlvbj1oLm9uQW5pbWF0ZShlLHt0bzpqfSl9ZWxzZXtqPWgucmVuZGVyZXIoZSxmYWxzZSx7cGF0aDptLGhpZGRlbjpmYWxzZSxmaWxsOmxbZCVvXSxzdHJva2U6YS5zdHJva2V8fGxbZCVvXX0sZCxpKTtoLmFyZWFzW2RdLnNldEF0dHJpYnV0ZXMoaix0cnVlKX19aC5yZW5kZXJMYWJlbHMoKTtoLnJlbmRlckNhbGxvdXRzKCl9LG9uQW5pbWF0ZTpmdW5jdGlvbihiLGEpe2Iuc2hvdygpO3JldHVybiB0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sb25DcmVhdGVMYWJlbDpmdW5jdGlvbihkLGssYyxlKXt2YXIgZz10aGlzLGg9Zy5sYWJlbHNHcm91cCxhPWcubGFiZWwsaj1nLmJib3gsYj1FeHQuYXBwbHkoYSxnLnNlcmllc0xhYmVsU3R5bGUpO3JldHVybiBnLmNoYXJ0LnN1cmZhY2UuYWRkKEV4dC5hcHBseSh7dHlwZToidGV4dCIsInRleHQtYW5jaG9yIjoibWlkZGxlIixncm91cDpoLHg6ay5wb2ludFswXSx5OmoueStqLmhlaWdodC8yfSxifHx7fSkpfSxvblBsYWNlTGFiZWw6ZnVuY3Rpb24oZyxrLHMscCxvLGMsZSl7dmFyIHU9dGhpcyxsPXUuY2hhcnQscj1sLnJlc2l6aW5nLHQ9dS5sYWJlbCxxPXQucmVuZGVyZXIsYj10LmZpZWxkLGE9dS5iYm94LGo9cy5wb2ludFswXSxoPXMucG9pbnRbMV0sZCxuLG07Zy5zZXRBdHRyaWJ1dGVzKHt0ZXh0OnEoay5nZXQoYltlXSkpLGhpZGRlbjp0cnVlfSx0cnVlKTtkPWcuZ2V0QkJveCgpO249ZC53aWR0aC8yO209ZC5oZWlnaHQvMjtqPWotbjxhLng/YS54K246ajtqPShqK24+YS54K2Eud2lkdGgpPyhqLShqK24tYS54LWEud2lkdGgpKTpqO2g9aC1tPGEueT9hLnkrbTpoO2g9KGgrbT5hLnkrYS5oZWlnaHQpPyhoLShoK20tYS55LWEuaGVpZ2h0KSk6aDtpZih1LmNoYXJ0LmFuaW1hdGUmJiF1LmNoYXJ0LnJlc2l6aW5nKXtnLnNob3codHJ1ZSk7dS5vbkFuaW1hdGUoZyx7dG86e3g6aix5Omh9fSl9ZWxzZXtnLnNldEF0dHJpYnV0ZXMoe3g6aix5Omh9LHRydWUpO2lmKHIpe3UuYW5pbWF0aW9uLm9uKCJhZnRlcmFuaW1hdGUiLGZ1bmN0aW9uKCl7Zy5zaG93KHRydWUpfSl9ZWxzZXtnLnNob3codHJ1ZSl9fX0sb25QbGFjZUNhbGxvdXQ6ZnVuY3Rpb24obSxyLEosRyxGLGQsayl7dmFyIE09dGhpcyxzPU0uY2hhcnQsRD1zLnN1cmZhY2UsSD1zLnJlc2l6aW5nLEw9TS5jYWxsb3V0cyx0PU0uaXRlbXMsdj0oRz09MCk/ZmFsc2U6dFtHLTFdLnBvaW50LHo9KEc9PXQubGVuZ3RoLTEpP2ZhbHNlOnRbRysxXS5wb2ludCxjPUoucG9pbnQsQSxnLE4sSyxvLHEsYj1tLmxhYmVsLmdldEJCb3goKSxJPTMwLEM9MTAsQj0zLGgsZSxqLHcsdSxFPU0uY2xpcFJlY3QsbixsO2lmKCF2KXt2PWN9aWYoIXope3o9Y31LPSh6WzFdLXZbMV0pLyh6WzBdLXZbMF0pO289KGNbMV0tdlsxXSkvKGNbMF0tdlswXSk7cT0oelsxXS1jWzFdKS8oelswXS1jWzBdKTtnPU1hdGguc3FydCgxK0sqSyk7QT1bMS9nLEsvZ107Tj1bLUFbMV0sQVswXV07aWYobz4wJiZxPDAmJk5bMV08MHx8bzwwJiZxPjAmJk5bMV0+MCl7TlswXSo9LTE7TlsxXSo9LTF9ZWxzZXtpZihNYXRoLmFicyhvKTxNYXRoLmFicyhxKSYmTlswXTwwfHxNYXRoLmFicyhvKT5NYXRoLmFicyhxKSYmTlswXT4wKXtOWzBdKj0tMTtOWzFdKj0tMX19bj1jWzBdK05bMF0qSTtsPWNbMV0rTlsxXSpJO2g9bisoTlswXT4wPzA6LShiLndpZHRoKzIqQikpO2U9bC1iLmhlaWdodC8yLUI7aj1iLndpZHRoKzIqQjt3PWIuaGVpZ2h0KzIqQjtpZihoPEVbMF18fChoK2opPihFWzBdK0VbMl0pKXtOWzBdKj0tMX1pZihlPEVbMV18fChlK3cpPihFWzFdK0VbM10pKXtOWzFdKj0tMX1uPWNbMF0rTlswXSpJO2w9Y1sxXStOWzFdKkk7aD1uKyhOWzBdPjA/MDotKGIud2lkdGgrMipCKSk7ZT1sLWIuaGVpZ2h0LzItQjtqPWIud2lkdGgrMipCO3c9Yi5oZWlnaHQrMipCO20ubGluZXMuc2V0QXR0cmlidXRlcyh7cGF0aDpbIk0iLGNbMF0sY1sxXSwiTCIsbixsLCJaIl19LHRydWUpO20uYm94LnNldEF0dHJpYnV0ZXMoe3g6aCx5OmUsd2lkdGg6aixoZWlnaHQ6d30sdHJ1ZSk7bS5sYWJlbC5zZXRBdHRyaWJ1dGVzKHt4Om4rKE5bMF0+MD9COi0oYi53aWR0aCtCKSkseTpsfSx0cnVlKTtmb3IodSBpbiBtKXttW3VdLnNob3codHJ1ZSl9fSxpc0l0ZW1JblBvaW50OmZ1bmN0aW9uKGosaCxtLGMpe3ZhciBnPXRoaXMsYj1tLnBvaW50c1VwLGQ9bS5wb2ludHNEb3duLHE9TWF0aC5hYnMsbz1mYWxzZSxsPWZhbHNlLGU9SW5maW5pdHksYSxuLGs7Zm9yKGE9MCxuPWIubGVuZ3RoO2E8bjthKyspe2s9W2JbYV1bMF0sYlthXVsxXV07bz1mYWxzZTtsPWE9PW4tMTtpZihlPnEoai1rWzBdKSl7ZT1xKGota1swXSk7bz10cnVlO2lmKGwpeysrYX19aWYoIW98fChvJiZsKSl7az1iW2EtMV07aWYoaD49a1sxXSYmKCFkLmxlbmd0aHx8aDw9KGRbYS0xXVsxXSkpKXttLnN0b3JlSW5kZXg9YS0xO20uc3RvcmVGaWVsZD1nLnlGaWVsZFtjXTttLnN0b3JlSXRlbT1nLmNoYXJ0LnN0b3JlLmdldEF0KGEtMSk7bS5fcG9pbnRzPWQubGVuZ3RoP1trLGRbYS0xXV06W2tdO3JldHVybiB0cnVlfWVsc2V7YnJlYWt9fX1yZXR1cm4gZmFsc2V9LGhpZ2hsaWdodFNlcmllczpmdW5jdGlvbigpe3ZhciBhLGMsYjtpZih0aGlzLl9pbmRleCE9PXVuZGVmaW5lZCl7YT10aGlzLmFyZWFzW3RoaXMuX2luZGV4XTtpZihhLl9faGlnaGxpZ2h0QW5pbSl7YS5fX2hpZ2hsaWdodEFuaW0ucGF1c2VkPXRydWV9YS5fX2hpZ2hsaWdodGVkPXRydWU7YS5fX3ByZXZPcGFjaXR5PWEuX19wcmV2T3BhY2l0eXx8YS5hdHRyLm9wYWNpdHl8fDE7YS5fX3ByZXZGaWxsPWEuX19wcmV2RmlsbHx8YS5hdHRyLmZpbGw7YS5fX3ByZXZMaW5lV2lkdGg9YS5fX3ByZXZMaW5lV2lkdGh8fGEuYXR0ci5saW5lV2lkdGg7Yj1FeHQuZHJhdy5Db2xvci5mcm9tU3RyaW5nKGEuX19wcmV2RmlsbCk7Yz17bGluZVdpZHRoOihhLl9fcHJldkxpbmVXaWR0aHx8MCkrMn07aWYoYil7Yy5maWxsPWIuZ2V0TGlnaHRlcigwLjIpLnRvU3RyaW5nKCl9ZWxzZXtjLm9wYWNpdHk9TWF0aC5tYXgoYS5fX3ByZXZPcGFjaXR5LTAuMywwKX1pZih0aGlzLmNoYXJ0LmFuaW1hdGUpe2EuX19oaWdobGlnaHRBbmltPW5ldyBFeHQuZnguQW5pbShFeHQuYXBwbHkoe3RhcmdldDphLHRvOmN9LHRoaXMuY2hhcnQuYW5pbWF0ZSkpfWVsc2V7YS5zZXRBdHRyaWJ1dGVzKGMsdHJ1ZSl9fX0sdW5IaWdobGlnaHRTZXJpZXM6ZnVuY3Rpb24oKXt2YXIgYTtpZih0aGlzLl9pbmRleCE9PXVuZGVmaW5lZCl7YT10aGlzLmFyZWFzW3RoaXMuX2luZGV4XTtpZihhLl9faGlnaGxpZ2h0QW5pbSl7YS5fX2hpZ2hsaWdodEFuaW0ucGF1c2VkPXRydWV9aWYoYS5fX2hpZ2hsaWdodGVkKXthLl9faGlnaGxpZ2h0ZWQ9ZmFsc2U7YS5fX2hpZ2hsaWdodEFuaW09bmV3IEV4dC5meC5BbmltKHt0YXJnZXQ6YSx0bzp7ZmlsbDphLl9fcHJldkZpbGwsb3BhY2l0eTphLl9fcHJldk9wYWNpdHksbGluZVdpZHRoOmEuX19wcmV2TGluZVdpZHRofX0pfX19LGhpZ2hsaWdodEl0ZW06ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhLGQ7aWYoIWMpe3RoaXMuaGlnaGxpZ2h0U2VyaWVzKCk7cmV0dXJufWE9Yy5fcG9pbnRzO2Q9YS5sZW5ndGg9PTI/WyJNIixhWzBdWzBdLGFbMF1bMV0sIkwiLGFbMV1bMF0sYVsxXVsxXV06WyJNIixhWzBdWzBdLGFbMF1bMV0sIkwiLGFbMF1bMF0sYi5iYm94LnkrYi5iYm94LmhlaWdodF07Yi5oaWdobGlnaHRTcHJpdGUuc2V0QXR0cmlidXRlcyh7cGF0aDpkLGhpZGRlbjpmYWxzZX0sdHJ1ZSl9LHVuSGlnaGxpZ2h0SXRlbTpmdW5jdGlvbihhKXtpZighYSl7dGhpcy51bkhpZ2hsaWdodFNlcmllcygpfWlmKHRoaXMuaGlnaGxpZ2h0U3ByaXRlKXt0aGlzLmhpZ2hsaWdodFNwcml0ZS5oaWRlKHRydWUpfX0saGlkZUFsbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2E9KGlzTmFOKGIuX2luZGV4KT9hOmIuX2luZGV4KXx8MDtiLl9fZXhjbHVkZXNbYV09dHJ1ZTtiLmFyZWFzW2FdLmhpZGUodHJ1ZSk7Yi5yZWRyYXcoKX0sc2hvd0FsbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2E9KGlzTmFOKGIuX2luZGV4KT9hOmIuX2luZGV4KXx8MDtiLl9fZXhjbHVkZXNbYV09ZmFsc2U7Yi5hcmVhc1thXS5zaG93KHRydWUpO2IucmVkcmF3KCl9LHJlZHJhdzpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYjtiPWEuY2hhcnQubGVnZW5kLnJlYnVpbGQ7YS5jaGFydC5sZWdlbmQucmVidWlsZD1mYWxzZTthLmNoYXJ0LnJlZHJhdygpO2EuY2hhcnQubGVnZW5kLnJlYnVpbGQ9Yn0saGlkZTpmdW5jdGlvbigpe2lmKHRoaXMuYXJlYXMpe3ZhciBoPXRoaXMsYj1oLmFyZWFzLGQsYyxhLGcsZTtpZihiJiZiLmxlbmd0aCl7Zm9yKGQ9MCxnPWIubGVuZ3RoO2Q8ZzsrK2Qpe2lmKGJbZF0pe2JbZF0uaGlkZSh0cnVlKX19aC5oaWRlTGFiZWxzKCl9fX0sZ2V0TGVnZW5kQ29sb3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztyZXR1cm4gYi5jb2xvckFycmF5U3R5bGVbYSViLmNvbG9yQXJyYXlTdHlsZS5sZW5ndGhdfX0pO0V4dC5kZWZpbmUoIkV4dC5jaGFydC5zZXJpZXMuQmFyIix7ZXh0ZW5kOiJFeHQuY2hhcnQuc2VyaWVzLkNhcnRlc2lhbiIsYWx0ZXJuYXRlQ2xhc3NOYW1lOlsiRXh0LmNoYXJ0LkJhclNlcmllcyIsIkV4dC5jaGFydC5CYXJDaGFydCIsIkV4dC5jaGFydC5TdGFja2VkQmFyQ2hhcnQiXSxyZXF1aXJlczpbIkV4dC5jaGFydC5heGlzLkF4aXMiLCJFeHQuZnguQW5pbSJdLHR5cGU6ImJhciIsYWxpYXM6InNlcmllcy5iYXIiLGNvbHVtbjpmYWxzZSxzdHlsZTp7fSxndXR0ZXI6MzguMixncm91cEd1dHRlcjozOC4yLHhQYWRkaW5nOjAseVBhZGRpbmc6MTAsY29uc3RydWN0b3I6ZnVuY3Rpb24oYyl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dmFyIGU9dGhpcyxhPWUuY2hhcnQuc3VyZmFjZSxnPWUuY2hhcnQuc2hhZG93LGQsYjtjLmhpZ2hsaWdodENmZz1FeHQuT2JqZWN0Lm1lcmdlKHtsaW5lV2lkdGg6MyxzdHJva2U6IiM1NWMiLG9wYWNpdHk6MC44LGNvbG9yOiIjZjAwIn0sYy5oaWdobGlnaHRDZmcpO0V4dC5hcHBseShlLGMse3NoYWRvd0F0dHJpYnV0ZXM6W3sic3Ryb2tlLXdpZHRoIjo2LCJzdHJva2Utb3BhY2l0eSI6MC4wNSxzdHJva2U6InJnYigyMDAsIDIwMCwgMjAwKSIsdHJhbnNsYXRlOnt4OjEuMix5OjEuMn19LHsic3Ryb2tlLXdpZHRoIjo0LCJzdHJva2Utb3BhY2l0eSI6MC4xLHN0cm9rZToicmdiKDE1MCwgMTUwLCAxNTApIix0cmFuc2xhdGU6e3g6MC45LHk6MC45fX0seyJzdHJva2Utd2lkdGgiOjIsInN0cm9rZS1vcGFjaXR5IjowLjE1LHN0cm9rZToicmdiKDEwMCwgMTAwLCAxMDApIix0cmFuc2xhdGU6e3g6MC42LHk6MC42fX1dfSk7ZS5ncm91cD1hLmdldEdyb3VwKGUuc2VyaWVzSWQrIi1iYXJzIik7aWYoZyl7Zm9yKGQ9MCxiPWUuc2hhZG93QXR0cmlidXRlcy5sZW5ndGg7ZDxiO2QrKyl7ZS5zaGFkb3dHcm91cHMucHVzaChhLmdldEdyb3VwKGUuc2VyaWVzSWQrIi1zaGFkb3dzIitkKSl9fX0sZ2V0QmFyR2lydGg6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGE9ZC5jaGFydC5nZXRDaGFydFN0b3JlKCksYj1kLmNvbHVtbixjPWEuZ2V0Q291bnQoKSxlPWQuZ3V0dGVyLzEwMDtyZXR1cm4oZC5jaGFydC5jaGFydEJCb3hbYj8id2lkdGgiOiJoZWlnaHQiXS1kW2I/InhQYWRkaW5nIjoieVBhZGRpbmciXSoyKS8oYyooZSsxKS1lKX0sZ2V0R3V0dGVyczpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmNvbHVtbixjPU1hdGguY2VpbChiW2E/InhQYWRkaW5nIjoieVBhZGRpbmciXStiLmdldEJhckdpcnRoKCkvMik7cmV0dXJuIGIuY29sdW1uP1tjLDBdOlswLGNdfSxnZXRCb3VuZHM6ZnVuY3Rpb24oKXt2YXIgbz10aGlzLE89by5jaGFydCxiPU8uZ2V0Q2hhcnRTdG9yZSgpLE49Yi5kYXRhLml0ZW1zLE0seCxELHY9W10uY29uY2F0KG8ueUZpZWxkKSxwPXYubGVuZ3RoLGw9cCxjPW8uZ3JvdXBHdXR0ZXIvMTAwLEg9by5jb2x1bW4saD1vLnhQYWRkaW5nLG09by55UGFkZGluZyxKPW8uc3RhY2tlZCx0PW8uZ2V0QmFyR2lydGgoKSx5PUg/IndpZHRoIjoiaGVpZ2h0Iix1PU1hdGgsQj11Lm1pbixrPXUubWF4LG49dS5hYnMsRz1vLmdldEF4ZXNGb3JYQW5kWUZpZWxkcygpLEE9Ry55QXhpcyxMLEMsZSxxLEYscixzLEUseixhLHcsSSxLLGQsZztvLnNldEJCb3godHJ1ZSk7cT1vLmJib3g7aWYoby5fX2V4Y2x1ZGVzKXtmb3IoSz0wLHc9by5fX2V4Y2x1ZGVzLmxlbmd0aDtLPHc7SysrKXtpZihvLl9fZXhjbHVkZXNbS10pe2wtLX19fXM9Ty5heGVzLmdldChBKTtpZihzKXtMPXMuYXBwbHlEYXRhKCk7Rj1MLmZyb207cj1MLnRvfWlmKG8ueUZpZWxkJiYhRXh0LmlzTnVtYmVyKEYpKXtFPW8uZ2V0TWluTWF4WVZhbHVlcygpO0Y9RVswXTtyPUVbMV19aWYoIUV4dC5pc051bWJlcihGKSl7Rj0wfWlmKCFFeHQuaXNOdW1iZXIocikpe3I9MH16PShIP3EuaGVpZ2h0LW0qMjpxLndpZHRoLWgqMikvKHItRik7Qz10O2U9KHQvKChKPzE6bCkqKGMrMSktYykpO2lmKHkgaW4gby5zdHlsZSl7ZT1CKGUsby5zdHlsZVt5XSk7Qz1lKigoSj8xOmwpKihjKzEpLWMpfWE9KEgpP3EueStxLmhlaWdodC1tOnEueCtoO2lmKEope3c9W1tdLFtdXTtmb3IoTT0wLHg9Ti5sZW5ndGg7TTx4O00rKyl7RD1OW01dO3dbMF1bTV09d1swXVtNXXx8MDt3WzFdW01dPXdbMV1bTV18fDA7Zm9yKEs9MDtLPHA7SysrKXtpZihvLl9fZXhjbHVkZXMmJm8uX19leGNsdWRlc1tLXSl7Y29udGludWV9ST1ELmdldCh2W0tdKTt3WysoST4wKV1bTV0rPW4oSSl9fXdbKyhyPjApXS5wdXNoKG4ocikpO3dbKyhGPjApXS5wdXNoKG4oRikpO2c9ay5hcHBseSh1LHdbMF0pO2Q9ay5hcHBseSh1LHdbMV0pO3o9KEg/cS5oZWlnaHQtbSoyOnEud2lkdGgtaCoyKS8oZCtnKTthPWErZyp6KihIPy0xOjEpfWVsc2V7aWYoRi9yPDApe2E9YS1GKnoqKEg/LTE6MSl9fXJldHVybntiYXJzOnYsYmJveDpxLHNocnVua0JhcldpZHRoOkMsYmFyc0xlbjpwLGdyb3VwQmFyc0xlbjpsLGJhcldpZHRoOnQsZ3JvdXBCYXJXaWR0aDplLHNjYWxlOnosemVybzphLHhQYWRkaW5nOmgseVBhZGRpbmc6bSxzaWduZWQ6Ri9yPDAsbWluWTpGLG1heFk6cn19LGdldFBhdGhzOmZ1bmN0aW9uKCl7dmFyIHY9dGhpcyxYPXYuY2hhcnQsYj1YLmdldENoYXJ0U3RvcmUoKSxXPWIuZGF0YS5pdGVtcyxWLEUsTCxHPXYuYm91bmRzPXYuZ2V0Qm91bmRzKCksej12Lml0ZW1zPVtdLFA9di55RmllbGQsbD12Lmd1dHRlci8xMDAsYz12Lmdyb3VwR3V0dGVyLzEwMCxUPVguYW5pbWF0ZSxOPXYuY29sdW1uLHg9di5ncm91cCxtPVguc2hhZG93LFI9di5zaGFkb3dHcm91cHMsUT12LnNoYWRvd0F0dHJpYnV0ZXMscT1SLmxlbmd0aCx5PUcuYmJveCxCPUcuYmFyV2lkdGgsSz1HLnNocnVua0JhcldpZHRoLG49di54UGFkZGluZyxyPXYueVBhZGRpbmcsUz12LnN0YWNrZWQsdz1HLmJhcnNMZW4sTz12LmNvbG9yQXJyYXlTdHlsZSxoPU8mJk8ubGVuZ3RofHwwLEM9TWF0aCxvPUMubWF4LEk9Qy5taW4sdT1DLmFicyxVLFksZSxKLEQsYSxrLHQscyxwLGcsZCxGLEEsTSxIO2ZvcihWPTAsRT1XLmxlbmd0aDtWPEU7VisrKXtMPVdbVl07YT1HLnplcm87az1HLnplcm87Sj0wO0Q9MDt0PWZhbHNlO2ZvcihVPTAsZz0wO1U8dztVKyspe2lmKHYuX19leGNsdWRlcyYmdi5fX2V4Y2x1ZGVzW1VdKXtjb250aW51ZX1ZPUwuZ2V0KEcuYmFyc1tVXSk7ZT1NYXRoLnJvdW5kKChZLW8oRy5taW5ZLDApKSpHLnNjYWxlKTtzPXtmaWxsOk9bKHc+MT9VOjApJWhdfTtpZihOKXtFeHQuYXBwbHkocyx7aGVpZ2h0OmUsd2lkdGg6byhHLmdyb3VwQmFyV2lkdGgsMCkseDooeS54K24rKEItSykqMC41K1YqQiooMStsKStnKkcuZ3JvdXBCYXJXaWR0aCooMStjKSohUykseTphLWV9KX1lbHNle009KEUtMSktVjtFeHQuYXBwbHkocyx7aGVpZ2h0Om8oRy5ncm91cEJhcldpZHRoLDApLHdpZHRoOmUrKGE9PUcuemVybykseDphKyhhIT1HLnplcm8pLHk6KHkueStyKyhCLUspKjAuNStNKkIqKDErbCkrZypHLmdyb3VwQmFyV2lkdGgqKDErYykqIVMrMSl9KX1pZihlPDApe2lmKE4pe3MueT1rO3MuaGVpZ2h0PXUoZSl9ZWxzZXtzLng9aytlO3Mud2lkdGg9dShlKX19aWYoUyl7aWYoZTwwKXtrKz1lKihOPy0xOjEpfWVsc2V7YSs9ZSooTj8tMToxKX1KKz11KGUpO2lmKGU8MCl7RCs9dShlKX19cy54PU1hdGguZmxvb3Iocy54KSsxO0g9TWF0aC5mbG9vcihzLnkpO2lmKCFFeHQuaXNJRTkmJnMueT5IKXtILS19cy55PUg7cy53aWR0aD1NYXRoLmZsb29yKHMud2lkdGgpO3MuaGVpZ2h0PU1hdGguZmxvb3Iocy5oZWlnaHQpO3oucHVzaCh7c2VyaWVzOnYseUZpZWxkOlBbVV0sc3RvcmVJdGVtOkwsdmFsdWU6W0wuZ2V0KHYueEZpZWxkKSxZXSxhdHRyOnMscG9pbnQ6Tj9bcy54K3Mud2lkdGgvMixZPj0wP3MueTpzLnkrcy5oZWlnaHRdOltZPj0wP3MueCtzLndpZHRoOnMueCxzLnkrcy5oZWlnaHQvMl19KTtpZihUJiZYLnJlc2l6aW5nKXtwPU4/e3g6cy54LHk6Ry56ZXJvLHdpZHRoOnMud2lkdGgsaGVpZ2h0OjB9Ont4OkcuemVybyx5OnMueSx3aWR0aDowLGhlaWdodDpzLmhlaWdodH07aWYobSYmKFMmJiF0fHwhUykpe3Q9dHJ1ZTtmb3IoZD0wO2Q8cTtkKyspe0Y9UltkXS5nZXRBdChTP1Y6KFYqdytVKSk7aWYoRil7Ri5zZXRBdHRyaWJ1dGVzKHAsdHJ1ZSl9fX1BPXguZ2V0QXQoVip3K1UpO2lmKEEpe0Euc2V0QXR0cmlidXRlcyhwLHRydWUpfX1nKyt9aWYoUyYmei5sZW5ndGgpe3pbVipnXS50b3RhbERpbT1KO3pbVipnXS50b3RhbE5lZ0RpbT1EfX1pZihTJiZnPT0wKXtmb3IoVj0wLEU9Vy5sZW5ndGg7VjxFO1YrKyl7Zm9yKGQ9MDtkPHE7ZCsrKXtGPVJbZF0uZ2V0QXQoVik7aWYoRil7Ri5oaWRlKHRydWUpfX19fX0scmVuZGVyU2hhZG93czpmdW5jdGlvbih1LHYseSxsKXt2YXIgej10aGlzLHA9ei5jaGFydCxzPXAuc3VyZmFjZSxnPXAuYW5pbWF0ZSx4PXouc3RhY2tlZCxhPXouc2hhZG93R3JvdXBzLHc9ei5zaGFkb3dBdHRyaWJ1dGVzLG89YS5sZW5ndGgsaD1wLmdldENoYXJ0U3RvcmUoKSxkPXouY29sdW1uLHI9ei5pdGVtcyxiPVtdLG09bC56ZXJvLGUscSxrLEEsbix0LGM7aWYoKHgmJih1JWwuZ3JvdXBCYXJzTGVuPT09MCkpfHwheCl7dD11L2wuZ3JvdXBCYXJzTGVuO2ZvcihlPTA7ZTxvO2UrKyl7cT1FeHQuYXBwbHkoe30sd1tlXSk7az1hW2VdLmdldEF0KHg/dDp1KTtFeHQuY29weVRvKHEsdiwieCx5LHdpZHRoLGhlaWdodCIpO2lmKCFrKXtrPXMuYWRkKEV4dC5hcHBseSh7dHlwZToicmVjdCIsZ3JvdXA6YVtlXX0sRXh0LmFwcGx5KHt9LHkscSkpKX1pZih4KXtBPXJbdV0udG90YWxEaW07bj1yW3VdLnRvdGFsTmVnRGltO2lmKGQpe3EueT1tK24tQS0xO3EuaGVpZ2h0PUF9ZWxzZXtxLng9bS1uO3Eud2lkdGg9QX19Yz16LnJlbmRlcmVyKGssaC5nZXRBdCh0KSxxLHUsaCk7Yy5oaWRkZW49ISF2LmhpZGRlbjtpZihnKXt6Lm9uQW5pbWF0ZShrLHt0bzpjfSl9ZWxzZXtrLnNldEF0dHJpYnV0ZXMoYyx0cnVlKX1iLnB1c2goayl9fXJldHVybiBifSxkcmF3U2VyaWVzOmZ1bmN0aW9uKCl7dmFyIEM9dGhpcyxyPUMuY2hhcnQsbT1yLmdldENoYXJ0U3RvcmUoKSx2PXIuc3VyZmFjZSxrPXIuYW5pbWF0ZSxBPUMuc3RhY2tlZCxkPUMuY29sdW1uLGI9ci5zaGFkb3csYT1DLnNoYWRvd0dyb3VwcyxxPWEubGVuZ3RoLG89Qy5ncm91cCxnPUMuc2VyaWVzU3R5bGUscyxwLHkseCxCLHQsYyxlLGgsbixsLHosdSx3O2lmKCFtfHwhbS5nZXRDb3VudCgpfHxDLnNlcmllc0lzSGlkZGVuKXtDLmhpZGUoKTtDLml0ZW1zPVtdO3JldHVybn1sPUV4dC5hcHBseSh7fSx0aGlzLnN0eWxlLGcpO2RlbGV0ZSBsLmZpbGw7ZGVsZXRlIGwueDtkZWxldGUgbC55O2RlbGV0ZSBsLndpZHRoO2RlbGV0ZSBsLmhlaWdodDtDLnVuSGlnaGxpZ2h0SXRlbSgpO0MuY2xlYW5IaWdobGlnaHRzKCk7Qy5nZXRQYXRocygpO249Qy5ib3VuZHM7cz1DLml0ZW1zO0I9ZD97eTpuLnplcm8saGVpZ2h0OjB9Ont4Om4uemVybyx3aWR0aDowfTtwPXMubGVuZ3RoO2Zvcih5PTA7eTxwO3krKyl7dD1vLmdldEF0KHkpO3o9c1t5XS5hdHRyO2lmKGIpe3NbeV0uc2hhZG93cz1DLnJlbmRlclNoYWRvd3MoeSx6LEIsbil9aWYoIXQpe3U9RXh0LmFwcGx5KHt9LEIseik7dT1FeHQuYXBwbHkodSxsfHx7fSk7dD12LmFkZChFeHQuYXBwbHkoe30se3R5cGU6InJlY3QiLGdyb3VwOm99LHUpKX1pZihrKXtjPUMucmVuZGVyZXIodCxtLmdldEF0KHkpLHoseSxtKTt0Ll90bz1jO3c9Qy5vbkFuaW1hdGUodCx7dG86RXh0LmFwcGx5KGMsbCl9KTtpZihiJiZBJiYoeSVuLmJhcnNMZW49PT0wKSl7eD15L24uYmFyc0xlbjtmb3IoZT0wO2U8cTtlKyspe3cub24oImFmdGVyYW5pbWF0ZSIsZnVuY3Rpb24oKXt0aGlzLnNob3codHJ1ZSl9LGFbZV0uZ2V0QXQoeCkpfX19ZWxzZXtjPUMucmVuZGVyZXIodCxtLmdldEF0KHkpLEV4dC5hcHBseSh6LHtoaWRkZW46ZmFsc2V9KSx5LG0pO3Quc2V0QXR0cmlidXRlcyhFeHQuYXBwbHkoYyxsKSx0cnVlKX1zW3ldLnNwcml0ZT10fXA9by5nZXRDb3VudCgpO2Zvcih4PXk7eDxwO3grKyl7by5nZXRBdCh4KS5oaWRlKHRydWUpfWlmKEMuc3RhY2tlZCl7eT1tLmdldENvdW50KCl9aWYoYil7Zm9yKGU9MDtlPHE7ZSsrKXtoPWFbZV07cD1oLmdldENvdW50KCk7Zm9yKHg9eTt4PHA7eCsrKXtoLmdldEF0KHgpLmhpZGUodHJ1ZSl9fX1DLnJlbmRlckxhYmVscygpfSxvbkNyZWF0ZUxhYmVsOmZ1bmN0aW9uKGUsbCxkLGcpe3ZhciBoPXRoaXMsYT1oLmNoYXJ0LnN1cmZhY2Usaz1oLmxhYmVsc0dyb3VwLGI9aC5sYWJlbCxjPUV4dC5hcHBseSh7fSxiLGguc2VyaWVzTGFiZWxTdHlsZXx8e30pLGo7cmV0dXJuIGEuYWRkKEV4dC5hcHBseSh7dHlwZToidGV4dCIsZ3JvdXA6a30sY3x8e30pKX0sb25QbGFjZUxhYmVsOmZ1bmN0aW9uKEcsTixzLEoscCxILEksdil7dmFyIG09dGhpcyxuPW0uYm91bmRzLGQ9bi5ncm91cEJhcldpZHRoLEY9bS5jb2x1bW4sTD1tLmNoYXJ0LHU9TC5jaGFydEJCb3gsQT1MLnJlc2l6aW5nLG89cy52YWx1ZVswXSxPPXMudmFsdWVbMV0sbD1zLmF0dHIsej1tLmxhYmVsLEs9ei5vcmllbnRhdGlvbj09InZlcnRpY2FsIixoPVtdLmNvbmNhdCh6LmZpZWxkKSx0PXoucmVuZGVyZXIscj10KE4uZ2V0KGhbdl0pKSxnPW0uZ2V0TGFiZWxTaXplKHIpLGE9Zy53aWR0aCxjPWcuaGVpZ2h0LGI9bi56ZXJvLGs9Im91dHNpZGUiLHE9Imluc2lkZVN0YXJ0IixNPSJpbnNpZGVFbmQiLEU9MTAsQz02LGU9bi5zaWduZWQsRCxCLHc7Ry5zZXRBdHRyaWJ1dGVzKHt0ZXh0OnJ9KTtHLmlzT3V0c2lkZT1mYWxzZTtpZihGKXtpZihwPT1rKXtpZihjK0MrbC5oZWlnaHQ+KE8+PTA/Yi11Lnk6dS55K3UuaGVpZ2h0LWIpKXtwPU19fWVsc2V7aWYoYytDPmwuaGVpZ2h0KXtwPWs7Ry5pc091dHNpZGU9dHJ1ZX19RD1sLngrZC8yO0I9cD09cT8oYisoKGMvMiszKSooTz49MD8tMToxKSkpOihPPj0wPyhsLnkrKChjLzIrMykqKHA9PWs/LTE6MSkpKToobC55K2wuaGVpZ2h0KygoYy8yKzMpKihwPT09az8xOi0xKSkpKX1lbHNle2lmKHA9PWspe2lmKGErRStsLndpZHRoPihPPj0wP3UueCt1LndpZHRoLWI6Yi11LngpKXtwPU19fWVsc2V7aWYoYStFPmwud2lkdGgpe3A9aztHLmlzT3V0c2lkZT10cnVlfX1EPXA9PXE/KGIrKChhLzIrNSkqKE8+PTA/MTotMSkpKTooTz49MD8obC54K2wud2lkdGgrKChhLzIrNSkqKHA9PT1rPzE6LTEpKSk6KGwueCsoKGEvMis1KSoocD09PWs/LTE6MSkpKSk7Qj1sLnkrZC8yfXc9e3g6RCx5OkJ9O2lmKEspe3cucm90YXRlPXt4OkQseTpCLGRlZ3JlZXM6MjcwfX1pZihIJiZBKXtpZihGKXtEPWwueCtsLndpZHRoLzI7Qj1ifWVsc2V7RD1iO0I9bC55K2wuaGVpZ2h0LzJ9Ry5zZXRBdHRyaWJ1dGVzKHt4OkQseTpCfSx0cnVlKTtpZihLKXtHLnNldEF0dHJpYnV0ZXMoe3JvdGF0ZTp7eDpELHk6QixkZWdyZWVzOjI3MH19LHRydWUpfX1pZihIKXttLm9uQW5pbWF0ZShHLHt0bzp3fSl9ZWxzZXtHLnNldEF0dHJpYnV0ZXMoRXh0LmFwcGx5KHcse2hpZGRlbjpmYWxzZX0pLHRydWUpfX0sZ2V0TGFiZWxTaXplOmZ1bmN0aW9uKGcpe3ZhciBrPXRoaXMudGVzdGVyTGFiZWwsYT10aGlzLmxhYmVsLGQ9RXh0LmFwcGx5KHt9LGEsdGhpcy5zZXJpZXNMYWJlbFN0eWxlfHx7fSksYj1hLm9yaWVudGF0aW9uPT09InZlcnRpY2FsIixqLGksZSxjO2lmKCFrKXtrPXRoaXMudGVzdGVyTGFiZWw9dGhpcy5jaGFydC5zdXJmYWNlLmFkZChFeHQuYXBwbHkoe3R5cGU6InRleHQiLG9wYWNpdHk6MH0sZCkpfWsuc2V0QXR0cmlidXRlcyh7dGV4dDpnfSx0cnVlKTtqPWsuZ2V0QkJveCgpO2k9ai53aWR0aDtlPWouaGVpZ2h0O3JldHVybnt3aWR0aDpiP2U6aSxoZWlnaHQ6Yj9pOmV9fSxvbkFuaW1hdGU6ZnVuY3Rpb24oYixhKXtiLnNob3coKTtyZXR1cm4gdGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGlzSXRlbUluUG9pbnQ6ZnVuY3Rpb24oYSxkLGIpe3ZhciBjPWIuc3ByaXRlLmdldEJCb3goKTtyZXR1cm4gYy54PD1hJiZjLnk8PWQmJihjLngrYy53aWR0aCk+PWEmJihjLnkrYy5oZWlnaHQpPj1kfSxoaWRlQWxsOmZ1bmN0aW9uKGEpe3ZhciBlPXRoaXMuY2hhcnQuYXhlcyxjPWUuaXRlbXMsZD1jLmxlbmd0aCxiPTA7YT0oaXNOYU4odGhpcy5faW5kZXgpP2E6dGhpcy5faW5kZXgpfHwwO2lmKCF0aGlzLl9fZXhjbHVkZXMpe3RoaXMuX19leGNsdWRlcz1bXX10aGlzLl9fZXhjbHVkZXNbYV09dHJ1ZTt0aGlzLmRyYXdTZXJpZXMoKTtmb3IoYjtiPGQ7YisrKXtjW2JdLmRyYXdBeGlzKCl9fSxzaG93QWxsOmZ1bmN0aW9uKGEpe3ZhciBlPXRoaXMuY2hhcnQuYXhlcyxjPWUuaXRlbXMsZD1jLmxlbmd0aCxiPTA7YT0oaXNOYU4odGhpcy5faW5kZXgpP2E6dGhpcy5faW5kZXgpfHwwO2lmKCF0aGlzLl9fZXhjbHVkZXMpe3RoaXMuX19leGNsdWRlcz1bXX10aGlzLl9fZXhjbHVkZXNbYV09ZmFsc2U7dGhpcy5kcmF3U2VyaWVzKCk7Zm9yKGI7YjxkO2IrKyl7Y1tiXS5kcmF3QXhpcygpfX0sZ2V0TGVnZW5kQ29sb3I6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxiPWMuY29sb3JBcnJheVN0eWxlLmxlbmd0aDtpZihjLnN0eWxlJiZjLnN0eWxlLmZpbGwpe3JldHVybiBjLnN0eWxlLmZpbGx9ZWxzZXtyZXR1cm4gYy5jb2xvckFycmF5U3R5bGVbYSViXX19LGhpZ2hsaWdodEl0ZW06ZnVuY3Rpb24oYSl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5yZW5kZXJMYWJlbHMoKX0sdW5IaWdobGlnaHRJdGVtOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5yZW5kZXJMYWJlbHMoKX0sY2xlYW5IaWdobGlnaHRzOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5yZW5kZXJMYWJlbHMoKX19KTtFeHQuZGVmaW5lKCJFeHQuY2hhcnQuc2VyaWVzLkNvbHVtbiIse2FsdGVybmF0ZUNsYXNzTmFtZTpbIkV4dC5jaGFydC5Db2x1bW5TZXJpZXMiLCJFeHQuY2hhcnQuQ29sdW1uQ2hhcnQiLCJFeHQuY2hhcnQuU3RhY2tlZENvbHVtbkNoYXJ0Il0sZXh0ZW5kOiJFeHQuY2hhcnQuc2VyaWVzLkJhciIsdHlwZToiY29sdW1uIixhbGlhczoic2VyaWVzLmNvbHVtbiIsY29sdW1uOnRydWUseFBhZGRpbmc6MTAseVBhZGRpbmc6MH0pO0V4dC5kZWZpbmUoIkV4dC5jaGFydC5zZXJpZXMuR2F1Z2UiLHtleHRlbmQ6IkV4dC5jaGFydC5zZXJpZXMuU2VyaWVzIix0eXBlOiJnYXVnZSIsYWxpYXM6InNlcmllcy5nYXVnZSIscmFkOk1hdGguUEkvMTgwLGhpZ2hsaWdodER1cmF0aW9uOjE1MCxhbmdsZUZpZWxkOmZhbHNlLG5lZWRsZTpmYWxzZSxkb251dDpmYWxzZSxzaG93SW5MZWdlbmQ6ZmFsc2Usc3R5bGU6e30sY29uc3RydWN0b3I6ZnVuY3Rpb24oYil7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dmFyIGg9dGhpcyxnPWguY2hhcnQsYT1nLnN1cmZhY2Usaj1nLnN0b3JlLGs9Zy5zaGFkb3csZCxjLGU7RXh0LmFwcGx5KGgsYix7c2hhZG93QXR0cmlidXRlczpbeyJzdHJva2Utd2lkdGgiOjYsInN0cm9rZS1vcGFjaXR5IjoxLHN0cm9rZToicmdiKDIwMCwgMjAwLCAyMDApIix0cmFuc2xhdGU6e3g6MS4yLHk6Mn19LHsic3Ryb2tlLXdpZHRoIjo0LCJzdHJva2Utb3BhY2l0eSI6MSxzdHJva2U6InJnYigxNTAsIDE1MCwgMTUwKSIsdHJhbnNsYXRlOnt4OjAuOSx5OjEuNX19LHsic3Ryb2tlLXdpZHRoIjoyLCJzdHJva2Utb3BhY2l0eSI6MSxzdHJva2U6InJnYigxMDAsIDEwMCwgMTAwKSIsdHJhbnNsYXRlOnt4OjAuNix5OjF9fV19KTtoLmdyb3VwPWEuZ2V0R3JvdXAoaC5zZXJpZXNJZCk7aWYoayl7Zm9yKGQ9MCxjPWguc2hhZG93QXR0cmlidXRlcy5sZW5ndGg7ZDxjO2QrKyl7aC5zaGFkb3dHcm91cHMucHVzaChhLmdldEdyb3VwKGguc2VyaWVzSWQrIi1zaGFkb3dzIitkKSl9fWEuY3VzdG9tQXR0cmlidXRlcy5zZWdtZW50PWZ1bmN0aW9uKGkpe3JldHVybiBoLmdldFNlZ21lbnQoaSl9fSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxhPWQuY2hhcnQuZ2V0Q2hhcnRTdG9yZSgpLGU9YS5kYXRhLml0ZW1zLGIsYyxnO2QueUZpZWxkPVtdO2lmKGQubGFiZWwuZmllbGQpe2ZvcihiPTAsYz1lLmxlbmd0aDtiPGM7YisrKXtnPWVbYl07ZC55RmllbGQucHVzaChnLmdldChkLmxhYmVsLmZpZWxkKSl9fX0sZ2V0U2VnbWVudDpmdW5jdGlvbihiKXt2YXIgQz10aGlzLEI9Qy5yYWQsZD1NYXRoLmNvcyxhPU1hdGguc2luLG49TWF0aC5hYnMsaz1DLmNlbnRlclgsaT1DLmNlbnRlclksdz0wLHY9MCx1PTAscz0wLGg9MCxnPTAsZT0wLGM9MCx6PTAuMDEsbT1iLmVuZFJoby1iLnN0YXJ0UmhvLHE9Yi5zdGFydEFuZ2xlLHA9Yi5lbmRBbmdsZSxqPShxK3ApLzIqQixsPWIubWFyZ2lufHwwLHQ9bihwLXEpPjE4MCxEPU1hdGgubWluKHEscCkqQixBPU1hdGgubWF4KHEscCkqQixvPWZhbHNlO2srPWwqZChqKTtpKz1sKmEoaik7dz1rK2Iuc3RhcnRSaG8qZChEKTtoPWkrYi5zdGFydFJobyphKEQpO3Y9aytiLmVuZFJobypkKEQpO2c9aStiLmVuZFJobyphKEQpO3U9aytiLnN0YXJ0UmhvKmQoQSk7ZT1pK2Iuc3RhcnRSaG8qYShBKTtzPWsrYi5lbmRSaG8qZChBKTtjPWkrYi5lbmRSaG8qYShBKTtpZihuKHctdSk8PXomJm4oaC1lKTw9eil7bz10cnVlfWlmKG8pe3JldHVybntwYXRoOltbIk0iLHcsaF0sWyJMIix2LGddLFsiQSIsYi5lbmRSaG8sYi5lbmRSaG8sMCwrdCwxLHMsY10sWyJaIl1dfX1lbHNle3JldHVybntwYXRoOltbIk0iLHcsaF0sWyJMIix2LGddLFsiQSIsYi5lbmRSaG8sYi5lbmRSaG8sMCwrdCwxLHMsY10sWyJMIix1LGVdLFsiQSIsYi5zdGFydFJobyxiLnN0YXJ0UmhvLDAsK3QsMCx3LGhdLFsiWiJdXX19fSxjYWxjTWlkZGxlOmZ1bmN0aW9uKHApe3ZhciBrPXRoaXMsbD1rLnJhZCxvPXAuc2xpY2Usbj1rLmNlbnRlclgsbT1rLmNlbnRlclksaj1vLnN0YXJ0QW5nbGUsZT1vLmVuZEFuZ2xlLGk9TWF0aC5tYXgoKCJyaG8iIGluIG8pP28ucmhvOmsucmFkaXVzLGsubGFiZWwubWluTWFyZ2luKSxoPStrLmRvbnV0LGI9TWF0aC5taW4oaixlKSpsLGE9TWF0aC5tYXgoaixlKSpsLGQ9LShiKyhhLWIpLzIpLGc9bisocC5lbmRSaG8rcC5zdGFydFJobykvMipNYXRoLmNvcyhkKSxjPW0tKHAuZW5kUmhvK3Auc3RhcnRSaG8pLzIqTWF0aC5zaW4oZCk7cC5taWRkbGU9e3g6Zyx5OmN9fSxkcmF3U2VyaWVzOmZ1bmN0aW9uKCl7dmFyIHc9dGhpcyxXPXcuY2hhcnQsYj1XLmdldENoYXJ0U3RvcmUoKSxBPXcuZ3JvdXAsUz13LmNoYXJ0LmFuaW1hdGUsRD13LmNoYXJ0LmF4ZXMuZ2V0KDApLEU9RCYmRC5taW5pbXVtfHx3Lm1pbmltdW18fDAsST1EJiZELm1heGltdW18fHcubWF4aW11bXx8MCxuPXcuYW5nbGVGaWVsZHx8dy5maWVsZHx8dy54RmllbGQsTT1XLnN1cmZhY2UsSD1XLmNoYXJ0QkJveCxoPXcucmFkLGM9K3cuZG9udXQsWD17fSxCPVtdLG09dy5zZXJpZXNTdHlsZSxhPXcuc2VyaWVzTGFiZWxTdHlsZSxnPXcuY29sb3JBcnJheVN0eWxlLHo9ZyYmZy5sZW5ndGh8fDAsSz1XLm1heEd1dHRlclswXSxKPVcubWF4R3V0dGVyWzFdLGs9TWF0aC5jb3Mscz1NYXRoLnNpbix0LGUsZCx2LHIsQyxPLEYsRyxMLFUsVCxsLFYseCxvLFEsUixxLHksdSxQLE47RXh0LmFwcGx5KG0sdy5zdHlsZXx8e30pO3cuc2V0QkJveCgpO3k9dy5iYm94O2lmKHcuY29sb3JTZXQpe2c9dy5jb2xvclNldDt6PWcubGVuZ3RofWlmKCFifHwhYi5nZXRDb3VudCgpfHx3LnNlcmllc0lzSGlkZGVuKXt3LmhpZGUoKTt3Lml0ZW1zPVtdO3JldHVybn1lPXcuY2VudGVyWD1ILngrKEgud2lkdGgvMik7ZD13LmNlbnRlclk9SC55K0guaGVpZ2h0O3cucmFkaXVzPU1hdGgubWluKGUtSC54LGQtSC55KTt3LnNsaWNlcz1yPVtdO3cuaXRlbXM9Qj1bXTtpZighdy52YWx1ZSl7TD1iLmdldEF0KDApO3cudmFsdWU9TC5nZXQobil9Tz13LnZhbHVlO2lmKHcubmVlZGxlKXtQPXtzZXJpZXM6dyx2YWx1ZTpPLHN0YXJ0QW5nbGU6LTE4MCxlbmRBbmdsZTowLHJobzp3LnJhZGl1c307dT0tMTgwKigxLShPLUUpLyhJLUUpKTtyLnB1c2goUCl9ZWxzZXt1PS0xODAqKDEtKE8tRSkvKEktRSkpO1A9e3Nlcmllczp3LHZhbHVlOk8sc3RhcnRBbmdsZTotMTgwLGVuZEFuZ2xlOnUscmhvOncucmFkaXVzfTtOPXtzZXJpZXM6dyx2YWx1ZTp3Lm1heGltdW0tTyxzdGFydEFuZ2xlOnUsZW5kQW5nbGU6MCxyaG86dy5yYWRpdXN9O3IucHVzaChQLE4pfWZvcihVPTAsRz1yLmxlbmd0aDtVPEc7VSsrKXt2PXJbVV07Qz1BLmdldEF0KFUpO3Q9RXh0LmFwcGx5KHtzZWdtZW50OntzdGFydEFuZ2xlOnYuc3RhcnRBbmdsZSxlbmRBbmdsZTp2LmVuZEFuZ2xlLG1hcmdpbjowLHJobzp2LnJobyxzdGFydFJobzp2LnJobyorYy8xMDAsZW5kUmhvOnYucmhvfX0sRXh0LmFwcGx5KG0sZyYme2ZpbGw6Z1tVJXpdfXx8e30pKTtGPUV4dC5hcHBseSh7fSx0LnNlZ21lbnQse3NsaWNlOnYsc2VyaWVzOncsc3RvcmVJdGVtOkwsaW5kZXg6VX0pO0JbVV09RjtpZighQyl7cT1FeHQuYXBwbHkoe3R5cGU6InBhdGgiLGdyb3VwOkF9LEV4dC5hcHBseShtLGcmJntmaWxsOmdbVSV6XX18fHt9KSk7Qz1NLmFkZChFeHQuYXBwbHkocSx0KSl9di5zcHJpdGU9di5zcHJpdGV8fFtdO0Yuc3ByaXRlPUM7di5zcHJpdGUucHVzaChDKTtpZihTKXt0PXcucmVuZGVyZXIoQyxMLHQsVSxiKTtDLl90bz10O3cub25BbmltYXRlKEMse3RvOnR9KX1lbHNle3Q9dy5yZW5kZXJlcihDLEwsRXh0LmFwcGx5KHQse2hpZGRlbjpmYWxzZX0pLFUsYik7Qy5zZXRBdHRyaWJ1dGVzKHQsdHJ1ZSl9fWlmKHcubmVlZGxlKXt1PXUqTWF0aC5QSS8xODA7aWYoIXcubmVlZGxlU3ByaXRlKXt3Lm5lZWRsZVNwcml0ZT13LmNoYXJ0LnN1cmZhY2UuYWRkKHt0eXBlOiJwYXRoIixwYXRoOlsiTSIsZSsody5yYWRpdXMqK2MvMTAwKSprKHUpLGQrLU1hdGguYWJzKCh3LnJhZGl1cyorYy8xMDApKnModSkpLCJMIixlK3cucmFkaXVzKmsodSksZCstTWF0aC5hYnMody5yYWRpdXMqcyh1KSldLCJzdHJva2Utd2lkdGgiOjQsc3Ryb2tlOiIjMjIyIn0pfWVsc2V7aWYoUyl7dy5vbkFuaW1hdGUody5uZWVkbGVTcHJpdGUse3RvOntwYXRoOlsiTSIsZSsody5yYWRpdXMqK2MvMTAwKSprKHUpLGQrLU1hdGguYWJzKCh3LnJhZGl1cyorYy8xMDApKnModSkpLCJMIixlK3cucmFkaXVzKmsodSksZCstTWF0aC5hYnMody5yYWRpdXMqcyh1KSldfX0pfWVsc2V7dy5uZWVkbGVTcHJpdGUuc2V0QXR0cmlidXRlcyh7dHlwZToicGF0aCIscGF0aDpbIk0iLGUrKHcucmFkaXVzKitjLzEwMCkqayh1KSxkKy1NYXRoLmFicygody5yYWRpdXMqK2MvMTAwKSpzKHUpKSwiTCIsZSt3LnJhZGl1cyprKHUpLGQrLU1hdGguYWJzKHcucmFkaXVzKnModSkpXX0pfX13Lm5lZWRsZVNwcml0ZS5zZXRBdHRyaWJ1dGVzKHtoaWRkZW46ZmFsc2V9LHRydWUpfWRlbGV0ZSB3LnZhbHVlfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXt0aGlzLnZhbHVlPWE7dGhpcy5kcmF3U2VyaWVzKCl9LG9uQ3JlYXRlTGFiZWw6ZnVuY3Rpb24oYyxiLGEsZCl7fSxvblBsYWNlTGFiZWw6ZnVuY3Rpb24oYyxnLGUsZCxoLGEsYil7fSxvblBsYWNlQ2FsbG91dDpmdW5jdGlvbigpe30sb25BbmltYXRlOmZ1bmN0aW9uKGIsYSl7Yi5zaG93KCk7cmV0dXJuIHRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxpc0l0ZW1JblBvaW50OmZ1bmN0aW9uKGwsaixuLGUpe3ZhciBoPXRoaXMsZD1oLmNlbnRlclgsYz1oLmNlbnRlclkscD1NYXRoLmFicyxvPXAobC1kKSxtPXAoai1jKSxnPW4uc3RhcnRBbmdsZSxhPW4uZW5kQW5nbGUsaz1NYXRoLnNxcnQobypvK20qbSksYj1NYXRoLmF0YW4yKGotYyxsLWQpL2gucmFkO3JldHVybihlPT09MCkmJihiPj1nJiZiPGEmJms+PW4uc3RhcnRSaG8mJms8PW4uZW5kUmhvKX0sc2hvd0FsbDpmdW5jdGlvbigpe2lmKCFpc05hTih0aGlzLl9pbmRleCkpe3RoaXMuX19leGNsdWRlc1t0aGlzLl9pbmRleF09ZmFsc2U7dGhpcy5kcmF3U2VyaWVzKCl9fSxnZXRMZWdlbmRDb2xvcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO3JldHVybiBiLmNvbG9yQXJyYXlTdHlsZVthJWIuY29sb3JBcnJheVN0eWxlLmxlbmd0aF19fSk7RXh0LmRlZmluZSgiRXh0LmNoYXJ0LnNlcmllcy5MaW5lIix7ZXh0ZW5kOiJFeHQuY2hhcnQuc2VyaWVzLkNhcnRlc2lhbiIsYWx0ZXJuYXRlQ2xhc3NOYW1lOlsiRXh0LmNoYXJ0LkxpbmVTZXJpZXMiLCJFeHQuY2hhcnQuTGluZUNoYXJ0Il0scmVxdWlyZXM6WyJFeHQuY2hhcnQuYXhpcy5BeGlzIiwiRXh0LmNoYXJ0LlNoYXBlIiwiRXh0LmRyYXcuRHJhdyIsIkV4dC5meC5BbmltIl0sdHlwZToibGluZSIsYWxpYXM6InNlcmllcy5saW5lIixzZWxlY3Rpb25Ub2xlcmFuY2U6MjAsc2hvd01hcmtlcnM6dHJ1ZSxtYXJrZXJDb25maWc6e30sc3R5bGU6e30sc21vb3RoOmZhbHNlLGRlZmF1bHRTbW9vdGhuZXNzOjMsZmlsbDpmYWxzZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihjKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt2YXIgZT10aGlzLGE9ZS5jaGFydC5zdXJmYWNlLGc9ZS5jaGFydC5zaGFkb3csZCxiO2MuaGlnaGxpZ2h0Q2ZnPUV4dC5PYmplY3QubWVyZ2UoeyJzdHJva2Utd2lkdGgiOjN9LGMuaGlnaGxpZ2h0Q2ZnKTtFeHQuYXBwbHkoZSxjLHtzaGFkb3dBdHRyaWJ1dGVzOlt7InN0cm9rZS13aWR0aCI6Niwic3Ryb2tlLW9wYWNpdHkiOjAuMDUsc3Ryb2tlOiJyZ2IoMCwgMCwgMCkiLHRyYW5zbGF0ZTp7eDoxLHk6MX19LHsic3Ryb2tlLXdpZHRoIjo0LCJzdHJva2Utb3BhY2l0eSI6MC4xLHN0cm9rZToicmdiKDAsIDAsIDApIix0cmFuc2xhdGU6e3g6MSx5OjF9fSx7InN0cm9rZS13aWR0aCI6Miwic3Ryb2tlLW9wYWNpdHkiOjAuMTUsc3Ryb2tlOiJyZ2IoMCwgMCwgMCkiLHRyYW5zbGF0ZTp7eDoxLHk6MX19XX0pO2UuZ3JvdXA9YS5nZXRHcm91cChlLnNlcmllc0lkKTtpZihlLnNob3dNYXJrZXJzKXtlLm1hcmtlckdyb3VwPWEuZ2V0R3JvdXAoZS5zZXJpZXNJZCsiLW1hcmtlcnMiKX1pZihnKXtmb3IoZD0wLGI9ZS5zaGFkb3dBdHRyaWJ1dGVzLmxlbmd0aDtkPGI7ZCsrKXtlLnNoYWRvd0dyb3Vwcy5wdXNoKGEuZ2V0R3JvdXAoZS5zZXJpZXNJZCsiLXNoYWRvd3MiK2QpKX19fSxzaHJpbms6ZnVuY3Rpb24oYixrLGwpe3ZhciBoPWIubGVuZ3RoLGo9TWF0aC5mbG9vcihoL2wpLGc9MSxkPTAsYT0wLGU9WytiWzBdXSxjPVsra1swXV07Zm9yKDtnPGg7KytnKXtkKz0rYltnXXx8MDthKz0ra1tnXXx8MDtpZihnJWo9PTApe2UucHVzaChkL2opO2MucHVzaChhL2opO2Q9MDthPTB9fXJldHVybnt4OmUseTpjfX0sZHJhd1NlcmllczpmdW5jdGlvbigpe3ZhciBhbj10aGlzLGFBPWFuLmNoYXJ0LFY9YUEuYXhlcyxhdj1hQS5nZXRDaGFydFN0b3JlKCksQT1hdi5kYXRhLml0ZW1zLGFyLFk9YXYuZ2V0Q291bnQoKSx3PWFuLmNoYXJ0LnN1cmZhY2UsYXU9e30sVT1hbi5ncm91cCxOPWFuLnNob3dNYXJrZXJzLGFHPWFuLm1hcmtlckdyb3VwLEc9YUEuc2hhZG93LEY9YW4uc2hhZG93R3JvdXBzLGFiPWFuLnNoYWRvd0F0dHJpYnV0ZXMsUj1hbi5zbW9vdGgscj1GLmxlbmd0aCxheT1bIk0iXSxXPVsiTSJdLGQ9WyJNIl0sYj1bIk0iXSxNPWFBLm1hcmtlckluZGV4LGFtPVtdLmNvbmNhdChhbi5heGlzKSxhbCxhQj1bXSxhaz17fSxhZT1bXSx6PXt9LEw9ZmFsc2UsVD1bXSxhRj1hbi5tYXJrZXJTdHlsZSxhZD1hbi5zZXJpZXNTdHlsZSx2PWFuLmNvbG9yQXJyYXlTdHlsZSxTPXYmJnYubGVuZ3RofHwwLE89RXh0LmlzTnVtYmVyLGFDPWFuLnNlcmllc0lkeCxoPWFuLmdldEF4ZXNGb3JYQW5kWUZpZWxkcygpLG09aC54QXhpcyxhRT1oLnlBeGlzLGFnLGssYWYsYWgsRCxjLGFpLEssSixnLGUsdSxzLGFhLFEsUCxheixuLEksSCxhSCxvLHEsRSxhLGFjLGFqLEMsYXgsQixhdyxwLGFELGF0LGFxLFgsbCx0LGFvLGFwLFo7aWYoYW4uZmlyZUV2ZW50KCJiZWZvcmVkcmF3Iixhbik9PT1mYWxzZSl7cmV0dXJufWlmKCFZfHxhbi5zZXJpZXNJc0hpZGRlbil7YW4uaGlkZSgpO2FuLml0ZW1zPVtdO2lmKGFuLmxpbmUpe2FuLmxpbmUuaGlkZSh0cnVlKTtpZihhbi5saW5lLnNoYWRvd3Mpe2FnPWFuLmxpbmUuc2hhZG93cztmb3IoUD0wLHI9YWcubGVuZ3RoO1A8cjtQKyspe2s9YWdbUF07ay5oaWRlKHRydWUpfX1pZihhbi5maWxsUGF0aCl7YW4uZmlsbFBhdGguaGlkZSh0cnVlKX19YW4ubGluZT1udWxsO2FuLmZpbGxQYXRoPW51bGw7cmV0dXJufWF0PUV4dC5hcHBseShhRnx8e30sYW4ubWFya2VyQ29uZmlnLHtmaWxsOmFuLnNlcmllc1N0eWxlLmZpbGx8fHZbYUMldi5sZW5ndGhdfSk7WD1hdC50eXBlO2RlbGV0ZSBhdC50eXBlO2FxPWFkO2lmKCFhcVsic3Ryb2tlLXdpZHRoIl0pe2FxWyJzdHJva2Utd2lkdGgiXT0wLjV9dD0ib3BhY2l0eSIgaW4gYXE/YXEub3BhY2l0eToxO1o9Im9wYWNpdHkiIGluIGFxP2FxLm9wYWNpdHk6MC4zO2FvPSJsaW5lT3BhY2l0eSIgaW4gYXE/YXEubGluZU9wYWNpdHk6dDthcD0iZmlsbE9wYWNpdHkiIGluIGFxP2FxLmZpbGxPcGFjaXR5Olo7aWYoTSYmYUcmJmFHLmdldENvdW50KCkpe2ZvcihRPTA7UTxNO1ErKyl7SD1hRy5nZXRBdChRKTthRy5yZW1vdmUoSCk7YUcuYWRkKEgpO2FIPWFHLmdldEF0KGFHLmdldENvdW50KCktMik7SC5zZXRBdHRyaWJ1dGVzKHt4OjAseTowLHRyYW5zbGF0ZTp7eDphSC5hdHRyLnRyYW5zbGF0aW9uLngseTphSC5hdHRyLnRyYW5zbGF0aW9uLnl9fSx0cnVlKX19YW4udW5IaWdobGlnaHRJdGVtKCk7YW4uY2xlYW5IaWdobGlnaHRzKCk7YW4uc2V0QkJveCgpO2F1PWFuLmJib3g7YW4uY2xpcFJlY3Q9W2F1LngsYXUueSxhdS53aWR0aCxhdS5oZWlnaHRdO2lmKG49Vi5nZXQobSkpe0k9bi5hcHBseURhdGEoKTtDPUkuZnJvbTtheD1JLnRvfWlmKG49Vi5nZXQoYUUpKXtJPW4uYXBwbHlEYXRhKCk7Qj1JLmZyb207YXc9SS50b31pZihhbi54RmllbGQmJiFFeHQuaXNOdW1iZXIoQykpe249YW4uZ2V0TWluTWF4WFZhbHVlcygpO0M9blswXTtheD1uWzFdfWlmKGFuLnlGaWVsZCYmIUV4dC5pc051bWJlcihCKSl7bj1hbi5nZXRNaW5NYXhZVmFsdWVzKCk7Qj1uWzBdO2F3PW5bMV19aWYoaXNOYU4oQykpe0M9MDthYz1hdS53aWR0aC8oKFktMSl8fDEpfWVsc2V7YWM9YXUud2lkdGgvKChheC1DKXx8KFktMSl8fDEpfWlmKGlzTmFOKEIpKXtCPTA7YWo9YXUuaGVpZ2h0LygoWS0xKXx8MSl9ZWxzZXthaj1hdS5oZWlnaHQvKChhdy1CKXx8KFktMSl8fDEpfWZvcihRPTAsYXo9QS5sZW5ndGg7UTxhejtRKyspe2FyPUFbUV07cT1hci5nZXQoYW4ueEZpZWxkKTtpZih0eXBlb2YgcT09InN0cmluZyJ8fHR5cGVvZiBxPT0ib2JqZWN0IiYmIUV4dC5pc0RhdGUocSl8fG0mJlYuZ2V0KG0pJiZWLmdldChtKS50eXBlPT0iQ2F0ZWdvcnkiKXtpZihxIGluIGFrKXtxPWFrW3FdfWVsc2V7cT1ha1txXT1RfX1FPWFyLmdldChhbi55RmllbGQpO2lmKHR5cGVvZiBFPT0idW5kZWZpbmVkInx8KHR5cGVvZiBFPT0ic3RyaW5nIiYmIUUpKXtjb250aW51ZX1pZih0eXBlb2YgRT09InN0cmluZyJ8fHR5cGVvZiBFPT0ib2JqZWN0IiYmIUV4dC5pc0RhdGUoRSl8fGFFJiZWLmdldChhRSkmJlYuZ2V0KGFFKS50eXBlPT0iQ2F0ZWdvcnkiKXtFPVF9VC5wdXNoKFEpO2FCLnB1c2gocSk7YWUucHVzaChFKX1hej1hQi5sZW5ndGg7aWYoYXo+YXUud2lkdGgpe2E9YW4uc2hyaW5rKGFCLGFlLGF1LndpZHRoKTthQj1hLng7YWU9YS55fWFuLml0ZW1zPVtdO2w9MDthej1hQi5sZW5ndGg7Zm9yKFE9MDtRPGF6O1ErKyl7cT1hQltRXTtFPWFlW1FdO2lmKEU9PT1mYWxzZSl7aWYoVy5sZW5ndGg9PTEpe1c9W119TD10cnVlO2FuLml0ZW1zLnB1c2goZmFsc2UpO2NvbnRpbnVlfWVsc2V7Sz0oYXUueCsocS1DKSphYykudG9GaXhlZCgyKTtKPSgoYXUueSthdS5oZWlnaHQpLShFLUIpKmFqKS50b0ZpeGVkKDIpO2lmKEwpe0w9ZmFsc2U7Vy5wdXNoKCJNIil9Vz1XLmNvbmNhdChbSyxKXSl9aWYoKHR5cGVvZiBzPT0idW5kZWZpbmVkIikmJih0eXBlb2YgSiE9InVuZGVmaW5lZCIpKXtzPUo7dT1LfWlmKCFhbi5saW5lfHxhQS5yZXNpemluZyl7YXk9YXkuY29uY2F0KFtLLGF1LnkrYXUuaGVpZ2h0LzJdKX1pZihhQS5hbmltYXRlJiZhQS5yZXNpemluZyYmYW4ubGluZSl7YW4ubGluZS5zZXRBdHRyaWJ1dGVzKHtwYXRoOmF5LG9wYWNpdHk6YW99LHRydWUpO2lmKGFuLmZpbGxQYXRoKXthbi5maWxsUGF0aC5zZXRBdHRyaWJ1dGVzKHtwYXRoOmF5LG9wYWNpdHk6YXB9LHRydWUpfWlmKGFuLmxpbmUuc2hhZG93cyl7YWc9YW4ubGluZS5zaGFkb3dzO2ZvcihQPTAscj1hZy5sZW5ndGg7UDxyO1ArKyl7az1hZ1tQXTtrLnNldEF0dHJpYnV0ZXMoe3BhdGg6YXl9LHRydWUpfX19aWYoTil7SD1hRy5nZXRBdChsKyspO2lmKCFIKXtIPUV4dC5jaGFydC5TaGFwZVtYXSh3LEV4dC5hcHBseSh7Z3JvdXA6W1UsYUddLHg6MCx5OjAsdHJhbnNsYXRlOnt4OisoZ3x8SykseTplfHwoYXUueSthdS5oZWlnaHQvMil9LHZhbHVlOiciJytxKyIsICIrRSsnIicsekluZGV4OjQwMDB9LGF0KSk7SC5fdG89e3RyYW5zbGF0ZTp7eDorSyx5OitKfX19ZWxzZXtILnNldEF0dHJpYnV0ZXMoe3ZhbHVlOiciJytxKyIsICIrRSsnIicseDowLHk6MCxoaWRkZW46ZmFsc2V9LHRydWUpO0guX3RvPXt0cmFuc2xhdGU6e3g6K0sseTorSn19fX1hbi5pdGVtcy5wdXNoKHtzZXJpZXM6YW4sdmFsdWU6W3EsRV0scG9pbnQ6W0ssSl0sc3ByaXRlOkgsc3RvcmVJdGVtOmF2LmdldEF0KFRbUV0pfSk7Zz1LO2U9Sn1pZihXLmxlbmd0aDw9MSl7cmV0dXJufWlmKGFuLnNtb290aCl7Yj1FeHQuZHJhdy5EcmF3LnNtb290aChXLE8oUik/Ujphbi5kZWZhdWx0U21vb3RobmVzcyl9ZD1SP2I6VztpZihhQS5tYXJrZXJJbmRleCYmYW4ucHJldmlvdXNQYXRoKXthaD1hbi5wcmV2aW91c1BhdGg7aWYoIVIpe0V4dC5BcnJheS5lcmFzZShhaCwxLDIpfX1lbHNle2FoPVd9aWYoIWFuLmxpbmUpe2FuLmxpbmU9dy5hZGQoRXh0LmFwcGx5KHt0eXBlOiJwYXRoIixncm91cDpVLHBhdGg6YXksc3Ryb2tlOmFxLnN0cm9rZXx8YXEuZmlsbH0sYXF8fHt9KSk7YW4ubGluZS5zZXRBdHRyaWJ1dGVzKHtvcGFjaXR5OmFvfSx0cnVlKTtpZihHKXthbi5saW5lLnNldEF0dHJpYnV0ZXMoRXh0LmFwcGx5KHt9LGFuLnNoYWRvd09wdGlvbnMpLHRydWUpfWFuLmxpbmUuc2V0QXR0cmlidXRlcyh7ZmlsbDoibm9uZSIsekluZGV4OjMwMDB9KTtpZighYXEuc3Ryb2tlJiZTKXthbi5saW5lLnNldEF0dHJpYnV0ZXMoe3N0cm9rZTp2W2FDJVNdfSx0cnVlKX1pZihHKXthZz1hbi5saW5lLnNoYWRvd3M9W107Zm9yKGFmPTA7YWY8cjthZisrKXthbD1hYlthZl07YWw9RXh0LmFwcGx5KHt9LGFsLHtwYXRoOmF5fSk7az13LmFkZChFeHQuYXBwbHkoe30se3R5cGU6InBhdGgiLGdyb3VwOkZbYWZdfSxhbCkpO2FnLnB1c2goayl9fX1pZihhbi5maWxsKXtjPWQuY29uY2F0KFtbIkwiLEssYXUueSthdS5oZWlnaHRdLFsiTCIsdSxhdS55K2F1LmhlaWdodF0sWyJMIix1LHNdXSk7aWYoIWFuLmZpbGxQYXRoKXthbi5maWxsUGF0aD13LmFkZCh7Z3JvdXA6VSx0eXBlOiJwYXRoIixmaWxsOmFxLmZpbGx8fHZbYUMlU10scGF0aDpheX0pfX1hYT1OJiZhRy5nZXRDb3VudCgpO2lmKGFBLmFuaW1hdGUpe0Q9YW4uZmlsbDtwPWFuLmxpbmU7YWk9YW4ucmVuZGVyZXIocCxmYWxzZSx7cGF0aDpkfSxRLGF2KTtFeHQuYXBwbHkoYWksYXF8fHt9LHtzdHJva2U6YXEuc3Ryb2tlfHxhcS5maWxsfSk7ZGVsZXRlIGFpLmZpbGw7cC5zaG93KHRydWUpO2lmKGFBLm1hcmtlckluZGV4JiZhbi5wcmV2aW91c1BhdGgpe2FuLmFuaW1hdGlvbj1hRD1hbi5vbkFuaW1hdGUocCx7dG86YWksZnJvbTp7cGF0aDphaH19KX1lbHNle2FuLmFuaW1hdGlvbj1hRD1hbi5vbkFuaW1hdGUocCx7dG86YWl9KX1pZihHKXthZz1wLnNoYWRvd3M7Zm9yKFA9MDtQPHI7UCsrKXthZ1tQXS5zaG93KHRydWUpO2lmKGFBLm1hcmtlckluZGV4JiZhbi5wcmV2aW91c1BhdGgpe2FuLm9uQW5pbWF0ZShhZ1tQXSx7dG86e3BhdGg6ZH0sZnJvbTp7cGF0aDphaH19KX1lbHNle2FuLm9uQW5pbWF0ZShhZ1tQXSx7dG86e3BhdGg6ZH19KX19fWlmKEQpe2FuLmZpbGxQYXRoLnNob3codHJ1ZSk7YW4ub25BbmltYXRlKGFuLmZpbGxQYXRoLHt0bzpFeHQuYXBwbHkoe30se3BhdGg6YyxmaWxsOmFxLmZpbGx8fHZbYUMlU10sInN0cm9rZS13aWR0aCI6MCxvcGFjaXR5OmFwfSxhcXx8e30pfSl9aWYoTil7bD0wO2ZvcihRPTA7UTxhejtRKyspe2lmKGFuLml0ZW1zW1FdKXtvPWFHLmdldEF0KGwrKyk7aWYobyl7YWk9YW4ucmVuZGVyZXIobyxhdi5nZXRBdChRKSxvLl90byxRLGF2KTthbi5vbkFuaW1hdGUobyx7dG86RXh0LmFwcGx5KGFpLGF0fHx7fSl9KTtvLnNob3codHJ1ZSl9fX1mb3IoO2w8YWE7bCsrKXtvPWFHLmdldEF0KGwpO28uaGlkZSh0cnVlKX19fWVsc2V7YWk9YW4ucmVuZGVyZXIoYW4ubGluZSxmYWxzZSx7cGF0aDpkLGhpZGRlbjpmYWxzZX0sUSxhdik7RXh0LmFwcGx5KGFpLGFxfHx7fSx7c3Ryb2tlOmFxLnN0cm9rZXx8YXEuZmlsbH0pO2RlbGV0ZSBhaS5maWxsO2FuLmxpbmUuc2V0QXR0cmlidXRlcyhhaSx0cnVlKTthbi5saW5lLnNldEF0dHJpYnV0ZXMoe29wYWNpdHk6YW99LHRydWUpO2lmKEcpe2FnPWFuLmxpbmUuc2hhZG93cztmb3IoUD0wO1A8cjtQKyspe2FnW1BdLnNldEF0dHJpYnV0ZXMoe3BhdGg6ZCxoaWRkZW46ZmFsc2V9LHRydWUpfX1pZihhbi5maWxsKXthbi5maWxsUGF0aC5zZXRBdHRyaWJ1dGVzKHtwYXRoOmMsaGlkZGVuOmZhbHNlLG9wYWNpdHk6YXB9LHRydWUpfWlmKE4pe2w9MDtmb3IoUT0wO1E8YXo7USsrKXtpZihhbi5pdGVtc1tRXSl7bz1hRy5nZXRBdChsKyspO2lmKG8pe2FpPWFuLnJlbmRlcmVyKG8sYXYuZ2V0QXQoUSksby5fdG8sUSxhdik7by5zZXRBdHRyaWJ1dGVzKEV4dC5hcHBseShhdHx8e30sYWl8fHt9KSx0cnVlKTtpZighby5hdHRyLmhpZGRlbil7by5zaG93KHRydWUpfX19fWZvcig7bDxhYTtsKyspe289YUcuZ2V0QXQobCk7by5oaWRlKHRydWUpfX19aWYoYUEubWFya2VySW5kZXgpe2lmKGFuLnNtb290aCl7RXh0LkFycmF5LmVyYXNlKFcsMSwyKX1lbHNle0V4dC5BcnJheS5zcGxpY2UoVywxLDAsV1sxXSxXWzJdKX1hbi5wcmV2aW91c1BhdGg9V31hbi5yZW5kZXJMYWJlbHMoKTthbi5yZW5kZXJDYWxsb3V0cygpO2FuLmZpcmVFdmVudCgiZHJhdyIsYW4pfSxvbkNyZWF0ZUxhYmVsOmZ1bmN0aW9uKGQsayxjLGUpe3ZhciBnPXRoaXMsaD1nLmxhYmVsc0dyb3VwLGE9Zy5sYWJlbCxqPWcuYmJveCxiPUV4dC5hcHBseShhLGcuc2VyaWVzTGFiZWxTdHlsZSk7cmV0dXJuIGcuY2hhcnQuc3VyZmFjZS5hZGQoRXh0LmFwcGx5KHt0eXBlOiJ0ZXh0IiwidGV4dC1hbmNob3IiOiJtaWRkbGUiLGdyb3VwOmgseDprLnBvaW50WzBdLHk6ai55K2ouaGVpZ2h0LzJ9LGJ8fHt9KSl9LG9uUGxhY2VMYWJlbDpmdW5jdGlvbihnLGsscyxwLG8sZCl7dmFyIHU9dGhpcyxsPXUuY2hhcnQscj1sLnJlc2l6aW5nLHQ9dS5sYWJlbCxxPXQucmVuZGVyZXIsYj10LmZpZWxkLGE9dS5iYm94LGo9cy5wb2ludFswXSxoPXMucG9pbnRbMV0sYz1zLnNwcml0ZS5hdHRyLnJhZGl1cyxlLG4sbTtnLnNldEF0dHJpYnV0ZXMoe3RleHQ6cShrLmdldChiKSksaGlkZGVuOnRydWV9LHRydWUpO2lmKG89PSJyb3RhdGUiKXtnLnNldEF0dHJpYnV0ZXMoeyJ0ZXh0LWFuY2hvciI6InN0YXJ0Iixyb3RhdGlvbjp7eDpqLHk6aCxkZWdyZWVzOi00NX19LHRydWUpO2U9Zy5nZXRCQm94KCk7bj1lLndpZHRoO209ZS5oZWlnaHQ7aj1qPGEueD9hLng6ajtqPShqK24+YS54K2Eud2lkdGgpPyhqLShqK24tYS54LWEud2lkdGgpKTpqO2g9KGgtbTxhLnkpP2EueSttOmh9ZWxzZXtpZihvPT0idW5kZXIifHxvPT0ib3ZlciIpe2U9cy5zcHJpdGUuZ2V0QkJveCgpO2Uud2lkdGg9ZS53aWR0aHx8KGMqMik7ZS5oZWlnaHQ9ZS5oZWlnaHR8fChjKjIpO2g9aCsobz09Im92ZXIiPy1lLmhlaWdodDplLmhlaWdodCk7ZT1nLmdldEJCb3goKTtuPWUud2lkdGgvMjttPWUuaGVpZ2h0LzI7aj1qLW48YS54P2EueCtuOmo7aj0oaituPmEueCthLndpZHRoKT8oai0oaituLWEueC1hLndpZHRoKSk6ajtoPWgtbTxhLnk/YS55K206aDtoPShoK20+YS55K2EuaGVpZ2h0KT8oaC0oaCttLWEueS1hLmhlaWdodCkpOmh9fWlmKHUuY2hhcnQuYW5pbWF0ZSYmIXUuY2hhcnQucmVzaXppbmcpe2cuc2hvdyh0cnVlKTt1Lm9uQW5pbWF0ZShnLHt0bzp7eDpqLHk6aH19KX1lbHNle2cuc2V0QXR0cmlidXRlcyh7eDpqLHk6aH0sdHJ1ZSk7aWYociYmdS5hbmltYXRpb24pe3UuYW5pbWF0aW9uLm9uKCJhZnRlcmFuaW1hdGUiLGZ1bmN0aW9uKCl7Zy5zaG93KHRydWUpfSl9ZWxzZXtnLnNob3codHJ1ZSl9fX0saGlnaGxpZ2h0SXRlbTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYS5saW5lJiYhYS5oaWdobGlnaHRlZCl7aWYoISgiX19zdHJva2VXaWR0aCIgaW4gYS5saW5lKSl7YS5saW5lLl9fc3Ryb2tlV2lkdGg9cGFyc2VGbG9hdChhLmxpbmUuYXR0clsic3Ryb2tlLXdpZHRoIl0pfHwwfWlmKGEubGluZS5fX2FuaW0pe2EubGluZS5fX2FuaW0ucGF1c2VkPXRydWV9YS5saW5lLl9fYW5pbT1FeHQuY3JlYXRlKCJFeHQuZnguQW5pbSIse3RhcmdldDphLmxpbmUsdG86eyJzdHJva2Utd2lkdGgiOmEubGluZS5fX3N0cm9rZVdpZHRoKzN9fSk7YS5oaWdobGlnaHRlZD10cnVlfX0sdW5IaWdobGlnaHRJdGVtOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihhLmxpbmUmJmEuaGlnaGxpZ2h0ZWQpe2EubGluZS5fX2FuaW09RXh0LmNyZWF0ZSgiRXh0LmZ4LkFuaW0iLHt0YXJnZXQ6YS5saW5lLHRvOnsic3Ryb2tlLXdpZHRoIjphLmxpbmUuX19zdHJva2VXaWR0aH19KTthLmhpZ2hsaWdodGVkPWZhbHNlfX0sb25QbGFjZUNhbGxvdXQ6ZnVuY3Rpb24obSxyLEosRyxGLGQsayl7aWYoIUYpe3JldHVybn12YXIgTT10aGlzLHM9TS5jaGFydCxEPXMuc3VyZmFjZSxIPXMucmVzaXppbmcsTD1NLmNhbGxvdXRzLHQ9TS5pdGVtcyx2PUc9PTA/ZmFsc2U6dFtHLTFdLnBvaW50LHo9KEc9PXQubGVuZ3RoLTEpP2ZhbHNlOnRbRysxXS5wb2ludCxjPVsrSi5wb2ludFswXSwrSi5wb2ludFsxXV0sQSxnLE4sSyxvLHEsST1MLm9mZnNldEZyb21WaXp8fDMwLEM9TC5vZmZzZXRUb1NpZGV8fDEwLEI9TC5vZmZzZXRCb3h8fDMsaCxlLGosdyx1LEU9TS5jbGlwUmVjdCxiPXt3aWR0aDpMLnN0eWxlcy53aWR0aHx8MTAsaGVpZ2h0Okwuc3R5bGVzLmhlaWdodHx8MTB9LG4sbDtpZighdil7dj1jfWlmKCF6KXt6PWN9Sz0oelsxXS12WzFdKS8oelswXS12WzBdKTtvPShjWzFdLXZbMV0pLyhjWzBdLXZbMF0pO3E9KHpbMV0tY1sxXSkvKHpbMF0tY1swXSk7Zz1NYXRoLnNxcnQoMStLKkspO0E9WzEvZyxLL2ddO049Wy1BWzFdLEFbMF1dO2lmKG8+MCYmcTwwJiZOWzFdPDB8fG88MCYmcT4wJiZOWzFdPjApe05bMF0qPS0xO05bMV0qPS0xfWVsc2V7aWYoTWF0aC5hYnMobyk8TWF0aC5hYnMocSkmJk5bMF08MHx8TWF0aC5hYnMobyk+TWF0aC5hYnMocSkmJk5bMF0+MCl7TlswXSo9LTE7TlsxXSo9LTF9fW49Y1swXStOWzBdKkk7bD1jWzFdK05bMV0qSTtoPW4rKE5bMF0+MD8wOi0oYi53aWR0aCsyKkIpKTtlPWwtYi5oZWlnaHQvMi1CO2o9Yi53aWR0aCsyKkI7dz1iLmhlaWdodCsyKkI7aWYoaDxFWzBdfHwoaCtqKT4oRVswXStFWzJdKSl7TlswXSo9LTF9aWYoZTxFWzFdfHwoZSt3KT4oRVsxXStFWzNdKSl7TlsxXSo9LTF9bj1jWzBdK05bMF0qSTtsPWNbMV0rTlsxXSpJO2g9bisoTlswXT4wPzA6LShiLndpZHRoKzIqQikpO2U9bC1iLmhlaWdodC8yLUI7aj1iLndpZHRoKzIqQjt3PWIuaGVpZ2h0KzIqQjtpZihzLmFuaW1hdGUpe00ub25BbmltYXRlKG0ubGluZXMse3RvOntwYXRoOlsiTSIsY1swXSxjWzFdLCJMIixuLGwsIloiXX19KTtpZihtLnBhbmVsKXttLnBhbmVsLnNldFBvc2l0aW9uKGgsZSx0cnVlKX19ZWxzZXttLmxpbmVzLnNldEF0dHJpYnV0ZXMoe3BhdGg6WyJNIixjWzBdLGNbMV0sIkwiLG4sbCwiWiJdfSx0cnVlKTtpZihtLnBhbmVsKXttLnBhbmVsLnNldFBvc2l0aW9uKGgsZSl9fWZvcih1IGluIG0pe21bdV0uc2hvdyh0cnVlKX19LGlzSXRlbUluUG9pbnQ6ZnVuY3Rpb24oaixnLEEscSl7dmFyIEM9dGhpcyxuPUMuaXRlbXMscz1DLnNlbGVjdGlvblRvbGVyYW5jZSxrPW51bGwseixjLHAsdixoLHcsYix0LGEsbCxCLGUsZCxvLHUscixEPU1hdGguc3FydCxtPU1hdGguYWJzO2M9bltxXTt6PXEmJm5bcS0xXTtpZihxPj1oKXt6PW5baC0xXX1wPXomJnoucG9pbnQ7dj1jJiZjLnBvaW50O3c9ej9wWzBdOnZbMF0tcztiPXo/cFsxXTp2WzFdO3Q9Yz92WzBdOnBbMF0rczthPWM/dlsxXTpwWzFdO2U9RCgoai13KSooai13KSsoZy1iKSooZy1iKSk7ZD1EKChqLXQpKihqLXQpKyhnLWEpKihnLWEpKTtvPU1hdGgubWluKGUsZCk7aWYobzw9cyl7cmV0dXJuIG89PWU/ejpjfXJldHVybiBmYWxzZX0sdG9nZ2xlQWxsOmZ1bmN0aW9uKGEpe3ZhciBlPXRoaXMsYixkLGcsYztpZighYSl7RXh0LmNoYXJ0LnNlcmllcy5DYXJ0ZXNpYW4ucHJvdG90eXBlLmhpZGVBbGwuY2FsbChlKX1lbHNle0V4dC5jaGFydC5zZXJpZXMuQ2FydGVzaWFuLnByb3RvdHlwZS5zaG93QWxsLmNhbGwoZSl9aWYoZS5saW5lKXtlLmxpbmUuc2V0QXR0cmlidXRlcyh7aGlkZGVuOiFhfSx0cnVlKTtpZihlLmxpbmUuc2hhZG93cyl7Zm9yKGI9MCxjPWUubGluZS5zaGFkb3dzLGQ9Yy5sZW5ndGg7YjxkO2IrKyl7Zz1jW2JdO2cuc2V0QXR0cmlidXRlcyh7aGlkZGVuOiFhfSx0cnVlKX19fWlmKGUuZmlsbFBhdGgpe2UuZmlsbFBhdGguc2V0QXR0cmlidXRlcyh7aGlkZGVuOiFhfSx0cnVlKX19LGhpZGVBbGw6ZnVuY3Rpb24oKXt0aGlzLnRvZ2dsZUFsbChmYWxzZSl9LHNob3dBbGw6ZnVuY3Rpb24oKXt0aGlzLnRvZ2dsZUFsbCh0cnVlKX19KTtFeHQuZGVmaW5lKCJFeHQuY2hhcnQuc2VyaWVzLlBpZSIse2FsdGVybmF0ZUNsYXNzTmFtZTpbIkV4dC5jaGFydC5QaWVTZXJpZXMiLCJFeHQuY2hhcnQuUGllQ2hhcnQiXSxleHRlbmQ6IkV4dC5jaGFydC5zZXJpZXMuU2VyaWVzIix0eXBlOiJwaWUiLGFsaWFzOiJzZXJpZXMucGllIixhY2N1cmFjeToxMDAwMDAscmFkOk1hdGguUEkqMi8xMDAwMDAsaGlnaGxpZ2h0RHVyYXRpb246MTUwLGFuZ2xlRmllbGQ6ZmFsc2UsbGVuZ3RoRmllbGQ6ZmFsc2UsZG9udXQ6ZmFsc2Usc2hvd0luTGVnZW5kOmZhbHNlLHN0eWxlOnt9LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGIpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3ZhciBoPXRoaXMsZz1oLmNoYXJ0LGE9Zy5zdXJmYWNlLGo9Zy5zdG9yZSxrPWcuc2hhZG93LGQsYyxlO2IuaGlnaGxpZ2h0Q2ZnPUV4dC5tZXJnZSh7c2VnbWVudDp7bWFyZ2luOjIwfX0sYi5oaWdobGlnaHRDZmcpO0V4dC5hcHBseShoLGIse3NoYWRvd0F0dHJpYnV0ZXM6W3sic3Ryb2tlLXdpZHRoIjo2LCJzdHJva2Utb3BhY2l0eSI6MSxzdHJva2U6InJnYigyMDAsIDIwMCwgMjAwKSIsdHJhbnNsYXRlOnt4OjEuMix5OjJ9fSx7InN0cm9rZS13aWR0aCI6NCwic3Ryb2tlLW9wYWNpdHkiOjEsc3Ryb2tlOiJyZ2IoMTUwLCAxNTAsIDE1MCkiLHRyYW5zbGF0ZTp7eDowLjkseToxLjV9fSx7InN0cm9rZS13aWR0aCI6Miwic3Ryb2tlLW9wYWNpdHkiOjEsc3Ryb2tlOiJyZ2IoMTAwLCAxMDAsIDEwMCkiLHRyYW5zbGF0ZTp7eDowLjYseToxfX1dfSk7aC5ncm91cD1hLmdldEdyb3VwKGguc2VyaWVzSWQpO2lmKGspe2ZvcihkPTAsYz1oLnNoYWRvd0F0dHJpYnV0ZXMubGVuZ3RoO2Q8YztkKyspe2guc2hhZG93R3JvdXBzLnB1c2goYS5nZXRHcm91cChoLnNlcmllc0lkKyItc2hhZG93cyIrZCkpfX1hLmN1c3RvbUF0dHJpYnV0ZXMuc2VnbWVudD1mdW5jdGlvbihsKXt2YXIgaT1oLmdldFNlZ21lbnQobCk7aWYoIWkucGF0aHx8aS5wYXRoLmxlbmd0aD09PTApe2kucGF0aD1bIk0iLDAsMF19cmV0dXJuIGl9O2guX19leGNsdWRlcz1oLl9fZXhjbHVkZXN8fFtdfSxpbml0aWFsaXplOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxhPWQuY2hhcnQuZ2V0Q2hhcnRTdG9yZSgpLGU9YS5kYXRhLml0ZW1zLGIsYyxnO2QueUZpZWxkPVtdO2lmKGQubGFiZWwuZmllbGQpe2ZvcihiPTAsYz1lLmxlbmd0aDtiPGM7YisrKXtnPWVbYl07ZC55RmllbGQucHVzaChnLmdldChkLmxhYmVsLmZpZWxkKSl9fX0sZ2V0U2VnbWVudDpmdW5jdGlvbihkKXt2YXIgSj10aGlzLEk9Si5yYWQsaT1NYXRoLmNvcyxhPU1hdGguc2luLHA9Si5jZW50ZXJYLG49Si5jZW50ZXJZLEU9MCxEPTAsQz0wLEE9MCxsPTAsaz0wLGo9MCxnPTAsdz0wLGM9MCx2PTAsYj0wLEc9MC4wMSx6PWQuc3RhcnRBbmdsZSx1PWQuZW5kQW5nbGUsbz0oeit1KS8yKkkscj1kLm1hcmdpbnx8MCxLPU1hdGgubWluKHosdSkqSSxIPU1hdGgubWF4KHosdSkqSSx0PWkoSyksaD1hKEspLHM9aShIKSxlPWEoSCksbT1pKG8pLEY9YShvKSxCPTAscT0wLjcwNzEwNjc4MTE4NjU0NzY7aWYoSC1LPEcpe3JldHVybntwYXRoOiIifX1pZihyIT09MCl7cCs9ciptO24rPXIqRn1EPXArZC5lbmRSaG8qdDtrPW4rZC5lbmRSaG8qaDtBPXArZC5lbmRSaG8qcztnPW4rZC5lbmRSaG8qZTt2PXArZC5lbmRSaG8qbTtiPW4rZC5lbmRSaG8qRjtpZihkLnN0YXJ0UmhvIT09MCl7RT1wK2Quc3RhcnRSaG8qdDtsPW4rZC5zdGFydFJobypoO0M9cCtkLnN0YXJ0UmhvKnM7aj1uK2Quc3RhcnRSaG8qZTt3PXArZC5zdGFydFJobyptO2M9bitkLnN0YXJ0UmhvKkY7cmV0dXJue3BhdGg6W1siTSIsRCxrXSxbIkEiLGQuZW5kUmhvLGQuZW5kUmhvLDAsMCwxLHYsYl0sWyJMIix2LGJdLFsiQSIsZC5lbmRSaG8sZC5lbmRSaG8sMCxCLDEsQSxnXSxbIkwiLEEsZ10sWyJMIixDLGpdLFsiQSIsZC5zdGFydFJobyxkLnN0YXJ0UmhvLDAsQiwwLHcsY10sWyJMIix3LGNdLFsiQSIsZC5zdGFydFJobyxkLnN0YXJ0UmhvLDAsMCwwLEUsbF0sWyJMIixFLGxdLFsiWiJdXX19ZWxzZXtyZXR1cm57cGF0aDpbWyJNIixwLG5dLFsiTCIsRCxrXSxbIkEiLGQuZW5kUmhvLGQuZW5kUmhvLDAsMCwxLHYsYl0sWyJMIix2LGJdLFsiQSIsZC5lbmRSaG8sZC5lbmRSaG8sMCxCLDEsQSxnXSxbIkwiLEEsZ10sWyJMIixwLG5dLFsiWiJdXX19fSxjYWxjTWlkZGxlOmZ1bmN0aW9uKG4pe3ZhciBpPXRoaXMsaj1pLnJhZCxtPW4uc2xpY2UsbD1pLmNlbnRlclgsaz1pLmNlbnRlclksaD1tLnN0YXJ0QW5nbGUsZD1tLmVuZEFuZ2xlLGc9K2kuZG9udXQsYz0tKGgrZCkqai8yLGE9KG4uZW5kUmhvK24uc3RhcnRSaG8pLzIsZT1sK2EqTWF0aC5jb3MoYyksYj1rLWEqTWF0aC5zaW4oYyk7bi5taWRkbGU9e3g6ZSx5OmJ9fSxkcmF3U2VyaWVzOmZ1bmN0aW9uKCl7dmFyIHM9dGhpcyxhPXMuY2hhcnQuZ2V0Q2hhcnRTdG9yZSgpLFc9YS5kYXRhLml0ZW1zLEkseD1zLmdyb3VwLFM9cy5jaGFydC5hbmltYXRlLGs9cy5hbmdsZUZpZWxkfHxzLmZpZWxkfHxzLnhGaWVsZCxBPVtdLmNvbmNhdChzLmxlbmd0aEZpZWxkKSxSPTAsWD1zLmNoYXJ0LEo9WC5zdXJmYWNlLEc9WC5jaGFydEJCb3gsZz1YLnNoYWRvdyxRPXMuc2hhZG93R3JvdXBzLFA9cy5zaGFkb3dBdHRyaWJ1dGVzLGFhPVEubGVuZ3RoLEs9QS5sZW5ndGgsQj0wLGI9K3MuZG9udXQsWj1bXSx5PVtdLHU9MCxNPTAsdD0wLGg9cy5zZXJpZXNTdHlsZSxlPXMuY29sb3JBcnJheVN0eWxlLHc9ZSYmZS5sZW5ndGh8fDAsbyxZLEMsSCxFLGQsYyxxLGw9MCxyLG4seixMLEQsYWIsRixVLFQsVixOLE8sbSx2O0V4dC5hcHBseShoLHMuc3R5bGV8fHt9KTtzLnNldEJCb3goKTt2PXMuYmJveDtpZihzLmNvbG9yU2V0KXtlPXMuY29sb3JTZXQ7dz1lLmxlbmd0aH1pZighYXx8IWEuZ2V0Q291bnQoKXx8cy5zZXJpZXNJc0hpZGRlbil7cy5oaWRlKCk7cy5pdGVtcz1bXTtyZXR1cm59cy51bkhpZ2hsaWdodEl0ZW0oKTtzLmNsZWFuSGlnaGxpZ2h0cygpO2Q9cy5jZW50ZXJYPUcueCsoRy53aWR0aC8yKTtjPXMuY2VudGVyWT1HLnkrKEcuaGVpZ2h0LzIpO3MucmFkaXVzPU1hdGgubWluKGQtRy54LGMtRy55KTtzLnNsaWNlcz1uPVtdO3MuaXRlbXM9eT1bXTtmb3IoVT0wLEY9Vy5sZW5ndGg7VTxGO1UrKyl7ST1XW1VdO2lmKHRoaXMuX19leGNsdWRlcyYmdGhpcy5fX2V4Y2x1ZGVzW1VdKXtjb250aW51ZX11Kz0rSS5nZXQoayk7aWYoQVswXSl7Zm9yKFQ9MCxSPTA7VDxLO1QrKyl7Uis9K0kuZ2V0KEFbVF0pfVpbVV09UjtNPU1hdGgubWF4KE0sUil9fXU9dXx8MTtmb3IoVT0wLEY9Vy5sZW5ndGg7VTxGO1UrKyl7ST1XW1VdO2lmKHRoaXMuX19leGNsdWRlcyYmdGhpcy5fX2V4Y2x1ZGVzW1VdKXtMPTB9ZWxzZXtMPUkuZ2V0KGspO2lmKGw9PTApe2w9MX19aWYobD09MSl7bD0yO3MuZmlyc3RBbmdsZT10PXMuYWNjdXJhY3kqTC91LzI7Zm9yKFQ9MDtUPFU7VCsrKXtuW1RdLnN0YXJ0QW5nbGU9bltUXS5lbmRBbmdsZT1zLmZpcnN0QW5nbGV9fVY9dC1zLmFjY3VyYWN5KkwvdTtyPXtzZXJpZXM6cyx2YWx1ZTpMLHN0YXJ0QW5nbGU6dCxlbmRBbmdsZTpWLHN0b3JlSXRlbTpJfTtpZihBWzBdKXthYj0rWltVXTtyLnJobz1NYXRoLmZsb29yKHMucmFkaXVzL00qYWIpfWVsc2V7ci5yaG89cy5yYWRpdXN9bltVXT1yOyhmdW5jdGlvbigpe3Q9Vn0pKCl9aWYoZyl7Zm9yKFU9MCxGPW4ubGVuZ3RoO1U8RjtVKyspe3I9bltVXTtyLnNoYWRvd0F0dHJzPVtdO2ZvcihUPTAsQj0wLEM9W107VDxLO1QrKyl7ej14LmdldEF0KFUqSytUKTtxPUFbVF0/YS5nZXRBdChVKS5nZXQoQVtUXSkvWltVXSpyLnJobzpyLnJobztvPXtzZWdtZW50OntzdGFydEFuZ2xlOnIuc3RhcnRBbmdsZSxlbmRBbmdsZTpyLmVuZEFuZ2xlLG1hcmdpbjowLHJobzpyLnJobyxzdGFydFJobzpCKyhxKmIvMTAwKSxlbmRSaG86QitxfSxoaWRkZW46IXIudmFsdWUmJihyLnN0YXJ0QW5nbGUlcy5hY2N1cmFjeSk9PShyLmVuZEFuZ2xlJXMuYWNjdXJhY3kpfTtmb3IoRT0wLEM9W107RTxhYTtFKyspe1k9UFtFXTtIPVFbRV0uZ2V0QXQoVSk7aWYoIUgpe0g9WC5zdXJmYWNlLmFkZChFeHQuYXBwbHkoe30se3R5cGU6InBhdGgiLGdyb3VwOlFbRV0sc3Ryb2tlTGluZWpvaW46InJvdW5kIn0sbyxZKSl9WT1zLnJlbmRlcmVyKEgsYS5nZXRBdChVKSxFeHQuYXBwbHkoe30sbyxZKSxVLGEpO2lmKFMpe3Mub25BbmltYXRlKEgse3RvOll9KX1lbHNle0guc2V0QXR0cmlidXRlcyhZLHRydWUpfUMucHVzaChIKX1yLnNoYWRvd0F0dHJzW1RdPUN9fX1mb3IoVT0wLEY9bi5sZW5ndGg7VTxGO1UrKyl7cj1uW1VdO2ZvcihUPTAsQj0wO1Q8SztUKyspe3o9eC5nZXRBdChVKksrVCk7cT1BW1RdP2EuZ2V0QXQoVSkuZ2V0KEFbVF0pL1pbVV0qci5yaG86ci5yaG87bz1FeHQuYXBwbHkoe3NlZ21lbnQ6e3N0YXJ0QW5nbGU6ci5zdGFydEFuZ2xlLGVuZEFuZ2xlOnIuZW5kQW5nbGUsbWFyZ2luOjAscmhvOnIucmhvLHN0YXJ0UmhvOkIrKHEqYi8xMDApLGVuZFJobzpCK3F9LGhpZGRlbjooIXIudmFsdWUmJihyLnN0YXJ0QW5nbGUlcy5hY2N1cmFjeSk9PShyLmVuZEFuZ2xlJXMuYWNjdXJhY3kpKX0sRXh0LmFwcGx5KGgsZSYme2ZpbGw6ZVsoSz4xP1Q6VSkld119fHx7fSkpO0Q9RXh0LmFwcGx5KHt9LG8uc2VnbWVudCx7c2xpY2U6cixzZXJpZXM6cyxzdG9yZUl0ZW06ci5zdG9yZUl0ZW0saW5kZXg6VX0pO3MuY2FsY01pZGRsZShEKTtpZihnKXtELnNoYWRvd3M9ci5zaGFkb3dBdHRyc1tUXX15W1VdPUQ7aWYoIXope209RXh0LmFwcGx5KHt0eXBlOiJwYXRoIixncm91cDp4LG1pZGRsZTpELm1pZGRsZX0sRXh0LmFwcGx5KGgsZSYme2ZpbGw6ZVsoSz4xP1Q6VSkld119fHx7fSkpO3o9Si5hZGQoRXh0LmFwcGx5KG0sbykpfXIuc3ByaXRlPXIuc3ByaXRlfHxbXTtELnNwcml0ZT16O3Iuc3ByaXRlLnB1c2goeik7ci5wb2ludD1bRC5taWRkbGUueCxELm1pZGRsZS55XTtpZihTKXtvPXMucmVuZGVyZXIoeixhLmdldEF0KFUpLG8sVSxhKTt6Ll90bz1vO3ouX2FuaW1hdGluZz10cnVlO3Mub25BbmltYXRlKHose3RvOm8sbGlzdGVuZXJzOnthZnRlcmFuaW1hdGU6e2ZuOmZ1bmN0aW9uKCl7dGhpcy5fYW5pbWF0aW5nPWZhbHNlfSxzY29wZTp6fX19KX1lbHNle289cy5yZW5kZXJlcih6LGEuZ2V0QXQoVSksRXh0LmFwcGx5KG8se2hpZGRlbjpmYWxzZX0pLFUsYSk7ei5zZXRBdHRyaWJ1dGVzKG8sdHJ1ZSl9Qis9cX19Rj14LmdldENvdW50KCk7Zm9yKFU9MDtVPEY7VSsrKXtpZighblsoVS9LKT4+MF0mJnguZ2V0QXQoVSkpe3guZ2V0QXQoVSkuaGlkZSh0cnVlKX19aWYoZyl7YWE9US5sZW5ndGg7Zm9yKEU9MDtFPEY7RSsrKXtpZighblsoRS9LKT4+MF0pe2ZvcihUPTA7VDxhYTtUKyspe2lmKFFbVF0uZ2V0QXQoRSkpe1FbVF0uZ2V0QXQoRSkuaGlkZSh0cnVlKX19fX19cy5yZW5kZXJMYWJlbHMoKTtzLnJlbmRlckNhbGxvdXRzKCl9LG9uQ3JlYXRlTGFiZWw6ZnVuY3Rpb24oZyxsLGUsaCl7dmFyIGo9dGhpcyxrPWoubGFiZWxzR3JvdXAsYT1qLmxhYmVsLGQ9ai5jZW50ZXJYLGM9ai5jZW50ZXJZLG09bC5taWRkbGUsYj1FeHQuYXBwbHkoai5zZXJpZXNMYWJlbFN0eWxlfHx7fSxhfHx7fSk7cmV0dXJuIGouY2hhcnQuc3VyZmFjZS5hZGQoRXh0LmFwcGx5KHt0eXBlOiJ0ZXh0IiwidGV4dC1hbmNob3IiOiJtaWRkbGUiLGdyb3VwOmsseDptLngseTptLnl9LGIpKX0sb25QbGFjZUxhYmVsOmZ1bmN0aW9uKGsscCx6LHQscyxlLGcpe3ZhciBCPXRoaXMscT1CLmNoYXJ0LHc9cS5yZXNpemluZyxBPUIubGFiZWwsdT1BLnJlbmRlcmVyLGM9W10uY29uY2F0KEEuZmllbGQpLG09Qi5jZW50ZXJYLGw9Qi5jZW50ZXJZLEM9ei5taWRkbGUsYj17eDpDLngseTpDLnl9LG89Qy54LW0sbj1DLnktbCxyPXt9LGQ9MSxqPU1hdGguYXRhbjIobixvfHwxKSx2PWoqMTgwL01hdGguUEksaDtiLmhpZGRlbj1mYWxzZTtpZih0aGlzLl9fZXhjbHVkZXMmJnRoaXMuX19leGNsdWRlc1t0XSl7Yi5oaWRkZW49dHJ1ZX1mdW5jdGlvbiBhKGkpe2lmKGk8MCl7aSs9MzYwfXJldHVybiBpJTM2MH1rLnNldEF0dHJpYnV0ZXMoe3RleHQ6dShwLmdldChjW2ddKSl9LHRydWUpO3N3aXRjaChzKXtjYXNlIm91dHNpZGUiOmQ9TWF0aC5zcXJ0KG8qbytuKm4pKjI7Yi54PWQqTWF0aC5jb3MoaikrbTtiLnk9ZCpNYXRoLnNpbihqKStsO2JyZWFrO2Nhc2Uicm90YXRlIjp2PWEodik7dj0odj45MCYmdjwyNzApP3YrMTgwOnY7aD1rLmF0dHIucm90YXRpb24uZGVncmVlcztpZihoIT1udWxsJiZNYXRoLmFicyhoLXYpPjE4MCowLjUpe2lmKHY+aCl7di09MzYwfWVsc2V7dis9MzYwfXY9diUzNjB9ZWxzZXt2PWEodil9Yi5yb3RhdGU9e2RlZ3JlZXM6dix4OmIueCx5OmIueX07YnJlYWs7ZGVmYXVsdDpicmVha31iLnRyYW5zbGF0ZT17eDowLHk6MH07aWYoZSYmIXcmJihzIT0icm90YXRlInx8aCE9bnVsbCkpe0Iub25BbmltYXRlKGsse3RvOmJ9KX1lbHNle2suc2V0QXR0cmlidXRlcyhiLHRydWUpfWsuX2Zyb209cn0sb25QbGFjZUNhbGxvdXQ6ZnVuY3Rpb24obCxvLHosdix1LGQsZSl7dmFyIEE9dGhpcyxxPUEuY2hhcnQsaj1BLmNlbnRlclgsaD1BLmNlbnRlclksQj16Lm1pZGRsZSxiPXt4OkIueCx5OkIueX0sbT1CLngtaixrPUIueS1oLGM9MSxuLGc9TWF0aC5hdGFuMihrLG18fDEpLGE9bC5sYWJlbC5nZXRCQm94KCksdz0yMCx0PTEwLHM9MTAscjtjPXouZW5kUmhvK3c7bj0oei5lbmRSaG8rei5zdGFydFJobykvMisoei5lbmRSaG8tei5zdGFydFJobykvMztiLng9YypNYXRoLmNvcyhnKStqO2IueT1jKk1hdGguc2luKGcpK2g7bT1uKk1hdGguY29zKGcpO2s9bipNYXRoLnNpbihnKTtpZihxLmFuaW1hdGUpe0Eub25BbmltYXRlKGwubGluZXMse3RvOntwYXRoOlsiTSIsbStqLGsraCwiTCIsYi54LGIueSwiWiIsIk0iLGIueCxiLnksImwiLG0+MD90Oi10LDAsInoiXX19KTtBLm9uQW5pbWF0ZShsLmJveCx7dG86e3g6Yi54KyhtPjA/dDotKHQrYS53aWR0aCsyKnMpKSx5OmIueSsoaz4wPygtYS5oZWlnaHQtcy8yKTooLWEuaGVpZ2h0LXMvMikpLHdpZHRoOmEud2lkdGgrMipzLGhlaWdodDphLmhlaWdodCsyKnN9fSk7QS5vbkFuaW1hdGUobC5sYWJlbCx7dG86e3g6Yi54KyhtPjA/KHQrcyk6LSh0K2Eud2lkdGgrcykpLHk6Yi55KyhrPjA/LWEuaGVpZ2h0LzQ6LWEuaGVpZ2h0LzQpfX0pfWVsc2V7bC5saW5lcy5zZXRBdHRyaWJ1dGVzKHtwYXRoOlsiTSIsbStqLGsraCwiTCIsYi54LGIueSwiWiIsIk0iLGIueCxiLnksImwiLG0+MD90Oi10LDAsInoiXX0sdHJ1ZSk7bC5ib3guc2V0QXR0cmlidXRlcyh7eDpiLngrKG0+MD90Oi0odCthLndpZHRoKzIqcykpLHk6Yi55KyhrPjA/KC1hLmhlaWdodC1zLzIpOigtYS5oZWlnaHQtcy8yKSksd2lkdGg6YS53aWR0aCsyKnMsaGVpZ2h0OmEuaGVpZ2h0KzIqc30sdHJ1ZSk7bC5sYWJlbC5zZXRBdHRyaWJ1dGVzKHt4OmIueCsobT4wPyh0K3MpOi0odCthLndpZHRoK3MpKSx5OmIueSsoaz4wPy1hLmhlaWdodC80Oi1hLmhlaWdodC80KX0sdHJ1ZSl9Zm9yKHIgaW4gbCl7bFtyXS5zaG93KHRydWUpfX0sb25BbmltYXRlOmZ1bmN0aW9uKGIsYSl7Yi5zaG93KCk7cmV0dXJuIHRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxpc0l0ZW1JblBvaW50OmZ1bmN0aW9uKGwsaixuLGUpe3ZhciBoPXRoaXMsZD1oLmNlbnRlclgsYz1oLmNlbnRlclkscD1NYXRoLmFicyxvPXAobC1kKSxtPXAoai1jKSxnPW4uc3RhcnRBbmdsZSxhPW4uZW5kQW5nbGUsaz1NYXRoLnNxcnQobypvK20qbSksYj1NYXRoLmF0YW4yKGotYyxsLWQpL2gucmFkO2lmKGI+aC5maXJzdEFuZ2xlKXtiLT1oLmFjY3VyYWN5fXJldHVybihiPD1nJiZiPmEmJms+PW4uc3RhcnRSaG8mJms8PW4uZW5kUmhvKX0saGlkZUFsbDpmdW5jdGlvbihjKXt2YXIgZyxiLGosaCxlLGEsZDtjPShpc05hTih0aGlzLl9pbmRleCk/Yzp0aGlzLl9pbmRleCl8fDA7dGhpcy5fX2V4Y2x1ZGVzPXRoaXMuX19leGNsdWRlc3x8W107dGhpcy5fX2V4Y2x1ZGVzW2NdPXRydWU7ZD10aGlzLnNsaWNlc1tjXS5zcHJpdGU7Zm9yKGU9MCxhPWQubGVuZ3RoO2U8YTtlKyspe2RbZV0uc2V0QXR0cmlidXRlcyh7aGlkZGVuOnRydWV9LHRydWUpfWlmKHRoaXMuc2xpY2VzW2NdLnNoYWRvd0F0dHJzKXtmb3IoZz0wLGg9dGhpcy5zbGljZXNbY10uc2hhZG93QXR0cnMsYj1oLmxlbmd0aDtnPGI7ZysrKXtqPWhbZ107Zm9yKGU9MCxhPWoubGVuZ3RoO2U8YTtlKyspe2pbZV0uc2V0QXR0cmlidXRlcyh7aGlkZGVuOnRydWV9LHRydWUpfX19dGhpcy5kcmF3U2VyaWVzKCl9LHNob3dBbGw6ZnVuY3Rpb24oYSl7YT0oaXNOYU4odGhpcy5faW5kZXgpP2E6dGhpcy5faW5kZXgpfHwwO3RoaXMuX19leGNsdWRlc1thXT1mYWxzZTt0aGlzLmRyYXdTZXJpZXMoKX0saGlnaGxpZ2h0SXRlbTpmdW5jdGlvbihzKXt2YXIgdT10aGlzLHQ9dS5yYWQsdyxkLG8scSxhLGUsayxiLG0sYyxnLHAsaCx2LG4sbCxqO3M9c3x8dGhpcy5pdGVtc1t0aGlzLl9pbmRleF07dGhpcy51bkhpZ2hsaWdodEl0ZW0oKTtpZighc3x8dS5hbmltYXRpbmd8fChzLnNwcml0ZSYmcy5zcHJpdGUuX2FuaW1hdGluZykpe3JldHVybn11LmNhbGxQYXJlbnQoW3NdKTtpZighdS5oaWdobGlnaHQpe3JldHVybn1pZigic2VnbWVudCIgaW4gdS5oaWdobGlnaHRDZmcpe3c9dS5oaWdobGlnaHRDZmcuc2VnbWVudDtkPXUuY2hhcnQuYW5pbWF0ZTtpZih1LmxhYmVsc0dyb3VwKXtnPXUubGFiZWxzR3JvdXA7cD11LmxhYmVsLmRpc3BsYXk7aD1nLmdldEF0KHMuaW5kZXgpO3Y9KHMuc3RhcnRBbmdsZStzLmVuZEFuZ2xlKS8yKnQ7bj13Lm1hcmdpbnx8MDtsPW4qTWF0aC5jb3Modik7aj1uKk1hdGguc2luKHYpO2lmKE1hdGguYWJzKGwpPDFlLTEwKXtsPTB9aWYoTWF0aC5hYnMoaik8MWUtMTApe2o9MH1pZihkKXtoLnN0b3BBbmltYXRpb24oKTtoLmFuaW1hdGUoe3RvOnt0cmFuc2xhdGU6e3g6bCx5Omp9fSxkdXJhdGlvbjp1LmhpZ2hsaWdodER1cmF0aW9ufSl9ZWxzZXtoLnNldEF0dHJpYnV0ZXMoe3RyYW5zbGF0ZTp7eDpsLHk6an19LHRydWUpfX1pZih1LmNoYXJ0LnNoYWRvdyYmcy5zaGFkb3dzKXtxPTA7YT1zLnNoYWRvd3M7az1hLmxlbmd0aDtmb3IoO3E8aztxKyspe2U9YVtxXTtiPXt9O209cy5zcHJpdGUuX2Zyb20uc2VnbWVudDtmb3IoYyBpbiBtKXtpZighKGMgaW4gdykpe2JbY109bVtjXX19bz17c2VnbWVudDpFeHQuYXBwbHlJZihiLHUuaGlnaGxpZ2h0Q2ZnLnNlZ21lbnQpfTtpZihkKXtlLnN0b3BBbmltYXRpb24oKTtlLmFuaW1hdGUoe3RvOm8sZHVyYXRpb246dS5oaWdobGlnaHREdXJhdGlvbn0pfWVsc2V7ZS5zZXRBdHRyaWJ1dGVzKG8sdHJ1ZSl9fX19fSx1bkhpZ2hsaWdodEl0ZW06ZnVuY3Rpb24oKXt2YXIgdz10aGlzLGwsZSxkLGssdCxzLHIscSx4LG0sYyxhLHYsbixiLGcsdSxoLG87aWYoIXcuaGlnaGxpZ2h0KXtyZXR1cm59aWYoKCJzZWdtZW50IiBpbiB3LmhpZ2hsaWdodENmZykmJncuaXRlbXMpe2w9dy5pdGVtcztlPXcuY2hhcnQuYW5pbWF0ZTtkPSEhdy5jaGFydC5zaGFkb3c7az13LmxhYmVsc0dyb3VwO3Q9bC5sZW5ndGg7cz0wO3I9MDtxPXcubGFiZWwuZGlzcGxheTtmb3IoO3M8dDtzKyspe3U9bFtzXTtpZighdSl7Y29udGludWV9bj11LnNwcml0ZTtpZihuJiZuLl9oaWdobGlnaHRlZCl7aWYoayl7aD1rLmdldEF0KHUuaW5kZXgpO289RXh0LmFwcGx5KHt0cmFuc2xhdGU6e3g6MCx5OjB9fSxxPT0icm90YXRlIj97cm90YXRlOnt4OmguYXR0ci54LHk6aC5hdHRyLnksZGVncmVlczpoLmF0dHIucm90YXRpb24uZGVncmVlc319Ont9KTtpZihlKXtoLnN0b3BBbmltYXRpb24oKTtoLmFuaW1hdGUoe3RvOm8sZHVyYXRpb246dy5oaWdobGlnaHREdXJhdGlvbn0pfWVsc2V7aC5zZXRBdHRyaWJ1dGVzKG8sdHJ1ZSl9fWlmKGQpe2I9dS5zaGFkb3dzO3g9Yi5sZW5ndGg7Zm9yKDtyPHg7cisrKXtjPXt9O2E9dS5zcHJpdGUuX3RvLnNlZ21lbnQ7dj11LnNwcml0ZS5fZnJvbS5zZWdtZW50O0V4dC5hcHBseShjLHYpO2ZvcihtIGluIGEpe2lmKCEobSBpbiB2KSl7Y1ttXT1hW21dfX1nPWJbcl07aWYoZSl7Zy5zdG9wQW5pbWF0aW9uKCk7Zy5hbmltYXRlKHt0bzp7c2VnbWVudDpjfSxkdXJhdGlvbjp3LmhpZ2hsaWdodER1cmF0aW9ufSl9ZWxzZXtnLnNldEF0dHJpYnV0ZXMoe3NlZ21lbnQ6Y30sdHJ1ZSl9fX19fX13LmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sZ2V0TGVnZW5kQ29sb3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztyZXR1cm4oYi5jb2xvclNldCYmYi5jb2xvclNldFthJWIuY29sb3JTZXQubGVuZ3RoXSl8fGIuY29sb3JBcnJheVN0eWxlW2ElYi5jb2xvckFycmF5U3R5bGUubGVuZ3RoXX19KTtFeHQuZGVmaW5lKCJFeHQuY2hhcnQuc2VyaWVzLlJhZGFyIix7ZXh0ZW5kOiJFeHQuY2hhcnQuc2VyaWVzLlNlcmllcyIscmVxdWlyZXM6WyJFeHQuY2hhcnQuU2hhcGUiLCJFeHQuZnguQW5pbSJdLHR5cGU6InJhZGFyIixhbGlhczoic2VyaWVzLnJhZGFyIixyYWQ6TWF0aC5QSS8xODAsc2hvd0luTGVnZW5kOmZhbHNlLHN0eWxlOnt9LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGMpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3ZhciBlPXRoaXMsYT1lLmNoYXJ0LnN1cmZhY2UsZCxiO2UuZ3JvdXA9YS5nZXRHcm91cChlLnNlcmllc0lkKTtpZihlLnNob3dNYXJrZXJzKXtlLm1hcmtlckdyb3VwPWEuZ2V0R3JvdXAoZS5zZXJpZXNJZCsiLW1hcmtlcnMiKX19LGRyYXdTZXJpZXM6ZnVuY3Rpb24oKXt2YXIgdz10aGlzLGM9dy5jaGFydC5nZXRDaGFydFN0b3JlKCksUz1jLmRhdGEuaXRlbXMsVCxJLHo9dy5ncm91cCxCLFU9dy5jaGFydCxMPVUuc2VyaWVzLml0ZW1zLE0sdixtLFE9VS5hbmltYXRlLG89dy5maWVsZHx8dy55RmllbGQsSz1VLnN1cmZhY2UsRj1VLmNoYXJ0QkJveCxFPXcuc2VyaWVzSWR4LGo9dy5jb2xvckFycmF5U3R5bGUsZyxlLEEsTixyPTAsYT1bXSxEPU1hdGgubWF4LGs9TWF0aC5jb3MsdD1NYXRoLnNpbixxPU1hdGguUEkqMixQPWMuZ2V0Q291bnQoKSxoLE8sSixILEcsUix1LG49dy5zZXJpZXNTdHlsZSxiPXcuc2VyaWVzTGFiZWxTdHlsZSxwPVUucmVzaXppbmd8fCF3LnJhZGFyLEM9VS5heGVzJiZVLmF4ZXMuZ2V0KDApLFY9IShDJiZDLm1heGltdW0pO3cuc2V0QkJveCgpO3I9Vj8wOihDLm1heGltdW18fDApO0V4dC5hcHBseShuLHcuc3R5bGV8fHt9KTtpZighY3x8IWMuZ2V0Q291bnQoKXx8dy5zZXJpZXNJc0hpZGRlbil7dy5oaWRlKCk7dy5pdGVtcz1bXTtpZih3LnJhZGFyKXt3LnJhZGFyLmhpZGUodHJ1ZSl9dy5yYWRhcj1udWxsO3JldHVybn1pZighbi5zdHJva2Upe24uc3Ryb2tlPWpbRSVqLmxlbmd0aF19dy51bkhpZ2hsaWdodEl0ZW0oKTt3LmNsZWFuSGlnaGxpZ2h0cygpO2c9dy5jZW50ZXJYPUYueCsoRi53aWR0aC8yKTtlPXcuY2VudGVyWT1GLnkrKEYuaGVpZ2h0LzIpO3cucmFkaXVzPU49TWF0aC5taW4oRi53aWR0aCxGLmhlaWdodCkvMjt3Lml0ZW1zPUE9W107aWYoVil7Zm9yKE09MCx2PUwubGVuZ3RoO008djtNKyspe209TFtNXTthLnB1c2gobS55RmllbGQpfWZvcihUPTA7VDxQO1QrKyl7ST1TW1RdO2ZvcihSPTAsdT1hLmxlbmd0aDtSPHU7UisrKXtyPUQoK0kuZ2V0KGFbUl0pLHIpfX19cj1yfHwxO2g9W107Tz1bXTtmb3IoUj0wO1I8UDtSKyspe0k9U1tSXTtHPU4qSS5nZXQobykvcjtKPUcqayhSL1AqcSk7SD1HKnQoUi9QKnEpO2lmKFI9PTApe08ucHVzaCgiTSIsSitnLEgrZSk7aC5wdXNoKCJNIiwwLjAxKkorZywwLjAxKkgrZSl9ZWxzZXtPLnB1c2goIkwiLEorZyxIK2UpO2gucHVzaCgiTCIsMC4wMSpKK2csMC4wMSpIK2UpfUEucHVzaCh7c3ByaXRlOmZhbHNlLHBvaW50OltnK0osZStIXSxzdG9yZUl0ZW06SSxzZXJpZXM6d30pfU8ucHVzaCgiWiIpO2lmKCF3LnJhZGFyKXt3LnJhZGFyPUsuYWRkKEV4dC5hcHBseSh7dHlwZToicGF0aCIsZ3JvdXA6eixwYXRoOmh9LG58fHt9KSl9aWYoVS5yZXNpemluZyl7dy5yYWRhci5zZXRBdHRyaWJ1dGVzKHtwYXRoOmh9LHRydWUpfWlmKFUuYW5pbWF0ZSl7dy5vbkFuaW1hdGUody5yYWRhcix7dG86RXh0LmFwcGx5KHtwYXRoOk99LG58fHt9KX0pfWVsc2V7dy5yYWRhci5zZXRBdHRyaWJ1dGVzKEV4dC5hcHBseSh7cGF0aDpPfSxufHx7fSksdHJ1ZSl9aWYody5zaG93TWFya2Vycyl7dy5kcmF3TWFya2VycygpfXcucmVuZGVyTGFiZWxzKCk7dy5yZW5kZXJDYWxsb3V0cygpfSxkcmF3TWFya2VyczpmdW5jdGlvbigpe3ZhciBuPXRoaXMsaz1uLmNoYXJ0LGE9ay5zdXJmYWNlLGI9RXh0LmFwcGx5KHt9LG4ubWFya2VyU3R5bGV8fHt9KSxqPUV4dC5hcHBseShiLG4ubWFya2VyQ29uZmlnLHtmaWxsOm4uY29sb3JBcnJheVN0eWxlW24uc2VyaWVzSWR4JW4uY29sb3JBcnJheVN0eWxlLmxlbmd0aF19KSxtPW4uaXRlbXMsbz1qLnR5cGUscT1uLm1hcmtlckdyb3VwLGU9bi5jZW50ZXJYLGQ9bi5jZW50ZXJZLHAsaCxjLGc7ZGVsZXRlIGoudHlwZTtmb3IoaD0wLGM9bS5sZW5ndGg7aDxjO2grKyl7cD1tW2hdO2c9cS5nZXRBdChoKTtpZighZyl7Zz1FeHQuY2hhcnQuU2hhcGVbb10oYSxFeHQuYXBwbHkoe2dyb3VwOnEseDowLHk6MCx0cmFuc2xhdGU6e3g6ZSx5OmR9fSxqKSl9ZWxzZXtnLnNob3coKX1wLnNwcml0ZT1nO2lmKGsucmVzaXppbmcpe2cuc2V0QXR0cmlidXRlcyh7eDowLHk6MCx0cmFuc2xhdGU6e3g6ZSx5OmR9fSx0cnVlKX1nLl90bz17dHJhbnNsYXRlOnt4OnAucG9pbnRbMF0seTpwLnBvaW50WzFdfX07aWYoay5hbmltYXRlKXtuLm9uQW5pbWF0ZShnLHt0bzpnLl90b30pfWVsc2V7Zy5zZXRBdHRyaWJ1dGVzKEV4dC5hcHBseShnLl90byxqfHx7fSksdHJ1ZSl9fX0saXNJdGVtSW5Qb2ludDpmdW5jdGlvbihjLGcsZSl7dmFyIGIsZD0xMCxhPU1hdGguYWJzO2I9ZS5wb2ludDtyZXR1cm4oYShiWzBdLWMpPD1kJiZhKGJbMV0tZyk8PWQpfSxvbkNyZWF0ZUxhYmVsOmZ1bmN0aW9uKGcsbSxlLGgpe3ZhciBqPXRoaXMsbD1qLmxhYmVsc0dyb3VwLGE9ai5sYWJlbCxkPWouY2VudGVyWCxjPWouY2VudGVyWSxrPW0ucG9pbnQsYj1FeHQuYXBwbHkoai5zZXJpZXNMYWJlbFN0eWxlfHx7fSxhKTtyZXR1cm4gai5jaGFydC5zdXJmYWNlLmFkZChFeHQuYXBwbHkoe3R5cGU6InRleHQiLCJ0ZXh0LWFuY2hvciI6Im1pZGRsZSIsZ3JvdXA6bCx4OmQseTpjfSxhfHx7fSkpfSxvblBsYWNlTGFiZWw6ZnVuY3Rpb24ocSxoLHMsZyxrLGIpe3ZhciBtPXRoaXMsbD1tLmNoYXJ0LGo9bC5yZXNpemluZyxjPW0ubGFiZWwscj1jLnJlbmRlcmVyLHA9Yy5maWVsZCxlPW0uY2VudGVyWCxkPW0uY2VudGVyWSxhPXt4OnMucG9pbnRbMF0seTpzLnBvaW50WzFdfSxvPWEueC1lLG49YS55LWQ7cS5zZXRBdHRyaWJ1dGVzKHt0ZXh0OnIoaC5nZXQocCkpLGhpZGRlbjp0cnVlfSx0cnVlKTtpZihqKXtxLnNldEF0dHJpYnV0ZXMoe3g6ZSx5OmR9LHRydWUpfWlmKGIpe3Euc2hvdyh0cnVlKTttLm9uQW5pbWF0ZShxLHt0bzphfSl9ZWxzZXtxLnNldEF0dHJpYnV0ZXMoYSx0cnVlKTtxLnNob3codHJ1ZSl9fSx0b2dnbGVBbGw6ZnVuY3Rpb24oYSl7dmFyIGU9dGhpcyxiLGQsZyxjO2lmKCFhKXtFeHQuY2hhcnQuc2VyaWVzLlJhZGFyLnN1cGVyY2xhc3MuaGlkZUFsbC5jYWxsKGUpfWVsc2V7RXh0LmNoYXJ0LnNlcmllcy5SYWRhci5zdXBlcmNsYXNzLnNob3dBbGwuY2FsbChlKX1pZihlLnJhZGFyKXtlLnJhZGFyLnNldEF0dHJpYnV0ZXMoe2hpZGRlbjohYX0sdHJ1ZSk7aWYoZS5yYWRhci5zaGFkb3dzKXtmb3IoYj0wLGM9ZS5yYWRhci5zaGFkb3dzLGQ9Yy5sZW5ndGg7YjxkO2IrKyl7Zz1jW2JdO2cuc2V0QXR0cmlidXRlcyh7aGlkZGVuOiFhfSx0cnVlKX19fX0saGlkZUFsbDpmdW5jdGlvbigpe3RoaXMudG9nZ2xlQWxsKGZhbHNlKTt0aGlzLmhpZGVNYXJrZXJzKDApfSxzaG93QWxsOmZ1bmN0aW9uKCl7dGhpcy50b2dnbGVBbGwodHJ1ZSl9LGhpZGVNYXJrZXJzOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXMsYz1kLm1hcmtlckdyb3VwJiZkLm1hcmtlckdyb3VwLmdldENvdW50KCl8fDAsYj1hfHwwO2Zvcig7YjxjO2IrKyl7ZC5tYXJrZXJHcm91cC5nZXRBdChiKS5oaWRlKHRydWUpfX19KTtFeHQuZGVmaW5lKCJFeHQuY2hhcnQuc2VyaWVzLlNjYXR0ZXIiLHtleHRlbmQ6IkV4dC5jaGFydC5zZXJpZXMuQ2FydGVzaWFuIixyZXF1aXJlczpbIkV4dC5jaGFydC5heGlzLkF4aXMiLCJFeHQuY2hhcnQuU2hhcGUiLCJFeHQuZnguQW5pbSJdLHR5cGU6InNjYXR0ZXIiLGFsaWFzOiJzZXJpZXMuc2NhdHRlciIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYyl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dmFyIGU9dGhpcyxnPWUuY2hhcnQuc2hhZG93LGE9ZS5jaGFydC5zdXJmYWNlLGQsYjtFeHQuYXBwbHkoZSxjLHtzdHlsZTp7fSxtYXJrZXJDb25maWc6e30sc2hhZG93QXR0cmlidXRlczpbeyJzdHJva2Utd2lkdGgiOjYsInN0cm9rZS1vcGFjaXR5IjowLjA1LHN0cm9rZToicmdiKDAsIDAsIDApIn0seyJzdHJva2Utd2lkdGgiOjQsInN0cm9rZS1vcGFjaXR5IjowLjEsc3Ryb2tlOiJyZ2IoMCwgMCwgMCkifSx7InN0cm9rZS13aWR0aCI6Miwic3Ryb2tlLW9wYWNpdHkiOjAuMTUsc3Ryb2tlOiJyZ2IoMCwgMCwgMCkifV19KTtlLmdyb3VwPWEuZ2V0R3JvdXAoZS5zZXJpZXNJZCk7aWYoZyl7Zm9yKGQ9MCxiPWUuc2hhZG93QXR0cmlidXRlcy5sZW5ndGg7ZDxiO2QrKyl7ZS5zaGFkb3dHcm91cHMucHVzaChhLmdldEdyb3VwKGUuc2VyaWVzSWQrIi1zaGFkb3dzIitkKSl9fX0sZ2V0Qm91bmRzOmZ1bmN0aW9uKCl7dmFyIHM9dGhpcyxqPXMuY2hhcnQsZD1qLmdldENoYXJ0U3RvcmUoKSxvPWouYXhlcyxsPXMuZ2V0QXhlc0ZvclhBbmRZRmllbGRzKCksaz1sLnhBeGlzLGU9bC55QXhpcyxhLHQsYyxnLHIscCxxLG4sbSxiLGg7cy5zZXRCQm94KCk7YT1zLmJib3g7aWYoYj1vLmdldChrKSl7aD1iLmFwcGx5RGF0YSgpO3I9aC5mcm9tO3E9aC50b31pZihiPW8uZ2V0KGUpKXtoPWIuYXBwbHlEYXRhKCk7cD1oLmZyb207bj1oLnRvfWlmKHMueEZpZWxkJiYhRXh0LmlzTnVtYmVyKHIpKXtiPXMuZ2V0TWluTWF4WFZhbHVlcygpO3I9YlswXTtxPWJbMV19aWYocy55RmllbGQmJiFFeHQuaXNOdW1iZXIocCkpe2I9cy5nZXRNaW5NYXhZVmFsdWVzKCk7cD1iWzBdO249YlsxXX1pZihpc05hTihyKSl7cj0wO3E9ZC5nZXRDb3VudCgpLTE7dD1hLndpZHRoLyhkLmdldENvdW50KCktMSl9ZWxzZXt0PWEud2lkdGgvKHEtcil9aWYoaXNOYU4ocCkpe3A9MDtuPWQuZ2V0Q291bnQoKS0xO2M9YS5oZWlnaHQvKGQuZ2V0Q291bnQoKS0xKX1lbHNle2M9YS5oZWlnaHQvKG4tcCl9cmV0dXJue2Jib3g6YSxtaW5YOnIsbWluWTpwLHhTY2FsZTp0LHlTY2FsZTpjfX0sZ2V0UGF0aHM6ZnVuY3Rpb24oKXt2YXIgej10aGlzLG49ei5jaGFydCxiPW4uc2hhZG93LGU9bi5nZXRDaGFydFN0b3JlKCksQj1lLmRhdGEuaXRlbXMscyxsLGQsaj16Lmdyb3VwLGc9ei5ib3VuZHM9ei5nZXRCb3VuZHMoKSxhPXouYmJveCxDPWcueFNjYWxlLGM9Zy55U2NhbGUsdj1nLm1pblgsdT1nLm1pblksQT1hLngsdz1hLnksaD1hLmhlaWdodCxvPXouaXRlbXM9W10scT1bXSxtLGsscix0LHA7Zm9yKHM9MCxsPUIubGVuZ3RoO3M8bDtzKyspe2Q9QltzXTtyPWQuZ2V0KHoueEZpZWxkKTt0PWQuZ2V0KHoueUZpZWxkKTtpZih0eXBlb2YgdD09InVuZGVmaW5lZCJ8fCh0eXBlb2YgdD09InN0cmluZyImJiF0KXx8cj09bnVsbHx8dD09bnVsbCl7Y29udGludWV9aWYodHlwZW9mIHI9PSJzdHJpbmcifHx0eXBlb2Ygcj09Im9iamVjdCImJiFFeHQuaXNEYXRlKHIpKXtyPXN9aWYodHlwZW9mIHQ9PSJzdHJpbmcifHx0eXBlb2YgdD09Im9iamVjdCImJiFFeHQuaXNEYXRlKHQpKXt0PXN9bT1BKyhyLXYpKkM7az13K2gtKHQtdSkqYztxLnB1c2goe3g6bSx5Omt9KTt6Lml0ZW1zLnB1c2goe3Nlcmllczp6LHZhbHVlOltyLHRdLHBvaW50OlttLGtdLHN0b3JlSXRlbTpkfSk7aWYobi5hbmltYXRlJiZuLnJlc2l6aW5nKXtwPWouZ2V0QXQocyk7aWYocCl7ei5yZXNldFBvaW50KHApO2lmKGIpe3oucmVzZXRTaGFkb3cocCl9fX19cmV0dXJuIHF9LHJlc2V0UG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5iYm94O2Euc2V0QXR0cmlidXRlcyh7dHJhbnNsYXRlOnt4OihiLngrYi53aWR0aCkvMix5OihiLnkrYi5oZWlnaHQpLzJ9fSx0cnVlKX0scmVzZXRTaGFkb3c6ZnVuY3Rpb24oYyl7dmFyIGc9dGhpcyxlPWMuc2hhZG93cyxqPWcuc2hhZG93QXR0cmlidXRlcyxkPWcuc2hhZG93R3JvdXBzLmxlbmd0aCxoPWcuYmJveCxiLGE7Zm9yKGI9MDtiPGQ7YisrKXthPUV4dC5hcHBseSh7fSxqW2JdKTtpZihhLnRyYW5zbGF0ZSl7YS50cmFuc2xhdGUueCs9KGgueCtoLndpZHRoKS8yO2EudHJhbnNsYXRlLnkrPShoLnkraC5oZWlnaHQpLzJ9ZWxzZXthLnRyYW5zbGF0ZT17eDooaC54K2gud2lkdGgpLzIseTooaC55K2guaGVpZ2h0KS8yfX1lW2JdLnNldEF0dHJpYnV0ZXMoYSx0cnVlKX19LGNyZWF0ZVBvaW50OmZ1bmN0aW9uKGEsYyl7dmFyIGQ9dGhpcyxiPWQuY2hhcnQsZT1kLmdyb3VwLGc9ZC5iYm94O3JldHVybiBFeHQuY2hhcnQuU2hhcGVbY10oYi5zdXJmYWNlLEV4dC5hcHBseSh7fSx7eDowLHk6MCxncm91cDplLHRyYW5zbGF0ZTp7eDooZy54K2cud2lkdGgpLzIseTooZy55K2cuaGVpZ2h0KS8yfX0sYSkpfSxjcmVhdGVTaGFkb3c6ZnVuY3Rpb24obixnLGspe3ZhciBqPXRoaXMsaD1qLmNoYXJ0LGw9ai5zaGFkb3dHcm91cHMsZD1qLnNoYWRvd0F0dHJpYnV0ZXMsYT1sLmxlbmd0aCxvPWouYmJveCxjLG0sYixlO24uc2hhZG93cz1iPVtdO2ZvcihjPTA7YzxhO2MrKyl7ZT1FeHQuYXBwbHkoe30sZFtjXSk7aWYoZS50cmFuc2xhdGUpe2UudHJhbnNsYXRlLngrPShvLngrby53aWR0aCkvMjtlLnRyYW5zbGF0ZS55Kz0oby55K28uaGVpZ2h0KS8yfWVsc2V7RXh0LmFwcGx5KGUse3RyYW5zbGF0ZTp7eDooby54K28ud2lkdGgpLzIseTooby55K28uaGVpZ2h0KS8yfX0pfUV4dC5hcHBseShlLGcpO209RXh0LmNoYXJ0LlNoYXBlW2tdKGguc3VyZmFjZSxFeHQuYXBwbHkoe30se3g6MCx5OjAsZ3JvdXA6bFtjXX0sZSkpO2IucHVzaChtKX19LGRyYXdTZXJpZXM6ZnVuY3Rpb24oKXt2YXIgdT10aGlzLGw9dS5jaGFydCxoPWwuZ2V0Q2hhcnRTdG9yZSgpLGo9dS5ncm91cCxjPWwuc2hhZG93LGE9dS5zaGFkb3dHcm91cHMscT11LnNoYWRvd0F0dHJpYnV0ZXMscj1hLmxlbmd0aCxtLG4sbyxrLHAsdCxlLGcsYixkLHM7dD1FeHQuYXBwbHkodS5tYXJrZXJTdHlsZSx1Lm1hcmtlckNvbmZpZyk7Zz10LnR5cGU7ZGVsZXRlIHQudHlwZTtpZighaHx8IWguZ2V0Q291bnQoKSl7dS5oaWRlKCk7dS5pdGVtcz1bXTtyZXR1cm59dS51bkhpZ2hsaWdodEl0ZW0oKTt1LmNsZWFuSGlnaGxpZ2h0cygpO249dS5nZXRQYXRocygpO2s9bi5sZW5ndGg7Zm9yKHA9MDtwPGs7cCsrKXtvPW5bcF07bT1qLmdldEF0KHApO0V4dC5hcHBseShvLHQpO2lmKCFtKXttPXUuY3JlYXRlUG9pbnQobyxnKTtpZihjKXt1LmNyZWF0ZVNoYWRvdyhtLHQsZyl9fWI9bS5zaGFkb3dzO2lmKGwuYW5pbWF0ZSl7ZD11LnJlbmRlcmVyKG0saC5nZXRBdChwKSx7dHJhbnNsYXRlOm99LHAsaCk7bS5fdG89ZDt1Lm9uQW5pbWF0ZShtLHt0bzpkfSk7Zm9yKGU9MDtlPHI7ZSsrKXtzPUV4dC5hcHBseSh7fSxxW2VdKTtkPXUucmVuZGVyZXIoYltlXSxoLmdldEF0KHApLEV4dC5hcHBseSh7fSx7aGlkZGVuOmZhbHNlLHRyYW5zbGF0ZTp7eDpvLngrKHMudHJhbnNsYXRlP3MudHJhbnNsYXRlLng6MCkseTpvLnkrKHMudHJhbnNsYXRlP3MudHJhbnNsYXRlLnk6MCl9fSxzKSxwLGgpO3Uub25BbmltYXRlKGJbZV0se3RvOmR9KX19ZWxzZXtkPXUucmVuZGVyZXIobSxoLmdldEF0KHApLHt0cmFuc2xhdGU6b30scCxoKTttLl90bz1kO20uc2V0QXR0cmlidXRlcyhkLHRydWUpO2ZvcihlPTA7ZTxyO2UrKyl7cz1FeHQuYXBwbHkoe30scVtlXSk7ZD11LnJlbmRlcmVyKGJbZV0saC5nZXRBdChwKSxFeHQuYXBwbHkoe30se2hpZGRlbjpmYWxzZSx0cmFuc2xhdGU6e3g6by54KyhzLnRyYW5zbGF0ZT9zLnRyYW5zbGF0ZS54OjApLHk6by55KyhzLnRyYW5zbGF0ZT9zLnRyYW5zbGF0ZS55OjApfX0scykscCxoKTtiW2VdLnNldEF0dHJpYnV0ZXMoZCx0cnVlKX19dS5pdGVtc1twXS5zcHJpdGU9bX1rPWouZ2V0Q291bnQoKTtmb3IocD1uLmxlbmd0aDtwPGs7cCsrKXtqLmdldEF0KHApLmhpZGUodHJ1ZSl9dS5yZW5kZXJMYWJlbHMoKTt1LnJlbmRlckNhbGxvdXRzKCl9LG9uQ3JlYXRlTGFiZWw6ZnVuY3Rpb24oZCxrLGMsZSl7dmFyIGc9dGhpcyxoPWcubGFiZWxzR3JvdXAsYT1nLmxhYmVsLGI9RXh0LmFwcGx5KHt9LGEsZy5zZXJpZXNMYWJlbFN0eWxlKSxqPWcuYmJveDtyZXR1cm4gZy5jaGFydC5zdXJmYWNlLmFkZChFeHQuYXBwbHkoe3R5cGU6InRleHQiLGdyb3VwOmgseDprLnBvaW50WzBdLHk6ai55K2ouaGVpZ2h0LzJ9LGIpKX0sb25QbGFjZUxhYmVsOmZ1bmN0aW9uKGcsayx0LHEscCxkKXt2YXIgdj10aGlzLGw9di5jaGFydCxzPWwucmVzaXppbmcsdT12LmxhYmVsLHI9dS5yZW5kZXJlcixiPXUuZmllbGQsYT12LmJib3gsaj10LnBvaW50WzBdLGg9dC5wb2ludFsxXSxjPXQuc3ByaXRlLmF0dHIucmFkaXVzLGUsbixtLG87Zy5zZXRBdHRyaWJ1dGVzKHt0ZXh0OnIoay5nZXQoYikpLGhpZGRlbjp0cnVlfSx0cnVlKTtpZihwPT0icm90YXRlIil7Zy5zZXRBdHRyaWJ1dGVzKHsidGV4dC1hbmNob3IiOiJzdGFydCIscm90YXRpb246e3g6aix5OmgsZGVncmVlczotNDV9fSx0cnVlKTtlPWcuZ2V0QkJveCgpO249ZS53aWR0aDttPWUuaGVpZ2h0O2o9ajxhLng/YS54Omo7aj0oaituPmEueCthLndpZHRoKT8oai0oaituLWEueC1hLndpZHRoKSk6ajtoPShoLW08YS55KT9hLnkrbTpofWVsc2V7aWYocD09InVuZGVyInx8cD09Im92ZXIiKXtlPXQuc3ByaXRlLmdldEJCb3goKTtlLndpZHRoPWUud2lkdGh8fChjKjIpO2UuaGVpZ2h0PWUuaGVpZ2h0fHwoYyoyKTtoPWgrKHA9PSJvdmVyIj8tZS5oZWlnaHQ6ZS5oZWlnaHQpO2U9Zy5nZXRCQm94KCk7bj1lLndpZHRoLzI7bT1lLmhlaWdodC8yO2o9ai1uPGEueD9hLngrbjpqO2o9KGorbj5hLngrYS53aWR0aCk/KGotKGorbi1hLngtYS53aWR0aCkpOmo7aD1oLW08YS55P2EueSttOmg7aD0oaCttPmEueSthLmhlaWdodCk/KGgtKGgrbS1hLnktYS5oZWlnaHQpKTpofX1pZighbC5hbmltYXRlKXtnLnNldEF0dHJpYnV0ZXMoe3g6aix5Omh9LHRydWUpO2cuc2hvdyh0cnVlKX1lbHNle2lmKHMpe289dC5zcHJpdGUuZ2V0QWN0aXZlQW5pbWF0aW9uKCk7aWYobyl7by5vbigiYWZ0ZXJhbmltYXRlIixmdW5jdGlvbigpe2cuc2V0QXR0cmlidXRlcyh7eDpqLHk6aH0sdHJ1ZSk7Zy5zaG93KHRydWUpfSl9ZWxzZXtnLnNob3codHJ1ZSl9fWVsc2V7di5vbkFuaW1hdGUoZyx7dG86e3g6aix5Omh9fSl9fX0sb25QbGFjZUNhbGxvdXQ6ZnVuY3Rpb24oayxtLEIseix3LGMsaCl7dmFyIEU9dGhpcyxuPUUuY2hhcnQsdT1uLnN1cmZhY2UsQT1uLnJlc2l6aW5nLEQ9RS5jYWxsb3V0cyxvPUUuaXRlbXMsYj1CLnBvaW50LEYsYT1rLmxhYmVsLmdldEJCb3goKSxDPTMwLHQ9MTAscz0zLGUsZCxnLHIscSx2PUUuYmJveCxsLGo7Rj1bTWF0aC5jb3MoTWF0aC5QSS80KSwtTWF0aC5zaW4oTWF0aC5QSS80KV07bD1iWzBdK0ZbMF0qQztqPWJbMV0rRlsxXSpDO2U9bCsoRlswXT4wPzA6LShhLndpZHRoKzIqcykpO2Q9ai1hLmhlaWdodC8yLXM7Zz1hLndpZHRoKzIqcztyPWEuaGVpZ2h0KzIqcztpZihlPHZbMF18fChlK2cpPih2WzBdK3ZbMl0pKXtGWzBdKj0tMX1pZihkPHZbMV18fChkK3IpPih2WzFdK3ZbM10pKXtGWzFdKj0tMX1sPWJbMF0rRlswXSpDO2o9YlsxXStGWzFdKkM7ZT1sKyhGWzBdPjA/MDotKGEud2lkdGgrMipzKSk7ZD1qLWEuaGVpZ2h0LzItcztnPWEud2lkdGgrMipzO3I9YS5oZWlnaHQrMipzO2lmKG4uYW5pbWF0ZSl7RS5vbkFuaW1hdGUoay5saW5lcyx7dG86e3BhdGg6WyJNIixiWzBdLGJbMV0sIkwiLGwsaiwiWiJdfX0sdHJ1ZSk7RS5vbkFuaW1hdGUoay5ib3gse3RvOnt4OmUseTpkLHdpZHRoOmcsaGVpZ2h0OnJ9fSx0cnVlKTtFLm9uQW5pbWF0ZShrLmxhYmVsLHt0bzp7eDpsKyhGWzBdPjA/czotKGEud2lkdGgrcykpLHk6an19LHRydWUpfWVsc2V7ay5saW5lcy5zZXRBdHRyaWJ1dGVzKHtwYXRoOlsiTSIsYlswXSxiWzFdLCJMIixsLGosIloiXX0sdHJ1ZSk7ay5ib3guc2V0QXR0cmlidXRlcyh7eDplLHk6ZCx3aWR0aDpnLGhlaWdodDpyfSx0cnVlKTtrLmxhYmVsLnNldEF0dHJpYnV0ZXMoe3g6bCsoRlswXT4wP3M6LShhLndpZHRoK3MpKSx5Omp9LHRydWUpfWZvcihxIGluIGspe2tbcV0uc2hvdyh0cnVlKX19LG9uQW5pbWF0ZTpmdW5jdGlvbihiLGEpe2Iuc2hvdygpO3JldHVybiB0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0saXNJdGVtSW5Qb2ludDpmdW5jdGlvbihjLGgsZSl7dmFyIGIsZD0xMCxhPU1hdGguYWJzO2Z1bmN0aW9uIGcoaSl7dmFyIGs9YShpWzBdLWMpLGo9YShpWzFdLWgpO3JldHVybiBNYXRoLnNxcnQoayprK2oqail9Yj1lLnBvaW50O3JldHVybihiWzBdLWQ8PWMmJmJbMF0rZD49YyYmYlsxXS1kPD1oJiZiWzFdK2Q+PWgpfX0pO0V4dC5kZWZpbmUoIkV4dC5sYXlvdXQuY29udGFpbmVyLlRhYmxlIix7YWxpYXM6WyJsYXlvdXQudGFibGUiXSxleHRlbmQ6IkV4dC5sYXlvdXQuY29udGFpbmVyLkNvbnRhaW5lciIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQubGF5b3V0LlRhYmxlTGF5b3V0Iixtb25pdG9yUmVzaXplOmZhbHNlLHR5cGU6InRhYmxlIixjbGVhckVsOnRydWUsdGFyZ2V0Q2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ0YWJsZS1sYXlvdXQtY3QiLHRhYmxlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ0YWJsZS1sYXlvdXQiLGNlbGxDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInRhYmxlLWxheW91dC1jZWxsIix0YWJsZUF0dHJzOm51bGwsaXRlbVNpemVQb2xpY3k6e3NldHNXaWR0aDowLHNldHNIZWlnaHQ6MH0sZ2V0SXRlbVNpemVQb2xpY3k6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXRlbVNpemVQb2xpY3l9LGdldExheW91dEl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcyxiPVtdLGM9Zy5jYWxsUGFyZW50KCksZSxhPWMubGVuZ3RoLGQ7Zm9yKGQ9MDtkPGE7ZCsrKXtlPWNbZF07aWYoIWUuaGlkZGVuKXtiLnB1c2goZSl9fXJldHVybiBifSxyZW5kZXJDaGlsZHJlbjpmdW5jdGlvbigpe3ZhciBqPXRoaXMsaD1qLmdldExheW91dEl0ZW1zKCksZT1qLm93bmVyLmdldFRhcmdldEVsKCkuY2hpbGQoInRhYmxlIix0cnVlKS50Qm9kaWVzWzBdLHA9ZS5yb3dzLGQ9MCxnPWgubGVuZ3RoLG8sbSxjLGEsbixsLGssYjtvPWouY2FsY3VsYXRlQ2VsbHMoaCk7Zm9yKDtkPGc7ZCsrKXttPW9bZF07Yz1tLnJvd0lkeDthPW0uY2VsbElkeDtuPWhbZF07bD1wW2NdO2lmKCFsKXtsPWUuaW5zZXJ0Um93KGMpO2lmKGoudHJBdHRycyl7bC5zZXQoai50ckF0dHJzKX19Yj1rPUV4dC5nZXQobC5jZWxsc1thXXx8bC5pbnNlcnRDZWxsKGEpKTtpZihqLm5lZWRzRGl2V3JhcCgpKXtiPWsuZmlyc3QoKXx8ay5jcmVhdGVDaGlsZCh7dGFnOiJkaXYifSk7Yi5zZXRXaWR0aChudWxsKX1pZighbi5yZW5kZXJlZCl7ai5yZW5kZXJJdGVtKG4sYiwwKX1lbHNle2lmKCFqLmlzVmFsaWRQYXJlbnQobixiLGMsYSxlKSl7ai5tb3ZlSXRlbShuLGIsMCl9fWlmKGoudGRBdHRycyl7ay5zZXQoai50ZEF0dHJzKX1pZihuLnRkQXR0cnMpe2suc2V0KG4udGRBdHRycyl9ay5zZXQoe2NvbFNwYW46bi5jb2xzcGFufHwxLHJvd1NwYW46bi5yb3dzcGFufHwxLGlkOm4uY2VsbElkfHwiIixjbHM6ai5jZWxsQ2xzKyIgIisobi5jZWxsQ2xzfHwiIil9KTtpZighb1tkKzFdfHxvW2QrMV0ucm93SWR4IT09Yyl7YSsrO3doaWxlKGwuY2VsbHNbYV0pe2wuZGVsZXRlQ2VsbChhKX19fWMrKzt3aGlsZShlLnJvd3NbY10pe2UuZGVsZXRlUm93KGMpfX0sY2FsY3VsYXRlOmZ1bmN0aW9uKGcpe2lmKCFnLmhhc0RvbVByb3AoImNvbnRhaW5lckNoaWxkcmVuRG9uZSIpKXt0aGlzLmRvbmU9ZmFsc2V9ZWxzZXt2YXIgYz1nLnRhcmdldENvbnRleHQsYj1nLndpZHRoTW9kZWwuc2hyaW5rV3JhcCxhPWcuaGVpZ2h0TW9kZWwuc2hyaW5rV3JhcCxoPWF8fGIsZD1oJiZjLmVsLmNoaWxkKCJ0YWJsZSIsdHJ1ZSksZT1oJiZjLmdldFBhZGRpbmdJbmZvKCk7aWYoYil7Zy5zZXRDb250ZW50V2lkdGgoZC5vZmZzZXRXaWR0aCtlLndpZHRoLHRydWUpfWlmKGEpe2cuc2V0Q29udGVudEhlaWdodChkLm9mZnNldEhlaWdodCtlLmhlaWdodCx0cnVlKX19fSxmaW5hbGl6ZUxheW91dDpmdW5jdGlvbigpe2lmKHRoaXMubmVlZHNEaXZXcmFwKCkpe3ZhciBiPXRoaXMuZ2V0TGF5b3V0SXRlbXMoKSxjLGE9Yi5sZW5ndGgsZDtmb3IoYz0wO2M8YTtjKyspe2Q9YltjXTtFeHQuZmx5KGQuZWwuZG9tLnBhcmVudE5vZGUpLnNldFdpZHRoKGQuZ2V0V2lkdGgoKSl9fWlmKEV4dC5pc0lFNnx8KEV4dC5pc0lFUXVpcmtzKSl7dGhpcy5vd25lci5nZXRUYXJnZXRFbCgpLmNoaWxkKCJ0YWJsZSIpLnJlcGFpbnQoKX19LGNhbGN1bGF0ZUNlbGxzOmZ1bmN0aW9uKGspe3ZhciBtPVtdLGI9MCxkPTAsYT0wLGg9dGhpcy5jb2x1bW5zfHxJbmZpbml0eSxuPVtdLGU9MCxjLGc9ay5sZW5ndGgsbDtmb3IoO2U8ZztlKyspe2w9a1tlXTt3aGlsZShkPj1ofHxuW2RdPjApe2lmKGQ+PWgpe2Q9MDthPTA7YisrO2ZvcihjPTA7YzxoO2MrKyl7aWYobltjXT4wKXtuW2NdLS19fX1lbHNle2QrK319bS5wdXNoKHtyb3dJZHg6YixjZWxsSWR4OmF9KTtmb3IoYz1sLmNvbHNwYW58fDE7YzstLWMpe25bZF09bC5yb3dzcGFufHwxOysrZH0rK2F9cmV0dXJuIG19LGdldFJlbmRlclRyZWU6ZnVuY3Rpb24oKXt2YXIgaz10aGlzLGg9ay5nZXRMYXlvdXRJdGVtcygpLG8scD1bXSxxPUV4dC5hcHBseSh7dGFnOiJ0YWJsZSIscm9sZToicHJlc2VudGF0aW9uIixjbHM6ay50YWJsZUNscyxjZWxsc3BhY2luZzowLGNuOnt0YWc6InRib2R5IixjbjpwfX0say50YWJsZUF0dHJzKSxjPWsudGRBdHRycyxkPWsubmVlZHNEaXZXcmFwKCksZSxnPWgubGVuZ3RoLG4sbSxqLGIsYSxsO289ay5jYWxjdWxhdGVDZWxscyhoKTtmb3IoZT0wO2U8ZztlKyspe249aFtlXTttPW9bZV07Yj1tLnJvd0lkeDthPW0uY2VsbElkeDtqPXBbYl07aWYoIWope2o9cFtiXT17dGFnOiJ0ciIsY246W119O2lmKGsudHJBdHRycyl7RXh0LmFwcGx5KGosay50ckF0dHJzKX19bD1qLmNuW2FdPXt0YWc6InRkIn07aWYoYyl7RXh0LmFwcGx5KGwsYyl9RXh0LmFwcGx5KGwse2NvbFNwYW46bi5jb2xzcGFufHwxLHJvd1NwYW46bi5yb3dzcGFufHwxLGlkOm4uY2VsbElkfHwiIixjbHM6ay5jZWxsQ2xzKyIgIisobi5jZWxsQ2xzfHwiIil9KTtpZihkKXtsPWwuY249e3RhZzoiZGl2In19ay5jb25maWd1cmVJdGVtKG4pO2wuY249bi5nZXRSZW5kZXJUcmVlKCl9cmV0dXJuIHF9LGlzVmFsaWRQYXJlbnQ6ZnVuY3Rpb24oZyxoLGUsZCl7dmFyIGIsYSxjO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0zKXtjPWcuZWwudXAoInRhYmxlIik7cmV0dXJuIGMmJmMuZG9tLnBhcmVudE5vZGU9PT1oLmRvbX1iPXRoaXMub3duZXIuZ2V0VGFyZ2V0RWwoKS5jaGlsZCgidGFibGUiLHRydWUpLnRCb2RpZXNbMF07YT1iLnJvd3NbZV0uY2VsbHNbZF07cmV0dXJuIGcuZWwuZG9tLnBhcmVudE5vZGU9PT1hfSxuZWVkc0RpdldyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmlzT3BlcmExMF81fX0pO0V4dC5kZWZpbmUoIkV4dC5jb250YWluZXIuQnV0dG9uR3JvdXAiLHtleHRlbmQ6IkV4dC5wYW5lbC5QYW5lbCIsYWxpYXM6IndpZGdldC5idXR0b25ncm91cCIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuQnV0dG9uR3JvdXAiLHJlcXVpcmVzOlsiRXh0LmxheW91dC5jb250YWluZXIuVGFibGUiXSxiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJidG4tZ3JvdXAiLGxheW91dDp7dHlwZToidGFibGUifSxkZWZhdWx0VHlwZToiYnV0dG9uIixmcmFtZTp0cnVlLGZyYW1lSGVhZGVyOmZhbHNlLHRpdGxlQWxpZ246ImNlbnRlciIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNvbHVtbnM7YS5ub1RpdGxlQ2xzPWEuYmFzZUNscysiLW5vdGl0bGUiO2lmKGIpe2EubGF5b3V0PUV4dC5hcHBseSh7fSx7Y29sdW1uczpifSxhLmxheW91dCl9aWYoIWEudGl0bGUpe2EuYWRkQ2xzKGEubm9UaXRsZUNscyl9YS5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LG9uQmVmb3JlQWRkOmZ1bmN0aW9uKGEpe2lmKGEuaXNCdXR0b24pe2EudWk9YS51aSsiLXRvb2xiYXIifXRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxhcHBseURlZmF1bHRzOmZ1bmN0aW9uKGEpe2lmKCFFeHQuaXNTdHJpbmcoYSkpe2E9dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9cmV0dXJuIGF9fSk7RXh0LmRlZmluZSgiRXh0LmNvbnRhaW5lci5WaWV3cG9ydCIse2V4dGVuZDoiRXh0LmNvbnRhaW5lci5Db250YWluZXIiLGFsaWFzOiJ3aWRnZXQudmlld3BvcnQiLHJlcXVpcmVzOlsiRXh0LkV2ZW50TWFuYWdlciJdLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LlZpZXdwb3J0Iixpc1ZpZXdwb3J0OnRydWUsYXJpYVJvbGU6ImFwcGxpY2F0aW9uIixwcmVzZXJ2ZUVsT25EZXN0cm95OnRydWUsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYT1kb2N1bWVudC5ib2R5LnBhcmVudE5vZGUsYjtFeHQuZ2V0U2Nyb2xsYmFyU2l6ZSgpO2Mud2lkdGg9Yy5oZWlnaHQ9dW5kZWZpbmVkO2MuY2FsbFBhcmVudChhcmd1bWVudHMpO0V4dC5mbHkoYSkuYWRkQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJ2aWV3cG9ydCIpO2lmKGMuYXV0b1Njcm9sbCl7ZGVsZXRlIGMuYXV0b1Njcm9sbDtFeHQuZmx5KGEpLnNldFN0eWxlKCJvdmVyZmxvdyIsImF1dG8iKX1jLmVsPWI9RXh0LmdldEJvZHkoKTtiLnNldEhlaWdodD1FeHQuZW1wdHlGbjtiLnNldFdpZHRoPUV4dC5lbXB0eUZuO2Iuc2V0U2l6ZT1FeHQuZW1wdHlGbjtiLmRvbS5zY3JvbGw9Im5vIjtjLmFsbG93RG9tTW92ZT1mYWxzZTtjLnJlbmRlclRvPWMuZWx9LG9uUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLndpZHRoPUV4dC5FbGVtZW50LmdldFZpZXdwb3J0V2lkdGgoKTthLmhlaWdodD1FeHQuRWxlbWVudC5nZXRWaWV3cG9ydEhlaWdodCgpfSxhZnRlckZpcnN0TGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7RXh0LkV2ZW50TWFuYWdlci5vbldpbmRvd1Jlc2l6ZShhLmZpcmVSZXNpemUsYSl9LDEpfSxmaXJlUmVzaXplOmZ1bmN0aW9uKGIsYSl7aWYoYiE9dGhpcy53aWR0aHx8YSE9dGhpcy5oZWlnaHQpe3RoaXMuc2V0U2l6ZShiLGEpfX19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5wcm94eS5Qcm94eSIse2FsaWFzOiJwcm94eS5wcm94eSIsYWx0ZXJuYXRlQ2xhc3NOYW1lOlsiRXh0LmRhdGEuRGF0YVByb3h5IiwiRXh0LmRhdGEuUHJveHkiXSx1c2VzOlsiRXh0LmRhdGEuQmF0Y2giLCJFeHQuZGF0YS5PcGVyYXRpb24iLCJFeHQuZGF0YS5Nb2RlbCJdLG1peGluczp7b2JzZXJ2YWJsZToiRXh0LnV0aWwuT2JzZXJ2YWJsZSJ9LGJhdGNoT3JkZXI6ImNyZWF0ZSx1cGRhdGUsZGVzdHJveSIsYmF0Y2hBY3Rpb25zOnRydWUsZGVmYXVsdFJlYWRlclR5cGU6Impzb24iLGRlZmF1bHRXcml0ZXJUeXBlOiJqc29uIixpc1Byb3h5OnRydWUsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7YT1hfHx7fTtpZihhLm1vZGVsPT09dW5kZWZpbmVkKXtkZWxldGUgYS5tb2RlbH10aGlzLm1peGlucy5vYnNlcnZhYmxlLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTtpZih0aGlzLm1vZGVsIT09dW5kZWZpbmVkJiYhKHRoaXMubW9kZWwgaW5zdGFuY2VvZiBFeHQuZGF0YS5Nb2RlbCkpe3RoaXMuc2V0TW9kZWwodGhpcy5tb2RlbCl9fSxzZXRNb2RlbDpmdW5jdGlvbihiLGMpe3RoaXMubW9kZWw9RXh0Lk1vZGVsTWFuYWdlci5nZXRNb2RlbChiKTt2YXIgYT10aGlzLnJlYWRlcixkPXRoaXMud3JpdGVyO3RoaXMuc2V0UmVhZGVyKGEpO3RoaXMuc2V0V3JpdGVyKGQpO2lmKGMmJnRoaXMuc3RvcmUpe3RoaXMuc3RvcmUuc2V0TW9kZWwodGhpcy5tb2RlbCl9fSxnZXRNb2RlbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vZGVsfSxzZXRSZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxiPXRydWU7aWYoYT09PXVuZGVmaW5lZHx8dHlwZW9mIGE9PSJzdHJpbmciKXthPXt0eXBlOmF9O2I9ZmFsc2V9aWYoYS5pc1JlYWRlcil7YS5zZXRNb2RlbChjLm1vZGVsKX1lbHNle2lmKGIpe2E9RXh0LmFwcGx5KHt9LGEpfUV4dC5hcHBseUlmKGEse3Byb3h5OmMsbW9kZWw6Yy5tb2RlbCx0eXBlOmMuZGVmYXVsdFJlYWRlclR5cGV9KTthPUV4dC5jcmVhdGVCeUFsaWFzKCJyZWFkZXIuIithLnR5cGUsYSl9aWYoYS5vbk1ldGFDaGFuZ2Upe2Eub25NZXRhQ2hhbmdlPUV4dC5GdW5jdGlvbi5jcmVhdGVTZXF1ZW5jZShhLm9uTWV0YUNoYW5nZSx0aGlzLm9uTWV0YUNoYW5nZSx0aGlzKX1jLnJlYWRlcj1hO3JldHVybiBjLnJlYWRlcn0sZ2V0UmVhZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVhZGVyfSxvbk1ldGFDaGFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoIm1ldGFjaGFuZ2UiLHRoaXMsYSl9LHNldFdyaXRlcjpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE9dHJ1ZTtpZihjPT09dW5kZWZpbmVkfHx0eXBlb2YgYz09InN0cmluZyIpe2M9e3R5cGU6Y307YT1mYWxzZX1pZighYy5pc1dyaXRlcil7aWYoYSl7Yz1FeHQuYXBwbHkoe30sYyl9RXh0LmFwcGx5SWYoYyx7bW9kZWw6Yi5tb2RlbCx0eXBlOmIuZGVmYXVsdFdyaXRlclR5cGV9KTtjPUV4dC5jcmVhdGVCeUFsaWFzKCJ3cml0ZXIuIitjLnR5cGUsYyl9Yi53cml0ZXI9YztyZXR1cm4gYi53cml0ZXJ9LGdldFdyaXRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLndyaXRlcn0sY3JlYXRlOkV4dC5lbXB0eUZuLHJlYWQ6RXh0LmVtcHR5Rm4sdXBkYXRlOkV4dC5lbXB0eUZuLGRlc3Ryb3k6RXh0LmVtcHR5Rm4sYmF0Y2g6ZnVuY3Rpb24obyxsKXt2YXIgaz10aGlzLGo9ay5iYXRjaEFjdGlvbnMsaCxjLGcsZCxlLG0sYixuLGk7aWYoby5vcGVyYXRpb25zPT09dW5kZWZpbmVkKXtvPXtvcGVyYXRpb25zOm8sbGlzdGVuZXJzOmx9fWlmKG8uYmF0Y2gpe2lmKEV4dC5pc0RlZmluZWQoby5iYXRjaC5ydW5PcGVyYXRpb24pKXtoPUV4dC5hcHBseUlmKG8uYmF0Y2gse3Byb3h5OmssbGlzdGVuZXJzOnt9fSl9fWVsc2V7by5iYXRjaD17cHJveHk6ayxsaXN0ZW5lcnM6by5saXN0ZW5lcnN8fHt9fX1pZighaCl7aD1uZXcgRXh0LmRhdGEuQmF0Y2goby5iYXRjaCl9aC5vbigiY29tcGxldGUiLEV4dC5iaW5kKGsub25CYXRjaENvbXBsZXRlLGssW29dLDApKTtnPWsuYmF0Y2hPcmRlci5zcGxpdCgiLCIpO2Q9Zy5sZW5ndGg7Zm9yKG09MDttPGQ7bSsrKXtlPWdbbV07Yz1vLm9wZXJhdGlvbnNbZV07aWYoYyl7aWYoail7aC5hZGQobmV3IEV4dC5kYXRhLk9wZXJhdGlvbih7YWN0aW9uOmUscmVjb3JkczpjfSkpfWVsc2V7bj1jLmxlbmd0aDtmb3IoYj0wO2I8bjtiKyspe2k9Y1tiXTtoLmFkZChuZXcgRXh0LmRhdGEuT3BlcmF0aW9uKHthY3Rpb246ZSxyZWNvcmRzOltpXX0pKX19fX1oLnN0YXJ0KCk7cmV0dXJuIGh9LG9uQmF0Y2hDb21wbGV0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPWEuc2NvcGV8fHRoaXM7aWYoYi5oYXNFeGNlcHRpb24pe2lmKEV4dC5pc0Z1bmN0aW9uKGEuZmFpbHVyZSkpe0V4dC5jYWxsYmFjayhhLmZhaWx1cmUsYyxbYixhXSl9fWVsc2V7aWYoRXh0LmlzRnVuY3Rpb24oYS5zdWNjZXNzKSl7RXh0LmNhbGxiYWNrKGEuc3VjY2VzcyxjLFtiLGFdKX19aWYoRXh0LmlzRnVuY3Rpb24oYS5jYWxsYmFjaykpe0V4dC5jYWxsYmFjayhhLmNhbGxiYWNrLGMsW2IsYV0pfX19LGZ1bmN0aW9uKCl7RXh0LmRhdGEuRGF0YVByb3h5PXRoaXN9KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5BYnN0cmFjdFN0b3JlIix7cmVxdWlyZXM6WyJFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24iLCJFeHQuZGF0YS5wcm94eS5Qcm94eSIsIkV4dC5kYXRhLk9wZXJhdGlvbiIsIkV4dC51dGlsLkZpbHRlciJdLG1peGluczp7b2JzZXJ2YWJsZToiRXh0LnV0aWwuT2JzZXJ2YWJsZSIsc29ydGFibGU6IkV4dC51dGlsLlNvcnRhYmxlIn0sc3RhdGljczp7Y3JlYXRlOmZ1bmN0aW9uKGEpe2lmKCFhLmlzU3RvcmUpe2lmKCFhLnR5cGUpe2EudHlwZT0ic3RvcmUifWE9RXh0LmNyZWF0ZUJ5QWxpYXMoInN0b3JlLiIrYS50eXBlLGEpfXJldHVybiBhfX0scmVtb3RlU29ydDpmYWxzZSxyZW1vdGVGaWx0ZXI6ZmFsc2UsYXV0b0xvYWQ6dW5kZWZpbmVkLGF1dG9TeW5jOmZhbHNlLGJhdGNoVXBkYXRlTW9kZToib3BlcmF0aW9uIixmaWx0ZXJPbkxvYWQ6dHJ1ZSxzb3J0T25Mb2FkOnRydWUsaW1wbGljaXRNb2RlbDpmYWxzZSxkZWZhdWx0UHJveHlUeXBlOiJtZW1vcnkiLGlzRGVzdHJveWVkOmZhbHNlLGlzU3RvcmU6dHJ1ZSxzb3J0Um9vdDoiZGF0YSIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxiO0V4dC5hcHBseShjLGEpO2MucmVtb3ZlZD1bXTtjLm1peGlucy5vYnNlcnZhYmxlLmNvbnN0cnVjdG9yLmFwcGx5KGMsYXJndW1lbnRzKTtjLm1vZGVsPUV4dC5Nb2RlbE1hbmFnZXIuZ2V0TW9kZWwoYy5tb2RlbCk7RXh0LmFwcGx5SWYoYyx7bW9kZWxEZWZhdWx0czp7fX0pO2lmKCFjLm1vZGVsJiZjLmZpZWxkcyl7Yy5tb2RlbD1FeHQuZGVmaW5lKCJFeHQuZGF0YS5TdG9yZS5JbXBsaWNpdE1vZGVsLSIrKGMuc3RvcmVJZHx8RXh0LmlkKCkpLHtleHRlbmQ6IkV4dC5kYXRhLk1vZGVsIixmaWVsZHM6Yy5maWVsZHMscHJveHk6Yy5wcm94eXx8Yy5kZWZhdWx0UHJveHlUeXBlfSk7ZGVsZXRlIGMuZmllbGRzO2MuaW1wbGljaXRNb2RlbD10cnVlfWMuc2V0UHJveHkoYy5wcm94eXx8Yy5tb2RlbC5nZXRQcm94eSgpKTtjLnByb3h5Lm9uKCJtZXRhY2hhbmdlIixjLm9uTWV0YUNoYW5nZSxjKTtpZihjLmlkJiYhYy5zdG9yZUlkKXtjLnN0b3JlSWQ9Yy5pZDtkZWxldGUgYy5pZH1pZihjLnN0b3JlSWQpe0V4dC5kYXRhLlN0b3JlTWFuYWdlci5yZWdpc3RlcihjKX1jLm1peGlucy5zb3J0YWJsZS5pbml0U29ydGFibGUuY2FsbChjKTtiPWMuZGVjb2RlRmlsdGVycyhjLmZpbHRlcnMpO2MuZmlsdGVycz1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKCk7Yy5maWx0ZXJzLmFkZEFsbChiKX0sc2V0UHJveHk6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihhIGluc3RhbmNlb2YgRXh0LmRhdGEucHJveHkuUHJveHkpe2Euc2V0TW9kZWwoYi5tb2RlbCl9ZWxzZXtpZihFeHQuaXNTdHJpbmcoYSkpe2E9e3R5cGU6YX19RXh0LmFwcGx5SWYoYSx7bW9kZWw6Yi5tb2RlbH0pO2E9RXh0LmNyZWF0ZUJ5QWxpYXMoInByb3h5LiIrYS50eXBlLGEpfWIucHJveHk9YTtyZXR1cm4gYi5wcm94eX0sZ2V0UHJveHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm94eX0sb25NZXRhQ2hhbmdlOmZ1bmN0aW9uKGEsYil7dGhpcy5maXJlRXZlbnQoIm1ldGFjaGFuZ2UiLHRoaXMsYil9LGNyZWF0ZTpmdW5jdGlvbihlLGMpe3ZhciBkPXRoaXMsYT1FeHQuTW9kZWxNYW5hZ2VyLmNyZWF0ZShFeHQuYXBwbHlJZihlLGQubW9kZWxEZWZhdWx0cyksZC5tb2RlbC5tb2RlbE5hbWUpLGI7Yz1jfHx7fTtFeHQuYXBwbHlJZihjLHthY3Rpb246ImNyZWF0ZSIscmVjb3JkczpbYV19KTtiPW5ldyBFeHQuZGF0YS5PcGVyYXRpb24oYyk7ZC5wcm94eS5jcmVhdGUoYixkLm9uUHJveHlXcml0ZSxkKTtyZXR1cm4gYX0scmVhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxvYWQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx1cGRhdGU6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxhO2I9Ynx8e307RXh0LmFwcGx5SWYoYix7YWN0aW9uOiJ1cGRhdGUiLHJlY29yZHM6Yy5nZXRVcGRhdGVkUmVjb3JkcygpfSk7YT1uZXcgRXh0LmRhdGEuT3BlcmF0aW9uKGIpO3JldHVybiBjLnByb3h5LnVwZGF0ZShhLGMub25Qcm94eVdyaXRlLGMpfSxvblByb3h5V3JpdGU6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxkPWIud2FzU3VjY2Vzc2Z1bCgpLGE9Yi5nZXRSZWNvcmRzKCk7c3dpdGNoKGIuYWN0aW9uKXtjYXNlImNyZWF0ZSI6Yy5vbkNyZWF0ZVJlY29yZHMoYSxiLGQpO2JyZWFrO2Nhc2UidXBkYXRlIjpjLm9uVXBkYXRlUmVjb3JkcyhhLGIsZCk7YnJlYWs7Y2FzZSJkZXN0cm95IjpjLm9uRGVzdHJveVJlY29yZHMoYSxiLGQpO2JyZWFrfWlmKGQpe2MuZmlyZUV2ZW50KCJ3cml0ZSIsYyxiKTtjLmZpcmVFdmVudCgiZGF0YWNoYW5nZWQiLGMpO2MuZmlyZUV2ZW50KCJyZWZyZXNoIixjKX1FeHQuY2FsbGJhY2soYi5jYWxsYmFjayxiLnNjb3BlfHxjLFthLGIsZF0pfSxvbkNyZWF0ZVJlY29yZHM6RXh0LmVtcHR5Rm4sb25VcGRhdGVSZWNvcmRzOkV4dC5lbXB0eUZuLG9uRGVzdHJveVJlY29yZHM6ZnVuY3Rpb24oYixhLGMpe2lmKGMpe3RoaXMucmVtb3ZlZD1bXX19LGRlc3Ryb3k6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxhO2I9Ynx8e307RXh0LmFwcGx5SWYoYix7YWN0aW9uOiJkZXN0cm95IixyZWNvcmRzOmMuZ2V0UmVtb3ZlZFJlY29yZHMoKX0pO2E9bmV3IEV4dC5kYXRhLk9wZXJhdGlvbihiKTtyZXR1cm4gYy5wcm94eS5kZXN0cm95KGEsYy5vblByb3h5V3JpdGUsYyl9LG9uQmF0Y2hPcGVyYXRpb25Db21wbGV0ZTpmdW5jdGlvbihiLGEpe3JldHVybiB0aGlzLm9uUHJveHlXcml0ZShhKX0sb25CYXRjaENvbXBsZXRlOmZ1bmN0aW9uKGMsYSl7dmFyIGc9dGhpcyxiPWMub3BlcmF0aW9ucyxlPWIubGVuZ3RoLGQ7Zy5zdXNwZW5kRXZlbnRzKCk7Zm9yKGQ9MDtkPGU7ZCsrKXtnLm9uUHJveHlXcml0ZShiW2RdKX1nLnJlc3VtZUV2ZW50cygpO2cuZmlyZUV2ZW50KCJkYXRhY2hhbmdlZCIsZyk7Zy5maXJlRXZlbnQoInJlZnJlc2giLGcpfSxvbkJhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKGIsYSl7fSxmaWx0ZXJOZXc6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGhhbnRvbT09PXRydWUmJmEuaXNWYWxpZCgpfSxnZXROZXdSZWNvcmRzOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldFVwZGF0ZWRSZWNvcmRzOmZ1bmN0aW9uKCl7cmV0dXJuW119LGdldE1vZGlmaWVkUmVjb3JkczpmdW5jdGlvbigpe3JldHVybltdLmNvbmNhdCh0aGlzLmdldE5ld1JlY29yZHMoKSx0aGlzLmdldFVwZGF0ZWRSZWNvcmRzKCkpfSxmaWx0ZXJVcGRhdGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpcnR5PT09dHJ1ZSYmYS5waGFudG9tIT09dHJ1ZSYmYS5pc1ZhbGlkKCl9LGdldFJlbW92ZWRSZWNvcmRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3ZlZH0sZmlsdGVyOmZ1bmN0aW9uKGEsYil7fSxkZWNvZGVGaWx0ZXJzOmZ1bmN0aW9uKGUpe2lmKCFFeHQuaXNBcnJheShlKSl7aWYoZT09PXVuZGVmaW5lZCl7ZT1bXX1lbHNle2U9W2VdfX12YXIgZD1lLmxlbmd0aCxhPUV4dC51dGlsLkZpbHRlcixiLGM7Zm9yKGM9MDtjPGQ7YysrKXtiPWVbY107aWYoIShiIGluc3RhbmNlb2YgYSkpe0V4dC5hcHBseShiLHtyb290OiJkYXRhIn0pO2lmKGIuZm4pe2IuZmlsdGVyRm49Yi5mbn1pZih0eXBlb2YgYj09ImZ1bmN0aW9uIil7Yj17ZmlsdGVyRm46Yn19ZVtjXT1uZXcgYShiKX19cmV0dXJuIGV9LGNsZWFyRmlsdGVyOmZ1bmN0aW9uKGEpe30saXNGaWx0ZXJlZDpmdW5jdGlvbigpe30sZmlsdGVyQnk6ZnVuY3Rpb24oYixhKXt9LHN5bmM6ZnVuY3Rpb24oYyl7dmFyIGU9dGhpcyxiPXt9LGc9ZS5nZXROZXdSZWNvcmRzKCksZD1lLmdldFVwZGF0ZWRSZWNvcmRzKCksYT1lLmdldFJlbW92ZWRSZWNvcmRzKCksaD1mYWxzZTtpZihnLmxlbmd0aD4wKXtiLmNyZWF0ZT1nO2g9dHJ1ZX1pZihkLmxlbmd0aD4wKXtiLnVwZGF0ZT1kO2g9dHJ1ZX1pZihhLmxlbmd0aD4wKXtiLmRlc3Ryb3k9YTtoPXRydWV9aWYoaCYmZS5maXJlRXZlbnQoImJlZm9yZXN5bmMiLGIpIT09ZmFsc2Upe2M9Y3x8e307ZS5wcm94eS5iYXRjaChFeHQuYXBwbHkoYyx7b3BlcmF0aW9uczpiLGxpc3RlbmVyczplLmdldEJhdGNoTGlzdGVuZXJzKCl9KSl9cmV0dXJuIGV9LGdldEJhdGNoTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPXtzY29wZTpiLGV4Y2VwdGlvbjpiLm9uQmF0Y2hFeGNlcHRpb259O2lmKGIuYmF0Y2hVcGRhdGVNb2RlPT0ib3BlcmF0aW9uIil7YS5vcGVyYXRpb25jb21wbGV0ZT1iLm9uQmF0Y2hPcGVyYXRpb25Db21wbGV0ZX1lbHNle2EuY29tcGxldGU9Yi5vbkJhdGNoQ29tcGxldGV9cmV0dXJuIGF9LHNhdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zeW5jLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbG9hZDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLGE7Yj1FeHQuYXBwbHkoe2FjdGlvbjoicmVhZCIsZmlsdGVyczpjLmZpbHRlcnMuaXRlbXMsc29ydGVyczpjLmdldFNvcnRlcnMoKX0sYik7Yy5sYXN0T3B0aW9ucz1iO2E9bmV3IEV4dC5kYXRhLk9wZXJhdGlvbihiKTtpZihjLmZpcmVFdmVudCgiYmVmb3JlbG9hZCIsYyxhKSE9PWZhbHNlKXtjLmxvYWRpbmc9dHJ1ZTtjLnByb3h5LnJlYWQoYSxjLm9uUHJveHlMb2FkLGMpfXJldHVybiBjfSxyZWxvYWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubG9hZChFeHQuYXBwbHkodGhpcy5sYXN0T3B0aW9ucyxhKSl9LGFmdGVyRWRpdDpmdW5jdGlvbihhLGUpe3ZhciBkPXRoaXMsYixjO2lmKGQuYXV0b1N5bmMmJiFkLmF1dG9TeW5jU3VzcGVuZGVkKXtmb3IoYj1lLmxlbmd0aDtiLS07KXtpZihhLmZpZWxkcy5nZXQoZVtiXSkucGVyc2lzdCl7Yz10cnVlO2JyZWFrfX1pZihjKXtkLnN5bmMoKX19ZC5maXJlRXZlbnQoInVwZGF0ZSIsZCxhLEV4dC5kYXRhLk1vZGVsLkVESVQsZSl9LGFmdGVyUmVqZWN0OmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJ1cGRhdGUiLHRoaXMsYSxFeHQuZGF0YS5Nb2RlbC5SRUpFQ1QsbnVsbCl9LGFmdGVyQ29tbWl0OmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJ1cGRhdGUiLHRoaXMsYSxFeHQuZGF0YS5Nb2RlbC5DT01NSVQsbnVsbCl9LGRlc3Ryb3lTdG9yZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoIWEuaXNEZXN0cm95ZWQpe2lmKGEuc3RvcmVJZCl7RXh0LmRhdGEuU3RvcmVNYW5hZ2VyLnVucmVnaXN0ZXIoYSl9YS5jbGVhckRhdGEoKTthLmRhdGE9YS50cmVlPWEuc29ydGVycz1hLmZpbHRlcnM9YS5ncm91cGVycz1udWxsO2lmKGEucmVhZGVyKXthLnJlYWRlci5kZXN0cm95UmVhZGVyKCl9YS5wcm94eT1hLnJlYWRlcj1hLndyaXRlcj1udWxsO2EuY2xlYXJMaXN0ZW5lcnMoKTthLmlzRGVzdHJveWVkPXRydWU7aWYoYS5pbXBsaWNpdE1vZGVsKXtFeHQuZGVzdHJveShhLm1vZGVsKX1lbHNle2EubW9kZWw9bnVsbH19fSxkb1NvcnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihiLnJlbW90ZVNvcnQpe2IubG9hZCgpfWVsc2V7Yi5kYXRhLnNvcnRCeShhKTtiLmZpcmVFdmVudCgiZGF0YWNoYW5nZWQiLGIpO2IuZmlyZUV2ZW50KCJyZWZyZXNoIixiKX19LGNsZWFyRGF0YTpFeHQuZW1wdHlGbixnZXRDb3VudDpFeHQuZW1wdHlGbixnZXRCeUlkOkV4dC5lbXB0eUZuLHJlbW92ZUFsbDpFeHQuZW1wdHlGbixpc0xvYWRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLmxvYWRpbmd9LHN1c3BlbmRBdXRvU3luYzpmdW5jdGlvbigpe3RoaXMuYXV0b1N5bmNTdXNwZW5kZWQ9dHJ1ZX0scmVzdW1lQXV0b1N5bmM6ZnVuY3Rpb24oKXt0aGlzLmF1dG9TeW5jU3VzcGVuZGVkPWZhbHNlfX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLlJlc3VsdFNldCIse2xvYWRlZDp0cnVlLGNvdW50OjAsdG90YWw6MCxzdWNjZXNzOmZhbHNlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5hcHBseSh0aGlzLGEpO3RoaXMudG90YWxSZWNvcmRzPXRoaXMudG90YWw7aWYoYS5jb3VudD09PXVuZGVmaW5lZCl7dGhpcy5jb3VudD10aGlzLnJlY29yZHMubGVuZ3RofX19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5yZWFkZXIuUmVhZGVyIix7cmVxdWlyZXM6WyJFeHQuZGF0YS5SZXN1bHRTZXQiLCJFeHQuWFRlbXBsYXRlIl0sYWx0ZXJuYXRlQ2xhc3NOYW1lOlsiRXh0LmRhdGEuUmVhZGVyIiwiRXh0LmRhdGEuRGF0YVJlYWRlciJdLG1peGluczp7b2JzZXJ2YWJsZToiRXh0LnV0aWwuT2JzZXJ2YWJsZSJ9LHRvdGFsUHJvcGVydHk6InRvdGFsIixzdWNjZXNzUHJvcGVydHk6InN1Y2Nlc3MiLHJvb3Q6IiIsaW1wbGljaXRJbmNsdWRlczp0cnVlLHJlYWRSZWNvcmRzT25GYWlsdXJlOnRydWUsaXNSZWFkZXI6dHJ1ZSxhcHBseURlZmF1bHRzOnRydWUsbGFzdEZpZWxkR2VuZXJhdGlvbjpudWxsLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5taXhpbnMub2JzZXJ2YWJsZS5jb25zdHJ1Y3Rvci5jYWxsKGIsYSk7Yi5maWVsZENvdW50PTA7Yi5tb2RlbD1FeHQuTW9kZWxNYW5hZ2VyLmdldE1vZGVsKGIubW9kZWwpO2IuYWNjZXNzRXhwcmVzc2lvbkZuPUV4dC5GdW5jdGlvbi5iaW5kKGIuY3JlYXRlRmllbGRBY2Nlc3NFeHByZXNzaW9uLGIpO2lmKGIubW9kZWwmJmIubW9kZWwucHJvdG90eXBlLmZpZWxkcyl7Yi5idWlsZEV4dHJhY3RvcnMoKX10aGlzLmFkZEV2ZW50cygiZXhjZXB0aW9uIil9LHNldE1vZGVsOmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcztiLm1vZGVsPUV4dC5Nb2RlbE1hbmFnZXIuZ2V0TW9kZWwoYSk7Yi5idWlsZEV4dHJhY3RvcnModHJ1ZSk7aWYoYyYmYi5wcm94eSl7Yi5wcm94eS5zZXRNb2RlbChiLm1vZGVsLHRydWUpfX0scmVhZDpmdW5jdGlvbihhKXt2YXIgYjtpZihhKXtiPWEucmVzcG9uc2VUZXh0P3RoaXMuZ2V0UmVzcG9uc2VEYXRhKGEpOnRoaXMucmVhZFJlY29yZHMoYSl9cmV0dXJuIGJ8fHRoaXMubnVsbFJlc3VsdFNldH0scmVhZFJlY29yZHM6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcyxpLGIsYSxnLGUsaCxqO2lmKGQubGFzdEZpZWxkR2VuZXJhdGlvbiE9PWQubW9kZWwucHJvdG90eXBlLmZpZWxkcy5nZW5lcmF0aW9uKXtkLmJ1aWxkRXh0cmFjdG9ycyh0cnVlKX1kLnJhd0RhdGE9YztjPWQuZ2V0RGF0YShjKTtpPXRydWU7Yj0wO2E9W107aWYoZC5zdWNjZXNzUHJvcGVydHkpe2g9ZC5nZXRTdWNjZXNzKGMpO2lmKGg9PT1mYWxzZXx8aD09PSJmYWxzZSIpe2k9ZmFsc2V9fWlmKGQubWVzc2FnZVByb3BlcnR5KXtqPWQuZ2V0TWVzc2FnZShjKX1pZihkLnJlYWRSZWNvcmRzT25GYWlsdXJlfHxpKXtnPUV4dC5pc0FycmF5KGMpP2M6ZC5nZXRSb290KGMpO2lmKGcpe2U9Zy5sZW5ndGh9aWYoZC50b3RhbFByb3BlcnR5KXtoPXBhcnNlSW50KGQuZ2V0VG90YWwoYyksMTApO2lmKCFpc05hTihoKSl7ZT1ofX1pZihnKXthPWQuZXh0cmFjdERhdGEoZyk7Yj1hLmxlbmd0aH19cmV0dXJuIG5ldyBFeHQuZGF0YS5SZXN1bHRTZXQoe3RvdGFsOmV8fGIsY291bnQ6YixyZWNvcmRzOmEsc3VjY2VzczppLG1lc3NhZ2U6an0pfSxleHRyYWN0RGF0YTpmdW5jdGlvbihrKXt2YXIgaj10aGlzLGQ9W10sYj1qLm1vZGVsLGE9ay5sZW5ndGgsZSxjLGgsZztpZighay5sZW5ndGgmJkV4dC5pc09iamVjdChrKSl7az1ba107YT0xfWZvcihnPTA7ZzxhO2crKyl7Yz1rW2ddO2lmKCFjLmlzTW9kZWwpe2g9bmV3IGIodW5kZWZpbmVkLGouZ2V0SWQoYyksYyxlPXt9KTtoLnBoYW50b209ZmFsc2U7ai5jb252ZXJ0UmVjb3JkRGF0YShlLGMsaCk7ZC5wdXNoKGgpO2lmKGouaW1wbGljaXRJbmNsdWRlcyl7ai5yZWFkQXNzb2NpYXRlZChoLGMpfX1lbHNle2QucHVzaChjKX19cmV0dXJuIGR9LHJlYWRBc3NvY2lhdGVkOmZ1bmN0aW9uKGgsZSl7dmFyIGQ9aC5hc3NvY2lhdGlvbnMuaXRlbXMsZz0wLGE9ZC5sZW5ndGgsYyxiLGssajtmb3IoO2c8YTtnKyspe2M9ZFtnXTtiPXRoaXMuZ2V0QXNzb2NpYXRlZERhdGFSb290KGUsYy5hc3NvY2lhdGlvbktleXx8Yy5uYW1lKTtpZihiKXtqPWMuZ2V0UmVhZGVyKCk7aWYoIWope2s9Yy5hc3NvY2lhdGVkTW9kZWwucHJveHk7aWYoayl7aj1rLmdldFJlYWRlcigpfWVsc2V7aj1uZXcgdGhpcy5jb25zdHJ1Y3Rvcih7bW9kZWw6Yy5hc3NvY2lhdGVkTmFtZX0pfX1jLnJlYWQoaCxqLGIpfX19LGdldEFzc29jaWF0ZWREYXRhUm9vdDpmdW5jdGlvbihiLGEpe3JldHVybiBiW2FdfSxnZXRGaWVsZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2RlbC5wcm90b3R5cGUuZmllbGRzLml0ZW1zfSxnZXREYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxnZXRSb290OmZ1bmN0aW9uKGEpe3JldHVybiBhfSxnZXRSZXNwb25zZURhdGE6ZnVuY3Rpb24oYSl7fSxvbk1ldGFDaGFuZ2U6ZnVuY3Rpb24oZSl7dmFyIGQ9dGhpcyxiPWUuZmllbGRzfHxkLmdldEZpZWxkcygpLGMsYTtkLm1ldGFEYXRhPWU7ZC5yb290PWUucm9vdHx8ZC5yb290O2QuaWRQcm9wZXJ0eT1lLmlkUHJvcGVydHl8fGQuaWRQcm9wZXJ0eTtkLnRvdGFsUHJvcGVydHk9ZS50b3RhbFByb3BlcnR5fHxkLnRvdGFsUHJvcGVydHk7ZC5zdWNjZXNzUHJvcGVydHk9ZS5zdWNjZXNzUHJvcGVydHl8fGQuc3VjY2Vzc1Byb3BlcnR5O2QubWVzc2FnZVByb3BlcnR5PWUubWVzc2FnZVByb3BlcnR5fHxkLm1lc3NhZ2VQcm9wZXJ0eTthPWUuY2xpZW50SWRQcm9wZXJ0eTtpZihkLm1vZGVsKXtkLm1vZGVsLnNldEZpZWxkcyhiLGQuaWRQcm9wZXJ0eSxhKTtkLnNldE1vZGVsKGQubW9kZWwsdHJ1ZSl9ZWxzZXtjPUV4dC5kZWZpbmUoIkV4dC5kYXRhLnJlYWRlci5Kc29uLU1vZGVsIitFeHQuaWQoKSx7ZXh0ZW5kOiJFeHQuZGF0YS5Nb2RlbCIsZmllbGRzOmIsY2xpZW50SWRQcm9wZXJ0eTphfSk7aWYoZC5pZFByb3BlcnR5KXtjLmlkUHJvcGVydHk9ZC5pZFByb3BlcnR5fWQuc2V0TW9kZWwoYyx0cnVlKX19LGdldElkUHJvcGVydHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pZFByb3BlcnR5fHx0aGlzLm1vZGVsLnByb3RvdHlwZS5pZFByb3BlcnR5fSxidWlsZEV4dHJhY3RvcnM6ZnVuY3Rpb24oYil7dmFyIGc9dGhpcyxqPWcuZ2V0SWRQcm9wZXJ0eSgpLGk9Zy50b3RhbFByb3BlcnR5LGU9Zy5zdWNjZXNzUHJvcGVydHksaD1nLm1lc3NhZ2VQcm9wZXJ0eSxkLGMsYTtpZihiPT09dHJ1ZSl7ZGVsZXRlIGcuY29udmVydFJlY29yZERhdGF9aWYoZy5jb252ZXJ0UmVjb3JkRGF0YSl7cmV0dXJufWlmKGkpe2cuZ2V0VG90YWw9Zy5jcmVhdGVBY2Nlc3NvcihpKX1pZihlKXtnLmdldFN1Y2Nlc3M9Zy5jcmVhdGVBY2Nlc3NvcihlKX1pZihoKXtnLmdldE1lc3NhZ2U9Zy5jcmVhdGVBY2Nlc3NvcihoKX1pZihqKXtjPWcubW9kZWwucHJvdG90eXBlLmZpZWxkcy5nZXQoaik7aWYoYyl7YT1jLm1hcHBpbmc7aj0oYSE9PXVuZGVmaW5lZCYmYSE9PW51bGwpP2E6an1kPWcuY3JlYXRlQWNjZXNzb3Ioaik7Zy5nZXRJZD1mdW5jdGlvbihrKXt2YXIgbD1kLmNhbGwoZyxrKTtyZXR1cm4obD09PXVuZGVmaW5lZHx8bD09PSIiKT9udWxsOmx9fWVsc2V7Zy5nZXRJZD1mdW5jdGlvbigpe3JldHVybiBudWxsfX1nLmNvbnZlcnRSZWNvcmREYXRhPWcuYnVpbGRSZWNvcmREYXRhRXh0cmFjdG9yKCk7Zy5sYXN0RmllbGRHZW5lcmF0aW9uPWcubW9kZWwucHJvdG90eXBlLmZpZWxkcy5nZW5lcmF0aW9ufSxyZWNvcmREYXRhRXh0cmFjdG9yVGVtcGxhdGU6WyJ2YXIgbWUgPSB0aGlzXG4iLCIgICAgLGZpZWxkcyA9IG1lLm1vZGVsLnByb3RvdHlwZS5maWVsZHNcbiIsIiAgICAsdmFsdWVcbiIsIiAgICAsaW50ZXJuYWxJZFxuIiwnPHRwbCBmb3I9ImZpZWxkcyI+JywnICAgICxfX2ZpZWxkeyN9ID0gZmllbGRzLmdldCgie25hbWV9IilcbicsIjwvdHBsPiIsIjtcbiIsInJldHVybiBmdW5jdGlvbihkZXN0LCBzb3VyY2UsIHJlY29yZCkge1xuIiwnPHRwbCBmb3I9ImZpZWxkcyI+JywnICAgIHZhbHVlID0ge1sgdGhpcy5jcmVhdGVGaWVsZEFjY2Vzc0V4cHJlc3Npb24odmFsdWVzLCAiX19maWVsZCIgKyB4aW5kZXgsICJzb3VyY2UiKSBdfTtcbicsJzx0cGwgaWY9Imhhc0N1c3RvbUNvbnZlcnQiPicsJyAgICBkZXN0WyJ7bmFtZX0iXSA9IHZhbHVlID09PSB1bmRlZmluZWQgPyBfX2ZpZWxkeyN9LmNvbnZlcnQoX19maWVsZHsjfS5kZWZhdWx0VmFsdWUsIHJlY29yZCkgOiBfX2ZpZWxkeyN9LmNvbnZlcnQodmFsdWUsIHJlY29yZCk7XG4nLCc8dHBsIGVsc2VpZj0iZGVmYXVsdFZhbHVlICE9PSB1bmRlZmluZWQiPicsIiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuIiwiICAgICAgICBpZiAobWUuYXBwbHlEZWZhdWx0cykge1xuIiwnPHRwbCBpZj0iY29udmVydCI+JywnICAgICAgICAgICAgZGVzdFsie25hbWV9Il0gPSBfX2ZpZWxkeyN9LmNvbnZlcnQoX19maWVsZHsjfS5kZWZhdWx0VmFsdWUsIHJlY29yZCk7XG4nLCI8dHBsIGVsc2U+IiwnICAgICAgICAgICAgZGVzdFsie25hbWV9Il0gPSBfX2ZpZWxkeyN9LmRlZmF1bHRWYWx1ZVxuJywiPC90cGw+IiwiICAgICAgICB9O1xuIiwiICAgIH0gZWxzZSB7XG4iLCc8dHBsIGlmPSJjb252ZXJ0Ij4nLCcgICAgICAgIGRlc3RbIntuYW1lfSJdID0gX19maWVsZHsjfS5jb252ZXJ0KHZhbHVlLCByZWNvcmQpO1xuJywiPHRwbCBlbHNlPiIsJyAgICAgICAgZGVzdFsie25hbWV9Il0gPSB2YWx1ZTtcbicsIjwvdHBsPiIsIiAgICB9OyIsIjx0cGwgZWxzZT4iLCIgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiIsJzx0cGwgaWY9ImNvbnZlcnQiPicsJyAgICAgICAgZGVzdFsie25hbWV9Il0gPSBfX2ZpZWxkeyN9LmNvbnZlcnQodmFsdWUsIHJlY29yZCk7XG4nLCI8dHBsIGVsc2U+IiwnICAgICAgICBkZXN0WyJ7bmFtZX0iXSA9IHZhbHVlO1xuJywiPC90cGw+IiwiICAgIH1cbiIsIjwvdHBsPiIsIjwvdHBsPiIsJzx0cGwgaWY9ImNsaWVudElkUHJvcCI+JywnICAgIGlmIChyZWNvcmQgJiYgKGludGVybmFsSWQgPSB7WyB0aGlzLmNyZWF0ZUZpZWxkQWNjZXNzRXhwcmVzc2lvbih7bWFwcGluZzogdmFsdWVzLmNsaWVudElkUHJvcH0sIG51bGwsICJzb3VyY2UiKSBdfSkpIHtcbicsJyAgICAgICAgcmVjb3JkLntbImludGVybmFsSWQiXX0gPSBpbnRlcm5hbElkO1xuJywiICAgIH1cbiIsIjwvdHBsPiIsIn07Il0sYnVpbGRSZWNvcmREYXRhRXh0cmFjdG9yOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxhPWMubW9kZWwucHJvdG90eXBlLGI9e2NsaWVudElkUHJvcDphLmNsaWVudElkUHJvcGVydHksZmllbGRzOmEuZmllbGRzLml0ZW1zfTtjLnJlY29yZERhdGFFeHRyYWN0b3JUZW1wbGF0ZS5jcmVhdGVGaWVsZEFjY2Vzc0V4cHJlc3Npb249Yy5hY2Nlc3NFeHByZXNzaW9uRm47cmV0dXJuIEV4dC5mdW5jdGlvbkZhY3RvcnkoYy5yZWNvcmREYXRhRXh0cmFjdG9yVGVtcGxhdGUuYXBwbHkoYikpLmNhbGwoYyl9LGRlc3Ryb3lSZWFkZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2RlbGV0ZSBhLnByb3h5O2RlbGV0ZSBhLm1vZGVsO2RlbGV0ZSBhLmNvbnZlcnRSZWNvcmREYXRhO2RlbGV0ZSBhLmdldElkO2RlbGV0ZSBhLmdldFRvdGFsO2RlbGV0ZSBhLmdldFN1Y2Nlc3M7ZGVsZXRlIGEuZ2V0TWVzc2FnZX19LGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wcm90b3R5cGU7RXh0LmFwcGx5KGEse251bGxSZXN1bHRTZXQ6bmV3IEV4dC5kYXRhLlJlc3VsdFNldCh7dG90YWw6MCxjb3VudDowLHJlY29yZHM6W10sc3VjY2Vzczp0cnVlfSkscmVjb3JkRGF0YUV4dHJhY3RvclRlbXBsYXRlOm5ldyBFeHQuWFRlbXBsYXRlKGEucmVjb3JkRGF0YUV4dHJhY3RvclRlbXBsYXRlKX0pfSk7RXh0LmRlZmluZSgiRXh0LmRhdGEucmVhZGVyLkpzb24iLHtleHRlbmQ6IkV4dC5kYXRhLnJlYWRlci5SZWFkZXIiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmRhdGEuSnNvblJlYWRlciIsYWxpYXM6InJlYWRlci5qc29uIixyb290OiIiLHVzZVNpbXBsZUFjY2Vzc29yczpmYWxzZSxyZWFkUmVjb3JkczpmdW5jdGlvbihhKXtpZihhLm1ldGFEYXRhKXt0aGlzLm9uTWV0YUNoYW5nZShhLm1ldGFEYXRhKX10aGlzLmpzb25EYXRhPWE7cmV0dXJuIHRoaXMuY2FsbFBhcmVudChbYV0pfSxnZXRSZXNwb25zZURhdGE6ZnVuY3Rpb24oYSl7dmFyIGQsYjt0cnl7ZD1FeHQuZGVjb2RlKGEucmVzcG9uc2VUZXh0KTtyZXR1cm4gdGhpcy5yZWFkUmVjb3JkcyhkKX1jYXRjaChjKXtiPW5ldyBFeHQuZGF0YS5SZXN1bHRTZXQoe3RvdGFsOjAsY291bnQ6MCxyZWNvcmRzOltdLHN1Y2Nlc3M6ZmFsc2UsbWVzc2FnZTpjLm1lc3NhZ2V9KTt0aGlzLmZpcmVFdmVudCgiZXhjZXB0aW9uIix0aGlzLGEsYik7RXh0LkxvZ2dlci53YXJuKCJVbmFibGUgdG8gcGFyc2UgdGhlIEpTT04gcmV0dXJuZWQgYnkgdGhlIHNlcnZlciIpO3JldHVybiBifX0sYnVpbGRFeHRyYWN0b3JzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihhLnJvb3Qpe2EuZ2V0Um9vdD1hLmNyZWF0ZUFjY2Vzc29yKGEucm9vdCl9ZWxzZXthLmdldFJvb3Q9ZnVuY3Rpb24oYil7cmV0dXJuIGJ9fX0sZXh0cmFjdERhdGE6ZnVuY3Rpb24oYSl7dmFyIGU9dGhpcy5yZWNvcmQsZD1bXSxjLGI7aWYoZSl7Yz1hLmxlbmd0aDtpZighYyYmRXh0LmlzT2JqZWN0KGEpKXtjPTE7YT1bYV19Zm9yKGI9MDtiPGM7YisrKXtkW2JdPWFbYl1bZV19fWVsc2V7ZD1hfXJldHVybiB0aGlzLmNhbGxQYXJlbnQoW2RdKX0sY3JlYXRlQWNjZXNzb3I6KGZ1bmN0aW9uKCl7dmFyIGE9L1tcW1wuXS87cmV0dXJuIGZ1bmN0aW9uKGMpe2lmKEV4dC5pc0VtcHR5KGMpKXtyZXR1cm4gRXh0LmVtcHR5Rm59aWYoRXh0LmlzRnVuY3Rpb24oYykpe3JldHVybiBjfWlmKHRoaXMudXNlU2ltcGxlQWNjZXNzb3JzIT09dHJ1ZSl7dmFyIGI9U3RyaW5nKGMpLnNlYXJjaChhKTtpZihiPj0wKXtyZXR1cm4gRXh0LmZ1bmN0aW9uRmFjdG9yeSgib2JqIiwicmV0dXJuIG9iaiIrKGI+MD8iLiI6IiIpK2MpfX1yZXR1cm4gZnVuY3Rpb24oZCl7cmV0dXJuIGRbY119fX0oKSksY3JlYXRlRmllbGRBY2Nlc3NFeHByZXNzaW9uOihmdW5jdGlvbigpe3ZhciBhPS9bXFtcLl0vO3JldHVybiBmdW5jdGlvbihpLGQsYyl7dmFyIGU9dGhpcyxnPShpLm1hcHBpbmchPT1udWxsKSxoPWc/aS5tYXBwaW5nOmkubmFtZSxiLGo7aWYodHlwZW9mIGg9PT0iZnVuY3Rpb24iKXtiPWQrIi5tYXBwaW5nKCIrYysiLCB0aGlzKSJ9ZWxzZXtpZih0aGlzLnVzZVNpbXBsZUFjY2Vzc29ycz09PXRydWV8fCgoaj1TdHJpbmcoaCkuc2VhcmNoKGEpKTwwKSl7aWYoIWd8fGlzTmFOKGgpKXtoPSciJytoKyciJ31iPWMrIlsiK2grIl0ifWVsc2V7Yj1jKyhqPjA/Ii4iOiIiKStofX1yZXR1cm4gYn19KCkpfSk7RXh0LmRlZmluZSgiRXh0LmRhdGEud3JpdGVyLldyaXRlciIse2FsaWFzOiJ3cml0ZXIuYmFzZSIsYWx0ZXJuYXRlQ2xhc3NOYW1lOlsiRXh0LmRhdGEuRGF0YVdyaXRlciIsIkV4dC5kYXRhLldyaXRlciJdLHdyaXRlQWxsRmllbGRzOnRydWUsbmFtZVByb3BlcnR5OiJuYW1lIixpc1dyaXRlcjp0cnVlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5hcHBseSh0aGlzLGEpfSx3cml0ZTpmdW5jdGlvbihlKXt2YXIgYz1lLm9wZXJhdGlvbixiPWMucmVjb3Jkc3x8W10sYT1iLmxlbmd0aCxkPTAsZz1bXTtmb3IoO2Q8YTtkKyspe2cucHVzaCh0aGlzLmdldFJlY29yZERhdGEoYltkXSxjKSl9cmV0dXJuIHRoaXMud3JpdGVSZWNvcmRzKGUsZyl9LGdldFJlY29yZERhdGE6ZnVuY3Rpb24oZyxkKXt2YXIgbj1nLnBoYW50b209PT10cnVlLGI9dGhpcy53cml0ZUFsbEZpZWxkc3x8bixjPXRoaXMubmFtZVByb3BlcnR5LGg9Zy5maWVsZHMscD1oLml0ZW1zLGU9e30sbD1nLmNsaWVudElkUHJvcGVydHksayxhLGosbyxtLGkscTtpZihiKXtxPXAubGVuZ3RoO2ZvcihpPTA7aTxxO2krKyl7aj1wW2ldO2lmKGoucGVyc2lzdCl7YT1qW2NdfHxqLm5hbWU7bT1nLmdldChqLm5hbWUpO2lmKGouc2VyaWFsaXplKXtlW2FdPWouc2VyaWFsaXplKG0sZyl9ZWxzZXtpZihqLnR5cGU9PT1FeHQuZGF0YS5UeXBlcy5EQVRFJiZqLmRhdGVGb3JtYXQpe2VbYV09RXh0LkRhdGUuZm9ybWF0KG0sai5kYXRlRm9ybWF0KX1lbHNle2VbYV09bX19fX19ZWxzZXtrPWcuZ2V0Q2hhbmdlcygpO2ZvcihvIGluIGspe2lmKGsuaGFzT3duUHJvcGVydHkobykpe2o9aC5nZXQobyk7aWYoai5wZXJzaXN0KXthPWpbY118fGoubmFtZTttPWcuZ2V0KGoubmFtZSk7aWYoai5zZXJpYWxpemUpe2VbYV09ai5zZXJpYWxpemUobSxnKX1lbHNle2lmKGoudHlwZT09PUV4dC5kYXRhLlR5cGVzLkRBVEUmJmouZGF0ZUZvcm1hdCl7ZVthXT1FeHQuRGF0ZS5mb3JtYXQobSxqLmRhdGVGb3JtYXQpfWVsc2V7ZVthXT1tfX19fX19aWYobil7aWYobCYmZCYmZC5yZWNvcmRzLmxlbmd0aD4xKXtlW2xdPWcuaW50ZXJuYWxJZH19ZWxzZXtlW2cuaWRQcm9wZXJ0eV09Zy5nZXRJZCgpfXJldHVybiBlfX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLndyaXRlci5Kc29uIix7ZXh0ZW5kOiJFeHQuZGF0YS53cml0ZXIuV3JpdGVyIixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5kYXRhLkpzb25Xcml0ZXIiLGFsaWFzOiJ3cml0ZXIuanNvbiIscm9vdDp1bmRlZmluZWQsZW5jb2RlOmZhbHNlLGFsbG93U2luZ2xlOnRydWUsd3JpdGVSZWNvcmRzOmZ1bmN0aW9uKGIsYyl7dmFyIGE9dGhpcy5yb290O2lmKHRoaXMuYWxsb3dTaW5nbGUmJmMubGVuZ3RoPT0xKXtjPWNbMF19aWYodGhpcy5lbmNvZGUpe2lmKGEpe2IucGFyYW1zW2FdPUV4dC5lbmNvZGUoYyl9ZWxzZXt9fWVsc2V7Yi5qc29uRGF0YT1iLmpzb25EYXRhfHx7fTtpZihhKXtiLmpzb25EYXRhW2FdPWN9ZWxzZXtiLmpzb25EYXRhPWN9fXJldHVybiBifX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLnByb3h5LlNlcnZlciIse2V4dGVuZDoiRXh0LmRhdGEucHJveHkuUHJveHkiLGFsaWFzOiJwcm94eS5zZXJ2ZXIiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmRhdGEuU2VydmVyUHJveHkiLHVzZXM6WyJFeHQuZGF0YS5SZXF1ZXN0Il0scGFnZVBhcmFtOiJwYWdlIixzdGFydFBhcmFtOiJzdGFydCIsbGltaXRQYXJhbToibGltaXQiLGdyb3VwUGFyYW06Imdyb3VwIixncm91cERpcmVjdGlvblBhcmFtOiJncm91cERpciIsc29ydFBhcmFtOiJzb3J0IixmaWx0ZXJQYXJhbToiZmlsdGVyIixkaXJlY3Rpb25QYXJhbToiZGlyIixzaW1wbGVTb3J0TW9kZTpmYWxzZSxzaW1wbGVHcm91cE1vZGU6ZmFsc2Usbm9DYWNoZTp0cnVlLGNhY2hlU3RyaW5nOiJfZGMiLHRpbWVvdXQ6MzAwMDAsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczthPWF8fHt9O2IuY2FsbFBhcmVudChbYV0pO2IuZXh0cmFQYXJhbXM9YS5leHRyYVBhcmFtc3x8e307Yi5hcGk9RXh0LmFwcGx5KHt9LGEuYXBpfHxiLmFwaSk7Yi5ub2NhY2hlPWIubm9DYWNoZX0sY3JlYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9SZXF1ZXN0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0scmVhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvUmVxdWVzdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHVwZGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvUmVxdWVzdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb1JlcXVlc3QuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzZXRFeHRyYVBhcmFtOmZ1bmN0aW9uKGEsYil7dGhpcy5leHRyYVBhcmFtc1thXT1ifSxidWlsZFJlcXVlc3Q6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxkPUV4dC5hcHBseUlmKGEucGFyYW1zfHx7fSxjLmV4dHJhUGFyYW1zfHx7fSksYjtkPUV4dC5hcHBseUlmKGQsYy5nZXRQYXJhbXMoYSkpO2lmKGEuaWQhPT11bmRlZmluZWQmJmQuaWQ9PT11bmRlZmluZWQpe2QuaWQ9YS5pZH1iPW5ldyBFeHQuZGF0YS5SZXF1ZXN0KHtwYXJhbXM6ZCxhY3Rpb246YS5hY3Rpb24scmVjb3JkczphLnJlY29yZHMsb3BlcmF0aW9uOmEsdXJsOmEudXJsLHByb3h5OmN9KTtiLnVybD1jLmJ1aWxkVXJsKGIpO2EucmVxdWVzdD1iO3JldHVybiBifSxwcm9jZXNzUmVzcG9uc2U6ZnVuY3Rpb24oaCxhLGMsYixnLGkpe3ZhciBlPXRoaXMsZCxqO2lmKGg9PT10cnVlKXtkPWUuZ2V0UmVhZGVyKCk7ZC5hcHBseURlZmF1bHRzPWEuYWN0aW9uPT09InJlYWQiO2o9ZC5yZWFkKGUuZXh0cmFjdFJlc3BvbnNlRGF0YShiKSk7aWYoai5zdWNjZXNzIT09ZmFsc2Upe0V4dC5hcHBseShhLHtyZXNwb25zZTpiLHJlc3VsdFNldDpqfSk7YS5jb21taXRSZWNvcmRzKGoucmVjb3Jkcyk7YS5zZXRDb21wbGV0ZWQoKTthLnNldFN1Y2Nlc3NmdWwoKX1lbHNle2Euc2V0RXhjZXB0aW9uKGoubWVzc2FnZSk7ZS5maXJlRXZlbnQoImV4Y2VwdGlvbiIsdGhpcyxiLGEpfX1lbHNle2Uuc2V0RXhjZXB0aW9uKGEsYik7ZS5maXJlRXZlbnQoImV4Y2VwdGlvbiIsdGhpcyxiLGEpfWlmKHR5cGVvZiBnPT0iZnVuY3Rpb24iKXtnLmNhbGwoaXx8ZSxhKX1lLmFmdGVyUmVxdWVzdChjLGgpfSxzZXRFeGNlcHRpb246ZnVuY3Rpb24oYixhKXtiLnNldEV4Y2VwdGlvbih7c3RhdHVzOmEuc3RhdHVzLHN0YXR1c1RleHQ6YS5zdGF0dXNUZXh0fSl9LGV4dHJhY3RSZXNwb25zZURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LGFwcGx5RW5jb2Rpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5lbmNvZGUoYSl9LGVuY29kZVNvcnRlcnM6ZnVuY3Rpb24oZCl7dmFyIGI9W10sYz1kLmxlbmd0aCxhPTA7Zm9yKDthPGM7YSsrKXtiW2FdPXtwcm9wZXJ0eTpkW2FdLnByb3BlcnR5LGRpcmVjdGlvbjpkW2FdLmRpcmVjdGlvbn19cmV0dXJuIHRoaXMuYXBwbHlFbmNvZGluZyhiKX0sZW5jb2RlRmlsdGVyczpmdW5jdGlvbihkKXt2YXIgYj1bXSxjPWQubGVuZ3RoLGE9MDtmb3IoO2E8YzthKyspe2JbYV09e3Byb3BlcnR5OmRbYV0ucHJvcGVydHksdmFsdWU6ZFthXS52YWx1ZX19cmV0dXJuIHRoaXMuYXBwbHlFbmNvZGluZyhiKX0sZ2V0UGFyYW1zOmZ1bmN0aW9uKG4pe3ZhciB1PXRoaXMsdD17fSxxPUV4dC5pc0RlZmluZWQscj1uLmdyb3VwZXJzLGE9bi5zb3J0ZXJzLGw9bi5maWx0ZXJzLGk9bi5wYWdlLGg9bi5zdGFydCxzPW4ubGltaXQsaj11LnNpbXBsZVNvcnRNb2RlLGQ9dS5zaW1wbGVHcm91cE1vZGUscD11LnBhZ2VQYXJhbSxnPXUuc3RhcnRQYXJhbSxiPXUubGltaXRQYXJhbSxjPXUuZ3JvdXBQYXJhbSxrPXUuZ3JvdXBEaXJlY3Rpb25QYXJhbSxlPXUuc29ydFBhcmFtLG89dS5maWx0ZXJQYXJhbSxtPXUuZGlyZWN0aW9uUGFyYW07aWYocCYmcShpKSl7dFtwXT1pfWlmKGcmJnEoaCkpe3RbZ109aH1pZihiJiZxKHMpKXt0W2JdPXN9aWYoYyYmciYmci5sZW5ndGg+MCl7aWYoZCl7dFtjXT1yWzBdLnByb3BlcnR5O3Rba109clswXS5kaXJlY3Rpb258fCJBU0MifWVsc2V7dFtjXT11LmVuY29kZVNvcnRlcnMocil9fWlmKGUmJmEmJmEubGVuZ3RoPjApe2lmKGope3RbZV09YVswXS5wcm9wZXJ0eTt0W21dPWFbMF0uZGlyZWN0aW9ufWVsc2V7dFtlXT11LmVuY29kZVNvcnRlcnMoYSl9fWlmKG8mJmwmJmwubGVuZ3RoPjApe3Rbb109dS5lbmNvZGVGaWx0ZXJzKGwpfXJldHVybiB0fSxidWlsZFVybDpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE9Yi5nZXRVcmwoYyk7aWYoYi5ub0NhY2hlKXthPUV4dC51cmxBcHBlbmQoYSxFeHQuU3RyaW5nLmZvcm1hdCgiezB9PXsxfSIsYi5jYWNoZVN0cmluZyxFeHQuRGF0ZS5ub3coKSkpfXJldHVybiBhfSxnZXRVcmw6ZnVuY3Rpb24oYSl7cmV0dXJuIGEudXJsfHx0aGlzLmFwaVthLmFjdGlvbl18fHRoaXMudXJsfSxkb1JlcXVlc3Q6ZnVuY3Rpb24oYSxjLGIpe30sYWZ0ZXJSZXF1ZXN0OkV4dC5lbXB0eUZuLG9uRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95KHRoaXMucmVhZGVyLHRoaXMud3JpdGVyKX19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5wcm94eS5BamF4Iix7cmVxdWlyZXM6WyJFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24iLCJFeHQuQWpheCJdLGV4dGVuZDoiRXh0LmRhdGEucHJveHkuU2VydmVyIixhbGlhczoicHJveHkuYWpheCIsYWx0ZXJuYXRlQ2xhc3NOYW1lOlsiRXh0LmRhdGEuSHR0cFByb3h5IiwiRXh0LmRhdGEuQWpheFByb3h5Il0sYWN0aW9uTWV0aG9kczp7Y3JlYXRlOiJQT1NUIixyZWFkOiJHRVQiLHVwZGF0ZToiUE9TVCIsZGVzdHJveToiUE9TVCJ9LGRvUmVxdWVzdDpmdW5jdGlvbihhLGUsYil7dmFyIGQ9dGhpcy5nZXRXcml0ZXIoKSxjPXRoaXMuYnVpbGRSZXF1ZXN0KGEsZSxiKTtpZihhLmFsbG93V3JpdGUoKSl7Yz1kLndyaXRlKGMpfUV4dC5hcHBseShjLHtoZWFkZXJzOnRoaXMuaGVhZGVycyx0aW1lb3V0OnRoaXMudGltZW91dCxzY29wZTp0aGlzLGNhbGxiYWNrOnRoaXMuY3JlYXRlUmVxdWVzdENhbGxiYWNrKGMsYSxlLGIpLG1ldGhvZDp0aGlzLmdldE1ldGhvZChjKSxkaXNhYmxlQ2FjaGluZzpmYWxzZX0pO0V4dC5BamF4LnJlcXVlc3QoYyk7cmV0dXJuIGN9LGdldE1ldGhvZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hY3Rpb25NZXRob2RzW2EuYWN0aW9uXX0sY3JlYXRlUmVxdWVzdENhbGxiYWNrOmZ1bmN0aW9uKGQsYSxlLGIpe3ZhciBjPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKGgsaSxnKXtjLnByb2Nlc3NSZXNwb25zZShpLGEsZCxnLGUsYil9fX0sZnVuY3Rpb24oKXtFeHQuZGF0YS5IdHRwUHJveHk9dGhpc30pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLnByb3h5LkNsaWVudCIse2V4dGVuZDoiRXh0LmRhdGEucHJveHkuUHJveHkiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmRhdGEuQ2xpZW50UHJveHkiLGlzU3luY2hyb25vdXM6dHJ1ZSxjbGVhcjpmdW5jdGlvbigpe319KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5wcm94eS5NZW1vcnkiLHtleHRlbmQ6IkV4dC5kYXRhLnByb3h5LkNsaWVudCIsYWxpYXM6InByb3h5Lm1lbW9yeSIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuZGF0YS5NZW1vcnlQcm94eSIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dGhpcy5jYWxsUGFyZW50KFthXSk7dGhpcy5zZXRSZWFkZXIodGhpcy5yZWFkZXIpfSx1cGRhdGVPcGVyYXRpb246ZnVuY3Rpb24oYixnLGQpe3ZhciBjPTAsZT1iLmdldFJlY29yZHMoKSxhPWUubGVuZ3RoO2ZvcihjO2M8YTtjKyspe2VbY10uY29tbWl0KCl9Yi5zZXRDb21wbGV0ZWQoKTtiLnNldFN1Y2Nlc3NmdWwoKTtFeHQuY2FsbGJhY2soZyxkfHx0aGlzLFtiXSl9LGNyZWF0ZTpmdW5jdGlvbigpe3RoaXMudXBkYXRlT3BlcmF0aW9uLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy51cGRhdGVPcGVyYXRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy51cGRhdGVPcGVyYXRpb24uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyZWFkOmZ1bmN0aW9uKGEsZCxiKXt2YXIgYz10aGlzO2EucmVzdWx0U2V0PWMuZ2V0UmVhZGVyKCkucmVhZChjLmRhdGEpO2Euc2V0Q29tcGxldGVkKCk7YS5zZXRTdWNjZXNzZnVsKCk7RXh0LmNhbGxiYWNrKGQsYnx8YyxbYV0pfSxjbGVhcjpFeHQuZW1wdHlGbn0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLkxydUNhY2hlIix7ZXh0ZW5kOiJFeHQudXRpbC5IYXNoTWFwIixjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyxhKTt0aGlzLmNhbGxQYXJlbnQoW2FdKX0sYWRkOmZ1bmN0aW9uKGIsZSl7dmFyIGQ9dGhpcyxhPWQuZmluZEtleShlKSxjO2lmKGEpe2QudW5saW5rRW50cnkoYz1kLm1hcFthXSk7Yy5wcmV2PWQubGFzdDtjLm5leHQ9bnVsbH1lbHNle2M9e3ByZXY6ZC5sYXN0LG5leHQ6bnVsbCxrZXk6Yix2YWx1ZTplfX1pZihkLmxhc3Qpe2QubGFzdC5uZXh0PWN9ZWxzZXtkLmZpcnN0PWN9ZC5sYXN0PWM7ZC5jYWxsUGFyZW50KFtiLGNdKTtkLnBydW5lKCk7cmV0dXJuIGV9LGluc2VydEJlZm9yZTpmdW5jdGlvbihiLGcsYyl7dmFyIGU9dGhpcyxhLGQ7aWYoYz10aGlzLm1hcFt0aGlzLmZpbmRLZXkoYyldKXthPWUuZmluZEtleShnKTtpZihhKXtlLnVubGlua0VudHJ5KGQ9ZS5tYXBbYV0pfWVsc2V7ZD17cHJldjpjLnByZXYsbmV4dDpjLGtleTpiLHZhbHVlOmd9fWlmKGMucHJldil7ZC5wcmV2Lm5leHQ9ZH1lbHNle2UuZmlyc3Q9ZH1kLm5leHQ9YztjLnByZXY9ZDtlLnBydW5lKCk7cmV0dXJuIGd9ZWxzZXtyZXR1cm4gZS5hZGQoYixnKX19LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm1hcFthXTtpZihiKXtpZihiLm5leHQpe3RoaXMubW92ZVRvRW5kKGIpfXJldHVybiBiLnZhbHVlfX0scmVtb3ZlQXRLZXk6ZnVuY3Rpb24oYSl7dGhpcy51bmxpbmtFbnRyeSh0aGlzLm1hcFthXSk7cmV0dXJuIHRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxjbGVhcjpmdW5jdGlvbihhKXt0aGlzLmZpcnN0PXRoaXMubGFzdD1udWxsO3JldHVybiB0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sdW5saW5rRW50cnk6ZnVuY3Rpb24oYSl7aWYoYSl7aWYoYS5uZXh0KXthLm5leHQucHJldj1hLnByZXZ9ZWxzZXt0aGlzLmxhc3Q9YS5wcmV2fWlmKGEucHJldil7YS5wcmV2Lm5leHQ9YS5uZXh0fWVsc2V7dGhpcy5maXJzdD1hLm5leHR9YS5wcmV2PWEubmV4dD1udWxsfX0sbW92ZVRvRW5kOmZ1bmN0aW9uKGEpe3RoaXMudW5saW5rRW50cnkoYSk7aWYoYS5wcmV2PXRoaXMubGFzdCl7dGhpcy5sYXN0Lm5leHQ9YX1lbHNle3RoaXMuZmlyc3Q9YX10aGlzLmxhc3Q9YX0sZ2V0QXJyYXk6ZnVuY3Rpb24oYyl7dmFyIGE9W10sYj10aGlzLmZpcnN0O3doaWxlKGIpe2EucHVzaChjP2Iua2V5OmIudmFsdWUpO2I9Yi5uZXh0fXJldHVybiBhfSxlYWNoOmZ1bmN0aW9uKGMsYixhKXt2YXIgZz10aGlzLGU9YT9nLmxhc3Q6Zy5maXJzdCxkPWcubGVuZ3RoO2I9Ynx8Zzt3aGlsZShlKXtpZihjLmNhbGwoYixlLmtleSxlLnZhbHVlLGQpPT09ZmFsc2Upe2JyZWFrfWU9YT9lLnByZXY6ZS5uZXh0fXJldHVybiBnfSxmaW5kS2V5OmZ1bmN0aW9uKGIpe3ZhciBhLGM9dGhpcy5tYXA7Zm9yKGEgaW4gYyl7aWYoYy5oYXNPd25Qcm9wZXJ0eShhKSYmY1thXS52YWx1ZT09PWIpe3JldHVybiBhfX1yZXR1cm4gdW5kZWZpbmVkfSxwcnVuZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLm1heFNpemU/KGEubGVuZ3RoLWEubWF4U2l6ZSk6MDtpZihiPjApe2Zvcig7YS5maXJzdCYmYjtiLS0pe2EucmVtb3ZlQXRLZXkoYS5maXJzdC5rZXkpfX19fSk7RXh0LmRlZmluZSgiRXh0LmRhdGEuU3RvcmUiLHtleHRlbmQ6IkV4dC5kYXRhLkFic3RyYWN0U3RvcmUiLGFsaWFzOiJzdG9yZS5zdG9yZSIscmVxdWlyZXM6WyJFeHQuZGF0YS5TdG9yZU1hbmFnZXIiLCJFeHQuZGF0YS5Nb2RlbCIsIkV4dC5kYXRhLnByb3h5LkFqYXgiLCJFeHQuZGF0YS5wcm94eS5NZW1vcnkiLCJFeHQuZGF0YS5yZWFkZXIuSnNvbiIsIkV4dC5kYXRhLndyaXRlci5Kc29uIiwiRXh0LnV0aWwuTHJ1Q2FjaGUiXSx1c2VzOlsiRXh0Lk1vZGVsTWFuYWdlciIsIkV4dC51dGlsLkdyb3VwZXIiXSxyZW1vdGVTb3J0OmZhbHNlLHJlbW90ZUZpbHRlcjpmYWxzZSxyZW1vdGVHcm91cDpmYWxzZSxncm91cEZpZWxkOnVuZGVmaW5lZCxncm91cERpcjoiQVNDIix0cmFpbGluZ0J1ZmZlclpvbmU6MjUsbGVhZGluZ0J1ZmZlclpvbmU6MjAwLHBhZ2VTaXplOnVuZGVmaW5lZCxjdXJyZW50UGFnZToxLGNsZWFyT25QYWdlTG9hZDp0cnVlLGxvYWRpbmc6ZmFsc2Usc29ydE9uRmlsdGVyOnRydWUsYnVmZmVyZWQ6ZmFsc2UscHVyZ2VQYWdlQ291bnQ6NSxjbGVhclJlbW92ZWRPbkxvYWQ6dHJ1ZSxkZWZhdWx0UGFnZVNpemU6MjUsYWRkUmVjb3Jkc09wdGlvbnM6e2FkZFJlY29yZHM6dHJ1ZX0sc3RhdGljczp7cmVjb3JkSWRGbjpmdW5jdGlvbihhKXtyZXR1cm4gYS5pbnRlcm5hbElkfSxyZWNvcmRJbmRleEZuOmZ1bmN0aW9uKGEpe3JldHVybiBhLmluZGV4fX0sb25DbGFzc0V4dGVuZGVkOmZ1bmN0aW9uKGIsZCxhKXt2YXIgYz1kLm1vZGVsLGU7aWYodHlwZW9mIGM9PSJzdHJpbmciKXtlPWEub25CZWZvcmVDcmVhdGVkO2Eub25CZWZvcmVDcmVhdGVkPWZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxnPWFyZ3VtZW50cztFeHQucmVxdWlyZShjLGZ1bmN0aW9uKCl7ZS5hcHBseShoLGcpfSl9fX0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYil7Yj1FeHQuT2JqZWN0Lm1lcmdlKHt9LGIpO3ZhciBkPXRoaXMsZz1iLmdyb3VwZXJzfHxkLmdyb3VwZXJzLGE9Yi5ncm91cEZpZWxkfHxkLmdyb3VwRmllbGQsYyxlO2U9Yi5kYXRhfHxkLmRhdGE7ZC5kYXRhPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oZmFsc2UsRXh0LmRhdGEuU3RvcmUucmVjb3JkSWRGbik7aWYoZSl7ZC5pbmxpbmVEYXRhPWU7ZGVsZXRlIGIuZGF0YX1pZighZyYmYSl7Zz1be3Byb3BlcnR5OmEsZGlyZWN0aW9uOmIuZ3JvdXBEaXJ8fGQuZ3JvdXBEaXJ9XX1kZWxldGUgYi5ncm91cGVycztkLmdyb3VwZXJzPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oKTtkLmdyb3VwZXJzLmFkZEFsbChkLmRlY29kZUdyb3VwZXJzKGcpKTt0aGlzLmNhbGxQYXJlbnQoW2JdKTtpZihkLmJ1ZmZlcmVkKXtkLnBhZ2VNYXA9bmV3IGQuUGFnZU1hcCh7cGFnZVNpemU6ZC5wYWdlU2l6ZSxtYXhTaXplOmQucHVyZ2VQYWdlQ291bnQsbGlzdGVuZXJzOntjbGVhcjpkLmNhbmNlbEFsbFByZWZldGNoZXMsc2NvcGU6ZH19KTtkLnBhZ2VSZXF1ZXN0cz17fTtkLnNvcnRPbkxvYWQ9ZmFsc2U7ZC5maWx0ZXJPbkxvYWQ9ZmFsc2V9aWYoZC5yZW1vdGVHcm91cCl7ZC5yZW1vdGVTb3J0PXRydWV9aWYoZC5ncm91cGVycy5pdGVtcy5sZW5ndGgmJiFkLnJlbW90ZUdyb3VwKXtkLnNvcnQoZC5ncm91cGVycy5pdGVtcywicHJlcGVuZCIsZmFsc2UpfWM9ZC5wcm94eTtlPWQuaW5saW5lRGF0YTtpZighZC5idWZmZXJlZCYmIWQucGFnZVNpemUpe2QucGFnZVNpemU9ZC5kZWZhdWx0UGFnZVNpemV9aWYoZSl7aWYoYyBpbnN0YW5jZW9mIEV4dC5kYXRhLnByb3h5Lk1lbW9yeSl7Yy5kYXRhPWU7ZC5yZWFkKCl9ZWxzZXtkLmFkZC5hcHBseShkLFtlXSl9ZC5zb3J0KCk7ZGVsZXRlIGQuaW5saW5lRGF0YX1lbHNle2lmKGQuYXV0b0xvYWQpe0V4dC5kZWZlcihkLmxvYWQsMTAsZCxbdHlwZW9mIGQuYXV0b0xvYWQ9PT0ib2JqZWN0Ij9kLmF1dG9Mb2FkOnVuZGVmaW5lZF0pfX19LGRlc3Ryb3lTdG9yZTpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKHRoaXMucGFnZU1hcCl7dGhpcy5wYWdlTWFwLmNsZWFyKCl9fSxvbkJlZm9yZVNvcnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdyb3VwZXJzO2lmKGEuZ2V0Q291bnQoKT4wKXt0aGlzLnNvcnQoYS5pdGVtcywicHJlcGVuZCIsZmFsc2UpfX0sZGVjb2RlR3JvdXBlcnM6ZnVuY3Rpb24oZSl7aWYoIUV4dC5pc0FycmF5KGUpKXtpZihlPT09dW5kZWZpbmVkKXtlPVtdfWVsc2V7ZT1bZV19fXZhciBkPWUubGVuZ3RoLGc9RXh0LnV0aWwuR3JvdXBlcixiLGMsYT1bXTtmb3IoYz0wO2M8ZDtjKyspe2I9ZVtjXTtpZighKGIgaW5zdGFuY2VvZiBnKSl7aWYoRXh0LmlzU3RyaW5nKGIpKXtiPXtwcm9wZXJ0eTpifX1iPUV4dC5hcHBseSh7cm9vdDoiZGF0YSIsZGlyZWN0aW9uOiJBU0MifSxiKTtpZihiLmZuKXtiLnNvcnRlckZuPWIuZm59aWYodHlwZW9mIGI9PSJmdW5jdGlvbiIpe2I9e3NvcnRlckZuOmJ9fWEucHVzaChuZXcgZyhiKSl9ZWxzZXthLnB1c2goYil9fXJldHVybiBhfSxncm91cDpmdW5jdGlvbihlLGcpe3ZhciBkPXRoaXMsYz1mYWxzZSxiLGE7aWYoRXh0LmlzQXJyYXkoZSkpe2E9ZX1lbHNle2lmKEV4dC5pc09iamVjdChlKSl7YT1bZV19ZWxzZXtpZihFeHQuaXNTdHJpbmcoZSkpe2I9ZC5ncm91cGVycy5nZXQoZSk7aWYoIWIpe2I9e3Byb3BlcnR5OmUsZGlyZWN0aW9uOmd9O2E9W2JdfWVsc2V7aWYoZz09PXVuZGVmaW5lZCl7Yi50b2dnbGUoKX1lbHNle2Iuc2V0RGlyZWN0aW9uKGcpfX19fX1pZihhJiZhLmxlbmd0aCl7Yz10cnVlO2E9ZC5kZWNvZGVHcm91cGVycyhhKTtkLmdyb3VwZXJzLmNsZWFyKCk7ZC5ncm91cGVycy5hZGRBbGwoYSl9aWYoZC5yZW1vdGVHcm91cCl7aWYoZC5idWZmZXJlZCl7ZC5wYWdlTWFwLmNsZWFyKCk7ZC5sb2FkUGFnZSgxLHtncm91cENoYW5nZTp0cnVlfSl9ZWxzZXtkLmxvYWQoe3Njb3BlOmQsY2FsbGJhY2s6ZC5maXJlR3JvdXBDaGFuZ2V9KX19ZWxzZXtkLnNvcnQobnVsbCxudWxsLG51bGwsYyk7ZC5maXJlR3JvdXBDaGFuZ2UoKX19LGNsZWFyR3JvdXBpbmc6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGU9ZC5ncm91cGVycy5pdGVtcyxjPWUubGVuZ3RoLGEsYjtmb3IoYj0wO2I8YztiKyspe2E9ZVtiXTtkLnNvcnRlcnMucmVtb3ZlKGEpfWQuZ3JvdXBlcnMuY2xlYXIoKTtpZihkLnJlbW90ZUdyb3VwKXtpZihkLmJ1ZmZlcmVkKXtkLnBhZ2VNYXAuY2xlYXIoKTtkLmxvYWRQYWdlKDEse2dyb3VwQ2hhbmdlOnRydWV9KX1lbHNle2QubG9hZCh7c2NvcGU6ZCxjYWxsYmFjazpkLmZpcmVHcm91cENoYW5nZX0pfX1lbHNle2Quc29ydCgpO2QuZmlyZUdyb3VwQ2hhbmdlKCl9fSxpc0dyb3VwZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncm91cGVycy5nZXRDb3VudCgpPjB9LGZpcmVHcm91cENoYW5nZTpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJncm91cGNoYW5nZSIsdGhpcyx0aGlzLmdyb3VwZXJzKX0sZ2V0R3JvdXBzOmZ1bmN0aW9uKGIpe3ZhciBkPXRoaXMuZGF0YS5pdGVtcyxhPWQubGVuZ3RoLGM9W10saz17fSxnLGgsaixlO2ZvcihlPTA7ZTxhO2UrKyl7Zz1kW2VdO2g9dGhpcy5nZXRHcm91cFN0cmluZyhnKTtqPWtbaF07aWYoaj09PXVuZGVmaW5lZCl7aj17bmFtZTpoLGNoaWxkcmVuOltdfTtjLnB1c2goaik7a1toXT1qfWouY2hpbGRyZW4ucHVzaChnKX1yZXR1cm4gYj9rW2JdOmN9LGdldEdyb3Vwc0Zvckdyb3VwZXI6ZnVuY3Rpb24oZyxiKXt2YXIgZD1nLmxlbmd0aCxlPVtdLGEsYyxqLGssaDtmb3IoaD0wO2g8ZDtoKyspe2o9Z1toXTtjPWIuZ2V0R3JvdXBTdHJpbmcoaik7aWYoYyE9PWEpe2s9e25hbWU6Yyxncm91cGVyOmIscmVjb3JkczpbXX07ZS5wdXNoKGspfWsucmVjb3Jkcy5wdXNoKGopO2E9Y31yZXR1cm4gZX0sZ2V0R3JvdXBzRm9yR3JvdXBlckluZGV4OmZ1bmN0aW9uKGMsail7dmFyIGc9dGhpcyxoPWcuZ3JvdXBlcnMsYj1oLmdldEF0KGopLGE9Zy5nZXRHcm91cHNGb3JHcm91cGVyKGMsYiksZT1hLmxlbmd0aCxkO2lmKGorMTxoLmxlbmd0aCl7Zm9yKGQ9MDtkPGU7ZCsrKXthW2RdLmNoaWxkcmVuPWcuZ2V0R3JvdXBzRm9yR3JvdXBlckluZGV4KGFbZF0ucmVjb3JkcyxqKzEpfX1mb3IoZD0wO2Q8ZTtkKyspe2FbZF0uZGVwdGg9an1yZXR1cm4gYX0sZ2V0R3JvdXBEYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYSE9PWZhbHNlKXtiLnNvcnQoKX1yZXR1cm4gYi5nZXRHcm91cHNGb3JHcm91cGVySW5kZXgoYi5kYXRhLml0ZW1zLDApfSxnZXRHcm91cFN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdyb3VwZXJzLmZpcnN0KCk7aWYoYil7cmV0dXJuIGEuZ2V0KGIucHJvcGVydHkpfXJldHVybiIifSxpbnNlcnQ6ZnVuY3Rpb24oZCxjKXt2YXIgaD10aGlzLGc9ZmFsc2UsZSxiLGE7Yz1bXS5jb25jYXQoYyk7Zm9yKGU9MCxhPWMubGVuZ3RoO2U8YTtlKyspe2I9aC5jcmVhdGVNb2RlbChjW2VdKTtiLnNldChoLm1vZGVsRGVmYXVsdHMpO2NbZV09YjtoLmRhdGEuaW5zZXJ0KGQrZSxiKTtiLmpvaW4oaCk7Zz1nfHxiLnBoYW50b209PT10cnVlfWlmKGguc25hcHNob3Qpe2guc25hcHNob3QuYWRkQWxsKGMpfWlmKGgucmVxdWlyZVNvcnQpe2guc3VzcGVuZEV2ZW50cygpO2guc29ydCgpO2gucmVzdW1lRXZlbnRzKCl9aC5maXJlRXZlbnQoImFkZCIsaCxjLGQpO2guZmlyZUV2ZW50KCJkYXRhY2hhbmdlZCIsaCk7aWYoaC5hdXRvU3luYyYmZyYmIWguYXV0b1N5bmNTdXNwZW5kZWQpe2guc3luYygpfX0sYWRkOmZ1bmN0aW9uKGIpe2lmKCFFeHQuaXNBcnJheShiKSl7Yj1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKX1lbHNle2I9Yi5zbGljZSgwKX12YXIgZT10aGlzLGM9MCxkPWIubGVuZ3RoLGEsZz0hZS5yZW1vdGVTb3J0JiZlLnNvcnRlcnMmJmUuc29ydGVycy5pdGVtcy5sZW5ndGg7aWYoZyYmZD09PTEpe3JldHVybltlLmFkZFNvcnRlZChlLmNyZWF0ZU1vZGVsKGJbMF0pKV19Zm9yKDtjPGQ7YysrKXthPWUuY3JlYXRlTW9kZWwoYltjXSk7YltjXT1hfWlmKGcpe2UucmVxdWlyZVNvcnQ9dHJ1ZX1lLmluc2VydChlLmRhdGEubGVuZ3RoLGIpO2RlbGV0ZSBlLnJlcXVpcmVTb3J0O3JldHVybiBifSxhZGRTb3J0ZWQ6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxiPWMuZGF0YS5maW5kSW5zZXJ0aW9uSW5kZXgoYSxjLmdlbmVyYXRlQ29tcGFyYXRvcigpKTtjLmluc2VydChiLGEpO3JldHVybiBhfSxjcmVhdGVNb2RlbDpmdW5jdGlvbihhKXtpZighYS5pc01vZGVsKXthPUV4dC5Nb2RlbE1hbmFnZXIuY3JlYXRlKGEsdGhpcy5tb2RlbCl9cmV0dXJuIGF9LGVhY2g6ZnVuY3Rpb24oZSxjKXt2YXIgZz10aGlzLmRhdGEuaXRlbXMsYj1nLmxlbmd0aCxhLGg7Zm9yKGg9MDtoPGI7aCsrKXthPWdbaF07aWYoZS5jYWxsKGN8fGEsYSxoLGIpPT09ZmFsc2Upe2JyZWFrfX19LHJlbW92ZTpmdW5jdGlvbihjLGspe2lmKCFFeHQuaXNBcnJheShjKSl7Yz1bY119az1rPT09dHJ1ZTt2YXIgaD10aGlzLGo9ZmFsc2UsZD0wLGE9Yy5sZW5ndGgsYixnLGU7Zm9yKDtkPGE7ZCsrKXtlPWNbZF07Zz1oLmRhdGEuaW5kZXhPZihlKTtpZihoLnNuYXBzaG90KXtoLnNuYXBzaG90LnJlbW92ZShlKX1pZihnPi0xKXtiPWUucGhhbnRvbSE9PXRydWU7aWYoIWsmJmIpe2UucmVtb3ZlZEZyb209ZztoLnJlbW92ZWQucHVzaChlKX1lLnVuam9pbihoKTtoLmRhdGEucmVtb3ZlKGUpO2o9anx8YjtoLmZpcmVFdmVudCgicmVtb3ZlIixoLGUsZyl9fWguZmlyZUV2ZW50KCJkYXRhY2hhbmdlZCIsaCk7aWYoIWsmJmguYXV0b1N5bmMmJmomJiFoLmF1dG9TeW5jU3VzcGVuZGVkKXtoLnN5bmMoKX19LHJlbW92ZUF0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ2V0QXQoYik7aWYoYSl7dGhpcy5yZW1vdmUoYSl9fSxsb2FkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7YT1hfHx7fTtpZih0eXBlb2YgYT09ImZ1bmN0aW9uIil7YT17Y2FsbGJhY2s6YX19YS5ncm91cGVycz1hLmdyb3VwZXJzfHxiLmdyb3VwZXJzLml0ZW1zO2EucGFnZT1hLnBhZ2V8fGIuY3VycmVudFBhZ2U7YS5zdGFydD0oYS5zdGFydCE9PXVuZGVmaW5lZCk/YS5zdGFydDooYS5wYWdlLTEpKmIucGFnZVNpemU7YS5saW1pdD1hLmxpbWl0fHxiLnBhZ2VTaXplO2EuYWRkUmVjb3Jkcz1hLmFkZFJlY29yZHN8fGZhbHNlO2lmKGIuYnVmZmVyZWQpe3JldHVybiBiLmxvYWRUb1ByZWZldGNoKGEpfXJldHVybiBiLmNhbGxQYXJlbnQoW2FdKX0scmVsb2FkOmZ1bmN0aW9uKGwpe3ZhciBnPXRoaXMsaCxiLGUsayxkLGEsaixjO2lmKCFsKXtsPXt9fWlmKGcuYnVmZmVyZWQpe2RlbGV0ZSBnLnRvdGFsQ291bnQ7YT1mdW5jdGlvbigpe2lmKGcucmFuZ2VDYWNoZWQoaCxiKSl7Zy5sb2FkaW5nPWZhbHNlO2cucGFnZU1hcC51bigicGFnZUFkZGVkIixhKTtjPWcucGFnZU1hcC5nZXRSYW5nZShoLGIpO2cubG9hZFJlY29yZHMoYyx7c3RhcnQ6aH0pO2cuZmlyZUV2ZW50KCJsb2FkIixnLGMsdHJ1ZSl9fTtqPU1hdGguY2VpbCgoZy5sZWFkaW5nQnVmZmVyWm9uZStnLnRyYWlsaW5nQnVmZmVyWm9uZSkvMik7aD1sLnN0YXJ0fHxnLmdldEF0KDApLmluZGV4O2I9aCsobC5jb3VudHx8Zy5nZXRDb3VudCgpKS0xO2U9Zy5nZXRQYWdlRnJvbVJlY29yZEluZGV4KE1hdGgubWF4KGgtaiwwKSk7az1nLmdldFBhZ2VGcm9tUmVjb3JkSW5kZXgoYitqKTtnLnBhZ2VNYXAuY2xlYXIodHJ1ZSk7aWYoZy5maXJlRXZlbnQoImJlZm9yZWxvYWQiLGcsbCkhPT1mYWxzZSl7Zy5sb2FkaW5nPXRydWU7Zm9yKGQ9ZTtkPD1rO2QrKyl7Zy5wcmVmZXRjaFBhZ2UoZCxsKX1nLnBhZ2VNYXAub24oInBhZ2VBZGRlZCIsYSl9fWVsc2V7cmV0dXJuIGcuY2FsbFBhcmVudChhcmd1bWVudHMpfX0sb25Qcm94eUxvYWQ6ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcyxjPWIuZ2V0UmVzdWx0U2V0KCksYT1iLmdldFJlY29yZHMoKSxlPWIud2FzU3VjY2Vzc2Z1bCgpO2lmKGMpe2QudG90YWxDb3VudD1jLnRvdGFsfWlmKGUpe2QubG9hZFJlY29yZHMoYSxiKX1kLmxvYWRpbmc9ZmFsc2U7aWYoZC5oYXNMaXN0ZW5lcnMubG9hZCl7ZC5maXJlRXZlbnQoImxvYWQiLGQsYSxlKX1pZihkLmhhc0xpc3RlbmVycy5yZWFkKXtkLmZpcmVFdmVudCgicmVhZCIsZCxhLGUpfUV4dC5jYWxsYmFjayhiLmNhbGxiYWNrLGIuc2NvcGV8fGQsW2EsYixlXSl9LGdldE5ld1JlY29yZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLmZpbHRlckJ5KHRoaXMuZmlsdGVyTmV3KS5pdGVtc30sZ2V0VXBkYXRlZFJlY29yZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLmZpbHRlckJ5KHRoaXMuZmlsdGVyVXBkYXRlZCkuaXRlbXN9LGZpbHRlcjpmdW5jdGlvbihlLGcpe2lmKEV4dC5pc1N0cmluZyhlKSl7ZT17cHJvcGVydHk6ZSx2YWx1ZTpnfX12YXIgZD10aGlzLGE9ZC5kZWNvZGVGaWx0ZXJzKGUpLGI9MCxoPWQuc29ydGVycy5sZW5ndGgmJmQuc29ydE9uRmlsdGVyJiYhZC5yZW1vdGVTb3J0LGM9YS5sZW5ndGg7Zm9yKDtiPGM7YisrKXtkLmZpbHRlcnMucmVwbGFjZShhW2JdKX1pZihkLnJlbW90ZUZpbHRlcil7ZGVsZXRlIGQudG90YWxDb3VudDtpZihkLmJ1ZmZlcmVkKXtkLnBhZ2VNYXAuY2xlYXIoKTtkLmxvYWRQYWdlKDEpfWVsc2V7ZC5jdXJyZW50UGFnZT0xO2QubG9hZCgpfX1lbHNle2lmKGQuZmlsdGVycy5nZXRDb3VudCgpKXtkLnNuYXBzaG90PWQuc25hcHNob3R8fGQuZGF0YS5jbG9uZSgpO2QuZGF0YT1kLmRhdGEuZmlsdGVyKGQuZmlsdGVycy5pdGVtcyk7aWYoaCl7ZC5zb3J0KCl9ZWxzZXtkLmZpcmVFdmVudCgiZGF0YWNoYW5nZWQiLGQpO2QuZmlyZUV2ZW50KCJyZWZyZXNoIixkKX19fX0sY2xlYXJGaWx0ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLmZpbHRlcnMuY2xlYXIoKTtpZihiLnJlbW90ZUZpbHRlcil7aWYoYSl7cmV0dXJufWRlbGV0ZSBiLnRvdGFsQ291bnQ7aWYoYi5idWZmZXJlZCl7Yi5wYWdlTWFwLmNsZWFyKCk7Yi5sb2FkUGFnZSgxKX1lbHNle2IuY3VycmVudFBhZ2U9MTtiLmxvYWQoKX19ZWxzZXtpZihiLmlzRmlsdGVyZWQoKSl7Yi5kYXRhPWIuc25hcHNob3QuY2xvbmUoKTtkZWxldGUgYi5zbmFwc2hvdDtpZihhIT09dHJ1ZSl7Yi5maXJlRXZlbnQoImRhdGFjaGFuZ2VkIixiKTtiLmZpcmVFdmVudCgicmVmcmVzaCIsYil9fX19LGlzRmlsdGVyZWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNuYXBzaG90O3JldHVybiAhIWEmJmEhPT10aGlzLmRhdGF9LGZpbHRlckJ5OmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcztjLnNuYXBzaG90PWMuc25hcHNob3R8fGMuZGF0YS5jbG9uZSgpO2MuZGF0YT1jLnF1ZXJ5QnkoYixhfHxjKTtjLmZpcmVFdmVudCgiZGF0YWNoYW5nZWQiLGMpO2MuZmlyZUV2ZW50KCJyZWZyZXNoIixjKX0scXVlcnlCeTpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXMsZD1jLnNuYXBzaG90fHxjLmRhdGE7cmV0dXJuIGQuZmlsdGVyQnkoYixhfHxjKX0scXVlcnk6ZnVuY3Rpb24oaCxnLGksYSxlKXt2YXIgZD10aGlzLGI9ZC5jcmVhdGVGaWx0ZXJGbihoLGcsaSxhLGUpLGM9ZC5xdWVyeUJ5KGIpO2lmKCFjKXtjPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oKX1yZXR1cm4gY30sbG9hZERhdGE6ZnVuY3Rpb24oaixhKXt2YXIgaD10aGlzLGM9aC5tb2RlbCxnPWoubGVuZ3RoLGU9W10sZCxiO2ZvcihkPTA7ZDxnO2QrKyl7Yj1qW2RdO2lmKCEoYi5pc01vZGVsKSl7Yj1FeHQuTW9kZWxNYW5hZ2VyLmNyZWF0ZShiLGMpfWUucHVzaChiKX1oLmxvYWRSZWNvcmRzKGUsYT9oLmFkZFJlY29yZHNPcHRpb25zOnVuZGVmaW5lZCl9LGxvYWRSYXdEYXRhOmZ1bmN0aW9uKGUsYil7dmFyIGQ9dGhpcyxhPWQucHJveHkucmVhZGVyLnJlYWQoZSksYz1hLnJlY29yZHM7aWYoYS5zdWNjZXNzKXtkLnRvdGFsQ291bnQ9YS50b3RhbDtkLmxvYWRSZWNvcmRzKGMsYj9kLmFkZFJlY29yZHNPcHRpb25zOnVuZGVmaW5lZCk7ZC5maXJlRXZlbnQoImxvYWQiLGQsYyx0cnVlKX19LGxvYWRSZWNvcmRzOmZ1bmN0aW9uKGIsYyl7dmFyIGg9dGhpcyxkPTAsZz1iLmxlbmd0aCxqLGUsYT1oLnNuYXBzaG90O2lmKGMpe2o9Yy5zdGFydDtlPWMuYWRkUmVjb3Jkc31pZighZSl7ZGVsZXRlIGguc25hcHNob3Q7aC5jbGVhckRhdGEodHJ1ZSl9ZWxzZXtpZihhKXthLmFkZEFsbChiKX19aC5kYXRhLmFkZEFsbChiKTtpZihqIT09dW5kZWZpbmVkKXtmb3IoO2Q8ZztkKyspe2JbZF0uaW5kZXg9aitkO2JbZF0uam9pbihoKX19ZWxzZXtmb3IoO2Q8ZztkKyspe2JbZF0uam9pbihoKX19aC5zdXNwZW5kRXZlbnRzKCk7aWYoaC5maWx0ZXJPbkxvYWQmJiFoLnJlbW90ZUZpbHRlcil7aC5maWx0ZXIoKX1pZihoLnNvcnRPbkxvYWQmJiFoLnJlbW90ZVNvcnQpe2guc29ydCh1bmRlZmluZWQsdW5kZWZpbmVkLHVuZGVmaW5lZCx0cnVlKX1oLnJlc3VtZUV2ZW50cygpO2guZmlyZUV2ZW50KCJkYXRhY2hhbmdlZCIsaCk7aC5maXJlRXZlbnQoInJlZnJlc2giLGgpfSxsb2FkUGFnZTpmdW5jdGlvbihjLGEpe3ZhciBiPXRoaXM7Yi5jdXJyZW50UGFnZT1jO2E9RXh0LmFwcGx5KHtwYWdlOmMsc3RhcnQ6KGMtMSkqYi5wYWdlU2l6ZSxsaW1pdDpiLnBhZ2VTaXplLGFkZFJlY29yZHM6IWIuY2xlYXJPblBhZ2VMb2FkfSxhKTtpZihiLmJ1ZmZlcmVkKXtyZXR1cm4gYi5sb2FkVG9QcmVmZXRjaChhKX1iLnJlYWQoYSl9LG5leHRQYWdlOmZ1bmN0aW9uKGEpe3RoaXMubG9hZFBhZ2UodGhpcy5jdXJyZW50UGFnZSsxLGEpfSxwcmV2aW91c1BhZ2U6ZnVuY3Rpb24oYSl7dGhpcy5sb2FkUGFnZSh0aGlzLmN1cnJlbnRQYWdlLTEsYSl9LGNsZWFyRGF0YTpmdW5jdGlvbihkKXt2YXIgYz10aGlzLGE9Yy5kYXRhLml0ZW1zLGI9YS5sZW5ndGg7d2hpbGUoYi0tKXthW2JdLnVuam9pbihjKX1jLmRhdGEuY2xlYXIoKTtpZihkIT09dHJ1ZXx8Yy5jbGVhclJlbW92ZWRPbkxvYWQpe2MucmVtb3ZlZC5sZW5ndGg9MH19LGxvYWRUb1ByZWZldGNoOmZ1bmN0aW9uKGwpe3ZhciBoPXRoaXMsZCxiLGo9bC5zdGFydCxhPWwuc3RhcnQrbC5saW1pdC0xLGU9bC5zdGFydCsoaC52aWV3U2l6ZXx8bC5saW1pdCktMSxnPWguZ2V0UGFnZUZyb21SZWNvcmRJbmRleChNYXRoLm1heChqLWgudHJhaWxpbmdCdWZmZXJab25lLDApKSxrPWguZ2V0UGFnZUZyb21SZWNvcmRJbmRleChhK2gubGVhZGluZ0J1ZmZlclpvbmUpLGM9ZnVuY3Rpb24oKXtpZihoLnJhbmdlQ2FjaGVkKGosZSkpe2gubG9hZGluZz1mYWxzZTtiPWgucGFnZU1hcC5nZXRSYW5nZShqLGUpO2gucGFnZU1hcC51bigicGFnZUFkZGVkIixjKTtpZihoLmhhc0xpc3RlbmVycy5ndWFyYW50ZWVkcmFuZ2Upe2guZ3VhcmFudGVlUmFuZ2UoaixlLGwuY2FsbGJhY2ssbC5zY29wZSl9ZWxzZXtoLmxvYWRSZWNvcmRzKGIse3N0YXJ0Omp9KX1oLmZpcmVFdmVudCgibG9hZCIsaCxiLHRydWUpO2lmKGwuZ3JvdXBDaGFuZ2Upe2guZmlyZUdyb3VwQ2hhbmdlKCl9fX07aWYoaC5maXJlRXZlbnQoImJlZm9yZWxvYWQiLGgsbCkhPT1mYWxzZSl7ZGVsZXRlIGgudG90YWxDb3VudDtoLmxvYWRpbmc9dHJ1ZTtoLnBhZ2VNYXAub24oInBhZ2VBZGRlZCIsYyk7aC5vbigicHJlZmV0Y2giLGZ1bmN0aW9uKCl7Zm9yKGQ9ZysxO2Q8PWs7KytkKXtoLnByZWZldGNoUGFnZShkLGwpfX0sbnVsbCx7c2luZ2xlOnRydWV9KTtoLnByZWZldGNoUGFnZShnLGwpfX0scHJlZmV0Y2g6ZnVuY3Rpb24oYyl7dmFyIGU9dGhpcyxhPWUucGFnZVNpemUsZCxiO2lmKGEpe2lmKGUubGFzdFBhZ2VTaXplJiZhIT1lLmxhc3RQYWdlU2l6ZSl7RXh0LmVycm9yLnJhaXNlKCJwYWdlU2l6ZSBjYW5ub3QgYmUgZHluYW1pY2FsbHkgYWx0ZXJlZCIpfWlmKCFlLnBhZ2VNYXAucGFnZVNpemUpe2UucGFnZU1hcC5wYWdlU2l6ZT1hfX1lbHNle2UucGFnZVNpemU9ZS5wYWdlTWFwLnBhZ2VTaXplPWE9Yy5saW1pdH1lLmxhc3RQYWdlU2l6ZT1hO2lmKCFjLnBhZ2Upe2MucGFnZT1lLmdldFBhZ2VGcm9tUmVjb3JkSW5kZXgoYy5zdGFydCk7Yy5zdGFydD0oYy5wYWdlLTEpKmE7Yy5saW1pdD1NYXRoLmNlaWwoYy5saW1pdC9hKSphfWlmKCFlLnBhZ2VSZXF1ZXN0c1tjLnBhZ2VdKXtjPUV4dC5hcHBseSh7YWN0aW9uOiJyZWFkIixmaWx0ZXJzOmUuZmlsdGVycy5pdGVtcyxzb3J0ZXJzOmUuc29ydGVycy5pdGVtcyxncm91cGVyczplLmdyb3VwZXJzLml0ZW1zLGdlbmVyYXRpb246ZS5wYWdlTWFwLmdlbmVyYXRpb259LGMpO2I9bmV3IEV4dC5kYXRhLk9wZXJhdGlvbihjKTtpZihlLmZpcmVFdmVudCgiYmVmb3JlcHJlZmV0Y2giLGUsYikhPT1mYWxzZSl7ZS5sb2FkaW5nPXRydWU7ZD1lLnByb3h5O2UucGFnZVJlcXVlc3RzW2MucGFnZV09ZC5yZWFkKGIsZS5vblByb3h5UHJlZmV0Y2gsZSk7aWYoZC5pc1N5bmNocm9ub3VzKXtkZWxldGUgZS5wYWdlUmVxdWVzdHNbYy5wYWdlXX19fXJldHVybiBlfSxjYW5jZWxBbGxQcmVmZXRjaGVzOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxhPWMucGFnZVJlcXVlc3RzLGIsZDtpZihjLnBhZ2VNYXAuZXZlbnRzLnBhZ2VhZGRlZCl7Yy5wYWdlTWFwLmV2ZW50cy5wYWdlYWRkZWQuY2xlYXJMaXN0ZW5lcnMoKX1mb3IoZCBpbiBhKXtpZihhLmhhc093blByb3BlcnR5KGQpKXtiPWFbZF07ZGVsZXRlIGFbZF07ZGVsZXRlIGIuY2FsbGJhY2t9fX0scHJlZmV0Y2hQYWdlOmZ1bmN0aW9uKGUsYil7dmFyIGQ9dGhpcyxhPWQucGFnZVNpemV8fGQuZGVmYXVsdFBhZ2VTaXplLGc9KGUtMSkqZC5wYWdlU2l6ZSxjPWQudG90YWxDb3VudDtpZihjIT09dW5kZWZpbmVkJiZkLmdldENvdW50KCk9PT1jKXtyZXR1cm59ZC5wcmVmZXRjaChFeHQuYXBwbHlJZih7cGFnZTplLHN0YXJ0OmcsbGltaXQ6YX0sYikpfSxvblByb3h5UHJlZmV0Y2g6ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcyxjPWIuZ2V0UmVzdWx0U2V0KCksYT1iLmdldFJlY29yZHMoKSxnPWIud2FzU3VjY2Vzc2Z1bCgpLGU9Yi5wYWdlO2lmKGIuZ2VuZXJhdGlvbj09PWQucGFnZU1hcC5nZW5lcmF0aW9uKXtpZihjKXtkLnRvdGFsQ291bnQ9Yy50b3RhbDtkLmZpcmVFdmVudCgidG90YWxjb3VudGNoYW5nZSIsZC50b3RhbENvdW50KX1pZihlIT09dW5kZWZpbmVkKXtkZWxldGUgZC5wYWdlUmVxdWVzdHNbZV19aWYoZyl7ZC5jYWNoZVBhZ2UoYSxiLnBhZ2UpfWQubG9hZGluZz1mYWxzZTtkLmZpcmVFdmVudCgicHJlZmV0Y2giLGQsYSxnLGIpO0V4dC5jYWxsYmFjayhiLmNhbGxiYWNrLGIuc2NvcGV8fGQsW2EsYixnXSl9fSxjYWNoZVBhZ2U6ZnVuY3Rpb24oYSxjKXt2YXIgYj10aGlzO2lmKCFFeHQuaXNEZWZpbmVkKGIudG90YWxDb3VudCkpe2IudG90YWxDb3VudD1hLmxlbmd0aDtiLmZpcmVFdmVudCgidG90YWxjb3VudGNoYW5nZSIsYi50b3RhbENvdW50KX1iLnBhZ2VNYXAuYWRkUGFnZShjLGEpfSxyYW5nZUNhY2hlZDpmdW5jdGlvbihiLGEpe3JldHVybiB0aGlzLnBhZ2VNYXAmJnRoaXMucGFnZU1hcC5oYXNSYW5nZShiLGEpfSxwYWdlQ2FjaGVkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnBhZ2VNYXAmJnRoaXMucGFnZU1hcC5oYXNQYWdlKGEpfSxyYW5nZVNhdGlzZmllZDpmdW5jdGlvbihiLGEpe3JldHVybiB0aGlzLnJhbmdlQ2FjaGVkKGIsYSl9LGdldFBhZ2VGcm9tUmVjb3JkSW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguZmxvb3IoYS90aGlzLnBhZ2VTaXplKSsxfSxvbkd1YXJhbnRlZWRSYW5nZTpmdW5jdGlvbihkKXt2YXIgZT10aGlzLGI9ZS5nZXRUb3RhbENvdW50KCksZz1kLnByZWZldGNoU3RhcnQsYT0oKGItMSk8ZC5wcmVmZXRjaEVuZCk/Yi0xOmQucHJlZmV0Y2hFbmQsYzthPU1hdGgubWF4KDAsYSk7Yz1lLnBhZ2VNYXAuZ2V0UmFuZ2UoZyxhKTtlLmZpcmVFdmVudCgiZ3VhcmFudGVlZHJhbmdlIixjLGcsYSk7aWYoZC5jYil7ZC5jYi5jYWxsKGQuc2NvcGV8fGUsYyxnLGEpfX0scHJlZmV0Y2hSYW5nZTpmdW5jdGlvbihnLGIpe3ZhciBkPXRoaXMsYyxhLGU7aWYoIWQucmFuZ2VDYWNoZWQoZyxiKSl7Yz1kLmdldFBhZ2VGcm9tUmVjb3JkSW5kZXgoZyk7YT1kLmdldFBhZ2VGcm9tUmVjb3JkSW5kZXgoYik7ZC5wYWdlTWFwLm1heFNpemU9ZC5wdXJnZVBhZ2VDb3VudD8oYS1jKzEpK2QucHVyZ2VQYWdlQ291bnQ6MDtmb3IoZT1jO2U8PWE7ZSsrKXtpZighZC5wYWdlQ2FjaGVkKGUpKXtkLnByZWZldGNoUGFnZShlKX19fX0sZ3VhcmFudGVlUmFuZ2U6ZnVuY3Rpb24oaSxjLGEsZyl7Yz0oYz50aGlzLnRvdGFsQ291bnQpP3RoaXMudG90YWxDb3VudC0xOmM7dmFyIGg9dGhpcyxlPWgubGFzdFJlcXVlc3RTdGFydCxkPXtwcmVmZXRjaFN0YXJ0OmkscHJlZmV0Y2hFbmQ6YyxjYjphLHNjb3BlOmd9LGI7aC5sYXN0UmVxdWVzdFN0YXJ0PWk7aWYoaC5yYW5nZUNhY2hlZChpLGMpKXtpZihpPGUpe2k9TWF0aC5tYXgoaS1oLmxlYWRpbmdCdWZmZXJab25lLDApO2M9TWF0aC5taW4oYytoLnRyYWlsaW5nQnVmZmVyWm9uZSxoLnRvdGFsQ291bnQtMSl9ZWxzZXtpPU1hdGgubWF4KE1hdGgubWluKGktaC50cmFpbGluZ0J1ZmZlclpvbmUsaC50b3RhbENvdW50LWgucGFnZVNpemUpLDApO2M9TWF0aC5taW4oYytoLmxlYWRpbmdCdWZmZXJab25lLGgudG90YWxDb3VudC0xKX1pZighaC5yYW5nZUNhY2hlZChpLGMpKXtoLnByZWZldGNoUmFuZ2UoaSxjKX1oLm9uR3VhcmFudGVlZFJhbmdlKGQpfWVsc2V7aC5maXJlRXZlbnQoImNhY2hlbWlzcyIsaCxpLGMpO2k9TWF0aC5taW4oTWF0aC5tYXgoTWF0aC5mbG9vcihpLSgoaC5sZWFkaW5nQnVmZmVyWm9uZStoLnRyYWlsaW5nQnVmZmVyWm9uZSkvMikpLDApLGgudG90YWxDb3VudC1oLnBhZ2VTaXplKTtjPU1hdGgubWluKE1hdGgubWF4KE1hdGguY2VpbChjKygoaC5sZWFkaW5nQnVmZmVyWm9uZStoLnRyYWlsaW5nQnVmZmVyWm9uZSkvMikpLDApLGgudG90YWxDb3VudC0xKTtiPWZ1bmN0aW9uKGssail7aWYoaC5yYW5nZUNhY2hlZChkLnByZWZldGNoU3RhcnQsZC5wcmVmZXRjaEVuZCkpe2guZmlyZUV2ZW50KCJjYWNoZWZpbGxlZCIsaCxpLGMpO2gucGFnZU1hcC51bigicGFnZUFkZGVkIixiKTtoLm9uR3VhcmFudGVlZFJhbmdlKGQpfX07aC5wYWdlTWFwLm9uKCJwYWdlQWRkZWQiLGIpO2gucHJlZmV0Y2hSYW5nZShkLnByZWZldGNoU3RhcnQsZC5wcmVmZXRjaEVuZCk7aC5wcmVmZXRjaFJhbmdlKGksYyl9fSxzb3J0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIucGFnZU1hcDtpZihiLmJ1ZmZlcmVkKXtpZihiLnJlbW90ZVNvcnQpe2EuY2xlYXIoKTtiLmNhbGxQYXJlbnQoYXJndW1lbnRzKX1lbHNle2IuY2FsbFBhcmVudChhcmd1bWVudHMpfX1lbHNle2IuY2FsbFBhcmVudChhcmd1bWVudHMpfX0sZG9Tb3J0OmZ1bmN0aW9uKGIpe3ZhciBlPXRoaXMsYSxkLGM7aWYoZS5yZW1vdGVTb3J0KXtpZihlLmJ1ZmZlcmVkKXtlLnBhZ2VNYXAuY2xlYXIoKTtlLmxvYWRQYWdlKDEpfWVsc2V7ZS5sb2FkKCl9fWVsc2V7ZS5kYXRhLnNvcnRCeShiKTtpZighZS5idWZmZXJlZCl7YT1lLmdldFJhbmdlKCk7ZD1hLmxlbmd0aDtmb3IoYz0wO2M8ZDtjKyspe2FbY10uaW5kZXg9Y319ZS5maXJlRXZlbnQoImRhdGFjaGFuZ2VkIixlKTtlLmZpcmVFdmVudCgicmVmcmVzaCIsZSl9fSxmaW5kOmZ1bmN0aW9uKGUsZCxoLGcsYSxjKXt2YXIgYj10aGlzLmNyZWF0ZUZpbHRlckZuKGUsZCxnLGEsYyk7cmV0dXJuIGI/dGhpcy5kYXRhLmZpbmRJbmRleEJ5KGIsbnVsbCxoKTotMX0sZmluZFJlY29yZDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmZpbmQuYXBwbHkoYixhcmd1bWVudHMpO3JldHVybiBhIT09LTE/Yi5nZXRBdChhKTpudWxsfSxjcmVhdGVGaWx0ZXJGbjpmdW5jdGlvbihkLGMsZSxhLGIpe2lmKEV4dC5pc0VtcHR5KGMpKXtyZXR1cm4gZmFsc2V9Yz10aGlzLmRhdGEuY3JlYXRlVmFsdWVNYXRjaGVyKGMsZSxhLGIpO3JldHVybiBmdW5jdGlvbihnKXtyZXR1cm4gYy50ZXN0KGcuZGF0YVtkXSl9fSxmaW5kRXhhY3Q6ZnVuY3Rpb24oYixhLGMpe3JldHVybiB0aGlzLmRhdGEuZmluZEluZGV4QnkoZnVuY3Rpb24oZCl7cmV0dXJuIGQuaXNFcXVhbChkLmdldChiKSxhKX0sdGhpcyxjKX0sZmluZEJ5OmZ1bmN0aW9uKGIsYSxjKXtyZXR1cm4gdGhpcy5kYXRhLmZpbmRJbmRleEJ5KGIsYSxjKX0sY29sbGVjdDpmdW5jdGlvbihiLGEsYyl7dmFyIGQ9dGhpcyxlPShjPT09dHJ1ZSYmZC5zbmFwc2hvdCk/ZC5zbmFwc2hvdDpkLmRhdGE7cmV0dXJuIGUuY29sbGVjdChiLCJkYXRhIixhKX0sZ2V0Q291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLmxlbmd0aHx8MH0sZ2V0VG90YWxDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvdGFsQ291bnR8fDB9LGdldEF0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuZ2V0QXQoYSl9LGdldFJhbmdlOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIHRoaXMuZGF0YS5nZXRSYW5nZShiLGEpfSxnZXRCeUlkOmZ1bmN0aW9uKGEpe3JldHVybih0aGlzLnNuYXBzaG90fHx0aGlzLmRhdGEpLmZpbmRCeShmdW5jdGlvbihiKXtyZXR1cm4gYi5nZXRJZCgpPT09YX0pfSxpbmRleE9mOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuaW5kZXhPZihhKX0saW5kZXhPZlRvdGFsOmZ1bmN0aW9uKGEpe3ZhciBiPWEuaW5kZXg7aWYoYnx8Yj09PTApe3JldHVybiBifXJldHVybiB0aGlzLmluZGV4T2YoYSl9LGluZGV4T2ZJZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbmRleE9mKHRoaXMuZ2V0QnlJZChhKSl9LHJlbW92ZUFsbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2IuY2xlYXJEYXRhKCk7aWYoYi5zbmFwc2hvdCl7Yi5zbmFwc2hvdC5jbGVhcigpfWlmKGIucGFnZU1hcCl7Yi5wYWdlTWFwLmNsZWFyKCl9aWYoYSE9PXRydWUpe2IuZmlyZUV2ZW50KCJjbGVhciIsYil9fSxmaXJzdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGEmJmIuaXNHcm91cGVkKCkpe3JldHVybiBiLmFnZ3JlZ2F0ZShmdW5jdGlvbihjKXtyZXR1cm4gYy5sZW5ndGg/Y1swXTp1bmRlZmluZWR9LGIsdHJ1ZSl9ZWxzZXtyZXR1cm4gYi5kYXRhLmZpcnN0KCl9fSxsYXN0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYSYmYi5pc0dyb3VwZWQoKSl7cmV0dXJuIGIuYWdncmVnYXRlKGZ1bmN0aW9uKGQpe3ZhciBjPWQubGVuZ3RoO3JldHVybiBjP2RbYy0xXTp1bmRlZmluZWR9LGIsdHJ1ZSl9ZWxzZXtyZXR1cm4gYi5kYXRhLmxhc3QoKX19LHN1bTpmdW5jdGlvbihjLGEpe3ZhciBiPXRoaXM7aWYoYSYmYi5pc0dyb3VwZWQoKSl7cmV0dXJuIGIuYWdncmVnYXRlKGIuZ2V0U3VtLGIsdHJ1ZSxbY10pfWVsc2V7cmV0dXJuIGIuZ2V0U3VtKGIuZGF0YS5pdGVtcyxjKX19LGdldFN1bTpmdW5jdGlvbihiLGUpe3ZhciBkPTAsYz0wLGE9Yi5sZW5ndGg7Zm9yKDtjPGE7KytjKXtkKz1iW2NdLmdldChlKX1yZXR1cm4gZH0sY291bnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihhJiZiLmlzR3JvdXBlZCgpKXtyZXR1cm4gYi5hZ2dyZWdhdGUoZnVuY3Rpb24oYyl7cmV0dXJuIGMubGVuZ3RofSxiLHRydWUpfWVsc2V7cmV0dXJuIGIuZ2V0Q291bnQoKX19LG1pbjpmdW5jdGlvbihjLGEpe3ZhciBiPXRoaXM7aWYoYSYmYi5pc0dyb3VwZWQoKSl7cmV0dXJuIGIuYWdncmVnYXRlKGIuZ2V0TWluLGIsdHJ1ZSxbY10pfWVsc2V7cmV0dXJuIGIuZ2V0TWluKGIuZGF0YS5pdGVtcyxjKX19LGdldE1pbjpmdW5jdGlvbihiLGcpe3ZhciBkPTEsYT1iLmxlbmd0aCxlLGM7aWYoYT4wKXtjPWJbMF0uZ2V0KGcpfWZvcig7ZDxhOysrZCl7ZT1iW2RdLmdldChnKTtpZihlPGMpe2M9ZX19cmV0dXJuIGN9LG1heDpmdW5jdGlvbihjLGEpe3ZhciBiPXRoaXM7aWYoYSYmYi5pc0dyb3VwZWQoKSl7cmV0dXJuIGIuYWdncmVnYXRlKGIuZ2V0TWF4LGIsdHJ1ZSxbY10pfWVsc2V7cmV0dXJuIGIuZ2V0TWF4KGIuZGF0YS5pdGVtcyxjKX19LGdldE1heDpmdW5jdGlvbihjLGcpe3ZhciBkPTEsYj1jLmxlbmd0aCxlLGE7aWYoYj4wKXthPWNbMF0uZ2V0KGcpfWZvcig7ZDxiOysrZCl7ZT1jW2RdLmdldChnKTtpZihlPmEpe2E9ZX19cmV0dXJuIGF9LGF2ZXJhZ2U6ZnVuY3Rpb24oYyxhKXt2YXIgYj10aGlzO2lmKGEmJmIuaXNHcm91cGVkKCkpe3JldHVybiBiLmFnZ3JlZ2F0ZShiLmdldEF2ZXJhZ2UsYix0cnVlLFtjXSl9ZWxzZXtyZXR1cm4gYi5nZXRBdmVyYWdlKGIuZGF0YS5pdGVtcyxjKX19LGdldEF2ZXJhZ2U6ZnVuY3Rpb24oYixlKXt2YXIgYz0wLGE9Yi5sZW5ndGgsZD0wO2lmKGIubGVuZ3RoPjApe2Zvcig7YzxhOysrYyl7ZCs9YltjXS5nZXQoZSl9cmV0dXJuIGQvYX1yZXR1cm4gMH0sYWdncmVnYXRlOmZ1bmN0aW9uKGgsayxlLGcpe2c9Z3x8W107aWYoZSYmdGhpcy5pc0dyb3VwZWQoKSl7dmFyIGE9dGhpcy5nZXRHcm91cHMoKSxjPTAsZD1hLmxlbmd0aCxiPXt9LGo7Zm9yKDtjPGQ7KytjKXtqPWFbY107YltqLm5hbWVdPWguYXBwbHkoa3x8dGhpcyxbai5jaGlsZHJlbl0uY29uY2F0KGcpKX1yZXR1cm4gYn1lbHNle3JldHVybiBoLmFwcGx5KGt8fHRoaXMsW3RoaXMuZGF0YS5pdGVtc10uY29uY2F0KGcpKX19LGNvbW1pdENoYW5nZXM6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGQ9Yy5nZXRNb2RpZmllZFJlY29yZHMoKSxhPWQubGVuZ3RoLGI9MDtmb3IoO2I8YTtiKyspe2RbYl0uY29tbWl0KCl9Yy5yZW1vdmVkLmxlbmd0aD0wfSxmaWx0ZXJOZXdPbmx5OmZ1bmN0aW9uKGEpe3JldHVybiBhLnBoYW50b209PT10cnVlfSxnZXRSZWplY3RSZWNvcmRzOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5BcnJheS5wdXNoKHRoaXMuZGF0YS5maWx0ZXJCeSh0aGlzLmZpbHRlck5ld09ubHkpLml0ZW1zLHRoaXMuZ2V0VXBkYXRlZFJlY29yZHMoKSl9LHJlamVjdENoYW5nZXM6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGQ9Yy5nZXRSZWplY3RSZWNvcmRzKCksYT1kLmxlbmd0aCxiPTAsZTtmb3IoO2I8YTtiKyspe2U9ZFtiXTtlLnJlamVjdCgpO2lmKGUucGhhbnRvbSl7Yy5yZW1vdmUoZSl9fWQ9Yy5yZW1vdmVkO2E9ZC5sZW5ndGg7Zm9yKGI9MDtiPGE7YisrKXtlPWRbYl07Yy5pbnNlcnQoZS5yZW1vdmVkRnJvbXx8MCxlKTtlLnJlamVjdCgpfWMucmVtb3ZlZC5sZW5ndGg9MH19LGZ1bmN0aW9uKCl7RXh0LnJlZ1N0b3JlKCJleHQtZW1wdHktc3RvcmUiLHtmaWVsZHM6W10scHJveHk6Im1lbW9yeSJ9KTt0aGlzLnByb3RvdHlwZS5QYWdlTWFwPW5ldyBFeHQuQ2xhc3Moe2V4dGVuZDoiRXh0LnV0aWwuTHJ1Q2FjaGUiLGNsZWFyOmZ1bmN0aW9uKGEpe3RoaXMuZ2VuZXJhdGlvbj0odGhpcy5nZW5lcmF0aW9ufHwwKSsxO3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxnZXRQYWdlRnJvbVJlY29yZEluZGV4OnRoaXMucHJvdG90eXBlLmdldFBhZ2VGcm9tUmVjb3JkSW5kZXgsYWRkUGFnZTpmdW5jdGlvbihiLGEpe3RoaXMuYWRkKGIsYSk7dGhpcy5maXJlRXZlbnQoInBhZ2VBZGRlZCIsYixhKX0sZ2V0UGFnZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXQoYSl9LGhhc1JhbmdlOmZ1bmN0aW9uKGQsYil7dmFyIGM9dGhpcy5nZXRQYWdlRnJvbVJlY29yZEluZGV4KGQpLGE9dGhpcy5nZXRQYWdlRnJvbVJlY29yZEluZGV4KGIpO2Zvcig7Yzw9YTtjKyspe2lmKCF0aGlzLmhhc1BhZ2UoYykpe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9LGhhc1BhZ2U6ZnVuY3Rpb24oYSl7cmV0dXJuICEhdGhpcy5nZXQoYSl9LGdldFJhbmdlOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMuaGFzUmFuZ2UoYSxiKSl7RXh0LkVycm9yLnJhaXNlKCJQYWdlTWFwIGFza2VkIGZvciByYW5nZSB3aGljaCBpdCBkb2VzIG5vdCBoYXZlIil9dmFyIGs9dGhpcyxnPWsuZ2V0UGFnZUZyb21SZWNvcmRJbmRleChhKSxuPWsuZ2V0UGFnZUZyb21SZWNvcmRJbmRleChiKSxjPShnLTEpKmsucGFnZVNpemUsbz0obiprLnBhZ2VTaXplKS0xLGo9ZyxwPVtdLG0saCxsLGQ9MCxlO2Zvcig7ajw9bjtqKyspe2lmKGo9PWcpe209YS1jO2w9dHJ1ZX1lbHNle209MDtsPWZhbHNlfWlmKGo9PW4pe2g9ay5wYWdlU2l6ZS0oby1iKTtsPXRydWV9aWYobCl7RXh0LkFycmF5LnB1c2gocCxFeHQuQXJyYXkuc2xpY2Uoay5nZXRQYWdlKGopLG0saCkpfWVsc2V7RXh0LkFycmF5LnB1c2gocCxrLmdldFBhZ2UoaikpfX1mb3IoZT1wLmxlbmd0aDtkPGU7ZCsrKXtwW2RdLmluZGV4PWErK31yZXR1cm4gcH19KX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLnJlYWRlci5BcnJheSIse2V4dGVuZDoiRXh0LmRhdGEucmVhZGVyLkpzb24iLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmRhdGEuQXJyYXlSZWFkZXIiLGFsaWFzOiJyZWFkZXIuYXJyYXkiLHRvdGFsUHJvcGVydHk6dW5kZWZpbmVkLHN1Y2Nlc3NQcm9wZXJ0eTp1bmRlZmluZWQsY3JlYXRlRmllbGRBY2Nlc3NFeHByZXNzaW9uOmZ1bmN0aW9uKGUsYyxiKXt2YXIgZD0oZS5tYXBwaW5nPT1udWxsKT9lLm9yaWdpbmFsSW5kZXg6ZS5tYXBwaW5nLGE7aWYodHlwZW9mIGQ9PT0iZnVuY3Rpb24iKXthPWMrIi5tYXBwaW5nKCIrYisiLCB0aGlzKSJ9ZWxzZXtpZihpc05hTihkKSl7ZD0nIicrZCsnIid9YT1iKyJbIitkKyJdIn1yZXR1cm4gYX19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5BcnJheVN0b3JlIix7ZXh0ZW5kOiJFeHQuZGF0YS5TdG9yZSIsYWxpYXM6InN0b3JlLmFycmF5IixyZXF1aXJlczpbIkV4dC5kYXRhLnByb3h5Lk1lbW9yeSIsIkV4dC5kYXRhLnJlYWRlci5BcnJheSJdLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe2E9RXh0LmFwcGx5KHtwcm94eTp7dHlwZToibWVtb3J5IixyZWFkZXI6ImFycmF5In19LGEpO3RoaXMuY2FsbFBhcmVudChbYV0pfSxsb2FkRGF0YTpmdW5jdGlvbihlLGEpe2lmKHRoaXMuZXhwYW5kRGF0YT09PXRydWUpe3ZhciBkPVtdLGI9MCxjPWUubGVuZ3RoO2Zvcig7YjxjO2IrKyl7ZFtkLmxlbmd0aF09W2VbYl1dfWU9ZH10aGlzLmNhbGxQYXJlbnQoW2UsYV0pfX0sZnVuY3Rpb24oKXtFeHQuZGF0YS5TaW1wbGVTdG9yZT1FeHQuZGF0YS5BcnJheVN0b3JlfSk7RXh0LmRlZmluZSgiRXh0LmRhdGEuQmF0Y2giLHttaXhpbnM6e29ic2VydmFibGU6IkV4dC51dGlsLk9ic2VydmFibGUifSxhdXRvU3RhcnQ6ZmFsc2UscGF1c2VPbkV4Y2VwdGlvbjpmYWxzZSxjdXJyZW50Oi0xLHRvdGFsOjAsaXNSdW5uaW5nOmZhbHNlLGlzQ29tcGxldGU6ZmFsc2UsaGFzRXhjZXB0aW9uOmZhbHNlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5taXhpbnMub2JzZXJ2YWJsZS5jb25zdHJ1Y3Rvci5jYWxsKGIsYSk7Yi5vcGVyYXRpb25zPVtdO2IuZXhjZXB0aW9ucz1bXX0sYWRkOmZ1bmN0aW9uKGEpe3RoaXMudG90YWwrKzthLnNldEJhdGNoKHRoaXMpO3RoaXMub3BlcmF0aW9ucy5wdXNoKGEpO3JldHVybiB0aGlzfSxzdGFydDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGIuaXNSdW5uaW5nKXtyZXR1cm4gYn1iLmV4Y2VwdGlvbnMubGVuZ3RoPTA7Yi5oYXNFeGNlcHRpb249ZmFsc2U7Yi5pc1J1bm5pbmc9dHJ1ZTtyZXR1cm4gYi5ydW5PcGVyYXRpb24oRXh0LmlzRGVmaW5lZChhKT9hOmIuY3VycmVudCsxKX0scmV0cnk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGFydCh0aGlzLmN1cnJlbnQpfSxydW5OZXh0T3BlcmF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnVuT3BlcmF0aW9uKHRoaXMuY3VycmVudCsxKX0scGF1c2U6ZnVuY3Rpb24oKXt0aGlzLmlzUnVubmluZz1mYWxzZTtyZXR1cm4gdGhpc30scnVuT3BlcmF0aW9uOmZ1bmN0aW9uKGQpe3ZhciBlPXRoaXMsYz1lLm9wZXJhdGlvbnMsYj1jW2RdLGE7aWYoYj09PXVuZGVmaW5lZCl7ZS5pc1J1bm5pbmc9ZmFsc2U7ZS5pc0NvbXBsZXRlPXRydWU7ZS5maXJlRXZlbnQoImNvbXBsZXRlIixlLGNbYy5sZW5ndGgtMV0pfWVsc2V7ZS5jdXJyZW50PWQ7YT1mdW5jdGlvbihnKXt2YXIgaD1nLmhhc0V4Y2VwdGlvbigpO2lmKGgpe2UuaGFzRXhjZXB0aW9uPXRydWU7ZS5leGNlcHRpb25zLnB1c2goZyk7ZS5maXJlRXZlbnQoImV4Y2VwdGlvbiIsZSxnKX1pZihoJiZlLnBhdXNlT25FeGNlcHRpb24pe2UucGF1c2UoKX1lbHNle2cuc2V0Q29tcGxldGVkKCk7ZS5maXJlRXZlbnQoIm9wZXJhdGlvbmNvbXBsZXRlIixlLGcpO2UucnVuTmV4dE9wZXJhdGlvbigpfX07Yi5zZXRTdGFydGVkKCk7ZS5wcm94eVtiLmFjdGlvbl0oYixhLGUpfXJldHVybiBlfX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLkJ1ZmZlclN0b3JlIix7ZXh0ZW5kOiJFeHQuZGF0YS5TdG9yZSIsYWxpYXM6InN0b3JlLmJ1ZmZlciIsc29ydE9uTG9hZDpmYWxzZSxmaWx0ZXJPbkxvYWQ6ZmFsc2UsY29uc3RydWN0b3I6ZnVuY3Rpb24oKXtFeHQuRXJyb3IucmFpc2UoIlRoZSBCdWZmZXJTdG9yZSBjbGFzcyBoYXMgYmVlbiBkZXByZWNhdGVkLiBJbnN0ZWFkLCBzcGVjaWZ5IHRoZSBidWZmZXJlZCBjb25maWcgb3B0aW9uIG9uIEV4dC5kYXRhLlN0b3JlIil9fSk7RXh0LmRlZmluZSgiRXh0LmRpcmVjdC5NYW5hZ2VyIix7c2luZ2xldG9uOnRydWUsbWl4aW5zOntvYnNlcnZhYmxlOiJFeHQudXRpbC5PYnNlcnZhYmxlIn0scmVxdWlyZXM6WyJFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24iXSxleGNlcHRpb25zOntUUkFOU1BPUlQ6InhociIsUEFSU0U6InBhcnNlIixMT0dJTjoibG9naW4iLFNFUlZFUjoiZXhjZXB0aW9uIn0sY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuYWRkRXZlbnRzKCJldmVudCIsImV4Y2VwdGlvbiIpO2EudHJhbnNhY3Rpb25zPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oKTthLnByb3ZpZGVycz1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKCk7YS5taXhpbnMub2JzZXJ2YWJsZS5jb25zdHJ1Y3Rvci5jYWxsKGEpfSxhZGRQcm92aWRlcjpmdW5jdGlvbihlKXt2YXIgZD10aGlzLGI9YXJndW1lbnRzLGM9MCxhO2lmKGIubGVuZ3RoPjEpe2ZvcihhPWIubGVuZ3RoO2M8YTsrK2Mpe2QuYWRkUHJvdmlkZXIoYltjXSl9cmV0dXJufWlmKCFlLmlzUHJvdmlkZXIpe2U9RXh0LmNyZWF0ZSgiZGlyZWN0LiIrZS50eXBlKyJwcm92aWRlciIsZSl9ZC5wcm92aWRlcnMuYWRkKGUpO2Uub24oImRhdGEiLGQub25Qcm92aWRlckRhdGEsZCk7aWYoIWUuaXNDb25uZWN0ZWQoKSl7ZS5jb25uZWN0KCl9cmV0dXJuIGV9LGdldFByb3ZpZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBhLmlzUHJvdmlkZXI/YTp0aGlzLnByb3ZpZGVycy5nZXQoYSl9LHJlbW92ZVByb3ZpZGVyOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLnByb3ZpZGVycztjPWMuaXNQcm92aWRlcj9jOmEuZ2V0KGMpO2lmKGMpe2MudW4oImRhdGEiLGIub25Qcm92aWRlckRhdGEsYik7YS5yZW1vdmUoYyk7cmV0dXJuIGN9cmV0dXJuIG51bGx9LGFkZFRyYW5zYWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMudHJhbnNhY3Rpb25zLmFkZChhKTtyZXR1cm4gYX0scmVtb3ZlVHJhbnNhY3Rpb246ZnVuY3Rpb24oYSl7YT10aGlzLmdldFRyYW5zYWN0aW9uKGEpO3RoaXMudHJhbnNhY3Rpb25zLnJlbW92ZShhKTtyZXR1cm4gYX0sZ2V0VHJhbnNhY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5pc09iamVjdChhKT9hOnRoaXMudHJhbnNhY3Rpb25zLmdldChhKX0sb25Qcm92aWRlckRhdGE6ZnVuY3Rpb24oZSxkKXt2YXIgYz10aGlzLGI9MCxhO2lmKEV4dC5pc0FycmF5KGQpKXtmb3IoYT1kLmxlbmd0aDtiPGE7KytiKXtjLm9uUHJvdmlkZXJEYXRhKGUsZFtiXSl9cmV0dXJufWlmKGQubmFtZSYmZC5uYW1lIT0iZXZlbnQiJiZkLm5hbWUhPSJleGNlcHRpb24iKXtjLmZpcmVFdmVudChkLm5hbWUsZCl9ZWxzZXtpZihkLnN0YXR1cz09PWZhbHNlKXtjLmZpcmVFdmVudCgiZXhjZXB0aW9uIixkKX19Yy5maXJlRXZlbnQoImV2ZW50IixkLGUpfSxwYXJzZU1ldGhvZDpmdW5jdGlvbihjKXtpZihFeHQuaXNTdHJpbmcoYykpe3ZhciBlPWMuc3BsaXQoIi4iKSxiPTAsYT1lLmxlbmd0aCxkPXdpbmRvdzt3aGlsZShkJiZiPGEpe2Q9ZFtlW2JdXTsrK2J9Yz1FeHQuaXNGdW5jdGlvbihkKT9kOm51bGx9cmV0dXJuIGN8fG51bGx9fSxmdW5jdGlvbigpe0V4dC5EaXJlY3Q9RXh0LmRpcmVjdC5NYW5hZ2VyfSk7RXh0LmRlZmluZSgiRXh0LmRhdGEucHJveHkuRGlyZWN0Iix7ZXh0ZW5kOiJFeHQuZGF0YS5wcm94eS5TZXJ2ZXIiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmRhdGEuRGlyZWN0UHJveHkiLGFsaWFzOiJwcm94eS5kaXJlY3QiLHJlcXVpcmVzOlsiRXh0LmRpcmVjdC5NYW5hZ2VyIl0scGFyYW1PcmRlcjp1bmRlZmluZWQscGFyYW1zQXNIYXNoOnRydWUsZGlyZWN0Rm46dW5kZWZpbmVkLHBhcmFtT3JkZXJSZTovW1xzLHxdLyxjb25zdHJ1Y3RvcjpmdW5jdGlvbihiKXt2YXIgZT10aGlzLGEsZCxjO2UuY2FsbFBhcmVudChhcmd1bWVudHMpO2E9ZS5wYXJhbU9yZGVyO2lmKEV4dC5pc1N0cmluZyhhKSl7ZS5wYXJhbU9yZGVyPWEuc3BsaXQoZS5wYXJhbU9yZGVyUmUpfWQ9ZS5kaXJlY3RGbjtpZihkKXtlLmRpcmVjdEZuPUV4dC5kaXJlY3QuTWFuYWdlci5wYXJzZU1ldGhvZChkKX1jPWUuYXBpO2ZvcihkIGluIGMpe2lmKGMuaGFzT3duUHJvcGVydHkoZCkpe2NbZF09RXh0LmRpcmVjdC5NYW5hZ2VyLnBhcnNlTWV0aG9kKGNbZF0pfX19LGRvUmVxdWVzdDpmdW5jdGlvbihkLGosayl7dmFyIGg9dGhpcyxiPWguZ2V0V3JpdGVyKCksZT1oLmJ1aWxkUmVxdWVzdChkLGosayksaT1oLmFwaVtlLmFjdGlvbl18fGguZGlyZWN0Rm4sYz1lLnBhcmFtcyxnPVtdLGE7aWYoZC5hbGxvd1dyaXRlKCkpe2U9Yi53cml0ZShlKX1pZihkLmFjdGlvbj09InJlYWQiKXthPWkuZGlyZWN0Q2ZnLm1ldGhvZDtnPWEuZ2V0QXJncyhjLGgucGFyYW1PcmRlcixoLnBhcmFtc0FzSGFzaCl9ZWxzZXtnLnB1c2goZS5qc29uRGF0YSl9RXh0LmFwcGx5KGUse2FyZ3M6ZyxkaXJlY3RGbjppfSk7Zy5wdXNoKGguY3JlYXRlUmVxdWVzdENhbGxiYWNrKGUsZCxqLGspLGgpO2kuYXBwbHkod2luZG93LGcpfSxhcHBseUVuY29kaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxjcmVhdGVSZXF1ZXN0Q2FsbGJhY2s6ZnVuY3Rpb24oZCxhLGUsYil7dmFyIGM9dGhpcztyZXR1cm4gZnVuY3Rpb24oaCxnKXtjLnByb2Nlc3NSZXNwb25zZShnLnN0YXR1cyxhLGQsZyxlLGIpfX0sZXh0cmFjdFJlc3BvbnNlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LmlzRGVmaW5lZChhLnJlc3VsdCk/YS5yZXN1bHQ6YS5kYXRhfSxzZXRFeGNlcHRpb246ZnVuY3Rpb24oYixhKXtiLnNldEV4Y2VwdGlvbihhLm1lc3NhZ2UpfSxidWlsZFVybDpmdW5jdGlvbigpe3JldHVybiIifX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLkRpcmVjdFN0b3JlIix7ZXh0ZW5kOiJFeHQuZGF0YS5TdG9yZSIsYWxpYXM6InN0b3JlLmRpcmVjdCIscmVxdWlyZXM6WyJFeHQuZGF0YS5wcm94eS5EaXJlY3QiXSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXthPUV4dC5hcHBseSh7fSxhKTtpZighYS5wcm94eSl7dmFyIGI9e3R5cGU6ImRpcmVjdCIscmVhZGVyOnt0eXBlOiJqc29uIn19O0V4dC5jb3B5VG8oYixhLCJwYXJhbU9yZGVyLHBhcmFtc0FzSGFzaCxkaXJlY3RGbixhcGksc2ltcGxlU29ydE1vZGUiKTtFeHQuY29weVRvKGIucmVhZGVyLGEsInRvdGFsUHJvcGVydHkscm9vdCxpZFByb3BlcnR5Iik7YS5wcm94eT1ifXRoaXMuY2FsbFBhcmVudChbYV0pfX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLkpzb25QIix7c2luZ2xldG9uOnRydWUscmVxdWVzdENvdW50OjAscmVxdWVzdHM6e30sdGltZW91dDozMDAwMCxkaXNhYmxlQ2FjaGluZzp0cnVlLGRpc2FibGVDYWNoaW5nUGFyYW06Il9kYyIsY2FsbGJhY2tLZXk6ImNhbGxiYWNrIixyZXF1ZXN0OmZ1bmN0aW9uKG4pe249RXh0LmFwcGx5KHt9LG4pO3ZhciBqPXRoaXMsZD1FeHQuaXNEZWZpbmVkKG4uZGlzYWJsZUNhY2hpbmcpP24uZGlzYWJsZUNhY2hpbmc6ai5kaXNhYmxlQ2FjaGluZyxoPW4uZGlzYWJsZUNhY2hpbmdQYXJhbXx8ai5kaXNhYmxlQ2FjaGluZ1BhcmFtLGM9KytqLnJlcXVlc3RDb3VudCxsPW4uY2FsbGJhY2tOYW1lfHwiY2FsbGJhY2siK2MsaT1uLmNhbGxiYWNrS2V5fHxqLmNhbGxiYWNrS2V5LG09RXh0LmlzRGVmaW5lZChuLnRpbWVvdXQpP24udGltZW91dDpqLnRpbWVvdXQsZT1FeHQuYXBwbHkoe30sbi5wYXJhbXMpLGI9bi51cmwsYT1FeHQubmFtZSxnLGs7ZVtpXT1hKyIuZGF0YS5Kc29uUC4iK2w7aWYoZCl7ZVtoXT1uZXcgRGF0ZSgpLmdldFRpbWUoKX1rPWouY3JlYXRlU2NyaXB0KGIsZSxuKTtqLnJlcXVlc3RzW2NdPWc9e3VybDpiLHBhcmFtczplLHNjcmlwdDprLGlkOmMsc2NvcGU6bi5zY29wZSxzdWNjZXNzOm4uc3VjY2VzcyxmYWlsdXJlOm4uZmFpbHVyZSxjYWxsYmFjazpuLmNhbGxiYWNrLGNhbGxiYWNrS2V5OmksY2FsbGJhY2tOYW1lOmx9O2lmKG0+MCl7Zy50aW1lb3V0PXNldFRpbWVvdXQoRXh0LmJpbmQoai5oYW5kbGVUaW1lb3V0LGosW2ddKSxtKX1qLnNldHVwRXJyb3JIYW5kbGluZyhnKTtqW2xdPUV4dC5iaW5kKGouaGFuZGxlUmVzcG9uc2UsaixbZ10sdHJ1ZSk7ai5sb2FkU2NyaXB0KGcpO3JldHVybiBnfSxhYm9ydDpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGQ9Yi5yZXF1ZXN0cyxhO2lmKGMpe2lmKCFjLmlkKXtjPWRbY119Yi5oYW5kbGVBYm9ydChjKX1lbHNle2ZvcihhIGluIGQpe2lmKGQuaGFzT3duUHJvcGVydHkoYSkpe2IuYWJvcnQoZFthXSl9fX19LHNldHVwRXJyb3JIYW5kbGluZzpmdW5jdGlvbihhKXthLnNjcmlwdC5vbmVycm9yPUV4dC5iaW5kKHRoaXMuaGFuZGxlRXJyb3IsdGhpcyxbYV0pfSxoYW5kbGVBYm9ydDpmdW5jdGlvbihhKXthLmVycm9yVHlwZT0iYWJvcnQiO3RoaXMuaGFuZGxlUmVzcG9uc2UobnVsbCxhKX0saGFuZGxlRXJyb3I6ZnVuY3Rpb24oYSl7YS5lcnJvclR5cGU9ImVycm9yIjt0aGlzLmhhbmRsZVJlc3BvbnNlKG51bGwsYSl9LGNsZWFudXBFcnJvckhhbmRsaW5nOmZ1bmN0aW9uKGEpe2Euc2NyaXB0Lm9uZXJyb3I9bnVsbH0saGFuZGxlVGltZW91dDpmdW5jdGlvbihhKXthLmVycm9yVHlwZT0idGltZW91dCI7dGhpcy5oYW5kbGVSZXNwb25zZShudWxsLGEpfSxoYW5kbGVSZXNwb25zZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRydWU7aWYoYi50aW1lb3V0KXtjbGVhclRpbWVvdXQoYi50aW1lb3V0KX1kZWxldGUgdGhpc1tiLmNhbGxiYWNrTmFtZV07ZGVsZXRlIHRoaXMucmVxdWVzdHNbYi5pZF07dGhpcy5jbGVhbnVwRXJyb3JIYW5kbGluZyhiKTtFeHQuZmx5KGIuc2NyaXB0KS5yZW1vdmUoKTtpZihiLmVycm9yVHlwZSl7Yz1mYWxzZTtFeHQuY2FsbGJhY2soYi5mYWlsdXJlLGIuc2NvcGUsW2IuZXJyb3JUeXBlXSl9ZWxzZXtFeHQuY2FsbGJhY2soYi5zdWNjZXNzLGIuc2NvcGUsW2FdKX1FeHQuY2FsbGJhY2soYi5jYWxsYmFjayxiLnNjb3BlLFtjLGEsYi5lcnJvclR5cGVdKX0sY3JlYXRlU2NyaXB0OmZ1bmN0aW9uKGMsZCxiKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTthLnNldEF0dHJpYnV0ZSgic3JjIixFeHQudXJsQXBwZW5kKGMsRXh0Lk9iamVjdC50b1F1ZXJ5U3RyaW5nKGQpKSk7YS5zZXRBdHRyaWJ1dGUoImFzeW5jIix0cnVlKTthLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvamF2YXNjcmlwdCIpO3JldHVybiBhfSxsb2FkU2NyaXB0OmZ1bmN0aW9uKGEpe0V4dC5nZXRIZWFkKCkuYXBwZW5kQ2hpbGQoYS5zY3JpcHQpfX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLnByb3h5Lkpzb25QIix7ZXh0ZW5kOiJFeHQuZGF0YS5wcm94eS5TZXJ2ZXIiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmRhdGEuU2NyaXB0VGFnUHJveHkiLGFsaWFzOlsicHJveHkuanNvbnAiLCJwcm94eS5zY3JpcHR0YWciXSxyZXF1aXJlczpbIkV4dC5kYXRhLkpzb25QIl0sZGVmYXVsdFdyaXRlclR5cGU6ImJhc2UiLGNhbGxiYWNrS2V5OiJjYWxsYmFjayIscmVjb3JkUGFyYW06InJlY29yZHMiLGF1dG9BcHBlbmRQYXJhbXM6dHJ1ZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3RoaXMuYWRkRXZlbnRzKCJleGNlcHRpb24iKTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sZG9SZXF1ZXN0OmZ1bmN0aW9uKGEsaCxiKXt2YXIgZD10aGlzLGU9ZC5nZXRXcml0ZXIoKSxjPWQuYnVpbGRSZXF1ZXN0KGEpLGc9Yy5wYXJhbXM7aWYoYS5hbGxvd1dyaXRlKCkpe2M9ZS53cml0ZShjKX1FeHQuYXBwbHkoYyx7Y2FsbGJhY2tLZXk6ZC5jYWxsYmFja0tleSx0aW1lb3V0OmQudGltZW91dCxzY29wZTpkLGRpc2FibGVDYWNoaW5nOmZhbHNlLGNhbGxiYWNrOmQuY3JlYXRlUmVxdWVzdENhbGxiYWNrKGMsYSxoLGIpfSk7aWYoZC5hdXRvQXBwZW5kUGFyYW1zKXtjLnBhcmFtcz17fX1jLmpzb25wPUV4dC5kYXRhLkpzb25QLnJlcXVlc3QoYyk7Yy5wYXJhbXM9ZzthLnNldFN0YXJ0ZWQoKTtkLmxhc3RSZXF1ZXN0PWM7cmV0dXJuIGN9LGNyZWF0ZVJlcXVlc3RDYWxsYmFjazpmdW5jdGlvbihkLGEsZSxiKXt2YXIgYz10aGlzO3JldHVybiBmdW5jdGlvbihpLGcsaCl7ZGVsZXRlIGMubGFzdFJlcXVlc3Q7Yy5wcm9jZXNzUmVzcG9uc2UoaSxhLGQsZyxlLGIpfX0sc2V0RXhjZXB0aW9uOmZ1bmN0aW9uKGIsYSl7Yi5zZXRFeGNlcHRpb24oYi5yZXF1ZXN0Lmpzb25wLmVycm9yVHlwZSl9LGJ1aWxkVXJsOmZ1bmN0aW9uKGgpe3ZhciBnPXRoaXMsYj1nLmNhbGxQYXJlbnQoYXJndW1lbnRzKSxqPUV4dC5hcHBseSh7fSxoLnBhcmFtcyksZT1qLmZpbHRlcnMsYSxkLGM7ZGVsZXRlIGouZmlsdGVycztpZihnLmF1dG9BcHBlbmRQYXJhbXMpe2I9RXh0LnVybEFwcGVuZChiLEV4dC5PYmplY3QudG9RdWVyeVN0cmluZyhqKSl9aWYoZSYmZS5sZW5ndGgpe2ZvcihjPTA7YzxlLmxlbmd0aDtjKyspe2Q9ZVtjXTtpZihkLnZhbHVlKXtiPUV4dC51cmxBcHBlbmQoYixkLnByb3BlcnR5KyI9IitkLnZhbHVlKX19fWE9aC5yZWNvcmRzO2lmKEV4dC5pc0FycmF5KGEpJiZhLmxlbmd0aD4wKXtiPUV4dC51cmxBcHBlbmQoYixFeHQuU3RyaW5nLmZvcm1hdCgiezB9PXsxfSIsZy5yZWNvcmRQYXJhbSxnLmVuY29kZVJlY29yZHMoYSkpKX1yZXR1cm4gYn0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYWJvcnQoKTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sYWJvcnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxhc3RSZXF1ZXN0O2lmKGEpe0V4dC5kYXRhLkpzb25QLmFib3J0KGEuanNvbnApfX0sZW5jb2RlUmVjb3JkczpmdW5jdGlvbihiKXt2YXIgZD0iIixjPTAsYT1iLmxlbmd0aDtmb3IoO2M8YTtjKyspe2QrPUV4dC5PYmplY3QudG9RdWVyeVN0cmluZyhiW2NdLmdldERhdGEoKSl9cmV0dXJuIGR9fSk7RXh0LmRlZmluZSgiRXh0LmRhdGEuSnNvblBTdG9yZSIse2V4dGVuZDoiRXh0LmRhdGEuU3RvcmUiLGFsaWFzOiJzdG9yZS5qc29ucCIscmVxdWlyZXM6WyJFeHQuZGF0YS5wcm94eS5Kc29uUCIsIkV4dC5kYXRhLnJlYWRlci5Kc29uIl0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7YT1FeHQuYXBwbHkoe3Byb3h5Ont0eXBlOiJqc29ucCIscmVhZGVyOiJqc29uIn19LGEpO3RoaXMuY2FsbFBhcmVudChbYV0pfX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLkpzb25TdG9yZSIse2V4dGVuZDoiRXh0LmRhdGEuU3RvcmUiLGFsaWFzOiJzdG9yZS5qc29uIixyZXF1aXJlczpbIkV4dC5kYXRhLnByb3h5LkFqYXgiLCJFeHQuZGF0YS5yZWFkZXIuSnNvbiIsIkV4dC5kYXRhLndyaXRlci5Kc29uIl0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7YT1FeHQuYXBwbHkoe3Byb3h5Ont0eXBlOiJhamF4IixyZWFkZXI6Impzb24iLHdyaXRlcjoianNvbiJ9fSxhKTt0aGlzLmNhbGxQYXJlbnQoW2FdKX19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5Ob2RlSW50ZXJmYWNlIix7cmVxdWlyZXM6WyJFeHQuZGF0YS5GaWVsZCJdLHN0YXRpY3M6e2RlY29yYXRlOmZ1bmN0aW9uKGIpe3ZhciBhLGM7aWYodHlwZW9mIGI9PSJzdHJpbmciKXtiPUV4dC5Nb2RlbE1hbmFnZXIuZ2V0TW9kZWwoYil9ZWxzZXtpZihiLmlzTW9kZWwpe2I9RXh0Lk1vZGVsTWFuYWdlci5nZXRNb2RlbChiLm1vZGVsTmFtZSl9fWlmKGIucHJvdG90eXBlLmlzTm9kZSl7cmV0dXJufWE9Yi5wcm90b3R5cGUuaWRQcm9wZXJ0eTtpZEZpZWxkPWIucHJvdG90eXBlLmZpZWxkcy5nZXQoYSk7Yz1iLnByb3RvdHlwZS5maWVsZHMuZ2V0KGEpLnR5cGUudHlwZTtiLm92ZXJyaWRlKHRoaXMuZ2V0UHJvdG90eXBlQm9keSgpKTt0aGlzLmFwcGx5RmllbGRzKGIsW3tuYW1lOiJwYXJlbnRJZCIsdHlwZTpjLGRlZmF1bHRWYWx1ZTpudWxsLHVzZU51bGw6aWRGaWVsZC51c2VOdWxsfSx7bmFtZToiaW5kZXgiLHR5cGU6ImludCIsZGVmYXVsdFZhbHVlOm51bGwscGVyc2lzdDpmYWxzZX0se25hbWU6ImRlcHRoIix0eXBlOiJpbnQiLGRlZmF1bHRWYWx1ZTowLHBlcnNpc3Q6ZmFsc2V9LHtuYW1lOiJleHBhbmRlZCIsdHlwZToiYm9vbCIsZGVmYXVsdFZhbHVlOmZhbHNlLHBlcnNpc3Q6ZmFsc2V9LHtuYW1lOiJleHBhbmRhYmxlIix0eXBlOiJib29sIixkZWZhdWx0VmFsdWU6dHJ1ZSxwZXJzaXN0OmZhbHNlfSx7bmFtZToiY2hlY2tlZCIsdHlwZToiYXV0byIsZGVmYXVsdFZhbHVlOm51bGwscGVyc2lzdDpmYWxzZX0se25hbWU6ImxlYWYiLHR5cGU6ImJvb2wiLGRlZmF1bHRWYWx1ZTpmYWxzZX0se25hbWU6ImNscyIsdHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6bnVsbCxwZXJzaXN0OmZhbHNlfSx7bmFtZToiaWNvbkNscyIsdHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6bnVsbCxwZXJzaXN0OmZhbHNlfSx7bmFtZToiaWNvbiIsdHlwZToic3RyaW5nIixkZWZhdWx0VmFsdWU6bnVsbCxwZXJzaXN0OmZhbHNlfSx7bmFtZToicm9vdCIsdHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlLHBlcnNpc3Q6ZmFsc2V9LHtuYW1lOiJpc0xhc3QiLHR5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZSxwZXJzaXN0OmZhbHNlfSx7bmFtZToiaXNGaXJzdCIsdHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlLHBlcnNpc3Q6ZmFsc2V9LHtuYW1lOiJhbGxvd0Ryb3AiLHR5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTp0cnVlLHBlcnNpc3Q6ZmFsc2V9LHtuYW1lOiJhbGxvd0RyYWciLHR5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTp0cnVlLHBlcnNpc3Q6ZmFsc2V9LHtuYW1lOiJsb2FkZWQiLHR5cGU6ImJvb2xlYW4iLGRlZmF1bHRWYWx1ZTpmYWxzZSxwZXJzaXN0OmZhbHNlfSx7bmFtZToibG9hZGluZyIsdHlwZToiYm9vbGVhbiIsZGVmYXVsdFZhbHVlOmZhbHNlLHBlcnNpc3Q6ZmFsc2V9LHtuYW1lOiJocmVmIix0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZTpudWxsLHBlcnNpc3Q6ZmFsc2V9LHtuYW1lOiJocmVmVGFyZ2V0Iix0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZTpudWxsLHBlcnNpc3Q6ZmFsc2V9LHtuYW1lOiJxdGlwIix0eXBlOiJzdHJpbmciLGRlZmF1bHRWYWx1ZTpudWxsLHBlcnNpc3Q6ZmFsc2V9LHtuYW1lOiJxdGl0bGUiLHR5cGU6InN0cmluZyIsZGVmYXVsdFZhbHVlOm51bGwscGVyc2lzdDpmYWxzZX0se25hbWU6ImNoaWxkcmVuIix0eXBlOiJhdXRvIixkZWZhdWx0VmFsdWU6bnVsbCxwZXJzaXN0OmZhbHNlfV0pfSxhcHBseUZpZWxkczpmdW5jdGlvbihjLGIpe3ZhciBoPWMucHJvdG90eXBlLGE9aC5maWVsZHMsZz1hLmtleXMsZT1iLmxlbmd0aCxqLGQ7Zm9yKGQ9MDtkPGU7ZCsrKXtqPWJbZF07aWYoIUV4dC5BcnJheS5jb250YWlucyhnLGoubmFtZSkpe2EuYWRkKG5ldyBFeHQuZGF0YS5GaWVsZChqKSl9fX0sZ2V0UHJvdG90eXBlQm9keTpmdW5jdGlvbigpe3JldHVybntpc05vZGU6dHJ1ZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7RXh0LmFwcGx5SWYoYSx7Zmlyc3RDaGlsZDpudWxsLGxhc3RDaGlsZDpudWxsLHBhcmVudE5vZGU6bnVsbCxwcmV2aW91c1NpYmxpbmc6bnVsbCxuZXh0U2libGluZzpudWxsLGNoaWxkTm9kZXM6W119KTthLmVuYWJsZUJ1YmJsZShbImFwcGVuZCIsInJlbW92ZSIsIm1vdmUiLCJpbnNlcnQiLCJiZWZvcmVhcHBlbmQiLCJiZWZvcmVyZW1vdmUiLCJiZWZvcmVtb3ZlIiwiYmVmb3JlaW5zZXJ0IiwiZXhwYW5kIiwiY29sbGFwc2UiLCJiZWZvcmVleHBhbmQiLCJiZWZvcmVjb2xsYXBzZSIsInNvcnQiXSk7cmV0dXJuIGF9LGNyZWF0ZU5vZGU6ZnVuY3Rpb24oYSl7aWYoRXh0LmlzT2JqZWN0KGEpJiYhYS5pc01vZGVsKXthPUV4dC5Nb2RlbE1hbmFnZXIuY3JlYXRlKGEsdGhpcy5tb2RlbE5hbWUpfWlmKCFhLmNoaWxkTm9kZXMpe0V4dC5hcHBseUlmKGEse2ZpcnN0Q2hpbGQ6bnVsbCxsYXN0Q2hpbGQ6bnVsbCxwYXJlbnROb2RlOm51bGwscHJldmlvdXNTaWJsaW5nOm51bGwsbmV4dFNpYmxpbmc6bnVsbCxjaGlsZE5vZGVzOltdfSl9cmV0dXJuIGF9LGlzTGVhZjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgibGVhZiIpPT09dHJ1ZX0sc2V0Rmlyc3RDaGlsZDpmdW5jdGlvbihhKXt0aGlzLmZpcnN0Q2hpbGQ9YX0sc2V0TGFzdENoaWxkOmZ1bmN0aW9uKGEpe3RoaXMubGFzdENoaWxkPWF9LHVwZGF0ZUluZm86ZnVuY3Rpb24oZyl7dmFyIG09dGhpcyxiPW0uaXNSb290KCksaz1tLnBhcmVudE5vZGUsZD0oIWt8fGI/dHJ1ZTprLmZpcnN0Q2hpbGQ9PT1tKSxqPSgha3x8Yj90cnVlOmsubGFzdENoaWxkPT09bSksaD0wLG49bSxhPW0uY2hpbGROb2RlcyxsPWEubGVuZ3RoLGU9MCxjPW0ucGhhbnRvbTt3aGlsZShuLnBhcmVudE5vZGUpeysraDtuPW4ucGFyZW50Tm9kZX1tLmJlZ2luRWRpdCgpO20uc2V0KHtpc0ZpcnN0OmQsaXNMYXN0OmosZGVwdGg6aCxpbmRleDprP2suaW5kZXhPZihtKTowLHBhcmVudElkOms/ay5nZXRJZCgpOm51bGx9KTttLmVuZEVkaXQodHJ1ZSk7aWYoZyl7bS5jb21taXQoKTttLnBoYW50b209Y31mb3IoZT0wO2U8bDtlKyspe2FbZV0udXBkYXRlSW5mbyhnKX19LGlzTGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgiaXNMYXN0Iil9LGlzRmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoImlzRmlyc3QiKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiAhdGhpcy5pc0xlYWYoKSYmdGhpcy5jaGlsZE5vZGVzLmxlbmd0aD4wfSxpc0V4cGFuZGFibGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuZ2V0KCJleHBhbmRhYmxlIikpe3JldHVybiAhKGEuaXNMZWFmKCl8fChhLmlzTG9hZGVkKCkmJiFhLmhhc0NoaWxkTm9kZXMoKSkpfXJldHVybiBmYWxzZX0sdHJpZ2dlclVJVXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5hZnRlckVkaXQoW10pfSxhcHBlbmRDaGlsZDpmdW5jdGlvbihiLGssYyl7dmFyIGg9dGhpcyxkLGcsZSxqLGE7aWYoRXh0LmlzQXJyYXkoYikpe2guY2FsbFN0b3JlKCJzdXNwZW5kQXV0b1N5bmMiKTtmb3IoZD0wLGc9Yi5sZW5ndGgtMTtkPGc7ZCsrKXtoLmFwcGVuZENoaWxkKGJbZF0pfWguY2FsbFN0b3JlKCJyZXN1bWVBdXRvU3luYyIpO2guYXBwZW5kQ2hpbGQoYltnXSl9ZWxzZXtiPWguY3JlYXRlTm9kZShiKTtpZihrIT09dHJ1ZSYmKCFoLmhhc0xpc3RlbmVycy5iZWZvcmVhcHBlbmR8fGguZmlyZUV2ZW50KCJiZWZvcmVhcHBlbmQiLGgsYik9PT1mYWxzZSkpe3JldHVybiBmYWxzZX1lPWguY2hpbGROb2Rlcy5sZW5ndGg7aj1iLnBhcmVudE5vZGU7aWYoail7aWYoayE9PXRydWUmJighaC5oYXNMaXN0ZW5lcnMuYmVmb3JlcmVtb3ZlfHxiLmZpcmVFdmVudCgiYmVmb3JlbW92ZSIsYixqLGgsZSk9PT1mYWxzZSkpe3JldHVybiBmYWxzZX1qLnJlbW92ZUNoaWxkKGIsZmFsc2UsZmFsc2UsdHJ1ZSl9ZT1oLmNoaWxkTm9kZXMubGVuZ3RoO2lmKGU9PT0wKXtoLnNldEZpcnN0Q2hpbGQoYil9aC5jaGlsZE5vZGVzLnB1c2goYik7Yi5wYXJlbnROb2RlPWg7Yi5uZXh0U2libGluZz1udWxsO2guc2V0TGFzdENoaWxkKGIpO2E9aC5jaGlsZE5vZGVzW2UtMV07aWYoYSl7Yi5wcmV2aW91c1NpYmxpbmc9YTthLm5leHRTaWJsaW5nPWI7YS51cGRhdGVJbmZvKGMpfWVsc2V7Yi5wcmV2aW91c1NpYmxpbmc9bnVsbH1iLnVwZGF0ZUluZm8oYyk7aWYoIWguaXNMb2FkZWQoKSl7aC5zZXQoImxvYWRlZCIsdHJ1ZSl9ZWxzZXtpZihoLmNoaWxkTm9kZXMubGVuZ3RoPT09MSl7aC50cmlnZ2VyVUlVcGRhdGUoKX19aWYoIWIuaXNMZWFmKCkmJmIucGhhbnRvbSl7Yi5zZXQoImxvYWRlZCIsdHJ1ZSl9aWYoayE9PXRydWUpe2guZmlyZUV2ZW50KCJhcHBlbmQiLGgsYixlKTtpZihqKXtiLmZpcmVFdmVudCgibW92ZSIsYixqLGgsZSl9fXJldHVybiBifX0sZ2V0QnViYmxlVGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50Tm9kZX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oaixlLGcsYil7dmFyIGg9dGhpcyxjPWguaW5kZXhPZihqKSxkLGE7aWYoYz09LTF8fChnIT09dHJ1ZSYmKCFoLmhhc0xpc3RlbmVycy5iZWZvcmVyZW1vdmV8fGguZmlyZUV2ZW50KCJiZWZvcmVyZW1vdmUiLGgsaiwhIWIpPT09ZmFsc2UpKSl7cmV0dXJuIGZhbHNlfUV4dC5BcnJheS5lcmFzZShoLmNoaWxkTm9kZXMsYywxKTtpZihoLmZpcnN0Q2hpbGQ9PWope2guc2V0Rmlyc3RDaGlsZChqLm5leHRTaWJsaW5nKX1pZihoLmxhc3RDaGlsZD09ail7aC5zZXRMYXN0Q2hpbGQoai5wcmV2aW91c1NpYmxpbmcpfWlmKGoucHJldmlvdXNTaWJsaW5nKXtqLnByZXZpb3VzU2libGluZy5uZXh0U2libGluZz1qLm5leHRTaWJsaW5nfWlmKGoubmV4dFNpYmxpbmcpe2oubmV4dFNpYmxpbmcucHJldmlvdXNTaWJsaW5nPWoucHJldmlvdXNTaWJsaW5nfWZvcihkPWM+MD9jLTE6MCxhPWguY2hpbGROb2Rlcy5sZW5ndGg7ZDxhO2QrKyl7aC5jaGlsZE5vZGVzW2RdLnVwZGF0ZUluZm8oKX1pZighaC5jaGlsZE5vZGVzLmxlbmd0aCl7aC50cmlnZ2VyVUlVcGRhdGUoKX1pZihnIT09dHJ1ZSl7aWYoaC5oYXNMaXN0ZW5lcnMucmVtb3ZlKXtoLmZpcmVFdmVudCgicmVtb3ZlIixoLGosISFiKX19aWYoZSl7ai5kZXN0cm95KHRydWUpfWVsc2V7ai5jbGVhcigpfXJldHVybiBqfSxjb3B5OmZ1bmN0aW9uKGQsYyl7dmFyIGc9dGhpcyxiPWcuY2FsbE92ZXJyaWRkZW4oYXJndW1lbnRzKSxhPWcuY2hpbGROb2Rlcz9nLmNoaWxkTm9kZXMubGVuZ3RoOjAsZTtpZihjKXtmb3IoZT0wO2U8YTtlKyspe2IuYXBwZW5kQ2hpbGQoZy5jaGlsZE5vZGVzW2VdLmNvcHkodHJ1ZSkpfX1yZXR1cm4gYn0sY2xlYXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLnBhcmVudE5vZGU9Yi5wcmV2aW91c1NpYmxpbmc9Yi5uZXh0U2libGluZz1udWxsO2lmKGEpe2IuZmlyc3RDaGlsZD1iLmxhc3RDaGlsZD1udWxsfX0sZGVzdHJveTpmdW5jdGlvbihiKXt2YXIgZD10aGlzLGM9ZC5kZXN0cm95T3B0aW9ucyxhPWQuY2hpbGROb2RlcyxlPWEubGVuZ3RoLGc7aWYoYj09PXRydWUpe2QuY2xlYXIodHJ1ZSk7Zm9yKGc9MDtnPGU7ZysrKXthW2ddLmRlc3Ryb3kodHJ1ZSl9ZC5jaGlsZE5vZGVzPW51bGw7ZGVsZXRlIGQuZGVzdHJveU9wdGlvbnM7ZC5jYWxsT3ZlcnJpZGRlbihbY10pfWVsc2V7ZC5kZXN0cm95T3B0aW9ucz1iO2QucmVtb3ZlKHRydWUpfX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGIsZyxsKXt2YXIgaD10aGlzLGU9aC5pbmRleE9mKGcpLGo9Yi5wYXJlbnROb2RlLGs9ZSxjLGEsZDtpZighZyl7cmV0dXJuIGguYXBwZW5kQ2hpbGQoYil9aWYoYj09Zyl7cmV0dXJuIGZhbHNlfWI9aC5jcmVhdGVOb2RlKGIpO2lmKGwhPT10cnVlJiYoIWguaGFzTGlzdGVuZXJzLmJlZm9yZWluc2VydHx8aC5maXJlRXZlbnQoImJlZm9yZWluc2VydCIsaCxiLGcpPT09ZmFsc2UpKXtyZXR1cm4gZmFsc2V9aWYoaj09aCYmaC5pbmRleE9mKGIpPGUpe2stLX1pZihqKXtpZihsIT09dHJ1ZSYmKCFoLmhhc0xpc3RlbmVycy5iZWZvcmVyZW1vdmV8fGIuZmlyZUV2ZW50KCJiZWZvcmVtb3ZlIixiLGosaCxlLGcpPT09ZmFsc2UpKXtyZXR1cm4gZmFsc2V9ai5yZW1vdmVDaGlsZChiLGZhbHNlLGZhbHNlLHRydWUpfWlmKGs9PT0wKXtoLnNldEZpcnN0Q2hpbGQoYil9RXh0LkFycmF5LnNwbGljZShoLmNoaWxkTm9kZXMsaywwLGIpO2IucGFyZW50Tm9kZT1oO2IubmV4dFNpYmxpbmc9ZztnLnByZXZpb3VzU2libGluZz1iO2E9aC5jaGlsZE5vZGVzW2stMV07aWYoYSl7Yi5wcmV2aW91c1NpYmxpbmc9YTthLm5leHRTaWJsaW5nPWJ9ZWxzZXtiLnByZXZpb3VzU2libGluZz1udWxsfWZvcihkPWs+MD9rLTE6MCxjPWguY2hpbGROb2Rlcy5sZW5ndGg7ZDxjO2QrKyl7aC5jaGlsZE5vZGVzW2RdLnVwZGF0ZUluZm8oKX1pZighaC5pc0xvYWRlZCgpKXtoLnNldCgibG9hZGVkIix0cnVlKX1lbHNle2lmKGguY2hpbGROb2Rlcy5sZW5ndGg9PT0xKXtoLnRyaWdnZXJVSVVwZGF0ZSgpfX1pZighYi5pc0xlYWYoKSYmYi5waGFudG9tKXtiLnNldCgibG9hZGVkIix0cnVlKX1pZihsIT09dHJ1ZSl7aWYoaC5oYXNMaXN0ZW5lcnMuaW5zZXJ0KXtoLmZpcmVFdmVudCgiaW5zZXJ0IixoLGIsZyl9aWYoaiYmaC5oYXNMaXN0ZW5lcnMubW92ZSl7Yi5maXJlRXZlbnQoIm1vdmUiLGIsaixoLGssZyl9fXJldHVybiBifSxpbnNlcnRDaGlsZDpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXMuY2hpbGROb2Rlc1thXTtpZihiKXtyZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUoYyxiKX1lbHNle3JldHVybiB0aGlzLmFwcGVuZENoaWxkKGMpfX0scmVtb3ZlOmZ1bmN0aW9uKGIsYyl7dmFyIGE9dGhpcy5wYXJlbnROb2RlO2lmKGEpe2EucmVtb3ZlQ2hpbGQodGhpcyxiLGMpfXJldHVybiB0aGlzfSxyZW1vdmVBbGw6ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLmNoaWxkTm9kZXMsYzt3aGlsZSgoYz1kWzBdKSl7dGhpcy5yZW1vdmVDaGlsZChjLGEsYil9cmV0dXJuIHRoaXN9LGdldENoaWxkQXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2hpbGROb2Rlc1thXX0scmVwbGFjZUNoaWxkOmZ1bmN0aW9uKGEsZCxjKXt2YXIgYj1kP2QubmV4dFNpYmxpbmc6bnVsbDt0aGlzLnJlbW92ZUNoaWxkKGQsZmFsc2UsYyk7dGhpcy5pbnNlcnRCZWZvcmUoYSxiLGMpO3JldHVybiBkfSxpbmRleE9mOmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuQXJyYXkuaW5kZXhPZih0aGlzLmNoaWxkTm9kZXMsYSl9LGluZGV4T2ZJZDpmdW5jdGlvbihkKXt2YXIgYz10aGlzLmNoaWxkTm9kZXMsYT1jLmxlbmd0aCxiPTA7Zm9yKDtiPGE7KytiKXtpZihjW2JdLmdldElkKCk9PT1kKXtyZXR1cm4gYn19cmV0dXJuIC0xfSxnZXRQYXRoOmZ1bmN0aW9uKGQsYyl7ZD1kfHx0aGlzLmlkUHJvcGVydHk7Yz1jfHwiLyI7dmFyIGI9W3RoaXMuZ2V0KGQpXSxhPXRoaXMucGFyZW50Tm9kZTt3aGlsZShhKXtiLnVuc2hpZnQoYS5nZXQoZCkpO2E9YS5wYXJlbnROb2RlfXJldHVybiBjK2Iuam9pbihjKX0sZ2V0RGVwdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoImRlcHRoIil9LGJ1YmJsZTpmdW5jdGlvbihjLGIsYSl7dmFyIGQ9dGhpczt3aGlsZShkKXtpZihjLmFwcGx5KGJ8fGQsYXx8W2RdKT09PWZhbHNlKXticmVha31kPWQucGFyZW50Tm9kZX19LGNhc2NhZGU6ZnVuY3Rpb24oKXtpZihFeHQuaXNEZWZpbmVkKEV4dC5nbG9iYWwuY29uc29sZSkpe0V4dC5nbG9iYWwuY29uc29sZS53YXJuKCJFeHQuZGF0YS5Ob2RlOiBjYXNjYWRlIGhhcyBiZWVuIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgY2FzY2FkZUJ5IGluc3RlYWQuIil9cmV0dXJuIHRoaXMuY2FzY2FkZUJ5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sY2FzY2FkZUJ5OmZ1bmN0aW9uKGQsYyxhKXtpZihkLmFwcGx5KGN8fHRoaXMsYXx8W3RoaXNdKSE9PWZhbHNlKXt2YXIgZz10aGlzLmNoaWxkTm9kZXMsZT1nLmxlbmd0aCxiO2ZvcihiPTA7YjxlO2IrKyl7Z1tiXS5jYXNjYWRlQnkoZCxjLGEpfX19LGVhY2hDaGlsZDpmdW5jdGlvbihkLGMsYSl7dmFyIGc9dGhpcy5jaGlsZE5vZGVzLGU9Zy5sZW5ndGgsYjtmb3IoYj0wO2I8ZTtiKyspe2lmKGQuYXBwbHkoY3x8dGhpcyxhfHxbZ1tiXV0pPT09ZmFsc2Upe2JyZWFrfX19LGZpbmRDaGlsZDpmdW5jdGlvbihiLGMsYSl7cmV0dXJuIHRoaXMuZmluZENoaWxkQnkoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoYik9PWN9LG51bGwsYSl9LGZpbmRDaGlsZEJ5OmZ1bmN0aW9uKGgsZyxiKXt2YXIgZT10aGlzLmNoaWxkTm9kZXMsYT1lLmxlbmd0aCxkPTAsaixjO2Zvcig7ZDxhO2QrKyl7aj1lW2RdO2lmKGguY2FsbChnfHxqLGopPT09dHJ1ZSl7cmV0dXJuIGp9ZWxzZXtpZihiKXtjPWouZmluZENoaWxkQnkoaCxnLGIpO2lmKGMhPT1udWxsKXtyZXR1cm4gY319fX1yZXR1cm4gbnVsbH0sY29udGFpbnM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaXNBbmNlc3Rvcih0aGlzKX0saXNBbmNlc3RvcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBhcmVudE5vZGU7d2hpbGUoYil7aWYoYj09YSl7cmV0dXJuIHRydWV9Yj1iLnBhcmVudE5vZGV9cmV0dXJuIGZhbHNlfSxzb3J0OmZ1bmN0aW9uKGcsYixhKXt2YXIgZD10aGlzLmNoaWxkTm9kZXMsZT1kLmxlbmd0aCxjLGg7aWYoZT4wKXtFeHQuQXJyYXkuc29ydChkLGcpO2ZvcihjPTA7YzxlO2MrKyl7aD1kW2NdO2gucHJldmlvdXNTaWJsaW5nPWRbYy0xXTtoLm5leHRTaWJsaW5nPWRbYysxXTtpZihjPT09MCl7dGhpcy5zZXRGaXJzdENoaWxkKGgpfWlmKGM9PWUtMSl7dGhpcy5zZXRMYXN0Q2hpbGQoaCl9aC51cGRhdGVJbmZvKCk7aWYoYiYmIWguaXNMZWFmKCkpe2guc29ydChnLHRydWUsdHJ1ZSl9fWlmKGEhPT10cnVlKXt0aGlzLmZpcmVFdmVudCgic29ydCIsdGhpcyxkKX19fSxpc0V4cGFuZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KCJleHBhbmRlZCIpfSxpc0xvYWRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgibG9hZGVkIil9LGlzTG9hZGluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCgibG9hZGluZyIpfSxpc1Jvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gIXRoaXMucGFyZW50Tm9kZX0saXNWaXNpYmxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYXJlbnROb2RlO3doaWxlKGEpe2lmKCFhLmlzRXhwYW5kZWQoKSl7cmV0dXJuIGZhbHNlfWE9YS5wYXJlbnROb2RlfXJldHVybiB0cnVlfSxleHBhbmQ6ZnVuY3Rpb24oYSxkLGIpe3ZhciBjPXRoaXM7aWYoIWMuaXNMZWFmKCkpe2lmKGMuaXNMb2FkaW5nKCkpe2Mub24oImV4cGFuZCIsZnVuY3Rpb24oKXtjLmV4cGFuZChhLGQsYil9LGMse3NpbmdsZTp0cnVlfSl9ZWxzZXtpZighYy5pc0V4cGFuZGVkKCkpe2MuZmlyZUV2ZW50KCJiZWZvcmVleHBhbmQiLGMsZnVuY3Rpb24oKXtjLnNldCgiZXhwYW5kZWQiLHRydWUpO2lmKGMuaGFzTGlzdGVuZXJzLmV4cGFuZCl7Yy5maXJlRXZlbnQoImV4cGFuZCIsYyxjLmNoaWxkTm9kZXMsZmFsc2UpfWlmKGEpe2MuZXhwYW5kQ2hpbGRyZW4odHJ1ZSxkLGIpfWVsc2V7RXh0LmNhbGxiYWNrKGQsYnx8YyxbYy5jaGlsZE5vZGVzXSl9fSxjKX1lbHNle2lmKGEpe2MuZXhwYW5kQ2hpbGRyZW4odHJ1ZSxkLGIpfWVsc2V7RXh0LmNhbGxiYWNrKGQsYnx8YyxbYy5jaGlsZE5vZGVzXSl9fX19ZWxzZXtFeHQuY2FsbGJhY2soZCxifHxjKX19LGV4cGFuZENoaWxkcmVuOmZ1bmN0aW9uKGQsaixrKXt2YXIgaD10aGlzLGU9MCxhPWguY2hpbGROb2RlcyxnPWEubGVuZ3RoLGMsYj0wO2Zvcig7ZTxnOysrZSl7Yz1hW2VdO2lmKCFjLmlzTGVhZigpKXtiKys7YVtlXS5leHBhbmQoZCxmdW5jdGlvbigpe2ItLTtpZihqJiYhYil7RXh0LmNhbGxiYWNrKGosa3x8aCxbaC5jaGlsZE5vZGVzXSl9fSl9fWlmKCFiJiZqKXtFeHQuY2FsbGJhY2soaixrfHxoLFtoLmNoaWxkTm9kZXNdKX19LGNvbGxhcHNlOmZ1bmN0aW9uKGEsZCxiKXt2YXIgYz10aGlzO2lmKCFjLmlzTGVhZigpKXtpZighYy5jb2xsYXBzaW5nJiZjLmlzRXhwYW5kZWQoKSl7Yy5maXJlRXZlbnQoImJlZm9yZWNvbGxhcHNlIixjLGZ1bmN0aW9uKCl7Yy5zZXQoImV4cGFuZGVkIixmYWxzZSk7aWYoYy5oYXNMaXN0ZW5lcnMuY29sbGFwc2Upe2MuZmlyZUV2ZW50KCJjb2xsYXBzZSIsYyxjLmNoaWxkTm9kZXMsZmFsc2UpfWlmKGEpe2MuY29sbGFwc2VDaGlsZHJlbih0cnVlLGQsYil9ZWxzZXtFeHQuY2FsbGJhY2soZCxifHxjLFtjLmNoaWxkTm9kZXNdKX19LGMpfWVsc2V7aWYoYSl7Yy5jb2xsYXBzZUNoaWxkcmVuKHRydWUsZCxiKX1lbHNle0V4dC5jYWxsYmFjayhkLGJ8fGMsW2MuY2hpbGROb2Rlc10pfX19ZWxzZXtFeHQuY2FsbGJhY2soZCxifHxjLFtjLmNoaWxkTm9kZXNdKX19LGNvbGxhcHNlQ2hpbGRyZW46ZnVuY3Rpb24oZCxqLGspe3ZhciBoPXRoaXMsZT0wLGI9aC5jaGlsZE5vZGVzLGc9Yi5sZW5ndGgsYyxhPTA7Zm9yKDtlPGc7KytlKXtjPWJbZV07aWYoIWMuaXNMZWFmKCkpe2ErKztiW2VdLmNvbGxhcHNlKGQsZnVuY3Rpb24oKXthLS07aWYoaiYmIWEpe0V4dC5jYWxsYmFjayhqLGt8fGgsW2guY2hpbGROb2Rlc10pfX0pfX1pZighYSYmail7RXh0LmNhbGxiYWNrKGosa3x8aCxbaC5jaGlsZE5vZGVzXSl9fX19fX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLk5vZGVTdG9yZSIse2V4dGVuZDoiRXh0LmRhdGEuU3RvcmUiLGFsaWFzOiJzdG9yZS5ub2RlIixyZXF1aXJlczpbIkV4dC5kYXRhLk5vZGVJbnRlcmZhY2UiXSxub2RlOm51bGwscmVjdXJzaXZlOmZhbHNlLHJvb3RWaXNpYmxlOmZhbHNlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsYjthPWF8fHt9O0V4dC5hcHBseShjLGEpO2EucHJveHk9e3R5cGU6InByb3h5In07Yy5jYWxsUGFyZW50KFthXSk7Yj1jLm5vZGU7aWYoYil7Yy5ub2RlPW51bGw7Yy5zZXROb2RlKGIpfX0sc2V0Tm9kZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKGEubm9kZSYmYS5ub2RlIT1iKXthLm11bihhLm5vZGUse2V4cGFuZDphLm9uTm9kZUV4cGFuZCxjb2xsYXBzZTphLm9uTm9kZUNvbGxhcHNlLGFwcGVuZDphLm9uTm9kZUFwcGVuZCxpbnNlcnQ6YS5vbk5vZGVJbnNlcnQscmVtb3ZlOmEub25Ob2RlUmVtb3ZlLHNvcnQ6YS5vbk5vZGVTb3J0LHNjb3BlOmF9KTthLm5vZGU9bnVsbH1pZihiKXtFeHQuZGF0YS5Ob2RlSW50ZXJmYWNlLmRlY29yYXRlKGIuc2VsZik7YS5yZW1vdmVBbGwoKTtpZihhLnJvb3RWaXNpYmxlKXthLmFkZChiKX1lbHNle2lmKCFiLmlzRXhwYW5kZWQoKSYmYS50cmVlU3RvcmUuYXV0b0xvYWQhPT1mYWxzZSl7Yi5leHBhbmQoKX19YS5tb24oYix7ZXhwYW5kOmEub25Ob2RlRXhwYW5kLGNvbGxhcHNlOmEub25Ob2RlQ29sbGFwc2UsYXBwZW5kOmEub25Ob2RlQXBwZW5kLGluc2VydDphLm9uTm9kZUluc2VydCxyZW1vdmU6YS5vbk5vZGVSZW1vdmUsc29ydDphLm9uTm9kZVNvcnQsc2NvcGU6YX0pO2Eubm9kZT1iO2lmKGIuaXNFeHBhbmRlZCgpJiZiLmlzTG9hZGVkKCkpe2Eub25Ob2RlRXhwYW5kKGIsYi5jaGlsZE5vZGVzLHRydWUpfX19LG9uTm9kZVNvcnQ6ZnVuY3Rpb24oYixjKXt2YXIgYT10aGlzO2lmKChhLmluZGV4T2YoYikhPT0tMXx8KGI9PT1hLm5vZGUmJiFhLnJvb3RWaXNpYmxlKSYmYi5pc0V4cGFuZGVkKCkpKXthLm9uTm9kZUNvbGxhcHNlKGIsYyx0cnVlKTthLm9uTm9kZUV4cGFuZChiLGMsdHJ1ZSl9fSxvbk5vZGVFeHBhbmQ6ZnVuY3Rpb24oZyxkLGMpe3ZhciBqPXRoaXMsYT1qLmluZGV4T2YoZykrMSxoPWQ/ZC5sZW5ndGg6MCxlLGI7aWYoIWoucmVjdXJzaXZlJiZnIT09ai5ub2RlKXtyZXR1cm59aWYoZyE9PXRoaXMubm9kZSYmIWouaXNWaXNpYmxlKGcpKXtyZXR1cm59aWYoIWMmJmouZmlyZUV2ZW50KCJiZWZvcmVleHBhbmQiLGcsZCxhKT09PWZhbHNlKXtyZXR1cm59aWYoaCl7ai5pbnNlcnQoYSxkKTtmb3IoZT0wO2U8aDtlKyspe2I9ZFtlXTtpZihiLmlzRXhwYW5kZWQoKSl7aWYoYi5pc0xvYWRlZCgpKXtqLm9uTm9kZUV4cGFuZChiLGIuY2hpbGROb2Rlcyx0cnVlKX1lbHNle2Iuc2V0KCJleHBhbmRlZCIsZmFsc2UpO2IuZXhwYW5kKCl9fX19aWYoIWMpe2ouZmlyZUV2ZW50KCJleHBhbmQiLGcsZCl9fSxvbk5vZGVDb2xsYXBzZTpmdW5jdGlvbihnLGMsYil7dmFyIGo9dGhpcyxoPWMubGVuZ3RoLGU9ai5pbmRleE9mKGcpKzEsZCxhO2lmKCFqLnJlY3Vyc2l2ZSYmZyE9PWoubm9kZSl7cmV0dXJufWlmKCFiJiZqLmZpcmVFdmVudCgiYmVmb3JlY29sbGFwc2UiLGcsYyxlKT09PWZhbHNlKXtyZXR1cm59Zm9yKGQ9MDtkPGg7ZCsrKXthPWNbZF07ai5yZW1vdmUoYSk7aWYoYS5pc0V4cGFuZGVkKCkpe2oub25Ob2RlQ29sbGFwc2UoYSxhLmNoaWxkTm9kZXMsdHJ1ZSl9fWlmKCFiKXtqLmZpcmVFdmVudCgiY29sbGFwc2UiLGcsYyxlKX19LG9uTm9kZUFwcGVuZDpmdW5jdGlvbihkLGcsYil7dmFyIGU9dGhpcyxhLGM7aWYoZS5pc1Zpc2libGUoZykpe2lmKGI9PT0wKXthPWR9ZWxzZXtjPWcucHJldmlvdXNTaWJsaW5nO3doaWxlKGMuaXNFeHBhbmRlZCgpJiZjLmxhc3RDaGlsZCl7Yz1jLmxhc3RDaGlsZH1hPWN9ZS5pbnNlcnQoZS5pbmRleE9mKGEpKzEsZyk7aWYoIWcuaXNMZWFmKCkmJmcuaXNFeHBhbmRlZCgpKXtpZihnLmlzTG9hZGVkKCkpe2Uub25Ob2RlRXhwYW5kKGcsZy5jaGlsZE5vZGVzLHRydWUpfWVsc2V7Zy5zZXQoImV4cGFuZGVkIixmYWxzZSk7Zy5leHBhbmQoKX19fX0sb25Ob2RlSW5zZXJ0OmZ1bmN0aW9uKGMsZSxhKXt2YXIgZD10aGlzLGI9dGhpcy5pbmRleE9mKGEpO2lmKGIhPS0xJiZkLmlzVmlzaWJsZShlKSl7ZC5pbnNlcnQoYixlKTtpZighZS5pc0xlYWYoKSYmZS5pc0V4cGFuZGVkKCkpe2lmKGUuaXNMb2FkZWQoKSl7ZC5vbk5vZGVFeHBhbmQoZSxlLmNoaWxkTm9kZXMsdHJ1ZSl9ZWxzZXtlLnNldCgiZXhwYW5kZWQiLGZhbHNlKTtlLmV4cGFuZCgpfX19fSxvbk5vZGVSZW1vdmU6ZnVuY3Rpb24oYixkLGEpe3ZhciBjPXRoaXM7aWYoYy5pbmRleE9mKGQpIT0tMSl7aWYoIWQuaXNMZWFmKCkmJmQuaXNFeHBhbmRlZCgpKXtjLm9uTm9kZUNvbGxhcHNlKGQsZC5jaGlsZE5vZGVzLHRydWUpfWMucmVtb3ZlKGQpfX0saXNWaXNpYmxlOmZ1bmN0aW9uKGIpe3ZhciBhPWIucGFyZW50Tm9kZTt3aGlsZShhKXtpZihhPT09dGhpcy5ub2RlJiYhdGhpcy5yb290VmlzaWJsZSYmYS5pc0V4cGFuZGVkKCkpe3JldHVybiB0cnVlfWlmKHRoaXMuaW5kZXhPZihhKT09PS0xfHwhYS5pc0V4cGFuZGVkKCkpe3JldHVybiBmYWxzZX1hPWEucGFyZW50Tm9kZX1yZXR1cm4gdHJ1ZX19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5SZXF1ZXN0Iix7YWN0aW9uOnVuZGVmaW5lZCxwYXJhbXM6dW5kZWZpbmVkLG1ldGhvZDoiR0VUIix1cmw6dW5kZWZpbmVkLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5hcHBseSh0aGlzLGEpfX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLlNlcXVlbnRpYWxJZEdlbmVyYXRvciIse2V4dGVuZDoiRXh0LmRhdGEuSWRHZW5lcmF0b3IiLGFsaWFzOiJpZGdlbi5zZXF1ZW50aWFsIixjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YS5wYXJ0cz1bYS5wcmVmaXgsIiJdfSxwcmVmaXg6IiIsc2VlZDoxLGdlbmVyYXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEucGFydHM7YlsxXT1hLnNlZWQrKztyZXR1cm4gYi5qb2luKCIiKX19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5UcmVlIix7YWxpYXM6ImRhdGEudHJlZSIsbWl4aW5zOntvYnNlcnZhYmxlOiJFeHQudXRpbC5PYnNlcnZhYmxlIn0scm9vdDpudWxsLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5taXhpbnMub2JzZXJ2YWJsZS5jb25zdHJ1Y3Rvci5jYWxsKGIpO2lmKGEpe2Iuc2V0Um9vdE5vZGUoYSl9fSxnZXRSb290Tm9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3R9LHNldFJvb3ROb2RlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5yb290PWI7aWYoYS5maXJlRXZlbnQoImJlZm9yZWFwcGVuZCIsbnVsbCxiKSE9PWZhbHNlKXtiLnNldCgicm9vdCIsdHJ1ZSk7Yi51cGRhdGVJbmZvKCk7Yi5jb21taXQoKTtiLm9uKHtzY29wZTphLGluc2VydDphLm9uTm9kZUluc2VydCxhcHBlbmQ6YS5vbk5vZGVBcHBlbmQscmVtb3ZlOmEub25Ob2RlUmVtb3ZlfSk7YS5yZWxheUV2ZW50cyhiLFsiYXBwZW5kIiwicmVtb3ZlIiwibW92ZSIsImluc2VydCIsImJlZm9yZWFwcGVuZCIsImJlZm9yZXJlbW92ZSIsImJlZm9yZW1vdmUiLCJiZWZvcmVpbnNlcnQiLCJleHBhbmQiLCJjb2xsYXBzZSIsImJlZm9yZWV4cGFuZCIsImJlZm9yZWNvbGxhcHNlIiwic29ydCIsInJvb3RjaGFuZ2UiXSk7YS5ub2RlSGFzaD17fTthLnJlZ2lzdGVyTm9kZShiKTthLmZpcmVFdmVudCgiYXBwZW5kIixudWxsLGIpO2EuZmlyZUV2ZW50KCJyb290Y2hhbmdlIixiKX1yZXR1cm4gYn0sZmxhdHRlbjpmdW5jdGlvbigpe3JldHVybiBFeHQuT2JqZWN0LmdldFZhbHVlcyh0aGlzLm5vZGVIYXNoKX0sb25Ob2RlSW5zZXJ0OmZ1bmN0aW9uKGEsYil7dGhpcy5yZWdpc3Rlck5vZGUoYix0cnVlKX0sb25Ob2RlQXBwZW5kOmZ1bmN0aW9uKGEsYil7dGhpcy5yZWdpc3Rlck5vZGUoYix0cnVlKX0sb25Ob2RlUmVtb3ZlOmZ1bmN0aW9uKGEsYil7dGhpcy51bnJlZ2lzdGVyTm9kZShiLHRydWUpfSxvbk5vZGVJZENoYW5nZWQ6ZnVuY3Rpb24oYyxkLGEpe3ZhciBiPXRoaXMubm9kZUhhc2g7YlthXT1jO2RlbGV0ZSBiW2R8fGMuaW50ZXJuYWxJZF19LGdldE5vZGVCeUlkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm5vZGVIYXNoW2FdfSxyZWdpc3Rlck5vZGU6ZnVuY3Rpb24oYyxhKXt2YXIgYj10aGlzO2Iubm9kZUhhc2hbYy5nZXRJZCgpfHxjLmludGVybmFsSWRdPWM7Yy5vbigiaWRjaGFuZ2VkIixiLm9uTm9kZUlkQ2hhbmdlZCxiKTtpZihhPT09dHJ1ZSl7Yy5lYWNoQ2hpbGQoZnVuY3Rpb24oZCl7Yi5yZWdpc3Rlck5vZGUoZCx0cnVlKX0pfX0sdW5yZWdpc3Rlck5vZGU6ZnVuY3Rpb24oYixhKXtkZWxldGUgdGhpcy5ub2RlSGFzaFtiLmdldElkKCl8fGIuaW50ZXJuYWxJZF07aWYoYT09PXRydWUpe2IuZWFjaENoaWxkKGZ1bmN0aW9uKGMpe3RoaXMudW5yZWdpc3Rlck5vZGUoYyx0cnVlKX0sdGhpcyl9fSxzb3J0OmZ1bmN0aW9uKGIsYSl7dGhpcy5nZXRSb290Tm9kZSgpLnNvcnQoYixhKX0sZmlsdGVyOmZ1bmN0aW9uKGIsYSl7dGhpcy5nZXRSb290Tm9kZSgpLmZpbHRlcihiLGEpfX0pO0V4dC5kZWZpbmUoIkV4dC5kYXRhLlRyZWVTdG9yZSIse2V4dGVuZDoiRXh0LmRhdGEuQWJzdHJhY3RTdG9yZSIsYWxpYXM6InN0b3JlLnRyZWUiLHJlcXVpcmVzOlsiRXh0LnV0aWwuU29ydGVyIiwiRXh0LmRhdGEuVHJlZSIsIkV4dC5kYXRhLk5vZGVJbnRlcmZhY2UiXSxjbGVhck9uTG9hZDp0cnVlLGNsZWFyUmVtb3ZlZE9uTG9hZDp0cnVlLG5vZGVQYXJhbToibm9kZSIsZGVmYXVsdFJvb3RJZDoicm9vdCIsZGVmYXVsdFJvb3RQcm9wZXJ0eToiY2hpbGRyZW4iLHJvb3RQcm9wZXJ0eToiY2hpbGRyZW4iLGZvbGRlclNvcnQ6ZmFsc2UsY29uc3RydWN0b3I6ZnVuY3Rpb24oYyl7dmFyIGU9dGhpcyxiLGEsZDtjPUV4dC5hcHBseSh7fSxjKTthPWMuZmllbGRzfHxlLmZpZWxkcztpZighYSl7Yy5maWVsZHM9W3tuYW1lOiJ0ZXh0Iix0eXBlOiJzdHJpbmcifV07ZD1jLmRlZmF1bHRSb290UHJvcGVydHl8fGUuZGVmYXVsdFJvb3RQcm9wZXJ0eTtpZihkIT09ZS5kZWZhdWx0Um9vdFByb3BlcnR5KXtjLmZpZWxkcy5wdXNoKHtuYW1lOmQsdHlwZToiYXV0byIsZGVmYXVsdFZhbHVlOm51bGwscGVyc2lzdDpmYWxzZX0pfX1lLmNhbGxQYXJlbnQoW2NdKTtlLnRyZWU9bmV3IEV4dC5kYXRhLlRyZWUoKTtlLnJlbGF5RXZlbnRzKGUudHJlZSxbImFwcGVuZCIsInJlbW92ZSIsIm1vdmUiLCJpbnNlcnQiLCJiZWZvcmVhcHBlbmQiLCJiZWZvcmVyZW1vdmUiLCJiZWZvcmVtb3ZlIiwiYmVmb3JlaW5zZXJ0IiwiZXhwYW5kIiwiY29sbGFwc2UiLCJiZWZvcmVleHBhbmQiLCJiZWZvcmVjb2xsYXBzZSIsInNvcnQiLCJyb290Y2hhbmdlIl0pO2UudHJlZS5vbih7c2NvcGU6ZSxyZW1vdmU6ZS5vbk5vZGVSZW1vdmUsYmVmb3JlZXhwYW5kOmUub25CZWZvcmVOb2RlRXhwYW5kLGJlZm9yZWNvbGxhcHNlOmUub25CZWZvcmVOb2RlQ29sbGFwc2UsYXBwZW5kOmUub25Ob2RlQWRkZWQsaW5zZXJ0OmUub25Ob2RlQWRkZWQsc29ydDplLm9uTm9kZVNvcnR9KTtlLm9uQmVmb3JlU29ydCgpO2I9ZS5yb290O2lmKGIpe2RlbGV0ZSBlLnJvb3Q7ZS5zZXRSb290Tm9kZShiKX1pZihFeHQuaXNEZWZpbmVkKGUubm9kZVBhcmFtZXRlcikpe2lmKEV4dC5pc0RlZmluZWQoRXh0Lmdsb2JhbC5jb25zb2xlKSl7RXh0Lmdsb2JhbC5jb25zb2xlLndhcm4oIkV4dC5kYXRhLlRyZWVTdG9yZTogbm9kZVBhcmFtZXRlciBoYXMgYmVlbiBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIG5vZGVQYXJhbSBpbnN0ZWFkLiIpfWUubm9kZVBhcmFtPWUubm9kZVBhcmFtZXRlcjtkZWxldGUgZS5ub2RlUGFyYW1ldGVyfX0sc2V0UHJveHk6ZnVuY3Rpb24oYyl7dmFyIGEsYjtpZihjIGluc3RhbmNlb2YgRXh0LmRhdGEucHJveHkuUHJveHkpe2I9RXh0LmlzRW1wdHkoYy5nZXRSZWFkZXIoKS5yb290KX1lbHNle2lmKEV4dC5pc1N0cmluZyhjKSl7Yj10cnVlfWVsc2V7YT1jLnJlYWRlcjtiPSEoYSYmIUV4dC5pc0VtcHR5KGEucm9vdCkpfX1jPXRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGIpe2E9Yy5nZXRSZWFkZXIoKTthLnJvb3Q9dGhpcy5kZWZhdWx0Um9vdFByb3BlcnR5O2EuYnVpbGRFeHRyYWN0b3JzKHRydWUpfX0sb25CZWZvcmVTb3J0OmZ1bmN0aW9uKCl7aWYodGhpcy5mb2xkZXJTb3J0KXt0aGlzLnNvcnQoe3Byb3BlcnR5OiJsZWFmIixkaXJlY3Rpb246IkFTQyJ9LCJwcmVwZW5kIixmYWxzZSl9fSxvbkJlZm9yZU5vZGVFeHBhbmQ6ZnVuY3Rpb24oYixjLGEpe2lmKGIuaXNMb2FkZWQoKSl7RXh0LmNhbGxiYWNrKGMsYXx8YixbYi5jaGlsZE5vZGVzXSl9ZWxzZXtpZihiLmlzTG9hZGluZygpKXt0aGlzLm9uKCJsb2FkIixmdW5jdGlvbigpe0V4dC5jYWxsYmFjayhjLGF8fGIsW2IuY2hpbGROb2Rlc10pfSx0aGlzLHtzaW5nbGU6dHJ1ZX0pfWVsc2V7dGhpcy5yZWFkKHtub2RlOmIsY2FsbGJhY2s6ZnVuY3Rpb24oKXtFeHQuY2FsbGJhY2soYyxhfHxiLFtiLmNoaWxkTm9kZXNdKX19KX19fSxnZXROZXdSZWNvcmRzOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5BcnJheS5maWx0ZXIodGhpcy50cmVlLmZsYXR0ZW4oKSx0aGlzLmZpbHRlck5ldyl9LGdldFVwZGF0ZWRSZWNvcmRzOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5BcnJheS5maWx0ZXIodGhpcy50cmVlLmZsYXR0ZW4oKSx0aGlzLmZpbHRlclVwZGF0ZWQpfSxvbkJlZm9yZU5vZGVDb2xsYXBzZTpmdW5jdGlvbihiLGMsYSl7Yy5jYWxsKGF8fGIsYi5jaGlsZE5vZGVzKX0sb25Ob2RlUmVtb3ZlOmZ1bmN0aW9uKGIsZCxhKXt2YXIgYz10aGlzLGU9Yy5yZW1vdmVkO2lmKCFkLmlzUmVwbGFjZSYmRXh0LkFycmF5LmluZGV4T2YoZSxkKT09LTEpe2UucHVzaChkKX1pZihjLmF1dG9TeW5jJiYhYy5hdXRvU3luY1N1c3BlbmRlZCYmIWEpe2Muc3luYygpfX0sb25Ob2RlQWRkZWQ6ZnVuY3Rpb24oYyxlKXt2YXIgZD10aGlzLGI9ZC5nZXRQcm94eSgpLGE9Yi5nZXRSZWFkZXIoKSxnPWUucmF3fHxlW2UucGVyc2lzdGVuY2VQcm9wZXJ0eV0saDtFeHQuQXJyYXkucmVtb3ZlKGQucmVtb3ZlZCxlKTtpZighZS5pc0xlYWYoKSl7aD1hLmdldFJvb3QoZyk7aWYoaCl7ZC5maWxsTm9kZShlLGEuZXh0cmFjdERhdGEoaCkpO2RlbGV0ZSBnW2Eucm9vdF19fWlmKGQuYXV0b1N5bmMmJiFkLmF1dG9TeW5jU3VzcGVuZGVkJiYoZS5waGFudG9tfHxlLmRpcnR5KSl7ZC5zeW5jKCl9fSxvbk5vZGVTb3J0OmZ1bmN0aW9uKCl7aWYodGhpcy5hdXRvU3luYyYmIXRoaXMuYXV0b1N5bmNTdXNwZW5kZWQpe3RoaXMuc3luYygpfX0sc2V0Um9vdE5vZGU6ZnVuY3Rpb24oYSxlKXt2YXIgZD10aGlzLGM9ZC5tb2RlbCxiPWMucHJvdG90eXBlLmlkUHJvcGVydHk7YT1hfHx7fTtpZighYS5pc01vZGVsKXtFeHQuYXBwbHlJZihhLHtpZDpkLmRlZmF1bHRSb290SWQsdGV4dDoiUm9vdCIsYWxsb3dEcmFnOmZhbHNlfSk7aWYoYVtiXT09PXVuZGVmaW5lZCl7YVtiXT1kLmRlZmF1bHRSb290SWR9RXh0LmRhdGEuTm9kZUludGVyZmFjZS5kZWNvcmF0ZShjKTthPUV4dC5Nb2RlbE1hbmFnZXIuY3JlYXRlKGEsYyl9ZWxzZXtpZihhLmlzTW9kZWwmJiFhLmlzTm9kZSl7RXh0LmRhdGEuTm9kZUludGVyZmFjZS5kZWNvcmF0ZShjKX19ZC5nZXRQcm94eSgpLmdldFJlYWRlcigpLmJ1aWxkRXh0cmFjdG9ycyh0cnVlKTtkLnRyZWUuc2V0Um9vdE5vZGUoYSk7aWYoZSE9PXRydWUmJiFhLmlzTG9hZGVkKCkmJihkLmF1dG9Mb2FkPT09dHJ1ZXx8YS5pc0V4cGFuZGVkKCkpKXtkLmxvYWQoe25vZGU6YX0pfXJldHVybiBhfSxnZXRSb290Tm9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyZWUuZ2V0Um9vdE5vZGUoKX0sZ2V0Tm9kZUJ5SWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudHJlZS5nZXROb2RlQnlJZChhKX0sZ2V0QnlJZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXROb2RlQnlJZChhKX0sbG9hZDpmdW5jdGlvbihhKXthPWF8fHt9O2EucGFyYW1zPWEucGFyYW1zfHx7fTt2YXIgYz10aGlzLGI9YS5ub2RlfHxjLnRyZWUuZ2V0Um9vdE5vZGUoKTtpZighYil7Yj1jLnNldFJvb3ROb2RlKHtleHBhbmRlZDp0cnVlfSx0cnVlKX1hLmlkPWIuZ2V0SWQoKTtpZihjLmNsZWFyT25Mb2FkKXtpZihjLmNsZWFyUmVtb3ZlZE9uTG9hZCl7Yy5jbGVhclJlbW92ZWQoYil9Yy50cmVlLnVuKCJyZW1vdmUiLGMub25Ob2RlUmVtb3ZlLGMpO2IucmVtb3ZlQWxsKGZhbHNlKTtjLnRyZWUub24oInJlbW92ZSIsYy5vbk5vZGVSZW1vdmUsYyl9RXh0LmFwcGx5SWYoYSx7bm9kZTpifSk7YS5wYXJhbXNbYy5ub2RlUGFyYW1dPWI/Yi5nZXRJZCgpOiJyb290IjtpZihiKXtiLnNldCgibG9hZGluZyIsdHJ1ZSl9cmV0dXJuIGMuY2FsbFBhcmVudChbYV0pfSxjbGVhclJlbW92ZWQ6ZnVuY3Rpb24oYil7dmFyIGs9dGhpcyxlPWsucmVtb3ZlZCxhPWIuZ2V0SWQoKSxkPWUubGVuZ3RoLGM9ZCxuPXt9LGg9W10sbT17fSxqLGcsbDtpZihiPT09ay5nZXRSb290Tm9kZSgpKXtrLnJlbW92ZWQ9W107cmV0dXJufWZvcig7Yy0tOyl7aj1lW2NdO21bai5nZXRJZCgpXT1qfWZvcihjPWQ7Yy0tOyl7aj1lW2NdO2c9ajt3aGlsZShnJiZnLmdldElkKCkhPT1hKXtsPWcuZ2V0KCJwYXJlbnRJZCIpO2c9Zy5wYXJlbnROb2RlfHxrLmdldE5vZGVCeUlkKGwpfHxtW2xdfWlmKGcpe25bai5nZXRJZCgpXT1qfX1mb3IoYz0wO2M8ZDtjKyspe2o9ZVtjXTtpZighbltqLmdldElkKCldKXtoLnB1c2goail9fWsucmVtb3ZlZD1ofSxmaWxsTm9kZTpmdW5jdGlvbihiLGMpe3ZhciBoPXRoaXMsZT1jP2MubGVuZ3RoOjAsZz1oLnNvcnRlcnMsZCxrLGo9ZmFsc2UsYT1lJiZoLnNvcnRPbkxvYWQmJiFoLnJlbW90ZVNvcnQmJmcmJmcuaXRlbXMmJmcuaXRlbXMubGVuZ3RoLG0sbDtmb3IoZD0xO2Q8ZTtkKyspe209Y1tkXTtsPWNbZC0xXTtqPW1bbS5wZXJzaXN0ZW5jZVByb3BlcnR5XS5pbmRleCE9bFtsLnBlcnNpc3RlbmNlUHJvcGVydHldLmluZGV4O2lmKGope2JyZWFrfX1pZihhKXtpZihqKXtoLnNvcnRlcnMuaW5zZXJ0KDAsaC5pbmRleFNvcnRlcil9az1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKCk7ay5hZGRBbGwoYyk7ay5zb3J0KGguc29ydGVycy5pdGVtcyk7Yz1rLml0ZW1zO2guc29ydGVycy5yZW1vdmUoaC5pbmRleFNvcnRlcil9ZWxzZXtpZihqKXtFeHQuQXJyYXkuc29ydChjLGguc29ydEJ5SW5kZXgpfX1iLnNldCgibG9hZGVkIix0cnVlKTtmb3IoZD0wO2Q8ZTtkKyspe2IuYXBwZW5kQ2hpbGQoY1tkXSx1bmRlZmluZWQsdHJ1ZSl9cmV0dXJuIGN9LHNvcnRCeUluZGV4OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIGJbYi5wZXJzaXN0ZW5jZVByb3BlcnR5XS5pbmRleC1hW2EucGVyc2lzdGVuY2VQcm9wZXJ0eV0uaW5kZXh9LG9uUHJveHlMb2FkOmZ1bmN0aW9uKGIpe3ZhciBkPXRoaXMsZT1iLndhc1N1Y2Nlc3NmdWwoKSxhPWIuZ2V0UmVjb3JkcygpLGM9Yi5ub2RlO2QubG9hZGluZz1mYWxzZTtjLnNldCgibG9hZGluZyIsZmFsc2UpO2lmKGUpe2lmKCFkLmNsZWFyT25Mb2FkKXthPWQuY2xlYW5SZWNvcmRzKGMsYSl9YT1kLmZpbGxOb2RlKGMsYSl9ZC5maXJlRXZlbnQoInJlYWQiLGQsYi5ub2RlLGEsZSk7ZC5maXJlRXZlbnQoImxvYWQiLGQsYi5ub2RlLGEsZSk7RXh0LmNhbGxiYWNrKGIuY2FsbGJhY2ssYi5zY29wZXx8ZCxbYSxiLGVdKX0sb25DcmVhdGVSZWNvcmRzOmZ1bmN0aW9uKGMpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3ZhciBkPTAsYj1jLmxlbmd0aCxhPXRoaXMudHJlZSxlO2Zvcig7ZDxiOysrZCl7ZT1jW2RdO2Eub25Ob2RlSWRDaGFuZ2VkKGUsbnVsbCxlLmdldElkKCkpfX0sY2xlYW5SZWNvcmRzOmZ1bmN0aW9uKGcsYil7dmFyIGU9e30saj1nLmNoaWxkTm9kZXMsZD0wLGE9ai5sZW5ndGgsYz1bXSxoO2Zvcig7ZDxhOysrZCl7ZVtqW2RdLmdldElkKCldPXRydWV9Zm9yKGQ9MCxhPWIubGVuZ3RoO2Q8YTsrK2Qpe2g9YltkXTtpZighZVtoLmdldElkKCldKXtjLnB1c2goaCl9fXJldHVybiBjfSxyZW1vdmVBbGw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFJvb3ROb2RlKCk7aWYoYSl7YS5kZXN0cm95KHRydWUpfXRoaXMuZmlyZUV2ZW50KCJjbGVhciIsdGhpcyl9LGRvU29ydDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGIucmVtb3RlU29ydCl7Yi5sb2FkKCl9ZWxzZXtiLnRyZWUuc29ydChhLHRydWUpO2IuZmlyZUV2ZW50KCJkYXRhY2hhbmdlZCIsYik7Yi5maXJlRXZlbnQoInJlZnJlc2giLGIpfWIuZmlyZUV2ZW50KCJzb3J0IixiKX19LGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wcm90b3R5cGU7YS5pbmRleFNvcnRlcj1uZXcgRXh0LnV0aWwuU29ydGVyKHtzb3J0ZXJGbjphLnNvcnRCeUluZGV4fSl9KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5VdWlkR2VuZXJhdG9yIiwoZnVuY3Rpb24oKXt2YXIgaD1NYXRoLnBvdygyLDE0KSxnPU1hdGgucG93KDIsMTYpLGU9TWF0aC5wb3coMiwyOCksYz1NYXRoLnBvdygyLDMyKTtmdW5jdGlvbiBhKGssail7dmFyIGk9ay50b1N0cmluZygxNik7aWYoaS5sZW5ndGg+ail7aT1pLnN1YnN0cmluZyhpLmxlbmd0aC1qKX1lbHNle2lmKGkubGVuZ3RoPGope2k9RXh0LlN0cmluZy5sZWZ0UGFkKGksaiwiMCIpfX1yZXR1cm4gaX1mdW5jdGlvbiBkKGssail7dmFyIGk9TWF0aC5yYW5kb20oKSooai1rKzEpO3JldHVybiBNYXRoLmZsb29yKGkpK2t9ZnVuY3Rpb24gYihqKXtpZih0eXBlb2Yoaik9PSJudW1iZXIiKXt2YXIgaT1NYXRoLmZsb29yKGovYyk7cmV0dXJue2xvOk1hdGguZmxvb3Ioai1pKmMpLGhpOml9fXJldHVybiBqfXJldHVybntleHRlbmQ6IkV4dC5kYXRhLklkR2VuZXJhdG9yIixhbGlhczoiaWRnZW4udXVpZCIsaWQ6InV1aWQiLHZlcnNpb246NCxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3ZhciBpPXRoaXM7aS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aS5wYXJ0cz1bXTtpLmluaXQoKX0sZ2VuZXJhdGU6ZnVuY3Rpb24oKXt2YXIgaj10aGlzLGs9ai5wYXJ0cyxpPWoudGltZXN0YW1wO2tbMF09YShpLmxvLDgpO2tbMV09YShpLmhpJjY1NTM1LDQpO2tbMl09YSgoKGkuaGk+Pj4xNikmNDA5NSl8KGoudmVyc2lvbjw8MTIpLDQpO2tbM109YSgxMjh8KChqLmNsb2NrU2VxPj4+OCkmNjMpLDIpK2Eoai5jbG9ja1NlcSYyNTUsMik7a1s0XT1hKGouc2FsdC5oaSw0KSthKGouc2FsdC5sbyw4KTtpZihqLnZlcnNpb249PTQpe2ouaW5pdCgpfWVsc2V7KytpLmxvO2lmKGkubG8+PWMpe2kubG89MDsrK2kuaGl9fXJldHVybiBrLmpvaW4oIi0iKS50b0xvd2VyQ2FzZSgpfSxnZXRSZWNJZDpmdW5jdGlvbihpKXtyZXR1cm4gaS5nZXRJZCgpfSxpbml0OmZ1bmN0aW9uKCl7dmFyIGo9dGhpcyxpLGs7aWYoai52ZXJzaW9uPT00KXtqLmNsb2NrU2VxPWQoMCxoLTEpO2k9ai5zYWx0fHwoai5zYWx0PXt9KTtrPWoudGltZXN0YW1wfHwoai50aW1lc3RhbXA9e30pO2kubG89ZCgwLGMtMSk7aS5oaT1kKDAsZy0xKTtrLmxvPWQoMCxjLTEpO2suaGk9ZCgwLGUtMSl9ZWxzZXtqLnNhbHQ9YihqLnNhbHQpO2oudGltZXN0YW1wPWIoai50aW1lc3RhbXApO2ouc2FsdC5oaXw9MjU2fX0scmVjb25maWd1cmU6ZnVuY3Rpb24oaSl7RXh0LmFwcGx5KHRoaXMsaSk7dGhpcy5pbml0KCl9fX0oKSkpO0V4dC5kZWZpbmUoIkV4dC5kYXRhLnJlYWRlci5YbWwiLHtleHRlbmQ6IkV4dC5kYXRhLnJlYWRlci5SZWFkZXIiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmRhdGEuWG1sUmVhZGVyIixhbGlhczoicmVhZGVyLnhtbCIsY3JlYXRlQWNjZXNzb3I6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZihFeHQuaXNFbXB0eShiKSl7cmV0dXJuIEV4dC5lbXB0eUZufWlmKEV4dC5pc0Z1bmN0aW9uKGIpKXtyZXR1cm4gYn1yZXR1cm4gZnVuY3Rpb24oYyl7cmV0dXJuIGEuZ2V0Tm9kZVZhbHVlKEV4dC5Eb21RdWVyeS5zZWxlY3ROb2RlKGIsYykpfX0sZ2V0Tm9kZVZhbHVlOmZ1bmN0aW9uKGEpe2lmKGEmJmEuZmlyc3RDaGlsZCl7cmV0dXJuIGEuZmlyc3RDaGlsZC5ub2RlVmFsdWV9cmV0dXJuIHVuZGVmaW5lZH0sZ2V0UmVzcG9uc2VEYXRhOmZ1bmN0aW9uKGEpe3ZhciBjPWEucmVzcG9uc2VYTUwsYixkO2lmKCFjKXtkPSJYTUwgZGF0YSBub3QgZm91bmQgaW4gdGhlIHJlc3BvbnNlIjtiPW5ldyBFeHQuZGF0YS5SZXN1bHRTZXQoe3RvdGFsOjAsY291bnQ6MCxyZWNvcmRzOltdLHN1Y2Nlc3M6ZmFsc2UsbWVzc2FnZTpkfSk7dGhpcy5maXJlRXZlbnQoImV4Y2VwdGlvbiIsdGhpcyxhLGIpO0V4dC5Mb2dnZXIud2FybihkKTtyZXR1cm4gYn1yZXR1cm4gdGhpcy5yZWFkUmVjb3JkcyhjKX0sZ2V0RGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gYS5kb2N1bWVudEVsZW1lbnR8fGF9LGdldFJvb3Q6ZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZSxhPXRoaXMucm9vdDtpZighYXx8KGMmJmM9PWEpKXtyZXR1cm4gYn1lbHNle2lmKEV4dC5Eb21RdWVyeS5pc1htbChiKSl7cmV0dXJuIEV4dC5Eb21RdWVyeS5zZWxlY3ROb2RlKGEsYil9fX0sZXh0cmFjdERhdGE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yZWNvcmQ7aWYoYiE9YS5ub2RlTmFtZSl7YT1FeHQuRG9tUXVlcnkuc2VsZWN0KGIsYSl9ZWxzZXthPVthXX1yZXR1cm4gdGhpcy5jYWxsUGFyZW50KFthXSl9LGdldEFzc29jaWF0ZWREYXRhUm9vdDpmdW5jdGlvbihiLGEpe3JldHVybiBFeHQuRG9tUXVlcnkuc2VsZWN0KGEsYilbMF19LHJlYWRSZWNvcmRzOmZ1bmN0aW9uKGEpe2lmKEV4dC5pc0FycmF5KGEpKXthPWFbMF19dGhpcy54bWxEYXRhPWE7cmV0dXJuIHRoaXMuY2FsbFBhcmVudChbYV0pfSxjcmVhdGVGaWVsZEFjY2Vzc0V4cHJlc3Npb246ZnVuY3Rpb24oZSxkLGMpe3ZhciBiPWUubWFwcGluZ3x8ZS5uYW1lLGE7aWYodHlwZW9mIGI9PT0iZnVuY3Rpb24iKXthPWQrIi5tYXBwaW5nKCIrYysiLCB0aGlzKSJ9ZWxzZXthPSdtZS5nZXROb2RlVmFsdWUoRXh0LkRvbVF1ZXJ5LnNlbGVjdE5vZGUoIicrYisnIiwgJytjKyIpKSJ9cmV0dXJuIGF9fSk7RXh0LmRlZmluZSgiRXh0LmRhdGEud3JpdGVyLlhtbCIse2V4dGVuZDoiRXh0LmRhdGEud3JpdGVyLldyaXRlciIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuZGF0YS5YbWxXcml0ZXIiLGFsaWFzOiJ3cml0ZXIueG1sIixkb2N1bWVudFJvb3Q6InhtbERhdGEiLGRlZmF1bHREb2N1bWVudFJvb3Q6InhtbERhdGEiLGhlYWRlcjoiIixyZWNvcmQ6InJlY29yZCIsd3JpdGVSZWNvcmRzOmZ1bmN0aW9uKGEsYil7dmFyIGg9dGhpcyxkPVtdLGM9MCxnPWIubGVuZ3RoLGo9aC5kb2N1bWVudFJvb3QsZT1oLnJlY29yZCxtPWIubGVuZ3RoIT09MSxsLGs7ZC5wdXNoKGguaGVhZGVyfHwiIik7aWYoIWomJm0pe2o9aC5kZWZhdWx0RG9jdW1lbnRSb290fWlmKGope2QucHVzaCgiPCIsaiwiPiIpfWZvcig7YzxnOysrYyl7bD1iW2NdO2QucHVzaCgiPCIsZSwiPiIpO2ZvcihrIGluIGwpe2lmKGwuaGFzT3duUHJvcGVydHkoaykpe2QucHVzaCgiPCIsaywiPiIsbFtrXSwiPC8iLGssIj4iKX19ZC5wdXNoKCI8LyIsZSwiPiIpfWlmKGope2QucHVzaCgiPC8iLGosIj4iKX1hLnhtbERhdGE9ZC5qb2luKCIiKTtyZXR1cm4gYX19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5YbWxTdG9yZSIse2V4dGVuZDoiRXh0LmRhdGEuU3RvcmUiLGFsaWFzOiJzdG9yZS54bWwiLHJlcXVpcmVzOlsiRXh0LmRhdGEucHJveHkuQWpheCIsIkV4dC5kYXRhLnJlYWRlci5YbWwiLCJFeHQuZGF0YS53cml0ZXIuWG1sIl0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7YT1FeHQuYXBwbHkoe3Byb3h5Ont0eXBlOiJhamF4IixyZWFkZXI6InhtbCIsd3JpdGVyOiJ4bWwifX0sYSk7dGhpcy5jYWxsUGFyZW50KFthXSl9fSk7RXh0LmRlZmluZSgiRXh0LmRhdGEuYXNzb2NpYXRpb24uQmVsb25nc1RvIix7ZXh0ZW5kOiJFeHQuZGF0YS5hc3NvY2lhdGlvbi5Bc3NvY2lhdGlvbiIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuZGF0YS5CZWxvbmdzVG9Bc3NvY2lhdGlvbiIsYWxpYXM6ImFzc29jaWF0aW9uLmJlbG9uZ3N0byIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYyl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dmFyIGU9dGhpcyxhPWUub3duZXJNb2RlbC5wcm90b3R5cGUsZz1lLmFzc29jaWF0ZWROYW1lLGQ9ZS5nZXR0ZXJOYW1lfHwiZ2V0IitnLGI9ZS5zZXR0ZXJOYW1lfHwic2V0IitnO0V4dC5hcHBseUlmKGUse25hbWU6Zyxmb3JlaWduS2V5OmcudG9Mb3dlckNhc2UoKSsiX2lkIixpbnN0YW5jZU5hbWU6ZysiQmVsb25nc1RvSW5zdGFuY2UiLGFzc29jaWF0aW9uS2V5OmcudG9Mb3dlckNhc2UoKX0pO2FbZF09ZS5jcmVhdGVHZXR0ZXIoKTthW2JdPWUuY3JlYXRlU2V0dGVyKCl9LGNyZWF0ZVNldHRlcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmZvcmVpZ25LZXk7cmV0dXJuIGZ1bmN0aW9uKGUsYyxkKXtpZihlJiZlLmlzTW9kZWwpe2U9ZS5nZXRJZCgpfXRoaXMuc2V0KGEsZSk7aWYoRXh0LmlzRnVuY3Rpb24oYykpe2M9e2NhbGxiYWNrOmMsc2NvcGU6ZHx8dGhpc319aWYoRXh0LmlzT2JqZWN0KGMpKXtyZXR1cm4gdGhpcy5zYXZlKGMpfX19LGNyZWF0ZUdldHRlcjpmdW5jdGlvbigpe3ZhciBkPXRoaXMsZT1kLmFzc29jaWF0ZWROYW1lLGc9ZC5hc3NvY2lhdGVkTW9kZWwsYz1kLmZvcmVpZ25LZXksYj1kLnByaW1hcnlLZXksYT1kLmluc3RhbmNlTmFtZTtyZXR1cm4gZnVuY3Rpb24oayxsKXtrPWt8fHt9O3ZhciBqPXRoaXMsbT1qLmdldChjKSxuLGgsaTtpZihrLnJlbG9hZD09PXRydWV8fGpbYV09PT11bmRlZmluZWQpe2g9RXh0Lk1vZGVsTWFuYWdlci5jcmVhdGUoe30sZSk7aC5zZXQoYixtKTtpZih0eXBlb2Ygaz09ImZ1bmN0aW9uIil7az17Y2FsbGJhY2s6ayxzY29wZTpsfHxqfX1uPWsuc3VjY2VzcztrLnN1Y2Nlc3M9ZnVuY3Rpb24obyl7althXT1vO2lmKG4pe24uYXBwbHkodGhpcyxhcmd1bWVudHMpfX07Zy5sb2FkKG0sayk7althXT1oO3JldHVybiBofWVsc2V7aD1qW2FdO2k9W2hdO2w9bHx8ay5zY29wZXx8ajtFeHQuY2FsbGJhY2soayxsLGkpO0V4dC5jYWxsYmFjayhrLnN1Y2Nlc3MsbCxpKTtFeHQuY2FsbGJhY2soay5mYWlsdXJlLGwsaSk7RXh0LmNhbGxiYWNrKGsuY2FsbGJhY2ssbCxpKTtyZXR1cm4gaH19fSxyZWFkOmZ1bmN0aW9uKGIsYSxjKXtiW3RoaXMuaW5zdGFuY2VOYW1lXT1hLnJlYWQoW2NdKS5yZWNvcmRzWzBdfX0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLkluZmxlY3RvciIse3NpbmdsZXRvbjp0cnVlLHBsdXJhbHM6W1soLyhxdWl6KSQvaSksIiQxemVzIl0sWygvXihveCkkL2kpLCIkMWVuIl0sWygvKFttfGxdKW91c2UkL2kpLCIkMWljZSJdLFsoLyhtYXRyfHZlcnR8aW5kKWl4fGV4JC9pKSwiJDFpY2VzIl0sWygvKHh8Y2h8c3N8c2gpJC9pKSwiJDFlcyJdLFsoLyhbXmFlaW91eV18cXUpeSQvaSksIiQxaWVzIl0sWygvKGhpdmUpJC9pKSwiJDFzIl0sWygvKD86KFteZl0pZmV8KFtscl0pZikkL2kpLCIkMSQydmVzIl0sWygvc2lzJC9pKSwic2VzIl0sWygvKFt0aV0pdW0kL2kpLCIkMWEiXSxbKC8oYnVmZmFsfHRvbWF0fHBvdGF0KW8kL2kpLCIkMW9lcyJdLFsoLyhidSlzJC9pKSwiJDFzZXMiXSxbKC8oYWxpYXN8c3RhdHVzfHNleCkkL2kpLCIkMWVzIl0sWygvKG9jdG9wfHZpcil1cyQvaSksIiQxaSJdLFsoLyhheHx0ZXN0KWlzJC9pKSwiJDFlcyJdLFsoL15wZXJzb24kLyksInBlb3BsZSJdLFsoL15tYW4kLyksIm1lbiJdLFsoL14oY2hpbGQpJC8pLCIkMXJlbiJdLFsoL3MkL2kpLCJzIl0sWygvJC8pLCJzIl1dLHNpbmd1bGFyczpbWygvKHF1aXopemVzJC9pKSwiJDEiXSxbKC8obWF0cilpY2VzJC9pKSwiJDFpeCJdLFsoLyh2ZXJ0fGluZClpY2VzJC9pKSwiJDFleCJdLFsoL14ob3gpZW4vaSksIiQxIl0sWygvKGFsaWFzfHN0YXR1cyllcyQvaSksIiQxIl0sWygvKG9jdG9wfHZpcilpJC9pKSwiJDF1cyJdLFsoLyhjcmlzfGF4fHRlc3QpZXMkL2kpLCIkMWlzIl0sWygvKHNob2UpcyQvaSksIiQxIl0sWygvKG8pZXMkL2kpLCIkMSJdLFsoLyhidXMpZXMkL2kpLCIkMSJdLFsoLyhbbXxsXSlpY2UkL2kpLCIkMW91c2UiXSxbKC8oeHxjaHxzc3xzaCllcyQvaSksIiQxIl0sWygvKG0pb3ZpZXMkL2kpLCIkMW92aWUiXSxbKC8ocyllcmllcyQvaSksIiQxZXJpZXMiXSxbKC8oW15hZWlvdXldfHF1KWllcyQvaSksIiQxeSJdLFsoLyhbbHJdKXZlcyQvaSksIiQxZiJdLFsoLyh0aXZlKXMkL2kpLCIkMSJdLFsoLyhoaXZlKXMkL2kpLCIkMSJdLFsoLyhbXmZdKXZlcyQvaSksIiQxZmUiXSxbKC8oXmFuYWx5KXNlcyQvaSksIiQxc2lzIl0sWygvKChhKW5hbHl8KGIpYXwoZClpYWdub3wocClhcmVudGhlfChwKXJvZ25vfChzKXlub3B8KHQpaGUpc2VzJC9pKSwiJDEkMnNpcyJdLFsoLyhbdGldKWEkL2kpLCIkMXVtIl0sWygvKG4pZXdzJC9pKSwiJDFld3MiXSxbKC9wZW9wbGUkL2kpLCJwZXJzb24iXSxbKC9zJC9pKSwiIl1dLHVuY291bnRhYmxlOlsic2hlZXAiLCJmaXNoIiwic2VyaWVzIiwic3BlY2llcyIsIm1vbmV5IiwicmljZSIsImluZm9ybWF0aW9uIiwiZXF1aXBtZW50IiwiZ3Jhc3MiLCJtdWQiLCJvZmZzcHJpbmciLCJkZWVyIiwibWVhbnMiXSxzaW5ndWxhcjpmdW5jdGlvbihiLGEpe3RoaXMuc2luZ3VsYXJzLnVuc2hpZnQoW2IsYV0pfSxwbHVyYWw6ZnVuY3Rpb24oYixhKXt0aGlzLnBsdXJhbHMudW5zaGlmdChbYixhXSl9LGNsZWFyU2luZ3VsYXJzOmZ1bmN0aW9uKCl7dGhpcy5zaW5ndWxhcnM9W119LGNsZWFyUGx1cmFsczpmdW5jdGlvbigpe3RoaXMucGx1cmFscz1bXX0saXNUcmFuc251bWVyYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5BcnJheS5pbmRleE9mKHRoaXMudW5jb3VudGFibGUsYSkhPS0xfSxwbHVyYWxpemU6ZnVuY3Rpb24oZyl7aWYodGhpcy5pc1RyYW5zbnVtZXJhbChnKSl7cmV0dXJuIGd9dmFyIGU9dGhpcy5wbHVyYWxzLGQ9ZS5sZW5ndGgsYSxjLGI7Zm9yKGI9MDtiPGQ7YisrKXthPWVbYl07Yz1hWzBdO2lmKGM9PWd8fChjLnRlc3QmJmMudGVzdChnKSkpe3JldHVybiBnLnJlcGxhY2UoYyxhWzFdKX19cmV0dXJuIGd9LHNpbmd1bGFyaXplOmZ1bmN0aW9uKGcpe2lmKHRoaXMuaXNUcmFuc251bWVyYWwoZykpe3JldHVybiBnfXZhciBlPXRoaXMuc2luZ3VsYXJzLGQ9ZS5sZW5ndGgsYSxjLGI7Zm9yKGI9MDtiPGQ7YisrKXthPWVbYl07Yz1hWzBdO2lmKGM9PWd8fChjLnRlc3QmJmMudGVzdChnKSkpe3JldHVybiBnLnJlcGxhY2UoYyxhWzFdKX19cmV0dXJuIGd9LGNsYXNzaWZ5OmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuU3RyaW5nLmNhcGl0YWxpemUodGhpcy5zaW5ndWxhcml6ZShhKSl9LG9yZGluYWxpemU6ZnVuY3Rpb24oZCl7dmFyIGI9cGFyc2VJbnQoZCwxMCksYz1iJTEwLGE9YiUxMDA7aWYoMTE8PWEmJmE8PTEzKXtyZXR1cm4gZCsidGgifWVsc2V7c3dpdGNoKGMpe2Nhc2UgMTpyZXR1cm4gZCsic3QiO2Nhc2UgMjpyZXR1cm4gZCsibmQiO2Nhc2UgMzpyZXR1cm4gZCsicmQiO2RlZmF1bHQ6cmV0dXJuIGQrInRoIn19fX0sZnVuY3Rpb24oKXt2YXIgYj17YWx1bW51czoiYWx1bW5pIixjYWN0dXM6ImNhY3RpIixmb2N1czoiZm9jaSIsbnVjbGV1czoibnVjbGVpIixyYWRpdXM6InJhZGlpIixzdGltdWx1czoic3RpbXVsaSIsZWxsaXBzaXM6ImVsbGlwc2VzIixwYXJhbHlzaXM6InBhcmFseXNlcyIsb2FzaXM6Im9hc2VzIixhcHBlbmRpeDoiYXBwZW5kaWNlcyIsaW5kZXg6ImluZGV4ZXMiLGJlYXU6ImJlYXV4IixidXJlYXU6ImJ1cmVhdXgiLHRhYmxlYXU6InRhYmxlYXV4Iix3b21hbjoid29tZW4iLGNoaWxkOiJjaGlsZHJlbiIsbWFuOiJtZW4iLGNvcnB1czoiY29ycG9yYSIsY3JpdGVyaW9uOiJjcml0ZXJpYSIsY3VycmljdWx1bToiY3VycmljdWxhIixnZW51czoiZ2VuZXJhIixtZW1vcmFuZHVtOiJtZW1vcmFuZGEiLHBoZW5vbWVub246InBoZW5vbWVuYSIsZm9vdDoiZmVldCIsZ29vc2U6ImdlZXNlIix0b290aDoidGVldGgiLGFudGVubmE6ImFudGVubmFlIixmb3JtdWxhOiJmb3JtdWxhZSIsbmVidWxhOiJuZWJ1bGFlIix2ZXJ0ZWJyYToidmVydGVicmFlIix2aXRhOiJ2aXRhZSJ9LGE7Zm9yKGEgaW4gYil7dGhpcy5wbHVyYWwoYSxiW2FdKTt0aGlzLnNpbmd1bGFyKGJbYV0sYSl9fSk7RXh0LmRlZmluZSgiRXh0LmRhdGEuYXNzb2NpYXRpb24uSGFzTWFueSIse2V4dGVuZDoiRXh0LmRhdGEuYXNzb2NpYXRpb24uQXNzb2NpYXRpb24iLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmRhdGEuSGFzTWFueUFzc29jaWF0aW9uIixyZXF1aXJlczpbIkV4dC51dGlsLkluZmxlY3RvciJdLGFsaWFzOiJhc3NvY2lhdGlvbi5oYXNtYW55Iixjb25zdHJ1Y3RvcjpmdW5jdGlvbihjKXt2YXIgZD10aGlzLGEsYjtkLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtkLm5hbWU9ZC5uYW1lfHxFeHQudXRpbC5JbmZsZWN0b3IucGx1cmFsaXplKGQuYXNzb2NpYXRlZE5hbWUudG9Mb3dlckNhc2UoKSk7YT1kLm93bmVyTW9kZWwucHJvdG90eXBlO2I9ZC5uYW1lO0V4dC5hcHBseUlmKGQse3N0b3JlTmFtZTpiKyJTdG9yZSIsZm9yZWlnbktleTpkLm93bmVyTmFtZS50b0xvd2VyQ2FzZSgpKyJfaWQifSk7YVtiXT1kLmNyZWF0ZVN0b3JlKCl9LGNyZWF0ZVN0b3JlOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxpPWguYXNzb2NpYXRlZE1vZGVsLGM9aC5zdG9yZU5hbWUsZD1oLmZvcmVpZ25LZXksYT1oLnByaW1hcnlLZXksZz1oLmZpbHRlclByb3BlcnR5LGI9aC5hdXRvTG9hZCxlPWguc3RvcmVDb25maWd8fHt9O3JldHVybiBmdW5jdGlvbigpe3ZhciBtPXRoaXMsayxsLGo9e307aWYobVtjXT09PXVuZGVmaW5lZCl7aWYoZyl7bD17cHJvcGVydHk6Zyx2YWx1ZTptLmdldChnKSxleGFjdE1hdGNoOnRydWV9fWVsc2V7bD17cHJvcGVydHk6ZCx2YWx1ZTptLmdldChhKSxleGFjdE1hdGNoOnRydWV9fWpbZF09bS5nZXQoYSk7az1FeHQuYXBwbHkoe30sZSx7bW9kZWw6aSxmaWx0ZXJzOltsXSxyZW1vdGVGaWx0ZXI6ZmFsc2UsbW9kZWxEZWZhdWx0czpqfSk7bVtjXT1FeHQuZGF0YS5BYnN0cmFjdFN0b3JlLmNyZWF0ZShrKTtpZihiKXttW2NdLmxvYWQoKX19cmV0dXJuIG1bY119fSxyZWFkOmZ1bmN0aW9uKGQsYixqKXt2YXIgZz1kW3RoaXMubmFtZV0oKSxjLGUsYSxoO2cuYWRkKGIucmVhZChqKS5yZWNvcmRzKTtjPXRoaXMuYXNzb2NpYXRlZE1vZGVsLnByb3RvdHlwZS5hc3NvY2lhdGlvbnMuZmluZEJ5KGZ1bmN0aW9uKGkpe3JldHVybiBpLnR5cGU9PT0iYmVsb25nc1RvIiYmaS5hc3NvY2lhdGVkTmFtZT09PWQuJGNsYXNzTmFtZX0pO2lmKGMpe2U9Zy5kYXRhLml0ZW1zO2E9ZS5sZW5ndGg7Zm9yKGg9MDtoPGE7aCsrKXtlW2hdW2MuaW5zdGFuY2VOYW1lXT1kfX19fSk7RXh0LmRlZmluZSgiRXh0LmRhdGEuYXNzb2NpYXRpb24uSGFzT25lIix7ZXh0ZW5kOiJFeHQuZGF0YS5hc3NvY2lhdGlvbi5Bc3NvY2lhdGlvbiIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuZGF0YS5IYXNPbmVBc3NvY2lhdGlvbiIsYWxpYXM6ImFzc29jaWF0aW9uLmhhc29uZSIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYyl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dmFyIGU9dGhpcyxhPWUub3duZXJNb2RlbC5wcm90b3R5cGUsZz1lLmFzc29jaWF0ZWROYW1lLGQ9ZS5nZXR0ZXJOYW1lfHwiZ2V0IitnLGI9ZS5zZXR0ZXJOYW1lfHwic2V0IitnO0V4dC5hcHBseUlmKGUse25hbWU6Zyxmb3JlaWduS2V5OmcudG9Mb3dlckNhc2UoKSsiX2lkIixpbnN0YW5jZU5hbWU6ZysiSGFzT25lSW5zdGFuY2UiLGFzc29jaWF0aW9uS2V5OmcudG9Mb3dlckNhc2UoKX0pO2FbZF09ZS5jcmVhdGVHZXR0ZXIoKTthW2JdPWUuY3JlYXRlU2V0dGVyKCl9LGNyZWF0ZVNldHRlcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1iLm93bmVyTW9kZWwsYT1iLmZvcmVpZ25LZXk7cmV0dXJuIGZ1bmN0aW9uKGcsZCxlKXtpZihnJiZnLmlzTW9kZWwpe2c9Zy5nZXRJZCgpfXRoaXMuc2V0KGEsZyk7aWYoRXh0LmlzRnVuY3Rpb24oZCkpe2Q9e2NhbGxiYWNrOmQsc2NvcGU6ZXx8dGhpc319aWYoRXh0LmlzT2JqZWN0KGQpKXtyZXR1cm4gdGhpcy5zYXZlKGQpfX19LGNyZWF0ZUdldHRlcjpmdW5jdGlvbigpe3ZhciBkPXRoaXMsZz1kLm93bmVyTW9kZWwsZT1kLmFzc29jaWF0ZWROYW1lLGg9ZC5hc3NvY2lhdGVkTW9kZWwsYz1kLmZvcmVpZ25LZXksYj1kLnByaW1hcnlLZXksYT1kLmluc3RhbmNlTmFtZTtyZXR1cm4gZnVuY3Rpb24obCxtKXtsPWx8fHt9O3ZhciBrPXRoaXMsbj1rLmdldChjKSxvLGksajtpZihsLnJlbG9hZD09PXRydWV8fGtbYV09PT11bmRlZmluZWQpe2k9RXh0Lk1vZGVsTWFuYWdlci5jcmVhdGUoe30sZSk7aS5zZXQoYixuKTtpZih0eXBlb2YgbD09ImZ1bmN0aW9uIil7bD17Y2FsbGJhY2s6bCxzY29wZTptfHxrfX1vPWwuc3VjY2VzcztsLnN1Y2Nlc3M9ZnVuY3Rpb24ocCl7a1thXT1wO2lmKG8pe28uYXBwbHkodGhpcyxhcmd1bWVudHMpfX07aC5sb2FkKG4sbCk7a1thXT1pO3JldHVybiBpfWVsc2V7aT1rW2FdO2o9W2ldO209bXx8bC5zY29wZXx8aztFeHQuY2FsbGJhY2sobCxtLGopO0V4dC5jYWxsYmFjayhsLnN1Y2Nlc3MsbSxqKTtFeHQuY2FsbGJhY2sobC5mYWlsdXJlLG0saik7RXh0LmNhbGxiYWNrKGwuY2FsbGJhY2ssbSxqKTtyZXR1cm4gaX19fSxyZWFkOmZ1bmN0aW9uKGMsYSxlKXt2YXIgYj10aGlzLmFzc29jaWF0ZWRNb2RlbC5wcm90b3R5cGUuYXNzb2NpYXRpb25zLmZpbmRCeShmdW5jdGlvbihnKXtyZXR1cm4gZy50eXBlPT09ImJlbG9uZ3NUbyImJmcuYXNzb2NpYXRlZE5hbWU9PT1jLiRjbGFzc05hbWV9KSxkPWEucmVhZChbZV0pLnJlY29yZHNbMF07Y1t0aGlzLmluc3RhbmNlTmFtZV09ZDtpZihiKXtkW2IuaW5zdGFuY2VOYW1lXT1jfX19KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5wcm94eS5XZWJTdG9yYWdlIix7ZXh0ZW5kOiJFeHQuZGF0YS5wcm94eS5DbGllbnQiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmRhdGEuV2ViU3RvcmFnZVByb3h5IixyZXF1aXJlczpbIkV4dC5kYXRhLlNlcXVlbnRpYWxJZEdlbmVyYXRvciJdLGlkOnVuZGVmaW5lZCxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLmNhY2hlPXt9O3RoaXMuaWQ9dGhpcy5pZHx8KHRoaXMuc3RvcmU/dGhpcy5zdG9yZS5zdG9yZUlkOnVuZGVmaW5lZCk7dGhpcy5pbml0aWFsaXplKCl9LGNyZWF0ZTpmdW5jdGlvbihlLGssbCl7dmFyIGo9dGhpcyxkPWUucmVjb3JkcyxjPWQubGVuZ3RoLGE9ai5nZXRJZHMoKSxiLGgsZztlLnNldFN0YXJ0ZWQoKTtpZihqLmlzSGllcmFyY2hpY2FsPT09dW5kZWZpbmVkKXtqLmlzSGllcmFyY2hpY2FsPSEhZFswXS5pc05vZGU7aWYoai5pc0hpZXJhcmNoaWNhbCl7ai5nZXRTdG9yYWdlT2JqZWN0KCkuc2V0SXRlbShqLmdldFRyZWVLZXkoKSx0cnVlKX19Zm9yKGc9MDtnPGM7ZysrKXtoPWRbZ107aWYoaC5waGFudG9tKXtoLnBoYW50b209ZmFsc2U7Yj1qLmdldE5leHRJZCgpfWVsc2V7Yj1oLmdldElkKCl9ai5zZXRSZWNvcmQoaCxiKTtoLmNvbW1pdCgpO2EucHVzaChiKX1qLnNldElkcyhhKTtlLnNldENvbXBsZXRlZCgpO2Uuc2V0U3VjY2Vzc2Z1bCgpO2lmKHR5cGVvZiBrPT0iZnVuY3Rpb24iKXtrLmNhbGwobHx8aixlKX19LHJlYWQ6ZnVuY3Rpb24oZyxtLG8pe3ZhciBsPXRoaXMsZT1bXSxqPTAsbj10cnVlLGQ9bC5tb2RlbCxhLGMsayxoLGI7Zy5zZXRTdGFydGVkKCk7aWYobC5pc0hpZXJhcmNoaWNhbCl7ZT1sLmdldFRyZWVEYXRhKCl9ZWxzZXthPWwuZ2V0SWRzKCk7Yz1hLmxlbmd0aDtiPWcuaWQ7aWYoYil7aD1sLmdldFJlY29yZChiKTtpZihoIT09bnVsbCl7az1uZXcgZChoLGIsaCl9aWYoayl7ZS5wdXNoKGspfWVsc2V7bj1mYWxzZX19ZWxzZXtmb3IoO2o8YztqKyspe2I9YVtqXTtoPWwuZ2V0UmVjb3JkKGIpO2UucHVzaChuZXcgZChoLGIsaCkpfX19aWYobil7Zy5zZXRTdWNjZXNzZnVsKCl9Zy5zZXRDb21wbGV0ZWQoKTtnLnJlc3VsdFNldD1FeHQuY3JlYXRlKCJFeHQuZGF0YS5SZXN1bHRTZXQiLHtyZWNvcmRzOmUsdG90YWw6ZS5sZW5ndGgsbG9hZGVkOnRydWV9KTtpZih0eXBlb2YgbT09ImZ1bmN0aW9uIil7bS5jYWxsKG98fGwsZyl9fSx1cGRhdGU6ZnVuY3Rpb24oZSxqLGspe3ZhciBkPWUucmVjb3JkcyxjPWQubGVuZ3RoLGE9dGhpcy5nZXRJZHMoKSxoLGIsZztlLnNldFN0YXJ0ZWQoKTtmb3IoZz0wO2c8YztnKyspe2g9ZFtnXTt0aGlzLnNldFJlY29yZChoKTtoLmNvbW1pdCgpO2I9aC5nZXRJZCgpO2lmKGIhPT11bmRlZmluZWQmJkV4dC5BcnJheS5pbmRleE9mKGEsYik9PS0xKXthLnB1c2goYil9fXRoaXMuc2V0SWRzKGEpO2Uuc2V0Q29tcGxldGVkKCk7ZS5zZXRTdWNjZXNzZnVsKCk7aWYodHlwZW9mIGo9PSJmdW5jdGlvbiIpe2ouY2FsbChrfHx0aGlzLGUpfX0sZGVzdHJveTpmdW5jdGlvbihkLGssbCl7dmFyIGc9dGhpcyxjPWQucmVjb3JkcyxhPWcuZ2V0SWRzKCksaD1hLmxlbmd0aCxtPVtdLGo9e30sZT1jLmxlbmd0aCxiO2Quc2V0U3RhcnRlZCgpO2Zvcig7ZS0tOyl7RXh0LmFwcGx5KGosZy5yZW1vdmVSZWNvcmQoY1tlXSkpfWZvcihlPTA7ZTxoO2UrKyl7Yj1hW2VdO2lmKCFqW2JdKXttLnB1c2goYil9fWcuc2V0SWRzKG0pO2Quc2V0Q29tcGxldGVkKCk7ZC5zZXRTdWNjZXNzZnVsKCk7aWYodHlwZW9mIGs9PSJmdW5jdGlvbiIpe2suY2FsbChsfHxnLGQpfX0sZ2V0UmVjb3JkOmZ1bmN0aW9uKGQpe3ZhciBiPXRoaXMsYT1iLmNhY2hlLGM9IWFbZF0/RXh0LmRlY29kZShiLmdldFN0b3JhZ2VPYmplY3QoKS5nZXRJdGVtKGIuZ2V0UmVjb3JkS2V5KGQpKSk6YVtkXTtpZighYyl7cmV0dXJuIG51bGx9YVtkXT1jO2NbYi5tb2RlbC5wcm90b3R5cGUuaWRQcm9wZXJ0eV09ZDtyZXR1cm4gY30sc2V0UmVjb3JkOmZ1bmN0aW9uKGssYyl7aWYoYyl7ay5zZXRJZChjKX1lbHNle2M9ay5nZXRJZCgpfXZhciBtPXRoaXMsYT1rLmRhdGEsaD17fSxqPW0ubW9kZWwsbD1qLnByb3RvdHlwZS5maWVsZHMuaXRlbXMsZD1sLmxlbmd0aCxnPTAsbixiLGUsbztmb3IoO2c8ZDtnKyspe249bFtnXTtiPW4ubmFtZTtpZihuLnBlcnNpc3Qpe2hbYl09YVtiXX19ZGVsZXRlIGhbbS5tb2RlbC5wcm90b3R5cGUuaWRQcm9wZXJ0eV07aWYoay5pc05vZGUmJmsuZ2V0KCJkZXB0aCIpPT09MSl7ZGVsZXRlIGgucGFyZW50SWR9ZT1tLmdldFN0b3JhZ2VPYmplY3QoKTtvPW0uZ2V0UmVjb3JkS2V5KGMpO20uY2FjaGVbY109aDtlLnJlbW92ZUl0ZW0obyk7ZS5zZXRJdGVtKG8sRXh0LmVuY29kZShoKSl9LHJlbW92ZVJlY29yZDpmdW5jdGlvbihhKXt2YXIgZD10aGlzLGc9YS5nZXRJZCgpLGI9e30sYyxlO2JbZ109YTtkLmdldFN0b3JhZ2VPYmplY3QoKS5yZW1vdmVJdGVtKGQuZ2V0UmVjb3JkS2V5KGcpKTtkZWxldGUgZC5jYWNoZVtnXTtpZihhLmNoaWxkTm9kZXMpe2U9YS5jaGlsZE5vZGVzO2ZvcihjPWUubGVuZ3RoO2MtLTspe0V4dC5hcHBseShiLGQucmVtb3ZlUmVjb3JkKGVbY10pKX19cmV0dXJuIGJ9LGdldFJlY29yZEtleTpmdW5jdGlvbihhKXtpZihhLmlzTW9kZWwpe2E9YS5nZXRJZCgpfXJldHVybiBFeHQuU3RyaW5nLmZvcm1hdCgiezB9LXsxfSIsdGhpcy5pZCxhKX0sZ2V0UmVjb3JkQ291bnRlcktleTpmdW5jdGlvbigpe3JldHVybiBFeHQuU3RyaW5nLmZvcm1hdCgiezB9LWNvdW50ZXIiLHRoaXMuaWQpfSxnZXRUcmVlS2V5OmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5TdHJpbmcuZm9ybWF0KCJ7MH0tdHJlZSIsdGhpcy5pZCl9LGdldElkczpmdW5jdGlvbigpe3ZhciBnPXRoaXMsZD0oZy5nZXRTdG9yYWdlT2JqZWN0KCkuZ2V0SXRlbShnLmlkKXx8IiIpLnNwbGl0KCIsIiksYj1nLm1vZGVsLGU9ZC5sZW5ndGgsYT1iLnByb3RvdHlwZS5maWVsZHMuZ2V0KGIucHJvdG90eXBlLmlkUHJvcGVydHkpLnR5cGUudHlwZT09PSJzdHJpbmciLGM7aWYoZT09MSYmZFswXT09PSIiKXtkPVtdfWVsc2V7Zm9yKGM9MDtjPGU7YysrKXtkW2NdPWE/ZFtjXTorZFtjXX19cmV0dXJuIGR9LHNldElkczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFN0b3JhZ2VPYmplY3QoKSxjPWEuam9pbigiLCIpO2IucmVtb3ZlSXRlbSh0aGlzLmlkKTtpZighRXh0LmlzRW1wdHkoYykpe2Iuc2V0SXRlbSh0aGlzLmlkLGMpfX0sZ2V0TmV4dElkOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxlPWQuZ2V0U3RvcmFnZU9iamVjdCgpLGM9ZC5nZXRSZWNvcmRDb3VudGVyS2V5KCksYj1kLm1vZGVsLGE9Yi5wcm90b3R5cGUuZmllbGRzLmdldChiLnByb3RvdHlwZS5pZFByb3BlcnR5KS50eXBlLnR5cGU9PT0ic3RyaW5nIixnO2c9ZC5pZEdlbmVyYXRvci5nZW5lcmF0ZSgpO2Uuc2V0SXRlbShjLGcpO2lmKCFhKXtnPStnfXJldHVybiBnfSxnZXRUcmVlRGF0YTpmdW5jdGlvbigpe3ZhciBuPXRoaXMsYT1uLmdldElkcygpLGU9YS5sZW5ndGgsaj1bXSxiPXt9LG89W10saz0wLGg9bi5tb2RlbCxxPWgucHJvdG90eXBlLmlkUHJvcGVydHksZyxtLHAsbCxkLGM7Zm9yKDtrPGU7aysrKXtjPWFba107bT1uLmdldFJlY29yZChjKTtqLnB1c2gobSk7YltjXT1tO2lmKCFtLnBhcmVudElkKXtvLnB1c2gobSl9fWc9by5sZW5ndGg7RXh0LkFycmF5LnNvcnQoaixuLnNvcnRCeVBhcmVudElkKTtmb3Ioaz1nO2s8ZTtrKyspe209altrXTtsPW0ucGFyZW50SWQ7aWYoIXB8fHBbcV0hPT1sKXtwPWJbbF07cC5jaGlsZHJlbj1kPVtdfWQucHVzaChtKX1mb3Ioaz1lO2stLTspe209altrXTtpZighbS5jaGlsZHJlbiYmIW0ubGVhZil7bS5sb2FkZWQ9dHJ1ZX19Zm9yKGs9ZztrLS07KXttPW9ba107b1trXT1uZXcgaChtLG1bcV0sbSl9cmV0dXJuIG99LHNvcnRCeVBhcmVudElkOmZ1bmN0aW9uKGIsYSl7cmV0dXJuKGIucGFyZW50SWR8fDApLShhLnBhcmVudElkfHwwKX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmdldFN0b3JhZ2VPYmplY3QoKSxjPSthLmdldEl0ZW0oYi5nZXRSZWNvcmRDb3VudGVyS2V5KCkpO2Euc2V0SXRlbShiLmlkLGEuZ2V0SXRlbShiLmlkKXx8IiIpO2lmKGEuZ2V0SXRlbShiLmdldFRyZWVLZXkoKSkpe2IuaXNIaWVyYXJjaGljYWw9dHJ1ZX1iLmlkR2VuZXJhdG9yPW5ldyBFeHQuZGF0YS5TZXF1ZW50aWFsSWRHZW5lcmF0b3Ioe3NlZWQ6Yz9jKzE6MX0pfSxjbGVhcjpmdW5jdGlvbigpe3ZhciBkPXRoaXMsZT1kLmdldFN0b3JhZ2VPYmplY3QoKSxjPWQuZ2V0SWRzKCksYT1jLmxlbmd0aCxiO2ZvcihiPTA7YjxhO2IrKyl7ZS5yZW1vdmVJdGVtKGQuZ2V0UmVjb3JkS2V5KGNbYl0pKX1lLnJlbW92ZUl0ZW0oZC5nZXRSZWNvcmRDb3VudGVyS2V5KCkpO2UucmVtb3ZlSXRlbShkLmdldFRyZWVLZXkoKSk7ZS5yZW1vdmVJdGVtKGQuaWQpO2QuY2FjaGU9e319LGdldFN0b3JhZ2VPYmplY3Q6ZnVuY3Rpb24oKXt9fSk7RXh0LmRlZmluZSgiRXh0LmRhdGEucHJveHkuTG9jYWxTdG9yYWdlIix7ZXh0ZW5kOiJFeHQuZGF0YS5wcm94eS5XZWJTdG9yYWdlIixhbGlhczoicHJveHkubG9jYWxzdG9yYWdlIixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5kYXRhLkxvY2FsU3RvcmFnZVByb3h5IixnZXRTdG9yYWdlT2JqZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2V9fSk7RXh0LmRlZmluZSgiRXh0LmRhdGEucHJveHkuUmVzdCIse2V4dGVuZDoiRXh0LmRhdGEucHJveHkuQWpheCIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuZGF0YS5SZXN0UHJveHkiLGFsaWFzOiJwcm94eS5yZXN0IixhcHBlbmRJZDp0cnVlLGJhdGNoQWN0aW9uczpmYWxzZSxidWlsZFVybDpmdW5jdGlvbihnKXt2YXIgZT10aGlzLGM9Zy5vcGVyYXRpb24sYj1jLnJlY29yZHN8fFtdLGE9YlswXSxoPWUuZm9ybWF0LGQ9ZS5nZXRVcmwoZyksaT1hP2EuZ2V0SWQoKTpjLmlkO2lmKGUuYXBwZW5kSWQmJmkpe2lmKCFkLm1hdGNoKC9cLyQvKSl7ZCs9Ii8ifWQrPWl9aWYoaCl7aWYoIWQubWF0Y2goL1wuJC8pKXtkKz0iLiJ9ZCs9aH1nLnVybD1kO3JldHVybiBlLmNhbGxQYXJlbnQoYXJndW1lbnRzKX19LGZ1bmN0aW9uKCl7RXh0LmFwcGx5KHRoaXMucHJvdG90eXBlLHthY3Rpb25NZXRob2RzOntjcmVhdGU6IlBPU1QiLHJlYWQ6IkdFVCIsdXBkYXRlOiJQVVQiLGRlc3Ryb3k6IkRFTEVURSJ9fSl9KTtFeHQuZGVmaW5lKCJFeHQuZGF0YS5wcm94eS5TZXNzaW9uU3RvcmFnZSIse2V4dGVuZDoiRXh0LmRhdGEucHJveHkuV2ViU3RvcmFnZSIsYWxpYXM6InByb3h5LnNlc3Npb25zdG9yYWdlIixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5kYXRhLlNlc3Npb25TdG9yYWdlUHJveHkiLGdldFN0b3JhZ2VPYmplY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LnNlc3Npb25TdG9yYWdlfX0pO0V4dC5kZWZpbmUoIkV4dC5kZC5ERFRhcmdldCIse2V4dGVuZDoiRXh0LmRkLkRyYWdEcm9wIixjb25zdHJ1Y3RvcjpmdW5jdGlvbihjLGEsYil7aWYoYyl7dGhpcy5pbml0VGFyZ2V0KGMsYSxiKX19LGdldERyYWdFbDpFeHQuZW1wdHlGbixpc1ZhbGlkSGFuZGxlQ2hpbGQ6RXh0LmVtcHR5Rm4sc3RhcnREcmFnOkV4dC5lbXB0eUZuLGVuZERyYWc6RXh0LmVtcHR5Rm4sb25EcmFnOkV4dC5lbXB0eUZuLG9uRHJhZ0Ryb3A6RXh0LmVtcHR5Rm4sb25EcmFnRW50ZXI6RXh0LmVtcHR5Rm4sb25EcmFnT3V0OkV4dC5lbXB0eUZuLG9uRHJhZ092ZXI6RXh0LmVtcHR5Rm4sb25JbnZhbGlkRHJvcDpFeHQuZW1wdHlGbixvbk1vdXNlRG93bjpFeHQuZW1wdHlGbixvbk1vdXNlVXA6RXh0LmVtcHR5Rm4sc2V0WENvbnN0cmFpbnQ6RXh0LmVtcHR5Rm4sc2V0WUNvbnN0cmFpbnQ6RXh0LmVtcHR5Rm4scmVzZXRDb25zdHJhaW50czpFeHQuZW1wdHlGbixjbGVhckNvbnN0cmFpbnRzOkV4dC5lbXB0eUZuLGNsZWFyVGlja3M6RXh0LmVtcHR5Rm4sc2V0SW5pdFBvc2l0aW9uOkV4dC5lbXB0eUZuLHNldERyYWdFbElkOkV4dC5lbXB0eUZuLHNldEhhbmRsZUVsSWQ6RXh0LmVtcHR5Rm4sc2V0T3V0ZXJIYW5kbGVFbElkOkV4dC5lbXB0eUZuLGFkZEludmFsaWRIYW5kbGVDbGFzczpFeHQuZW1wdHlGbixhZGRJbnZhbGlkSGFuZGxlSWQ6RXh0LmVtcHR5Rm4sYWRkSW52YWxpZEhhbmRsZVR5cGU6RXh0LmVtcHR5Rm4scmVtb3ZlSW52YWxpZEhhbmRsZUNsYXNzOkV4dC5lbXB0eUZuLHJlbW92ZUludmFsaWRIYW5kbGVJZDpFeHQuZW1wdHlGbixyZW1vdmVJbnZhbGlkSGFuZGxlVHlwZTpFeHQuZW1wdHlGbix0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybigiRERUYXJnZXQgIit0aGlzLmlkKX19KTtFeHQuZGVmaW5lKCJFeHQuZGQuRHJhZ1RyYWNrZXIiLHt1c2VzOlsiRXh0LnV0aWwuUmVnaW9uIl0sbWl4aW5zOntvYnNlcnZhYmxlOiJFeHQudXRpbC5PYnNlcnZhYmxlIn0sYWN0aXZlOmZhbHNlLHRyYWNrT3ZlcjpmYWxzZSx0b2xlcmFuY2U6NSxhdXRvU3RhcnQ6ZmFsc2UsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztFeHQuYXBwbHkoYixhKTtiLmFkZEV2ZW50cygibW91c2VvdmVyIiwibW91c2VvdXQiLCJtb3VzZWRvd24iLCJtb3VzZXVwIiwibW91c2Vtb3ZlIiwiYmVmb3JlZHJhZ3N0YXJ0IiwiZHJhZ3N0YXJ0IiwiZHJhZ2VuZCIsImRyYWciKTtiLmRyYWdSZWdpb249bmV3IEV4dC51dGlsLlJlZ2lvbigwLDAsMCwwKTtpZihiLmVsKXtiLmluaXRFbChiLmVsKX1iLm1peGlucy5vYnNlcnZhYmxlLmNvbnN0cnVjdG9yLmNhbGwoYik7aWYoYi5kaXNhYmxlZCl7Yi5kaXNhYmxlKCl9fSxpbml0RWw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLmVsPUV4dC5nZXQoYSk7Yi5oYW5kbGU9RXh0LmdldChiLmRlbGVnYXRlKTtiLmRlbGVnYXRlPWIuaGFuZGxlP3VuZGVmaW5lZDpiLmRlbGVnYXRlO2lmKCFiLmhhbmRsZSl7Yi5oYW5kbGU9Yi5lbH1iLm1vbihiLmhhbmRsZSx7bW91c2Vkb3duOmIub25Nb3VzZURvd24sZGVsZWdhdGU6Yi5kZWxlZ2F0ZSxzY29wZTpifSk7aWYoYi50cmFja092ZXJ8fGIub3ZlckNscyl7Yi5tb24oYi5oYW5kbGUse21vdXNlb3ZlcjpiLm9uTW91c2VPdmVyLG1vdXNlb3V0OmIub25Nb3VzZU91dCxkZWxlZ2F0ZTpiLmRlbGVnYXRlLHNjb3BlOmJ9KX19LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPXRydWV9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9ZmFsc2V9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyTGlzdGVuZXJzKCk7ZGVsZXRlIHRoaXMuZWx9LG9uTW91c2VPdmVyOmZ1bmN0aW9uKGMsYil7dmFyIGE9dGhpcztpZighYS5kaXNhYmxlZCl7aWYoRXh0LkV2ZW50TWFuYWdlci5jb250YWlucyhjKXx8YS5kZWxlZ2F0ZSl7YS5tb3VzZUlzT3V0PWZhbHNlO2lmKGEub3ZlckNscyl7YS5lbC5hZGRDbHMoYS5vdmVyQ2xzKX1hLmZpcmVFdmVudCgibW91c2VvdmVyIixhLGMsYS5kZWxlZ2F0ZT9jLmdldFRhcmdldChhLmRlbGVnYXRlLGIpOmEuaGFuZGxlKX19fSxvbk1vdXNlT3V0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoYS5tb3VzZUlzRG93bil7YS5tb3VzZUlzT3V0PXRydWV9ZWxzZXtpZihhLm92ZXJDbHMpe2EuZWwucmVtb3ZlQ2xzKGEub3ZlckNscyl9YS5maXJlRXZlbnQoIm1vdXNlb3V0IixhLGIpfX0sb25Nb3VzZURvd246ZnVuY3Rpb24oZCxjKXt2YXIgYj10aGlzLGE7aWYoYi5kaXNhYmxlZHx8ZC5kcmFnVHJhY2tlZCl7cmV0dXJufWIuZHJhZ1RhcmdldD1iLmRlbGVnYXRlP2M6Yi5oYW5kbGUuZG9tO2Iuc3RhcnRYWT1iLmxhc3RYWT1kLmdldFhZKCk7Yi5zdGFydFJlZ2lvbj1FeHQuZmx5KGIuZHJhZ1RhcmdldCkuZ2V0UmVnaW9uKCk7aWYoYi5maXJlRXZlbnQoIm1vdXNlZG93biIsYixkKT09PWZhbHNlfHxiLmZpcmVFdmVudCgiYmVmb3JlZHJhZ3N0YXJ0IixiLGQpPT09ZmFsc2V8fGIub25CZWZvcmVTdGFydChkKT09PWZhbHNlKXtyZXR1cm59Yi5tb3VzZUlzRG93bj10cnVlO2QuZHJhZ1RyYWNrZWQ9dHJ1ZTthPWIuZWwuZG9tO2lmKEV4dC5pc0lFJiZhLnNldENhcHR1cmUpe2Euc2V0Q2FwdHVyZSgpfWlmKGIucHJldmVudERlZmF1bHQhPT1mYWxzZSl7ZC5wcmV2ZW50RGVmYXVsdCgpfUV4dC5nZXREb2MoKS5vbih7c2NvcGU6Yixtb3VzZXVwOmIub25Nb3VzZVVwLG1vdXNlbW92ZTpiLm9uTW91c2VNb3ZlLHNlbGVjdHN0YXJ0OmIuc3RvcFNlbGVjdH0pO2lmKGIuYXV0b1N0YXJ0KXtiLnRpbWVyPUV4dC5kZWZlcihiLnRyaWdnZXJTdGFydCxiLmF1dG9TdGFydD09PXRydWU/MTAwMDpiLmF1dG9TdGFydCxiLFtkXSl9fSxvbk1vdXNlTW92ZTpmdW5jdGlvbihnLGQpe3ZhciBiPXRoaXMsYz1nLmdldFhZKCksYT1iLnN0YXJ0WFk7Zy5wcmV2ZW50RGVmYXVsdCgpO2IubGFzdFhZPWM7aWYoIWIuYWN0aXZlKXtpZihNYXRoLm1heChNYXRoLmFicyhhWzBdLWNbMF0pLE1hdGguYWJzKGFbMV0tY1sxXSkpPmIudG9sZXJhbmNlKXtiLnRyaWdnZXJTdGFydChnKX1lbHNle3JldHVybn19aWYoYi5maXJlRXZlbnQoIm1vdXNlbW92ZSIsYixnKT09PWZhbHNlKXtiLm9uTW91c2VVcChnKX1lbHNle2Iub25EcmFnKGcpO2IuZmlyZUV2ZW50KCJkcmFnIixiLGcpfX0sb25Nb3VzZVVwOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5tb3VzZUlzRG93bj1mYWxzZTtpZihhLm1vdXNlSXNPdXQpe2EubW91c2VJc091dD1mYWxzZTthLm9uTW91c2VPdXQoYil9Yi5wcmV2ZW50RGVmYXVsdCgpO2lmKEV4dC5pc0lFJiZkb2N1bWVudC5yZWxlYXNlQ2FwdHVyZSl7ZG9jdW1lbnQucmVsZWFzZUNhcHR1cmUoKX1hLmZpcmVFdmVudCgibW91c2V1cCIsYSxiKTthLmVuZERyYWcoYil9LGVuZERyYWc6ZnVuY3Rpb24oZCl7dmFyIGI9dGhpcyxjPUV4dC5nZXREb2MoKSxhPWIuYWN0aXZlO2MudW4oIm1vdXNlbW92ZSIsYi5vbk1vdXNlTW92ZSxiKTtjLnVuKCJtb3VzZXVwIixiLm9uTW91c2VVcCxiKTtjLnVuKCJzZWxlY3RzdGFydCIsYi5zdG9wU2VsZWN0LGIpO2IuY2xlYXJTdGFydCgpO2IuYWN0aXZlPWZhbHNlO2lmKGEpe2Iub25FbmQoZCk7Yi5maXJlRXZlbnQoImRyYWdlbmQiLGIsZCl9ZGVsZXRlIGIuX2NvbnN0cmFpblJlZ2lvbjtkZWxldGUgRXh0LkV2ZW50T2JqZWN0LmRyYWdUcmFja2VkfSx0cmlnZ2VyU3RhcnQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczthLmNsZWFyU3RhcnQoKTthLmFjdGl2ZT10cnVlO2Eub25TdGFydChiKTthLmZpcmVFdmVudCgiZHJhZ3N0YXJ0IixhLGIpfSxjbGVhclN0YXJ0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50aW1lcjtpZihhKXtjbGVhclRpbWVvdXQoYSk7ZGVsZXRlIHRoaXMudGltZXJ9fSxzdG9wU2VsZWN0OmZ1bmN0aW9uKGEpe2Euc3RvcEV2ZW50KCk7cmV0dXJuIGZhbHNlfSxvbkJlZm9yZVN0YXJ0OmZ1bmN0aW9uKGEpe30sb25TdGFydDpmdW5jdGlvbihhKXt9LG9uRHJhZzpmdW5jdGlvbihhKXt9LG9uRW5kOmZ1bmN0aW9uKGEpe30sZ2V0RHJhZ1RhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRyYWdUYXJnZXR9LGdldERyYWdDdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSxnZXRDb25zdHJhaW5SZWdpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuY29uc3RyYWluVG8pe2lmKGEuY29uc3RyYWluVG8gaW5zdGFuY2VvZiBFeHQudXRpbC5SZWdpb24pe3JldHVybiBhLmNvbnN0cmFpblRvfWlmKCFhLl9jb25zdHJhaW5SZWdpb24pe2EuX2NvbnN0cmFpblJlZ2lvbj1FeHQuZmx5KGEuY29uc3RyYWluVG8pLmdldFZpZXdSZWdpb24oKX19ZWxzZXtpZighYS5fY29uc3RyYWluUmVnaW9uKXthLl9jb25zdHJhaW5SZWdpb249YS5nZXREcmFnQ3QoKS5nZXRWaWV3UmVnaW9uKCl9fXJldHVybiBhLl9jb25zdHJhaW5SZWdpb259LGdldFhZOmZ1bmN0aW9uKGEpe3JldHVybiBhP3RoaXMuY29uc3RyYWluTW9kZXNbYV0odGhpcyx0aGlzLmxhc3RYWSk6dGhpcy5sYXN0WFl9LGdldE9mZnNldDpmdW5jdGlvbihjKXt2YXIgYj10aGlzLmdldFhZKGMpLGE9dGhpcy5zdGFydFhZO3JldHVybltiWzBdLWFbMF0sYlsxXS1hWzFdXX0sY29uc3RyYWluTW9kZXM6e3BvaW50OmZ1bmN0aW9uKGIsZCl7dmFyIGM9Yi5kcmFnUmVnaW9uLGE9Yi5nZXRDb25zdHJhaW5SZWdpb24oKTtpZighYSl7cmV0dXJuIGR9Yy54PWMubGVmdD1jWzBdPWMucmlnaHQ9ZFswXTtjLnk9Yy50b3A9Y1sxXT1jLmJvdHRvbT1kWzFdO2MuY29uc3RyYWluVG8oYSk7cmV0dXJuW2MubGVmdCxjLnRvcF19LGRyYWdUYXJnZXQ6ZnVuY3Rpb24oYyxnKXt2YXIgYj1jLnN0YXJ0WFksZT1jLnN0YXJ0UmVnaW9uLmNvcHkoKSxhPWMuZ2V0Q29uc3RyYWluUmVnaW9uKCksZDtpZighYSl7cmV0dXJuIGd9ZS50cmFuc2xhdGVCeShnWzBdLWJbMF0sZ1sxXS1iWzFdKTtpZihlLnJpZ2h0PmEucmlnaHQpe2dbMF0rPWQ9KGEucmlnaHQtZS5yaWdodCk7ZS5sZWZ0Kz1kfWlmKGUubGVmdDxhLmxlZnQpe2dbMF0rPShhLmxlZnQtZS5sZWZ0KX1pZihlLmJvdHRvbT5hLmJvdHRvbSl7Z1sxXSs9ZD0oYS5ib3R0b20tZS5ib3R0b20pO2UudG9wKz1kfWlmKGUudG9wPGEudG9wKXtnWzFdKz0oYS50b3AtZS50b3ApfXJldHVybiBnfX19KTtFeHQuZGVmaW5lKCJFeHQuZGQuRHJhZ1pvbmUiLHtleHRlbmQ6IkV4dC5kZC5EcmFnU291cmNlIixjb25zdHJ1Y3RvcjpmdW5jdGlvbihiLGEpe3RoaXMuY2FsbFBhcmVudChbYixhXSk7aWYodGhpcy5jb250YWluZXJTY3JvbGwpe0V4dC5kZC5TY3JvbGxNYW5hZ2VyLnJlZ2lzdGVyKHRoaXMuZWwpfX0sZ2V0RHJhZ0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5kZC5SZWdpc3RyeS5nZXRIYW5kbGVGcm9tRXZlbnQoYSl9LG9uSW5pdERyYWc6ZnVuY3Rpb24oYSxiKXt0aGlzLnByb3h5LnVwZGF0ZSh0aGlzLmRyYWdEYXRhLmRkZWwuY2xvbmVOb2RlKHRydWUpKTt0aGlzLm9uU3RhcnREcmFnKGEsYik7cmV0dXJuIHRydWV9LGFmdGVyUmVwYWlyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihFeHQuZW5hYmxlRngpe0V4dC5mbHkoYS5kcmFnRGF0YS5kZGVsKS5oaWdobGlnaHQoYS5yZXBhaXJIaWdobGlnaHRDb2xvcil9YS5kcmFnZ2luZz1mYWxzZX0sZ2V0UmVwYWlyWFk6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5mbHkodGhpcy5kcmFnRGF0YS5kZGVsKS5nZXRYWSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KCk7aWYodGhpcy5jb250YWluZXJTY3JvbGwpe0V4dC5kZC5TY3JvbGxNYW5hZ2VyLnVucmVnaXN0ZXIodGhpcy5lbCl9fX0pO0V4dC5kZWZpbmUoIkV4dC5kZC5TY3JvbGxNYW5hZ2VyIix7c2luZ2xldG9uOnRydWUscmVxdWlyZXM6WyJFeHQuZGQuRHJhZ0Ryb3BNYW5hZ2VyIl0sY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt2YXIgYT1FeHQuZGQuRHJhZ0Ryb3BNYW5hZ2VyO2EuZmlyZUV2ZW50cz1FeHQuRnVuY3Rpb24uY3JlYXRlU2VxdWVuY2UoYS5maXJlRXZlbnRzLHRoaXMub25GaXJlLHRoaXMpO2Euc3RvcERyYWc9RXh0LkZ1bmN0aW9uLmNyZWF0ZVNlcXVlbmNlKGEuc3RvcERyYWcsdGhpcy5vblN0b3AsdGhpcyk7dGhpcy5kb1Njcm9sbD1FeHQuRnVuY3Rpb24uYmluZCh0aGlzLmRvU2Nyb2xsLHRoaXMpO3RoaXMuZGRtSW5zdGFuY2U9YTt0aGlzLmVscz17fTt0aGlzLmRyYWdFbD1udWxsO3RoaXMucHJvYz17fX0sb25TdG9wOmZ1bmN0aW9uKGEpe3ZhciBiPUV4dC5kZC5TY3JvbGxNYW5hZ2VyO2IuZHJhZ0VsPW51bGw7Yi5jbGVhclByb2MoKX0sdHJpZ2dlclJlZnJlc2g6ZnVuY3Rpb24oKXtpZih0aGlzLmRkbUluc3RhbmNlLmRyYWdDdXJyZW50KXt0aGlzLmRkbUluc3RhbmNlLnJlZnJlc2hDYWNoZSh0aGlzLmRkbUluc3RhbmNlLmRyYWdDdXJyZW50Lmdyb3Vwcyl9fSxkb1Njcm9sbDpmdW5jdGlvbigpe2lmKHRoaXMuZGRtSW5zdGFuY2UuZHJhZ0N1cnJlbnQpe3ZhciBhPXRoaXMucHJvYyxiPWEuZWwsYz1hLmVsLmRkU2Nyb2xsQ29uZmlnLGQ9Yz9jLmluY3JlbWVudDp0aGlzLmluY3JlbWVudDtpZighdGhpcy5hbmltYXRlKXtpZihiLnNjcm9sbChhLmRpcixkKSl7dGhpcy50cmlnZ2VyUmVmcmVzaCgpfX1lbHNle2Iuc2Nyb2xsKGEuZGlyLGQsdHJ1ZSx0aGlzLmFuaW1EdXJhdGlvbix0aGlzLnRyaWdnZXJSZWZyZXNoKX19fSxjbGVhclByb2M6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb2M7aWYoYS5pZCl7Y2xlYXJJbnRlcnZhbChhLmlkKX1hLmlkPTA7YS5lbD1udWxsO2EuZGlyPSIifSxzdGFydFByb2M6ZnVuY3Rpb24oYixhKXt0aGlzLmNsZWFyUHJvYygpO3RoaXMucHJvYy5lbD1iO3RoaXMucHJvYy5kaXI9YTt2YXIgZD1iLmRkU2Nyb2xsQ29uZmlnP2IuZGRTY3JvbGxDb25maWcuZGRHcm91cDp1bmRlZmluZWQsYz0oYi5kZFNjcm9sbENvbmZpZyYmYi5kZFNjcm9sbENvbmZpZy5mcmVxdWVuY3kpP2IuZGRTY3JvbGxDb25maWcuZnJlcXVlbmN5OnRoaXMuZnJlcXVlbmN5O2lmKGQ9PT11bmRlZmluZWR8fHRoaXMuZGRtSW5zdGFuY2UuZHJhZ0N1cnJlbnQuZGRHcm91cD09ZCl7dGhpcy5wcm9jLmlkPXNldEludGVydmFsKHRoaXMuZG9TY3JvbGwsYyl9fSxvbkZpcmU6ZnVuY3Rpb24oaCxrKXtpZihrfHwhdGhpcy5kZG1JbnN0YW5jZS5kcmFnQ3VycmVudCl7cmV0dXJufWlmKCF0aGlzLmRyYWdFbHx8dGhpcy5kcmFnRWwhPXRoaXMuZGRtSW5zdGFuY2UuZHJhZ0N1cnJlbnQpe3RoaXMuZHJhZ0VsPXRoaXMuZGRtSW5zdGFuY2UuZHJhZ0N1cnJlbnQ7dGhpcy5yZWZyZXNoQ2FjaGUoKX12YXIgbD1oLmdldFhZKCksbT1oLmdldFBvaW50KCksaT10aGlzLnByb2MsZz10aGlzLmVscyxiLGQsYSxqO2ZvcihiIGluIGcpe2Q9Z1tiXTthPWQuX3JlZ2lvbjtqPWQuZGRTY3JvbGxDb25maWc/ZC5kZFNjcm9sbENvbmZpZzp0aGlzO2lmKGEmJmEuY29udGFpbnMobSkmJmQuaXNTY3JvbGxhYmxlKCkpe2lmKGEuYm90dG9tLW0ueTw9ai52dGhyZXNoKXtpZihpLmVsIT1kKXt0aGlzLnN0YXJ0UHJvYyhkLCJkb3duIil9cmV0dXJufWVsc2V7aWYoYS5yaWdodC1tLng8PWouaHRocmVzaCl7aWYoaS5lbCE9ZCl7dGhpcy5zdGFydFByb2MoZCwibGVmdCIpfXJldHVybn1lbHNle2lmKG0ueS1hLnRvcDw9ai52dGhyZXNoKXtpZihpLmVsIT1kKXt0aGlzLnN0YXJ0UHJvYyhkLCJ1cCIpfXJldHVybn1lbHNle2lmKG0ueC1hLmxlZnQ8PWouaHRocmVzaCl7aWYoaS5lbCE9ZCl7dGhpcy5zdGFydFByb2MoZCwicmlnaHQiKX1yZXR1cm59fX19fX10aGlzLmNsZWFyUHJvYygpfSxyZWdpc3RlcjpmdW5jdGlvbihjKXtpZihFeHQuaXNBcnJheShjKSl7Zm9yKHZhciBiPTAsYT1jLmxlbmd0aDtiPGE7YisrKXt0aGlzLnJlZ2lzdGVyKGNbYl0pfX1lbHNle2M9RXh0LmdldChjKTt0aGlzLmVsc1tjLmlkXT1jfX0sdW5yZWdpc3RlcjpmdW5jdGlvbihjKXtpZihFeHQuaXNBcnJheShjKSl7Zm9yKHZhciBiPTAsYT1jLmxlbmd0aDtiPGE7YisrKXt0aGlzLnVucmVnaXN0ZXIoY1tiXSl9fWVsc2V7Yz1FeHQuZ2V0KGMpO2RlbGV0ZSB0aGlzLmVsc1tjLmlkXX19LHZ0aHJlc2g6MjUsaHRocmVzaDoyNSxpbmNyZW1lbnQ6MTAwLGZyZXF1ZW5jeTo1MDAsYW5pbWF0ZTp0cnVlLGFuaW1EdXJhdGlvbjowLjQsZGRHcm91cDp1bmRlZmluZWQscmVmcmVzaENhY2hlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbHMsYjtmb3IoYiBpbiBhKXtpZih0eXBlb2YgYVtiXT09Im9iamVjdCIpe2FbYl0uX3JlZ2lvbj1hW2JdLmdldFJlZ2lvbigpfX19fSk7RXh0LmRlZmluZSgiRXh0LmRkLkRyb3BUYXJnZXQiLHtleHRlbmQ6IkV4dC5kZC5ERFRhcmdldCIscmVxdWlyZXM6WyJFeHQuZGQuU2Nyb2xsTWFuYWdlciJdLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGIsYSl7dGhpcy5lbD1FeHQuZ2V0KGIpO0V4dC5hcHBseSh0aGlzLGEpO2lmKHRoaXMuY29udGFpbmVyU2Nyb2xsKXtFeHQuZGQuU2Nyb2xsTWFuYWdlci5yZWdpc3Rlcih0aGlzLmVsKX10aGlzLmNhbGxQYXJlbnQoW3RoaXMuZWwuZG9tLHRoaXMuZGRHcm91cHx8dGhpcy5ncm91cCx7aXNUYXJnZXQ6dHJ1ZX1dKX0sZHJvcEFsbG93ZWQ6RXh0LmJhc2VDU1NQcmVmaXgrImRkLWRyb3Atb2siLGRyb3BOb3RBbGxvd2VkOkV4dC5iYXNlQ1NTUHJlZml4KyJkZC1kcm9wLW5vZHJvcCIsaXNUYXJnZXQ6dHJ1ZSxpc05vdGlmeVRhcmdldDp0cnVlLG5vdGlmeUVudGVyOmZ1bmN0aW9uKGEsYyxiKXtpZih0aGlzLm92ZXJDbGFzcyl7dGhpcy5lbC5hZGRDbHModGhpcy5vdmVyQ2xhc3MpfXJldHVybiB0aGlzLmRyb3BBbGxvd2VkfSxub3RpZnlPdmVyOmZ1bmN0aW9uKGEsYyxiKXtyZXR1cm4gdGhpcy5kcm9wQWxsb3dlZH0sbm90aWZ5T3V0OmZ1bmN0aW9uKGEsYyxiKXtpZih0aGlzLm92ZXJDbGFzcyl7dGhpcy5lbC5yZW1vdmVDbHModGhpcy5vdmVyQ2xhc3MpfX0sbm90aWZ5RHJvcDpmdW5jdGlvbihhLGMsYil7cmV0dXJuIGZhbHNlfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KCk7aWYodGhpcy5jb250YWluZXJTY3JvbGwpe0V4dC5kZC5TY3JvbGxNYW5hZ2VyLnVucmVnaXN0ZXIodGhpcy5lbCl9fX0pO0V4dC5kZWZpbmUoIkV4dC5kZC5SZWdpc3RyeSIse3NpbmdsZXRvbjp0cnVlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50cz17fTt0aGlzLmhhbmRsZXM9e307dGhpcy5hdXRvSWRTZWVkPTB9LGdldElkOmZ1bmN0aW9uKGIsYSl7aWYodHlwZW9mIGI9PSJzdHJpbmciKXtyZXR1cm4gYn12YXIgYz1iLmlkO2lmKCFjJiZhIT09ZmFsc2Upe2M9ImV4dGRkLSIrKCsrdGhpcy5hdXRvSWRTZWVkKTtiLmlkPWN9cmV0dXJuIGN9LHJlZ2lzdGVyOmZ1bmN0aW9uKGQsZSl7ZT1lfHx7fTtpZih0eXBlb2YgZD09InN0cmluZyIpe2Q9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZCl9ZS5kZGVsPWQ7dGhpcy5lbGVtZW50c1t0aGlzLmdldElkKGQpXT1lO2lmKGUuaXNIYW5kbGUhPT1mYWxzZSl7dGhpcy5oYW5kbGVzW2UuZGRlbC5pZF09ZX1pZihlLmhhbmRsZXMpe3ZhciBjPWUuaGFuZGxlcyxiLGE7Zm9yKGI9MCxhPWMubGVuZ3RoO2I8YTtiKyspe3RoaXMuaGFuZGxlc1t0aGlzLmdldElkKGNbYl0pXT1lfX19LHVucmVnaXN0ZXI6ZnVuY3Rpb24oZCl7dmFyIGc9dGhpcy5nZXRJZChkLGZhbHNlKSxlPXRoaXMuZWxlbWVudHNbZ10sYyxiLGE7aWYoZSl7ZGVsZXRlIHRoaXMuZWxlbWVudHNbZ107aWYoZS5oYW5kbGVzKXtjPWUuaGFuZGxlcztmb3IoYj0wLGE9Yy5sZW5ndGg7YjxhO2IrKyl7ZGVsZXRlIHRoaXMuaGFuZGxlc1t0aGlzLmdldElkKGNbYl0sZmFsc2UpXX19fX0sZ2V0SGFuZGxlOmZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhIT0ic3RyaW5nIil7YT1hLmlkfXJldHVybiB0aGlzLmhhbmRsZXNbYV19LGdldEhhbmRsZUZyb21FdmVudDpmdW5jdGlvbihiKXt2YXIgYT1iLmdldFRhcmdldCgpO3JldHVybiBhP3RoaXMuaGFuZGxlc1thLmlkXTpudWxsfSxnZXRUYXJnZXQ6ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGEhPSJzdHJpbmciKXthPWEuaWR9cmV0dXJuIHRoaXMuZWxlbWVudHNbYV19LGdldFRhcmdldEZyb21FdmVudDpmdW5jdGlvbihiKXt2YXIgYT1iLmdldFRhcmdldCgpO3JldHVybiBhP3RoaXMuZWxlbWVudHNbYS5pZF18fHRoaXMuaGFuZGxlc1thLmlkXTpudWxsfX0pO0V4dC5kZWZpbmUoIkV4dC5kZC5Ecm9wWm9uZSIse2V4dGVuZDoiRXh0LmRkLkRyb3BUYXJnZXQiLHJlcXVpcmVzOlsiRXh0LmRkLlJlZ2lzdHJ5Il0sZ2V0VGFyZ2V0RnJvbUV2ZW50OmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuZGQuUmVnaXN0cnkuZ2V0VGFyZ2V0RnJvbUV2ZW50KGEpfSxvbk5vZGVFbnRlcjpmdW5jdGlvbihkLGEsYyxiKXt9LG9uTm9kZU92ZXI6ZnVuY3Rpb24oZCxhLGMsYil7cmV0dXJuIHRoaXMuZHJvcEFsbG93ZWR9LG9uTm9kZU91dDpmdW5jdGlvbihkLGEsYyxiKXt9LG9uTm9kZURyb3A6ZnVuY3Rpb24oZCxhLGMsYil7cmV0dXJuIGZhbHNlfSxvbkNvbnRhaW5lck92ZXI6ZnVuY3Rpb24oYSxjLGIpe3JldHVybiB0aGlzLmRyb3BOb3RBbGxvd2VkfSxvbkNvbnRhaW5lckRyb3A6ZnVuY3Rpb24oYSxjLGIpe3JldHVybiBmYWxzZX0sbm90aWZ5RW50ZXI6ZnVuY3Rpb24oYSxjLGIpe3JldHVybiB0aGlzLmRyb3BOb3RBbGxvd2VkfSxub3RpZnlPdmVyOmZ1bmN0aW9uKGEsYyxiKXt2YXIgZD10aGlzLmdldFRhcmdldEZyb21FdmVudChjKTtpZighZCl7aWYodGhpcy5sYXN0T3Zlck5vZGUpe3RoaXMub25Ob2RlT3V0KHRoaXMubGFzdE92ZXJOb2RlLGEsYyxiKTt0aGlzLmxhc3RPdmVyTm9kZT1udWxsfXJldHVybiB0aGlzLm9uQ29udGFpbmVyT3ZlcihhLGMsYil9aWYodGhpcy5sYXN0T3Zlck5vZGUhPWQpe2lmKHRoaXMubGFzdE92ZXJOb2RlKXt0aGlzLm9uTm9kZU91dCh0aGlzLmxhc3RPdmVyTm9kZSxhLGMsYil9dGhpcy5vbk5vZGVFbnRlcihkLGEsYyxiKTt0aGlzLmxhc3RPdmVyTm9kZT1kfXJldHVybiB0aGlzLm9uTm9kZU92ZXIoZCxhLGMsYil9LG5vdGlmeU91dDpmdW5jdGlvbihhLGMsYil7aWYodGhpcy5sYXN0T3Zlck5vZGUpe3RoaXMub25Ob2RlT3V0KHRoaXMubGFzdE92ZXJOb2RlLGEsYyxiKTt0aGlzLmxhc3RPdmVyTm9kZT1udWxsfX0sbm90aWZ5RHJvcDpmdW5jdGlvbihhLGMsYil7aWYodGhpcy5sYXN0T3Zlck5vZGUpe3RoaXMub25Ob2RlT3V0KHRoaXMubGFzdE92ZXJOb2RlLGEsYyxiKTt0aGlzLmxhc3RPdmVyTm9kZT1udWxsfXZhciBkPXRoaXMuZ2V0VGFyZ2V0RnJvbUV2ZW50KGMpO3JldHVybiBkP3RoaXMub25Ob2RlRHJvcChkLGEsYyxiKTp0aGlzLm9uQ29udGFpbmVyRHJvcChhLGMsYil9LHRyaWdnZXJDYWNoZVJlZnJlc2g6ZnVuY3Rpb24oKXtFeHQuZGQuRERNLnJlZnJlc2hDYWNoZSh0aGlzLmdyb3Vwcyl9fSk7RXh0LmRlZmluZSgiRXh0LmRpcmVjdC5FdmVudCIse2FsaWFzOiJkaXJlY3QuZXZlbnQiLHJlcXVpcmVzOlsiRXh0LmRpcmVjdC5NYW5hZ2VyIl0sc3RhdHVzOnRydWUsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7RXh0LmFwcGx5KHRoaXMsYSl9LGdldERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfX0pO0V4dC5kZWZpbmUoIkV4dC5kaXJlY3QuUmVtb3RpbmdFdmVudCIse2V4dGVuZDoiRXh0LmRpcmVjdC5FdmVudCIsYWxpYXM6ImRpcmVjdC5ycGMiLGdldFRyYW5zYWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNhY3Rpb258fEV4dC5kaXJlY3QuTWFuYWdlci5nZXRUcmFuc2FjdGlvbih0aGlzLnRpZCl9fSk7RXh0LmRlZmluZSgiRXh0LmRpcmVjdC5FeGNlcHRpb25FdmVudCIse2V4dGVuZDoiRXh0LmRpcmVjdC5SZW1vdGluZ0V2ZW50IixhbGlhczoiZGlyZWN0LmV4Y2VwdGlvbiIsc3RhdHVzOmZhbHNlfSk7RXh0LmRlZmluZSgiRXh0LmRpcmVjdC5Qcm92aWRlciIse2FsaWFzOiJkaXJlY3QucHJvdmlkZXIiLG1peGluczp7b2JzZXJ2YWJsZToiRXh0LnV0aWwuT2JzZXJ2YWJsZSJ9LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7RXh0LmFwcGx5KGIsYSk7Yi5hZGRFdmVudHMoImNvbm5lY3QiLCJkaXNjb25uZWN0IiwiZGF0YSIsImV4Y2VwdGlvbiIpO2IubWl4aW5zLm9ic2VydmFibGUuY29uc3RydWN0b3IuY2FsbChiLGEpfSxpc0Nvbm5lY3RlZDpmdW5jdGlvbigpe3JldHVybiBmYWxzZX0sY29ubmVjdDpFeHQuZW1wdHlGbixkaXNjb25uZWN0OkV4dC5lbXB0eUZufSk7RXh0LmRlZmluZSgiRXh0LmRpcmVjdC5Kc29uUHJvdmlkZXIiLHtleHRlbmQ6IkV4dC5kaXJlY3QuUHJvdmlkZXIiLGFsaWFzOiJkaXJlY3QuanNvbnByb3ZpZGVyIix1c2VzOlsiRXh0LmRpcmVjdC5FeGNlcHRpb25FdmVudCJdLHBhcnNlUmVzcG9uc2U6ZnVuY3Rpb24oYSl7aWYoIUV4dC5pc0VtcHR5KGEucmVzcG9uc2VUZXh0KSl7aWYoRXh0LmlzT2JqZWN0KGEucmVzcG9uc2VUZXh0KSl7cmV0dXJuIGEucmVzcG9uc2VUZXh0fXJldHVybiBFeHQuZGVjb2RlKGEucmVzcG9uc2VUZXh0KX1yZXR1cm4gbnVsbH0sY3JlYXRlRXZlbnRzOmZ1bmN0aW9uKGIpe3ZhciBoPW51bGwsZD1bXSxnLGM9MCxhO3RyeXtoPXRoaXMucGFyc2VSZXNwb25zZShiKX1jYXRjaChqKXtnPW5ldyBFeHQuZGlyZWN0LkV4Y2VwdGlvbkV2ZW50KHtkYXRhOmoseGhyOmIsY29kZTpFeHQuZGlyZWN0Lk1hbmFnZXIuZXhjZXB0aW9ucy5QQVJTRSxtZXNzYWdlOiJFcnJvciBwYXJzaW5nIGpzb24gcmVzcG9uc2U6IFxuXG4gIitofSk7cmV0dXJuW2ddfWlmKEV4dC5pc0FycmF5KGgpKXtmb3IoYT1oLmxlbmd0aDtjPGE7KytjKXtkLnB1c2godGhpcy5jcmVhdGVFdmVudChoW2NdKSl9fWVsc2V7ZC5wdXNoKHRoaXMuY3JlYXRlRXZlbnQoaCkpfXJldHVybiBkfSxjcmVhdGVFdmVudDpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LmNyZWF0ZSgiZGlyZWN0LiIrYS50eXBlLGEpfX0pO0V4dC5kZWZpbmUoIkV4dC5kaXJlY3QuUG9sbGluZ1Byb3ZpZGVyIix7ZXh0ZW5kOiJFeHQuZGlyZWN0Lkpzb25Qcm92aWRlciIsYWxpYXM6ImRpcmVjdC5wb2xsaW5ncHJvdmlkZXIiLHVzZXM6WyJFeHQuZGlyZWN0LkV4Y2VwdGlvbkV2ZW50Il0scmVxdWlyZXM6WyJFeHQuQWpheCIsIkV4dC51dGlsLkRlbGF5ZWRUYXNrIl0saW50ZXJ2YWw6MzAwMCxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLmFkZEV2ZW50cygiYmVmb3JlcG9sbCIsInBvbGwiKX0saXNDb25uZWN0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLnBvbGxUYXNrfSxjb25uZWN0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIudXJsO2lmKGEmJiFiLnBvbGxUYXNrKXtiLnBvbGxUYXNrPUV4dC5UYXNrTWFuYWdlci5zdGFydCh7cnVuOmZ1bmN0aW9uKCl7aWYoYi5maXJlRXZlbnQoImJlZm9yZXBvbGwiLGIpIT09ZmFsc2Upe2lmKEV4dC5pc0Z1bmN0aW9uKGEpKXthKGIuYmFzZVBhcmFtcyl9ZWxzZXtFeHQuQWpheC5yZXF1ZXN0KHt1cmw6YSxjYWxsYmFjazpiLm9uRGF0YSxzY29wZTpiLHBhcmFtczpiLmJhc2VQYXJhbXN9KX19fSxpbnRlcnZhbDpiLmludGVydmFsLHNjb3BlOmJ9KTtiLmZpcmVFdmVudCgiY29ubmVjdCIsYil9ZWxzZXtpZighYSl7fX19LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEucG9sbFRhc2spe0V4dC5UYXNrTWFuYWdlci5zdG9wKGEucG9sbFRhc2spO2RlbGV0ZSBhLnBvbGxUYXNrO2EuZmlyZUV2ZW50KCJkaXNjb25uZWN0IixhKX19LG9uRGF0YTpmdW5jdGlvbihlLGgsYil7dmFyIGc9dGhpcyxkPTAsYSxjO2lmKGgpe2M9Zy5jcmVhdGVFdmVudHMoYik7Zm9yKGE9Yy5sZW5ndGg7ZDxhOysrZCl7Zy5maXJlRXZlbnQoImRhdGEiLGcsY1tkXSl9fWVsc2V7Zy5maXJlRXZlbnQoImRhdGEiLGcsbmV3IEV4dC5kaXJlY3QuRXhjZXB0aW9uRXZlbnQoe2RhdGE6bnVsbCxjb2RlOkV4dC5kaXJlY3QuTWFuYWdlci5leGNlcHRpb25zLlRSQU5TUE9SVCxtZXNzYWdlOiJVbmFibGUgdG8gY29ubmVjdCB0byB0aGUgc2VydmVyLiIseGhyOmJ9KSl9fX0pO0V4dC5kZWZpbmUoIkV4dC5kaXJlY3QuUmVtb3RpbmdNZXRob2QiLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihjKXt2YXIgZD10aGlzLGg9RXh0LmlzRGVmaW5lZChjLnBhcmFtcyk/Yy5wYXJhbXM6Yy5sZW4sYixhLGUsZztkLm5hbWU9Yy5uYW1lO2QuZm9ybUhhbmRsZXI9Yy5mb3JtSGFuZGxlcjtpZihFeHQuaXNOdW1iZXIoaCkpe2QubGVuPWg7ZC5vcmRlcmVkPXRydWV9ZWxzZXtkLnBhcmFtcz1bXTthPWgubGVuZ3RoO2ZvcihlPTA7ZTxhO2UrKyl7Zz1oW2VdO2I9RXh0LmlzT2JqZWN0KGcpP2cubmFtZTpnO2QucGFyYW1zLnB1c2goYil9fX0sZ2V0QXJnczpmdW5jdGlvbihlLGIsZyl7dmFyIGM9W10sZCxhO2lmKHRoaXMub3JkZXJlZCl7aWYodGhpcy5sZW4+MCl7aWYoYil7Zm9yKGQ9MCxhPWIubGVuZ3RoO2Q8YTtkKyspe2MucHVzaChlW2JbZF1dKX19ZWxzZXtpZihnKXtjLnB1c2goZSl9fX19ZWxzZXtjLnB1c2goZSl9cmV0dXJuIGN9LGdldENhbGxEYXRhOmZ1bmN0aW9uKGMpe3ZhciBlPXRoaXMsZz1udWxsLGE9ZS5sZW4saD1lLnBhcmFtcyxpLGQsYjtpZihlLm9yZGVyZWQpe2k9Y1thXTtkPWNbYSsxXTtpZihhIT09MCl7Zz1jLnNsaWNlKDAsYSl9fWVsc2V7Zz1FeHQuYXBwbHkoe30sY1swXSk7aT1jWzFdO2Q9Y1syXTtmb3IoYiBpbiBnKXtpZihnLmhhc093blByb3BlcnR5KGIpKXtpZighRXh0LkFycmF5LmNvbnRhaW5zKGgsYikpe2RlbGV0ZSBnW2JdfX19fXJldHVybntkYXRhOmcsY2FsbGJhY2s6aSxzY29wZTpkfX19KTtFeHQuZGVmaW5lKCJFeHQuZGlyZWN0LlRyYW5zYWN0aW9uIix7YWxpYXM6ImRpcmVjdC50cmFuc2FjdGlvbiIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuRGlyZWN0LlRyYW5zYWN0aW9uIixzdGF0aWNzOntUUkFOU0FDVElPTl9JRDowfSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO0V4dC5hcHBseShiLGEpO2IuaWQ9Yi50aWQ9KytiLnNlbGYuVFJBTlNBQ1RJT05fSUQ7Yi5yZXRyeUNvdW50PTB9LHNlbmQ6ZnVuY3Rpb24oKXt0aGlzLnByb3ZpZGVyLnF1ZXVlVHJhbnNhY3Rpb24odGhpcyl9LHJldHJ5OmZ1bmN0aW9uKCl7dGhpcy5yZXRyeUNvdW50Kys7dGhpcy5zZW5kKCl9LGdldFByb3ZpZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvdmlkZXJ9fSk7RXh0LmRlZmluZSgiRXh0LmRpcmVjdC5SZW1vdGluZ1Byb3ZpZGVyIix7YWxpYXM6ImRpcmVjdC5yZW1vdGluZ3Byb3ZpZGVyIixleHRlbmQ6IkV4dC5kaXJlY3QuSnNvblByb3ZpZGVyIixyZXF1aXJlczpbIkV4dC51dGlsLk1peGVkQ29sbGVjdGlvbiIsIkV4dC51dGlsLkRlbGF5ZWRUYXNrIiwiRXh0LmRpcmVjdC5UcmFuc2FjdGlvbiIsIkV4dC5kaXJlY3QuUmVtb3RpbmdNZXRob2QiXSxlbmFibGVCdWZmZXI6MTAsbWF4UmV0cmllczoxLHRpbWVvdXQ6dW5kZWZpbmVkLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7Yi5hZGRFdmVudHMoImJlZm9yZWNhbGwiLCJjYWxsIik7Yi5uYW1lc3BhY2U9KEV4dC5pc1N0cmluZyhiLm5hbWVzcGFjZSkpP0V4dC5ucyhiLm5hbWVzcGFjZSk6Yi5uYW1lc3BhY2V8fHdpbmRvdztiLnRyYW5zYWN0aW9ucz1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKCk7Yi5jYWxsQnVmZmVyPVtdfSxpbml0QVBJOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcy5hY3Rpb25zLGU9dGhpcy5uYW1lc3BhY2UsZyxiLGMsZCxhLGo7Zm9yKGcgaW4gaCl7aWYoaC5oYXNPd25Qcm9wZXJ0eShnKSl7Yj1lW2ddO2lmKCFiKXtiPWVbZ109e319Yz1oW2ddO2ZvcihkPTAsYT1jLmxlbmd0aDtkPGE7KytkKXtqPW5ldyBFeHQuZGlyZWN0LlJlbW90aW5nTWV0aG9kKGNbZF0pO2Jbai5uYW1lXT10aGlzLmNyZWF0ZUhhbmRsZXIoZyxqKX19fX0sY3JlYXRlSGFuZGxlcjpmdW5jdGlvbihjLGQpe3ZhciBiPXRoaXMsYTtpZighZC5mb3JtSGFuZGxlcil7YT1mdW5jdGlvbigpe2IuY29uZmlndXJlUmVxdWVzdChjLGQsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApKX19ZWxzZXthPWZ1bmN0aW9uKGcsaCxlKXtiLmNvbmZpZ3VyZUZvcm1SZXF1ZXN0KGMsZCxnLGgsZSl9fWEuZGlyZWN0Q2ZnPXthY3Rpb246YyxtZXRob2Q6ZH07cmV0dXJuIGF9LGlzQ29ubmVjdGVkOmZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5jb25uZWN0ZWR9LGNvbm5lY3Q6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEudXJsKXthLmluaXRBUEkoKTthLmNvbm5lY3RlZD10cnVlO2EuZmlyZUV2ZW50KCJjb25uZWN0IixhKX1lbHNle2lmKCFhLnVybCl7fX19LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuY29ubmVjdGVkKXthLmNvbm5lY3RlZD1mYWxzZTthLmZpcmVFdmVudCgiZGlzY29ubmVjdCIsYSl9fSxydW5DYWxsYmFjazpmdW5jdGlvbihlLGIpe3ZhciBkPSEhYi5zdGF0dXMsYz1kPyJzdWNjZXNzIjoiZmFpbHVyZSIsZyxhO2lmKGUmJmUuY2FsbGJhY2spe2c9ZS5jYWxsYmFjazthPUV4dC5pc0RlZmluZWQoYi5yZXN1bHQpP2IucmVzdWx0OmIuZGF0YTtpZihFeHQuaXNGdW5jdGlvbihnKSl7ZyhhLGIsZCl9ZWxzZXtFeHQuY2FsbGJhY2soZ1tjXSxnLnNjb3BlLFthLGIsZF0pO0V4dC5jYWxsYmFjayhnLmNhbGxiYWNrLGcuc2NvcGUsW2EsYixkXSl9fX0sb25EYXRhOmZ1bmN0aW9uKGwsaixjKXt2YXIgZz10aGlzLGQ9MCxlLGssYSxiLGg7aWYoail7az1nLmNyZWF0ZUV2ZW50cyhjKTtmb3IoZT1rLmxlbmd0aDtkPGU7KytkKXthPWtbZF07Yj1nLmdldFRyYW5zYWN0aW9uKGEpO2cuZmlyZUV2ZW50KCJkYXRhIixnLGEpO2lmKGIpe2cucnVuQ2FsbGJhY2soYixhLHRydWUpO0V4dC5kaXJlY3QuTWFuYWdlci5yZW1vdmVUcmFuc2FjdGlvbihiKX19fWVsc2V7aD1bXS5jb25jYXQobC50cmFuc2FjdGlvbik7Zm9yKGU9aC5sZW5ndGg7ZDxlOysrZCl7Yj1nLmdldFRyYW5zYWN0aW9uKGhbZF0pO2lmKGImJmIucmV0cnlDb3VudDxnLm1heFJldHJpZXMpe2IucmV0cnkoKX1lbHNle2E9bmV3IEV4dC5kaXJlY3QuRXhjZXB0aW9uRXZlbnQoe2RhdGE6bnVsbCx0cmFuc2FjdGlvbjpiLGNvZGU6RXh0LmRpcmVjdC5NYW5hZ2VyLmV4Y2VwdGlvbnMuVFJBTlNQT1JULG1lc3NhZ2U6IlVuYWJsZSB0byBjb25uZWN0IHRvIHRoZSBzZXJ2ZXIuIix4aHI6Y30pO2cuZmlyZUV2ZW50KCJkYXRhIixnLGEpO2lmKGIpe2cucnVuQ2FsbGJhY2soYixhLGZhbHNlKTtFeHQuZGlyZWN0Lk1hbmFnZXIucmVtb3ZlVHJhbnNhY3Rpb24oYil9fX19fSxnZXRUcmFuc2FjdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4gYSYmYS50aWQ/RXh0LmRpcmVjdC5NYW5hZ2VyLmdldFRyYW5zYWN0aW9uKGEudGlkKTpudWxsfSxjb25maWd1cmVSZXF1ZXN0OmZ1bmN0aW9uKGQsYSxnKXt2YXIgaD10aGlzLGM9YS5nZXRDYWxsRGF0YShnKSxlPWMuZGF0YSxpPWMuY2FsbGJhY2ssaj1jLnNjb3BlLGI7Yj1uZXcgRXh0LmRpcmVjdC5UcmFuc2FjdGlvbih7cHJvdmlkZXI6aCxhcmdzOmcsYWN0aW9uOmQsbWV0aG9kOmEubmFtZSxkYXRhOmUsY2FsbGJhY2s6aiYmRXh0LmlzRnVuY3Rpb24oaSk/RXh0LkZ1bmN0aW9uLmJpbmQoaSxqKTppfSk7aWYoaC5maXJlRXZlbnQoImJlZm9yZWNhbGwiLGgsYixhKSE9PWZhbHNlKXtFeHQuZGlyZWN0Lk1hbmFnZXIuYWRkVHJhbnNhY3Rpb24oYik7aC5xdWV1ZVRyYW5zYWN0aW9uKGIpO2guZmlyZUV2ZW50KCJjYWxsIixoLGIsYSl9fSxnZXRDYWxsRGF0YTpmdW5jdGlvbihhKXtyZXR1cm57YWN0aW9uOmEuYWN0aW9uLG1ldGhvZDphLm1ldGhvZCxkYXRhOmEuZGF0YSx0eXBlOiJycGMiLHRpZDphLmlkfX0sc2VuZFJlcXVlc3Q6ZnVuY3Rpb24oaCl7dmFyIGc9dGhpcyxlPXt1cmw6Zy51cmwsY2FsbGJhY2s6Zy5vbkRhdGEsc2NvcGU6Zyx0cmFuc2FjdGlvbjpoLHRpbWVvdXQ6Zy50aW1lb3V0fSxiLGQ9Zy5lbmFibGVVcmxFbmNvZGUsYz0wLGEsajtpZihFeHQuaXNBcnJheShoKSl7Yj1bXTtmb3IoYT1oLmxlbmd0aDtjPGE7KytjKXtiLnB1c2goZy5nZXRDYWxsRGF0YShoW2NdKSl9fWVsc2V7Yj1nLmdldENhbGxEYXRhKGgpfWlmKGQpe2o9e307altFeHQuaXNTdHJpbmcoZCk/ZDoiZGF0YSJdPUV4dC5lbmNvZGUoYik7ZS5wYXJhbXM9an1lbHNle2UuanNvbkRhdGE9Yn1FeHQuQWpheC5yZXF1ZXN0KGUpfSxxdWV1ZVRyYW5zYWN0aW9uOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLmVuYWJsZUJ1ZmZlcjtpZihjLmZvcm0pe2Iuc2VuZEZvcm1SZXF1ZXN0KGMpO3JldHVybn1iLmNhbGxCdWZmZXIucHVzaChjKTtpZihhKXtpZighYi5jYWxsVGFzayl7Yi5jYWxsVGFzaz1uZXcgRXh0LnV0aWwuRGVsYXllZFRhc2soYi5jb21iaW5lQW5kU2VuZCxiKX1iLmNhbGxUYXNrLmRlbGF5KEV4dC5pc051bWJlcihhKT9hOjEwKX1lbHNle2IuY29tYmluZUFuZFNlbmQoKX19LGNvbWJpbmVBbmRTZW5kOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5jYWxsQnVmZmVyLGE9Yi5sZW5ndGg7aWYoYT4wKXt0aGlzLnNlbmRSZXF1ZXN0KGE9PTE/YlswXTpiKTt0aGlzLmNhbGxCdWZmZXI9W119fSxjb25maWd1cmVGb3JtUmVxdWVzdDpmdW5jdGlvbihlLGEsYixpLGope3ZhciBoPXRoaXMsYz1uZXcgRXh0LmRpcmVjdC5UcmFuc2FjdGlvbih7cHJvdmlkZXI6aCxhY3Rpb246ZSxtZXRob2Q6YS5uYW1lLGFyZ3M6W2IsaSxqXSxjYWxsYmFjazpqJiZFeHQuaXNGdW5jdGlvbihpKT9FeHQuRnVuY3Rpb24uYmluZChpLGopOmksaXNGb3JtOnRydWV9KSxnLGQ7aWYoaC5maXJlRXZlbnQoImJlZm9yZWNhbGwiLGgsYyxhKSE9PWZhbHNlKXtFeHQuZGlyZWN0Lk1hbmFnZXIuYWRkVHJhbnNhY3Rpb24oYyk7Zz1TdHJpbmcoYi5nZXRBdHRyaWJ1dGUoImVuY3R5cGUiKSkudG9Mb3dlckNhc2UoKT09Im11bHRpcGFydC9mb3JtLWRhdGEiO2Q9e2V4dFRJRDpjLmlkLGV4dEFjdGlvbjplLGV4dE1ldGhvZDphLm5hbWUsZXh0VHlwZToicnBjIixleHRVcGxvYWQ6U3RyaW5nKGcpfTtFeHQuYXBwbHkoYyx7Zm9ybTpFeHQuZ2V0RG9tKGIpLGlzVXBsb2FkOmcscGFyYW1zOmkmJkV4dC5pc09iamVjdChpLnBhcmFtcyk/RXh0LmFwcGx5KGQsaS5wYXJhbXMpOmR9KTtoLmZpcmVFdmVudCgiY2FsbCIsaCxjLGEpO2guc2VuZEZvcm1SZXF1ZXN0KGMpfX0sc2VuZEZvcm1SZXF1ZXN0OmZ1bmN0aW9uKGEpe0V4dC5BamF4LnJlcXVlc3Qoe3VybDp0aGlzLnVybCxwYXJhbXM6YS5wYXJhbXMsY2FsbGJhY2s6dGhpcy5vbkRhdGEsc2NvcGU6dGhpcyxmb3JtOmEuZm9ybSxpc1VwbG9hZDphLmlzVXBsb2FkLHRyYW5zYWN0aW9uOmF9KX19KTtFeHQuZGVmaW5lKCJFeHQuZHJhdy5NYXRyaXgiLHtyZXF1aXJlczpbIkV4dC5kcmF3LkRyYXciXSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihoLGcsbCxrLGosaSl7aWYoaCE9bnVsbCl7dGhpcy5tYXRyaXg9W1toLGwsal0sW2csayxpXSxbMCwwLDFdXX1lbHNle3RoaXMubWF0cml4PVtbMSwwLDBdLFswLDEsMF0sWzAsMCwxXV19fSxhZGQ6ZnVuY3Rpb24ocyxwLG0sayxpLGgpe3ZhciBuPXRoaXMsZz1bW10sW10sW11dLHI9W1tzLG0saV0sW3AsayxoXSxbMCwwLDFdXSxxLG8sbCxqO2ZvcihxPTA7cTwzO3ErKyl7Zm9yKG89MDtvPDM7bysrKXtqPTA7Zm9yKGw9MDtsPDM7bCsrKXtqKz1uLm1hdHJpeFtxXVtsXSpyW2xdW29dfWdbcV1bb109an19bi5tYXRyaXg9Z30scHJlcGVuZDpmdW5jdGlvbihzLHAsbSxrLGksaCl7dmFyIG49dGhpcyxnPVtbXSxbXSxbXV0scj1bW3MsbSxpXSxbcCxrLGhdLFswLDAsMV1dLHEsbyxsLGo7Zm9yKHE9MDtxPDM7cSsrKXtmb3Iobz0wO288MztvKyspe2o9MDtmb3IobD0wO2w8MztsKyspe2orPXJbcV1bbF0qbi5tYXRyaXhbbF1bb119Z1txXVtvXT1qfX1uLm1hdHJpeD1nfSxpbnZlcnQ6ZnVuY3Rpb24oKXt2YXIgaj10aGlzLm1hdHJpeCxpPWpbMF1bMF0saD1qWzFdWzBdLG49alswXVsxXSxtPWpbMV1bMV0sbD1qWzBdWzJdLGs9alsxXVsyXSxnPWkqbS1oKm47cmV0dXJuIG5ldyBFeHQuZHJhdy5NYXRyaXgobS9nLC1oL2csLW4vZyxpL2csKG4qay1tKmwpL2csKGgqbC1pKmspL2cpfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBpPXRoaXMubWF0cml4LGg9aVswXVswXSxnPWlbMV1bMF0sbT1pWzBdWzFdLGw9aVsxXVsxXSxrPWlbMF1bMl0saj1pWzFdWzJdO3JldHVybiBuZXcgRXh0LmRyYXcuTWF0cml4KGgsZyxtLGwsayxqKX0sdHJhbnNsYXRlOmZ1bmN0aW9uKGEsYil7dGhpcy5wcmVwZW5kKDEsMCwwLDEsYSxiKX0sc2NhbGU6ZnVuY3Rpb24oYixlLGEsZCl7dmFyIGM9dGhpcztpZihlPT1udWxsKXtlPWJ9Yy5hZGQoYiwwLDAsZSxhKigxLWIpLGQqKDEtZSkpfSxyb3RhdGU6ZnVuY3Rpb24oYyxiLGgpe2M9RXh0LmRyYXcuRHJhdy5yYWQoYyk7dmFyIGU9dGhpcyxnPStNYXRoLmNvcyhjKS50b0ZpeGVkKDkpLGQ9K01hdGguc2luKGMpLnRvRml4ZWQoOSk7ZS5hZGQoZyxkLC1kLGcsYi1nKmIrZCpoLC0oZCpiKStoLWcqaCl9LHg6ZnVuY3Rpb24oYSxjKXt2YXIgYj10aGlzLm1hdHJpeDtyZXR1cm4gYSpiWzBdWzBdK2MqYlswXVsxXStiWzBdWzJdfSx5OmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcy5tYXRyaXg7cmV0dXJuIGEqYlsxXVswXStjKmJbMV1bMV0rYlsxXVsyXX0sZ2V0OmZ1bmN0aW9uKGIsYSl7cmV0dXJuICt0aGlzLm1hdHJpeFtiXVthXS50b0ZpeGVkKDQpfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuW2EuZ2V0KDAsMCksYS5nZXQoMCwxKSxhLmdldCgxLDApLGEuZ2V0KDEsMSksMCwwXS5qb2luKCl9LHRvU3ZnOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm4ibWF0cml4KCIrW2EuZ2V0KDAsMCksYS5nZXQoMSwwKSxhLmdldCgwLDEpLGEuZ2V0KDEsMSksYS5nZXQoMCwyKSxhLmdldCgxLDIpXS5qb2luKCkrIikifSx0b0ZpbHRlcjpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXM7Yj1ifHwwO2E9YXx8MDtyZXR1cm4icHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0Lk1hdHJpeChzaXppbmdNZXRob2Q9J2F1dG8gZXhwYW5kJywgZmlsdGVyVHlwZT0nYmlsaW5lYXInLCBNMTE9IitjLmdldCgwLDApKyIsIE0xMj0iK2MuZ2V0KDAsMSkrIiwgTTIxPSIrYy5nZXQoMSwwKSsiLCBNMjI9IitjLmdldCgxLDEpKyIsIER4PSIrKGMuZ2V0KDAsMikrYikrIiwgRHk9IisoYy5nZXQoMSwyKSthKSsiKSJ9LG9mZnNldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWF0cml4O3JldHVyblsoYVswXVsyXXx8MCkudG9GaXhlZCg0KSwoYVsxXVsyXXx8MCkudG9GaXhlZCg0KV19LHNwbGl0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gZChnKXtyZXR1cm4gZ1swXSpnWzBdK2dbMV0qZ1sxXX1mdW5jdGlvbiBiKGcpe3ZhciBoPU1hdGguc3FydChkKGcpKTtnWzBdLz1oO2dbMV0vPWh9dmFyIGE9dGhpcy5tYXRyaXgsYz17dHJhbnNsYXRlWDphWzBdWzJdLHRyYW5zbGF0ZVk6YVsxXVsyXX0sZTtlPVtbYVswXVswXSxhWzBdWzFdXSxbYVsxXVsxXSxhWzFdWzFdXV07Yy5zY2FsZVg9TWF0aC5zcXJ0KGQoZVswXSkpO2IoZVswXSk7Yy5zaGVhcj1lWzBdWzBdKmVbMV1bMF0rZVswXVsxXSplWzFdWzFdO2VbMV09W2VbMV1bMF0tZVswXVswXSpjLnNoZWFyLGVbMV1bMV0tZVswXVsxXSpjLnNoZWFyXTtjLnNjYWxlWT1NYXRoLnNxcnQoZChlWzFdKSk7YihlWzFdKTtjLnNoZWFyLz1jLnNjYWxlWTtjLnJvdGF0ZT1NYXRoLmFzaW4oLWVbMF1bMV0pO2MuaXNTaW1wbGU9IStjLnNoZWFyLnRvRml4ZWQoOSkmJihjLnNjYWxlWC50b0ZpeGVkKDkpPT1jLnNjYWxlWS50b0ZpeGVkKDkpfHwhYy5yb3RhdGUpO3JldHVybiBjfX0pO0V4dC5kZWZpbmUoIkV4dC5kcmF3LlNwcml0ZUREIix7ZXh0ZW5kOiJFeHQuZGQuRHJhZ1NvdXJjZSIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYixhKXt2YXIgZD10aGlzLGM9Yi5lbDtkLnNwcml0ZT1iO2QuZWw9YztkLmRyYWdEYXRhPXtlbDpjLHNwcml0ZTpifTtkLmNhbGxQYXJlbnQoW2MsYV0pO2Quc3ByaXRlLnNldFN0eWxlKCJjdXJzb3IiLCJtb3ZlIil9LHNob3dGcmFtZTpFeHQuZW1wdHlGbixjcmVhdGVGcmFtZTpFeHQuZW1wdHlGbixnZXREcmFnRWw6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWx9LGdldFJlZ2lvbjpmdW5jdGlvbigpe3ZhciBqPXRoaXMsZz1qLmVsLG0sZCxjLG8sbixzLGEsayxoLHEscDtwPWouc3ByaXRlO3E9cC5nZXRCQm94KCk7dHJ5e209RXh0LkVsZW1lbnQuZ2V0WFkoZyl9Y2F0Y2goaSl7fWlmKCFtKXtyZXR1cm4gbnVsbH1kPW1bMF07Yz1kK3Eud2lkdGg7bz1tWzFdO249bytxLmhlaWdodDtyZXR1cm4gbmV3IEV4dC51dGlsLlJlZ2lvbihvLGMsbixkKX0sc3RhcnREcmFnOmZ1bmN0aW9uKGIsZCl7dmFyIGM9dGhpcyxhPWMuc3ByaXRlLmF0dHI7Yy5wcmV2PWMuc3ByaXRlLnN1cmZhY2UudHJhbnNmb3JtVG9WaWV3Qm94KGIsZCl9LG9uRHJhZzpmdW5jdGlvbihpKXt2YXIgaD1pLmdldFhZKCksZz10aGlzLGQ9Zy5zcHJpdGUsYT1kLmF0dHIsYyxiO2g9Zy5zcHJpdGUuc3VyZmFjZS50cmFuc2Zvcm1Ub1ZpZXdCb3goaFswXSxoWzFdKTtjPWhbMF0tZy5wcmV2WzBdO2I9aFsxXS1nLnByZXZbMV07ZC5zZXRBdHRyaWJ1dGVzKHt0cmFuc2xhdGU6e3g6YS50cmFuc2xhdGlvbi54K2MseTphLnRyYW5zbGF0aW9uLnkrYn19LHRydWUpO2cucHJldj1ofSxzZXREcmFnRWxQb3M6ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9fSk7RXh0LmRlZmluZSgiRXh0LmRyYXcuU3ByaXRlIix7bWl4aW5zOntvYnNlcnZhYmxlOiJFeHQudXRpbC5PYnNlcnZhYmxlIixhbmltYXRlOiJFeHQudXRpbC5BbmltYXRlIn0scmVxdWlyZXM6WyJFeHQuZHJhdy5TcHJpdGVERCJdLGRpcnR5OmZhbHNlLGRpcnR5SGlkZGVuOmZhbHNlLGRpcnR5VHJhbnNmb3JtOmZhbHNlLGRpcnR5UGF0aDp0cnVlLGRpcnR5Rm9udDp0cnVlLHpJbmRleERpcnR5OnRydWUsaXNTcHJpdGU6dHJ1ZSx6SW5kZXg6MCxmb250UHJvcGVydGllczpbImZvbnQiLCJmb250LXNpemUiLCJmb250LXdlaWdodCIsImZvbnQtc3R5bGUiLCJmb250LWZhbWlseSIsInRleHQtYW5jaG9yIiwidGV4dCJdLHBhdGhQcm9wZXJ0aWVzOlsieCIsInkiLCJkIiwicGF0aCIsImhlaWdodCIsIndpZHRoIiwicmFkaXVzIiwiciIsInJ4IiwicnkiLCJjeCIsImN5Il0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczthPUV4dC5tZXJnZSh7fSxhfHx7fSk7Yi5pZD1FeHQuaWQobnVsbCwiZXh0LXNwcml0ZS0iKTtiLnRyYW5zZm9ybWF0aW9ucz1bXTtFeHQuY29weVRvKHRoaXMsYSwic3VyZmFjZSxncm91cCx0eXBlLGRyYWdnYWJsZSIpO2IuYmJveD17fTtiLmF0dHI9e3pJbmRleDowLHRyYW5zbGF0aW9uOnt4Om51bGwseTpudWxsfSxyb3RhdGlvbjp7ZGVncmVlczpudWxsLHg6bnVsbCx5Om51bGx9LHNjYWxpbmc6e3g6bnVsbCx5Om51bGwsY3g6bnVsbCxjeTpudWxsfX07ZGVsZXRlIGEuc3VyZmFjZTtkZWxldGUgYS5ncm91cDtkZWxldGUgYS50eXBlO2RlbGV0ZSBhLmRyYWdnYWJsZTtiLnNldEF0dHJpYnV0ZXMoYSk7Yi5hZGRFdmVudHMoImJlZm9yZWRlc3Ryb3kiLCJkZXN0cm95IiwicmVuZGVyIiwibW91c2Vkb3duIiwibW91c2V1cCIsIm1vdXNlb3ZlciIsIm1vdXNlb3V0IiwibW91c2Vtb3ZlIiwiY2xpY2siKTtiLm1peGlucy5vYnNlcnZhYmxlLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saW5pdERyYWdnYWJsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5kcmFnZ2FibGU9dHJ1ZTtpZighYS5lbCl7YS5zdXJmYWNlLmNyZWF0ZVNwcml0ZUVsZW1lbnQoYSl9YS5kZD1uZXcgRXh0LmRyYXcuU3ByaXRlREQoYSxFeHQuaXNCb29sZWFuKGEuZHJhZ2dhYmxlKT9udWxsOmEuZHJhZ2dhYmxlKTthLm9uKCJiZWZvcmVkZXN0cm95IixhLmRkLmRlc3Ryb3ksYS5kZCl9LHNldEF0dHJpYnV0ZXM6ZnVuY3Rpb24obCxvKXt2YXIgdD10aGlzLGo9dC5mb250UHJvcGVydGllcyxxPWoubGVuZ3RoLGg9dC5wYXRoUHJvcGVydGllcyxnPWgubGVuZ3RoLHI9ISF0LnN1cmZhY2UsYT1yJiZ0LnN1cmZhY2UuY3VzdG9tQXR0cmlidXRlc3x8e30sYz10LmF0dHIsYj1mYWxzZSxtLHAsayxkLHMsbix1LGU7bD1FeHQuYXBwbHkoe30sbCk7Zm9yKG0gaW4gYSl7aWYobC5oYXNPd25Qcm9wZXJ0eShtKSYmdHlwZW9mIGFbbV09PSJmdW5jdGlvbiIpe0V4dC5hcHBseShsLGFbbV0uYXBwbHkodCxbXS5jb25jYXQobFttXSkpKX19aWYoISFsLmhpZGRlbiE9PSEhYy5oaWRkZW4pe3QuZGlydHlIaWRkZW49dHJ1ZX1mb3IocD0wO3A8ZztwKyspe209aFtwXTtpZihtIGluIGwmJmxbbV0hPT1jW21dKXt0LmRpcnR5UGF0aD10cnVlO2I9dHJ1ZTticmVha319aWYoInpJbmRleCIgaW4gbCl7dC56SW5kZXhEaXJ0eT10cnVlfWlmKCJ0ZXh0IiBpbiBsKXt0LmRpcnR5Rm9udD10cnVlO2I9dHJ1ZX1mb3IocD0wO3A8cTtwKyspe209altwXTtpZihtIGluIGwmJmxbbV0hPT1jW21dKXt0LmRpcnR5Rm9udD10cnVlO2I9dHJ1ZTticmVha319az1sLnRyYW5zbGF0aW9ufHxsLnRyYW5zbGF0ZTtkZWxldGUgbC50cmFuc2xhdGU7ZGVsZXRlIGwudHJhbnNsYXRpb247ZD1jLnRyYW5zbGF0aW9uO2lmKGspe2lmKCgieCIgaW4gayYmay54IT09ZC54KXx8KCJ5IiBpbiBrJiZrLnkhPT1kLnkpKXt0LmRpcnR5VHJhbnNmb3JtPXRydWU7ZC54PWsueDtkLnk9ay55fX1zPWwucm90YXRpb258fGwucm90YXRlO249Yy5yb3RhdGlvbjtkZWxldGUgbC5yb3RhdGU7ZGVsZXRlIGwucm90YXRpb247aWYocyl7aWYoKCJ4IiBpbiBzJiZzLnghPT1uLngpfHwoInkiIGluIHMmJnMueSE9PW4ueSl8fCgiZGVncmVlcyIgaW4gcyYmcy5kZWdyZWVzIT09bi5kZWdyZWVzKSl7dC5kaXJ0eVRyYW5zZm9ybT10cnVlO24ueD1zLng7bi55PXMueTtuLmRlZ3JlZXM9cy5kZWdyZWVzfX11PWwuc2NhbGluZ3x8bC5zY2FsZTtlPWMuc2NhbGluZztkZWxldGUgbC5zY2FsZTtkZWxldGUgbC5zY2FsaW5nO2lmKHUpe2lmKCgieCIgaW4gdSYmdS54IT09ZS54KXx8KCJ5IiBpbiB1JiZ1LnkhPT1lLnkpfHwoImN4IiBpbiB1JiZ1LmN4IT09ZS5jeCl8fCgiY3kiIGluIHUmJnUuY3khPT1lLmN5KSl7dC5kaXJ0eVRyYW5zZm9ybT10cnVlO2UueD11Lng7ZS55PXUueTtlLmN4PXUuY3g7ZS5jeT11LmN5fX1pZighdC5kaXJ0eVRyYW5zZm9ybSYmYil7aWYoYy5zY2FsaW5nLng9PT1udWxsfHxjLnNjYWxpbmcueT09PW51bGx8fGMucm90YXRpb24ueT09PW51bGx8fGMucm90YXRpb24ueT09PW51bGwpe3QuZGlydHlUcmFuc2Zvcm09dHJ1ZX19RXh0LmFwcGx5KGMsbCk7dC5kaXJ0eT10cnVlO2lmKG89PT10cnVlJiZyKXt0LnJlZHJhdygpfXJldHVybiB0aGlzfSxnZXRCQm94OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3VyZmFjZS5nZXRCQm94KHRoaXMpfSxzZXRUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnN1cmZhY2Uuc2V0VGV4dCh0aGlzLGEpfSxoaWRlOmZ1bmN0aW9uKGEpe3RoaXMuc2V0QXR0cmlidXRlcyh7aGlkZGVuOnRydWV9LGEpO3JldHVybiB0aGlzfSxzaG93OmZ1bmN0aW9uKGEpe3RoaXMuc2V0QXR0cmlidXRlcyh7aGlkZGVuOmZhbHNlfSxhKTtyZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7aWYodGhpcy5zdXJmYWNlKXt0aGlzLnN1cmZhY2UucmVtb3ZlKHRoaXMpO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX0sb25SZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLnN1cmZhY2Uub25SZW1vdmUodGhpcyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuZmlyZUV2ZW50KCJiZWZvcmVkZXN0cm95IixhKSE9PWZhbHNlKXthLnJlbW92ZSgpO2Euc3VyZmFjZS5vbkRlc3Ryb3koYSk7YS5jbGVhckxpc3RlbmVycygpO2EuZmlyZUV2ZW50KCJkZXN0cm95Iil9fSxyZWRyYXc6ZnVuY3Rpb24oKXt0aGlzLnN1cmZhY2UucmVuZGVySXRlbSh0aGlzKTtyZXR1cm4gdGhpc30sc2V0U3R5bGU6ZnVuY3Rpb24oKXt0aGlzLmVsLnNldFN0eWxlLmFwcGx5KHRoaXMuZWwsYXJndW1lbnRzKTtyZXR1cm4gdGhpc30sYWRkQ2xzOmZ1bmN0aW9uKGEpe3RoaXMuc3VyZmFjZS5hZGRDbHModGhpcyxhKTtyZXR1cm4gdGhpc30scmVtb3ZlQ2xzOmZ1bmN0aW9uKGEpe3RoaXMuc3VyZmFjZS5yZW1vdmVDbHModGhpcyxhKTtyZXR1cm4gdGhpc319KTtFeHQuZGVmaW5lKCJFeHQuZHJhdy5UZXh0Iix7ZXh0ZW5kOiJFeHQuZHJhdy5Db21wb25lbnQiLHVzZXM6WyJFeHQudXRpbC5DU1MiXSxhbGlhczoid2lkZ2V0LnRleHQiLHRleHQ6IiIsZm9jdXNhYmxlOmZhbHNlLHZpZXdCb3g6ZmFsc2UsYXV0b1NpemU6dHJ1ZSxiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJzdXJmYWNlICIrRXh0LmJhc2VDU1NQcmVmaXgrImRyYXctdGV4dCIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS50ZXh0Q29uZmlnPUV4dC5hcHBseSh7dHlwZToidGV4dCIsdGV4dDphLnRleHQscm90YXRlOntkZWdyZWVzOmEuZGVncmVlc3x8MH19LGEudGV4dFN0eWxlKTtFeHQuYXBwbHkoYS50ZXh0Q29uZmlnLGEuZ2V0U3R5bGVzKGEuc3R5bGVTZWxlY3RvcnN8fGEuc3R5bGVTZWxlY3RvcikpO2EuaW5pdGlhbENvbmZpZy5pdGVtcz1bYS50ZXh0Q29uZmlnXTthLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sZ2V0U3R5bGVzOmZ1bmN0aW9uKGQpe2Q9RXh0LkFycmF5LmZyb20oZCk7dmFyIGM9MCxiPWQubGVuZ3RoLGcsZSxoLGE9e307Zm9yKDtjPGI7YysrKXtnPUV4dC51dGlsLkNTUy5nZXRSdWxlKGRbY10pO2lmKGcpe2U9Zy5zdHlsZTtpZihlKXtFeHQuYXBwbHkoYSx7ImZvbnQtZmFtaWx5IjplLmZvbnRGYW1pbHksImZvbnQtd2VpZ2h0IjplLmZvbnRXZWlnaHQsImxpbmUtaGVpZ2h0IjplLmxpbmVIZWlnaHQsImZvbnQtc2l6ZSI6ZS5mb250U2l6ZSxmaWxsOmUuY29sb3J9KX19fXJldHVybiBhfSxzZXRBbmdsZTpmdW5jdGlvbihkKXt2YXIgYz10aGlzLGEsYjtpZihjLnJlbmRlcmVkKXthPWMuc3VyZmFjZTtiPWEuaXRlbXMuaXRlbXNbMF07Yy5kZWdyZWVzPWQ7Yi5zZXRBdHRyaWJ1dGVzKHtyb3RhdGU6e2RlZ3JlZXM6ZH19LHRydWUpO2lmKGMuYXV0b1NpemV8fGMudmlld0JveCl7Yy51cGRhdGVMYXlvdXQoKX19ZWxzZXtjLmRlZ3JlZXM9ZH19LHNldFRleHQ6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcyxhLGI7aWYoYy5yZW5kZXJlZCl7YT1jLnN1cmZhY2U7Yj1hLml0ZW1zLml0ZW1zWzBdO2MudGV4dD1kfHwiIjthLnJlbW92ZShiKTtjLnRleHRDb25maWcudHlwZT0idGV4dCI7Yy50ZXh0Q29uZmlnLnRleHQ9Yy50ZXh0O2I9YS5hZGQoYy50ZXh0Q29uZmlnKTtiLnNldEF0dHJpYnV0ZXMoe3JvdGF0ZTp7ZGVncmVlczpjLmRlZ3JlZXN9fSx0cnVlKTtpZihjLmF1dG9TaXplfHxjLnZpZXdCb3gpe2MudXBkYXRlTGF5b3V0KCl9fWVsc2V7Yy5vbih7cmVuZGVyOmZ1bmN0aW9uKCl7Yy5zZXRUZXh0KGQpfSxzaW5nbGU6dHJ1ZX0pfX19KTtFeHQuZGVmaW5lKCJFeHQuZHJhdy5lbmdpbmUuSW1hZ2VFeHBvcnRlciIse3NpbmdsZXRvbjp0cnVlLGRlZmF1bHRVcmw6Imh0dHA6Ly9zdmcuc2VuY2hhLmlvIixzdXBwb3J0ZWRUeXBlczpbImltYWdlL3BuZyIsImltYWdlL2pwZWciXSx3aWR0aFBhcmFtOiJ3aWR0aCIsaGVpZ2h0UGFyYW06ImhlaWdodCIsdHlwZVBhcmFtOiJ0eXBlIixzdmdQYXJhbToic3ZnIixmb3JtQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJoaWRlLWRpc3BsYXkiLGdlbmVyYXRlOmZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgZT10aGlzLGM9Yi50eXBlLGQ7aWYoRXh0LkFycmF5LmluZGV4T2YoZS5zdXBwb3J0ZWRUeXBlcyxjKT09PS0xKXtyZXR1cm4gZmFsc2V9ZD1FeHQuZ2V0Qm9keSgpLmNyZWF0ZUNoaWxkKHt0YWc6ImZvcm0iLG1ldGhvZDoiUE9TVCIsYWN0aW9uOmIudXJsfHxlLmRlZmF1bHRVcmwsY2xzOmUuZm9ybUNscyxjaGlsZHJlbjpbe3RhZzoiaW5wdXQiLHR5cGU6ImhpZGRlbiIsbmFtZTpiLndpZHRoUGFyYW18fGUud2lkdGhQYXJhbSx2YWx1ZTpiLndpZHRofHxhLndpZHRofSx7dGFnOiJpbnB1dCIsdHlwZToiaGlkZGVuIixuYW1lOmIuaGVpZ2h0UGFyYW18fGUuaGVpZ2h0UGFyYW0sdmFsdWU6Yi5oZWlnaHR8fGEuaGVpZ2h0fSx7dGFnOiJpbnB1dCIsdHlwZToiaGlkZGVuIixuYW1lOmIudHlwZVBhcmFtfHxlLnR5cGVQYXJhbSx2YWx1ZTpjfSx7dGFnOiJpbnB1dCIsdHlwZToiaGlkZGVuIixuYW1lOmIuc3ZnUGFyYW18fGUuc3ZnUGFyYW19XX0pO2QubGFzdChudWxsLHRydWUpLnZhbHVlPUV4dC5kcmF3LmVuZ2luZS5TdmdFeHBvcnRlci5nZW5lcmF0ZShhKTtkLmRvbS5zdWJtaXQoKTtkLnJlbW92ZSgpO3JldHVybiB0cnVlfX0pO0V4dC5kZWZpbmUoIkV4dC5kcmF3LmVuZ2luZS5TdmciLHtleHRlbmQ6IkV4dC5kcmF3LlN1cmZhY2UiLHJlcXVpcmVzOlsiRXh0LmRyYXcuRHJhdyIsIkV4dC5kcmF3LlNwcml0ZSIsIkV4dC5kcmF3Lk1hdHJpeCIsIkV4dC5FbGVtZW50Il0sZW5naW5lOiJTdmciLHRyaW1SZTovXlxzK3xccyskL2csc3BhY2VzUmU6L1xzKy8seGxpbms6Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiLHRyYW5zbGF0ZUF0dHJzOntyYWRpdXM6InIiLHJhZGl1c1g6InJ4IixyYWRpdXNZOiJyeSIscGF0aDoiZCIsbGluZVdpZHRoOiJzdHJva2Utd2lkdGgiLGZpbGxPcGFjaXR5OiJmaWxsLW9wYWNpdHkiLHN0cm9rZU9wYWNpdHk6InN0cm9rZS1vcGFjaXR5IixzdHJva2VMaW5lam9pbjoic3Ryb2tlLWxpbmVqb2luIn0scGFyc2Vyczp7fSxtaW5EZWZhdWx0czp7Y2lyY2xlOntjeDowLGN5OjAscjowLGZpbGw6Im5vbmUiLHN0cm9rZTpudWxsLCJzdHJva2Utd2lkdGgiOm51bGwsb3BhY2l0eTpudWxsLCJmaWxsLW9wYWNpdHkiOm51bGwsInN0cm9rZS1vcGFjaXR5IjpudWxsfSxlbGxpcHNlOntjeDowLGN5OjAscng6MCxyeTowLGZpbGw6Im5vbmUiLHN0cm9rZTpudWxsLCJzdHJva2Utd2lkdGgiOm51bGwsb3BhY2l0eTpudWxsLCJmaWxsLW9wYWNpdHkiOm51bGwsInN0cm9rZS1vcGFjaXR5IjpudWxsfSxyZWN0Ont4OjAseTowLHdpZHRoOjAsaGVpZ2h0OjAscng6MCxyeTowLGZpbGw6Im5vbmUiLHN0cm9rZTpudWxsLCJzdHJva2Utd2lkdGgiOm51bGwsb3BhY2l0eTpudWxsLCJmaWxsLW9wYWNpdHkiOm51bGwsInN0cm9rZS1vcGFjaXR5IjpudWxsfSx0ZXh0Ont4OjAseTowLCJ0ZXh0LWFuY2hvciI6InN0YXJ0IiwiZm9udC1mYW1pbHkiOm51bGwsImZvbnQtc2l6ZSI6bnVsbCwiZm9udC13ZWlnaHQiOm51bGwsImZvbnQtc3R5bGUiOm51bGwsZmlsbDoiIzAwMCIsc3Ryb2tlOm51bGwsInN0cm9rZS13aWR0aCI6bnVsbCxvcGFjaXR5Om51bGwsImZpbGwtb3BhY2l0eSI6bnVsbCwic3Ryb2tlLW9wYWNpdHkiOm51bGx9LHBhdGg6e2Q6Ik0wLDAiLGZpbGw6Im5vbmUiLHN0cm9rZTpudWxsLCJzdHJva2Utd2lkdGgiOm51bGwsb3BhY2l0eTpudWxsLCJmaWxsLW9wYWNpdHkiOm51bGwsInN0cm9rZS1vcGFjaXR5IjpudWxsfSxpbWFnZTp7eDowLHk6MCx3aWR0aDowLGhlaWdodDowLHByZXNlcnZlQXNwZWN0UmF0aW86Im5vbmUiLG9wYWNpdHk6bnVsbH19LGNyZWF0ZVN2Z0VsZW1lbnQ6ZnVuY3Rpb24oZCxhKXt2YXIgYz10aGlzLmRvbVJlZi5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIixkKSxiO2lmKGEpe2ZvcihiIGluIGEpe2Muc2V0QXR0cmlidXRlKGIsU3RyaW5nKGFbYl0pKX19cmV0dXJuIGN9LGNyZWF0ZVNwcml0ZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jcmVhdGVTdmdFbGVtZW50KGEudHlwZSk7Yi5pZD1hLmlkO2lmKGIuc3R5bGUpe2Iuc3R5bGUud2Via2l0VGFwSGlnaGxpZ2h0Q29sb3I9InJnYmEoMCwwLDAsMCkifWEuZWw9RXh0LmdldChiKTt0aGlzLmFwcGx5WkluZGV4KGEpO2EubWF0cml4PW5ldyBFeHQuZHJhdy5NYXRyaXgoKTthLmJib3g9e3BsYWluOjAsdHJhbnNmb3JtOjB9O3RoaXMuYXBwbHlBdHRycyhhKTt0aGlzLmFwcGx5VHJhbnNmb3JtYXRpb25zKGEpO2EuZmlyZUV2ZW50KCJyZW5kZXIiLGEpO3JldHVybiBifSxnZXRCQm94VGV4dDpmdW5jdGlvbihqKXt2YXIgaz17fSxnLGwsYSxjLGgsYjtpZihqJiZqLmVsKXtiPWouZWwuZG9tO3RyeXtrPWIuZ2V0QkJveCgpO3JldHVybiBrfWNhdGNoKGQpe31rPXt4OmsueCx5OkluZmluaXR5LHdpZHRoOjAsaGVpZ2h0OjB9O2g9Yi5nZXROdW1iZXJPZkNoYXJzKCk7Zm9yKGM9MDtjPGg7YysrKXtnPWIuZ2V0RXh0ZW50T2ZDaGFyKGMpO2sueT1NYXRoLm1pbihnLnksay55KTtsPWcueStnLmhlaWdodC1rLnk7ay5oZWlnaHQ9TWF0aC5tYXgoay5oZWlnaHQsbCk7YT1nLngrZy53aWR0aC1rLng7ay53aWR0aD1NYXRoLm1heChrLndpZHRoLGEpfXJldHVybiBrfX0saGlkZTpmdW5jdGlvbigpe0V4dC5nZXQodGhpcy5lbCkuaGlkZSgpfSxzaG93OmZ1bmN0aW9uKCl7RXh0LmdldCh0aGlzLmVsKS5zaG93KCl9LGhpZGVQcmltOmZ1bmN0aW9uKGEpe3RoaXMuYWRkQ2xzKGEsRXh0LmJhc2VDU1NQcmVmaXgrImhpZGUtdmlzaWJpbGl0eSIpfSxzaG93UHJpbTpmdW5jdGlvbihhKXt0aGlzLnJlbW92ZUNscyhhLEV4dC5iYXNlQ1NTUHJlZml4KyJoaWRlLXZpc2liaWxpdHkiKX0sZ2V0RGVmczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWZzfHwodGhpcy5fZGVmcz10aGlzLmNyZWF0ZVN2Z0VsZW1lbnQoImRlZnMiKSl9LHRyYW5zZm9ybTpmdW5jdGlvbihrLGEpe3ZhciBoPXRoaXMsaj1uZXcgRXh0LmRyYXcuTWF0cml4KCksZT1rLnRyYW5zZm9ybWF0aW9ucyxkPWUubGVuZ3RoLGM9MCxiLGc7Zm9yKDtjPGQ7YysrKXtiPWVbY107Zz1iLnR5cGU7aWYoZz09InRyYW5zbGF0ZSIpe2oudHJhbnNsYXRlKGIueCxiLnkpfWVsc2V7aWYoZz09InJvdGF0ZSIpe2oucm90YXRlKGIuZGVncmVlcyxiLngsYi55KX1lbHNle2lmKGc9PSJzY2FsZSIpe2ouc2NhbGUoYi54LGIueSxiLmNlbnRlclgsYi5jZW50ZXJZKX19fX1rLm1hdHJpeD1qO2lmKCFhKXtrLmVsLnNldCh7dHJhbnNmb3JtOmoudG9TdmcoKX0pfX0sc2V0U2l6ZTpmdW5jdGlvbihjLGEpe3ZhciBkPXRoaXMsYj1kLmVsO2M9K2N8fGQud2lkdGg7YT0rYXx8ZC5oZWlnaHQ7ZC53aWR0aD1jO2QuaGVpZ2h0PWE7Yi5zZXRTaXplKGMsYSk7Yi5zZXQoe3dpZHRoOmMsaGVpZ2h0OmF9KTtkLmNhbGxQYXJlbnQoW2MsYV0pfSxnZXRSZWdpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmVsLmdldFhZKCksYz10aGlzLmJnUmVjdC5nZXRYWSgpLGI9TWF0aC5tYXgsYT1iKGVbMF0sY1swXSksZD1iKGVbMV0sY1sxXSk7cmV0dXJue2xlZnQ6YSx0b3A6ZCxyaWdodDphK3RoaXMud2lkdGgsYm90dG9tOmQrdGhpcy5oZWlnaHR9fSxvblJlbW92ZTpmdW5jdGlvbihhKXtpZihhLmVsKXthLmVsLmRlc3Ryb3koKTtkZWxldGUgYS5lbH10aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sc2V0Vmlld0JveDpmdW5jdGlvbihiLGQsYyxhKXtpZihpc0Zpbml0ZShiKSYmaXNGaW5pdGUoZCkmJmlzRmluaXRlKGMpJiZpc0Zpbml0ZShhKSl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5lbC5kb20uc2V0QXR0cmlidXRlKCJ2aWV3Qm94IixbYixkLGMsYV0uam9pbigiICIpKX19LHJlbmRlcjpmdW5jdGlvbihjKXt2YXIgZz10aGlzLGUsYixkLGEsaCxpO2lmKCFnLmVsKXtlPWcud2lkdGh8fDA7Yj1nLmhlaWdodHx8MDtkPWcuY3JlYXRlU3ZnRWxlbWVudCgic3ZnIix7eG1sbnM6Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIix2ZXJzaW9uOjEuMSx3aWR0aDplLGhlaWdodDpifSk7YT1nLmdldERlZnMoKTtoPWcuY3JlYXRlU3ZnRWxlbWVudCgicmVjdCIse3dpZHRoOiIxMDAlIixoZWlnaHQ6IjEwMCUiLGZpbGw6IiMwMDAiLHN0cm9rZToibm9uZSIsb3BhY2l0eTowfSk7aWYoRXh0LmlzU2FmYXJpMyl7aT1nLmNyZWF0ZVN2Z0VsZW1lbnQoInJlY3QiLHt4Oi0xMCx5Oi0xMCx3aWR0aDoiMTEwJSIsaGVpZ2h0OiIxMTAlIixmaWxsOiJub25lIixzdHJva2U6IiMwMDAifSl9ZC5hcHBlbmRDaGlsZChhKTtpZihFeHQuaXNTYWZhcmkzKXtkLmFwcGVuZENoaWxkKGkpfWQuYXBwZW5kQ2hpbGQoaCk7Yy5hcHBlbmRDaGlsZChkKTtnLmVsPUV4dC5nZXQoZCk7Zy5iZ1JlY3Q9RXh0LmdldChoKTtpZihFeHQuaXNTYWZhcmkzKXtnLndlYmtpdFJlY3Q9RXh0LmdldChpKTtnLndlYmtpdFJlY3QuaGlkZSgpfWcuZWwub24oe3Njb3BlOmcsbW91c2V1cDpnLm9uTW91c2VVcCxtb3VzZWRvd246Zy5vbk1vdXNlRG93bixtb3VzZW92ZXI6Zy5vbk1vdXNlT3Zlcixtb3VzZW91dDpnLm9uTW91c2VPdXQsbW91c2Vtb3ZlOmcub25Nb3VzZU1vdmUsbW91c2VlbnRlcjpnLm9uTW91c2VFbnRlcixtb3VzZWxlYXZlOmcub25Nb3VzZUxlYXZlLGNsaWNrOmcub25DbGljayxkYmxjbGljazpnLm9uRGJsQ2xpY2t9KX1nLnJlbmRlckFsbCgpfSxvbk1vdXNlRW50ZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5lbC5wYXJlbnQoKS5nZXRSZWdpb24oKS5jb250YWlucyhhLmdldFBvaW50KCkpKXt0aGlzLmZpcmVFdmVudCgibW91c2VlbnRlciIsYSl9fSxvbk1vdXNlTGVhdmU6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuZWwucGFyZW50KCkuZ2V0UmVnaW9uKCkuY29udGFpbnMoYS5nZXRQb2ludCgpKSl7dGhpcy5maXJlRXZlbnQoIm1vdXNlbGVhdmUiLGEpfX0scHJvY2Vzc0V2ZW50OmZ1bmN0aW9uKGIsZyl7dmFyIGQ9Zy5nZXRUYXJnZXQoKSxhPXRoaXMuc3VyZmFjZSxjO3RoaXMuZmlyZUV2ZW50KGIsZyk7aWYoZC5ub2RlTmFtZT09InRzcGFuIiYmZC5wYXJlbnROb2RlKXtkPWQucGFyZW50Tm9kZX1jPXRoaXMuaXRlbXMuZ2V0KGQuaWQpO2lmKGMpe2MuZmlyZUV2ZW50KGIsYyxnKX19LHR1bmVUZXh0OmZ1bmN0aW9uKGssbCl7dmFyIGE9ay5lbC5kb20sYj1bXSxuLGgsbSxkLGUsYyxnLGo7aWYobC5oYXNPd25Qcm9wZXJ0eSgidGV4dCIpKXttPWsudHNwYW5zJiZFeHQuQXJyYXkubWFwKGsudHNwYW5zLGZ1bmN0aW9uKGkpe3JldHVybiBpLnRleHRDb250ZW50fSkuam9pbigiIik7aWYoIWsudHNwYW5zfHxsLnRleHQhPW0pe2I9dGhpcy5zZXRUZXh0KGssbC50ZXh0KTtrLnRzcGFucz1ifWVsc2V7Yj1rLnRzcGFuc3x8W119fWlmKGIubGVuZ3RoKXtuPXRoaXMuZ2V0QkJveFRleHQoaykuaGVpZ2h0O2o9ay5lbC5kb20uZ2V0QXR0cmlidXRlKCJ4Iik7Zm9yKGQ9MCxlPWIubGVuZ3RoO2Q8ZTtkKyspe2c9KEV4dC5pc0ZGM18wfHxFeHQuaXNGRjNfNSk/Mjo0O2JbZF0uc2V0QXR0cmlidXRlKCJ4IixqKTtiW2RdLnNldEF0dHJpYnV0ZSgiZHkiLGQ/bioxLjI6bi9nKX1rLmRpcnR5PXRydWV9fSxzZXRUZXh0OmZ1bmN0aW9uKGssZCl7dmFyIGg9dGhpcyxhPWsuZWwuZG9tLGI9W10sbSxqLGwsZSxnLGM7d2hpbGUoYS5maXJzdENoaWxkKXthLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCl9Yz1TdHJpbmcoZCkuc3BsaXQoIlxuIik7Zm9yKGU9MCxnPWMubGVuZ3RoO2U8ZztlKyspe2w9Y1tlXTtpZihsKXtqPWguY3JlYXRlU3ZnRWxlbWVudCgidHNwYW4iKTtqLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKEV4dC5odG1sRGVjb2RlKGwpKSk7YS5hcHBlbmRDaGlsZChqKTtiW2VdPWp9fXJldHVybiBifSxyZW5kZXJBbGw6ZnVuY3Rpb24oKXt0aGlzLml0ZW1zLmVhY2godGhpcy5yZW5kZXJJdGVtLHRoaXMpfSxyZW5kZXJJdGVtOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmVsKXtyZXR1cm59aWYoIWEuZWwpe3RoaXMuY3JlYXRlU3ByaXRlRWxlbWVudChhKX1pZihhLnpJbmRleERpcnR5KXt0aGlzLmFwcGx5WkluZGV4KGEpfWlmKGEuZGlydHkpe3RoaXMuYXBwbHlBdHRycyhhKTtpZihhLmRpcnR5VHJhbnNmb3JtKXt0aGlzLmFwcGx5VHJhbnNmb3JtYXRpb25zKGEpfX19LHJlZHJhdzpmdW5jdGlvbihhKXthLmRpcnR5PWEuekluZGV4RGlydHk9dHJ1ZTt0aGlzLnJlbmRlckl0ZW0oYSl9LGFwcGx5QXR0cnM6ZnVuY3Rpb24ocil7dmFyIG09dGhpcyxjPXIuZWwscT1yLmdyb3VwLGo9ci5hdHRyLHM9bS5wYXJzZXJzLGc9bS5ncmFkaWVudHNNYXB8fHt9LGs9RXh0LmlzU2FmYXJpJiYhRXh0LmlzU3RyaWN0LGUsaCxsLHAsZCxvLGIsYSxuO2lmKHEpe2U9W10uY29uY2F0KHEpO2w9ZS5sZW5ndGg7Zm9yKGg9MDtoPGw7aCsrKXtxPWVbaF07bS5nZXRHcm91cChxKS5hZGQocil9ZGVsZXRlIHIuZ3JvdXB9cD1tLnNjcnViQXR0cnMocil8fHt9O3IuYmJveC5wbGFpbj0wO3IuYmJveC50cmFuc2Zvcm09MDtpZihyLnR5cGU9PSJjaXJjbGUifHxyLnR5cGU9PSJlbGxpcHNlIil7cC5jeD1wLmN4fHxwLng7cC5jeT1wLmN5fHxwLnl9ZWxzZXtpZihyLnR5cGU9PSJyZWN0Iil7cC5yeD1wLnJ5PXAucn1lbHNle2lmKHIudHlwZT09InBhdGgiJiZwLmQpe3AuZD1FeHQuZHJhdy5EcmF3LnBhdGhUb1N0cmluZyhFeHQuZHJhdy5EcmF3LnBhdGhUb0Fic29sdXRlKHAuZCkpfX19ci5kaXJ0eVBhdGg9ZmFsc2U7aWYocFsiY2xpcC1yZWN0Il0pe20uc2V0Q2xpcChyLHApO2RlbGV0ZSBwWyJjbGlwLXJlY3QiXX1pZihyLnR5cGU9PSJ0ZXh0IiYmcC5mb250JiZyLmRpcnR5Rm9udCl7Yy5zZXQoe3N0eWxlOiJmb250OiAiK3AuZm9udH0pfWlmKHIudHlwZT09ImltYWdlIil7Yy5kb20uc2V0QXR0cmlidXRlTlMobS54bGluaywiaHJlZiIscC5zcmMpfUV4dC5hcHBseUlmKHAsbS5taW5EZWZhdWx0c1tyLnR5cGVdKTtpZihyLmRpcnR5SGlkZGVuKXsoai5oaWRkZW4pP20uaGlkZVByaW0ocik6bS5zaG93UHJpbShyKTtyLmRpcnR5SGlkZGVuPWZhbHNlfWZvcihvIGluIHApe2lmKHAuaGFzT3duUHJvcGVydHkobykmJnBbb10hPW51bGwpe2lmKGsmJigiY29sb3J8c3Ryb2tlfGZpbGwiLmluZGV4T2Yobyk+LTEpJiYocFtvXSBpbiBnKSl7cFtvXT1nW3Bbb11dfWlmKG89PSJoaWRkZW4iJiZyLnR5cGU9PSJ0ZXh0Iil7Y29udGludWV9aWYobyBpbiBzKXtjLmRvbS5zZXRBdHRyaWJ1dGUobyxzW29dKHBbb10scixtKSl9ZWxzZXtjLmRvbS5zZXRBdHRyaWJ1dGUobyxwW29dKX19fWlmKHIudHlwZT09InRleHQiKXttLnR1bmVUZXh0KHIscCl9ci5kaXJ0eUZvbnQ9ZmFsc2U7Yj1qLnN0eWxlO2lmKGIpe2Muc2V0U3R5bGUoYil9ci5kaXJ0eT1mYWxzZTtpZihFeHQuaXNTYWZhcmkzKXttLndlYmtpdFJlY3Quc2hvdygpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXttLndlYmtpdFJlY3QuaGlkZSgpfSl9fSxzZXRDbGlwOmZ1bmN0aW9uKGIsZyl7dmFyIGU9dGhpcyxkPWdbImNsaXAtcmVjdCJdLGEsYztpZihkKXtpZihiLmNsaXApe2IuY2xpcC5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYi5jbGlwLnBhcmVudE5vZGUpfWE9ZS5jcmVhdGVTdmdFbGVtZW50KCJjbGlwUGF0aCIpO2M9ZS5jcmVhdGVTdmdFbGVtZW50KCJyZWN0Iik7YS5pZD1FeHQuaWQobnVsbCwiZXh0LWNsaXAtIik7Yy5zZXRBdHRyaWJ1dGUoIngiLGQueCk7Yy5zZXRBdHRyaWJ1dGUoInkiLGQueSk7Yy5zZXRBdHRyaWJ1dGUoIndpZHRoIixkLndpZHRoKTtjLnNldEF0dHJpYnV0ZSgiaGVpZ2h0IixkLmhlaWdodCk7YS5hcHBlbmRDaGlsZChjKTtlLmdldERlZnMoKS5hcHBlbmRDaGlsZChhKTtiLmVsLmRvbS5zZXRBdHRyaWJ1dGUoImNsaXAtcGF0aCIsInVybCgjIithLmlkKyIpIik7Yi5jbGlwPWN9fSxhcHBseVpJbmRleDpmdW5jdGlvbihkKXt2YXIgZz10aGlzLGI9Zy5pdGVtcyxhPWIuaW5kZXhPZihkKSxlPWQuZWwsYztpZihnLmVsLmRvbS5jaGlsZE5vZGVzW2ErMl0hPT1lLmRvbSl7aWYoYT4wKXtkb3tjPWIuZ2V0QXQoLS1hKS5lbH13aGlsZSghYyYmYT4wKX1lLmluc2VydEFmdGVyKGN8fGcuYmdSZWN0KX1kLnpJbmRleERpcnR5PWZhbHNlfSxjcmVhdGVJdGVtOmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBFeHQuZHJhdy5TcHJpdGUoYSk7Yi5zdXJmYWNlPXRoaXM7cmV0dXJuIGJ9LGFkZEdyYWRpZW50OmZ1bmN0aW9uKGgpe2g9RXh0LmRyYXcuRHJhdy5wYXJzZUdyYWRpZW50KGgpO3ZhciBlPXRoaXMsZD1oLnN0b3BzLmxlbmd0aCxhPWgudmVjdG9yLGw9RXh0LmlzU2FmYXJpJiYhRXh0LmlzU3RyaWN0LGosZyxrLGMsYjtiPWUuZ3JhZGllbnRzTWFwfHx7fTtpZighbCl7aWYoaC50eXBlPT0ibGluZWFyIil7aj1lLmNyZWF0ZVN2Z0VsZW1lbnQoImxpbmVhckdyYWRpZW50Iik7ai5zZXRBdHRyaWJ1dGUoIngxIixhWzBdKTtqLnNldEF0dHJpYnV0ZSgieTEiLGFbMV0pO2ouc2V0QXR0cmlidXRlKCJ4MiIsYVsyXSk7ai5zZXRBdHRyaWJ1dGUoInkyIixhWzNdKX1lbHNle2o9ZS5jcmVhdGVTdmdFbGVtZW50KCJyYWRpYWxHcmFkaWVudCIpO2ouc2V0QXR0cmlidXRlKCJjeCIsaC5jZW50ZXJYKTtqLnNldEF0dHJpYnV0ZSgiY3kiLGguY2VudGVyWSk7ai5zZXRBdHRyaWJ1dGUoInIiLGgucmFkaXVzKTtpZihFeHQuaXNOdW1iZXIoaC5mb2NhbFgpJiZFeHQuaXNOdW1iZXIoaC5mb2NhbFkpKXtqLnNldEF0dHJpYnV0ZSgiZngiLGguZm9jYWxYKTtqLnNldEF0dHJpYnV0ZSgiZnkiLGguZm9jYWxZKX19ai5pZD1oLmlkO2UuZ2V0RGVmcygpLmFwcGVuZENoaWxkKGopO2ZvcihjPTA7YzxkO2MrKyl7Zz1oLnN0b3BzW2NdO2s9ZS5jcmVhdGVTdmdFbGVtZW50KCJzdG9wIik7ay5zZXRBdHRyaWJ1dGUoIm9mZnNldCIsZy5vZmZzZXQrIiUiKTtrLnNldEF0dHJpYnV0ZSgic3RvcC1jb2xvciIsZy5jb2xvcik7ay5zZXRBdHRyaWJ1dGUoInN0b3Atb3BhY2l0eSIsZy5vcGFjaXR5KTtqLmFwcGVuZENoaWxkKGspfX1lbHNle2JbInVybCgjIitoLmlkKyIpIl09aC5zdG9wc1swXS5jb2xvcn1lLmdyYWRpZW50c01hcD1ifSxoYXNDbHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYiYmKCIgIisoYS5lbC5kb20uZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIikrIiAiKS5pbmRleE9mKCIgIitiKyIgIikhPS0xfSxhZGRDbHM6ZnVuY3Rpb24oZSxoKXt2YXIgZz1lLmVsLGQsYSxjLGI9W10saj1nLmdldEF0dHJpYnV0ZSgiY2xhc3MiKXx8IiI7aWYoIUV4dC5pc0FycmF5KGgpKXtpZih0eXBlb2YgaD09InN0cmluZyImJiF0aGlzLmhhc0NscyhlLGgpKXtnLnNldCh7ImNsYXNzIjpqKyIgIitofSl9fWVsc2V7Zm9yKGQ9MCxhPWgubGVuZ3RoO2Q8YTtkKyspe2M9aFtkXTtpZih0eXBlb2YgYz09InN0cmluZyImJigiICIraisiICIpLmluZGV4T2YoIiAiK2MrIiAiKT09LTEpe2IucHVzaChjKX19aWYoYi5sZW5ndGgpe2cuc2V0KHsiY2xhc3MiOiIgIitiLmpvaW4oIiAiKX0pfX19LHJlbW92ZUNsczpmdW5jdGlvbihrLGcpe3ZhciBoPXRoaXMsYj1rLmVsLGQ9Yi5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiLGMsaixlLGwsYTtpZighRXh0LmlzQXJyYXkoZykpe2c9W2ddfWlmKGQpe2E9ZC5yZXBsYWNlKGgudHJpbVJlLCIgIikuc3BsaXQoaC5zcGFjZXNSZSk7Zm9yKGM9MCxlPWcubGVuZ3RoO2M8ZTtjKyspe2w9Z1tjXTtpZih0eXBlb2YgbD09InN0cmluZyIpe2w9bC5yZXBsYWNlKGgudHJpbVJlLCIiKTtqPUV4dC5BcnJheS5pbmRleE9mKGEsbCk7aWYoaiE9LTEpe0V4dC5BcnJheS5lcmFzZShhLGosMSl9fX1iLnNldCh7ImNsYXNzIjphLmpvaW4oIiAiKX0pfX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KCk7aWYoYS5lbCl7YS5lbC5yZW1vdmUoKX1pZihhLl9kZWZzKXtFeHQuZ2V0KGEuX2RlZnMpLmRlc3Ryb3koKX1pZihhLmJnUmVjdCl7RXh0LmdldChhLmJnUmVjdCkuZGVzdHJveSgpfWlmKGEud2Via2l0UmVjdCl7RXh0LmdldChhLndlYmtpdFJlY3QpLmRlc3Ryb3koKX1kZWxldGUgYS5lbH19KTtFeHQuZGVmaW5lKCJFeHQuZHJhdy5lbmdpbmUuU3ZnRXhwb3J0ZXIiLGZ1bmN0aW9uKCl7dmFyIGI9LywvZyxjPS8oLT9cZCpcLj9cZCopezF9KGVtfGV4fHB4fGlufGNtfG1tfHB0fHBjfCUpXHMoJyouKicqKS8saj0vcmdiXChccyooXGQrKVxzKixccyooXGQrKVxzKixccyooXGQrKVxzKlwpL2csaD0vcmdiYVwoXHMqKFxkKylccyosXHMqKFxkKylccyosXHMqKFxkKylccyosKFtcZFwuXSspXCkvZyxnLGksZSxtLG49ZnVuY3Rpb24obyl7Zz1vO2k9Zy5sZW5ndGg7ZT1nLndpZHRoO209Zy5oZWlnaHR9LGs9e3BhdGg6ZnVuY3Rpb24ocyl7dmFyIG89cy5hdHRyLHY9by5wYXRoLHI9IiIsdCx1LHE7aWYoRXh0LmlzQXJyYXkodlswXSkpe3E9di5sZW5ndGg7Zm9yKHU9MDt1PHE7dSsrKXtyKz12W3VdLmpvaW4oIiAiKX19ZWxzZXtpZihFeHQuaXNBcnJheSh2KSl7cj12LmpvaW4oIiAiKX1lbHNle3I9di5yZXBsYWNlKGIsIiAiKX19dD1kKHtkOnIsZmlsbDpvLmZpbGx8fCJub25lIixzdHJva2U6by5zdHJva2UsImZpbGwtb3BhY2l0eSI6by5vcGFjaXR5LCJzdHJva2Utd2lkdGgiOm9bInN0cm9rZS13aWR0aCJdLCJzdHJva2Utb3BhY2l0eSI6b1sic3Ryb2tlLW9wYWNpdHkiXSwiei1pbmRleCI6by56SW5kZXgsdHJhbnNmb3JtOnMubWF0cml4LnRvU3ZnKCl9KTtyZXR1cm4iPHBhdGggIit0KyIvPiJ9LHRleHQ6ZnVuY3Rpb24odSl7dmFyIHI9dS5hdHRyLHE9Yy5leGVjKHIuZm9udCksdz0ocSYmcVsxXSl8fCIxMiIscD0ocSYmcVszXSl8fCJBcmlhbCIsdj1yLnRleHQsdD0oRXh0LmlzRkYzXzB8fEV4dC5pc0ZGM181KT8yOjQsbz0iIixzO3UuZ2V0QkJveCgpO28rPSc8dHNwYW4geD0iJysoci54fHwiIikrJyIgZHk9Iic7bys9KHcvdCkrJyI+JztvKz1FeHQuaHRtbEVuY29kZSh2KSsiPC90c3Bhbj4iO3M9ZCh7eDpyLngseTpyLnksImZvbnQtc2l6ZSI6dywiZm9udC1mYW1pbHkiOnAsImZvbnQtd2VpZ2h0IjpyWyJmb250LXdlaWdodCJdLCJ0ZXh0LWFuY2hvciI6clsidGV4dC1hbmNob3IiXSxmaWxsOnIuZmlsbHx8IiMwMDAiLCJmaWxsLW9wYWNpdHkiOnIub3BhY2l0eSx0cmFuc2Zvcm06dS5tYXRyaXgudG9TdmcoKX0pO3JldHVybiI8dGV4dCAiK3MrIj4iK28rIjwvdGV4dD4ifSxyZWN0OmZ1bmN0aW9uKHApe3ZhciBvPXAuYXR0cixxPWQoe3g6by54LHk6by55LHJ4Om8ucngscnk6by5yeSx3aWR0aDpvLndpZHRoLGhlaWdodDpvLmhlaWdodCxmaWxsOm8uZmlsbHx8Im5vbmUiLCJmaWxsLW9wYWNpdHkiOm8ub3BhY2l0eSxzdHJva2U6by5zdHJva2UsInN0cm9rZS1vcGFjaXR5IjpvWyJzdHJva2Utb3BhY2l0eSJdLCJzdHJva2Utd2lkdGgiOm9bInN0cm9rZS13aWR0aCJdLHRyYW5zZm9ybTpwLm1hdHJpeCYmcC5tYXRyaXgudG9TdmcoKX0pO3JldHVybiI8cmVjdCAiK3ErIi8+In0sY2lyY2xlOmZ1bmN0aW9uKHApe3ZhciBvPXAuYXR0cixxPWQoe2N4Om8ueCxjeTpvLnkscjpvLnJhZGl1cyxmaWxsOm8udHJhbnNsYXRpb24uZmlsbHx8by5maWxsfHwibm9uZSIsImZpbGwtb3BhY2l0eSI6by5vcGFjaXR5LHN0cm9rZTpvLnN0cm9rZSwic3Ryb2tlLW9wYWNpdHkiOm9bInN0cm9rZS1vcGFjaXR5Il0sInN0cm9rZS13aWR0aCI6b1sic3Ryb2tlLXdpZHRoIl0sdHJhbnNmb3JtOnAubWF0cml4LnRvU3ZnKCl9KTtyZXR1cm4iPGNpcmNsZSAiK3ErIiAvPiJ9LGltYWdlOmZ1bmN0aW9uKHApe3ZhciBvPXAuYXR0cixxPWQoe3g6by54LShvLndpZHRoLzI+PjApLHk6by55LShvLmhlaWdodC8yPj4wKSx3aWR0aDpvLndpZHRoLGhlaWdodDpvLmhlaWdodCwieGxpbms6aHJlZiI6by5zcmMsdHJhbnNmb3JtOnAubWF0cml4LnRvU3ZnKCl9KTtyZXR1cm4iPGltYWdlICIrcSsiIC8+In19LGE9ZnVuY3Rpb24oKXt2YXIgbz0nPD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJ5ZXMiPz4nO28rPSc8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPic7cmV0dXJuIG99LGw9ZnVuY3Rpb24oKXt2YXIgdz0nPHN2ZyB3aWR0aD0iJytlKydweCIgaGVpZ2h0PSInK20rJ3B4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiPicscD0iIixILEYsdixxLEcsSix6LHgsdCx5LEIsbyxLLHUsRSxDLEksRCxzLHI7dj1nLml0ZW1zLml0ZW1zO0Y9di5sZW5ndGg7Rz1mdW5jdGlvbihPKXt2YXIgVj1PLmNoaWxkTm9kZXMsUz1WLmxlbmd0aCxSPTAsUCxRLEw9IiIsTSxVLE4sVDtmb3IoO1I8UztSKyspe009VltSXTtVPU0uYXR0cmlidXRlcztOPU0udGFnTmFtZTtMKz0iPCIrTjtmb3IoUT0wLFA9VS5sZW5ndGg7UTxQO1ErKyl7VD1VLml0ZW0oUSk7TCs9IiAiK1QubmFtZSsnPSInK1QudmFsdWUrJyInfUwrPSI+IjtpZihNLmNoaWxkTm9kZXMubGVuZ3RoPjApe0wrPUcoTSl9TCs9IjwvIitOKyI+In1yZXR1cm4gTH07aWYoZy5nZXREZWZzKXtwPUcoZy5nZXREZWZzKCkpfWVsc2V7eD1nLmdyYWRpZW50c0NvbGw7aWYoeCl7dD14LmtleXM7eT14Lml0ZW1zO0I9MDtvPXQubGVuZ3RofWZvcig7QjxvO0IrKyl7Sz10W0JdO3U9eVtCXTtxPWcuZ3JhZGllbnRzQ29sbC5nZXRCeUtleShLKTtwKz0nPGxpbmVhckdyYWRpZW50IGlkPSInK0srJyIgeDE9IjAiIHkxPSIwIiB4Mj0iMSIgeTI9IjEiPic7dmFyIEE9cS5jb2xvcnMucmVwbGFjZShqLCJyZ2IoJDF8JDJ8JDMpIik7QT1BLnJlcGxhY2UoaCwicmdiYSgkMXwkMnwkM3wkNCkiKTtKPUEuc3BsaXQoIiwiKTtmb3IoRT0wLEk9Si5sZW5ndGg7RTxJO0UrKyl7ej1KW0VdLnNwbGl0KCIgIik7QT1FeHQuZHJhdy5Db2xvci5mcm9tU3RyaW5nKHpbMV0ucmVwbGFjZSgvXHwvZywiLCIpKTtwKz0nPHN0b3Agb2Zmc2V0PSInK3pbMF0rJyIgc3RvcC1jb2xvcj0iJytBLnRvU3RyaW5nKCkrJyIgc3RvcC1vcGFjaXR5PSIxIj48L3N0b3A+J31wKz0iPC9saW5lYXJHcmFkaWVudD4ifX13Kz0iPGRlZnM+IitwKyI8L2RlZnM+Ijt3Kz1rLnJlY3Qoe2F0dHI6e3dpZHRoOiIxMDAlIixoZWlnaHQ6IjEwMCUiLGZpbGw6IiNmZmYiLHN0cm9rZToibm9uZSIsb3BhY2l0eToiMCJ9fSk7RD1uZXcgQXJyYXkoRik7Zm9yKEU9MDtFPEY7RSsrKXtEW0VdPUV9RC5zb3J0KGZ1bmN0aW9uKE0sTCl7cz12W01dLmF0dHIuekluZGV4fHwwO3I9dltMXS5hdHRyLnpJbmRleHx8MDtpZihzPT1yKXtyZXR1cm4gTS1MfXJldHVybiBzLXJ9KTtmb3IoRT0wO0U8RjtFKyspe0g9dltEW0VdXTtpZighSC5hdHRyLmhpZGRlbil7dys9a1tILnR5cGVdKEgpfX13Kz0iPC9zdmc+IjtyZXR1cm4gd30sZD1mdW5jdGlvbihxKXt2YXIgcD0iIixvO2ZvcihvIGluIHEpe2lmKHEuaGFzT3duUHJvcGVydHkobykmJnFbb10hPW51bGwpe3ArPW8rJz0iJytxW29dKyciICd9fXJldHVybiBwfTtyZXR1cm57c2luZ2xldG9uOnRydWUsZ2VuZXJhdGU6ZnVuY3Rpb24obyxwKXtwPXB8fHt9O24obyk7cmV0dXJuIGEoKStsKCl9fX0pO0V4dC5kZWZpbmUoIkV4dC5kcmF3LmVuZ2luZS5WbWwiLHtleHRlbmQ6IkV4dC5kcmF3LlN1cmZhY2UiLHJlcXVpcmVzOlsiRXh0LmRyYXcuRHJhdyIsIkV4dC5kcmF3LkNvbG9yIiwiRXh0LmRyYXcuU3ByaXRlIiwiRXh0LmRyYXcuTWF0cml4IiwiRXh0LkVsZW1lbnQiXSxlbmdpbmU6IlZtbCIsbWFwOntNOiJtIixMOiJsIixDOiJjIixaOiJ4IixtOiJ0IixsOiJyIixjOiJ2Iix6OiJ4In0sYml0ZXNSZTovKFtjbG16XSksPyhbXmNsbXpdKikvZ2ksdmFsUmU6Ly0/W14sXHNcLV0rL2csZmlsbFVybFJlOi9edXJsXChccypbJyJdPyhbXlwpXSs/KVsnIl0/XHMqXCkkL2kscGF0aGxpa2U6L14ocGF0aHxyZWN0KSQvLE5vblZtbFBhdGhSZTovW2FocXN0dl0vaWcscGFydGlhbFBhdGhSZTovW2NsbXpdL2csZm9udEZhbWlseVJlOi9eWyciXSt8WyciXSskL2csYmFzZVZtbENsczpFeHQuYmFzZUNTU1ByZWZpeCsidm1sLWJhc2UiLHZtbEdyb3VwQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ2bWwtZ3JvdXAiLHNwcml0ZUNsczpFeHQuYmFzZUNTU1ByZWZpeCsidm1sLXNwcml0ZSIsbWVhc3VyZVNwYW5DbHM6RXh0LmJhc2VDU1NQcmVmaXgrInZtbC1tZWFzdXJlLXNwYW4iLHpvb206MjE2MDAsY29vcmRzaXplOjEwMDAsY29vcmRvcmlnaW46IjAgMCIsekluZGV4U2hpZnQ6MCxvcmRlclNwcml0ZXNCeVpJbmRleDpmYWxzZSxwYXRoMnZtbDpmdW5jdGlvbih0KXt2YXIgbj10aGlzLHU9bi5Ob25WbWxQYXRoUmUsYj1uLm1hcCxlPW4udmFsUmUscz1uLnpvb20sZD1uLmJpdGVzUmUsZz1FeHQuRnVuY3Rpb24uYmluZChFeHQuZHJhdy5EcmF3LnBhdGhUb0Fic29sdXRlLEV4dC5kcmF3LkRyYXcpLG0sbyxjLGEsayxxLGgsbDtpZihTdHJpbmcodCkubWF0Y2godSkpe2c9RXh0LkZ1bmN0aW9uLmJpbmQoRXh0LmRyYXcuRHJhdy5wYXRoMmN1cnZlLEV4dC5kcmF3LkRyYXcpfWVsc2V7aWYoIVN0cmluZyh0KS5tYXRjaChuLnBhcnRpYWxQYXRoUmUpKXttPVN0cmluZyh0KS5yZXBsYWNlKGQsZnVuY3Rpb24ocix3LGope3ZhciB2PVtdLGk9dy50b0xvd2VyQ2FzZSgpPT0ibSIscD1iW3ddO2oucmVwbGFjZShlLGZ1bmN0aW9uKHgpe2lmKGkmJnYubGVuZ3RoPT09Mil7cCs9ditiW3c9PSJtIj8ibCI6IkwiXTt2PVtdfXYucHVzaChNYXRoLnJvdW5kKHgqcykpfSk7cmV0dXJuIHArdn0pO3JldHVybiBtfX1vPWcodCk7bT1bXTtmb3Ioaz0wLHE9by5sZW5ndGg7azxxO2srKyl7Yz1vW2tdO2E9b1trXVswXS50b0xvd2VyQ2FzZSgpO2lmKGE9PSJ6Iil7YT0ieCJ9Zm9yKGg9MSxsPWMubGVuZ3RoO2g8bDtoKyspe2ErPU1hdGgucm91bmQoY1toXSpuLnpvb20pKyhoIT1sLTE/IiwiOiIiKX1tLnB1c2goYSl9cmV0dXJuIG0uam9pbigiICIpfSx0cmFuc2xhdGVBdHRyczp7cmFkaXVzOiJyIixyYWRpdXNYOiJyeCIscmFkaXVzWToicnkiLGxpbmVXaWR0aDoic3Ryb2tlLXdpZHRoIixmaWxsT3BhY2l0eToiZmlsbC1vcGFjaXR5IixzdHJva2VPcGFjaXR5OiJzdHJva2Utb3BhY2l0eSIsc3Ryb2tlTGluZWpvaW46InN0cm9rZS1saW5lam9pbiJ9LG1pbkRlZmF1bHRzOntjaXJjbGU6e2ZpbGw6Im5vbmUiLHN0cm9rZTpudWxsLCJzdHJva2Utd2lkdGgiOm51bGwsb3BhY2l0eTpudWxsLCJmaWxsLW9wYWNpdHkiOm51bGwsInN0cm9rZS1vcGFjaXR5IjpudWxsfSxlbGxpcHNlOntjeDowLGN5OjAscng6MCxyeTowLGZpbGw6Im5vbmUiLHN0cm9rZTpudWxsLCJzdHJva2Utd2lkdGgiOm51bGwsb3BhY2l0eTpudWxsLCJmaWxsLW9wYWNpdHkiOm51bGwsInN0cm9rZS1vcGFjaXR5IjpudWxsfSxyZWN0Ont4OjAseTowLHdpZHRoOjAsaGVpZ2h0OjAscng6MCxyeTowLGZpbGw6Im5vbmUiLHN0cm9rZTpudWxsLCJzdHJva2Utd2lkdGgiOm51bGwsb3BhY2l0eTpudWxsLCJmaWxsLW9wYWNpdHkiOm51bGwsInN0cm9rZS1vcGFjaXR5IjpudWxsfSx0ZXh0Ont4OjAseTowLCJ0ZXh0LWFuY2hvciI6InN0YXJ0Iixmb250OicxMHB4ICJBcmlhbCInLGZpbGw6IiMwMDAiLHN0cm9rZTpudWxsLCJzdHJva2Utd2lkdGgiOm51bGwsb3BhY2l0eTpudWxsLCJmaWxsLW9wYWNpdHkiOm51bGwsInN0cm9rZS1vcGFjaXR5IjpudWxsfSxwYXRoOntkOiJNMCwwIixmaWxsOiJub25lIixzdHJva2U6bnVsbCwic3Ryb2tlLXdpZHRoIjpudWxsLG9wYWNpdHk6bnVsbCwiZmlsbC1vcGFjaXR5IjpudWxsLCJzdHJva2Utb3BhY2l0eSI6bnVsbH0saW1hZ2U6e3g6MCx5OjAsd2lkdGg6MCxoZWlnaHQ6MCxwcmVzZXJ2ZUFzcGVjdFJhdGlvOiJub25lIixvcGFjaXR5Om51bGx9fSxvbk1vdXNlRW50ZXI6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoIm1vdXNlZW50ZXIiLGEpfSxvbk1vdXNlTGVhdmU6ZnVuY3Rpb24oYSl7dGhpcy5maXJlRXZlbnQoIm1vdXNlbGVhdmUiLGEpfSxwcm9jZXNzRXZlbnQ6ZnVuY3Rpb24oYixnKXt2YXIgZD1nLmdldFRhcmdldCgpLGE9dGhpcy5zdXJmYWNlLGM7dGhpcy5maXJlRXZlbnQoYixnKTtjPXRoaXMuaXRlbXMuZ2V0KGQuaWQpO2lmKGMpe2MuZmlyZUV2ZW50KGIsYyxnKX19LGNyZWF0ZVNwcml0ZUVsZW1lbnQ6ZnVuY3Rpb24oaCl7dmFyIGU9dGhpcyxkPWguYXR0cixnPWgudHlwZSxqPWUuem9vbSxiPWgudm1sfHwoaC52bWw9e30pLGs9TWF0aC5yb3VuZCxjPShnPT09ImltYWdlIik/ZS5jcmVhdGVOb2RlKCJpbWFnZSIpOmUuY3JlYXRlTm9kZSgic2hhcGUiKSxsLGksYTtjLmNvb3Jkc2l6ZT1qKyIgIitqO2MuY29vcmRvcmlnaW49ZC5jb29yZG9yaWdpbnx8IjAgMCI7RXh0LmdldChjKS5hZGRDbHMoZS5zcHJpdGVDbHMpO2lmKGc9PSJ0ZXh0Iil7Yi5wYXRoPWw9ZS5jcmVhdGVOb2RlKCJwYXRoIik7bC50ZXh0cGF0aG9rPXRydWU7Yi50ZXh0cGF0aD1hPWUuY3JlYXRlTm9kZSgidGV4dHBhdGgiKTthLm9uPXRydWU7Yy5hcHBlbmRDaGlsZChhKTtjLmFwcGVuZENoaWxkKGwpfWMuaWQ9aC5pZDtoLmVsPUV4dC5nZXQoYyk7aC5lbC5zZXRTdHlsZSgiekluZGV4IiwtZS56SW5kZXhTaGlmdCk7ZS5lbC5hcHBlbmRDaGlsZChjKTtpZihnIT09ImltYWdlIil7aT1lLmNyZWF0ZU5vZGUoInNrZXciKTtpLm9uPXRydWU7Yy5hcHBlbmRDaGlsZChpKTtoLnNrZXc9aX1oLm1hdHJpeD1uZXcgRXh0LmRyYXcuTWF0cml4KCk7aC5iYm94PXtwbGFpbjpudWxsLHRyYW5zZm9ybTpudWxsfTt0aGlzLmFwcGx5QXR0cnMoaCk7dGhpcy5hcHBseVRyYW5zZm9ybWF0aW9ucyhoKTtoLmZpcmVFdmVudCgicmVuZGVyIixoKTtyZXR1cm4gaC5lbH0sZ2V0QkJveFRleHQ6ZnVuY3Rpb24oYil7dmFyIGE9Yi52bWw7cmV0dXJue3g6YS5YKyhhLmJieHx8MCktYS5XLzIseTphLlktYS5ILzIsd2lkdGg6YS5XLGhlaWdodDphLkh9fSxhcHBseUF0dHJzOmZ1bmN0aW9uKG0pe3ZhciBzPXRoaXMsYz1tLnZtbCxqPW0uZ3JvdXAsYT1tLmF0dHIsYj1tLmVsLG89Yi5kb20scCx1LHIsbixrLHEsbCx0LGUsZCxoLGc7aWYoail7cj1bXS5jb25jYXQoaik7az1yLmxlbmd0aDtmb3Iobj0wO248aztuKyspe2o9cltuXTtzLmdldEdyb3VwKGopLmFkZChtKX1kZWxldGUgbS5ncm91cH1xPXMuc2NydWJBdHRycyhtKXx8e307aWYobS56SW5kZXhEaXJ0eSl7cy5zZXRaSW5kZXgobSl9RXh0LmFwcGx5SWYocSxzLm1pbkRlZmF1bHRzW20udHlwZV0pO2lmKG0udHlwZT09ImltYWdlIil7RXh0LmFwcGx5KG0uYXR0cix7eDpxLngseTpxLnksd2lkdGg6cS53aWR0aCxoZWlnaHQ6cS5oZWlnaHR9KTtiLnNldFN0eWxlKHt3aWR0aDpxLndpZHRoKyJweCIsaGVpZ2h0OnEuaGVpZ2h0KyJweCJ9KTtvLnNyYz1xLnNyY31pZihvLmhyZWYpe28uaHJlZj1xLmhyZWZ9aWYoby50aXRsZSl7by50aXRsZT1xLnRpdGxlfWlmKG8udGFyZ2V0KXtvLnRhcmdldD1xLnRhcmdldH1pZihvLmN1cnNvcil7by5jdXJzb3I9cS5jdXJzb3J9aWYobS5kaXJ0eUhpZGRlbil7KHEuaGlkZGVuKT9zLmhpZGVQcmltKG0pOnMuc2hvd1ByaW0obSk7bS5kaXJ0eUhpZGRlbj1mYWxzZX1pZihtLmRpcnR5UGF0aCl7aWYobS50eXBlPT0iY2lyY2xlInx8bS50eXBlPT0iZWxsaXBzZSIpe2U9cS54O2Q9cS55O2g9cS5yeHx8cS5yfHwwO2c9cS5yeXx8cS5yfHwwO28ucGF0aD1FeHQuU3RyaW5nLmZvcm1hdCgiYXJ7MH0sezF9LHsyfSx7M30sezR9LHsxfSx7NH0sezF9IixNYXRoLnJvdW5kKChlLWgpKnMuem9vbSksTWF0aC5yb3VuZCgoZC1nKSpzLnpvb20pLE1hdGgucm91bmQoKGUraCkqcy56b29tKSxNYXRoLnJvdW5kKChkK2cpKnMuem9vbSksTWF0aC5yb3VuZChlKnMuem9vbSkpO20uZGlydHlQYXRoPWZhbHNlfWVsc2V7aWYobS50eXBlIT09InRleHQiJiZtLnR5cGUhPT0iaW1hZ2UiKXttLmF0dHIucGF0aD1xLnBhdGg9cy5zZXRQYXRocyhtLHEpfHxxLnBhdGg7by5wYXRoPXMucGF0aDJ2bWwocS5wYXRoKTttLmRpcnR5UGF0aD1mYWxzZX19fWlmKCJjbGlwLXJlY3QiIGluIHEpe3Muc2V0Q2xpcChtLHEpfWlmKG0udHlwZT09InRleHQiKXtzLnNldFRleHRBdHRyaWJ1dGVzKG0scSl9aWYocS5vcGFjaXR5fHxxWyJzdHJva2Utb3BhY2l0eSJdfHxxLmZpbGwpe3Muc2V0RmlsbChtLHEpfWlmKHEuc3Ryb2tlfHxxWyJzdHJva2Utb3BhY2l0eSJdfHxxLmZpbGwpe3Muc2V0U3Ryb2tlKG0scSl9cD1hLnN0eWxlO2lmKHApe2Iuc2V0U3R5bGUocCl9bS5kaXJ0eT1mYWxzZX0sc2V0WkluZGV4OmZ1bmN0aW9uKGUpe3ZhciBoPXRoaXMsaj1lLmF0dHIuekluZGV4LGI9aC56SW5kZXhTaGlmdCxjLGEsZyxkO2lmKGo8Yil7Yz1oLml0ZW1zLml0ZW1zO2E9Yy5sZW5ndGg7Zm9yKGQ9MDtkPGE7ZCsrKXtpZigoaj1jW2RdLmF0dHIuekluZGV4KSYmajxiKXtiPWp9fWguekluZGV4U2hpZnQ9Yjtmb3IoZD0wO2Q8YTtkKyspe2c9Y1tkXTtpZihnLmVsKXtnLmVsLnNldFN0eWxlKCJ6SW5kZXgiLGcuYXR0ci56SW5kZXgtYil9Zy56SW5kZXhEaXJ0eT1mYWxzZX19ZWxzZXtpZihlLmVsKXtlLmVsLnNldFN0eWxlKCJ6SW5kZXgiLGotYik7ZS56SW5kZXhEaXJ0eT1mYWxzZX19fSxzZXRQYXRoczpmdW5jdGlvbihjLGQpe3ZhciBhPWMuYXR0cixiPWMuYXR0clsic3Ryb2tlLXdpZHRoIl18fDE7Yy5iYm94LnBsYWluPW51bGw7Yy5iYm94LnRyYW5zZm9ybT1udWxsO2lmKGMudHlwZT09ImNpcmNsZSIpe2Eucng9YS5yeT1kLnI7cmV0dXJuIEV4dC5kcmF3LkRyYXcuZWxsaXBzZVBhdGgoYyl9ZWxzZXtpZihjLnR5cGU9PSJlbGxpcHNlIil7YS5yeD1kLnJ4O2Eucnk9ZC5yeTtyZXR1cm4gRXh0LmRyYXcuRHJhdy5lbGxpcHNlUGF0aChjKX1lbHNle2lmKGMudHlwZT09InJlY3QiKXthLnJ4PWEucnk9ZC5yO3JldHVybiBFeHQuZHJhdy5EcmF3LnJlY3RQYXRoKGMpfWVsc2V7aWYoYy50eXBlPT0icGF0aCImJmEucGF0aCl7cmV0dXJuIEV4dC5kcmF3LkRyYXcucGF0aFRvQWJzb2x1dGUoYS5wYXRoKX19fX1yZXR1cm4gZmFsc2V9LHNldEZpbGw6ZnVuY3Rpb24oayxlKXt2YXIgaD10aGlzLGM9ay5lbC5kb20saj1jLmZpbGwsYj1mYWxzZSxnLGksYSxsLGQ7aWYoIWope2o9Yy5maWxsPWguY3JlYXRlTm9kZSgiZmlsbCIpO2I9dHJ1ZX1pZihFeHQuaXNBcnJheShlLmZpbGwpKXtlLmZpbGw9ZS5maWxsWzBdfWlmKGUuZmlsbD09Im5vbmUiKXtqLm9uPWZhbHNlfWVsc2V7aWYodHlwZW9mIGUub3BhY2l0eT09Im51bWJlciIpe2oub3BhY2l0eT1lLm9wYWNpdHl9aWYodHlwZW9mIGVbImZpbGwtb3BhY2l0eSJdPT0ibnVtYmVyIil7ai5vcGFjaXR5PWVbImZpbGwtb3BhY2l0eSJdfWoub249dHJ1ZTtpZih0eXBlb2YgZS5maWxsPT0ic3RyaW5nIil7YT1lLmZpbGwubWF0Y2goaC5maWxsVXJsUmUpO2lmKGEpe2E9YVsxXTtpZihhLmNoYXJBdCgwKT09IiMiKXtpPWguZ3JhZGllbnRzQ29sbC5nZXRCeUtleShhLnN1YnN0cmluZygxKSl9aWYoaSl7bD1lLnJvdGF0aW9uO2Q9LShpLmFuZ2xlKzI3MCsobD9sLmRlZ3JlZXM6MCkpJTM2MDtpZihkPT09MCl7ZD0xODB9ai5hbmdsZT1kO2oudHlwZT0iZ3JhZGllbnQiO2oubWV0aG9kPSJzaWdtYSI7aWYoai5jb2xvcnMpe2ouY29sb3JzLnZhbHVlPWkuY29sb3JzfWVsc2V7ai5jb2xvcnM9aS5jb2xvcnN9fWVsc2V7ai5zcmM9YTtqLnR5cGU9InRpbGUifX1lbHNle2ouY29sb3I9RXh0LmRyYXcuQ29sb3IudG9IZXgoZS5maWxsKTtqLnNyYz0iIjtqLnR5cGU9InNvbGlkIn19fWlmKGIpe2MuYXBwZW5kQ2hpbGQoail9fSxzZXRTdHJva2U6ZnVuY3Rpb24oYixoKXt2YXIgZT10aGlzLGQ9Yi5lbC5kb20saT1iLnN0cm9rZUVsLGc9ZmFsc2UsYyxhO2lmKCFpKXtpPWIuc3Ryb2tlRWw9ZS5jcmVhdGVOb2RlKCJzdHJva2UiKTtnPXRydWV9aWYoRXh0LmlzQXJyYXkoaC5zdHJva2UpKXtoLnN0cm9rZT1oLnN0cm9rZVswXX1pZighaC5zdHJva2V8fGguc3Ryb2tlPT0ibm9uZSJ8fGguc3Ryb2tlPT0wfHxoWyJzdHJva2Utd2lkdGgiXT09MCl7aS5vbj1mYWxzZX1lbHNle2kub249dHJ1ZTtpZihoLnN0cm9rZSYmIWguc3Ryb2tlLm1hdGNoKGUuZmlsbFVybFJlKSl7aS5jb2xvcj1FeHQuZHJhdy5Db2xvci50b0hleChoLnN0cm9rZSl9aS5kYXNoc3R5bGU9aFsic3Ryb2tlLWRhc2hhcnJheSJdPyJkYXNoIjoic29saWQiO2kuam9pbnN0eWxlPWhbInN0cm9rZS1saW5lam9pbiJdO2kuZW5kY2FwPWhbInN0cm9rZS1saW5lY2FwIl18fCJyb3VuZCI7aS5taXRlcmxpbWl0PWhbInN0cm9rZS1taXRlcmxpbWl0Il18fDg7Yz1wYXJzZUZsb2F0KGhbInN0cm9rZS13aWR0aCJdfHwxKSowLjc1O2E9aFsic3Ryb2tlLW9wYWNpdHkiXXx8MTtpZihFeHQuaXNOdW1iZXIoYykmJmM8MSl7aS53ZWlnaHQ9MTtpLm9wYWNpdHk9YSpjfWVsc2V7aS53ZWlnaHQ9YztpLm9wYWNpdHk9YX19aWYoZyl7ZC5hcHBlbmRDaGlsZChpKX19LHNldENsaXA6ZnVuY3Rpb24oYixnKXt2YXIgZT10aGlzLGM9Yi5lbCxhPWIuY2xpcEVsLGQ9U3RyaW5nKGdbImNsaXAtcmVjdCJdKS5zcGxpdChlLnNlcGFyYXRvclJlKTtpZighYSl7YT1iLmNsaXBFbD1lLmVsLmluc2VydEZpcnN0KEV4dC5nZXREb2MoKS5kb20uY3JlYXRlRWxlbWVudCgiZGl2IikpO2EuYWRkQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJ2bWwtc3ByaXRlIil9aWYoZC5sZW5ndGg9PTQpe2RbMl09K2RbMl0rKCtkWzBdKTtkWzNdPStkWzNdKygrZFsxXSk7YS5zZXRTdHlsZSgiY2xpcCIsRXh0LlN0cmluZy5mb3JtYXQoInJlY3QoezF9cHggezJ9cHggezN9cHggezB9cHgpIixkWzBdLGRbMV0sZFsyXSxkWzNdKSk7YS5zZXRTaXplKGUuZWwud2lkdGgsZS5lbC5oZWlnaHQpfWVsc2V7YS5zZXRTdHlsZSgiY2xpcCIsIiIpfX0sc2V0VGV4dEF0dHJpYnV0ZXM6ZnVuY3Rpb24oaSxjKXt2YXIgaD10aGlzLGE9aS52bWwsZT1hLnRleHRwYXRoLnN0eWxlLGc9aC5zcGFuLnN0eWxlLGo9aC56b29tLGs9TWF0aC5yb3VuZCxsPXtmb250U2l6ZToiZm9udC1zaXplIixmb250V2VpZ2h0OiJmb250LXdlaWdodCIsZm9udFN0eWxlOiJmb250LXN0eWxlIn0sYixkO2lmKGkuZGlydHlGb250KXtpZihjLmZvbnQpe2UuZm9udD1nLmZvbnQ9Yy5mb250fWlmKGNbImZvbnQtZmFtaWx5Il0pe2UuZm9udEZhbWlseT0nIicrY1siZm9udC1mYW1pbHkiXS5zcGxpdCgiLCIpWzBdLnJlcGxhY2UoaC5mb250RmFtaWx5UmUsIiIpKyciJztnLmZvbnRGYW1pbHk9Y1siZm9udC1mYW1pbHkiXX1mb3IoYiBpbiBsKXtkPWNbbFtiXV07aWYoZCl7ZVtiXT1nW2JdPWR9fWguc2V0VGV4dChpLGMudGV4dCk7aWYoYS50ZXh0cGF0aC5zdHJpbmcpe2guc3Bhbi5pbm5lckhUTUw9U3RyaW5nKGEudGV4dHBhdGguc3RyaW5nKS5yZXBsYWNlKC88L2csIiYjNjA7IikucmVwbGFjZSgvJi9nLCImIzM4OyIpLnJlcGxhY2UoL1xuL2csIjxici8+Iil9YS5XPWguc3Bhbi5vZmZzZXRXaWR0aDthLkg9aC5zcGFuLm9mZnNldEhlaWdodCsyO2lmKGNbInRleHQtYW5jaG9yIl09PSJtaWRkbGUiKXtlWyJ2LXRleHQtYWxpZ24iXT0iY2VudGVyIn1lbHNle2lmKGNbInRleHQtYW5jaG9yIl09PSJlbmQiKXtlWyJ2LXRleHQtYWxpZ24iXT0icmlnaHQiO2EuYmJ4PS1NYXRoLnJvdW5kKGEuVy8yKX1lbHNle2VbInYtdGV4dC1hbGlnbiJdPSJsZWZ0IjthLmJieD1NYXRoLnJvdW5kKGEuVy8yKX19fWEuWD1jLng7YS5ZPWMueTthLnBhdGgudj1FeHQuU3RyaW5nLmZvcm1hdCgibXswfSx7MX1sezJ9LHsxfSIsTWF0aC5yb3VuZChhLlgqaiksTWF0aC5yb3VuZChhLlkqaiksTWF0aC5yb3VuZChhLlgqaikrMSk7aS5iYm94LnBsYWluPW51bGw7aS5iYm94LnRyYW5zZm9ybT1udWxsO2kuZGlydHlGb250PWZhbHNlfSxzZXRUZXh0OmZ1bmN0aW9uKGEsYil7YS52bWwudGV4dHBhdGguc3RyaW5nPUV4dC5odG1sRGVjb2RlKGIpfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5lbC5oaWRlKCl9LHNob3c6ZnVuY3Rpb24oKXt0aGlzLmVsLnNob3coKX0saGlkZVByaW06ZnVuY3Rpb24oYSl7YS5lbC5hZGRDbHMoRXh0LmJhc2VDU1NQcmVmaXgrImhpZGUtdmlzaWJpbGl0eSIpfSxzaG93UHJpbTpmdW5jdGlvbihhKXthLmVsLnJlbW92ZUNscyhFeHQuYmFzZUNTU1ByZWZpeCsiaGlkZS12aXNpYmlsaXR5Iil9LHNldFNpemU6ZnVuY3Rpb24oYixhKXt2YXIgYz10aGlzO2I9Ynx8Yy53aWR0aDthPWF8fGMuaGVpZ2h0O2Mud2lkdGg9YjtjLmhlaWdodD1hO2lmKGMuZWwpe2lmKGIhPXVuZGVmaW5lZCl7Yy5lbC5zZXRXaWR0aChiKX1pZihhIT11bmRlZmluZWQpe2MuZWwuc2V0SGVpZ2h0KGEpfX1jLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sYXBwbHlWaWV3Qm94OmZ1bmN0aW9uKCl7dmFyIGc9dGhpcyxoPWcudmlld0JveCxlPWcud2lkdGgsYj1nLmhlaWdodCxjLGEsZDtnLmNhbGxQYXJlbnQoKTtpZihoJiYoZXx8Yikpe2M9Zy5pdGVtcy5pdGVtczthPWMubGVuZ3RoO2ZvcihkPTA7ZDxhO2QrKyl7Zy5hcHBseVRyYW5zZm9ybWF0aW9ucyhjW2RdKX19fSxvbkFkZDpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZih0aGlzLmVsKXt0aGlzLnJlbmRlckl0ZW0oYSl9fSxvblJlbW92ZTpmdW5jdGlvbihhKXtpZihhLmVsKXthLmVsLnJlbW92ZSgpO2RlbGV0ZSBhLmVsfXRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxyZW5kZXI6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxnPUV4dC5nZXREb2MoKS5kb20sYjtpZighYy5jcmVhdGVOb2RlKXt0cnl7aWYoIWcubmFtZXNwYWNlcy5ydm1sKXtnLm5hbWVzcGFjZXMuYWRkKCJydm1sIiwidXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp2bWwiKX1jLmNyZWF0ZU5vZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGcuY3JlYXRlRWxlbWVudCgiPHJ2bWw6IitlKycgY2xhc3M9InJ2bWwiPicpfX1jYXRjaChkKXtjLmNyZWF0ZU5vZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGcuY3JlYXRlRWxlbWVudCgiPCIrZSsnIHhtbG5zPSJ1cm46c2NoZW1hcy1taWNyb3NvZnQuY29tOnZtbCIgY2xhc3M9InJ2bWwiPicpfX19aWYoIWMuZWwpe2I9Zy5jcmVhdGVFbGVtZW50KCJkaXYiKTtjLmVsPUV4dC5nZXQoYik7Yy5lbC5hZGRDbHMoYy5iYXNlVm1sQ2xzKTtjLnNwYW49Zy5jcmVhdGVFbGVtZW50KCJzcGFuIik7RXh0LmdldChjLnNwYW4pLmFkZENscyhjLm1lYXN1cmVTcGFuQ2xzKTtiLmFwcGVuZENoaWxkKGMuc3Bhbik7Yy5lbC5zZXRTaXplKGMud2lkdGh8fDAsYy5oZWlnaHR8fDApO2EuYXBwZW5kQ2hpbGQoYik7Yy5lbC5vbih7c2NvcGU6Yyxtb3VzZXVwOmMub25Nb3VzZVVwLG1vdXNlZG93bjpjLm9uTW91c2VEb3duLG1vdXNlb3ZlcjpjLm9uTW91c2VPdmVyLG1vdXNlb3V0OmMub25Nb3VzZU91dCxtb3VzZW1vdmU6Yy5vbk1vdXNlTW92ZSxtb3VzZWVudGVyOmMub25Nb3VzZUVudGVyLG1vdXNlbGVhdmU6Yy5vbk1vdXNlTGVhdmUsY2xpY2s6Yy5vbkNsaWNrLGRibGNsaWNrOmMub25EYmxDbGlja30pfWMucmVuZGVyQWxsKCl9LHJlbmRlckFsbDpmdW5jdGlvbigpe3RoaXMuaXRlbXMuZWFjaCh0aGlzLnJlbmRlckl0ZW0sdGhpcyl9LHJlZHJhdzpmdW5jdGlvbihhKXthLmRpcnR5PXRydWU7dGhpcy5yZW5kZXJJdGVtKGEpfSxyZW5kZXJJdGVtOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmVsKXtyZXR1cm59aWYoIWEuZWwpe3RoaXMuY3JlYXRlU3ByaXRlRWxlbWVudChhKX1pZihhLmRpcnR5KXt0aGlzLmFwcGx5QXR0cnMoYSk7aWYoYS5kaXJ0eVRyYW5zZm9ybSl7dGhpcy5hcHBseVRyYW5zZm9ybWF0aW9ucyhhKX19fSxyb3RhdGlvbkNvbXBlbnNhdGlvbjpmdW5jdGlvbihkLGMsYSl7dmFyIGI9bmV3IEV4dC5kcmF3Lk1hdHJpeCgpO2Iucm90YXRlKC1kLDAuNSwwLjUpO3JldHVybnt4OmIueChjLGEpLHk6Yi55KGMsYSl9fSx0cmFuc2Zvcm06ZnVuY3Rpb24oeCxJKXt2YXIgSD10aGlzLGI9SC5nZXRCQm94KHgsdHJ1ZSksaj1iLngrYi53aWR0aCowLjUsaD1iLnkrYi5oZWlnaHQqMC41LEI9bmV3IEV4dC5kcmF3Lk1hdHJpeCgpLHE9eC50cmFuc2Zvcm1hdGlvbnMsdj1xLmxlbmd0aCxDPTAsbz0wLGQ9MSxjPTEsbj0iIixnPXguZWwsRT1nLmRvbSx6PUUuc3R5bGUsYT1ILnpvb20saz14LnNrZXcsRD1ILnZpZXdCb3hTaGlmdCxHLEYscyxsLHIscCxBLHcsdSx0LGUsbTtmb3IoO0M8djtDKyspe3M9cVtDXTtsPXMudHlwZTtpZihsPT0idHJhbnNsYXRlIil7Qi50cmFuc2xhdGUocy54LHMueSl9ZWxzZXtpZihsPT0icm90YXRlIil7Qi5yb3RhdGUocy5kZWdyZWVzLHMueCxzLnkpO28rPXMuZGVncmVlc31lbHNle2lmKGw9PSJzY2FsZSIpe0Iuc2NhbGUocy54LHMueSxzLmNlbnRlclgscy5jZW50ZXJZKTtkKj1zLng7Yyo9cy55fX19fXgubWF0cml4PUIuY2xvbmUoKTtpZihJKXtyZXR1cm59aWYoRCl7Qi5wcmVwZW5kKEQuc2NhbGUsMCwwLEQuc2NhbGUsRC5keCpELnNjYWxlLEQuZHkqRC5zY2FsZSl9aWYoeC50eXBlIT0iaW1hZ2UiJiZrKXtrLm9yaWdpbj0iMCwwIjtrLm1hdHJpeD1CLnRvU3RyaW5nKCk7bT1CLm9mZnNldCgpO2lmKG1bMF0+MzI3Njcpe21bMF09MzI3Njd9ZWxzZXtpZihtWzBdPC0zMjc2OCl7bVswXT0tMzI3Njh9fWlmKG1bMV0+MzI3Njcpe21bMV09MzI3Njd9ZWxzZXtpZihtWzFdPC0zMjc2OCl7bVsxXT0tMzI3Njh9fWsub2Zmc2V0PW19ZWxzZXt6LmZpbHRlcj1CLnRvRmlsdGVyKCk7ei5sZWZ0PU1hdGgubWluKEIueChiLngsYi55KSxCLngoYi54K2Iud2lkdGgsYi55KSxCLngoYi54LGIueStiLmhlaWdodCksQi54KGIueCtiLndpZHRoLGIueStiLmhlaWdodCkpKyJweCI7ei50b3A9TWF0aC5taW4oQi55KGIueCxiLnkpLEIueShiLngrYi53aWR0aCxiLnkpLEIueShiLngsYi55K2IuaGVpZ2h0KSxCLnkoYi54K2Iud2lkdGgsYi55K2IuaGVpZ2h0KSkrInB4In19LGNyZWF0ZUl0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5jcmVhdGUoIkV4dC5kcmF3LlNwcml0ZSIsYSl9LGdldFJlZ2lvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsLmdldFJlZ2lvbigpfSxhZGRDbHM6ZnVuY3Rpb24oYSxiKXtpZihhJiZhLmVsKXthLmVsLmFkZENscyhiKX19LHJlbW92ZUNsczpmdW5jdGlvbihhLGIpe2lmKGEmJmEuZWwpe2EuZWwucmVtb3ZlQ2xzKGIpfX0sYWRkR3JhZGllbnQ6ZnVuY3Rpb24oZyl7dmFyIGQ9dGhpcy5ncmFkaWVudHNDb2xsfHwodGhpcy5ncmFkaWVudHNDb2xsPUV4dC5jcmVhdGUoIkV4dC51dGlsLk1peGVkQ29sbGVjdGlvbiIpKSxhPVtdLGo9RXh0LmNyZWF0ZSgiRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uIiksbCxlLGIsaCxrLGM7ai5hZGRBbGwoZy5zdG9wcyk7ai5zb3J0QnlLZXkoIkFTQyIsZnVuY3Rpb24obSxpKXttPXBhcnNlSW50KG0sMTApO2k9cGFyc2VJbnQoaSwxMCk7cmV0dXJuIG0+aT8xOihtPGk/LTE6MCl9KTtsPWoua2V5cztlPWouaXRlbXM7Yj1sLmxlbmd0aDtmb3IoYz0wO2M8YjtjKyspe2g9bFtjXTtrPWVbY107YS5wdXNoKGgrIiUgIitrLmNvbG9yKX1kLmFkZChnLmlkLHtjb2xvcnM6YS5qb2luKCIsIiksYW5nbGU6Zy5hbmdsZX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihhLmVsKXthLmVsLnJlbW92ZSgpfWRlbGV0ZSBhLmVsfX0pO0V4dC5kZWZpbmUoIkV4dC5mbGFzaC5Db21wb25lbnQiLHtleHRlbmQ6IkV4dC5Db21wb25lbnQiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LkZsYXNoQ29tcG9uZW50IixhbGlhczoid2lkZ2V0LmZsYXNoIixmbGFzaFZlcnNpb246IjkuMC4xMTUiLGJhY2tncm91bmRDb2xvcjoiI2ZmZmZmZiIsd21vZGU6Im9wYXF1ZSIsc3dmV2lkdGg6IjEwMCUiLHN3ZkhlaWdodDoiMTAwJSIsZXhwcmVzc0luc3RhbGw6ZmFsc2UscmVuZGVyVHBsOlsnPGRpdiBpZD0ie3N3ZklkfSI+PC9kaXY+J10saW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudCgpO3RoaXMuYWRkRXZlbnRzKCJzdWNjZXNzIiwiZmFpbHVyZSIpfSxiZWZvcmVSZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTtFeHQuYXBwbHlJZih0aGlzLnJlbmRlckRhdGEse3N3ZklkOnRoaXMuZ2V0U3dmSWQoKX0pfSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1FeHQuYXBwbHkoe30sYi5mbGFzaFBhcmFtcyksYz1FeHQuYXBwbHkoe30sYi5mbGFzaFZhcnMpO2IuY2FsbFBhcmVudCgpO2E9RXh0LmFwcGx5KHthbGxvd1NjcmlwdEFjY2VzczoiYWx3YXlzIixiZ2NvbG9yOmIuYmFja2dyb3VuZENvbG9yLHdtb2RlOmIud21vZGV9LGEpO2M9RXh0LmFwcGx5KHthbGxvd2VkRG9tYWluOmRvY3VtZW50LmxvY2F0aW9uLmhvc3RuYW1lfSxjKTtuZXcgc3dmb2JqZWN0LmVtYmVkU1dGKGIudXJsLGIuZ2V0U3dmSWQoKSxiLnN3ZldpZHRoLGIuc3dmSGVpZ2h0LGIuZmxhc2hWZXJzaW9uLGIuZXhwcmVzc0luc3RhbGw/Yi5zdGF0aWNzLkVYUFJFU1NfSU5TVEFMTF9VUkw6dW5kZWZpbmVkLGMsYSxiLmZsYXNoQXR0cmlidXRlcyxFeHQuYmluZChiLnN3ZkNhbGxiYWNrLGIpKX0sc3dmQ2FsbGJhY2s6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZihiLnN1Y2Nlc3Mpe2Euc3dmPUV4dC5nZXQoYi5yZWYpO2Eub25TdWNjZXNzKCk7YS5maXJlRXZlbnQoInN1Y2Nlc3MiLGEpfWVsc2V7YS5vbkZhaWx1cmUoKTthLmZpcmVFdmVudCgiZmFpbHVyZSIsYSl9fSxnZXRTd2ZJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN3ZklkfHwodGhpcy5zd2ZJZD0iZXh0c3dmIit0aGlzLmdldEF1dG9JZCgpKX0sb25TdWNjZXNzOmZ1bmN0aW9uKCl7dGhpcy5zd2Yuc2V0U3R5bGUoInZpc2liaWxpdHkiLCJpbmhlcml0Iil9LG9uRmFpbHVyZTpFeHQuZW1wdHlGbixiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuc3dmO2lmKGEpe3N3Zm9iamVjdC5yZW1vdmVTV0YoYi5nZXRTd2ZJZCgpKTtFeHQuZGVzdHJveShhKTtkZWxldGUgYi5zd2Z9Yi5jYWxsUGFyZW50KCl9LHN0YXRpY3M6e0VYUFJFU1NfSU5TVEFMTF9VUkw6Imh0dHA6Ly9zd2ZvYmplY3QuZ29vZ2xlY29kZS5jb20vc3ZuL3RydW5rL3N3Zm9iamVjdC9leHByZXNzSW5zdGFsbC5zd2YifX0pO0V4dC5kZWZpbmUoIkV4dC5mb3JtLmFjdGlvbi5BY3Rpb24iLHthbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5mb3JtLkFjdGlvbiIsc3VibWl0RW1wdHlUZXh0OnRydWUsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7aWYoYSl7RXh0LmFwcGx5KHRoaXMsYSl9dmFyIGI9YS5wYXJhbXM7aWYoRXh0LmlzU3RyaW5nKGIpKXt0aGlzLnBhcmFtcz1FeHQuT2JqZWN0LmZyb21RdWVyeVN0cmluZyhiKX19LHJ1bjpFeHQuZW1wdHlGbixvbkZhaWx1cmU6ZnVuY3Rpb24oYSl7dGhpcy5yZXNwb25zZT1hO3RoaXMuZmFpbHVyZVR5cGU9RXh0LmZvcm0uYWN0aW9uLkFjdGlvbi5DT05ORUNUX0ZBSUxVUkU7dGhpcy5mb3JtLmFmdGVyQWN0aW9uKHRoaXMsZmFsc2UpfSxwcm9jZXNzUmVzcG9uc2U6ZnVuY3Rpb24oYSl7dGhpcy5yZXNwb25zZT1hO2lmKCFhLnJlc3BvbnNlVGV4dCYmIWEucmVzcG9uc2VYTUwpe3JldHVybiB0cnVlfXJldHVybih0aGlzLnJlc3VsdD10aGlzLmhhbmRsZVJlc3BvbnNlKGEpKX0sZ2V0VXJsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXJsfHx0aGlzLmZvcm0udXJsfSxnZXRNZXRob2Q6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5tZXRob2R8fHRoaXMuZm9ybS5tZXRob2R8fCJQT1NUIikudG9VcHBlckNhc2UoKX0sZ2V0UGFyYW1zOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5hcHBseSh7fSx0aGlzLnBhcmFtcyx0aGlzLmZvcm0uYmFzZVBhcmFtcyl9LGNyZWF0ZUNhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxhLGI9Yy5mb3JtO3JldHVybntzdWNjZXNzOmMub25TdWNjZXNzLGZhaWx1cmU6Yy5vbkZhaWx1cmUsc2NvcGU6Yyx0aW1lb3V0Oih0aGlzLnRpbWVvdXQqMTAwMCl8fChiLnRpbWVvdXQqMTAwMCksdXBsb2FkOmIuZmlsZVVwbG9hZD9jLm9uU3VjY2VzczphfX0sc3RhdGljczp7Q0xJRU5UX0lOVkFMSUQ6ImNsaWVudCIsU0VSVkVSX0lOVkFMSUQ6InNlcnZlciIsQ09OTkVDVF9GQUlMVVJFOiJjb25uZWN0IixMT0FEX0ZBSUxVUkU6ImxvYWQifX0pO0V4dC5kZWZpbmUoIkV4dC5mb3JtLmFjdGlvbi5Mb2FkIix7ZXh0ZW5kOiJFeHQuZm9ybS5hY3Rpb24uQWN0aW9uIixyZXF1aXJlczpbIkV4dC5kYXRhLkNvbm5lY3Rpb24iXSxhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5mb3JtLkFjdGlvbi5Mb2FkIixhbGlhczoiZm9ybWFjdGlvbi5sb2FkIix0eXBlOiJsb2FkIixydW46ZnVuY3Rpb24oKXtFeHQuQWpheC5yZXF1ZXN0KEV4dC5hcHBseSh0aGlzLmNyZWF0ZUNhbGxiYWNrKCkse21ldGhvZDp0aGlzLmdldE1ldGhvZCgpLHVybDp0aGlzLmdldFVybCgpLGhlYWRlcnM6dGhpcy5oZWFkZXJzLHBhcmFtczp0aGlzLmdldFBhcmFtcygpfSkpfSxvblN1Y2Nlc3M6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5wcm9jZXNzUmVzcG9uc2UoYiksYz10aGlzLmZvcm07aWYoYT09PXRydWV8fCFhLnN1Y2Nlc3N8fCFhLmRhdGEpe3RoaXMuZmFpbHVyZVR5cGU9RXh0LmZvcm0uYWN0aW9uLkFjdGlvbi5MT0FEX0ZBSUxVUkU7Yy5hZnRlckFjdGlvbih0aGlzLGZhbHNlKTtyZXR1cm59Yy5jbGVhckludmFsaWQoKTtjLnNldFZhbHVlcyhhLmRhdGEpO2MuYWZ0ZXJBY3Rpb24odGhpcyx0cnVlKX0saGFuZGxlUmVzcG9uc2U6ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcy5mb3JtLnJlYWRlcixiLGQ7aWYoYSl7Yj1hLnJlYWQoYyk7ZD1iLnJlY29yZHMmJmIucmVjb3Jkc1swXT9iLnJlY29yZHNbMF0uZGF0YTpudWxsO3JldHVybntzdWNjZXNzOmIuc3VjY2VzcyxkYXRhOmR9fXJldHVybiBFeHQuZGVjb2RlKGMucmVzcG9uc2VUZXh0KX19KTtFeHQuZGVmaW5lKCJFeHQuZm9ybS5hY3Rpb24uU3VibWl0Iix7ZXh0ZW5kOiJFeHQuZm9ybS5hY3Rpb24uQWN0aW9uIixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5mb3JtLkFjdGlvbi5TdWJtaXQiLGFsaWFzOiJmb3JtYWN0aW9uLnN1Ym1pdCIsdHlwZToic3VibWl0IixydW46ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmZvcm07aWYodGhpcy5jbGllbnRWYWxpZGF0aW9uPT09ZmFsc2V8fGEuaXNWYWxpZCgpKXt0aGlzLmRvU3VibWl0KCl9ZWxzZXt0aGlzLmZhaWx1cmVUeXBlPUV4dC5mb3JtLmFjdGlvbi5BY3Rpb24uQ0xJRU5UX0lOVkFMSUQ7YS5hZnRlckFjdGlvbih0aGlzLGZhbHNlKX19LGRvU3VibWl0OmZ1bmN0aW9uKCl7dmFyIGIsYT1FeHQuYXBwbHkodGhpcy5jcmVhdGVDYWxsYmFjaygpLHt1cmw6dGhpcy5nZXRVcmwoKSxtZXRob2Q6dGhpcy5nZXRNZXRob2QoKSxoZWFkZXJzOnRoaXMuaGVhZGVyc30pO2lmKHRoaXMuZm9ybS5oYXNVcGxvYWQoKSl7Yj1hLmZvcm09dGhpcy5idWlsZEZvcm0oKTthLmlzVXBsb2FkPXRydWV9ZWxzZXthLnBhcmFtcz10aGlzLmdldFBhcmFtcygpfUV4dC5BamF4LnJlcXVlc3QoYSk7aWYoYil7RXh0LnJlbW92ZU5vZGUoYil9fSxnZXRQYXJhbXM6ZnVuY3Rpb24oKXt2YXIgYz1mYWxzZSxiPXRoaXMuY2FsbFBhcmVudCgpLGE9dGhpcy5mb3JtLmdldFZhbHVlcyhjLGMsdGhpcy5zdWJtaXRFbXB0eVRleHQhPT1jKTtyZXR1cm4gRXh0LmFwcGx5KHt9LGEsYil9LGJ1aWxkRm9ybTpmdW5jdGlvbigpe3ZhciBrPVtdLGkscSxlPXRoaXMuZm9ybSxkPXRoaXMuZ2V0UGFyYW1zKCksYz1bXSxnPWUuZ2V0RmllbGRzKCkuaXRlbXMsaCxyPWcubGVuZ3RoLGosbyxtLG4sbCxwLGI7Zm9yKGg9MDtoPHI7aCsrKXtqPWdbaF07aWYoai5pc0ZpbGVVcGxvYWQoKSl7Yy5wdXNoKGopfX1mdW5jdGlvbiBhKHMsdCl7ay5wdXNoKHt0YWc6ImlucHV0Iix0eXBlOiJoaWRkZW4iLG5hbWU6cyx2YWx1ZTpFeHQuU3RyaW5nLmh0bWxFbmNvZGUodCl9KX1mb3IobyBpbiBkKXtpZihkLmhhc093blByb3BlcnR5KG8pKXttPWRbb107aWYoRXh0LmlzQXJyYXkobSkpe2w9bS5sZW5ndGg7Zm9yKG49MDtuPGw7bisrKXthKG8sbVtuXSl9fWVsc2V7YShvLG0pfX19aT17dGFnOiJmb3JtIixhY3Rpb246dGhpcy5nZXRVcmwoKSxtZXRob2Q6dGhpcy5nZXRNZXRob2QoKSx0YXJnZXQ6dGhpcy50YXJnZXR8fCJfc2VsZiIsc3R5bGU6ImRpc3BsYXk6bm9uZSIsY246a307aWYoYy5sZW5ndGgpe2kuZW5jb2Rpbmc9aS5lbmN0eXBlPSJtdWx0aXBhcnQvZm9ybS1kYXRhIn1xPUV4dC5Eb21IZWxwZXIuYXBwZW5kKEV4dC5nZXRCb2R5KCksaSk7Yj1jLmxlbmd0aDtmb3IocD0wO3A8YjtwKyspe2o9Y1twXTtpZihqLnJlbmRlcmVkKXtxLmFwcGVuZENoaWxkKGouZXh0cmFjdEZpbGVJbnB1dCgpKX19cmV0dXJuIHF9LG9uU3VjY2VzczpmdW5jdGlvbihiKXt2YXIgYz10aGlzLmZvcm0sZD10cnVlLGE9dGhpcy5wcm9jZXNzUmVzcG9uc2UoYik7aWYoYSE9PXRydWUmJiFhLnN1Y2Nlc3Mpe2lmKGEuZXJyb3JzKXtjLm1hcmtJbnZhbGlkKGEuZXJyb3JzKX10aGlzLmZhaWx1cmVUeXBlPUV4dC5mb3JtLmFjdGlvbi5BY3Rpb24uU0VSVkVSX0lOVkFMSUQ7ZD1mYWxzZX1jLmFmdGVyQWN0aW9uKHRoaXMsZCl9LGhhbmRsZVJlc3BvbnNlOmZ1bmN0aW9uKGQpe3ZhciBoPXRoaXMuZm9ybSxlPWguZXJyb3JSZWFkZXIsYyxqLGcsYSxiO2lmKGUpe2M9ZS5yZWFkKGQpO2I9Yy5yZWNvcmRzO2o9W107aWYoYil7Zm9yKGc9MCxhPWIubGVuZ3RoO2c8YTtnKyspe2pbZ109YltnXS5kYXRhfX1pZihqLmxlbmd0aDwxKXtqPW51bGx9cmV0dXJue3N1Y2Nlc3M6Yy5zdWNjZXNzLGVycm9yczpqfX1yZXR1cm4gRXh0LmRlY29kZShkLnJlc3BvbnNlVGV4dCl9fSk7RXh0LmRlZmluZSgiRXh0LnV0aWwuQ29tcG9uZW50RHJhZ2dlciIse2V4dGVuZDoiRXh0LmRkLkRyYWdUcmFja2VyIixhdXRvU3RhcnQ6NTAwLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEsYil7dGhpcy5jb21wPWE7dGhpcy5pbml0aWFsQ29uc3RyYWluVG89Yi5jb25zdHJhaW5Ubzt0aGlzLmNhbGxQYXJlbnQoW2JdKX0sb25TdGFydDpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE9Yi5jb21wO3RoaXMuc3RhcnRQb3NpdGlvbj1hLmVsLmdldFhZKCk7aWYoYS5naG9zdCYmIWEubGl2ZURyYWcpe2IucHJveHk9YS5naG9zdCgpO2IuZHJhZ1RhcmdldD1iLnByb3h5LmhlYWRlci5lbH1pZihiLmNvbnN0cmFpbnx8Yi5jb25zdHJhaW5EZWxlZ2F0ZSl7Yi5jb25zdHJhaW5Ubz1iLmNhbGN1bGF0ZUNvbnN0cmFpblJlZ2lvbigpfWlmKGEuYmVnaW5EcmFnKXthLmJlZ2luRHJhZygpfX0sY2FsY3VsYXRlQ29uc3RyYWluUmVnaW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxiPWUuY29tcCxpPWUuaW5pdGlhbENvbnN0cmFpblRvLGcsaCxhPWUucHJveHk/ZS5wcm94eS5lbDpiLmVsLGQ9KCFlLmNvbnN0cmFpbkRlbGVnYXRlJiZhLnNoYWRvdyYmIWEuc2hhZG93RGlzYWJsZWQpP2Euc2hhZG93LmdldFNoYWRvd1NpemUoKTowO2lmKCEoaSBpbnN0YW5jZW9mIEV4dC51dGlsLlJlZ2lvbikpe2k9RXh0LmZseShpKS5nZXRWaWV3UmVnaW9uKCl9aWYoZCl7aS5hZGp1c3QoZFswXSwtZFsxXSwtZFsyXSxkWzNdKX1pZighZS5jb25zdHJhaW5EZWxlZ2F0ZSl7Zz1FeHQuZmx5KGUuZHJhZ1RhcmdldCkuZ2V0UmVnaW9uKCk7aD1hLmdldFJlZ2lvbigpO2kuYWRqdXN0KGcudG9wLWgudG9wLGcucmlnaHQtaC5yaWdodCxnLmJvdHRvbS1oLmJvdHRvbSxnLmxlZnQtaC5sZWZ0KX1yZXR1cm4gaX0sb25EcmFnOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT0oYi5wcm94eSYmIWIuY29tcC5saXZlRHJhZyk/Yi5wcm94eTpiLmNvbXAsZD1iLmdldE9mZnNldChiLmNvbnN0cmFpbnx8Yi5jb25zdHJhaW5EZWxlZ2F0ZT8iZHJhZ1RhcmdldCI6bnVsbCk7YS5zZXRQYWdlUG9zaXRpb24oYi5zdGFydFBvc2l0aW9uWzBdK2RbMF0sYi5zdGFydFBvc2l0aW9uWzFdK2RbMV0pfSxvbkVuZDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmNvbXA7aWYodGhpcy5wcm94eSYmIWEubGl2ZURyYWcpe2EudW5naG9zdCgpfWlmKGEuZW5kRHJhZyl7YS5lbmREcmFnKCl9fX0pO0V4dC5kZWZpbmUoIkV4dC53aW5kb3cuV2luZG93Iix7ZXh0ZW5kOiJFeHQucGFuZWwuUGFuZWwiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LldpbmRvdyIscmVxdWlyZXM6WyJFeHQudXRpbC5Db21wb25lbnREcmFnZ2VyIiwiRXh0LnV0aWwuUmVnaW9uIiwiRXh0LkV2ZW50TWFuYWdlciJdLGFsaWFzOiJ3aWRnZXQud2luZG93IixiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ3aW5kb3ciLHJlc2l6YWJsZTp0cnVlLGRyYWdnYWJsZTp0cnVlLGNvbnN0cmFpbjpmYWxzZSxjb25zdHJhaW5IZWFkZXI6ZmFsc2UscGxhaW46ZmFsc2UsbWluaW1pemFibGU6ZmFsc2UsbWF4aW1pemFibGU6ZmFsc2UsbWluSGVpZ2h0OjUwLG1pbldpZHRoOjUwLGV4cGFuZE9uU2hvdzp0cnVlLGNvbGxhcHNpYmxlOmZhbHNlLGNsb3NhYmxlOnRydWUsaGlkZGVuOnRydWUsYXV0b1JlbmRlcjp0cnVlLGhpZGVNb2RlOiJvZmZzZXRzIixmbG9hdGluZzp0cnVlLGFyaWFSb2xlOiJhbGVydGRpYWxvZyIsaXRlbUNsczpFeHQuYmFzZUNTU1ByZWZpeCsid2luZG93LWl0ZW0iLGluaXRpYWxBbHBoYU51bTovXlthLXowLTldLyxvdmVybGFwSGVhZGVyOnRydWUsaWdub3JlSGVhZGVyQm9yZGVyTWFuYWdlbWVudDp0cnVlLGFsd2F5c0ZyYW1lZDp0cnVlLGlzV2luZG93OnRydWUsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5mcmFtZT1mYWxzZTthLmNhbGxQYXJlbnQoKTthLmFkZEV2ZW50cygicmVzaXplIiwibWF4aW1pemUiLCJtaW5pbWl6ZSIsInJlc3RvcmUiKTtpZihhLnBsYWluKXthLmFkZENsc1dpdGhVSSgicGxhaW4iKX1pZihhLm1vZGFsKXthLmFyaWFSb2xlPSJkaWFsb2cifWlmKGEuZmxvYXRpbmcpe2Eub24oe2VsZW1lbnQ6ImVsIixtb3VzZWRvd246YS5vbk1vdXNlRG93bixzY29wZTphfSl9YS5hZGRTdGF0ZUV2ZW50cyhbIm1heGltaXplIiwicmVzdG9yZSIsInJlc2l6ZSIsImRyYWdlbmQiXSl9LGdldEVsQ29uZmlnOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhO2E9Yi5jYWxsUGFyZW50KCk7YS50YWJJbmRleD0tMTtyZXR1cm4gYX0sZ2V0U3RhdGU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9Yi5jYWxsUGFyZW50KCl8fHt9LGE9ISFiLm1heGltaXplZDtjLm1heGltaXplZD1hO0V4dC5hcHBseShjLHtzaXplOmE/Yi5yZXN0b3JlU2l6ZTpiLmdldFNpemUoKSxwb3M6YT9iLnJlc3RvcmVQb3M6Yi5nZXRQb3NpdGlvbigpfSk7cmV0dXJuIGN9LGFwcGx5U3RhdGU6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZihiKXthLm1heGltaXplZD1iLm1heGltaXplZDtpZihhLm1heGltaXplZCl7YS5oYXNTYXZlZFJlc3RvcmU9dHJ1ZTthLnJlc3RvcmVTaXplPWIuc2l6ZTthLnJlc3RvcmVQb3M9Yi5wb3N9ZWxzZXtFeHQuYXBwbHkoYSx7d2lkdGg6Yi5zaXplLndpZHRoLGhlaWdodDpiLnNpemUuaGVpZ2h0LHg6Yi5wb3NbMF0seTpiLnBvc1sxXX0pfX19LG9uTW91c2VEb3duOmZ1bmN0aW9uKGIpe3ZhciBhO2lmKHRoaXMuZmxvYXRpbmcpe2lmKEV4dC5mbHkoYi5nZXRUYXJnZXQoKSkuZm9jdXNhYmxlKCkpe2E9dHJ1ZX10aGlzLnRvRnJvbnQoYSl9fSxvblJlbmRlcjpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXM7Yy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7Yy5mb2N1c0VsPWMuZWw7aWYoYy5tYXhpbWl6YWJsZSl7Yy5oZWFkZXIub24oe3Njb3BlOmMsZGJsY2xpY2s6Yy50b2dnbGVNYXhpbWl6ZX0pfX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI7YS5jYWxsUGFyZW50KCk7aWYoYS5tYXhpbWl6ZWQpe2EubWF4aW1pemVkPWZhbHNlO2EubWF4aW1pemUoKX1pZihhLmNsb3NhYmxlKXtiPWEuZ2V0S2V5TWFwKCk7Yi5vbigyNyxhLm9uRXNjLGEpfWVsc2V7Yj1hLmtleU1hcH1pZihiJiZhLmhpZGRlbil7Yi5kaXNhYmxlKCl9fSxpbml0RHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhO2lmKCFiLmhlYWRlcil7Yi51cGRhdGVIZWFkZXIodHJ1ZSl9aWYoYi5oZWFkZXIpe2E9RXh0LmFwcGx5SWYoe2VsOmIuZWwsZGVsZWdhdGU6IiMiK0V4dC5lc2NhcGVJZChiLmhlYWRlci5pZCl9LGIuZHJhZ2dhYmxlKTtpZihiLmNvbnN0cmFpbnx8Yi5jb25zdHJhaW5IZWFkZXIpe2EuY29uc3RyYWluPWIuY29uc3RyYWluO2EuY29uc3RyYWluRGVsZWdhdGU9Yi5jb25zdHJhaW5IZWFkZXI7YS5jb25zdHJhaW5Ubz1iLmNvbnN0cmFpblRvfHxiLmNvbnRhaW5lcn1iLmRkPW5ldyBFeHQudXRpbC5Db21wb25lbnREcmFnZ2VyKHRoaXMsYSk7Yi5yZWxheUV2ZW50cyhiLmRkLFsiZHJhZ3N0YXJ0IiwiZHJhZyIsImRyYWdlbmQiXSl9fSxvbkVzYzpmdW5jdGlvbihhLGIpe2lmKCFFeHQuRm9jdXNNYW5hZ2VyfHwhRXh0LkZvY3VzTWFuYWdlci5lbmFibGVkfHxFeHQuRm9jdXNNYW5hZ2VyLmZvY3VzZWRDbXA9PT10aGlzKXtiLnN0b3BFdmVudCgpO3RoaXMuY2xvc2UoKX19LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEucmVuZGVyZWQpe2RlbGV0ZSB0aGlzLmFuaW1hdGVUYXJnZXQ7YS5oaWRlKCk7RXh0LmRlc3Ryb3koYS5rZXlNYXApfWEuY2FsbFBhcmVudCgpfSxhZGRUb29sczpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KCk7aWYoYS5taW5pbWl6YWJsZSl7YS5hZGRUb29sKHt0eXBlOiJtaW5pbWl6ZSIsaGFuZGxlcjpFeHQuRnVuY3Rpb24uYmluZChhLm1pbmltaXplLGEsW10pfSl9aWYoYS5tYXhpbWl6YWJsZSl7YS5hZGRUb29sKHt0eXBlOiJtYXhpbWl6ZSIsaGFuZGxlcjpFeHQuRnVuY3Rpb24uYmluZChhLm1heGltaXplLGEsW10pfSk7YS5hZGRUb29sKHt0eXBlOiJyZXN0b3JlIixoYW5kbGVyOkV4dC5GdW5jdGlvbi5iaW5kKGEucmVzdG9yZSxhLFtdKSxoaWRkZW46dHJ1ZX0pfX0sZ2V0Rm9jdXNFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldERlZmF1bHRGb2N1cygpfSxnZXREZWZhdWx0Rm9jdXM6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGIsZD1jLmRlZmF1bHRCdXR0b258fGMuZGVmYXVsdEZvY3VzLGE7aWYoZCE9PXVuZGVmaW5lZCl7aWYoRXh0LmlzTnVtYmVyKGQpKXtiPWMucXVlcnkoImJ1dHRvbiIpW2RdfWVsc2V7aWYoRXh0LmlzU3RyaW5nKGQpKXthPWQ7aWYoYS5tYXRjaChjLmluaXRpYWxBbHBoYU51bSkpe2I9Yy5kb3duKCIjIithKX1pZighYil7Yj1jLmRvd24oYSl9fWVsc2V7aWYoZC5mb2N1cyl7Yj1kfX19fXJldHVybiBifHxjLmVsfSxvbkZvY3VzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhO2lmKChFeHQuRm9jdXNNYW5hZ2VyJiZFeHQuRm9jdXNNYW5hZ2VyLmVuYWJsZWQpfHwoKGE9Yi5nZXREZWZhdWx0Rm9jdXMoKSk9PT1iKSl7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyl9ZWxzZXthLmZvY3VzKCl9fSxiZWZvcmVMYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsLnNoYWRvdzt0aGlzLmNhbGxQYXJlbnQoKTtpZihhKXthLmhpZGUoKX19LG9uU2hvdzpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYS5leHBhbmRPblNob3cpe2EuZXhwYW5kKGZhbHNlKX1hLnN5bmNNb25pdG9yV2luZG93UmVzaXplKCk7aWYoYS5rZXlNYXApe2Eua2V5TWFwLmVuYWJsZSgpfX0sZG9DbG9zZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5oaWRkZW4pe2EuZmlyZUV2ZW50KCJjbG9zZSIsYSk7aWYoYS5jbG9zZUFjdGlvbj09ImRlc3Ryb3kiKXt0aGlzLmRlc3Ryb3koKX19ZWxzZXthLmhpZGUoYS5hbmltYXRlVGFyZ2V0LGEuZG9DbG9zZSxhKX19LGFmdGVySGlkZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5zeW5jTW9uaXRvcldpbmRvd1Jlc2l6ZSgpO2lmKGEua2V5TWFwKXthLmtleU1hcC5kaXNhYmxlKCl9YS5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LG9uV2luZG93UmVzaXplOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhO2lmKGIubWF4aW1pemVkKXtiLmZpdENvbnRhaW5lcigpfWVsc2V7YT1iLmdldFNpemVNb2RlbCgpO2lmKGEud2lkdGgubmF0dXJhbHx8YS5oZWlnaHQubmF0dXJhbCl7Yi51cGRhdGVMYXlvdXQoKX19Yi5kb0NvbnN0cmFpbigpfSxtaW5pbWl6ZTpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJtaW5pbWl6ZSIsdGhpcyk7cmV0dXJuIHRoaXN9LGFmdGVyQ29sbGFwc2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEubWF4aW1pemFibGUpe2EudG9vbHMubWF4aW1pemUuaGlkZSgpO2EudG9vbHMucmVzdG9yZS5oaWRlKCl9aWYoYS5yZXNpemVyKXthLnJlc2l6ZXIuZGlzYWJsZSgpfWEuY2FsbFBhcmVudChhcmd1bWVudHMpfSxhZnRlckV4cGFuZDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5tYXhpbWl6ZWQpe2EudG9vbHMucmVzdG9yZS5zaG93KCl9ZWxzZXtpZihhLm1heGltaXphYmxlKXthLnRvb2xzLm1heGltaXplLnNob3coKX19aWYoYS5yZXNpemVyKXthLnJlc2l6ZXIuZW5hYmxlKCl9YS5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LG1heGltaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZighYS5tYXhpbWl6ZWQpe2EuZXhwYW5kKGZhbHNlKTtpZighYS5oYXNTYXZlZFJlc3RvcmUpe2EucmVzdG9yZVNpemU9YS5nZXRTaXplKCk7YS5yZXN0b3JlUG9zPWEuZ2V0UG9zaXRpb24odHJ1ZSl9aWYoYS5tYXhpbWl6YWJsZSl7YS50b29scy5tYXhpbWl6ZS5oaWRlKCk7YS50b29scy5yZXN0b3JlLnNob3coKX1hLm1heGltaXplZD10cnVlO2EuZWwuZGlzYWJsZVNoYWRvdygpO2lmKGEuZGQpe2EuZGQuZGlzYWJsZSgpfWlmKGEucmVzaXplcil7YS5yZXNpemVyLmRpc2FibGUoKX1pZihhLmNvbGxhcHNlVG9vbCl7YS5jb2xsYXBzZVRvb2wuaGlkZSgpfWEuZWwuYWRkQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJ3aW5kb3ctbWF4aW1pemVkIik7YS5jb250YWluZXIuYWRkQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJ3aW5kb3ctbWF4aW1pemVkLWN0Iik7YS5zeW5jTW9uaXRvcldpbmRvd1Jlc2l6ZSgpO2EuZml0Q29udGFpbmVyKCk7YS5maXJlRXZlbnQoIm1heGltaXplIixhKX1yZXR1cm4gYX0scmVzdG9yZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLnRvb2xzO2lmKGEubWF4aW1pemVkKXtkZWxldGUgYS5oYXNTYXZlZFJlc3RvcmU7YS5yZW1vdmVDbHMoRXh0LmJhc2VDU1NQcmVmaXgrIndpbmRvdy1tYXhpbWl6ZWQiKTtpZihiLnJlc3RvcmUpe2IucmVzdG9yZS5oaWRlKCl9aWYoYi5tYXhpbWl6ZSl7Yi5tYXhpbWl6ZS5zaG93KCl9aWYoYS5jb2xsYXBzZVRvb2wpe2EuY29sbGFwc2VUb29sLnNob3coKX1hLm1heGltaXplZD1mYWxzZTthLnNldFBvc2l0aW9uKGEucmVzdG9yZVBvcyk7YS5zZXRTaXplKGEucmVzdG9yZVNpemUpO2RlbGV0ZSBhLnJlc3RvcmVQb3M7ZGVsZXRlIGEucmVzdG9yZVNpemU7YS5lbC5lbmFibGVTaGFkb3codHJ1ZSk7aWYoYS5kZCl7YS5kZC5lbmFibGUoKX1pZihhLnJlc2l6ZXIpe2EucmVzaXplci5lbmFibGUoKX1hLmNvbnRhaW5lci5yZW1vdmVDbHMoRXh0LmJhc2VDU1NQcmVmaXgrIndpbmRvdy1tYXhpbWl6ZWQtY3QiKTthLnN5bmNNb25pdG9yV2luZG93UmVzaXplKCk7YS5kb0NvbnN0cmFpbigpO2EuZmlyZUV2ZW50KCJyZXN0b3JlIixhKX1yZXR1cm4gYX0sc3luY01vbml0b3JXaW5kb3dSZXNpemU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9Yi5fbW9uaXRvcmluZ1Jlc2l6ZSxkPWIubW9uaXRvclJlc2l6ZXx8Yi5jb25zdHJhaW58fGIuY29uc3RyYWluSGVhZGVyfHxiLm1heGltaXplZCxhPWIuaGlkZGVufHxiLmRlc3Ryb3lpbmd8fGIuaXNEZXN0cm95ZWQ7aWYoZCYmIWEpe2lmKCFjKXtFeHQuRXZlbnRNYW5hZ2VyLm9uV2luZG93UmVzaXplKGIub25XaW5kb3dSZXNpemUsYik7Yi5fbW9uaXRvcmluZ1Jlc2l6ZT10cnVlfX1lbHNle2lmKGMpe0V4dC5FdmVudE1hbmFnZXIucmVtb3ZlUmVzaXplTGlzdGVuZXIoYi5vbldpbmRvd1Jlc2l6ZSxiKTtiLl9tb25pdG9yaW5nUmVzaXplPWZhbHNlfX19LHRvZ2dsZU1heGltaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbdGhpcy5tYXhpbWl6ZWQ/InJlc3RvcmUiOiJtYXhpbWl6ZSJdKCl9fSk7RXh0LmRlZmluZSgiRXh0LmxheW91dC5jb21wb25lbnQuZmllbGQuRmllbGQiLHtleHRlbmQ6IkV4dC5sYXlvdXQuY29tcG9uZW50LkF1dG8iLGFsaWFzOiJsYXlvdXQuZmllbGQiLHVzZXM6WyJFeHQudGlwLlF1aWNrVGlwIiwiRXh0LnV0aWwuVGV4dE1ldHJpY3MiLCJFeHQudXRpbC5DU1MiXSx0eXBlOiJmaWVsZCIsbmF0dXJhbFNpemluZ1Byb3A6InNpemUiLGJlZ2luTGF5b3V0OmZ1bmN0aW9uKGcpe3ZhciBlPXRoaXMsYT1lLm93bmVyLGM9Zy53aWR0aE1vZGVsLGI9YVtlLm5hdHVyYWxTaXppbmdQcm9wXSxkO2UuY2FsbFBhcmVudChhcmd1bWVudHMpO2cubGFiZWxTdHJhdGVneT1lLmdldExhYmVsU3RyYXRlZ3koKTtnLmVycm9yU3RyYXRlZ3k9ZS5nZXRFcnJvclN0cmF0ZWd5KCk7Zy5sYWJlbENvbnRleHQ9Zy5nZXRFbCgibGFiZWxFbCIpO2cuYm9keUNlbGxDb250ZXh0PWcuZ2V0RWwoImJvZHlFbCIpO2cuaW5wdXRDb250ZXh0PWcuZ2V0RWwoImlucHV0RWwiKTtnLmVycm9yQ29udGV4dD1nLmdldEVsKCJlcnJvckVsIik7aWYoKEV4dC5pc0lFNnx8RXh0LmlzSUU3KSYmRXh0LmlzU3RyaWN0JiZnLmlucHV0Q29udGV4dCl7ZS5pZUlucHV0V2lkdGhBZGp1c3RtZW50PWcuaW5wdXRDb250ZXh0LmdldFBhZGRpbmdJbmZvKCkud2lkdGgrZy5pbnB1dENvbnRleHQuZ2V0Qm9yZGVySW5mbygpLndpZHRofWcubGFiZWxTdHJhdGVneS5wcmVwYXJlKGcsYSk7Zy5lcnJvclN0cmF0ZWd5LnByZXBhcmUoZyxhKTtpZihjLnNocmlua1dyYXApe2UuYmVnaW5MYXlvdXRTaHJpbmtXcmFwKGcpfWVsc2V7aWYoYy5uYXR1cmFsKXtpZih0eXBlb2YgYj09Im51bWJlciImJiFhLmlucHV0V2lkdGgpe2UuYmVnaW5MYXlvdXRGaXhlZChnLChkPWIqNi41KzIwKSwicHgiKX1lbHNle2UuYmVnaW5MYXlvdXRTaHJpbmtXcmFwKGcpfWcuc2V0V2lkdGgoZCxmYWxzZSl9ZWxzZXtlLmJlZ2luTGF5b3V0Rml4ZWQoZywiMTAwIiwiJSIpfX19LGJlZ2luTGF5b3V0Rml4ZWQ6ZnVuY3Rpb24oYyxiLGUpe3ZhciBhPWMudGFyZ2V0LGQ9YS5pbnB1dEVsLGc9YS5pbnB1dFdpZHRoO2EuZWwuc2V0U3R5bGUoInRhYmxlLWxheW91dCIsImZpeGVkIik7YS5ib2R5RWwuc2V0U3R5bGUoIndpZHRoIixiK2UpO2lmKGQmJmcpe2Quc2V0U3R5bGUoIndpZHRoIixnKyJweCIpfWMuaXNGaXhlZD10cnVlfSxiZWdpbkxheW91dFNocmlua1dyYXA6ZnVuY3Rpb24oYil7dmFyIGE9Yi50YXJnZXQsYz1hLmlucHV0RWwsZD1hLmlucHV0V2lkdGg7aWYoYyYmYy5kb20pe2MuZG9tLnJlbW92ZUF0dHJpYnV0ZSgic2l6ZSIpO2lmKGQpe2Muc2V0U3R5bGUoIndpZHRoIixkKyJweCIpfX1hLmVsLnNldFN0eWxlKCJ0YWJsZS1sYXlvdXQiLCJhdXRvIik7YS5ib2R5RWwuc2V0U3R5bGUoIndpZHRoIiwiIil9LGZpbmlzaGVkTGF5b3V0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMub3duZXI7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7Yi5sYWJlbFN0cmF0ZWd5LmZpbmlzaGVkTGF5b3V0KGIsYSk7Yi5lcnJvclN0cmF0ZWd5LmZpbmlzaGVkTGF5b3V0KGIsYSl9LGNhbGN1bGF0ZU93bmVySGVpZ2h0RnJvbUNvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYX0sbWVhc3VyZUNvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZWwuZ2V0SGVpZ2h0KCl9LG1lYXN1cmVDb250ZW50V2lkdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZWwuZ2V0V2lkdGgoKX0sbWVhc3VyZUxhYmVsRXJyb3JIZWlnaHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEubGFiZWxTdHJhdGVneS5nZXRIZWlnaHQoYSkrYS5lcnJvclN0cmF0ZWd5LmdldEhlaWdodChhKX0sb25Gb2N1czpmdW5jdGlvbigpe3RoaXMuZ2V0RXJyb3JTdHJhdGVneSgpLm9uRm9jdXModGhpcy5vd25lcil9LGdldExhYmVsU3RyYXRlZ3k6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9Yi5sYWJlbFN0cmF0ZWdpZXMsYT1iLm93bmVyLmxhYmVsQWxpZ247cmV0dXJuIGNbYV18fGMuYmFzZX0sZ2V0RXJyb3JTdHJhdGVneTpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYT1jLm93bmVyLGQ9Yy5lcnJvclN0cmF0ZWdpZXMsYj1hLm1zZ1RhcmdldDtyZXR1cm4gIWEucHJldmVudE1hcmsmJkV4dC5pc1N0cmluZyhiKT8oZFtiXXx8ZC5lbGVtZW50SWQpOmQubm9uZX0sbGFiZWxTdHJhdGVnaWVzOihmdW5jdGlvbigpe3ZhciBhPXtwcmVwYXJlOmZ1bmN0aW9uKGUsYil7dmFyIGM9Yi5sYWJlbENscysiLSIrYi5sYWJlbEFsaWduLGQ9Yi5sYWJlbEVsO2lmKGQpe2QuYWRkQ2xzKGMpfX0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIDB9LGZpbmlzaGVkTGF5b3V0OkV4dC5lbXB0eUZufTtyZXR1cm57YmFzZTphLHRvcDpFeHQuYXBwbHlJZih7Z2V0SGVpZ2h0OmZ1bmN0aW9uKGUpe3ZhciBjPWUubGFiZWxDb250ZXh0LGQ9Yy5wcm9wcyxiPWQuaGVpZ2h0O2lmKGI9PT11bmRlZmluZWQpe2QuaGVpZ2h0PWI9Yy5lbC5nZXRIZWlnaHQoKX1yZXR1cm4gYn19LGEpLGxlZnQ6YSxyaWdodDphfX0oKSksZXJyb3JTdHJhdGVnaWVzOihmdW5jdGlvbigpe2Z1bmN0aW9uIGQoaCl7dmFyIGk9RXh0LmxheW91dC5jb21wb25lbnQuZmllbGQuRmllbGQudGlwLGo7aWYoaSYmaS5pc1Zpc2libGUoKSl7aj1pLmFjdGl2ZVRhcmdldDtpZihqJiZqLmVsPT09aC5nZXRBY3Rpb25FbCgpLmRvbSl7aS50b0Zyb250KHRydWUpfX19dmFyIGM9RXh0LmFwcGx5SWYsYj1FeHQuZW1wdHlGbixhPUV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLWludmFsaWQtaWNvbiIsZyxlPXtwcmVwYXJlOmZ1bmN0aW9uKGosaCl7dmFyIGk9aC5lcnJvckVsO2lmKGkpe2kuc2V0RGlzcGxheWVkKGZhbHNlKX19LGdldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiAwfSxvbkZvY3VzOmIsZmluaXNoZWRMYXlvdXQ6Yn07cmV0dXJue25vbmU6ZSxzaWRlOmMoe3ByZXBhcmU6ZnVuY3Rpb24oayxpKXt2YXIgbT1pLmVycm9yRWwsaj1pLnNpZGVFcnJvckNlbGwsaD1pLmhhc0FjdGl2ZUVycm9yKCksbDtpZighZyl7Zz0obD1FeHQuZ2V0Qm9keSgpLmNyZWF0ZUNoaWxkKHtzdHlsZToicG9zaXRpb246YWJzb2x1dGUiLGNsczphfSkpLmdldFdpZHRoKCk7bC5yZW1vdmUoKX1tLmFkZENscyhhKTttLnNldCh7ImRhdGEtZXJyb3JxdGlwIjppLmdldEFjdGl2ZUVycm9yKCl8fCIifSk7aWYoaS5hdXRvRml0RXJyb3JzKXttLnNldERpc3BsYXllZChoKX1lbHNle20uc2V0VmlzaWJsZShoKX1pZihqJiZpLmF1dG9GaXRFcnJvcnMpe2ouc2V0RGlzcGxheWVkKGgpfWkuYm9keUVsLmRvbS5jb2xTcGFuPWkuZ2V0Qm9keUNvbHNwYW4oKTtFeHQubGF5b3V0LmNvbXBvbmVudC5maWVsZC5GaWVsZC5pbml0VGlwKCl9LG9uRm9jdXM6ZH0sZSksdW5kZXI6Yyh7cHJlcGFyZTpmdW5jdGlvbihqLGgpe3ZhciBrPWguZXJyb3JFbCxpPUV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLWludmFsaWQtdW5kZXIiO2suYWRkQ2xzKGkpO2suc2V0RGlzcGxheWVkKGguaGFzQWN0aXZlRXJyb3IoKSl9LGdldEhlaWdodDpmdW5jdGlvbihrKXt2YXIgaD0wLGksajtpZihrLnRhcmdldC5oYXNBY3RpdmVFcnJvcigpKXtpPWsuZXJyb3JDb250ZXh0O2o9aS5wcm9wcztoPWouaGVpZ2h0O2lmKGg9PT11bmRlZmluZWQpe2ouaGVpZ2h0PWg9aS5lbC5nZXRIZWlnaHQoKX19cmV0dXJuIGh9fSxlKSxxdGlwOmMoe3ByZXBhcmU6ZnVuY3Rpb24oaSxoKXtFeHQubGF5b3V0LmNvbXBvbmVudC5maWVsZC5GaWVsZC5pbml0VGlwKCk7aC5nZXRBY3Rpb25FbCgpLnNldCh7ImRhdGEtZXJyb3JxdGlwIjpoLmdldEFjdGl2ZUVycm9yKCl8fCIifSl9LG9uRm9jdXM6ZH0sZSksdGl0bGU6Yyh7cHJlcGFyZTpmdW5jdGlvbihpLGgpe2guZWwuc2V0KHt0aXRsZTpoLmdldEFjdGl2ZUVycm9yKCl8fCIifSl9fSxlKSxlbGVtZW50SWQ6Yyh7cHJlcGFyZTpmdW5jdGlvbihpLGgpe3ZhciBqPUV4dC5mbHkoaC5tc2dUYXJnZXQpO2lmKGope2ouZG9tLmlubmVySFRNTD1oLmdldEFjdGl2ZUVycm9yKCl8fCIiO2ouc2V0RGlzcGxheWVkKGguaGFzQWN0aXZlRXJyb3IoKSl9fX0sZSl9fSgpKSxzdGF0aWNzOntpbml0VGlwOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50aXA7aWYoIWEpe2E9dGhpcy50aXA9RXh0LmNyZWF0ZSgiRXh0LnRpcC5RdWlja1RpcCIse2Jhc2VDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0taW52YWxpZC10aXAifSk7YS50YWdDb25maWc9RXh0LmFwcGx5KHt9LHthdHRyaWJ1dGU6ImVycm9ycXRpcCJ9LGEudGFnQ29uZmlnKX19LGRlc3Ryb3lUaXA6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRpcDtpZihhKXthLmRlc3Ryb3koKTtkZWxldGUgdGhpcy50aXB9fX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbXBvbmVudC5maWVsZC5UZXh0Iix7ZXh0ZW5kOiJFeHQubGF5b3V0LmNvbXBvbmVudC5maWVsZC5GaWVsZCIsYWxpYXM6ImxheW91dC50ZXh0ZmllbGQiLHJlcXVpcmVzOlsiRXh0LnV0aWwuVGV4dE1ldHJpY3MiXSx0eXBlOiJ0ZXh0ZmllbGQiLGNhbkdyb3dXaWR0aDp0cnVlLGJlZ2luTGF5b3V0Q3ljbGU6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihiLnNocmlua1dyYXApe2IuaW5wdXRDb250ZXh0LmVsLnNldFN0eWxlKCJoZWlnaHQiLCIiKX19LG1lYXN1cmVDb250ZW50V2lkdGg6ZnVuY3Rpb24oYyl7dmFyIGg9dGhpcyxiPWgub3duZXIsYT1oLmNhbGxQYXJlbnQoYXJndW1lbnRzKSxnPWMuaW5wdXRDb250ZXh0LGssaixkLGksZTtpZihiLmdyb3cmJmguY2FuR3Jvd1dpZHRoJiYhYy5zdGF0ZS5ncm93SGFuZGxlZCl7az1iLmlucHV0RWw7aj1FeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZShrLmRvbS52YWx1ZXx8KGIuaGFzRm9jdXM/IiI6Yi5lbXB0eVRleHQpfHwiIik7ais9Yi5ncm93QXBwZW5kO2Q9ay5nZXRUZXh0V2lkdGgoaikrZy5nZXRGcmFtZUluZm8oKS53aWR0aDtpPWIuZ3Jvd01heDtlPU1hdGgubWluKGksYSk7aT1NYXRoLm1heChiLmdyb3dNaW4saSxlKTtkPUV4dC5OdW1iZXIuY29uc3RyYWluKGQsYi5ncm93TWluLGkpO2cuc2V0V2lkdGgoZCk7Yy5zdGF0ZS5ncm93SGFuZGxlZD10cnVlO2cuZG9tQmxvY2soaCwid2lkdGgiKTthPU5hTn1yZXR1cm4gYX0scHVibGlzaElubmVySGVpZ2h0OmZ1bmN0aW9uKGIsYSl7Yi5pbnB1dENvbnRleHQuc2V0SGVpZ2h0KGEtdGhpcy5tZWFzdXJlTGFiZWxFcnJvckhlaWdodChiKSl9LGJlZ2luTGF5b3V0Rml4ZWQ6ZnVuY3Rpb24oZCxhLGUpe3ZhciBiPXRoaXMsYz1iLmllSW5wdXRXaWR0aEFkanVzdG1lbnQ7aWYoYyl7Yi5vd25lci5ib2R5RWwuc2V0U3R5bGUoInBhZGRpbmctcmlnaHQiLGMrInB4Iik7aWYoZT09PSJweCIpe2EtPWN9fWIuY2FsbFBhcmVudChhcmd1bWVudHMpfX0pO0V4dC5kZWZpbmUoIkV4dC5mb3JtLkxhYmVsYWJsZSIse3JlcXVpcmVzOlsiRXh0LlhUZW1wbGF0ZSJdLGF1dG9FbDp7dGFnOiJ0YWJsZSIsY2VsbHBhZGRpbmc6MH0sY2hpbGRFbHM6WyJsYWJlbENlbGwiLCJsYWJlbEVsIiwiYm9keUVsIiwic2lkZUVycm9yQ2VsbCIsImVycm9yRWwiLCJpbnB1dFJvdyIsImJvdHRvbVBsYWNlSG9sZGVyIl0sbGFiZWxhYmxlUmVuZGVyVHBsOlsnPHRyIGlkPSJ7aWR9LWlucHV0Um93IiA8dHBsIGlmPSJpbkZvcm1MYXlvdXQiPmlkPSJ7aWR9IjwvdHBsPj4nLCc8dHBsIGlmPSJsYWJlbE9uTGVmdCI+JywnPHRkIGlkPSJ7aWR9LWxhYmVsQ2VsbCIgc3R5bGU9IntsYWJlbENlbGxTdHlsZX0iIHtsYWJlbENlbGxBdHRyc30+Jywie2JlZm9yZUxhYmVsVHBsfSIsJzxsYWJlbCBpZD0ie2lkfS1sYWJlbEVsIiB7bGFiZWxBdHRyVHBsfTx0cGwgaWY9ImlucHV0SWQiPiBmb3I9IntpbnB1dElkfSI8L3RwbD4gY2xhc3M9IntsYWJlbENsc30iJywnPHRwbCBpZj0ibGFiZWxTdHlsZSI+IHN0eWxlPSJ7bGFiZWxTdHlsZX0iPC90cGw+PicsIntiZWZvcmVMYWJlbFRleHRUcGx9IiwnPHRwbCBpZj0iZmllbGRMYWJlbCI+e2ZpZWxkTGFiZWx9e2xhYmVsU2VwYXJhdG9yfTwvdHBsPicsInthZnRlckxhYmVsVGV4dFRwbH0iLCI8L2xhYmVsPiIsInthZnRlckxhYmVsVHBsfSIsIjwvdGQ+IiwiPC90cGw+IiwnPHRkIGNsYXNzPSJ7YmFzZUJvZHlDbHN9IHtmaWVsZEJvZHlDbHN9IiBpZD0ie2lkfS1ib2R5RWwiIGNvbHNwYW49Intib2R5Q29sc3Bhbn0iIHJvbGU9InByZXNlbnRhdGlvbiI+Jywie2JlZm9yZUJvZHlFbH0iLCI8dHBsIGlmPVwibGFiZWxBbGlnbj09J3RvcCdcIj4iLCJ7YmVmb3JlTGFiZWxUcGx9IiwnPGRpdiBpZD0ie2lkfS1sYWJlbENlbGwiIHN0eWxlPSJ7bGFiZWxDZWxsU3R5bGV9Ij4nLCc8bGFiZWwgaWQ9IntpZH0tbGFiZWxFbCIge2xhYmVsQXR0clRwbH08dHBsIGlmPSJpbnB1dElkIj4gZm9yPSJ7aW5wdXRJZH0iPC90cGw+IGNsYXNzPSJ7bGFiZWxDbHN9IicsJzx0cGwgaWY9ImxhYmVsU3R5bGUiPiBzdHlsZT0ie2xhYmVsU3R5bGV9IjwvdHBsPj4nLCJ7YmVmb3JlTGFiZWxUZXh0VHBsfSIsJzx0cGwgaWY9ImZpZWxkTGFiZWwiPntmaWVsZExhYmVsfXtsYWJlbFNlcGFyYXRvcn08L3RwbD4nLCJ7YWZ0ZXJMYWJlbFRleHRUcGx9IiwiPC9sYWJlbD4iLCI8L2Rpdj4iLCJ7YWZ0ZXJMYWJlbFRwbH0iLCI8L3RwbD4iLCJ7YmVmb3JlU3ViVHBsfSIsIntbdmFsdWVzLiRjb21wLmdldFN1YlRwbE1hcmt1cCgpXX0iLCJ7YWZ0ZXJTdWJUcGx9IiwiPHRwbCBpZj1cIm1zZ1RhcmdldD09PSdzaWRlJ1wiPiIsInthZnRlckJvZHlFbH0iLCI8L3RkPiIsIjx0ZCBpZD1cIntpZH0tc2lkZUVycm9yQ2VsbFwiIHZBbGlnbj1cIntbdmFsdWVzLmxhYmVsQWxpZ249PT0ndG9wJyAmJiAhdmFsdWVzLmhpZGVMYWJlbCA/ICdib3R0b20nIDogJ21pZGRsZSddfVwiIHN0eWxlPVwie1t2YWx1ZXMuYXV0b0ZpdEVycm9ycyA/ICdkaXNwbGF5Om5vbmUnIDogJyddfVwiIHdpZHRoPVwie2Vycm9ySWNvbldpZHRofVwiPiIsJzxkaXYgaWQ9IntpZH0tZXJyb3JFbCIgY2xhc3M9IntlcnJvck1zZ0Nsc30iIHN0eWxlPSJkaXNwbGF5Om5vbmU7d2lkdGg6e2Vycm9ySWNvbldpZHRofXB4Ij48L2Rpdj4nLCI8L3RkPiIsIjx0cGwgZWxzZWlmPVwibXNnVGFyZ2V0PT0ndW5kZXInXCI+IiwnPGRpdiBpZD0ie2lkfS1lcnJvckVsIiBjbGFzcz0ie2Vycm9yTXNnQ2xhc3N9IiBjb2xzcGFuPSIyIiBzdHlsZT0iZGlzcGxheTpub25lIj48L2Rpdj4nLCJ7YWZ0ZXJCb2R5RWx9IiwiPC90ZD4iLCI8L3RwbD4iLCI8L3RyPiIse2Rpc2FibGVGb3JtYXRzOnRydWV9XSxhY3RpdmVFcnJvcnNUcGw6Wyc8dHBsIGlmPSJlcnJvcnMgJiYgZXJyb3JzLmxlbmd0aCI+JywnPHVsPjx0cGwgZm9yPSJlcnJvcnMiPjxsaT57Ln08L2xpPjwvdHBsPjwvdWw+JywiPC90cGw+Il0saXNGaWVsZExhYmVsYWJsZTp0cnVlLGZvcm1JdGVtQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLWl0ZW0iLGxhYmVsQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLWl0ZW0tbGFiZWwiLGVycm9yTXNnQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLWVycm9yLW1zZyIsYmFzZUJvZHlDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0taXRlbS1ib2R5IixmaWVsZEJvZHlDbHM6IiIsY2xlYXJDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImNsZWFyIixpbnZhbGlkQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLWludmFsaWQiLGZpZWxkTGFiZWw6dW5kZWZpbmVkLGxhYmVsQWxpZ246ImxlZnQiLGxhYmVsV2lkdGg6MTAwLGxhYmVsUGFkOjUsbGFiZWxTZXBhcmF0b3I6IjoiLGhpZGVMYWJlbDpmYWxzZSxoaWRlRW1wdHlMYWJlbDp0cnVlLHByZXZlbnRNYXJrOmZhbHNlLGF1dG9GaXRFcnJvcnM6dHJ1ZSxtc2dUYXJnZXQ6InF0aXAiLG5vV3JhcDp0cnVlLGxhYmVsYWJsZUluc2VydGlvbnM6WyJiZWZvcmVCb2R5RWwiLCJhZnRlckJvZHlFbCIsImJlZm9yZUxhYmVsVHBsIiwiYWZ0ZXJMYWJlbFRwbCIsImJlZm9yZVN1YlRwbCIsImFmdGVyU3ViVHBsIiwiYmVmb3JlTGFiZWxUZXh0VHBsIiwiYWZ0ZXJMYWJlbFRleHRUcGwiLCJsYWJlbEF0dHJUcGwiXSxsYWJlbGFibGVSZW5kZXJQcm9wczpbImFsbG93QmxhbmsiLCJpZCIsImxhYmVsQWxpZ24iLCJmaWVsZEJvZHlDbHMiLCJiYXNlQm9keUNscyIsImNsZWFyQ2xzIiwibGFiZWxTZXBhcmF0b3IiLCJtc2dUYXJnZXQiXSxpbml0TGFiZWxhYmxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEucGFkZGluZztpZihiKXthLnBhZGRpbmc9dW5kZWZpbmVkO2EuZXh0cmFNYXJnaW5zPUV4dC5FbGVtZW50LnBhcnNlQm94KGIpfWEuYWRkQ2xzKGEuZm9ybUl0ZW1DbHMpO2EubGFzdEFjdGl2ZUVycm9yPSIiO2EuYWRkRXZlbnRzKCJlcnJvcmNoYW5nZSIpfSx0cmltTGFiZWxTZXBhcmF0b3I6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGQ9Yy5sYWJlbFNlcGFyYXRvcixhPWMuZmllbGRMYWJlbHx8IiIsYj1hLnN1YnN0cihhLmxlbmd0aC0xKTtyZXR1cm4gYj09PWQ/YS5zbGljZSgwLC0xKTphfSxnZXRGaWVsZExhYmVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJpbUxhYmVsU2VwYXJhdG9yKCl9LHNldEZpZWxkTGFiZWw6ZnVuY3Rpb24oYil7Yj1ifHwiIjt2YXIgYz10aGlzLGQ9Yy5sYWJlbFNlcGFyYXRvcixhPWMubGFiZWxFbDtjLmZpZWxkTGFiZWw9YjtpZihjLnJlbmRlcmVkKXtpZihFeHQuaXNFbXB0eShiKSYmYy5oaWRlRW1wdHlMYWJlbCl7YS5wYXJlbnQoKS5zZXREaXNwbGF5ZWQoIm5vbmUiKX1lbHNle2lmKGQpe2I9Yy50cmltTGFiZWxTZXBhcmF0b3IoKStkfWEudXBkYXRlKGIpO2EucGFyZW50KCkuc2V0RGlzcGxheWVkKCIiKX1jLnVwZGF0ZUxheW91dCgpfX0sZ2V0SW5zZXJ0aW9uUmVuZGVyRGF0YTpmdW5jdGlvbihkLGUpe3ZhciBiPWUubGVuZ3RoLGEsYzt3aGlsZShiLS0pe2E9ZVtiXTtjPXRoaXNbYV07aWYoYyl7aWYodHlwZW9mIGMhPSJzdHJpbmciKXtpZighYy5pc1RlbXBsYXRlKXtjPUV4dC5YVGVtcGxhdGUuZ2V0VHBsKHRoaXMsYSl9Yz1jLmFwcGx5KGQpfX1kW2FdPWN8fCIifXJldHVybiBkfSxnZXRMYWJlbGFibGVSZW5kZXJEYXRhOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjLGQsYT1iLmxhYmVsQWxpZ249PT0idG9wIjtpZighRXh0LmZvcm0uTGFiZWxhYmxlLmVycm9ySWNvbldpZHRoKXtFeHQuZm9ybS5MYWJlbGFibGUuZXJyb3JJY29uV2lkdGg9KGQ9RXh0LnJlc2V0RWxlbWVudC5jcmVhdGVDaGlsZCh7c3R5bGU6InBvc2l0aW9uOmFic29sdXRlIixjbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0taW52YWxpZC1pY29uIn0pKS5nZXRXaWR0aCgpO2QucmVtb3ZlKCl9Yz1FeHQuY29weVRvKHtpbkZvcm1MYXlvdXQ6Yi5vd25lckxheW91dCYmYi5vd25lckxheW91dC50eXBlPT09ImZvcm0iLGlucHV0SWQ6Yi5nZXRJbnB1dElkKCksbGFiZWxPbkxlZnQ6IWEsaGlkZUxhYmVsOiFiLmhhc1Zpc2libGVMYWJlbCgpLGZpZWxkTGFiZWw6Yi5nZXRGaWVsZExhYmVsKCksbGFiZWxDZWxsU3R5bGU6Yi5nZXRMYWJlbENlbGxTdHlsZSgpLGxhYmVsQ2VsbEF0dHJzOmIuZ2V0TGFiZWxDZWxsQXR0cnMoKSxsYWJlbENsczpiLmdldExhYmVsQ2xzKCksbGFiZWxTdHlsZTpiLmdldExhYmVsU3R5bGUoKSxib2R5Q29sc3BhbjpiLmdldEJvZHlDb2xzcGFuKCksZXh0ZXJuYWxFcnJvcjohYi5hdXRvRml0RXJyb3JzLGVycm9yTXNnQ2xzOmIuZ2V0RXJyb3JNc2dDbHMoKSxlcnJvckljb25XaWR0aDpFeHQuZm9ybS5MYWJlbGFibGUuZXJyb3JJY29uV2lkdGh9LGIsYi5sYWJlbGFibGVSZW5kZXJQcm9wcyx0cnVlKTtiLmdldEluc2VydGlvblJlbmRlckRhdGEoYyxiLmxhYmVsYWJsZUluc2VydGlvbnMpO3JldHVybiBjfSxiZWZvcmVMYWJlbGFibGVSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEub3duZXJMYXlvdXQpe2EuYWRkQ2xzKEV4dC5iYXNlQ1NTUHJlZml4K2Eub3duZXJMYXlvdXQudHlwZSsiLWZvcm0taXRlbSIpfX0sb25MYWJlbGFibGVSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGQsYSxiPXt9O2lmKGMuZXh0cmFNYXJnaW5zKXtkPWMuZWwuZ2V0TWFyZ2luKCk7Zm9yKGEgaW4gZCl7aWYoZC5oYXNPd25Qcm9wZXJ0eShhKSl7YlsibWFyZ2luLSIrYV09KGRbYV0rYy5leHRyYU1hcmdpbnNbYV0pKyJweCJ9fWMuZWwuc2V0U3R5bGUoYil9fSxoYXNWaXNpYmxlTGFiZWw6ZnVuY3Rpb24oKXtpZih0aGlzLmhpZGVMYWJlbCl7cmV0dXJuIGZhbHNlfXJldHVybiAhKHRoaXMuaGlkZUVtcHR5TGFiZWwmJiF0aGlzLmdldEZpZWxkTGFiZWwoKSl9LGdldEJvZHlDb2xzcGFuOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhO2lmKGIubXNnVGFyZ2V0PT09InNpZGUiJiYoIWIuYXV0b0ZpdEVycm9yc3x8Yi5oYXNBY3RpdmVFcnJvcigpKSl7YT0xfWVsc2V7YT0yfWlmKGIubGFiZWxBbGlnbiE9PSJ0b3AiJiYhYi5oYXNWaXNpYmxlTGFiZWwoKSl7YSsrfXJldHVybiBhfSxnZXRMYWJlbENsczpmdW5jdGlvbigpe3ZhciBiPXRoaXMubGFiZWxDbHMsYT10aGlzLmxhYmVsQ2xzRXh0cmE7aWYodGhpcy5sYWJlbEFsaWduPT09InRvcCIpe2IrPSItdG9wIn1yZXR1cm4gYT9iKyIgIithOmJ9LGdldExhYmVsQ2VsbFN0eWxlOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuaGlkZUxhYmVsfHwoIWIuZmllbGRMYWJlbCYmYi5oaWRlRW1wdHlMYWJlbCk7cmV0dXJuIGE/ImRpc3BsYXk6bm9uZTsiOiIifSxnZXRFcnJvck1zZ0NsczpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT0oYi5oaWRlTGFiZWx8fCghYi5maWVsZExhYmVsJiZiLmhpZGVFbXB0eUxhYmVsKSk7cmV0dXJuIGIuZXJyb3JNc2dDbHMrKCFhJiZiLmxhYmVsQWxpZ249PT0idG9wIj8iICIrRXh0LmJhc2VDU1NQcmVmaXgrImxibC10b3AtZXJyLWljb24iOiIiKX0sZ2V0TGFiZWxDZWxsQXR0cnM6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9Yy5sYWJlbEFsaWduLGE9IiI7aWYoYiE9PSJ0b3AiKXthPSd2YWxpZ249InRvcCIgaGFsaWduPSInK2IrJyIgd2lkdGg9IicrKGMubGFiZWxXaWR0aCtjLmxhYmVsUGFkKSsnIid9cmV0dXJuIGErJyBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsnZmllbGQtbGFiZWwtY2VsbCInfSxnZXRMYWJlbFN0eWxlOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxiPWMubGFiZWxQYWQsYT0iIjtpZihjLmxhYmVsQWxpZ24hPT0idG9wIil7aWYoYy5sYWJlbFdpZHRoKXthPSJ3aWR0aDoiK2MubGFiZWxXaWR0aCsicHg7In1hKz0ibWFyZ2luLXJpZ2h0OiIrYisicHg7In1yZXR1cm4gYSsoYy5sYWJlbFN0eWxlfHwiIil9LGdldFN1YlRwbE1hcmt1cDpmdW5jdGlvbigpe3JldHVybiIifSxnZXRJbnB1dElkOmZ1bmN0aW9uKCl7cmV0dXJuIiJ9LGdldEFjdGl2ZUVycm9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlRXJyb3J8fCIifSxoYXNBY3RpdmVFcnJvcjpmdW5jdGlvbigpe3JldHVybiAhIXRoaXMuZ2V0QWN0aXZlRXJyb3IoKX0sc2V0QWN0aXZlRXJyb3I6ZnVuY3Rpb24oYSl7dGhpcy5zZXRBY3RpdmVFcnJvcnMoYSl9LGdldEFjdGl2ZUVycm9yczpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFjdGl2ZUVycm9yc3x8W119LHNldEFjdGl2ZUVycm9yczpmdW5jdGlvbihhKXthPUV4dC5BcnJheS5mcm9tKGEpO3RoaXMuYWN0aXZlRXJyb3I9YVswXTt0aGlzLmFjdGl2ZUVycm9ycz1hO3RoaXMuYWN0aXZlRXJyb3I9dGhpcy5nZXRUcGwoImFjdGl2ZUVycm9yc1RwbCIpLmFwcGx5KHtlcnJvcnM6YX0pO3RoaXMucmVuZGVyQWN0aXZlRXJyb3IoKX0sdW5zZXRBY3RpdmVFcnJvcjpmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmFjdGl2ZUVycm9yO2RlbGV0ZSB0aGlzLmFjdGl2ZUVycm9yczt0aGlzLnJlbmRlckFjdGl2ZUVycm9yKCl9LHJlbmRlckFjdGl2ZUVycm9yOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxiPWMuZ2V0QWN0aXZlRXJyb3IoKSxhPSEhYjtpZihiIT09Yy5sYXN0QWN0aXZlRXJyb3Ipe2MuZmlyZUV2ZW50KCJlcnJvcmNoYW5nZSIsYyxiKTtjLmxhc3RBY3RpdmVFcnJvcj1ifWlmKGMucmVuZGVyZWQmJiFjLmlzRGVzdHJveWVkJiYhYy5wcmV2ZW50TWFyayl7Yy5lbFthPyJhZGRDbHMiOiJyZW1vdmVDbHMiXShjLmludmFsaWRDbHMpO2MuZ2V0QWN0aW9uRWwoKS5kb20uc2V0QXR0cmlidXRlKCJhcmlhLWludmFsaWQiLGEpO2lmKGMuZXJyb3JFbCl7Yy5lcnJvckVsLmRvbS5pbm5lckhUTUw9Yn19fSxzZXRGaWVsZERlZmF1bHRzOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsZCxhO2ZvcihhIGluIGMpe2lmKGMuaGFzT3duUHJvcGVydHkoYSkpe2Q9Y1thXTtpZighYi5oYXNPd25Qcm9wZXJ0eShhKSl7YlthXT1kfX19fX0pO0V4dC5kZWZpbmUoIkV4dC5mb3JtLmZpZWxkLkZpZWxkIix7aXNGb3JtRmllbGQ6dHJ1ZSxkaXNhYmxlZDpmYWxzZSxzdWJtaXRWYWx1ZTp0cnVlLHZhbGlkYXRlT25DaGFuZ2U6dHJ1ZSxzdXNwZW5kQ2hlY2tDaGFuZ2U6MCxpbml0RmllbGQ6ZnVuY3Rpb24oKXt0aGlzLmFkZEV2ZW50cygiY2hhbmdlIiwidmFsaWRpdHljaGFuZ2UiLCJkaXJ0eWNoYW5nZSIpO3RoaXMuaW5pdFZhbHVlKCl9LGluaXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS52YWx1ZT1hLnRyYW5zZm9ybU9yaWdpbmFsVmFsdWUoYS52YWx1ZSk7YS5vcmlnaW5hbFZhbHVlPWEubGFzdFZhbHVlPWEudmFsdWU7YS5zdXNwZW5kQ2hlY2tDaGFuZ2UrKzthLnNldFZhbHVlKGEudmFsdWUpO2Euc3VzcGVuZENoZWNrQ2hhbmdlLS19LHRyYW5zZm9ybU9yaWdpbmFsVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlfSxzZXRWYWx1ZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2EudmFsdWU9YjthLmNoZWNrQ2hhbmdlKCk7cmV0dXJuIGF9LGlzRXF1YWw6ZnVuY3Rpb24oYixhKXtyZXR1cm4gU3RyaW5nKGIpPT09U3RyaW5nKGEpfSxpc0VxdWFsQXNTdHJpbmc6ZnVuY3Rpb24oYixhKXtyZXR1cm4gU3RyaW5nKEV4dC52YWx1ZShiLCIiKSk9PT1TdHJpbmcoRXh0LnZhbHVlKGEsIiIpKX0sZ2V0U3VibWl0RGF0YTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1udWxsO2lmKCFhLmRpc2FibGVkJiZhLnN1Ym1pdFZhbHVlJiYhYS5pc0ZpbGVVcGxvYWQoKSl7Yj17fTtiW2EuZ2V0TmFtZSgpXT0iIithLmdldFZhbHVlKCl9cmV0dXJuIGJ9LGdldE1vZGVsRGF0YTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1udWxsO2lmKCFhLmRpc2FibGVkJiYhYS5pc0ZpbGVVcGxvYWQoKSl7Yj17fTtiW2EuZ2V0TmFtZSgpXT1hLmdldFZhbHVlKCl9cmV0dXJuIGJ9LHJlc2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmJlZm9yZVJlc2V0KCk7YS5zZXRWYWx1ZShhLm9yaWdpbmFsVmFsdWUpO2EuY2xlYXJJbnZhbGlkKCk7ZGVsZXRlIGEud2FzVmFsaWR9LGJlZm9yZVJlc2V0OkV4dC5lbXB0eUZuLHJlc2V0T3JpZ2luYWxWYWx1ZTpmdW5jdGlvbigpe3RoaXMub3JpZ2luYWxWYWx1ZT10aGlzLmdldFZhbHVlKCk7dGhpcy5jaGVja0RpcnR5KCl9LGNoZWNrQ2hhbmdlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuc3VzcGVuZENoZWNrQ2hhbmdlKXt2YXIgYz10aGlzLGI9Yy5nZXRWYWx1ZSgpLGE9Yy5sYXN0VmFsdWU7aWYoIWMuaXNFcXVhbChiLGEpJiYhYy5pc0Rlc3Ryb3llZCl7Yy5sYXN0VmFsdWU9YjtjLmZpcmVFdmVudCgiY2hhbmdlIixjLGIsYSk7Yy5vbkNoYW5nZShiLGEpfX19LG9uQ2hhbmdlOmZ1bmN0aW9uKGIsYSl7aWYodGhpcy52YWxpZGF0ZU9uQ2hhbmdlKXt0aGlzLnZhbGlkYXRlKCl9dGhpcy5jaGVja0RpcnR5KCl9LGlzRGlydHk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiAhYS5kaXNhYmxlZCYmIWEuaXNFcXVhbChhLmdldFZhbHVlKCksYS5vcmlnaW5hbFZhbHVlKX0sY2hlY2tEaXJ0eTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmlzRGlydHkoKTtpZihiIT09YS53YXNEaXJ0eSl7YS5maXJlRXZlbnQoImRpcnR5Y2hhbmdlIixhLGIpO2Eub25EaXJ0eUNoYW5nZShiKTthLndhc0RpcnR5PWJ9fSxvbkRpcnR5Q2hhbmdlOkV4dC5lbXB0eUZuLGdldEVycm9yczpmdW5jdGlvbihhKXtyZXR1cm5bXX0saXNWYWxpZDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIGEuZGlzYWJsZWR8fEV4dC5pc0VtcHR5KGEuZ2V0RXJyb3JzKCkpfSx2YWxpZGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmlzVmFsaWQoKTtpZihiIT09YS53YXNWYWxpZCl7YS53YXNWYWxpZD1iO2EuZmlyZUV2ZW50KCJ2YWxpZGl0eWNoYW5nZSIsYSxiKX1yZXR1cm4gYn0sYmF0Y2hDaGFuZ2VzOmZ1bmN0aW9uKGEpe3RyeXt0aGlzLnN1c3BlbmRDaGVja0NoYW5nZSsrO2EoKX1jYXRjaChiKXt0aHJvdyBifWZpbmFsbHl7dGhpcy5zdXNwZW5kQ2hlY2tDaGFuZ2UtLX10aGlzLmNoZWNrQ2hhbmdlKCl9LGlzRmlsZVVwbG9hZDpmdW5jdGlvbigpe3JldHVybiBmYWxzZX0sZXh0cmFjdEZpbGVJbnB1dDpmdW5jdGlvbigpe3JldHVybiBudWxsfSxtYXJrSW52YWxpZDpFeHQuZW1wdHlGbixjbGVhckludmFsaWQ6RXh0LmVtcHR5Rm59KTtFeHQuZGVmaW5lKCJFeHQuZm9ybS5maWVsZC5CYXNlIix7ZXh0ZW5kOiJFeHQuQ29tcG9uZW50IixtaXhpbnM6e2xhYmVsYWJsZToiRXh0LmZvcm0uTGFiZWxhYmxlIixmaWVsZDoiRXh0LmZvcm0uZmllbGQuRmllbGQifSxhbGlhczoid2lkZ2V0LmZpZWxkIixhbHRlcm5hdGVDbGFzc05hbWU6WyJFeHQuZm9ybS5GaWVsZCIsIkV4dC5mb3JtLkJhc2VGaWVsZCJdLHJlcXVpcmVzOlsiRXh0LnV0aWwuRGVsYXllZFRhc2siLCJFeHQuWFRlbXBsYXRlIiwiRXh0LmxheW91dC5jb21wb25lbnQuZmllbGQuRmllbGQiXSxmaWVsZFN1YlRwbDpbJzxpbnB1dCBpZD0ie2lkfSIgdHlwZT0ie3R5cGV9IiB7aW5wdXRBdHRyVHBsfScsJyBzaXplPSIxIicsJzx0cGwgaWY9Im5hbWUiPiBuYW1lPSJ7bmFtZX0iPC90cGw+JywnPHRwbCBpZj0idmFsdWUiPiB2YWx1ZT0ie1tFeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZSh2YWx1ZXMudmFsdWUpXX0iPC90cGw+JywnPHRwbCBpZj0icGxhY2Vob2xkZXIiPiBwbGFjZWhvbGRlcj0ie3BsYWNlaG9sZGVyfSI8L3RwbD4nLCd7JWlmICh2YWx1ZXMubWF4TGVuZ3RoICE9PSB1bmRlZmluZWQpeyV9IG1heGxlbmd0aD0ie21heExlbmd0aH0ieyV9JX0nLCc8dHBsIGlmPSJyZWFkT25seSI+IHJlYWRvbmx5PSJyZWFkb25seSI8L3RwbD4nLCc8dHBsIGlmPSJkaXNhYmxlZCI+IGRpc2FibGVkPSJkaXNhYmxlZCI8L3RwbD4nLCc8dHBsIGlmPSJ0YWJJZHgiPiB0YWJJbmRleD0ie3RhYklkeH0iPC90cGw+JywnPHRwbCBpZj0iZmllbGRTdHlsZSI+IHN0eWxlPSJ7ZmllbGRTdHlsZX0iPC90cGw+JywnIGNsYXNzPSJ7ZmllbGRDbHN9IHt0eXBlQ2xzfSB7ZWRpdGFibGVDbHN9IiBhdXRvY29tcGxldGU9Im9mZiIvPicse2Rpc2FibGVGb3JtYXRzOnRydWV9XSxzdWJUcGxJbnNlcnRpb25zOlsiaW5wdXRBdHRyVHBsIl0saW5wdXRUeXBlOiJ0ZXh0IixpbnZhbGlkVGV4dDoiVGhlIHZhbHVlIGluIHRoaXMgZmllbGQgaXMgaW52YWxpZCIsZmllbGRDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0tZmllbGQiLGZvY3VzQ2xzOiJmb3JtLWZvY3VzIixkaXJ0eUNsczpFeHQuYmFzZUNTU1ByZWZpeCsiZm9ybS1kaXJ0eSIsY2hlY2tDaGFuZ2VFdmVudHM6RXh0LmlzSUUmJighZG9jdW1lbnQuZG9jdW1lbnRNb2RlfHxkb2N1bWVudC5kb2N1bWVudE1vZGU8OSk/WyJjaGFuZ2UiLCJwcm9wZXJ0eWNoYW5nZSJdOlsiY2hhbmdlIiwiaW5wdXQiLCJ0ZXh0SW5wdXQiLCJrZXl1cCIsImRyYWdkcm9wIl0sY2hlY2tDaGFuZ2VCdWZmZXI6NTAsY29tcG9uZW50TGF5b3V0OiJmaWVsZCIscmVhZE9ubHk6ZmFsc2UscmVhZE9ubHlDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0tcmVhZG9ubHkiLHZhbGlkYXRlT25CbHVyOnRydWUsaGFzRm9jdXM6ZmFsc2UsYmFzZUNsczpFeHQuYmFzZUNTU1ByZWZpeCsiZmllbGQiLG1hc2tPbkRpc2FibGU6ZmFsc2UsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KCk7YS5zdWJUcGxEYXRhPWEuc3ViVHBsRGF0YXx8e307YS5hZGRFdmVudHMoInNwZWNpYWxrZXkiLCJ3cml0ZWFibGVjaGFuZ2UiKTthLmluaXRMYWJlbGFibGUoKTthLmluaXRGaWVsZCgpO2lmKCFhLm5hbWUpe2EubmFtZT1hLmdldElucHV0SWQoKX19LGJlZm9yZVJlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YS5iZWZvcmVMYWJlbGFibGVSZW5kZXIoYXJndW1lbnRzKTtpZihhLnJlYWRPbmx5KXthLmFkZENscyhhLnJlYWRPbmx5Q2xzKX19LGdldElucHV0SWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnB1dElkfHwodGhpcy5pbnB1dElkPXRoaXMuaWQrIi1pbnB1dEVsIil9LGdldFN1YlRwbERhdGE6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9Yy5pbnB1dFR5cGUsYT1jLmdldElucHV0SWQoKSxkO2Q9RXh0LmFwcGx5KHtpZDphLGNtcElkOmMuaWQsbmFtZTpjLm5hbWV8fGEsZGlzYWJsZWQ6Yy5kaXNhYmxlZCxyZWFkT25seTpjLnJlYWRPbmx5LHZhbHVlOmMuZ2V0UmF3VmFsdWUoKSx0eXBlOmIsZmllbGRDbHM6Yy5maWVsZENscyxmaWVsZFN0eWxlOmMuZ2V0RmllbGRTdHlsZSgpLHRhYklkeDpjLnRhYkluZGV4LHR5cGVDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0tIisoYj09PSJwYXNzd29yZCI/InRleHQiOmIpfSxjLnN1YlRwbERhdGEpO2MuZ2V0SW5zZXJ0aW9uUmVuZGVyRGF0YShkLGMuc3ViVHBsSW5zZXJ0aW9ucyk7cmV0dXJuIGR9LGFmdGVyRmlyc3RMYXlvdXQ6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt2YXIgYT10aGlzLmlucHV0RWw7aWYoYSl7YS5zZWxlY3RhYmxlKCl9fSxhcHBseVJlbmRlclNlbGVjdG9yczpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KCk7YS5pbnB1dEVsPWEuZWwuZ2V0QnlJZChhLmdldElucHV0SWQoKSl9LGdldFN1YlRwbE1hcmt1cDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFRwbCgiZmllbGRTdWJUcGwiKS5hcHBseSh0aGlzLmdldFN1YlRwbERhdGEoKSl9LGluaXRSZW5kZXJUcGw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKCFhLmhhc093blByb3BlcnR5KCJyZW5kZXJUcGwiKSl7YS5yZW5kZXJUcGw9YS5nZXRUcGwoImxhYmVsYWJsZVJlbmRlclRwbCIpfXJldHVybiBhLmNhbGxQYXJlbnQoKX0saW5pdFJlbmRlckRhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmFwcGx5SWYodGhpcy5jYWxsUGFyZW50KCksdGhpcy5nZXRMYWJlbGFibGVSZW5kZXJEYXRhKCkpfSxzZXRGaWVsZFN0eWxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmlucHV0RWw7aWYoYyl7Yy5hcHBseVN0eWxlcyhhKX1iLmZpZWxkU3R5bGU9YX0sZ2V0RmllbGRTdHlsZTpmdW5jdGlvbigpe3JldHVybiJ3aWR0aDoxMDAlOyIrKEV4dC5pc09iamVjdCh0aGlzLmZpZWxkU3R5bGUpP0V4dC5Eb21IZWxwZXIuZ2VuZXJhdGVTdHlsZXModGhpcy5maWVsZFN0eWxlKTp0aGlzLmZpZWxkU3R5bGV8fCIiKX0sb25SZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2Eub25MYWJlbGFibGVSZW5kZXIoKTthLnJlbmRlckFjdGl2ZUVycm9yKCl9LGdldEZvY3VzRWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnB1dEVsfSxpc0ZpbGVVcGxvYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnB1dFR5cGU9PT0iZmlsZSJ9LGV4dHJhY3RGaWxlSW5wdXQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5pc0ZpbGVVcGxvYWQoKT9iLmlucHV0RWwuZG9tOm51bGwsYztpZihhKXtjPWEuY2xvbmVOb2RlKHRydWUpO2EucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoYyxhKTtiLmlucHV0RWw9RXh0LmdldChjKX1yZXR1cm4gYX0sZ2V0U3VibWl0RGF0YTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1udWxsLGM7aWYoIWEuZGlzYWJsZWQmJmEuc3VibWl0VmFsdWUmJiFhLmlzRmlsZVVwbG9hZCgpKXtjPWEuZ2V0U3VibWl0VmFsdWUoKTtpZihjIT09bnVsbCl7Yj17fTtiW2EuZ2V0TmFtZSgpXT1jfX1yZXR1cm4gYn0sZ2V0U3VibWl0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9jZXNzUmF3VmFsdWUodGhpcy5nZXRSYXdWYWx1ZSgpKX0sZ2V0UmF3VmFsdWU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9KGIuaW5wdXRFbD9iLmlucHV0RWwuZ2V0VmFsdWUoKTpFeHQudmFsdWUoYi5yYXdWYWx1ZSwiIikpO2IucmF3VmFsdWU9YTtyZXR1cm4gYX0sc2V0UmF3VmFsdWU6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztiPUV4dC52YWx1ZShhLnRyYW5zZm9ybVJhd1ZhbHVlKGIpLCIiKTthLnJhd1ZhbHVlPWI7aWYoYS5pbnB1dEVsKXthLmlucHV0RWwuZG9tLnZhbHVlPWJ9cmV0dXJuIGJ9LHRyYW5zZm9ybVJhd1ZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiBhfSx2YWx1ZVRvUmF3OmZ1bmN0aW9uKGEpe3JldHVybiIiK0V4dC52YWx1ZShhLCIiKX0scmF3VG9WYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYX0scHJvY2Vzc1Jhd1ZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiBhfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLnJhd1RvVmFsdWUoYS5wcm9jZXNzUmF3VmFsdWUoYS5nZXRSYXdWYWx1ZSgpKSk7YS52YWx1ZT1iO3JldHVybiBifSxzZXRWYWx1ZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2Euc2V0UmF3VmFsdWUoYS52YWx1ZVRvUmF3KGIpKTtyZXR1cm4gYS5taXhpbnMuZmllbGQuc2V0VmFsdWUuY2FsbChhLGIpfSxvbkJveFJlYWR5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoKTtpZihhLnNldFJlYWRPbmx5T25Cb3hSZWFkeSl7YS5zZXRSZWFkT25seShhLnJlYWRPbmx5KX19LG9uRGlzYWJsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmlucHV0RWw7YS5jYWxsUGFyZW50KCk7aWYoYil7Yi5kb20uZGlzYWJsZWQ9dHJ1ZTtpZihhLmhhc0FjdGl2ZUVycm9yKCkpe2EuY2xlYXJJbnZhbGlkKCk7YS5uZWVkc1ZhbGlkYXRlT25FbmFibGU9dHJ1ZX19fSxvbkVuYWJsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmlucHV0RWw7YS5jYWxsUGFyZW50KCk7aWYoYil7Yi5kb20uZGlzYWJsZWQ9ZmFsc2U7aWYoYS5uZWVkc1ZhbGlkYXRlT25FbmFibGUpe2RlbGV0ZSBhLm5lZWRzVmFsaWRhdGVPbkVuYWJsZTthLmZvcmNlVmFsaWRhdGlvbj10cnVlO2EuaXNWYWxpZCgpO2RlbGV0ZSBhLmZvcmNlVmFsaWRhdGlvbn19fSxzZXRSZWFkT25seTpmdW5jdGlvbihjKXt2YXIgYT10aGlzLGI9YS5pbnB1dEVsO2M9ISFjO2FbYz8iYWRkQ2xzIjoicmVtb3ZlQ2xzIl0oYS5yZWFkT25seUNscyk7YS5yZWFkT25seT1jO2lmKGIpe2IuZG9tLnJlYWRPbmx5PWN9ZWxzZXtpZihhLnJlbmRlcmluZyl7YS5zZXRSZWFkT25seU9uQm94UmVhZHk9dHJ1ZX19YS5maXJlRXZlbnQoIndyaXRlYWJsZWNoYW5nZSIsYSxjKX0sZmlyZUtleTpmdW5jdGlvbihhKXtpZihhLmlzU3BlY2lhbEtleSgpKXt0aGlzLmZpcmVFdmVudCgic3BlY2lhbGtleSIsdGhpcyxuZXcgRXh0LkV2ZW50T2JqZWN0SW1wbChhKSl9fSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcyxpPWcuaW5wdXRFbCxiLGosYz1nLmNoZWNrQ2hhbmdlRXZlbnRzLGgsYT1jLmxlbmd0aCxkO2lmKGcuaW5FZGl0b3Ipe2cub25CbHVyPUV4dC5GdW5jdGlvbi5jcmVhdGVCdWZmZXJlZChnLm9uQmx1ciwxMCl9aWYoaSl7Zy5tb24oaSxFeHQuRXZlbnRNYW5hZ2VyLmdldEtleUV2ZW50KCksZy5maXJlS2V5LGcpO2I9bmV3IEV4dC51dGlsLkRlbGF5ZWRUYXNrKGcuY2hlY2tDaGFuZ2UsZyk7Zy5vbkNoYW5nZUV2ZW50PWo9ZnVuY3Rpb24oKXtiLmRlbGF5KGcuY2hlY2tDaGFuZ2VCdWZmZXIpfTtmb3IoaD0wO2g8YTtoKyspe2Q9Y1toXTtpZihkPT09InByb3BlcnR5Y2hhbmdlIil7Zy51c2VzUHJvcGVydHljaGFuZ2U9dHJ1ZX1nLm1vbihpLGQsail9fWcuY2FsbFBhcmVudCgpfSxkb0NvbXBvbmVudExheW91dDpmdW5jdGlvbigpe3ZhciBjPXRoaXMsZD1jLmlucHV0RWwsYT1jLnVzZXNQcm9wZXJ0eWNoYW5nZSxiPSJwcm9wZXJ0eWNoYW5nZSIsZT1jLm9uQ2hhbmdlRXZlbnQ7aWYoYSl7Yy5tdW4oZCxiLGUpfWMuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGEpe2MubW9uKGQsYixlKX19LG9uRGlydHlDaGFuZ2U6ZnVuY3Rpb24oYSl7dGhpc1thPyJhZGRDbHMiOiJyZW1vdmVDbHMiXSh0aGlzLmRpcnR5Q2xzKX0saXNWYWxpZDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmRpc2FibGVkLGM9Yi5mb3JjZVZhbGlkYXRpb258fCFhO3JldHVybiBjP2IudmFsaWRhdGVWYWx1ZShiLnByb2Nlc3NSYXdWYWx1ZShiLmdldFJhd1ZhbHVlKCkpKTphfSx2YWxpZGF0ZVZhbHVlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMsZD1hLmdldEVycm9ycyhiKSxjPUV4dC5pc0VtcHR5KGQpO2lmKCFhLnByZXZlbnRNYXJrKXtpZihjKXthLmNsZWFySW52YWxpZCgpfWVsc2V7YS5tYXJrSW52YWxpZChkKX19cmV0dXJuIGN9LG1hcmtJbnZhbGlkOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLmdldEFjdGl2ZUVycm9yKCk7Yi5zZXRBY3RpdmVFcnJvcnMoRXh0LkFycmF5LmZyb20oYykpO2lmKGEhPT1iLmdldEFjdGl2ZUVycm9yKCkpe2IudXBkYXRlTGF5b3V0KCl9fSxjbGVhckludmFsaWQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5oYXNBY3RpdmVFcnJvcigpO2IudW5zZXRBY3RpdmVFcnJvcigpO2lmKGEpe2IudXBkYXRlTGF5b3V0KCl9fSxyZW5kZXJBY3RpdmVFcnJvcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmhhc0FjdGl2ZUVycm9yKCk7aWYoYi5pbnB1dEVsKXtiLmlucHV0RWxbYT8iYWRkQ2xzIjoicmVtb3ZlQ2xzIl0oYi5pbnZhbGlkQ2xzKyItZmllbGQiKX1iLm1peGlucy5sYWJlbGFibGUucmVuZGVyQWN0aXZlRXJyb3IuY2FsbChiKX0sZ2V0QWN0aW9uRWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnB1dEVsfHx0aGlzLmVsfX0pO0V4dC5kZWZpbmUoIkV4dC5mb3JtLmZpZWxkLlZUeXBlcyIsKGZ1bmN0aW9uKCl7dmFyIGM9L15bYS16QS1aX10rJC8sZD0vXlthLXpBLVowLTlfXSskLyxiPS9eKFx3KykoW1wtKy5dW1x3XSspKkAoXHdbXC1cd10qXC4pezEsNX0oW0EtWmEtel0pezIsNn0kLyxhPS8oKCheaHR0cHM/KXwoXmZ0cCkpOlwvXC8oW1wtXHddK1wuKStcd3syLDN9KFwvWyVcLVx3XSsoXC5cd3syLH0pPykqKChbXHdcLVwuXD9cXFwvK0AmIztgfj0lIV0qKShcLlx3ezIsfSk/KSpcLz8pL2k7cmV0dXJue3NpbmdsZXRvbjp0cnVlLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmZvcm0uVlR5cGVzIixlbWFpbDpmdW5jdGlvbihlKXtyZXR1cm4gYi50ZXN0KGUpfSxlbWFpbFRleHQ6J1RoaXMgZmllbGQgc2hvdWxkIGJlIGFuIGUtbWFpbCBhZGRyZXNzIGluIHRoZSBmb3JtYXQgInVzZXJAZXhhbXBsZS5jb20iJyxlbWFpbE1hc2s6L1thLXowLTlfXC5cLUBcK10vaSx1cmw6ZnVuY3Rpb24oZSl7cmV0dXJuIGEudGVzdChlKX0sdXJsVGV4dDonVGhpcyBmaWVsZCBzaG91bGQgYmUgYSBVUkwgaW4gdGhlIGZvcm1hdCAiaHR0cDovL3d3dy5leGFtcGxlLmNvbSInLGFscGhhOmZ1bmN0aW9uKGUpe3JldHVybiBjLnRlc3QoZSl9LGFscGhhVGV4dDoiVGhpcyBmaWVsZCBzaG91bGQgb25seSBjb250YWluIGxldHRlcnMgYW5kIF8iLGFscGhhTWFzazovW2Etel9dL2ksYWxwaGFudW06ZnVuY3Rpb24oZSl7cmV0dXJuIGQudGVzdChlKX0sYWxwaGFudW1UZXh0OiJUaGlzIGZpZWxkIHNob3VsZCBvbmx5IGNvbnRhaW4gbGV0dGVycywgbnVtYmVycyBhbmQgXyIsYWxwaGFudW1NYXNrOi9bYS16MC05X10vaX19KCkpKTtFeHQuZGVmaW5lKCJFeHQuZm9ybS5maWVsZC5UZXh0Iix7ZXh0ZW5kOiJFeHQuZm9ybS5maWVsZC5CYXNlIixhbGlhczoid2lkZ2V0LnRleHRmaWVsZCIscmVxdWlyZXM6WyJFeHQuZm9ybS5maWVsZC5WVHlwZXMiLCJFeHQubGF5b3V0LmNvbXBvbmVudC5maWVsZC5UZXh0Il0sYWx0ZXJuYXRlQ2xhc3NOYW1lOlsiRXh0LmZvcm0uVGV4dEZpZWxkIiwiRXh0LmZvcm0uVGV4dCJdLHNpemU6MjAsZ3Jvd01pbjozMCxncm93TWF4OjgwMCxncm93QXBwZW5kOiJXIixhbGxvd0JsYW5rOnRydWUsbWluTGVuZ3RoOjAsbWF4TGVuZ3RoOk51bWJlci5NQVhfVkFMVUUsbWluTGVuZ3RoVGV4dDoiVGhlIG1pbmltdW0gbGVuZ3RoIGZvciB0aGlzIGZpZWxkIGlzIHswfSIsbWF4TGVuZ3RoVGV4dDoiVGhlIG1heGltdW0gbGVuZ3RoIGZvciB0aGlzIGZpZWxkIGlzIHswfSIsYmxhbmtUZXh0OiJUaGlzIGZpZWxkIGlzIHJlcXVpcmVkIixyZWdleFRleHQ6IiIsZW1wdHlDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0tZW1wdHktZmllbGQiLHJlcXVpcmVkQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLXJlcXVpcmVkLWZpZWxkIixjb21wb25lbnRMYXlvdXQ6InRleHRmaWVsZCIsdmFsdWVDb250YWluc1BsYWNlaG9sZGVyOmZhbHNlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudCgpO2EuYWRkRXZlbnRzKCJhdXRvc2l6ZSIsImtleWRvd24iLCJrZXl1cCIsImtleXByZXNzIik7YS5hZGRTdGF0ZUV2ZW50cygiY2hhbmdlIik7YS5zZXRHcm93U2l6ZVBvbGljeSgpfSxzZXRHcm93U2l6ZVBvbGljeTpmdW5jdGlvbigpe2lmKHRoaXMuZ3Jvdyl7dGhpcy5zaHJpbmtXcmFwfD0xfX0saW5pdEV2ZW50czpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmlucHV0RWw7Yi5jYWxsUGFyZW50KCk7aWYoYi5zZWxlY3RPbkZvY3VzfHxiLmVtcHR5VGV4dCl7Yi5tb24oYSwibW91c2Vkb3duIixiLm9uTW91c2VEb3duLGIpfWlmKGIubWFza1JlfHwoYi52dHlwZSYmYi5kaXNhYmxlS2V5RmlsdGVyIT09dHJ1ZSYmKGIubWFza1JlPUV4dC5mb3JtLmZpZWxkLlZUeXBlc1tiLnZ0eXBlKyJNYXNrIl0pKSl7Yi5tb24oYSwia2V5cHJlc3MiLGIuZmlsdGVyS2V5cyxiKX1pZihiLmVuYWJsZUtleUV2ZW50cyl7Yi5tb24oYSx7c2NvcGU6YixrZXl1cDpiLm9uS2V5VXAsa2V5ZG93bjpiLm9uS2V5RG93bixrZXlwcmVzczpiLm9uS2V5UHJlc3N9KX19LGlzRXF1YWw6ZnVuY3Rpb24oYixhKXtyZXR1cm4gdGhpcy5pc0VxdWFsQXNTdHJpbmcoYixhKX0sb25DaGFuZ2U6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt0aGlzLmF1dG9TaXplKCl9LGdldFN1YlRwbERhdGE6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9Yi5nZXRSYXdWYWx1ZSgpLGU9Yi5lbXB0eVRleHQmJmMubGVuZ3RoPDEsYT1iLm1heExlbmd0aCxkO2lmKGIuZW5mb3JjZU1heExlbmd0aCl7aWYoYT09PU51bWJlci5NQVhfVkFMVUUpe2E9dW5kZWZpbmVkfX1lbHNle2E9dW5kZWZpbmVkfWlmKGUpe2lmKEV4dC5zdXBwb3J0cy5QbGFjZWhvbGRlcil7ZD1iLmVtcHR5VGV4dH1lbHNle2M9Yi5lbXB0eVRleHQ7Yi52YWx1ZUNvbnRhaW5zUGxhY2Vob2xkZXI9dHJ1ZX19cmV0dXJuIEV4dC5hcHBseShiLmNhbGxQYXJlbnQoKSx7bWF4TGVuZ3RoOmEscmVhZE9ubHk6Yi5yZWFkT25seSxwbGFjZWhvbGRlcjpkLHZhbHVlOmMsZmllbGRDbHM6Yi5maWVsZENscysoKGUmJihkfHxjKSk/IiAiK2IuZW1wdHlDbHM6IiIpKyhiLmFsbG93Qmxhbms/IiI6IiAiK2IucmVxdWlyZWRDbHMpfSl9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5hdXRvU2l6ZSgpO3RoaXMuY2FsbFBhcmVudCgpfSxvbk1vdXNlRG93bjpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKCFhLmhhc0ZvY3VzKXthLm1vbihhLmlucHV0RWwsIm1vdXNldXAiLEV4dC5lbXB0eUZuLGEse3NpbmdsZTp0cnVlLHByZXZlbnREZWZhdWx0OnRydWV9KX19LHByb2Nlc3NSYXdWYWx1ZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzLGQ9YS5zdHJpcENoYXJzUmUsYztpZihkKXtjPWIucmVwbGFjZShkLCIiKTtpZihjIT09Yil7YS5zZXRSYXdWYWx1ZShjKTtiPWN9fXJldHVybiBifSxvbkRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTtpZihFeHQuaXNJRSl7dGhpcy5pbnB1dEVsLmRvbS51bnNlbGVjdGFibGU9Im9uIn19LG9uRW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KCk7aWYoRXh0LmlzSUUpe3RoaXMuaW5wdXRFbC5kb20udW5zZWxlY3RhYmxlPSIifX0sb25LZXlEb3duOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJrZXlkb3duIix0aGlzLGEpfSxvbktleVVwOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJrZXl1cCIsdGhpcyxhKX0sb25LZXlQcmVzczpmdW5jdGlvbihhKXt0aGlzLmZpcmVFdmVudCgia2V5cHJlc3MiLHRoaXMsYSl9LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KCk7dGhpcy5hcHBseUVtcHR5VGV4dCgpfSxhcHBseUVtcHR5VGV4dDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmVtcHR5VGV4dCxjO2lmKGIucmVuZGVyZWQmJmEpe2M9Yi5nZXRSYXdWYWx1ZSgpLmxlbmd0aDwxJiYhYi5oYXNGb2N1cztpZihFeHQuc3VwcG9ydHMuUGxhY2Vob2xkZXIpe2IuaW5wdXRFbC5kb20ucGxhY2Vob2xkZXI9YX1lbHNle2lmKGMpe2Iuc2V0UmF3VmFsdWUoYSk7Yi52YWx1ZUNvbnRhaW5zUGxhY2Vob2xkZXI9dHJ1ZX19aWYoYyl7Yi5pbnB1dEVsLmFkZENscyhiLmVtcHR5Q2xzKX1iLmF1dG9TaXplKCl9fSxhZnRlckZpcnN0TGF5b3V0OmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KCk7aWYoRXh0LmlzSUUmJnRoaXMuZGlzYWJsZWQpe3ZhciBhPXRoaXMuaW5wdXRFbDtpZihhKXthLmRvbS51bnNlbGVjdGFibGU9Im9uIn19fSxwcmVGb2N1czpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1iLmlucHV0RWwsYT1iLmVtcHR5VGV4dCxkO2IuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKChhJiYhRXh0LnN1cHBvcnRzLlBsYWNlaG9sZGVyKSYmKGMuZG9tLnZhbHVlPT09Yi5lbXB0eVRleHQmJmIudmFsdWVDb250YWluc1BsYWNlaG9sZGVyKSl7Yi5zZXRSYXdWYWx1ZSgiIik7ZD10cnVlO2MucmVtb3ZlQ2xzKGIuZW1wdHlDbHMpO2IudmFsdWVDb250YWluc1BsYWNlaG9sZGVyPWZhbHNlfWVsc2V7aWYoRXh0LnN1cHBvcnRzLlBsYWNlaG9sZGVyKXtiLmlucHV0RWwucmVtb3ZlQ2xzKGIuZW1wdHlDbHMpfX1pZihiLnNlbGVjdE9uRm9jdXN8fGQpe2MuZG9tLnNlbGVjdCgpfX0sb25Gb2N1czpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYS5lbXB0eVRleHQpe2EuYXV0b1NpemUoKX19LHBvc3RCbHVyOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5hcHBseUVtcHR5VGV4dCgpfSxmaWx0ZXJLZXlzOmZ1bmN0aW9uKGMpe2lmKGMuY3RybEtleSYmIWMuYWx0S2V5KXtyZXR1cm59dmFyIGI9Yy5nZXRLZXkoKSxhPVN0cmluZy5mcm9tQ2hhckNvZGUoYy5nZXRDaGFyQ29kZSgpKTtpZigoRXh0LmlzR2Vja298fEV4dC5pc09wZXJhKSYmKGMuaXNOYXZLZXlQcmVzcygpfHxiPT09Yy5CQUNLU1BBQ0V8fChiPT09Yy5ERUxFVEUmJmMuYnV0dG9uPT09LTEpKSl7cmV0dXJufWlmKCghRXh0LmlzR2Vja28mJiFFeHQuaXNPcGVyYSkmJmMuaXNTcGVjaWFsS2V5KCkmJiFhKXtyZXR1cm59aWYoIXRoaXMubWFza1JlLnRlc3QoYSkpe2Muc3RvcEV2ZW50KCl9fSxnZXRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkZFByb3BlcnR5VG9TdGF0ZSh0aGlzLmNhbGxQYXJlbnQoKSwidmFsdWUiKX0sYXBwbHlTdGF0ZTpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihhLmhhc093blByb3BlcnR5KCJ2YWx1ZSIpKXt0aGlzLnNldFZhbHVlKGEudmFsdWUpfX0sZ2V0UmF3VmFsdWU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5jYWxsUGFyZW50KCk7aWYoYT09PWIuZW1wdHlUZXh0JiZiLnZhbHVlQ29udGFpbnNQbGFjZWhvbGRlcil7YT0iIn1yZXR1cm4gYX0sc2V0VmFsdWU6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcyxjPWEuaW5wdXRFbDtpZihjJiZhLmVtcHR5VGV4dCYmIUV4dC5pc0VtcHR5KGIpKXtjLnJlbW92ZUNscyhhLmVtcHR5Q2xzKTthLnZhbHVlQ29udGFpbnNQbGFjZWhvbGRlcj1mYWxzZX1hLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLmFwcGx5RW1wdHlUZXh0KCk7cmV0dXJuIGF9LGdldEVycm9yczpmdW5jdGlvbihsKXt2YXIgZz10aGlzLGs9Zy5jYWxsUGFyZW50KGFyZ3VtZW50cyksYT1nLnZhbGlkYXRvcixkPWcuZW1wdHlUZXh0LGM9Zy5hbGxvd0JsYW5rLGU9Zy52dHlwZSxoPUV4dC5mb3JtLmZpZWxkLlZUeXBlcyxpPWcucmVnZXgsaj1FeHQuU3RyaW5nLmZvcm1hdCxiO2w9bHx8Zy5wcm9jZXNzUmF3VmFsdWUoZy5nZXRSYXdWYWx1ZSgpKTtpZihFeHQuaXNGdW5jdGlvbihhKSl7Yj1hLmNhbGwoZyxsKTtpZihiIT09dHJ1ZSl7ay5wdXNoKGIpfX1pZihsLmxlbmd0aDwxfHwobD09PWcuZW1wdHlUZXh0JiZnLnZhbHVlQ29udGFpbnNQbGFjZWhvbGRlcikpe2lmKCFjKXtrLnB1c2goZy5ibGFua1RleHQpfXJldHVybiBrfWlmKGwubGVuZ3RoPGcubWluTGVuZ3RoKXtrLnB1c2goaihnLm1pbkxlbmd0aFRleHQsZy5taW5MZW5ndGgpKX1pZihsLmxlbmd0aD5nLm1heExlbmd0aCl7ay5wdXNoKGooZy5tYXhMZW5ndGhUZXh0LGcubWF4TGVuZ3RoKSl9aWYoZSl7aWYoIWhbZV0obCxnKSl7ay5wdXNoKGcudnR5cGVUZXh0fHxoW2UrIlRleHQiXSl9fWlmKGkmJiFpLnRlc3QobCkpe2sucHVzaChnLnJlZ2V4VGV4dHx8Zy5pbnZhbGlkVGV4dCl9cmV0dXJuIGt9LHNlbGVjdFRleHQ6ZnVuY3Rpb24oaSxhKXt2YXIgaD10aGlzLGM9aC5nZXRSYXdWYWx1ZSgpLGQ9dHJ1ZSxnPWguaW5wdXRFbC5kb20sZSxiO2lmKGMubGVuZ3RoPjApe2k9aT09PWU/MDppO2E9YT09PWU/Yy5sZW5ndGg6YTtpZihnLnNldFNlbGVjdGlvblJhbmdlKXtnLnNldFNlbGVjdGlvblJhbmdlKGksYSl9ZWxzZXtpZihnLmNyZWF0ZVRleHRSYW5nZSl7Yj1nLmNyZWF0ZVRleHRSYW5nZSgpO2IubW92ZVN0YXJ0KCJjaGFyYWN0ZXIiLGkpO2IubW92ZUVuZCgiY2hhcmFjdGVyIixhLWMubGVuZ3RoKTtiLnNlbGVjdCgpfX1kPUV4dC5pc0dlY2tvfHxFeHQuaXNPcGVyYX1pZihkKXtoLmZvY3VzKCl9fSxhdXRvU2l6ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5ncm93JiZhLnJlbmRlcmVkKXthLmF1dG9TaXppbmc9dHJ1ZTthLnVwZGF0ZUxheW91dCgpfX0sYWZ0ZXJDb21wb25lbnRMYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYi5hdXRvU2l6aW5nKXthPWIuaW5wdXRFbC5nZXRXaWR0aCgpO2lmKGEhPT1iLmxhc3RJbnB1dFdpZHRoKXtiLmZpcmVFdmVudCgiYXV0b3NpemUiLGIsYSk7Yi5sYXN0SW5wdXRXaWR0aD1hO2RlbGV0ZSBiLmF1dG9TaXppbmd9fX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbXBvbmVudC5maWVsZC5UZXh0QXJlYSIse2V4dGVuZDoiRXh0LmxheW91dC5jb21wb25lbnQuZmllbGQuVGV4dCIsYWxpYXM6ImxheW91dC50ZXh0YXJlYWZpZWxkIix0eXBlOiJ0ZXh0YXJlYWZpZWxkIixjYW5Hcm93V2lkdGg6ZmFsc2UsbmF0dXJhbFNpemluZ1Byb3A6ImNvbHMiLGJlZ2luTGF5b3V0OmZ1bmN0aW9uKGEpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO2EudGFyZ2V0LmlucHV0RWwuc2V0U3R5bGUoImhlaWdodCIsIiIpfSxtZWFzdXJlQ29udGVudEhlaWdodDpmdW5jdGlvbihiKXt2YXIgZT10aGlzLGE9ZS5vd25lcixrPWUuY2FsbFBhcmVudChhcmd1bWVudHMpLGMsaSxoLGcsZCxqO2lmKGEuZ3JvdyYmIWIuc3RhdGUuZ3Jvd0hhbmRsZWQpe2M9Yi5pbnB1dENvbnRleHQ7aT1hLmlucHV0RWw7ZD1pLmdldFdpZHRoKHRydWUpO2g9RXh0LnV0aWwuRm9ybWF0Lmh0bWxFbmNvZGUoaS5kb20udmFsdWUpfHwiJiMxNjA7IjtoKz1hLmdyb3dBcHBlbmQ7aD1oLnJlcGxhY2UoL1xuL2csIjxici8+Iik7aj1FeHQudXRpbC5UZXh0TWV0cmljcy5tZWFzdXJlKGksaCxkKS5oZWlnaHQrYy5nZXRCb3JkZXJJbmZvKCkuaGVpZ2h0K2MuZ2V0UGFkZGluZ0luZm8oKS5oZWlnaHQ7aj1FeHQuTnVtYmVyLmNvbnN0cmFpbihqLGEuZ3Jvd01pbixhLmdyb3dNYXgpO2Muc2V0SGVpZ2h0KGopO2Iuc3RhdGUuZ3Jvd0hhbmRsZWQ9dHJ1ZTtjLmRvbUJsb2NrKGUsImhlaWdodCIpO2s9TmFOfXJldHVybiBrfX0pO0V4dC5kZWZpbmUoIkV4dC5mb3JtLmZpZWxkLlRleHRBcmVhIix7ZXh0ZW5kOiJFeHQuZm9ybS5maWVsZC5UZXh0IixhbGlhczpbIndpZGdldC50ZXh0YXJlYWZpZWxkIiwid2lkZ2V0LnRleHRhcmVhIl0sYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuZm9ybS5UZXh0QXJlYSIscmVxdWlyZXM6WyJFeHQuWFRlbXBsYXRlIiwiRXh0LmxheW91dC5jb21wb25lbnQuZmllbGQuVGV4dEFyZWEiLCJFeHQudXRpbC5EZWxheWVkVGFzayJdLGZpZWxkU3ViVHBsOlsnPHRleHRhcmVhIGlkPSJ7aWR9IiB7aW5wdXRBdHRyVHBsfScsJzx0cGwgaWY9Im5hbWUiPiBuYW1lPSJ7bmFtZX0iPC90cGw+JywnPHRwbCBpZj0icm93cyI+IHJvd3M9Intyb3dzfSIgPC90cGw+JywnPHRwbCBpZj0iY29scyI+IGNvbHM9Intjb2xzfSIgPC90cGw+JywnPHRwbCBpZj0icGxhY2Vob2xkZXIiPiBwbGFjZWhvbGRlcj0ie3BsYWNlaG9sZGVyfSI8L3RwbD4nLCc8dHBsIGlmPSJzaXplIj4gc2l6ZT0ie3NpemV9IjwvdHBsPicsJzx0cGwgaWY9Im1heExlbmd0aCAhPT0gdW5kZWZpbmVkIj4gbWF4bGVuZ3RoPSJ7bWF4TGVuZ3RofSI8L3RwbD4nLCc8dHBsIGlmPSJyZWFkT25seSI+IHJlYWRvbmx5PSJyZWFkb25seSI8L3RwbD4nLCc8dHBsIGlmPSJkaXNhYmxlZCI+IGRpc2FibGVkPSJkaXNhYmxlZCI8L3RwbD4nLCc8dHBsIGlmPSJ0YWJJZHgiPiB0YWJJbmRleD0ie3RhYklkeH0iPC90cGw+JywnIGNsYXNzPSJ7ZmllbGRDbHN9IHt0eXBlQ2xzfSIgJywnPHRwbCBpZj0iZmllbGRTdHlsZSI+IHN0eWxlPSJ7ZmllbGRTdHlsZX0iPC90cGw+JywnIGF1dG9jb21wbGV0ZT0ib2ZmIj5cbicsJzx0cGwgaWY9InZhbHVlIj57W0V4dC51dGlsLkZvcm1hdC5odG1sRW5jb2RlKHZhbHVlcy52YWx1ZSldfTwvdHBsPicsIjwvdGV4dGFyZWE+Iix7ZGlzYWJsZUZvcm1hdHM6dHJ1ZX1dLGdyb3dNaW46NjAsZ3Jvd01heDoxMDAwLGdyb3dBcHBlbmQ6IlxuLSIsY29sczoyMCxyb3dzOjQsZW50ZXJJc1NwZWNpYWw6ZmFsc2UscHJldmVudFNjcm9sbGJhcnM6ZmFsc2UsY29tcG9uZW50TGF5b3V0OiJ0ZXh0YXJlYWZpZWxkIixzZXRHcm93U2l6ZVBvbGljeTpFeHQuZW1wdHlGbixyZXR1cm5SZTovXHIvZyxnZXRTdWJUcGxEYXRhOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxiPWMuZ2V0RmllbGRTdHlsZSgpLGE9Yy5jYWxsUGFyZW50KCk7aWYoYy5ncm93KXtpZihjLnByZXZlbnRTY3JvbGxiYXJzKXthLmZpZWxkU3R5bGU9KGJ8fCIiKSsiO292ZXJmbG93OmhpZGRlbjtoZWlnaHQ6IitjLmdyb3dNaW4rInB4In19RXh0LmFwcGx5SWYoYSx7Y29sczpjLmNvbHMscm93czpjLnJvd3N9KTtyZXR1cm4gYX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2EubmVlZHNNYXhDaGVjaz1hLmVuZm9yY2VNYXhMZW5ndGgmJmEubWF4TGVuZ3RoIT09TnVtYmVyLk1BWF9WQUxVRSYmIUV4dC5zdXBwb3J0cy5UZXh0QXJlYU1heExlbmd0aDtpZihhLm5lZWRzTWF4Q2hlY2spe2EuaW5wdXRFbC5vbigicGFzdGUiLGEub25QYXN0ZSxhKX19LHRyYW5zZm9ybVJhd1ZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnN0cmlwUmV0dXJucyhhKX0sdHJhbnNmb3JtT3JpZ2luYWxWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zdHJpcFJldHVybnMoYSl9LHZhbHVlVG9SYXc6ZnVuY3Rpb24oYSl7YT10aGlzLnN0cmlwUmV0dXJucyhhKTtyZXR1cm4gdGhpcy5jYWxsUGFyZW50KFthXSl9LHN0cmlwUmV0dXJuczpmdW5jdGlvbihhKXtpZihhKXthPWEucmVwbGFjZSh0aGlzLnJldHVyblJlLCIiKX1yZXR1cm4gYX0sb25QYXN0ZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKCFhLnBhc3RlVGFzayl7YS5wYXN0ZVRhc2s9bmV3IEV4dC51dGlsLkRlbGF5ZWRUYXNrKGEucGFzdGVDaGVjayxhKX1hLnBhc3RlVGFzay5kZWxheSgxKX0scGFzdGVDaGVjazpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1iLmdldFZhbHVlKCksYT1iLm1heExlbmd0aDtpZihjLmxlbmd0aD5hKXtjPWMuc3Vic3RyKDAsYSk7Yi5zZXRWYWx1ZShjKX19LGZpcmVLZXk6ZnVuY3Rpb24oZCl7dmFyIGI9dGhpcyxhPWQuZ2V0S2V5KCksYztpZihkLmlzU3BlY2lhbEtleSgpJiYoYi5lbnRlcklzU3BlY2lhbHx8KGEhPT1kLkVOVEVSfHxkLmhhc01vZGlmaWVyKCkpKSl7Yi5maXJlRXZlbnQoInNwZWNpYWxrZXkiLGIsZCl9aWYoYi5uZWVkc01heENoZWNrJiZhIT09ZC5CQUNLU1BBQ0UmJmEhPT1kLkRFTEVURSYmIWQuaXNOYXZLZXlQcmVzcygpJiYhYi5pc0N1dENvcHlQYXN0ZVNlbGVjdEFsbChkLGEpKXtjPWIuZ2V0VmFsdWUoKTtpZihjLmxlbmd0aD49Yi5tYXhMZW5ndGgpe2Quc3RvcEV2ZW50KCl9fX0saXNDdXRDb3B5UGFzdGVTZWxlY3RBbGw6ZnVuY3Rpb24oYixhKXtpZihiLkNUUkwpe3JldHVybiBhPT09Yi5BfHxhPT09Yi5DfHxhPT09Yi5WfHxhPT09Yi5YfXJldHVybiBmYWxzZX0sYXV0b1NpemU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE7aWYoYi5ncm93JiZiLnJlbmRlcmVkKXtiLnVwZGF0ZUxheW91dCgpO2E9Yi5pbnB1dEVsLmdldEhlaWdodCgpO2lmKGEhPT1iLmxhc3RJbnB1dEhlaWdodCl7Yi5maXJlRXZlbnQoImF1dG9zaXplIixiLGEpO2IubGFzdElucHV0SGVpZ2h0PWF9fX0saW5pdEFyaWE6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLmdldEFjdGlvbkVsKCkuZG9tLnNldEF0dHJpYnV0ZSgiYXJpYS1tdWx0aWxpbmUiLHRydWUpfSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYXN0ZVRhc2s7aWYoYSl7YS5kZWxheSgpfXRoaXMuY2FsbFBhcmVudCgpfX0pO0V4dC5kZWZpbmUoIkV4dC5mb3JtLmZpZWxkLkRpc3BsYXkiLHtleHRlbmQ6IkV4dC5mb3JtLmZpZWxkLkJhc2UiLGFsaWFzOiJ3aWRnZXQuZGlzcGxheWZpZWxkIixyZXF1aXJlczpbIkV4dC51dGlsLkZvcm1hdCIsIkV4dC5YVGVtcGxhdGUiXSxhbHRlcm5hdGVDbGFzc05hbWU6WyJFeHQuZm9ybS5EaXNwbGF5RmllbGQiLCJFeHQuZm9ybS5EaXNwbGF5Il0sZmllbGRTdWJUcGw6Wyc8ZGl2IGlkPSJ7aWR9IicsJzx0cGwgaWY9ImZpZWxkU3R5bGUiPiBzdHlsZT0ie2ZpZWxkU3R5bGV9IjwvdHBsPicsJyBjbGFzcz0ie2ZpZWxkQ2xzfSI+e3ZhbHVlfTwvZGl2Picse2NvbXBpbGVkOnRydWUsZGlzYWJsZUZvcm1hdHM6dHJ1ZX1dLGZpZWxkQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLWRpc3BsYXktZmllbGQiLGh0bWxFbmNvZGU6ZmFsc2UsdmFsaWRhdGVPbkNoYW5nZTpmYWxzZSxpbml0RXZlbnRzOkV4dC5lbXB0eUZuLHN1Ym1pdFZhbHVlOmZhbHNlLGlzRGlydHk6ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9LGlzVmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX0sdmFsaWRhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX0sZ2V0UmF3VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYXdWYWx1ZX0sc2V0UmF3VmFsdWU6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcyxjO2I9RXh0LnZhbHVlKGIsIiIpO2EucmF3VmFsdWU9YjtpZihhLnJlbmRlcmVkKXthLmlucHV0RWwuZG9tLmlubmVySFRNTD1hLmdldERpc3BsYXlWYWx1ZSgpO2EudXBkYXRlTGF5b3V0KCl9cmV0dXJuIGJ9LGdldERpc3BsYXlWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj10aGlzLmdldFJhd1ZhbHVlKCksYztpZihhLnJlbmRlcmVyKXtjPWEucmVuZGVyZXIuY2FsbChhLnNjb3BlfHxhLGIsYSl9ZWxzZXtjPWEuaHRtbEVuY29kZT9FeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZShiKTpifXJldHVybiBjfSxnZXRTdWJUcGxEYXRhOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YS52YWx1ZT10aGlzLmdldERpc3BsYXlWYWx1ZSgpO3JldHVybiBhfX0pO0V4dC5kZWZpbmUoIkV4dC5sYXlvdXQuY29udGFpbmVyLkFuY2hvciIse2FsaWFzOiJsYXlvdXQuYW5jaG9yIixleHRlbmQ6IkV4dC5sYXlvdXQuY29udGFpbmVyLkNvbnRhaW5lciIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQubGF5b3V0LkFuY2hvckxheW91dCIsdHlwZToiYW5jaG9yIixtYW5hZ2VPdmVyZmxvdzoyLHJlbmRlclRwbDpbInsldGhpcy5yZW5kZXJCb2R5KG91dCx2YWx1ZXMpO3RoaXMucmVuZGVyUGFkZGVyKG91dCx2YWx1ZXMpJX0iXSxkZWZhdWx0QW5jaG9yOiIxMDAlIixwYXJzZUFuY2hvclJFOi9eKHJ8cmlnaHR8Ynxib3R0b20pJC9pLGJlZ2luTGF5b3V0OmZ1bmN0aW9uKGMpe3ZhciBqPXRoaXMsYT0wLGcsayxlLGQsYixoO2ouY2FsbFBhcmVudChhcmd1bWVudHMpO2U9Yy5jaGlsZEl0ZW1zO2I9ZS5sZW5ndGg7Zm9yKGQ9MDtkPGI7KytkKXtrPWVbZF07Zz1rLnRhcmdldC5hbmNob3JTcGVjO2lmKGcpe2lmKGsud2lkdGhNb2RlbC5jYWxjdWxhdGVkJiZnLnJpZ2h0KXthfD0xfWlmKGsuaGVpZ2h0TW9kZWwuY2FsY3VsYXRlZCYmZy5ib3R0b20pe2F8PTJ9aWYoYT09Myl7YnJlYWt9fX1jLmFuY2hvckRpbWVuc2lvbnM9YTtpZighRXh0LnN1cHBvcnRzLlJpZ2h0TWFyZ2luJiYhai5yaWdodE1hcmdpbkNsZWFuZXJGbil7aD1jLnRhcmdldENvbnRleHQuZWw7ai5yaWdodE1hcmdpbkNsZWFuZXJGbj1FeHQuRWxlbWVudC5nZXRSaWdodE1hcmdpbkZpeENsZWFuZXIoaCk7aC5hZGRDbHMoRXh0LmJhc2VDU1NQcmVmaXgrImlubGluZS1jaGlsZHJlbiIpfX0sY2FsY3VsYXRlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMsYz1hLmdldENvbnRhaW5lclNpemUoYik7aWYoYi5hbmNob3JEaW1lbnNpb25zIT09Yi5zdGF0ZS5jYWxjdWxhdGVkQW5jaG9ycyl7YS5jYWxjdWxhdGVBbmNob3JzKGIsYyl9aWYoYi5oYXNEb21Qcm9wKCJjb250YWluZXJDaGlsZHJlbkRvbmUiKSl7aWYoIWMuZ290QWxsKXthLmRvbmU9ZmFsc2V9YS5jYWxjdWxhdGVDb250ZW50U2l6ZShiLGIuYW5jaG9yRGltZW5zaW9ucyk7aWYoYS5kb25lKXthLmNhbGN1bGF0ZU92ZXJmbG93KGIsYyxiLmFuY2hvckRpbWVuc2lvbnMpO3JldHVybn19YS5kb25lPWZhbHNlfSxjYWxjdWxhdGVBbmNob3JzOmZ1bmN0aW9uKGgsYSl7dmFyIHA9dGhpcyxsPWguY2hpbGRJdGVtcyxnPWwubGVuZ3RoLG89YS5nb3RIZWlnaHQsaj1hLmdvdFdpZHRoLGU9YS5oZWlnaHQsYz1hLndpZHRoLGI9aC5zdGF0ZSxxPShqPzE6MCl8KG8/MjowKSxtLHMsbixyLGssZDtiLmNhbGN1bGF0ZWRBbmNob3JzPShiLmNhbGN1bGF0ZWRBbmNob3JzfHwwKXxxO2ZvcihrPTA7azxnO2srKyl7cz1sW2tdO249cy5nZXRNYXJnaW5JbmZvKCk7bT1zLnRhcmdldC5hbmNob3JTcGVjO2lmKGomJnMud2lkdGhNb2RlbC5jYWxjdWxhdGVkKXtkPW0ucmlnaHQoYyktbi53aWR0aDtkPXAuYWRqdXN0V2lkdGhBbmNob3IoZCxzKTtzLnNldFdpZHRoKGQpfWlmKG8mJnMuaGVpZ2h0TW9kZWwuY2FsY3VsYXRlZCl7cj1tLmJvdHRvbShlKS1uLmhlaWdodDtyPXAuYWRqdXN0SGVpZ2h0QW5jaG9yKHIscyk7cy5zZXRIZWlnaHQocil9fX0sZmluaXNoZWRMYXlvdXQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5yaWdodE1hcmdpbkNsZWFuZXJGbjtpZihhKXtkZWxldGUgdGhpcy5yaWdodE1hcmdpbkNsZWFuZXJGbjtiLnRhcmdldENvbnRleHQuZWwucmVtb3ZlQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJpbmxpbmUtY2hpbGRyZW4iKTthKCl9fSxhbmNob3JGYWN0b3J5OntvZmZzZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBiK2F9fSxyYXRpbzpmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIE1hdGguZmxvb3IoYiphKX19LHN0YW5kYXJkOmZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYi1hfX19LHBhcnNlQW5jaG9yOmZ1bmN0aW9uKGMsZyxiKXtpZihjJiZjIT0ibm9uZSIpe3ZhciBkPXRoaXMuYW5jaG9yRmFjdG9yeSxlO2lmKHRoaXMucGFyc2VBbmNob3JSRS50ZXN0KGMpKXtyZXR1cm4gZC5zdGFuZGFyZChiLWcpfWlmKGMuaW5kZXhPZigiJSIpIT0tMSl7cmV0dXJuIGQucmF0aW8ocGFyc2VGbG9hdChjLnJlcGxhY2UoIiUiLCIiKSkqMC4wMSl9ZT1wYXJzZUludChjLDEwKTtpZighaXNOYU4oZSkpe3JldHVybiBkLm9mZnNldChlKX19cmV0dXJuIG51bGx9LGFkanVzdFdpZHRoQW5jaG9yOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIGJ9LGFkanVzdEhlaWdodEFuY2hvcjpmdW5jdGlvbihiLGEpe3JldHVybiBifSxjb25maWd1cmVJdGVtOmZ1bmN0aW9uKGcpe3ZhciBlPXRoaXMsYT1lLm93bmVyLGQ9Zy5hbmNob3IsYixjLGg7ZS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoIWcuYW5jaG9yJiZnLml0ZW1zJiYhRXh0LmlzTnVtYmVyKGcud2lkdGgpJiYhKEV4dC5pc0lFNiYmRXh0LmlzU3RyaWN0KSl7Zy5hbmNob3I9ZD1lLmRlZmF1bHRBbmNob3J9aWYoYS5hbmNob3JTaXplKXtpZih0eXBlb2YgYS5hbmNob3JTaXplPT0ibnVtYmVyIil7Yz1hLmFuY2hvclNpemV9ZWxzZXtjPWEuYW5jaG9yU2l6ZS53aWR0aDtoPWEuYW5jaG9yU2l6ZS5oZWlnaHR9fWVsc2V7Yz1hLmluaXRpYWxDb25maWcud2lkdGg7aD1hLmluaXRpYWxDb25maWcuaGVpZ2h0fWlmKGQpe2I9ZC5zcGxpdCgiICIpO2cuYW5jaG9yU3BlYz17cmlnaHQ6ZS5wYXJzZUFuY2hvcihiWzBdLGcuaW5pdGlhbENvbmZpZy53aWR0aCxjKSxib3R0b206ZS5wYXJzZUFuY2hvcihiWzFdLGcuaW5pdGlhbENvbmZpZy5oZWlnaHQsaCl9fX0sc2l6ZVBvbGljeTp7IiI6e3NldHNXaWR0aDowLHNldHNIZWlnaHQ6MH0sYjp7c2V0c1dpZHRoOjAsc2V0c0hlaWdodDoxfSxyOnsiIjp7c2V0c1dpZHRoOjEsc2V0c0hlaWdodDowfSxiOntzZXRzV2lkdGg6MSxzZXRzSGVpZ2h0OjF9fX0sZ2V0SXRlbVNpemVQb2xpY3k6ZnVuY3Rpb24oYyl7dmFyIGU9Yy5hbmNob3JTcGVjLGE9IiIsZD10aGlzLnNpemVQb2xpY3ksYjtpZihlKXtiPXRoaXMub3duZXIuZ2V0U2l6ZU1vZGVsKCk7aWYoZS5yaWdodCYmIWIud2lkdGguc2hyaW5rV3JhcCl7ZD1kLnJ9aWYoZS5ib3R0b20mJiFiLmhlaWdodC5zaHJpbmtXcmFwKXthPSJiIn19cmV0dXJuIGRbYV19fSk7RXh0LmRlZmluZSgiRXh0LndpbmRvdy5NZXNzYWdlQm94Iix7ZXh0ZW5kOiJFeHQud2luZG93LldpbmRvdyIscmVxdWlyZXM6WyJFeHQudG9vbGJhci5Ub29sYmFyIiwiRXh0LmZvcm0uZmllbGQuVGV4dCIsIkV4dC5mb3JtLmZpZWxkLlRleHRBcmVhIiwiRXh0LmZvcm0uZmllbGQuRGlzcGxheSIsIkV4dC5idXR0b24uQnV0dG9uIiwiRXh0LmxheW91dC5jb250YWluZXIuQW5jaG9yIiwiRXh0LmxheW91dC5jb250YWluZXIuSEJveCIsIkV4dC5Qcm9ncmVzc0JhciJdLGFsaWFzOiJ3aWRnZXQubWVzc2FnZWJveCIsT0s6MSxZRVM6MixOTzo0LENBTkNFTDo4LE9LQ0FOQ0VMOjksWUVTTk86NixZRVNOT0NBTkNFTDoxNCxJTkZPOkV4dC5iYXNlQ1NTUHJlZml4KyJtZXNzYWdlLWJveC1pbmZvIixXQVJOSU5HOkV4dC5iYXNlQ1NTUHJlZml4KyJtZXNzYWdlLWJveC13YXJuaW5nIixRVUVTVElPTjpFeHQuYmFzZUNTU1ByZWZpeCsibWVzc2FnZS1ib3gtcXVlc3Rpb24iLEVSUk9SOkV4dC5iYXNlQ1NTUHJlZml4KyJtZXNzYWdlLWJveC1lcnJvciIsaGlkZU1vZGU6Im9mZnNldHMiLGNsb3NlQWN0aW9uOiJoaWRlIixyZXNpemFibGU6ZmFsc2UsdGl0bGU6IiYjMTYwOyIsd2lkdGg6NjAwLGhlaWdodDo1MDAsbWluV2lkdGg6MjUwLG1heFdpZHRoOjYwMCxtaW5IZWlnaHQ6MTEwLG1heEhlaWdodDo1MDAsY29uc3RyYWluOnRydWUsY2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJtZXNzYWdlLWJveCIsbGF5b3V0Ont0eXBlOiJ2Ym94IixhbGlnbjoic3RyZXRjaCJ9LGRlZmF1bHRUZXh0SGVpZ2h0Ojc1LG1pblByb2dyZXNzV2lkdGg6MjUwLG1pblByb21wdFdpZHRoOjI1MCxidXR0b25UZXh0OntvazoiT0siLHllczoiWWVzIixubzoiTm8iLGNhbmNlbDoiQ2FuY2VsIn0sYnV0dG9uSWRzOlsib2siLCJ5ZXMiLCJubyIsImNhbmNlbCJdLHRpdGxlVGV4dDp7Y29uZmlybToiQ29uZmlybSIscHJvbXB0OiJQcm9tcHQiLHdhaXQ6IkxvYWRpbmcuLi4iLGFsZXJ0OiJBdHRlbnRpb24ifSxpY29uSGVpZ2h0OjM1LG1ha2VCdXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5idXR0b25JZHNbYV07cmV0dXJuIG5ldyBFeHQuYnV0dG9uLkJ1dHRvbih7aGFuZGxlcjp0aGlzLmJ0bkNhbGxiYWNrLGl0ZW1JZDpiLHNjb3BlOnRoaXMsdGV4dDp0aGlzLmJ1dHRvblRleHRbYl0sbWluV2lkdGg6NzV9KX0sYnRuQ2FsbGJhY2s6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjLGQ7aWYoYi5jZmcucHJvbXB0fHxiLmNmZy5tdWx0aWxpbmUpe2lmKGIuY2ZnLm11bHRpbGluZSl7ZD1iLnRleHRBcmVhfWVsc2V7ZD1iLnRleHRGaWVsZH1jPWQuZ2V0VmFsdWUoKTtkLnJlc2V0KCl9YS5ibHVyKCk7Yi5oaWRlKCk7Yi51c2VyQ2FsbGJhY2soYS5pdGVtSWQsYyxiLmNmZyl9LGhpZGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuZGQuZW5kRHJhZygpO2EucHJvZ3Jlc3NCYXIucmVzZXQoKTthLnJlbW92ZUNscyhhLmNmZy5jbHMpO2EuY2FsbFBhcmVudChhcmd1bWVudHMpfSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxhPWUuaWQsYyxiLGQ7ZS50aXRsZT0iJiMxNjA7IjtlLnRvcENvbnRhaW5lcj1uZXcgRXh0LmNvbnRhaW5lci5Db250YWluZXIoe2xheW91dDoiaGJveCIsc3R5bGU6e3BhZGRpbmc6IjEwcHgiLG92ZXJmbG93OiJoaWRkZW4ifSxpdGVtczpbZS5pY29uQ29tcG9uZW50PW5ldyBFeHQuQ29tcG9uZW50KHtjbHM6ZS5iYXNlQ2xzKyItaWNvbiIsd2lkdGg6NTAsaGVpZ2h0OmUuaWNvbkhlaWdodH0pLGUucHJvbXB0Q29udGFpbmVyPW5ldyBFeHQuY29udGFpbmVyLkNvbnRhaW5lcih7ZmxleDoxLGxheW91dDp7dHlwZToiYW5jaG9yIn0saXRlbXM6W2UubXNnPW5ldyBFeHQuZm9ybS5maWVsZC5EaXNwbGF5KHtpZDphKyItZGlzcGxheWZpZWxkIixjbHM6ZS5iYXNlQ2xzKyItdGV4dCJ9KSxlLnRleHRGaWVsZD1uZXcgRXh0LmZvcm0uZmllbGQuVGV4dCh7aWQ6YSsiLXRlc3RmaWVsZCIsYW5jaG9yOiIxMDAlIixlbmFibGVLZXlFdmVudHM6dHJ1ZSxsaXN0ZW5lcnM6e2tleWRvd246ZS5vblByb21wdEtleSxzY29wZTplfX0pLGUudGV4dEFyZWE9bmV3IEV4dC5mb3JtLmZpZWxkLlRleHRBcmVhKHtpZDphKyItdGV4dGFyZWEiLGFuY2hvcjoiMTAwJSIsaGVpZ2h0Ojc1fSldfSldfSk7ZS5wcm9ncmVzc0Jhcj1uZXcgRXh0LlByb2dyZXNzQmFyKHtpZDphKyItcHJvZ3Jlc3NiYXIiLG1hcmdpbnM6IjAgMTAgMCAxMCJ9KTtlLml0ZW1zPVtlLnRvcENvbnRhaW5lcixlLnByb2dyZXNzQmFyXTtlLm1zZ0J1dHRvbnM9W107Zm9yKGM9MDtjPDQ7YysrKXtiPWUubWFrZUJ1dHRvbihjKTtlLm1zZ0J1dHRvbnNbYi5pdGVtSWRdPWI7ZS5tc2dCdXR0b25zLnB1c2goYil9ZS5ib3R0b21UYj1uZXcgRXh0LnRvb2xiYXIuVG9vbGJhcih7aWQ6YSsiLXRvb2xiYXIiLHVpOiJmb290ZXIiLGRvY2s6ImJvdHRvbSIsbGF5b3V0OntwYWNrOiJjZW50ZXIifSxpdGVtczpbZS5tc2dCdXR0b25zWzBdLGUubXNnQnV0dG9uc1sxXSxlLm1zZ0J1dHRvbnNbMl0sZS5tc2dCdXR0b25zWzNdXX0pO2UuZG9ja2VkSXRlbXM9W2UuYm90dG9tVGJdO2Q9ZS5ib3R0b21UYi5nZXRMYXlvdXQoKTtkLmZpbmlzaGVkTGF5b3V0PUV4dC5GdW5jdGlvbi5jcmVhdGVJbnRlcmNlcHRvcihkLmZpbmlzaGVkTGF5b3V0LGZ1bmN0aW9uKGcpe2UudGJXaWR0aD1nLmdldFByb3AoImNvbnRlbnRXaWR0aCIpfSk7ZS5vbigiY2xvc2UiLGUub25DbG9zZSxlKTtlLmNhbGxQYXJlbnQoKX0sb25DbG9zZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaGVhZGVyLmNoaWxkKCJbdHlwZT1jbG9zZV0iKTthLml0ZW1JZD0iY2FuY2VsIjt0aGlzLmJ0bkNhbGxiYWNrKGEpO2RlbGV0ZSBhLml0ZW1JZH0sb25Qcm9tcHRLZXk6ZnVuY3Rpb24oYSxjKXt2YXIgYj10aGlzLGQ7aWYoYy5rZXlDb2RlPT09RXh0LkV2ZW50T2JqZWN0LlJFVFVSTnx8Yy5rZXlDb2RlPT09MTApe2lmKGIubXNnQnV0dG9ucy5vay5pc1Zpc2libGUoKSl7ZD10cnVlO2IubXNnQnV0dG9ucy5vay5oYW5kbGVyLmNhbGwoYixiLm1zZ0J1dHRvbnMub2spfWVsc2V7aWYoYi5tc2dCdXR0b25zLnllcy5pc1Zpc2libGUoKSl7Yi5tc2dCdXR0b25zLnllcy5oYW5kbGVyLmNhbGwoYixiLm1zZ0J1dHRvbnMueWVzKTtkPXRydWV9fWlmKGQpe2IudGV4dEZpZWxkLmJsdXIoKX19fSxyZWNvbmZpZ3VyZTpmdW5jdGlvbihhKXt2YXIgZD10aGlzLGM9MCxoPXRydWUsZz1kLm1heFdpZHRoLGU9ZC5idXR0b25UZXh0LGI7ZC51cGRhdGVCdXR0b25UZXh0KCk7YT1hfHx7fTtkLmNmZz1hO2lmKGEud2lkdGgpe2c9YS53aWR0aH1kZWxldGUgZC5kZWZhdWx0Rm9jdXM7ZC5hbmltYXRlVGFyZ2V0PWEuYW5pbWF0ZVRhcmdldHx8dW5kZWZpbmVkO2QubW9kYWw9YS5tb2RhbCE9PWZhbHNlO2lmKGEudGl0bGUpe2Quc2V0VGl0bGUoYS50aXRsZXx8IiYjMTYwOyIpfWlmKEV4dC5pc09iamVjdChhLmJ1dHRvbnMpKXtkLmJ1dHRvblRleHQ9YS5idXR0b25zO2M9MH1lbHNle2QuYnV0dG9uVGV4dD1hLmJ1dHRvblRleHR8fGQuYnV0dG9uVGV4dDtjPUV4dC5pc051bWJlcihhLmJ1dHRvbnMpP2EuYnV0dG9uczowfWM9Y3xkLnVwZGF0ZUJ1dHRvblRleHQoKTtkLmJ1dHRvblRleHQ9ZTtFeHQuc3VzcGVuZExheW91dHMoKTtkLmhpZGRlbj1mYWxzZTtpZighZC5yZW5kZXJlZCl7ZC53aWR0aD1nO2QucmVuZGVyKEV4dC5nZXRCb2R5KCkpfWVsc2V7ZC5zZXRTaXplKGcsZC5tYXhIZWlnaHQpfWQuY2xvc2FibGU9YS5jbG9zYWJsZSYmIWEud2FpdDtkLmhlYWRlci5jaGlsZCgiW3R5cGU9Y2xvc2VdIikuc2V0VmlzaWJsZShhLmNsb3NhYmxlIT09ZmFsc2UpO2lmKCFhLnRpdGxlJiYhZC5jbG9zYWJsZSl7ZC5oZWFkZXIuaGlkZSgpfWVsc2V7ZC5oZWFkZXIuc2hvdygpfWQubGl2ZURyYWc9IWEucHJveHlEcmFnO2QudXNlckNhbGxiYWNrPUV4dC5GdW5jdGlvbi5iaW5kKGEuY2FsbGJhY2t8fGEuZm58fEV4dC5lbXB0eUZuLGEuc2NvcGV8fEV4dC5nbG9iYWwpO2Quc2V0SWNvbihhLmljb24pO2lmKGEubXNnKXtkLm1zZy5zZXRWYWx1ZShhLm1zZyk7ZC5tc2cuc2hvdygpfWVsc2V7ZC5tc2cuaGlkZSgpfUV4dC5yZXN1bWVMYXlvdXRzKHRydWUpO0V4dC5zdXNwZW5kTGF5b3V0cygpO2lmKGEucHJvbXB0fHxhLm11bHRpbGluZSl7ZC5tdWx0aWxpbmU9YS5tdWx0aWxpbmU7aWYoYS5tdWx0aWxpbmUpe2QudGV4dEFyZWEuc2V0VmFsdWUoYS52YWx1ZSk7ZC50ZXh0QXJlYS5zZXRIZWlnaHQoYS5kZWZhdWx0VGV4dEhlaWdodHx8ZC5kZWZhdWx0VGV4dEhlaWdodCk7ZC50ZXh0QXJlYS5zaG93KCk7ZC50ZXh0RmllbGQuaGlkZSgpO2QuZGVmYXVsdEZvY3VzPWQudGV4dEFyZWF9ZWxzZXtkLnRleHRGaWVsZC5zZXRWYWx1ZShhLnZhbHVlKTtkLnRleHRBcmVhLmhpZGUoKTtkLnRleHRGaWVsZC5zaG93KCk7ZC5kZWZhdWx0Rm9jdXM9ZC50ZXh0RmllbGR9fWVsc2V7ZC50ZXh0QXJlYS5oaWRlKCk7ZC50ZXh0RmllbGQuaGlkZSgpfWlmKGEucHJvZ3Jlc3N8fGEud2FpdCl7ZC5wcm9ncmVzc0Jhci5zaG93KCk7ZC51cGRhdGVQcm9ncmVzcygwLGEucHJvZ3Jlc3NUZXh0KTtpZihhLndhaXQ9PT10cnVlKXtkLnByb2dyZXNzQmFyLndhaXQoYS53YWl0Q29uZmlnKX19ZWxzZXtkLnByb2dyZXNzQmFyLmhpZGUoKX1mb3IoYj0wO2I8NDtiKyspe2lmKGMmTWF0aC5wb3coMixiKSl7aWYoIWQuZGVmYXVsdEZvY3VzKXtkLmRlZmF1bHRGb2N1cz1kLm1zZ0J1dHRvbnNbYl19ZC5tc2dCdXR0b25zW2JdLnNob3coKTtoPWZhbHNlfWVsc2V7ZC5tc2dCdXR0b25zW2JdLmhpZGUoKX19aWYoaCl7ZC5ib3R0b21UYi5oaWRlKCl9ZWxzZXtkLmJvdHRvbVRiLnNob3coKX1FeHQucmVzdW1lTGF5b3V0cyh0cnVlKX0sdXBkYXRlQnV0dG9uVGV4dDpmdW5jdGlvbigpe3ZhciBkPXRoaXMsYz1kLmJ1dHRvblRleHQsYj0wLGUsYTtmb3IoZSBpbiBjKXtpZihjLmhhc093blByb3BlcnR5KGUpKXthPWQubXNnQnV0dG9uc1tlXTtpZihhKXtpZihkLmNmZyYmZC5jZmcuYnV0dG9uVGV4dCl7Yj1ifE1hdGgucG93KDIsRXh0LkFycmF5LmluZGV4T2YoZC5idXR0b25JZHMsZSkpfWlmKGEudGV4dCE9Y1tlXSl7YS5zZXRUZXh0KGNbZV0pfX19fXJldHVybiBifSxzaG93OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5yZWNvbmZpZ3VyZShhKTtiLmFkZENscyhhLmNscyk7Yi5kb0F1dG9TaXplKCk7Yi5oaWRkZW49dHJ1ZTtiLmNhbGxQYXJlbnQoKTtyZXR1cm4gYn0sb25TaG93OmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5jZW50ZXIoKX0sZG9BdXRvU2l6ZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMsZT1kLmhlYWRlci5yZW5kZXJlZCYmZC5oZWFkZXIuaXNWaXNpYmxlKCksYz1kLmJvdHRvbVRiLnJlbmRlcmVkJiZkLmJvdHRvbVRiLmlzVmlzaWJsZSgpLGIsYTtpZighRXh0LmlzRGVmaW5lZChkLmZyYW1lV2lkdGgpKXtkLmZyYW1lV2lkdGg9ZC5lbC5nZXRXaWR0aCgpLWQuYm9keS5nZXRXaWR0aCgpfWQubWluV2lkdGg9ZC5jZmcubWluV2lkdGh8fEV4dC5nZXRDbGFzcyh0aGlzKS5wcm90b3R5cGUubWluV2lkdGg7Yj1NYXRoLm1heChlP2QuaGVhZGVyLmdldE1pbldpZHRoKCk6MCxkLmNmZy53aWR0aHx8ZC5tc2cuZ2V0V2lkdGgoKStkLmljb25Db21wb25lbnQuZ2V0V2lkdGgoKSsyNSwoYz9kLnRiV2lkdGg6MCkpO2E9KGU/ZC5oZWFkZXIuZ2V0SGVpZ2h0KCk6MCkrZC50b3BDb250YWluZXIuZ2V0SGVpZ2h0KCkrZC5wcm9ncmVzc0Jhci5nZXRIZWlnaHQoKSsoYz9kLmJvdHRvbVRiLmdldEhlaWdodCgpK2QuYm90dG9tVGIuZWwuZ2V0TWFyZ2luKCJ0YiIpOjApO2Quc2V0U2l6ZShiK2QuZnJhbWVXaWR0aCxhK2QuZnJhbWVXaWR0aCk7cmV0dXJuIGR9LHVwZGF0ZVRleHQ6ZnVuY3Rpb24oYSl7dGhpcy5tc2cuc2V0VmFsdWUoYSk7cmV0dXJuIHRoaXMuZG9BdXRvU2l6ZSh0cnVlKX0sc2V0SWNvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2IuaWNvbkNvbXBvbmVudC5yZW1vdmVDbHMoYi5tZXNzYWdlSWNvbkNscyk7aWYoYSl7Yi5pY29uQ29tcG9uZW50LnNob3coKTtiLmljb25Db21wb25lbnQuYWRkQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJkbGctaWNvbiIpO2IuaWNvbkNvbXBvbmVudC5hZGRDbHMoYi5tZXNzYWdlSWNvbkNscz1hKX1lbHNle2IuaWNvbkNvbXBvbmVudC5yZW1vdmVDbHMoRXh0LmJhc2VDU1NQcmVmaXgrImRsZy1pY29uIik7Yi5pY29uQ29tcG9uZW50LmhpZGUoKX1yZXR1cm4gYn0sdXBkYXRlUHJvZ3Jlc3M6ZnVuY3Rpb24oYixhLGMpe3RoaXMucHJvZ3Jlc3NCYXIudXBkYXRlUHJvZ3Jlc3MoYixhKTtpZihjKXt0aGlzLnVwZGF0ZVRleHQoYyl9cmV0dXJuIHRoaXN9LG9uRXNjOmZ1bmN0aW9uKCl7aWYodGhpcy5jbG9zYWJsZSE9PWZhbHNlKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX19LGNvbmZpcm06ZnVuY3Rpb24oYSxkLGMsYil7aWYoRXh0LmlzU3RyaW5nKGEpKXthPXt0aXRsZTphLGljb246dGhpcy5RVUVTVElPTixtc2c6ZCxidXR0b25zOnRoaXMuWUVTTk8sY2FsbGJhY2s6YyxzY29wZTpifX1yZXR1cm4gdGhpcy5zaG93KGEpfSxwcm9tcHQ6ZnVuY3Rpb24oYixnLGQsYyxhLGUpe2lmKEV4dC5pc1N0cmluZyhiKSl7Yj17cHJvbXB0OnRydWUsdGl0bGU6YixtaW5XaWR0aDp0aGlzLm1pblByb21wdFdpZHRoLG1zZzpnLGJ1dHRvbnM6dGhpcy5PS0NBTkNFTCxjYWxsYmFjazpkLHNjb3BlOmMsbXVsdGlsaW5lOmEsdmFsdWU6ZX19cmV0dXJuIHRoaXMuc2hvdyhiKX0sd2FpdDpmdW5jdGlvbihhLGMsYil7aWYoRXh0LmlzU3RyaW5nKGEpKXthPXt0aXRsZTpjLG1zZzphLGNsb3NhYmxlOmZhbHNlLHdhaXQ6dHJ1ZSxtb2RhbDp0cnVlLG1pbldpZHRoOnRoaXMubWluUHJvZ3Jlc3NXaWR0aCx3YWl0Q29uZmlnOmJ9fXJldHVybiB0aGlzLnNob3coYSl9LGFsZXJ0OmZ1bmN0aW9uKGEsZCxjLGIpe2lmKEV4dC5pc1N0cmluZyhhKSl7YT17dGl0bGU6YSxtc2c6ZCxidXR0b25zOnRoaXMuT0ssZm46YyxzY29wZTpiLG1pbldpZHRoOnRoaXMubWluV2lkdGh9fXJldHVybiB0aGlzLnNob3coYSl9LHByb2dyZXNzOmZ1bmN0aW9uKGEsYyxiKXtpZihFeHQuaXNTdHJpbmcoYSkpe2E9e3RpdGxlOmEsbXNnOmMscHJvZ3Jlc3M6dHJ1ZSxwcm9ncmVzc1RleHQ6Yn19cmV0dXJuIHRoaXMuc2hvdyhhKX19LGZ1bmN0aW9uKCl7RXh0Lk1lc3NhZ2VCb3g9RXh0Lk1zZz1uZXcgdGhpcygpfSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uQmFzaWMiLHtleHRlbmQ6IkV4dC51dGlsLk9ic2VydmFibGUiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmZvcm0uQmFzaWNGb3JtIixyZXF1aXJlczpbIkV4dC51dGlsLk1peGVkQ29sbGVjdGlvbiIsIkV4dC5mb3JtLmFjdGlvbi5Mb2FkIiwiRXh0LmZvcm0uYWN0aW9uLlN1Ym1pdCIsIkV4dC53aW5kb3cuTWVzc2FnZUJveCIsIkV4dC5kYXRhLkVycm9ycyIsIkV4dC51dGlsLkRlbGF5ZWRUYXNrIl0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgZT10aGlzLGc9ZS5vbkl0ZW1BZGRPclJlbW92ZSxkLGM7ZS5vd25lcj1hO2UubW9uKGEse2FkZDpnLHJlbW92ZTpnLHNjb3BlOmV9KTtFeHQuYXBwbHkoZSxiKTtpZihFeHQuaXNTdHJpbmcoZS5wYXJhbU9yZGVyKSl7ZS5wYXJhbU9yZGVyPWUucGFyYW1PcmRlci5zcGxpdCgvW1xzLHxdLyl9aWYoZS5hcGkpe2Q9ZS5hcGk9RXh0LmFwcGx5KHt9LGUuYXBpKTtmb3IoYyBpbiBkKXtpZihkLmhhc093blByb3BlcnR5KGMpKXtkW2NdPUV4dC5kaXJlY3QuTWFuYWdlci5wYXJzZU1ldGhvZChkW2NdKX19fWUuY2hlY2tWYWxpZGl0eVRhc2s9bmV3IEV4dC51dGlsLkRlbGF5ZWRUYXNrKGUuY2hlY2tWYWxpZGl0eSxlKTtlLmFkZEV2ZW50cygiYmVmb3JlYWN0aW9uIiwiYWN0aW9uZmFpbGVkIiwiYWN0aW9uY29tcGxldGUiLCJ2YWxpZGl0eWNoYW5nZSIsImRpcnR5Y2hhbmdlIik7ZS5jYWxsUGFyZW50KCl9LGluaXRpYWxpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuaW5pdGlhbGl6ZWQ9dHJ1ZTthLm9uVmFsaWRpdHlDaGFuZ2UoIWEuaGFzSW52YWxpZEZpZWxkKCkpfSx0aW1lb3V0OjMwLHBhcmFtc0FzSGFzaDpmYWxzZSx3YWl0VGl0bGU6IlBsZWFzZSBXYWl0Li4uIix0cmFja1Jlc2V0T25Mb2FkOmZhbHNlLHdhc0RpcnR5OmZhbHNlLGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyTGlzdGVuZXJzKCk7dGhpcy5jaGVja1ZhbGlkaXR5VGFzay5jYW5jZWwoKX0sb25JdGVtQWRkT3JSZW1vdmU6ZnVuY3Rpb24oYyxnKXt2YXIgZD10aGlzLGU9ISFnLm93bmVyQ3QsYj1nLmlzQ29udGFpbmVyO2Z1bmN0aW9uIGEoaCl7ZFtlPyJtb24iOiJtdW4iXShoLHt2YWxpZGl0eWNoYW5nZTpkLmNoZWNrVmFsaWRpdHksZGlydHljaGFuZ2U6ZC5jaGVja0RpcnR5LHNjb3BlOmQsYnVmZmVyOjEwMH0pO2RlbGV0ZSBkLl9maWVsZHN9aWYoZy5pc0Zvcm1GaWVsZCl7YShnKX1lbHNle2lmKGIpe2lmKGcuaXNEZXN0cm95ZWR8fGcuZGVzdHJveWluZyl7ZGVsZXRlIGQuX2ZpZWxkc31lbHNle0V4dC5BcnJheS5mb3JFYWNoKGcucXVlcnkoIltpc0Zvcm1GaWVsZF0iKSxhKX19fWRlbGV0ZSB0aGlzLl9ib3VuZEl0ZW1zO2lmKGQuaW5pdGlhbGl6ZWQpe2QuY2hlY2tWYWxpZGl0eVRhc2suZGVsYXkoMTApfX0sZ2V0RmllbGRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5fZmllbGRzO2lmKCFhKXthPXRoaXMuX2ZpZWxkcz1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKCk7YS5hZGRBbGwodGhpcy5vd25lci5xdWVyeSgiW2lzRm9ybUZpZWxkXSIpKX1yZXR1cm4gYX0sZ2V0Qm91bmRJdGVtczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX2JvdW5kSXRlbXM7aWYoIWF8fGEuZ2V0Q291bnQoKT09PTApe2E9dGhpcy5fYm91bmRJdGVtcz1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKCk7YS5hZGRBbGwodGhpcy5vd25lci5xdWVyeSgiW2Zvcm1CaW5kXSIpKX1yZXR1cm4gYX0saGFzSW52YWxpZEZpZWxkOmZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5nZXRGaWVsZHMoKS5maW5kQnkoZnVuY3Rpb24oYyl7dmFyIGE9Yy5wcmV2ZW50TWFyayxiO2MucHJldmVudE1hcms9dHJ1ZTtiPWMuaXNWYWxpZCgpO2MucHJldmVudE1hcms9YTtyZXR1cm4gIWJ9KX0saXNWYWxpZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYjtFeHQuc3VzcGVuZExheW91dHMoKTtiPWEuZ2V0RmllbGRzKCkuZmlsdGVyQnkoZnVuY3Rpb24oYyl7cmV0dXJuICFjLnZhbGlkYXRlKCl9KTtFeHQucmVzdW1lTGF5b3V0cyh0cnVlKTtyZXR1cm4gYi5sZW5ndGg8MX0sY2hlY2tWYWxpZGl0eTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT0hYi5oYXNJbnZhbGlkRmllbGQoKTtpZihhIT09Yi53YXNWYWxpZCl7Yi5vblZhbGlkaXR5Q2hhbmdlKGEpO2IuZmlyZUV2ZW50KCJ2YWxpZGl0eWNoYW5nZSIsYixhKTtiLndhc1ZhbGlkPWF9fSxvblZhbGlkaXR5Q2hhbmdlOmZ1bmN0aW9uKGcpe3ZhciBkPXRoaXMuZ2V0Qm91bmRJdGVtcygpLGIsYyxhLGU7aWYoZCl7Yj1kLml0ZW1zO2E9Yi5sZW5ndGg7Zm9yKGM9MDtjPGE7YysrKXtlPWJbY107aWYoZS5kaXNhYmxlZD09PWcpe2Uuc2V0RGlzYWJsZWQoIWcpfX19fSxpc0RpcnR5OmZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5nZXRGaWVsZHMoKS5maW5kQnkoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaXNEaXJ0eSgpfSl9LGNoZWNrRGlydHk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmlzRGlydHkoKTtpZihhIT09dGhpcy53YXNEaXJ0eSl7dGhpcy5maXJlRXZlbnQoImRpcnR5Y2hhbmdlIix0aGlzLGEpO3RoaXMud2FzRGlydHk9YX19LGhhc1VwbG9hZDpmdW5jdGlvbigpe3JldHVybiAhIXRoaXMuZ2V0RmllbGRzKCkuZmluZEJ5KGZ1bmN0aW9uKGEpe3JldHVybiBhLmlzRmlsZVVwbG9hZCgpfSl9LGRvQWN0aW9uOmZ1bmN0aW9uKGIsYSl7aWYoRXh0LmlzU3RyaW5nKGIpKXtiPUV4dC5DbGFzc01hbmFnZXIuaW5zdGFudGlhdGVCeUFsaWFzKCJmb3JtYWN0aW9uLiIrYixFeHQuYXBwbHkoe30sYSx7Zm9ybTp0aGlzfSkpfWlmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVhY3Rpb24iLHRoaXMsYikhPT1mYWxzZSl7dGhpcy5iZWZvcmVBY3Rpb24oYik7RXh0LmRlZmVyKGIucnVuLDEwMCxiKX1yZXR1cm4gdGhpc30sc3VibWl0OmZ1bmN0aW9uKGEpe2E9YXx8e307dmFyIGI9dGhpcyxjO2lmKGEuc3RhbmRhcmRTdWJtaXR8fGIuc3RhbmRhcmRTdWJtaXQpe2M9InN0YW5kYXJkc3VibWl0In1lbHNle2M9Yi5hcGk/ImRpcmVjdHN1Ym1pdCI6InN1Ym1pdCJ9cmV0dXJuIGIuZG9BY3Rpb24oYyxhKX0sbG9hZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kb0FjdGlvbih0aGlzLmFwaT8iZGlyZWN0bG9hZCI6ImxvYWQiLGEpfSx1cGRhdGVSZWNvcmQ6ZnVuY3Rpb24oYyl7Yz1jfHx0aGlzLl9yZWNvcmQ7dmFyIGI9Yy5maWVsZHMuaXRlbXMsZD10aGlzLmdldEZpZWxkVmFsdWVzKCksaD17fSxnPTAsYT1iLmxlbmd0aCxlO2Zvcig7ZzxhOysrZyl7ZT1iW2ddLm5hbWU7aWYoZC5oYXNPd25Qcm9wZXJ0eShlKSl7aFtlXT1kW2VdfX1jLmJlZ2luRWRpdCgpO2Muc2V0KGgpO2MuZW5kRWRpdCgpO3JldHVybiB0aGlzfSxsb2FkUmVjb3JkOmZ1bmN0aW9uKGEpe3RoaXMuX3JlY29yZD1hO3JldHVybiB0aGlzLnNldFZhbHVlcyhhLmRhdGEpfSxnZXRSZWNvcmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVjb3JkfSxiZWZvcmVBY3Rpb246ZnVuY3Rpb24oZSl7dmFyIGI9ZS53YWl0TXNnLGQ9RXh0LmJhc2VDU1NQcmVmaXgrIm1hc2stbG9hZGluZyIsYT10aGlzLmdldEZpZWxkcygpLml0ZW1zLGMsaT1hLmxlbmd0aCxnLGg7Zm9yKGM9MDtjPGk7YysrKXtnPWFbY107aWYoZy5pc0Zvcm1GaWVsZCYmZy5zeW5jVmFsdWUpe2cuc3luY1ZhbHVlKCl9fWlmKGIpe2g9dGhpcy53YWl0TXNnVGFyZ2V0O2lmKGg9PT10cnVlKXt0aGlzLm93bmVyLmVsLm1hc2soYixkKX1lbHNle2lmKGgpe2g9dGhpcy53YWl0TXNnVGFyZ2V0PUV4dC5nZXQoaCk7aC5tYXNrKGIsZCl9ZWxzZXtFeHQuTWVzc2FnZUJveC53YWl0KGIsZS53YWl0VGl0bGV8fHRoaXMud2FpdFRpdGxlKX19fX0sYWZ0ZXJBY3Rpb246ZnVuY3Rpb24oYixkKXtpZihiLndhaXRNc2cpe3ZhciBhPUV4dC5NZXNzYWdlQm94LGM9dGhpcy53YWl0TXNnVGFyZ2V0O2lmKGM9PT10cnVlKXt0aGlzLm93bmVyLmVsLnVubWFzaygpfWVsc2V7aWYoYyl7Yy51bm1hc2soKX1lbHNle2Euc3VzcGVuZEV2ZW50cygpO2EuaGlkZSgpO2EucmVzdW1lRXZlbnRzKCl9fX1pZihkKXtpZihiLnJlc2V0KXt0aGlzLnJlc2V0KCl9RXh0LmNhbGxiYWNrKGIuc3VjY2VzcyxiLnNjb3BlfHxiLFt0aGlzLGJdKTt0aGlzLmZpcmVFdmVudCgiYWN0aW9uY29tcGxldGUiLHRoaXMsYil9ZWxzZXtFeHQuY2FsbGJhY2soYi5mYWlsdXJlLGIuc2NvcGV8fGIsW3RoaXMsYl0pO3RoaXMuZmlyZUV2ZW50KCJhY3Rpb25mYWlsZWQiLHRoaXMsYil9fSxmaW5kRmllbGQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0RmllbGRzKCkuZmluZEJ5KGZ1bmN0aW9uKGIpe3JldHVybiBiLmlkPT09YXx8Yi5nZXROYW1lKCk9PT1hfSl9LG1hcmtJbnZhbGlkOmZ1bmN0aW9uKGope3ZhciBkPXRoaXMsaCxhLGIsZyxjO2Z1bmN0aW9uIGkoZSxsKXt2YXIgaz1kLmZpbmRGaWVsZChlKTtpZihrKXtrLm1hcmtJbnZhbGlkKGwpfX1pZihFeHQuaXNBcnJheShqKSl7YT1qLmxlbmd0aDtmb3IoaD0wO2g8YTtoKyspe2I9altoXTtpKGIuaWQsYi5tc2cpfX1lbHNle2lmKGogaW5zdGFuY2VvZiBFeHQuZGF0YS5FcnJvcnMpe2E9ai5pdGVtcy5sZW5ndGg7Zm9yKGg9MDtoPGE7aCsrKXtiPWouaXRlbXNbaF07aShiLmZpZWxkLGIubWVzc2FnZSl9fWVsc2V7Zm9yKGMgaW4gail7aWYoai5oYXNPd25Qcm9wZXJ0eShjKSl7Zz1qW2NdO2koYyxnLGopfX19fXJldHVybiB0aGlzfSxzZXRWYWx1ZXM6ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcyxhLGMsaCxnO2Z1bmN0aW9uIGUoaSxrKXt2YXIgaj1kLmZpbmRGaWVsZChpKTtpZihqKXtqLnNldFZhbHVlKGspO2lmKGQudHJhY2tSZXNldE9uTG9hZCl7ai5yZXNldE9yaWdpbmFsVmFsdWUoKX19fWlmKEV4dC5pc0FycmF5KGIpKXtjPWIubGVuZ3RoO2ZvcihhPTA7YTxjO2ErKyl7aD1iW2FdO2UoaC5pZCxoLnZhbHVlKX19ZWxzZXtFeHQuaXRlcmF0ZShiLGUpfXJldHVybiB0aGlzfSxnZXRWYWx1ZXM6ZnVuY3Rpb24oaSxqLG4sbCl7dmFyIG09e30sZz10aGlzLmdldEZpZWxkcygpLml0ZW1zLGgsbz1nLmxlbmd0aCxlPUV4dC5pc0FycmF5LGssZCxjLGIsYTtmb3IoaD0wO2g8bztoKyspe2s9Z1toXTtpZighanx8ay5pc0RpcnR5KCkpe2Q9a1tsPyJnZXRNb2RlbERhdGEiOiJnZXRTdWJtaXREYXRhIl0obik7aWYoRXh0LmlzT2JqZWN0KGQpKXtmb3IoYSBpbiBkKXtpZihkLmhhc093blByb3BlcnR5KGEpKXtjPWRbYV07aWYobiYmYz09PSIiKXtjPWsuZW1wdHlUZXh0fHwiIn1pZihtLmhhc093blByb3BlcnR5KGEpKXtiPW1bYV07aWYoIWUoYikpe2I9bVthXT1bYl19aWYoZShjKSl7bVthXT1tW2FdPWIuY29uY2F0KGMpfWVsc2V7Yi5wdXNoKGMpfX1lbHNle21bYV09Y319fX19fWlmKGkpe209RXh0Lk9iamVjdC50b1F1ZXJ5U3RyaW5nKG0pfXJldHVybiBtfSxnZXRGaWVsZFZhbHVlczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRWYWx1ZXMoZmFsc2UsYSxmYWxzZSx0cnVlKX0sY2xlYXJJbnZhbGlkOmZ1bmN0aW9uKCl7RXh0LnN1c3BlbmRMYXlvdXRzKCk7dmFyIGI9dGhpcyxhPWIuZ2V0RmllbGRzKCkuaXRlbXMsYyxkPWEubGVuZ3RoO2ZvcihjPTA7YzxkO2MrKyl7YVtjXS5jbGVhckludmFsaWQoKX1FeHQucmVzdW1lTGF5b3V0cyh0cnVlKTtyZXR1cm4gYn0scmVzZXQ6ZnVuY3Rpb24oKXtFeHQuc3VzcGVuZExheW91dHMoKTt2YXIgYj10aGlzLGE9Yi5nZXRGaWVsZHMoKS5pdGVtcyxjLGQ9YS5sZW5ndGg7Zm9yKGM9MDtjPGQ7YysrKXthW2NdLnJlc2V0KCl9RXh0LnJlc3VtZUxheW91dHModHJ1ZSk7cmV0dXJuIGJ9LGFwcGx5VG9GaWVsZHM6ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcy5nZXRGaWVsZHMoKS5pdGVtcyxiLGQ9YS5sZW5ndGg7Zm9yKGI9MDtiPGQ7YisrKXtFeHQuYXBwbHkoYVtiXSxjKX1yZXR1cm4gdGhpc30sYXBwbHlJZlRvRmllbGRzOmZ1bmN0aW9uKGMpe3ZhciBhPXRoaXMuZ2V0RmllbGRzKCkuaXRlbXMsYixkPWEubGVuZ3RoO2ZvcihiPTA7YjxkO2IrKyl7RXh0LmFwcGx5SWYoYVtiXSxjKX1yZXR1cm4gdGhpc319KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbnRhaW5lci5DaGVja2JveEdyb3VwIix7ZXh0ZW5kOiJFeHQubGF5b3V0LmNvbnRhaW5lci5Db250YWluZXIiLGFsaWFzOlsibGF5b3V0LmNoZWNrYm94Z3JvdXAiXSxhdXRvRmxleDp0cnVlLHR5cGU6ImNoZWNrYm94Z3JvdXAiLGNoaWxkRWxzOlsiaW5uZXJDdCJdLHJlbmRlclRwbDpbJzx0YWJsZSBpZD0ie293bmVySWR9LWlubmVyQ3QiIHJvbGU9InByZXNlbnRhdGlvbiIgc3R5bGU9Int0YWJsZVN0eWxlfSI+PHRib2R5Pjx0cj4nLCc8dHBsIGZvcj0iY29sdW1ucyI+JywnPHRkIGNsYXNzPSJ7cGFyZW50LmNvbENsc30iIHZhbGlnbj0idG9wIiBzdHlsZT0ie3N0eWxlfSI+JywieyUgdGhpcy5yZW5kZXJDb2x1bW4ob3V0LHBhcmVudCx4aW5kZXgtMSkgJX0iLCI8L3RkPiIsIjwvdHBsPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLGxhc3RPd25lckl0ZW1zR2VuZXJhdGlvbjpudWxsLGJlZ2luTGF5b3V0OmZ1bmN0aW9uKGIpe3ZhciBrPXRoaXMsZSxkLGgsYSxqLGc9MCxtPTAsbD1rLmF1dG9GbGV4LGM9ay5pbm5lckN0LmRvbS5zdHlsZTtrLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtlPWsuY29sdW1uTm9kZXM7Yi5pbm5lckN0Q29udGV4dD1iLmdldEVsKCJpbm5lckN0IixrKTtpZighYi53aWR0aE1vZGVsLnNocmlua1dyYXApe2Q9ZS5sZW5ndGg7aWYoay5jb2x1bW5zQXJyYXkpe2ZvcihoPTA7aDxkO2grKyl7YT1rLm93bmVyLmNvbHVtbnNbaF07aWYoYTwxKXtnKz1hO20rK319Zm9yKGg9MDtoPGQ7aCsrKXthPWsub3duZXIuY29sdW1uc1toXTtpZihhPDEpe2o9KChhL2cpKjEwMCkrIiUifWVsc2V7aj1hKyJweCJ9ZVtoXS5zdHlsZS53aWR0aD1qfX1lbHNle2ZvcihoPTA7aDxkO2grKyl7aj1sPygxL2QqMTAwKSsiJSI6IiI7ZVtoXS5zdHlsZS53aWR0aD1qO20rK319aWYoIW0pe2MudGFibGVMYXlvdXQ9ImZpeGVkIjtjLndpZHRoPSIifWVsc2V7aWYobTxkKXtjLnRhYmxlTGF5b3V0PSJmaXhlZCI7Yy53aWR0aD0iMTAwJSJ9ZWxzZXtjLnRhYmxlTGF5b3V0PSJhdXRvIjtpZihsKXtjLndpZHRoPSIxMDAlIn1lbHNle2Mud2lkdGg9IiJ9fX19ZWxzZXtjLnRhYmxlTGF5b3V0PSJhdXRvIjtjLndpZHRoPSIifX0sY2FjaGVFbGVtZW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KCk7YS5yb3dFbD1hLmlubmVyQ3QuZG93bigidHIiKTthLmNvbHVtbk5vZGVzPWEucm93RWwuZG9tLmNoaWxkTm9kZXN9LGNhbGN1bGF0ZTpmdW5jdGlvbihoKXt2YXIgZT10aGlzLGMsYixhLGksZCxnO2lmKCFoLmdldERvbVByb3AoImNvbnRhaW5lckNoaWxkcmVuRG9uZSIpKXtlLmRvbmU9ZmFsc2V9ZWxzZXtjPWguaW5uZXJDdENvbnRleHQ7Yj1oLndpZHRoTW9kZWwuc2hyaW5rV3JhcDthPWguaGVpZ2h0TW9kZWwuc2hyaW5rV3JhcDtpPWF8fGI7ZD1jLmVsLmRvbTtnPWkmJmMuZ2V0UGFkZGluZ0luZm8oKTtpZihiKXtoLnNldENvbnRlbnRXaWR0aChkLm9mZnNldFdpZHRoK2cud2lkdGgsdHJ1ZSl9aWYoYSl7aC5zZXRDb250ZW50SGVpZ2h0KGQub2Zmc2V0SGVpZ2h0K2cuaGVpZ2h0LHRydWUpfX19LGRvUmVuZGVyQ29sdW1uOmZ1bmN0aW9uKGQsbCxnKXt2YXIgaT1sLiRsYXlvdXQsYz1pLm93bmVyLGU9bC5jb2x1bW5Db3VudCxoPWMuaXRlbXMuaXRlbXMsYj1oLmxlbmd0aCxtLGEsaixrLG47aWYoYy52ZXJ0aWNhbCl7aj1NYXRoLmNlaWwoYi9lKTthPWcqajtiPU1hdGgubWluKGIsYStqKTtrPTF9ZWxzZXthPWc7az1lfWZvcig7YTxiO2ErPWspe209aFthXTtpLmNvbmZpZ3VyZUl0ZW0obSk7bj1tLmdldFJlbmRlclRyZWUoKTtFeHQuRG9tSGVscGVyLmdlbmVyYXRlTWFya3VwKG4sZCl9fSxnZXRDb2x1bW5Db3VudDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLm93bmVyLGM9YS5jb2x1bW5zO2lmKGIuY29sdW1uc0FycmF5KXtyZXR1cm4gYy5sZW5ndGh9aWYoRXh0LmlzTnVtYmVyKGMpKXtyZXR1cm4gY31yZXR1cm4gYS5pdGVtcy5sZW5ndGh9LGdldEl0ZW1TaXplUG9saWN5OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmF1dG9TaXplUG9saWN5fSxnZXRSZW5kZXJEYXRhOmZ1bmN0aW9uKCl7dmFyIGs9dGhpcyxnPWsuY2FsbFBhcmVudCgpLGI9ay5vd25lcixoLGQ9ay5nZXRDb2x1bW5Db3VudCgpLGEsYyxqLGw9ay5hdXRvRmxleCxlPTAsbT0wO2lmKGsuY29sdW1uc0FycmF5KXtmb3IoaD0wO2g8ZDtoKyspe2E9ay5vd25lci5jb2x1bW5zW2hdO2lmKGE8MSl7ZSs9YTttKyt9fX1nLmNvbENscz1iLmdyb3VwQ2xzO2cuY29sdW1uQ291bnQ9ZDtnLmNvbHVtbnM9W107Zm9yKGg9MDtoPGQ7aCsrKXtjPShnLmNvbHVtbnNbaF09e30pO2lmKGsuY29sdW1uc0FycmF5KXthPWsub3duZXIuY29sdW1uc1toXTtpZihhPDEpe2o9KChhL2UpKjEwMCkrIiUifWVsc2V7aj1hKyJweCJ9Yy5zdHlsZT0id2lkdGg6IitqfWVsc2V7Yy5zdHlsZT0id2lkdGg6IisoMS9kKjEwMCkrIiUiO20rK319Zy50YWJsZVN0eWxlPSFtPyJ0YWJsZS1sYXlvdXQ6Zml4ZWQ7IjoobTxkKT8idGFibGUtbGF5b3V0OmZpeGVkO3dpZHRoOjEwMCUiOihsKT8idGFibGUtbGF5b3V0OmF1dG87d2lkdGg6MTAwJSI6InRhYmxlLWxheW91dDphdXRvOyI7cmV0dXJuIGd9LGluaXRMYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5vd25lcjtiLmNvbHVtbnNBcnJheT1FeHQuaXNBcnJheShhLmNvbHVtbnMpO2IuYXV0b0NvbHVtbnM9IWEuY29sdW1uc3x8YS5jb2x1bW5zPT09ImF1dG8iO2IudmVydGljYWw9YS52ZXJ0aWNhbDtiLmNhbGxQYXJlbnQoKX0saXNWYWxpZFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0cnVlfSxzZXR1cFJlbmRlclRwbDpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLnJlbmRlckNvbHVtbj10aGlzLmRvUmVuZGVyQ29sdW1ufSxyZW5kZXJDaGlsZHJlbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLm93bmVyLml0ZW1zLmdlbmVyYXRpb247aWYoYS5sYXN0T3duZXJJdGVtc0dlbmVyYXRpb24hPT1iKXthLmxhc3RPd25lckl0ZW1zR2VuZXJhdGlvbj1iO2EucmVuZGVySXRlbXMoYS5nZXRMYXlvdXRJdGVtcygpKX19LHJlbmRlckl0ZW1zOmZ1bmN0aW9uKGUpe3ZhciBnPXRoaXMsYT1lLmxlbmd0aCxiLGssaixkLGgsYztpZihhKXtFeHQuc3VzcGVuZExheW91dHMoKTtpZihnLmF1dG9Db2x1bW5zKXtnLmFkZE1pc3NpbmdDb2x1bW5zKGEpfWQ9Zy5jb2x1bW5Ob2Rlcy5sZW5ndGg7aj1NYXRoLmNlaWwoYS9kKTtmb3IoYj0wO2I8YTtiKyspe2s9ZVtiXTtoPWcuZ2V0UmVuZGVyUm93SW5kZXgoYixqLGQpO2M9Zy5nZXRSZW5kZXJDb2x1bW5JbmRleChiLGosZCk7aWYoIWsucmVuZGVyZWQpe2cucmVuZGVySXRlbShrLGgsYyl9ZWxzZXtpZighZy5pc0l0ZW1BdFBvc2l0aW9uKGssaCxjKSl7Zy5tb3ZlSXRlbShrLGgsYyl9fX1pZihnLmF1dG9Db2x1bW5zKXtnLnJlbW92ZUV4Y2VlZGluZ0NvbHVtbnMoYSl9RXh0LnJlc3VtZUxheW91dHModHJ1ZSl9fSxpc0l0ZW1BdFBvc2l0aW9uOmZ1bmN0aW9uKGIsYyxhKXtyZXR1cm4gYi5lbC5kb209PT10aGlzLmdldE5vZGVBdChjLGEpfSxnZXRSZW5kZXJDb2x1bW5JbmRleDpmdW5jdGlvbihiLGEsYyl7aWYodGhpcy52ZXJ0aWNhbCl7cmV0dXJuIE1hdGguZmxvb3IoYi9hKX1lbHNle3JldHVybiBiJWN9fSxnZXRSZW5kZXJSb3dJbmRleDpmdW5jdGlvbihiLGEsZCl7dmFyIGM9dGhpcztpZihjLnZlcnRpY2FsKXtyZXR1cm4gYiVhfWVsc2V7cmV0dXJuIE1hdGguZmxvb3IoYi9kKX19LGdldE5vZGVBdDpmdW5jdGlvbihiLGEpe3JldHVybiB0aGlzLmNvbHVtbk5vZGVzW2FdLmNoaWxkTm9kZXNbYl19LGFkZE1pc3NpbmdDb2x1bW5zOmZ1bmN0aW9uKGEpe3ZhciBnPXRoaXMsYz1nLmNvbHVtbk5vZGVzLmxlbmd0aCxlLGgsYixkO2lmKGM8YSl7ZT1hLWM7aD1nLnJvd0VsO2I9Zy5vd25lci5ncm91cENscztmb3IoZD0wO2Q8ZTtkKyspe2guY3JlYXRlQ2hpbGQoe2NsczpiLHRhZzoidGQiLHZBbGlnbjoidG9wIn0pfX19LHJlbW92ZUV4Y2VlZGluZ0NvbHVtbnM6ZnVuY3Rpb24oYSl7dmFyIGU9dGhpcyxiPWUuY29sdW1uTm9kZXMubGVuZ3RoLGQsZyxjO2lmKGI+YSl7ZD1iLWE7Zz1lLnJvd0VsO2ZvcihjPTA7YzxkO2MrKyl7Zy5sYXN0KCkucmVtb3ZlKCl9fX0scmVuZGVySXRlbTpmdW5jdGlvbihjLGQsYSl7dmFyIGI9dGhpcztiLmNvbmZpZ3VyZUl0ZW0oYyk7Yy5yZW5kZXIoRXh0LmdldChiLmNvbHVtbk5vZGVzW2FdKSxkKTtiLmFmdGVyUmVuZGVySXRlbShjKX0sbW92ZUl0ZW06ZnVuY3Rpb24oZCxnLGIpe3ZhciBjPXRoaXMsYT1jLmNvbHVtbk5vZGVzW2JdLGU9YS5jaGlsZE5vZGVzW2ddO2EuaW5zZXJ0QmVmb3JlKGQuZWwuZG9tLGV8fG51bGwpfX0pO0V4dC5kZWZpbmUoIkV4dC5sYXlvdXQuY29tcG9uZW50LmZpZWxkLkZpZWxkQ29udGFpbmVyIix7ZXh0ZW5kOiJFeHQubGF5b3V0LmNvbXBvbmVudC5maWVsZC5GaWVsZCIsYWxpYXM6ImxheW91dC5maWVsZGNvbnRhaW5lciIsdHlwZToiZmllbGRjb250YWluZXIiLHdhaXRGb3JPdXRlckhlaWdodEluRG9tOnRydWUsd2FpdEZvck91dGVyV2lkdGhJbkRvbTp0cnVlLGJlZ2luTGF5b3V0OmZ1bmN0aW9uKGEpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO2EuaGFzUmF3Q29udGVudD10cnVlO2EudGFyZ2V0LmJvZHlFbC5zZXRTdHlsZSgiaGVpZ2h0IiwiIil9LG1lYXN1cmVDb250ZW50SGVpZ2h0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmhhc0RvbVByb3AoImNvbnRhaW5lckxheW91dERvbmUiKT90aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTpOYU59LG1lYXN1cmVDb250ZW50V2lkdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaGFzRG9tUHJvcCgiY29udGFpbmVyTGF5b3V0RG9uZSIpP3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpOk5hTn0scHVibGlzaElubmVyV2lkdGg6ZnVuY3Rpb24oYixhKXt2YXIgYz1iLmJvZHlDZWxsQ29udGV4dDtjLnNldFdpZHRoKGMuZWwuZ2V0V2lkdGgoKSxmYWxzZSl9LHB1Ymxpc2hJbm5lckhlaWdodDpmdW5jdGlvbihiLGEpe3ZhciBjPWIuYm9keUNlbGxDb250ZXh0O2Muc2V0SGVpZ2h0KGEtdGhpcy5tZWFzdXJlTGFiZWxFcnJvckhlaWdodChiKSl9fSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uRmllbGRBbmNlc3RvciIse2luaXRGaWVsZEFuY2VzdG9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEub25GaWVsZEFuY2VzdG9yU3VidHJlZUNoYW5nZTthLmFkZEV2ZW50cygiZmllbGR2YWxpZGl0eWNoYW5nZSIsImZpZWxkZXJyb3JjaGFuZ2UiKTthLm9uKCJhZGQiLGIsYSk7YS5vbigicmVtb3ZlIixiLGEpO2EuaW5pdEZpZWxkRGVmYXVsdHMoKX0saW5pdEZpZWxkRGVmYXVsdHM6ZnVuY3Rpb24oKXtpZighdGhpcy5maWVsZERlZmF1bHRzKXt0aGlzLmZpZWxkRGVmYXVsdHM9e319fSxvbkZpZWxkQW5jZXN0b3JTdWJ0cmVlQ2hhbmdlOmZ1bmN0aW9uKGIsZSl7dmFyIGM9dGhpcyxkPSEhZS5vd25lckN0O2Z1bmN0aW9uIGEoZyl7dmFyIGg9Zy5pc0ZpZWxkTGFiZWxhYmxlLGk9Zy5pc0Zvcm1GaWVsZDtpZihofHxpKXtpZihoKXtjWyJvbkxhYmVsYWJsZSIrKGQ/IkFkZGVkIjoiUmVtb3ZlZCIpXShnKX1pZihpKXtjWyJvbkZpZWxkIisoZD8iQWRkZWQiOiJSZW1vdmVkIildKGcpfX1lbHNle2lmKGcuaXNDb250YWluZXIpe0V4dC5BcnJheS5mb3JFYWNoKGcuZ2V0UmVmSXRlbXMoKSxhKX19fWEoZSl9LG9uTGFiZWxhYmxlQWRkZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLm1vbihhLCJlcnJvcmNoYW5nZSIsYi5oYW5kbGVGaWVsZEVycm9yQ2hhbmdlLGIse2J1ZmZlcjoxMH0pO2Euc2V0RmllbGREZWZhdWx0cyhiLmZpZWxkRGVmYXVsdHMpfSxvbkZpZWxkQWRkZWQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczthLm1vbihiLCJ2YWxpZGl0eWNoYW5nZSIsYS5oYW5kbGVGaWVsZFZhbGlkaXR5Q2hhbmdlLGEpfSxvbkxhYmVsYWJsZVJlbW92ZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLm11bihhLCJlcnJvcmNoYW5nZSIsYi5oYW5kbGVGaWVsZEVycm9yQ2hhbmdlLGIpfSxvbkZpZWxkUmVtb3ZlZDpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2EubXVuKGIsInZhbGlkaXR5Y2hhbmdlIixhLmhhbmRsZUZpZWxkVmFsaWRpdHlDaGFuZ2UsYSl9LGhhbmRsZUZpZWxkVmFsaWRpdHlDaGFuZ2U6ZnVuY3Rpb24oYyxiKXt2YXIgYT10aGlzO2EuZmlyZUV2ZW50KCJmaWVsZHZhbGlkaXR5Y2hhbmdlIixhLGMsYik7YS5vbkZpZWxkVmFsaWRpdHlDaGFuZ2UoYyxiKX0saGFuZGxlRmllbGRFcnJvckNoYW5nZTpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXM7Yy5maXJlRXZlbnQoImZpZWxkZXJyb3JjaGFuZ2UiLGMsYixhKTtjLm9uRmllbGRFcnJvckNoYW5nZShiLGEpfSxvbkZpZWxkVmFsaWRpdHlDaGFuZ2U6RXh0LmVtcHR5Rm4sb25GaWVsZEVycm9yQ2hhbmdlOkV4dC5lbXB0eUZufSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uRmllbGRDb250YWluZXIiLHtleHRlbmQ6IkV4dC5jb250YWluZXIuQ29udGFpbmVyIixtaXhpbnM6e2xhYmVsYWJsZToiRXh0LmZvcm0uTGFiZWxhYmxlIixmaWVsZEFuY2VzdG9yOiJFeHQuZm9ybS5GaWVsZEFuY2VzdG9yIn0scmVxdWlyZXM6IkV4dC5sYXlvdXQuY29tcG9uZW50LmZpZWxkLkZpZWxkQ29udGFpbmVyIixhbGlhczoid2lkZ2V0LmZpZWxkY29udGFpbmVyIixjb21wb25lbnRMYXlvdXQ6ImZpZWxkY29udGFpbmVyIixjb21wb25lbnRDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0tZmllbGRjb250YWluZXIiLGNvbWJpbmVMYWJlbHM6ZmFsc2UsbGFiZWxDb25uZWN0b3I6IiwgIixjb21iaW5lRXJyb3JzOmZhbHNlLG1hc2tPbkRpc2FibGU6ZmFsc2UsZmllbGRTdWJUcGw6InsldGhpcy5yZW5kZXJDb250YWluZXIob3V0LHZhbHVlcyklfSIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5pbml0TGFiZWxhYmxlKCk7YS5pbml0RmllbGRBbmNlc3RvcigpO2EuY2FsbFBhcmVudCgpfSxiZWZvcmVSZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLmJlZm9yZUxhYmVsYWJsZVJlbmRlcihhcmd1bWVudHMpfSxvbkxhYmVsYWJsZUFkZGVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5taXhpbnMuZmllbGRBbmNlc3Rvci5vbkxhYmVsYWJsZUFkZGVkLmNhbGwodGhpcyxhKTtiLnVwZGF0ZUxhYmVsKCl9LG9uTGFiZWxhYmxlUmVtb3ZlZDpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2IubWl4aW5zLmZpZWxkQW5jZXN0b3Iub25MYWJlbGFibGVSZW1vdmVkLmNhbGwodGhpcyxhKTtiLnVwZGF0ZUxhYmVsKCl9LGluaXRSZW5kZXJUcGw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKCFhLmhhc093blByb3BlcnR5KCJyZW5kZXJUcGwiKSl7YS5yZW5kZXJUcGw9YS5nZXRUcGwoImxhYmVsYWJsZVJlbmRlclRwbCIpfXJldHVybiBhLmNhbGxQYXJlbnQoKX0saW5pdFJlbmRlckRhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmFwcGx5SWYodGhpcy5jYWxsUGFyZW50KCksdGhpcy5nZXRMYWJlbGFibGVSZW5kZXJEYXRhKCkpfSxnZXRGaWVsZExhYmVsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5maWVsZExhYmVsfHwiIjtpZighYSYmdGhpcy5jb21iaW5lTGFiZWxzKXthPUV4dC5BcnJheS5tYXAodGhpcy5xdWVyeSgiW2lzRmllbGRMYWJlbGFibGVdIiksZnVuY3Rpb24oYil7cmV0dXJuIGIuZ2V0RmllbGRMYWJlbCgpfSkuam9pbih0aGlzLmxhYmVsQ29ubmVjdG9yKX1yZXR1cm4gYX0sZ2V0U3ViVHBsRGF0YTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW5pdFJlbmRlckRhdGEoKTtFeHQuYXBwbHkoYSx0aGlzLnN1YlRwbERhdGEpO3JldHVybiBhfSxnZXRTdWJUcGxNYXJrdXA6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGE9Yy5nZXRUcGwoImZpZWxkU3ViVHBsIiksYjtpZighYS5yZW5kZXJDb250ZW50KXtjLnNldHVwUmVuZGVyVHBsKGEpfWI9YS5hcHBseShjLmdldFN1YlRwbERhdGEoKSk7cmV0dXJuIGJ9LHVwZGF0ZUxhYmVsOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIubGFiZWxFbDtpZihhKXtiLnNldEZpZWxkTGFiZWwoYi5nZXRGaWVsZExhYmVsKCkpfX0sb25GaWVsZEVycm9yQ2hhbmdlOmZ1bmN0aW9uKGUsYil7aWYodGhpcy5jb21iaW5lRXJyb3JzKXt2YXIgZD10aGlzLGc9ZC5nZXRBY3RpdmVFcnJvcigpLGM9RXh0LkFycmF5LmZpbHRlcihkLnF1ZXJ5KCJbaXNGb3JtRmllbGRdIiksZnVuY3Rpb24oaCl7cmV0dXJuIGguaGFzQWN0aXZlRXJyb3IoKX0pLGE9ZC5nZXRDb21iaW5lZEVycm9ycyhjKTtpZihhKXtkLnNldEFjdGl2ZUVycm9ycyhhKX1lbHNle2QudW5zZXRBY3RpdmVFcnJvcigpfWlmKGchPT1kLmdldEFjdGl2ZUVycm9yKCkpe2QuZG9Db21wb25lbnRMYXlvdXQoKX19fSxnZXRDb21iaW5lZEVycm9yczpmdW5jdGlvbihlKXt2YXIgaz1bXSxjLGw9ZS5sZW5ndGgsaSxkLGosYixnLGg7Zm9yKGM9MDtjPGw7YysrKXtpPWVbY107ZD1pLmdldEFjdGl2ZUVycm9ycygpO2I9ZC5sZW5ndGg7Zm9yKGo9MDtqPGI7aisrKXtnPWRbal07aD1pLmdldEZpZWxkTGFiZWwoKTtrLnB1c2goKGg/aCsiOiAiOiIiKStnKX19cmV0dXJuIGt9LGdldFRhcmdldEVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keUVsfHx0aGlzLmNhbGxQYXJlbnQoKX19KTtFeHQuZGVmaW5lKCJFeHQuZm9ybS5DaGVja2JveEdyb3VwIix7ZXh0ZW5kOiJFeHQuZm9ybS5GaWVsZENvbnRhaW5lciIsbWl4aW5zOntmaWVsZDoiRXh0LmZvcm0uZmllbGQuRmllbGQifSxhbGlhczoid2lkZ2V0LmNoZWNrYm94Z3JvdXAiLHJlcXVpcmVzOlsiRXh0LmxheW91dC5jb250YWluZXIuQ2hlY2tib3hHcm91cCIsIkV4dC5mb3JtLmZpZWxkLkJhc2UiXSxjb2x1bW5zOiJhdXRvIix2ZXJ0aWNhbDpmYWxzZSxhbGxvd0JsYW5rOnRydWUsYmxhbmtUZXh0OiJZb3UgbXVzdCBzZWxlY3QgYXQgbGVhc3Qgb25lIGl0ZW0gaW4gdGhpcyBncm91cCIsZGVmYXVsdFR5cGU6ImNoZWNrYm94ZmllbGQiLGdyb3VwQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLWNoZWNrLWdyb3VwIixmaWVsZEJvZHlDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0tY2hlY2tib3hncm91cC1ib2R5IixsYXlvdXQ6ImNoZWNrYm94Z3JvdXAiLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudCgpO2EuaW5pdEZpZWxkKCl9LGluaXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLnZhbHVlO2Iub3JpZ2luYWxWYWx1ZT1iLmxhc3RWYWx1ZT1hfHxiLmdldFZhbHVlKCk7aWYoYSl7Yi5zZXRWYWx1ZShhKX19LG9uRmllbGRBZGRlZDpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKGIuaXNDaGVja2JveCl7YS5tb24oYiwiY2hhbmdlIixhLmNoZWNrQ2hhbmdlLGEpfWEuY2FsbFBhcmVudChhcmd1bWVudHMpfSxvbkZpZWxkUmVtb3ZlZDpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKGIuaXNDaGVja2JveCl7YS5tdW4oYiwiY2hhbmdlIixhLmNoZWNrQ2hhbmdlLGEpfWEuY2FsbFBhcmVudChhcmd1bWVudHMpfSxpc0VxdWFsOmZ1bmN0aW9uKGIsYSl7dmFyIGM9RXh0Lk9iamVjdC50b1F1ZXJ5U3RyaW5nO3JldHVybiBjKGIpPT09YyhhKX0sZ2V0RXJyb3JzOmZ1bmN0aW9uKCl7dmFyIGE9W107aWYoIXRoaXMuYWxsb3dCbGFuayYmRXh0LmlzRW1wdHkodGhpcy5nZXRDaGVja2VkKCkpKXthLnB1c2godGhpcy5ibGFua1RleHQpfXJldHVybiBhfSxnZXRCb3hlczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeSgiW2lzQ2hlY2tib3hdIisoYXx8IiIpKX0sZWFjaEJveDpmdW5jdGlvbihiLGEpe0V4dC5BcnJheS5mb3JFYWNoKHRoaXMuZ2V0Qm94ZXMoKSxiLGF8fHRoaXMpfSxnZXRDaGVja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Qm94ZXMoIltjaGVja2VkXSIpfSxpc0RpcnR5OmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXRCb3hlcygpLGEsZD1jLmxlbmd0aDtmb3IoYT0wO2E8ZDthKyspe2lmKGNbYV0uaXNEaXJ0eSgpKXtyZXR1cm4gdHJ1ZX19fSxzZXRSZWFkT25seTpmdW5jdGlvbihlKXt2YXIgYz10aGlzLmdldEJveGVzKCksYSxkPWMubGVuZ3RoO2ZvcihhPTA7YTxkO2ErKyl7Y1thXS5zZXRSZWFkT25seShlKX10aGlzLnJlYWRPbmx5PWV9LHJlc2V0OmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxiPWMuaGFzQWN0aXZlRXJyb3IoKSxhPWMucHJldmVudE1hcms7Yy5wcmV2ZW50TWFyaz10cnVlO2MuYmF0Y2hDaGFuZ2VzKGZ1bmN0aW9uKCl7dmFyIGU9Yy5nZXRCb3hlcygpLGQsZz1lLmxlbmd0aDtmb3IoZD0wO2Q8ZztkKyspe2VbZF0ucmVzZXQoKX19KTtjLnByZXZlbnRNYXJrPWE7Yy51bnNldEFjdGl2ZUVycm9yKCk7aWYoYil7Yy51cGRhdGVMYXlvdXQoKX19LHJlc2V0T3JpZ2luYWxWYWx1ZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMsYz1kLmdldEJveGVzKCksYSxlPWMubGVuZ3RoO2ZvcihhPTA7YTxlO2ErKyl7Y1thXS5yZXNldE9yaWdpbmFsVmFsdWUoKX1kLm9yaWdpbmFsVmFsdWU9ZC5nZXRWYWx1ZSgpO2QuY2hlY2tEaXJ0eSgpfSxzZXRWYWx1ZTpmdW5jdGlvbihoKXt2YXIgZz10aGlzLGQ9Zy5nZXRCb3hlcygpLGEsaj1kLmxlbmd0aCxlLGMsaTtnLmJhdGNoQ2hhbmdlcyhmdW5jdGlvbigpe2ZvcihhPTA7YTxqO2ErKyl7ZT1kW2FdO2M9ZS5nZXROYW1lKCk7aT1mYWxzZTtpZihoJiZoLmhhc093blByb3BlcnR5KGMpKXtpZihFeHQuaXNBcnJheShoW2NdKSl7aT1FeHQuQXJyYXkuY29udGFpbnMoaFtjXSxlLmlucHV0VmFsdWUpfWVsc2V7aT1oW2NdfX1lLnNldFZhbHVlKGkpfX0pO3JldHVybiBnfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBkPXt9LGc9dGhpcy5nZXRCb3hlcygpLGMsaj1nLmxlbmd0aCxoLGUsYSxpO2ZvcihjPTA7YzxqO2MrKyl7aD1nW2NdO2U9aC5nZXROYW1lKCk7YT1oLmlucHV0VmFsdWU7aWYoaC5nZXRWYWx1ZSgpKXtpZihkLmhhc093blByb3BlcnR5KGUpKXtpPWRbZV07aWYoIUV4dC5pc0FycmF5KGkpKXtpPWRbZV09W2ldfWkucHVzaChhKX1lbHNle2RbZV09YX19fXJldHVybiBkfSxnZXRTdWJtaXREYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LGdldE1vZGVsRGF0YTpmdW5jdGlvbigpe3JldHVybiBudWxsfSx2YWxpZGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsZCxjLGI7aWYoYS5kaXNhYmxlZCl7Yz10cnVlfWVsc2V7ZD1hLmdldEVycm9ycygpO2M9RXh0LmlzRW1wdHkoZCk7Yj0hYS5oYXNBY3RpdmVFcnJvcigpO2lmKGMpe2EudW5zZXRBY3RpdmVFcnJvcigpfWVsc2V7YS5zZXRBY3RpdmVFcnJvcihkKX19aWYoYyE9PWIpe2EuZmlyZUV2ZW50KCJ2YWxpZGl0eWNoYW5nZSIsYSxjKTthLnVwZGF0ZUxheW91dCgpfXJldHVybiBjfX0sZnVuY3Rpb24oKXt0aGlzLmJvcnJvdyhFeHQuZm9ybS5maWVsZC5CYXNlLFsibWFya0ludmFsaWQiLCJjbGVhckludmFsaWQiXSl9KTtFeHQuZGVmaW5lKCJFeHQuZm9ybS5DaGVja2JveE1hbmFnZXIiLHtleHRlbmQ6IkV4dC51dGlsLk1peGVkQ29sbGVjdGlvbiIsc2luZ2xldG9uOnRydWUsZ2V0QnlOYW1lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZpbHRlckJ5KGZ1bmN0aW9uKGIpe3JldHVybiBiLm5hbWU9PWF9KX0sZ2V0V2l0aFZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZmlsdGVyQnkoZnVuY3Rpb24oYyl7cmV0dXJuIGMubmFtZT09YSYmYy5pbnB1dFZhbHVlPT1ifSl9LGdldENoZWNrZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZmlsdGVyQnkoZnVuY3Rpb24oYil7cmV0dXJuIGIubmFtZT09YSYmYi5jaGVja2VkfSl9fSk7RXh0LmRlZmluZSgiRXh0LmxheW91dC5jb21wb25lbnQuRmllbGRTZXQiLHtleHRlbmQ6IkV4dC5sYXlvdXQuY29tcG9uZW50LkJvZHkiLGFsaWFzOlsibGF5b3V0LmZpZWxkc2V0Il0sdHlwZToiZmllbGRzZXQiLGJlZm9yZUxheW91dEN5Y2xlOmZ1bmN0aW9uKGEpe2lmKGEudGFyZ2V0LmNvbGxhcHNlZCl7YS5oZWlnaHRNb2RlbD10aGlzLnNpemVNb2RlbHMuc2hyaW5rV3JhcH19LGJlZ2luTGF5b3V0Q3ljbGU6ZnVuY3Rpb24oYil7dmFyIGM9Yi50YXJnZXQsYTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihjLmNvbGxhcHNlZCl7Yi5zZXRDb250ZW50SGVpZ2h0KDApO2lmKGIud2lkdGhNb2RlbC5zaHJpbmtXcmFwKXthPWMubGFzdENvbXBvbmVudFNpemU7Yi5zZXRDb250ZW50V2lkdGgoKGEmJmEuY29udGVudFdpZHRoKXx8MTAwKX19fSxjYWxjdWxhdGVPd25lckhlaWdodEZyb21Db250ZW50SGVpZ2h0OmZ1bmN0aW9uKGQsYyl7dmFyIGE9ZC5nZXRCb3JkZXJJbmZvKCksYj1kLnRhcmdldC5sZWdlbmQ7cmV0dXJuIGQuZ2V0UHJvcCgiY29udGVudEhlaWdodCIpK2QuZ2V0UGFkZGluZ0luZm8oKS5oZWlnaHQrKGI/Yi5nZXRIZWlnaHQoKTphLnRvcCkrYS5ib3R0b219LHB1Ymxpc2hJbm5lckhlaWdodDpmdW5jdGlvbihjLGEpe3ZhciBiPWMudGFyZ2V0LmxlZ2VuZDtpZihiKXthLT1iLmdldEhlaWdodCgpfXRoaXMuY2FsbFBhcmVudChbYyxhXSl9LGdldExheW91dEl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vd25lci5sZWdlbmQ7aWYoYSl7cmV0dXJuW2FdfXJldHVybltdfX0pO0V4dC5kZWZpbmUoIkV4dC5mb3JtLkZpZWxkU2V0Iix7ZXh0ZW5kOiJFeHQuY29udGFpbmVyLkNvbnRhaW5lciIsYWxpYXM6IndpZGdldC5maWVsZHNldCIsdXNlczpbIkV4dC5mb3JtLmZpZWxkLkNoZWNrYm94IiwiRXh0LnBhbmVsLlRvb2wiLCJFeHQubGF5b3V0LmNvbnRhaW5lci5BbmNob3IiLCJFeHQubGF5b3V0LmNvbXBvbmVudC5GaWVsZFNldCJdLGNvbGxhcHNlZDpmYWxzZSx0b2dnbGVPblRpdGxlQ2xpY2s6dHJ1ZSxiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmaWVsZHNldCIsbGF5b3V0OiJhbmNob3IiLGJvcmRlcjoxLGNvbXBvbmVudExheW91dDoiZmllbGRzZXQiLGF1dG9FbDoiZmllbGRzZXQiLGNoaWxkRWxzOlsiYm9keSJdLHJlbmRlclRwbDpbInsldGhpcy5yZW5kZXJMZWdlbmQob3V0LHZhbHVlcyk7JX0iLCc8ZGl2IGlkPSJ7aWR9LWJvZHkiIGNsYXNzPSJ7YmFzZUNsc30tYm9keSI+JywieyV0aGlzLnJlbmRlckNvbnRhaW5lcihvdXQsdmFsdWVzKTslfSIsIjwvZGl2PiJdLHN0YXRlRXZlbnRzOlsiY29sbGFwc2UiLCJleHBhbmQiXSxtYXNrT25EaXNhYmxlOmZhbHNlLGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5sZWdlbmQ7aWYoYSl7ZGVsZXRlIGEub3duZXJDdDthLmRlc3Ryb3koKTtiLmxlZ2VuZD1udWxsfWIuY2FsbFBhcmVudCgpfSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuYmFzZUNscztiLmNhbGxQYXJlbnQoKTtiLmFkZEV2ZW50cygiYmVmb3JlZXhwYW5kIiwiYmVmb3JlY29sbGFwc2UiLCJleHBhbmQiLCJjb2xsYXBzZSIpO2lmKGIuY29sbGFwc2VkKXtiLmFkZENscyhhKyItY29sbGFwc2VkIik7Yi5jb2xsYXBzZSgpfWlmKGIudGl0bGUpe2IuYWRkQ2xzKGErIi13aXRoLXRpdGxlIil9aWYoYi50aXRsZXx8Yi5jaGVja2JveFRvZ2dsZXx8Yi5jb2xsYXBzaWJsZSl7Yi5hZGRDbHMoYSsiLXdpdGgtbGVnZW5kIik7Yi5sZWdlbmQ9RXh0LndpZGdldChiLmNyZWF0ZUxlZ2VuZEN0KCkpfX0saW5pdFJlbmRlckRhdGE6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNhbGxQYXJlbnQoKTthLmJhc2VDbHM9dGhpcy5iYXNlQ2xzO3JldHVybiBhfSxnZXRTdGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2FsbFBhcmVudCgpO2E9dGhpcy5hZGRQcm9wZXJ0eVRvU3RhdGUoYSwiY29sbGFwc2VkIik7cmV0dXJuIGF9LGFmdGVyQ29sbGFwc2U6RXh0LmVtcHR5Rm4sYWZ0ZXJFeHBhbmQ6RXh0LmVtcHR5Rm4sY29sbGFwc2VkSG9yaXpvbnRhbDpmdW5jdGlvbigpe3JldHVybiB0cnVlfSxjb2xsYXBzZWRWZXJ0aWNhbDpmdW5jdGlvbigpe3JldHVybiB0cnVlfSxjcmVhdGVMZWdlbmRDdDpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYT1bXSxiPXt4dHlwZToiY29udGFpbmVyIixiYXNlQ2xzOmMuYmFzZUNscysiLWhlYWRlciIsaWQ6Yy5pZCsiLWxlZ2VuZCIsYXV0b0VsOiJsZWdlbmQiLGl0ZW1zOmEsb3duZXJDdDpjLG93bmVyTGF5b3V0OmMuY29tcG9uZW50TGF5b3V0fTtpZihjLmNoZWNrYm94VG9nZ2xlKXthLnB1c2goYy5jcmVhdGVDaGVja2JveENtcCgpKX1lbHNle2lmKGMuY29sbGFwc2libGUpe2EucHVzaChjLmNyZWF0ZVRvZ2dsZUNtcCgpKX19YS5wdXNoKGMuY3JlYXRlVGl0bGVDbXAoKSk7cmV0dXJuIGJ9LGNyZWF0ZVRpdGxlQ21wOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPXt4dHlwZToiY29tcG9uZW50IixodG1sOmIudGl0bGUsY2xzOmIuYmFzZUNscysiLWhlYWRlci10ZXh0IixpZDpiLmlkKyItbGVnZW5kVGl0bGUifTtpZihiLmNvbGxhcHNpYmxlJiZiLnRvZ2dsZU9uVGl0bGVDbGljayl7YS5saXN0ZW5lcnM9e2VsOntzY29wZTpiLGNsaWNrOmIudG9nZ2xlfX07YS5jbHMrPSIgIitiLmJhc2VDbHMrIi1oZWFkZXItdGV4dC1jb2xsYXBzaWJsZSJ9cmV0dXJuKGIudGl0bGVDbXA9RXh0LndpZGdldChhKSl9LGNyZWF0ZUNoZWNrYm94Q21wOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPSItY2hlY2tib3giO2EuY2hlY2tib3hDbXA9RXh0LndpZGdldCh7eHR5cGU6ImNoZWNrYm94IixoaWRlRW1wdHlMYWJlbDp0cnVlLG5hbWU6YS5jaGVja2JveE5hbWV8fGEuaWQrYixjbHM6YS5iYXNlQ2xzKyItaGVhZGVyIitiLGlkOmEuaWQrIi1sZWdlbmRDaGsiLGNoZWNrZWQ6IWEuY29sbGFwc2VkLGxpc3RlbmVyczp7Y2hhbmdlOmEub25DaGVja0NoYW5nZSxzY29wZTphfX0pO3JldHVybiBhLmNoZWNrYm94Q21wfSxjcmVhdGVUb2dnbGVDbXA6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EudG9nZ2xlQ21wPUV4dC53aWRnZXQoe3h0eXBlOiJ0b29sIix0eXBlOiJ0b2dnbGUiLGhhbmRsZXI6YS50b2dnbGUsaWQ6YS5pZCsiLWxlZ2VuZFRvZ2dsZSIsc2NvcGU6YX0pO3JldHVybiBhLnRvZ2dsZUNtcH0sZG9SZW5kZXJMZWdlbmQ6ZnVuY3Rpb24oYixlKXt2YXIgZD1lLiRjb21wLGM9ZC5sZWdlbmQsYTtpZihjKXtjLm93bmVyTGF5b3V0LmNvbmZpZ3VyZUl0ZW0oYyk7YT1jLmdldFJlbmRlclRyZWUoKTtFeHQuRG9tSGVscGVyLmdlbmVyYXRlTWFya3VwKGEsYil9fSxmaW5pc2hSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxlZ2VuZDt0aGlzLmNhbGxQYXJlbnQoKTtpZihhKXthLmZpbmlzaFJlbmRlcigpfX0sZ2V0Q29sbGFwc2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29sbGFwc2VkPyJ0b3AiOmZhbHNlfSxnZXRDb2xsYXBzZWREb2NrZWRJdGVtczpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGVnZW5kO3JldHVybiBhP1thXTpbXX0sc2V0VGl0bGU6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhPWIubGVnZW5kO2IudGl0bGU9YztpZihiLnJlbmRlcmVkKXtpZighYi5sZWdlbmQpe2IubGVnZW5kPWE9RXh0LndpZGdldChiLmNyZWF0ZUxlZ2VuZEN0KCkpO2Eub3duZXJMYXlvdXQuY29uZmlndXJlSXRlbShhKTthLnJlbmRlcihiLmVsLDApfWIudGl0bGVDbXAudXBkYXRlKGMpfXJldHVybiBifSxnZXRUYXJnZXRFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHl8fHRoaXMuZnJhbWVCb2R5fHx0aGlzLmVsfSxnZXRDb250ZW50VGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keX0sZXhwYW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0RXhwYW5kZWQodHJ1ZSl9LGNvbGxhcHNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0RXhwYW5kZWQoZmFsc2UpfSxzZXRFeHBhbmRlZDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLGQ9Yy5jaGVja2JveENtcCxhPWI/ImV4cGFuZCI6ImNvbGxhcHNlIjtpZighYy5yZW5kZXJlZHx8Yy5maXJlRXZlbnQoImJlZm9yZSIrYSxjKSE9PWZhbHNlKXtiPSEhYjtpZihkKXtkLnNldFZhbHVlKGIpfWlmKGIpe2MucmVtb3ZlQ2xzKGMuYmFzZUNscysiLWNvbGxhcHNlZCIpfWVsc2V7Yy5hZGRDbHMoYy5iYXNlQ2xzKyItY29sbGFwc2VkIil9Yy5jb2xsYXBzZWQ9IWI7aWYoYy5yZW5kZXJlZCl7Yy51cGRhdGVMYXlvdXQoe2lzUm9vdDpmYWxzZX0pO2MuZmlyZUV2ZW50KGEsYyl9fXJldHVybiBjfSxnZXRSZWZJdGVtczpmdW5jdGlvbihhKXt2YXIgYz10aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKSxiPXRoaXMubGVnZW5kO2lmKGIpe2MudW5zaGlmdChiKTtpZihhKXtjLnVuc2hpZnQuYXBwbHkoYyxiLmdldFJlZkl0ZW1zKHRydWUpKX19cmV0dXJuIGN9LHRvZ2dsZTpmdW5jdGlvbigpe3RoaXMuc2V0RXhwYW5kZWQoISF0aGlzLmNvbGxhcHNlZCl9LG9uQ2hlY2tDaGFuZ2U6ZnVuY3Rpb24oYixhKXt0aGlzLnNldEV4cGFuZGVkKGEpfSxzZXR1cFJlbmRlclRwbDpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLnJlbmRlckxlZ2VuZD10aGlzLmRvUmVuZGVyTGVnZW5kfX0pO0V4dC5kZWZpbmUoIkV4dC5mb3JtLkxhYmVsIix7ZXh0ZW5kOiJFeHQuQ29tcG9uZW50IixhbGlhczoid2lkZ2V0LmxhYmVsIixyZXF1aXJlczpbIkV4dC51dGlsLkZvcm1hdCJdLGF1dG9FbDoibGFiZWwiLG1hc2tPbkRpc2FibGU6ZmFsc2UsZ2V0RWxDb25maWc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuaHRtbD1hLnRleHQ/RXh0LnV0aWwuRm9ybWF0Lmh0bWxFbmNvZGUoYS50ZXh0KTooYS5odG1sfHwiIik7cmV0dXJuIEV4dC5hcHBseShhLmNhbGxQYXJlbnQoKSx7aHRtbEZvcjphLmZvcklkfHwiIn0pfSxzZXRUZXh0OmZ1bmN0aW9uKGMsYil7dmFyIGE9dGhpcztiPWIhPT1mYWxzZTtpZihiKXthLnRleHQ9YztkZWxldGUgYS5odG1sfWVsc2V7YS5odG1sPWM7ZGVsZXRlIGEudGV4dH1pZihhLnJlbmRlcmVkKXthLmVsLmRvbS5pbm5lckhUTUw9YiE9PWZhbHNlP0V4dC51dGlsLkZvcm1hdC5odG1sRW5jb2RlKGMpOmM7YS51cGRhdGVMYXlvdXQoKX1yZXR1cm4gYX19KTtFeHQuZGVmaW5lKCJFeHQuZm9ybS5QYW5lbCIse2V4dGVuZDoiRXh0LnBhbmVsLlBhbmVsIixtaXhpbnM6e2ZpZWxkQW5jZXN0b3I6IkV4dC5mb3JtLkZpZWxkQW5jZXN0b3IifSxhbGlhczoid2lkZ2V0LmZvcm0iLGFsdGVybmF0ZUNsYXNzTmFtZTpbIkV4dC5Gb3JtUGFuZWwiLCJFeHQuZm9ybS5Gb3JtUGFuZWwiXSxyZXF1aXJlczpbIkV4dC5mb3JtLkJhc2ljIiwiRXh0LnV0aWwuVGFza1J1bm5lciJdLGxheW91dDoiYW5jaG9yIixhcmlhUm9sZToiZm9ybSIsYmFzaWNGb3JtQ29uZmlnczpbImFwaSIsImJhc2VQYXJhbXMiLCJlcnJvclJlYWRlciIsIm1ldGhvZCIsInBhcmFtT3JkZXIiLCJwYXJhbXNBc0hhc2giLCJyZWFkZXIiLCJzdGFuZGFyZFN1Ym1pdCIsInRpbWVvdXQiLCJ0cmFja1Jlc2V0T25Mb2FkIiwidXJsIiwid2FpdE1zZ1RhcmdldCIsIndhaXRUaXRsZSJdLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuZnJhbWUpe2EuYm9yZGVyPWZhbHNlfWEuaW5pdEZpZWxkQW5jZXN0b3IoKTthLmNhbGxQYXJlbnQoKTthLnJlbGF5RXZlbnRzKGEuZm9ybSxbImJlZm9yZWFjdGlvbiIsImFjdGlvbmZhaWxlZCIsImFjdGlvbmNvbXBsZXRlIiwidmFsaWRpdHljaGFuZ2UiLCJkaXJ0eWNoYW5nZSJdKTtpZihhLnBvbGxGb3JDaGFuZ2VzKXthLnN0YXJ0UG9sbGluZyhhLnBvbGxJbnRlcnZhbHx8NTAwKX19LGluaXRJdGVtczpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5mb3JtPWEuY3JlYXRlRm9ybSgpO2EuY2FsbFBhcmVudCgpfSxhZnRlckZpcnN0TGF5b3V0OmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KCk7dGhpcy5mb3JtLmluaXRpYWxpemUoKX0sY3JlYXRlRm9ybTpmdW5jdGlvbigpe3ZhciBiPXt9LGQ9dGhpcy5iYXNpY0Zvcm1Db25maWdzLGE9ZC5sZW5ndGgsYz0wLGU7Zm9yKDtjPGE7KytjKXtlPWRbY107YltlXT10aGlzW2VdfXJldHVybiBuZXcgRXh0LmZvcm0uQmFzaWModGhpcyxiKX0sZ2V0Rm9ybTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZvcm19LGxvYWRSZWNvcmQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Rm9ybSgpLmxvYWRSZWNvcmQoYSl9LGdldFJlY29yZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEZvcm0oKS5nZXRSZWNvcmQoKX0sZ2V0VmFsdWVzOmZ1bmN0aW9uKGQsYixjLGEpe3JldHVybiB0aGlzLmdldEZvcm0oKS5nZXRWYWx1ZXMoZCxiLGMsYSl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnN0b3BQb2xsaW5nKCk7dGhpcy5mb3JtLmRlc3Ryb3koKTt0aGlzLmNhbGxQYXJlbnQoKX0sbG9hZDpmdW5jdGlvbihhKXt0aGlzLmZvcm0ubG9hZChhKX0sc3VibWl0OmZ1bmN0aW9uKGEpe3RoaXMuZm9ybS5zdWJtaXQoYSl9LHN0YXJ0UG9sbGluZzpmdW5jdGlvbihiKXt0aGlzLnN0b3BQb2xsaW5nKCk7dmFyIGE9bmV3IEV4dC51dGlsLlRhc2tSdW5uZXIoYik7YS5zdGFydCh7aW50ZXJ2YWw6MCxydW46dGhpcy5jaGVja0NoYW5nZSxzY29wZTp0aGlzfSk7dGhpcy5wb2xsVGFzaz1hfSxzdG9wUG9sbGluZzpmdW5jdGlvbigpe3ZhciBhPXRoaXMucG9sbFRhc2s7aWYoYSl7YS5zdG9wQWxsKCk7ZGVsZXRlIHRoaXMucG9sbFRhc2t9fSxjaGVja0NoYW5nZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZm9ybS5nZXRGaWVsZHMoKS5pdGVtcyxiLGQ9YS5sZW5ndGgsYztmb3IoYj0wO2I8ZDtiKyspe2FbYl0uY2hlY2tDaGFuZ2UoKX19fSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uUmFkaW9Hcm91cCIse2V4dGVuZDoiRXh0LmZvcm0uQ2hlY2tib3hHcm91cCIsYWxpYXM6IndpZGdldC5yYWRpb2dyb3VwIixhbGxvd0JsYW5rOnRydWUsYmxhbmtUZXh0OiJZb3UgbXVzdCBzZWxlY3Qgb25lIGl0ZW0gaW4gdGhpcyBncm91cCIsZGVmYXVsdFR5cGU6InJhZGlvZmllbGQiLGdyb3VwQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLXJhZGlvLWdyb3VwIixnZXRCb3hlczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5xdWVyeSgiW2lzUmFkaW9dIisoYXx8IiIpKX0sY2hlY2tDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldFZhbHVlKCksYT1FeHQuT2JqZWN0LmdldEtleXMoYilbMF07aWYoRXh0LmlzQXJyYXkoYlthXSkpe3JldHVybn10aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sc2V0VmFsdWU6ZnVuY3Rpb24oZCl7dmFyIGosZyxlLGgsYyxhLGI7aWYoRXh0LmlzT2JqZWN0KGQpKXtmb3IoYiBpbiBkKXtpZihkLmhhc093blByb3BlcnR5KGIpKXtqPWRbYl07Zz10aGlzLml0ZW1zLmZpcnN0KCk7ZT1nP2cuZ2V0Rm9ybUlkKCk6bnVsbDtoPUV4dC5mb3JtLlJhZGlvTWFuYWdlci5nZXRXaXRoVmFsdWUoYixqLGUpLml0ZW1zO2E9aC5sZW5ndGg7Zm9yKGM9MDtjPGE7KytjKXtoW2NdLnNldFZhbHVlKHRydWUpfX19fXJldHVybiB0aGlzfX0pO0V4dC5kZWZpbmUoIkV4dC5mb3JtLlJhZGlvTWFuYWdlciIse2V4dGVuZDoiRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uIixzaW5nbGV0b246dHJ1ZSxnZXRCeU5hbWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5maWx0ZXJCeShmdW5jdGlvbihjKXtyZXR1cm4gYy5uYW1lPT1hJiZjLmdldEZvcm1JZCgpPT1ifSl9LGdldFdpdGhWYWx1ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMuZmlsdGVyQnkoZnVuY3Rpb24oZCl7cmV0dXJuIGQubmFtZT09YSYmZC5pbnB1dFZhbHVlPT1iJiZkLmdldEZvcm1JZCgpPT1jfSl9LGdldENoZWNrZWQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5maW5kQnkoZnVuY3Rpb24oYyl7cmV0dXJuIGMubmFtZT09YSYmYy5jaGVja2VkJiZjLmdldEZvcm1JZCgpPT1ifSl9fSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uYWN0aW9uLkRpcmVjdExvYWQiLHtleHRlbmQ6IkV4dC5mb3JtLmFjdGlvbi5Mb2FkIixyZXF1aXJlczpbIkV4dC5kaXJlY3QuTWFuYWdlciJdLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmZvcm0uQWN0aW9uLkRpcmVjdExvYWQiLGFsaWFzOiJmb3JtYWN0aW9uLmRpcmVjdGxvYWQiLHR5cGU6ImRpcmVjdGxvYWQiLHJ1bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMsYz1kLmZvcm0sYj1jLmFwaS5sb2FkLGU9Yi5kaXJlY3RDZmcubWV0aG9kLGE9ZS5nZXRBcmdzKGQuZ2V0UGFyYW1zKCksYy5wYXJhbU9yZGVyLGMucGFyYW1zQXNIYXNoKTthLnB1c2goZC5vbkNvbXBsZXRlLGQpO2IuYXBwbHkod2luZG93LGEpfSxwcm9jZXNzUmVzcG9uc2U6ZnVuY3Rpb24oYSl7cmV0dXJuKHRoaXMucmVzdWx0PWEpfSxvbkNvbXBsZXRlOmZ1bmN0aW9uKGIsYSl7aWYoYil7dGhpcy5vblN1Y2Nlc3MoYil9ZWxzZXt0aGlzLm9uRmFpbHVyZShudWxsKX19fSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uYWN0aW9uLkRpcmVjdFN1Ym1pdCIse2V4dGVuZDoiRXh0LmZvcm0uYWN0aW9uLlN1Ym1pdCIscmVxdWlyZXM6WyJFeHQuZGlyZWN0Lk1hbmFnZXIiXSxhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5mb3JtLkFjdGlvbi5EaXJlY3RTdWJtaXQiLGFsaWFzOiJmb3JtYWN0aW9uLmRpcmVjdHN1Ym1pdCIsdHlwZToiZGlyZWN0c3VibWl0Iixkb1N1Ym1pdDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1FeHQuRnVuY3Rpb24uYmluZChiLm9uQ29tcGxldGUsYiksYT1iLmJ1aWxkRm9ybSgpO2IuZm9ybS5hcGkuc3VibWl0KGEsYyxiKTtFeHQucmVtb3ZlTm9kZShhKX0scHJvY2Vzc1Jlc3BvbnNlOmZ1bmN0aW9uKGEpe3JldHVybih0aGlzLnJlc3VsdD1hKX0sb25Db21wbGV0ZTpmdW5jdGlvbihiLGEpe2lmKGIpe3RoaXMub25TdWNjZXNzKGIpfWVsc2V7dGhpcy5vbkZhaWx1cmUobnVsbCl9fX0pO0V4dC5kZWZpbmUoIkV4dC5mb3JtLmFjdGlvbi5TdGFuZGFyZFN1Ym1pdCIse2V4dGVuZDoiRXh0LmZvcm0uYWN0aW9uLlN1Ym1pdCIsYWxpYXM6ImZvcm1hY3Rpb24uc3RhbmRhcmRzdWJtaXQiLGRvU3VibWl0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5idWlsZEZvcm0oKTthLnN1Ym1pdCgpO0V4dC5yZW1vdmVOb2RlKGEpfX0pO0V4dC5kZWZpbmUoIkV4dC5mb3JtLmZpZWxkLkNoZWNrYm94Iix7ZXh0ZW5kOiJFeHQuZm9ybS5maWVsZC5CYXNlIixhbGlhczpbIndpZGdldC5jaGVja2JveGZpZWxkIiwid2lkZ2V0LmNoZWNrYm94Il0sYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuZm9ybS5DaGVja2JveCIscmVxdWlyZXM6WyJFeHQuWFRlbXBsYXRlIiwiRXh0LmZvcm0uQ2hlY2tib3hNYW5hZ2VyIl0sY29tcG9uZW50TGF5b3V0OiJmaWVsZCIsY2hpbGRFbHM6WyJib3hMYWJlbEVsIl0sZmllbGRTdWJUcGw6WyI8dHBsIGlmPVwiYm94TGFiZWwgJiYgYm94TGFiZWxBbGlnbiA9PSAnYmVmb3JlJ1wiPiIsIntiZWZvcmVCb3hMYWJlbFRwbH0iLCc8bGFiZWwgaWQ9IntjbXBJZH0tYm94TGFiZWxFbCIge2JveExhYmVsQXR0clRwbH0gY2xhc3M9Intib3hMYWJlbENsc30ge2JveExhYmVsQ2xzfS17Ym94TGFiZWxBbGlnbn0iIGZvcj0ie2lkfSI+Jywie2JlZm9yZUJveExhYmVsVGV4dFRwbH0iLCJ7Ym94TGFiZWx9Iiwie2FmdGVyQm94TGFiZWxUZXh0VHBsfSIsIjwvbGFiZWw+Iiwie2FmdGVyQm94TGFiZWxUcGx9IiwiPC90cGw+IiwnPGlucHV0IHR5cGU9ImJ1dHRvbiIgaWQ9IntpZH0iIHtpbnB1dEF0dHJUcGx9JywnPHRwbCBpZj0idGFiSWR4Ij4gdGFiSW5kZXg9Int0YWJJZHh9IjwvdHBsPicsJzx0cGwgaWY9ImRpc2FibGVkIj4gZGlzYWJsZWQ9ImRpc2FibGVkIjwvdHBsPicsJzx0cGwgaWY9ImZpZWxkU3R5bGUiPiBzdHlsZT0ie2ZpZWxkU3R5bGV9IjwvdHBsPicsJyBjbGFzcz0ie2ZpZWxkQ2xzfSB7dHlwZUNsc30iIGF1dG9jb21wbGV0ZT0ib2ZmIiBoaWRlZm9jdXM9InRydWUiIC8+JywiPHRwbCBpZj1cImJveExhYmVsICYmIGJveExhYmVsQWxpZ24gPT0gJ2FmdGVyJ1wiPiIsIntiZWZvcmVCb3hMYWJlbFRwbH0iLCc8bGFiZWwgaWQ9IntjbXBJZH0tYm94TGFiZWxFbCIge2JveExhYmVsQXR0clRwbH0gY2xhc3M9Intib3hMYWJlbENsc30ge2JveExhYmVsQ2xzfS17Ym94TGFiZWxBbGlnbn0iIGZvcj0ie2lkfSI+Jywie2JlZm9yZUJveExhYmVsVGV4dFRwbH0iLCJ7Ym94TGFiZWx9Iiwie2FmdGVyQm94TGFiZWxUZXh0VHBsfSIsIjwvbGFiZWw+Iiwie2FmdGVyQm94TGFiZWxUcGx9IiwiPC90cGw+Iix7ZGlzYWJsZUZvcm1hdHM6dHJ1ZSxjb21waWxlZDp0cnVlfV0sc3ViVHBsSW5zZXJ0aW9uczpbImJlZm9yZUJveExhYmVsVHBsIiwiYWZ0ZXJCb3hMYWJlbFRwbCIsImJlZm9yZUJveExhYmVsVGV4dFRwbCIsImFmdGVyQm94TGFiZWxUZXh0VHBsIiwiYm94TGFiZWxBdHRyVHBsIiwiaW5wdXRBdHRyVHBsIl0saXNDaGVja2JveDp0cnVlLGZvY3VzQ2xzOiJmb3JtLWNiLWZvY3VzIixmaWVsZEJvZHlDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0tY2Itd3JhcCIsY2hlY2tlZDpmYWxzZSxjaGVja2VkQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLWNiLWNoZWNrZWQiLGJveExhYmVsQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLWNiLWxhYmVsIixib3hMYWJlbEFsaWduOiJhZnRlciIsaW5wdXRWYWx1ZToib24iLGNoZWNrQ2hhbmdlRXZlbnRzOltdLGlucHV0VHlwZToiY2hlY2tib3giLG9uUmU6L15vbiQvaSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5nZXRNYW5hZ2VyKCkuYWRkKHRoaXMpfSxpbml0VmFsdWU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9ISFiLmNoZWNrZWQ7Yi5vcmlnaW5hbFZhbHVlPWIubGFzdFZhbHVlPWE7Yi5zZXRWYWx1ZShhKX0sZ2V0RWxDb25maWc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuaXNDaGVja2VkKGEucmF3VmFsdWUsYS5pbnB1dFZhbHVlKSl7YS5hZGRDbHMoYS5jaGVja2VkQ2xzKX1yZXR1cm4gYS5jYWxsUGFyZW50KCl9LGdldEZpZWxkU3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmlzT2JqZWN0KHRoaXMuZmllbGRTdHlsZSk/RXh0LkRvbUhlbHBlci5nZW5lcmF0ZVN0eWxlcyh0aGlzLmZpZWxkU3R5bGUpOnRoaXMuZmllbGRTdHlsZXx8IiJ9LGdldFN1YlRwbERhdGE6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiBFeHQuYXBwbHkoYS5jYWxsUGFyZW50KCkse2Rpc2FibGVkOmEucmVhZE9ubHl8fGEuZGlzYWJsZWQsYm94TGFiZWw6YS5ib3hMYWJlbCxib3hMYWJlbENsczphLmJveExhYmVsQ2xzLGJveExhYmVsQWxpZ246YS5ib3hMYWJlbEFsaWdufSl9LGluaXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudCgpO2EubW9uKGEuaW5wdXRFbCwiY2xpY2siLGEub25Cb3hDbGljayxhKX0sb25Cb3hDbGljazpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKCFhLmRpc2FibGVkJiYhYS5yZWFkT25seSl7dGhpcy5zZXRWYWx1ZSghdGhpcy5jaGVja2VkKX19LGdldFJhd1ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hlY2tlZH0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGVja2VkfSxnZXRTdWJtaXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMudW5jaGVja2VkVmFsdWUsYj1FeHQuaXNEZWZpbmVkKGEpP2E6bnVsbDtyZXR1cm4gdGhpcy5jaGVja2VkP3RoaXMuaW5wdXRWYWx1ZTpifSxpc0NoZWNrZWQ6ZnVuY3Rpb24oYixhKXtyZXR1cm4oYj09PXRydWV8fGI9PT0idHJ1ZSJ8fGI9PT0iMSJ8fGI9PT0xfHwoKChFeHQuaXNTdHJpbmcoYil8fEV4dC5pc051bWJlcihiKSkmJmEpP2I9PWE6dGhpcy5vblJlLnRlc3QoYikpKX0sc2V0UmF3VmFsdWU6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxkPWIuaW5wdXRFbCxhPWIuaXNDaGVja2VkKGMsYi5pbnB1dFZhbHVlKTtpZihkKXtiW2E/ImFkZENscyI6InJlbW92ZUNscyJdKGIuY2hlY2tlZENscyl9Yi5jaGVja2VkPWIucmF3VmFsdWU9YTtyZXR1cm4gYX0sc2V0VmFsdWU6ZnVuY3Rpb24oZyl7dmFyIGU9dGhpcyxjLGIsYSxkO2lmKEV4dC5pc0FycmF5KGcpKXtjPWUuZ2V0TWFuYWdlcigpLmdldEJ5TmFtZShlLm5hbWUsZS5nZXRGb3JtSWQoKSkuaXRlbXM7YT1jLmxlbmd0aDtmb3IoYj0wO2I8YTsrK2Ipe2Q9Y1tiXTtkLnNldFZhbHVlKEV4dC5BcnJheS5jb250YWlucyhnLGQuaW5wdXRWYWx1ZSkpfX1lbHNle2UuY2FsbFBhcmVudChhcmd1bWVudHMpfXJldHVybiBlfSx2YWx1ZVRvUmF3OmZ1bmN0aW9uKGEpe3JldHVybiBhfSxvbkNoYW5nZTpmdW5jdGlvbihiLGEpe3ZhciBkPXRoaXMsYz1kLmhhbmRsZXI7aWYoYyl7Yy5jYWxsKGQuc2NvcGV8fGQsZCxiKX1kLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0scmVzZXRPcmlnaW5hbFZhbHVlOmZ1bmN0aW9uKGIpe3ZhciBnPXRoaXMsZCxlLGEsYztpZighYil7ZD1nLmdldE1hbmFnZXIoKS5nZXRCeU5hbWUoZy5uYW1lLGcuZ2V0Rm9ybUlkKCkpLml0ZW1zO2E9ZC5sZW5ndGg7Zm9yKGM9MDtjPGE7KytjKXtlPWRbY107aWYoZSE9PWcpe2RbY10ucmVzZXRPcmlnaW5hbFZhbHVlKHRydWUpfX19Zy5jYWxsUGFyZW50KCl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt0aGlzLmdldE1hbmFnZXIoKS5yZW1vdmVBdEtleSh0aGlzLmlkKX0sZ2V0TWFuYWdlcjpmdW5jdGlvbigpe3JldHVybiBFeHQuZm9ybS5DaGVja2JveE1hbmFnZXJ9LG9uRW5hYmxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuaW5wdXRFbDthLmNhbGxQYXJlbnQoKTtpZihiKXtiLmRvbS5kaXNhYmxlZD1hLnJlYWRPbmx5fX0sc2V0UmVhZE9ubHk6ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcyxiPWEuaW5wdXRFbDtpZihiKXtiLmRvbS5kaXNhYmxlZD0hIWN8fGEuZGlzYWJsZWR9YS5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGdldEZvcm1JZDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYTtpZighYi5mb3JtSWQpe2E9Yi51cCgiZm9ybSIpO2lmKGEpe2IuZm9ybUlkPWEuaWR9fXJldHVybiBiLmZvcm1JZH19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbXBvbmVudC5maWVsZC5UcmlnZ2VyIix7YWxpYXM6ImxheW91dC50cmlnZ2VyZmllbGQiLGV4dGVuZDoiRXh0LmxheW91dC5jb21wb25lbnQuZmllbGQuRmllbGQiLHR5cGU6InRyaWdnZXJmaWVsZCIsYmVnaW5MYXlvdXQ6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcyxhPWMub3duZXIsYjtkLnRyaWdnZXJXcmFwPWQuZ2V0RWwoInRyaWdnZXJXcmFwIik7Yy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7Yj1hLmdldFRyaWdnZXJTdGF0ZUZsYWdzKCk7aWYoYiE9YS5sYXN0VHJpZ2dlclN0YXRlRmxhZ3Mpe2EubGFzdFRyaWdnZXJTdGF0ZUZsYWdzPWI7Yy51cGRhdGVFZGl0U3RhdGUoKX19LGJlZ2luTGF5b3V0Rml4ZWQ6ZnVuY3Rpb24oZyxjLGgpe3ZhciBkPXRoaXMsYT1nLnRhcmdldCxlPWQuaWVJbnB1dFdpZHRoQWRqdXN0bWVudHx8MCxpPSIxMDAlIixiPWEudHJpZ2dlcldyYXA7ZC5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YS5pbnB1dENlbGwuc2V0U3R5bGUoIndpZHRoIiwiMTAwJSIpO2lmKGUpe2EuaW5wdXRDZWxsLnNldFN0eWxlKCJwYWRkaW5nLXJpZ2h0IixlKyJweCIpO2lmKGg9PT0icHgiKXtpZihhLmlucHV0V2lkdGgpe2k9YS5pbnB1dFdpZHRoLWEuZ2V0VHJpZ2dlcldpZHRoKCl9ZWxzZXtpPWMtZS1hLmdldFRyaWdnZXJXaWR0aCgpfWkrPSJweCJ9fWEuaW5wdXRFbC5zZXRTdHlsZSgid2lkdGgiLGkpO2k9YS5pbnB1dFdpZHRoO2lmKGkpe2Iuc2V0U3R5bGUoIndpZHRoIixpKyhlKSsicHgiKX1lbHNle2Iuc2V0U3R5bGUoIndpZHRoIixjK2gpfWIuc2V0U3R5bGUoInRhYmxlLWxheW91dCIsImZpeGVkIil9LGJlZ2luTGF5b3V0U2hyaW5rV3JhcDpmdW5jdGlvbihkKXt2YXIgYT1kLnRhcmdldCxnPSIiLGU9YS5pbnB1dFdpZHRoLGI9YS50cmlnZ2VyV3JhcCxjPXRoaXMuaWVJbnB1dFdpZHRoQWRqdXN0bWVudHx8MDt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihlKXtiLnNldFN0eWxlKCJ3aWR0aCIsZSsicHgiKTtlPShlLWEuZ2V0VHJpZ2dlcldpZHRoKCkpKyJweCI7YS5pbnB1dEVsLnNldFN0eWxlKCJ3aWR0aCIsZSk7YS5pbnB1dENlbGwuc2V0U3R5bGUoIndpZHRoIixlKX1lbHNle2EuaW5wdXRDZWxsLnNldFN0eWxlKCJ3aWR0aCIsZyk7YS5pbnB1dEVsLnNldFN0eWxlKCJ3aWR0aCIsZyk7Yi5zZXRTdHlsZSgid2lkdGgiLGcpO2Iuc2V0U3R5bGUoInRhYmxlLWxheW91dCIsImF1dG8iKX19LGdldFRleHRXaWR0aDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLm93bmVyLGQ9YS5pbnB1dEVsLGM7Yz0oZC5kb20udmFsdWV8fChhLmhhc0ZvY3VzPyIiOmEuZW1wdHlUZXh0KXx8IiIpK2EuZ3Jvd0FwcGVuZDtyZXR1cm4gZC5nZXRUZXh0V2lkdGgoYyl9LG1lYXN1cmVDb250ZW50V2lkdGg6ZnVuY3Rpb24oaCl7dmFyIGc9dGhpcyxiPWcub3duZXIsZT1nLmNhbGxQYXJlbnQoYXJndW1lbnRzKSxpPWguaW5wdXRDb250ZXh0LGQsYSxjO2lmKGIuZ3JvdyYmIWguc3RhdGUuZ3Jvd0hhbmRsZWQpe2Q9Zy5nZXRUZXh0V2lkdGgoKStoLmlucHV0Q29udGV4dC5nZXRGcmFtZUluZm8oKS53aWR0aDthPWIuZ3Jvd01heDtjPU1hdGgubWluKGEsZSk7YT1NYXRoLm1heChiLmdyb3dNaW4sYSxjKTtkPUV4dC5OdW1iZXIuY29uc3RyYWluKGQsYi5ncm93TWluLGEpO2kuc2V0V2lkdGgoZCk7aC5zdGF0ZS5ncm93SGFuZGxlZD10cnVlO2kuZG9tQmxvY2soZywid2lkdGgiKTtlPU5hTn1yZXR1cm4gZX0sdXBkYXRlRWRpdFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxhPWMub3duZXIsZT1hLmlucHV0RWwsZD1FeHQuYmFzZUNTU1ByZWZpeCsidHJpZ2dlci1ub2VkaXQiLGIsZztpZihjLm93bmVyLnJlYWRPbmx5KXtlLmFkZENscyhkKTtnPXRydWU7Yj1mYWxzZX1lbHNle2lmKGMub3duZXIuZWRpdGFibGUpe2UucmVtb3ZlQ2xzKGQpO2c9ZmFsc2V9ZWxzZXtlLmFkZENscyhkKTtnPXRydWV9Yj0hYy5vd25lci5oaWRlVHJpZ2dlcn1hLnRyaWdnZXJDZWxsLnNldERpc3BsYXllZChiKTtlLmRvbS5yZWFkT25seT1nfX0pO0V4dC5kZWZpbmUoIkV4dC5sYXlvdXQuY29tcG9uZW50LmZpZWxkLkNvbWJvQm94Iix7ZXh0ZW5kOiJFeHQubGF5b3V0LmNvbXBvbmVudC5maWVsZC5UcmlnZ2VyIixhbGlhczoibGF5b3V0LmNvbWJvYm94IixyZXF1aXJlczpbIkV4dC51dGlsLlRleHRNZXRyaWNzIl0sdHlwZToiY29tYm9ib3giLHN0YXJ0aW5nV2lkdGg6bnVsbCxnZXRUZXh0V2lkdGg6ZnVuY3Rpb24oKXt2YXIgaD10aGlzLGI9aC5vd25lcixsPWIuc3RvcmUsaj1iLmRpc3BsYXlGaWVsZCxkPWwuZGF0YS5sZW5ndGgsaz0iIixlPTAsYz0wLGcsbSxhO2Zvcig7ZTxkO2UrKyl7bT1sLmdldEF0KGUpLmRhdGFbal07Zz1tLmxlbmd0aDtpZihnPmMpe2M9ZztrPW19fWE9TWF0aC5tYXgoaC5jYWxsUGFyZW50KGFyZ3VtZW50cyksYi5pbnB1dEVsLmdldFRleHRXaWR0aChrK2IuZ3Jvd0FwcGVuZCkpO2lmKCFoLnN0YXJ0aW5nV2lkdGh8fGIucmVtb3ZpbmdSZWNvcmRzKXtoLnN0YXJ0aW5nV2lkdGg9YTtpZihhPGIuZ3Jvd01pbil7Yi5kZWZhdWx0TGlzdENvbmZpZy5taW5XaWR0aD1iLmdyb3dNaW59Yi5yZW1vdmluZ1JlY29yZHM9ZmFsc2V9cmV0dXJuKGE8aC5zdGFydGluZ1dpZHRoKT9oLnN0YXJ0aW5nV2lkdGg6YX19KTtFeHQuZGVmaW5lKCJFeHQuZm9ybS5maWVsZC5UcmlnZ2VyIix7ZXh0ZW5kOiJFeHQuZm9ybS5maWVsZC5UZXh0IixhbGlhczpbIndpZGdldC50cmlnZ2VyZmllbGQiLCJ3aWRnZXQudHJpZ2dlciJdLHJlcXVpcmVzOlsiRXh0LkRvbUhlbHBlciIsIkV4dC51dGlsLkNsaWNrUmVwZWF0ZXIiLCJFeHQubGF5b3V0LmNvbXBvbmVudC5maWVsZC5UcmlnZ2VyIl0sYWx0ZXJuYXRlQ2xhc3NOYW1lOlsiRXh0LmZvcm0uVHJpZ2dlckZpZWxkIiwiRXh0LmZvcm0uVHdpblRyaWdnZXJGaWVsZCIsIkV4dC5mb3JtLlRyaWdnZXIiXSxjaGlsZEVsczpbe25hbWU6InRyaWdnZXJDZWxsIixzZWxlY3Q6Ii4iK0V4dC5iYXNlQ1NTUHJlZml4KyJ0cmlnZ2VyLWNlbGwifSx7bmFtZToidHJpZ2dlckVsIixzZWxlY3Q6Ii4iK0V4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLXRyaWdnZXIifSwidHJpZ2dlcldyYXAiLCJpbnB1dENlbGwiXSx0cmlnZ2VyQmFzZUNsczpFeHQuYmFzZUNTU1ByZWZpeCsiZm9ybS10cmlnZ2VyIix0cmlnZ2VyV3JhcENsczpFeHQuYmFzZUNTU1ByZWZpeCsiZm9ybS10cmlnZ2VyLXdyYXAiLHRyaWdnZXJOb0VkaXRDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInRyaWdnZXItbm9lZGl0IixoaWRlVHJpZ2dlcjpmYWxzZSxlZGl0YWJsZTp0cnVlLHJlYWRPbmx5OmZhbHNlLHJlcGVhdFRyaWdnZXJDbGljazpmYWxzZSxhdXRvU2l6ZTpFeHQuZW1wdHlGbixtb25pdG9yVGFiOnRydWUsbWltaWNpbmc6ZmFsc2UsdHJpZ2dlckluZGV4UmU6L3RyaWdnZXItaW5kZXgtKFxkKykvLGNvbXBvbmVudExheW91dDoidHJpZ2dlcmZpZWxkIixpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dGhpcy53cmFwRm9jdXNDbHM9dGhpcy50cmlnZ2VyV3JhcENscysiLWZvY3VzIjt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sZ2V0U3ViVHBsTWFya3VwOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY2FsbFBhcmVudChhcmd1bWVudHMpO3JldHVybic8dGFibGUgaWQ9IicrYS5pZCsnLXRyaWdnZXJXcmFwIiBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsnZm9ybS10cmlnZ2VyLXdyYXAiIGNlbGxwYWRkaW5nPSIwIiBjZWxsc3BhY2luZz0iMCI+PHRib2R5Pjx0cj48dGQgaWQ9IicrYS5pZCsnLWlucHV0Q2VsbCIgY2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrJ2Zvcm0tdHJpZ2dlci1pbnB1dC1jZWxsIj4nK2IrIjwvdGQ+IithLmdldFRyaWdnZXJNYXJrdXAoKSsiPC90cj48L3Rib2R5PjwvdGFibGU+In0sZ2V0U3ViVHBsRGF0YTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1iLmNhbGxQYXJlbnQoKSxkPWIucmVhZE9ubHk9PT10cnVlLGE9Yi5lZGl0YWJsZSE9PWZhbHNlO3JldHVybiBFeHQuYXBwbHkoYyx7ZWRpdGFibGVDbHM6KGR8fCFhKT8iICIrYi50cmlnZ2VyTm9FZGl0Q2xzOiIiLHJlYWRPbmx5OiFhfHxkfSl9LGdldExhYmVsYWJsZVJlbmRlckRhdGE6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9Yi50cmlnZ2VyV3JhcENscyxhPWIuY2FsbFBhcmVudChhcmd1bWVudHMpO3JldHVybiBFeHQuYXBwbHlJZihhLHt0cmlnZ2VyV3JhcENsczpjLHRyaWdnZXJNYXJrdXA6Yi5nZXRUcmlnZ2VyTWFya3VwKCl9KX0sZ2V0VHJpZ2dlck1hcmt1cDpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYj0wLGQ9KGMucmVhZE9ubHl8fGMuaGlkZVRyaWdnZXIpLGcsZT1jLnRyaWdnZXJCYXNlQ2xzLGE9W107aWYoIWMudHJpZ2dlcjFDbHMpe2MudHJpZ2dlcjFDbHM9Yy50cmlnZ2VyQ2xzfWZvcihiPTA7KGc9Y1sidHJpZ2dlciIrKGIrMSkrIkNscyJdKXx8YjwxO2IrKyl7YS5wdXNoKHt0YWc6InRkIix2YWxpZ246InRvcCIsY2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ0cmlnZ2VyLWNlbGwiLHN0eWxlOiJ3aWR0aDoiK2MudHJpZ2dlcldpZHRoKyhkPyJweDtkaXNwbGF5Om5vbmUiOiJweCIpLGNuOntjbHM6W0V4dC5iYXNlQ1NTUHJlZml4KyJ0cmlnZ2VyLWluZGV4LSIrYixlLGddLmpvaW4oIiAiKSxyb2xlOiJidXR0b24ifX0pfWFbYi0xXS5jbi5jbHMrPSIgIitlKyItbGFzdCI7cmV0dXJuIEV4dC5Eb21IZWxwZXIubWFya3VwKGEpfSxkaXNhYmxlQ2hlY2s6ZnVuY3Rpb24oKXtyZXR1cm4gIXRoaXMuZGlzYWJsZWR9LGJlZm9yZVJlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLnRyaWdnZXJCYXNlQ2xzLGM7aWYoIWEudHJpZ2dlcldpZHRoKXtjPUV4dC5yZXNldEVsZW1lbnQuY3JlYXRlQ2hpbGQoe3N0eWxlOiJwb3NpdGlvbjogYWJzb2x1dGU7IixjbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0tdHJpZ2dlciJ9KTtFeHQuZm9ybS5maWVsZC5UcmlnZ2VyLnByb3RvdHlwZS50cmlnZ2VyV2lkdGg9Yy5nZXRXaWR0aCgpO2MucmVtb3ZlKCl9YS5jYWxsUGFyZW50KCk7aWYoYiE9RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0tdHJpZ2dlciIpe2EuYWRkQ2hpbGRFbHMoe25hbWU6InRyaWdnZXJFbCIsc2VsZWN0OiIuIitifSl9YS5sYXN0VHJpZ2dlclN0YXRlRmxhZ3M9YS5nZXRUcmlnZ2VyU3RhdGVGbGFncygpfSxvblJlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YS5kb2M9RXh0LmdldERvYygpO2EuaW5pdFRyaWdnZXIoKTthLnRyaWdnZXJFbC51bnNlbGVjdGFibGUoKX0sZ2V0VHJpZ2dlcldpZHRoOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPTA7aWYoYi50cmlnZ2VyV3JhcCYmIWIuaGlkZVRyaWdnZXImJiFiLnJlYWRPbmx5KXthPWIudHJpZ2dlckVsLmdldENvdW50KCkqYi50cmlnZ2VyV2lkdGh9cmV0dXJuIGF9LHNldEhpZGVUcmlnZ2VyOmZ1bmN0aW9uKGEpe2lmKGEhPXRoaXMuaGlkZVRyaWdnZXIpe3RoaXMuaGlkZVRyaWdnZXI9YTt0aGlzLnVwZGF0ZUxheW91dCgpfX0sc2V0RWRpdGFibGU6ZnVuY3Rpb24oYSl7aWYoYSE9dGhpcy5lZGl0YWJsZSl7dGhpcy5lZGl0YWJsZT1hO3RoaXMudXBkYXRlTGF5b3V0KCl9fSxzZXRSZWFkT25seTpmdW5jdGlvbihhKXtpZihhIT10aGlzLnJlYWRPbmx5KXt0aGlzLnJlYWRPbmx5PWE7dGhpcy51cGRhdGVMYXlvdXQoKX19LGluaXRUcmlnZ2VyOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxpPWgudHJpZ2dlcldyYXAsaz1oLnRyaWdnZXJFbCxhPWguZGlzYWJsZUNoZWNrLGQsYyxiLGcsajtpZihoLnJlcGVhdFRyaWdnZXJDbGljayl7aC50cmlnZ2VyUmVwZWF0ZXI9bmV3IEV4dC51dGlsLkNsaWNrUmVwZWF0ZXIoaSx7cHJldmVudERlZmF1bHQ6dHJ1ZSxoYW5kbGVyOmgub25UcmlnZ2VyV3JhcENsaWNrLGxpc3RlbmVyczp7bW91c2V1cDpoLm9uVHJpZ2dlcldyYXBNb3VzZXVwLHNjb3BlOmh9LHNjb3BlOmh9KX1lbHNle2gubW9uKGkse2NsaWNrOmgub25UcmlnZ2VyV3JhcENsaWNrLG1vdXNldXA6aC5vblRyaWdnZXJXcmFwTW91c2V1cCxzY29wZTpofSl9ay5zZXRWaXNpYmlsaXR5TW9kZShFeHQuRWxlbWVudC5ESVNQTEFZKTtrLmFkZENsc09uT3ZlcihoLnRyaWdnZXJCYXNlQ2xzKyItb3ZlciIsYSxoKTtkPWsuZWxlbWVudHM7Yz1kLmxlbmd0aDtmb3IoZz0wO2c8YztnKyspe2I9ZFtnXTtqPWcrMTtiLmFkZENsc09uT3ZlcihoWyJ0cmlnZ2VyIisoaikrIkNscyJdKyItb3ZlciIsYSxoKTtiLmFkZENsc09uQ2xpY2soaFsidHJpZ2dlciIrKGopKyJDbHMiXSsiLWNsaWNrIixhLGgpfWsuYWRkQ2xzT25DbGljayhoLnRyaWdnZXJCYXNlQ2xzKyItY2xpY2siLGEsaCl9LG9uRGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7RXh0LmRlc3Ryb3lNZW1iZXJzKGEsInRyaWdnZXJSZXBlYXRlciIsInRyaWdnZXJXcmFwIiwidHJpZ2dlckVsIik7ZGVsZXRlIGEuZG9jO2EuY2FsbFBhcmVudCgpfSxvbkZvY3VzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZighYS5taW1pY2luZyl7YS5ib2R5RWwuYWRkQ2xzKGEud3JhcEZvY3VzQ2xzKTthLm1pbWljaW5nPXRydWU7YS5tb24oYS5kb2MsIm1vdXNlZG93biIsYS5taW1pY0JsdXIsYSx7ZGVsYXk6MTB9KTtpZihhLm1vbml0b3JUYWIpe2Eub24oInNwZWNpYWxrZXkiLGEuY2hlY2tUYWIsYSl9fX0sY2hlY2tUYWI6ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5pZ25vcmVNb25pdG9yVGFiJiZiLmdldEtleSgpPT1iLlRBQil7dGhpcy50cmlnZ2VyQmx1cigpfX0sZ2V0VHJpZ2dlclN0YXRlRmxhZ3M6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9MDtpZihhLnJlYWRPbmx5KXtiKz0xfWlmKGEuZWRpdGFibGUpe2IrPTJ9aWYoYS5oaWRlVHJpZ2dlcil7Yis9NH1yZXR1cm4gYn0sb25CbHVyOkV4dC5lbXB0eUZuLG1pbWljQmx1cjpmdW5jdGlvbihhKXtpZighdGhpcy5pc0Rlc3Ryb3llZCYmIXRoaXMuYm9keUVsLmNvbnRhaW5zKGEudGFyZ2V0KSYmdGhpcy52YWxpZGF0ZUJsdXIoYSkpe3RoaXMudHJpZ2dlckJsdXIoYSl9fSx0cmlnZ2VyQmx1cjpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2EubWltaWNpbmc9ZmFsc2U7YS5tdW4oYS5kb2MsIm1vdXNlZG93biIsYS5taW1pY0JsdXIsYSk7aWYoYS5tb25pdG9yVGFiJiZhLmlucHV0RWwpe2EudW4oInNwZWNpYWxrZXkiLGEuY2hlY2tUYWIsYSl9RXh0LmZvcm0uZmllbGQuVHJpZ2dlci5zdXBlcmNsYXNzLm9uQmx1ci5jYWxsKGEsYik7aWYoYS5ib2R5RWwpe2EuYm9keUVsLnJlbW92ZUNscyhhLndyYXBGb2N1c0Nscyl9fSx2YWxpZGF0ZUJsdXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRydWV9LG9uVHJpZ2dlcldyYXBDbGljazpmdW5jdGlvbigpe3ZhciBkPXRoaXMsZSxiLGEsYztjPWFyZ3VtZW50c1tkLnRyaWdnZXJSZXBlYXRlcj8xOjBdO2lmKGMmJiFkLnJlYWRPbmx5JiYhZC5kaXNhYmxlZCl7ZT1jLmdldFRhcmdldCgiLiIrZC50cmlnZ2VyQmFzZUNscyxudWxsKTtiPWUmJmUuY2xhc3NOYW1lLm1hdGNoKGQudHJpZ2dlckluZGV4UmUpO2lmKGIpe2E9ZFsib25UcmlnZ2VyIisocGFyc2VJbnQoYlsxXSwxMCkrMSkrIkNsaWNrIl18fGQub25UcmlnZ2VyQ2xpY2s7aWYoYSl7YS5jYWxsKGQsYyl9fX19LG9uVHJpZ2dlcldyYXBNb3VzZXVwOkV4dC5lbXB0eUZuLG9uVHJpZ2dlckNsaWNrOkV4dC5lbXB0eUZufSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uZmllbGQuUGlja2VyIix7ZXh0ZW5kOiJFeHQuZm9ybS5maWVsZC5UcmlnZ2VyIixhbGlhczoid2lkZ2V0LnBpY2tlcmZpZWxkIixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5mb3JtLlBpY2tlciIscmVxdWlyZXM6WyJFeHQudXRpbC5LZXlOYXYiXSxtYXRjaEZpZWxkV2lkdGg6dHJ1ZSxwaWNrZXJBbGlnbjoidGwtYmw/IixvcGVuQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJwaWNrZXJmaWVsZC1vcGVuIixlZGl0YWJsZTp0cnVlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt0aGlzLmFkZEV2ZW50cygiZXhwYW5kIiwiY29sbGFwc2UiLCJzZWxlY3QiKX0saW5pdEV2ZW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KCk7YS5rZXlOYXY9bmV3IEV4dC51dGlsLktleU5hdihhLmlucHV0RWwse2Rvd246YS5vbkRvd25BcnJvdyxlc2M6e2hhbmRsZXI6YS5vbkVzYyxzY29wZTphLGRlZmF1bHRFdmVudEFjdGlvbjpmYWxzZX0sc2NvcGU6YSxmb3JjZUtleURvd246dHJ1ZX0pO2lmKCFhLmVkaXRhYmxlKXthLm1vbihhLmlucHV0RWwsImNsaWNrIixhLm9uVHJpZ2dlckNsaWNrLGEpfWlmKEV4dC5pc0dlY2tvKXthLmlucHV0RWwuZG9tLnNldEF0dHJpYnV0ZSgiYXV0b2NvbXBsZXRlIiwib2ZmIil9fSxvbkVzYzpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKGEuaXNFeHBhbmRlZCl7YS5jb2xsYXBzZSgpO2Iuc3RvcEV2ZW50KCl9ZWxzZXtpZihhLnVwKCJ3aW5kb3ciKSl7YS5ibHVyKCl9ZWxzZXtpZigoIUV4dC5Gb2N1c01hbmFnZXJ8fCFFeHQuRm9jdXNNYW5hZ2VyLmVuYWJsZWQpKXtiLnN0b3BFdmVudCgpfX19fSxvbkRvd25BcnJvdzpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V4cGFuZGVkKXt0aGlzLm9uVHJpZ2dlckNsaWNrKCl9fSxleHBhbmQ6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGEsYixkO2lmKGMucmVuZGVyZWQmJiFjLmlzRXhwYW5kZWQmJiFjLmlzRGVzdHJveWVkKXthPWMuYm9keUVsO2I9Yy5nZXRQaWNrZXIoKTtkPWMuY29sbGFwc2VJZjtiLnNob3coKTtjLmlzRXhwYW5kZWQ9dHJ1ZTtjLmFsaWduUGlja2VyKCk7YS5hZGRDbHMoYy5vcGVuQ2xzKTtjLm1vbihFeHQuZ2V0RG9jKCkse21vdXNld2hlZWw6ZCxtb3VzZWRvd246ZCxzY29wZTpjfSk7RXh0LkV2ZW50TWFuYWdlci5vbldpbmRvd1Jlc2l6ZShjLmFsaWduUGlja2VyLGMpO2MuZmlyZUV2ZW50KCJleHBhbmQiLGMpO2Mub25FeHBhbmQoKX19LG9uRXhwYW5kOkV4dC5lbXB0eUZuLGFsaWduUGlja2VyOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuZ2V0UGlja2VyKCk7aWYoYi5pc0V4cGFuZGVkKXtpZihiLm1hdGNoRmllbGRXaWR0aCl7YS5zZXRXaWR0aChiLmJvZHlFbC5nZXRXaWR0aCgpKX1pZihhLmlzRmxvYXRpbmcoKSl7Yi5kb0FsaWduKCl9fX0sZG9BbGlnbjpmdW5jdGlvbigpe3ZhciBkPXRoaXMsYz1kLnBpY2tlcixhPSItYWJvdmUiLGI7ZC5waWNrZXIuYWxpZ25UbyhkLmlucHV0RWwsZC5waWNrZXJBbGlnbixkLnBpY2tlck9mZnNldCk7Yj1jLmVsLmdldFkoKTxkLmlucHV0RWwuZ2V0WSgpO2QuYm9keUVsW2I/ImFkZENscyI6InJlbW92ZUNscyJdKGQub3BlbkNscythKTtjW2I/ImFkZENscyI6InJlbW92ZUNscyJdKGMuYmFzZUNscythKX0sY29sbGFwc2U6ZnVuY3Rpb24oKXtpZih0aGlzLmlzRXhwYW5kZWQmJiF0aGlzLmlzRGVzdHJveWVkKXt2YXIgZD10aGlzLGM9ZC5vcGVuQ2xzLGI9ZC5waWNrZXIsZT1FeHQuZ2V0RG9jKCksZz1kLmNvbGxhcHNlSWYsYT0iLWFib3ZlIjtiLmhpZGUoKTtkLmlzRXhwYW5kZWQ9ZmFsc2U7ZC5ib2R5RWwucmVtb3ZlQ2xzKFtjLGMrYV0pO2IuZWwucmVtb3ZlQ2xzKGIuYmFzZUNscythKTtlLnVuKCJtb3VzZXdoZWVsIixnLGQpO2UudW4oIm1vdXNlZG93biIsZyxkKTtFeHQuRXZlbnRNYW5hZ2VyLnJlbW92ZVJlc2l6ZUxpc3RlbmVyKGQuYWxpZ25QaWNrZXIsZCk7ZC5maXJlRXZlbnQoImNvbGxhcHNlIixkKTtkLm9uQ29sbGFwc2UoKX19LG9uQ29sbGFwc2U6RXh0LmVtcHR5Rm4sY29sbGFwc2VJZjpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKCFhLmlzRGVzdHJveWVkJiYhYi53aXRoaW4oYS5ib2R5RWwsZmFsc2UsdHJ1ZSkmJiFiLndpdGhpbihhLnBpY2tlci5lbCxmYWxzZSx0cnVlKSYmIWEuaXNFdmVudFdpdGhpblBpY2tlckxvYWRNYXNrKGIpKXthLmNvbGxhcHNlKCl9fSxnZXRQaWNrZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiBhLnBpY2tlcnx8KGEucGlja2VyPWEuY3JlYXRlUGlja2VyKCkpfSxjcmVhdGVQaWNrZXI6RXh0LmVtcHR5Rm4sb25UcmlnZ2VyQ2xpY2s6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKCFhLnJlYWRPbmx5JiYhYS5kaXNhYmxlZCl7aWYoYS5pc0V4cGFuZGVkKXthLmNvbGxhcHNlKCl9ZWxzZXthLmV4cGFuZCgpfWEuaW5wdXRFbC5mb2N1cygpfX0sbWltaWNCbHVyOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLnBpY2tlcjtpZighYXx8IWMud2l0aGluKGEuZWwsZmFsc2UsdHJ1ZSkmJiFiLmlzRXZlbnRXaXRoaW5QaWNrZXJMb2FkTWFzayhjKSl7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyl9fSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5waWNrZXI7RXh0LkV2ZW50TWFuYWdlci5yZW1vdmVSZXNpemVMaXN0ZW5lcihiLmFsaWduUGlja2VyLGIpO0V4dC5kZXN0cm95KGIua2V5TmF2KTtpZihhKXtkZWxldGUgYS5waWNrZXJGaWVsZDthLmRlc3Ryb3koKX1iLmNhbGxQYXJlbnQoKX0saXNFdmVudFdpdGhpblBpY2tlckxvYWRNYXNrOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMucGlja2VyLmxvYWRNYXNrO3JldHVybiBhP2Iud2l0aGluKGEubWFza0VsLGZhbHNlLHRydWUpfHxiLndpdGhpbihhLmVsLGZhbHNlLHRydWUpOmZhbHNlfX0pO0V4dC5kZWZpbmUoIkV4dC5sYXlvdXQuY29tcG9uZW50LkJvdW5kTGlzdCIse2V4dGVuZDoiRXh0LmxheW91dC5jb21wb25lbnQuQXV0byIsYWxpYXM6ImxheW91dC5ib3VuZGxpc3QiLHR5cGU6ImNvbXBvbmVudCIsYmVnaW5MYXlvdXQ6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcyxhPWMub3duZXIsYj1hLnBhZ2luZ1Rvb2xiYXI7Yy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYS5mbG9hdGluZyl7ZC5zYXZlZFhZPWEuZWwuZ2V0WFkoKTthLmVsLnNldFhZKFstOTk5OSwtOTk5OV0pfWlmKGIpe2QudG9vbGJhckNvbnRleHQ9ZC5jb250ZXh0LmdldENtcChiKX1kLmxpc3RDb250ZXh0PWQuZ2V0RWwoImxpc3RFbCIpfSxiZWdpbkxheW91dEN5Y2xlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMub3duZXI7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYi5oZWlnaHRNb2RlbC5hdXRvKXthLmVsLnNldEhlaWdodCgiYXV0byIpO2EubGlzdEVsLnNldEhlaWdodCgiYXV0byIpfX0sZ2V0TGF5b3V0SXRlbXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm93bmVyLnBhZ2luZ1Rvb2xiYXI7cmV0dXJuIGE/W2FdOltdfSxpc1ZhbGlkUGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRydWV9LGZpbmlzaGVkTGF5b3V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEuc2F2ZWRYWTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihiKXt0aGlzLm93bmVyLmVsLnNldFhZKGIpfX0sbWVhc3VyZUNvbnRlbnRXaWR0aDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vd25lci5saXN0RWwuZ2V0V2lkdGgoKX0sbWVhc3VyZUNvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub3duZXIubGlzdEVsLmdldEhlaWdodCgpfSxwdWJsaXNoSW5uZXJIZWlnaHQ6ZnVuY3Rpb24oYyxhKXt2YXIgYj1jLnRvb2xiYXJDb250ZXh0LGQ9MDtpZihiKXtkPWIuZ2V0UHJvcCgiaGVpZ2h0Iil9aWYoZD09PXVuZGVmaW5lZCl7dGhpcy5kb25lPWZhbHNlfWVsc2V7Yy5saXN0Q29udGV4dC5zZXRIZWlnaHQoYS1jLmdldEZyYW1lSW5mbygpLmhlaWdodC1kKX19LGNhbGN1bGF0ZU93bmVySGVpZ2h0RnJvbUNvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyksYj1jLnRvb2xiYXJDb250ZXh0O2lmKGIpe2ErPWIuZ2V0UHJvcCgiaGVpZ2h0Iil9cmV0dXJuIGF9fSk7RXh0LmRlZmluZSgiRXh0LnNlbGVjdGlvbi5Nb2RlbCIse2V4dGVuZDoiRXh0LnV0aWwuT2JzZXJ2YWJsZSIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuQWJzdHJhY3RTZWxlY3Rpb25Nb2RlbCIscmVxdWlyZXM6WyJFeHQuZGF0YS5TdG9yZU1hbmFnZXIiXSxtaXhpbnM6e2JpbmRhYmxlOiJFeHQudXRpbC5CaW5kYWJsZSJ9LGFsbG93RGVzZWxlY3Q6ZmFsc2Usc2VsZWN0ZWQ6bnVsbCxwcnVuZVJlbW92ZWQ6dHJ1ZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2E9YXx8e307RXh0LmFwcGx5KGIsYSk7Yi5hZGRFdmVudHMoInNlbGVjdGlvbmNoYW5nZSIsImZvY3VzY2hhbmdlIik7Yi5tb2Rlcz17U0lOR0xFOnRydWUsU0lNUExFOnRydWUsTVVMVEk6dHJ1ZX07Yi5zZXRTZWxlY3Rpb25Nb2RlKGEubW9kZXx8Yi5tb2RlKTtiLnNlbGVjdGVkPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oKTtiLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sYmluZFN0b3JlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztjLm1peGlucy5iaW5kYWJsZS5iaW5kU3RvcmUuYXBwbHkoYyxhcmd1bWVudHMpO2lmKGMuc3RvcmUmJiFiKXtjLnJlZnJlc2goKX19LGdldFN0b3JlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm57YWRkOmEub25TdG9yZUFkZCxjbGVhcjphLm9uU3RvcmVDbGVhcixyZW1vdmU6YS5vblN0b3JlUmVtb3ZlLHVwZGF0ZTphLm9uU3RvcmVVcGRhdGV9fSxzZWxlY3RBbGw6ZnVuY3Rpb24oYil7dmFyIGU9dGhpcyxkPWUuc3RvcmUuZ2V0UmFuZ2UoKSxjPTAsYT1kLmxlbmd0aCxnPWUuZ2V0U2VsZWN0aW9uKCkubGVuZ3RoO2UuYnVsa0NoYW5nZT10cnVlO2Zvcig7YzxhO2MrKyl7ZS5kb1NlbGVjdChkW2NdLHRydWUsYil9ZGVsZXRlIGUuYnVsa0NoYW5nZTtlLm1heWJlRmlyZVNlbGVjdGlvbkNoYW5nZShlLmdldFNlbGVjdGlvbigpLmxlbmd0aCE9PWcpfSxkZXNlbGVjdEFsbDpmdW5jdGlvbihiKXt2YXIgZT10aGlzLGQ9ZS5nZXRTZWxlY3Rpb24oKSxjPTAsYT1kLmxlbmd0aCxnPWUuZ2V0U2VsZWN0aW9uKCkubGVuZ3RoO2UuYnVsa0NoYW5nZT10cnVlO2Zvcig7YzxhO2MrKyl7ZS5kb0Rlc2VsZWN0KGRbY10sYil9ZGVsZXRlIGUuYnVsa0NoYW5nZTtlLm1heWJlRmlyZVNlbGVjdGlvbkNoYW5nZShlLmdldFNlbGVjdGlvbigpLmxlbmd0aCE9PWcpfSxzZWxlY3RXaXRoRXZlbnQ6ZnVuY3Rpb24oYSxkLGMpe3ZhciBiPXRoaXM7c3dpdGNoKGIuc2VsZWN0aW9uTW9kZSl7Y2FzZSJNVUxUSSI6aWYoZC5jdHJsS2V5JiZiLmlzU2VsZWN0ZWQoYSkpe2IuZG9EZXNlbGVjdChhLGZhbHNlKX1lbHNle2lmKGQuc2hpZnRLZXkmJmIubGFzdEZvY3VzZWQpe2Iuc2VsZWN0UmFuZ2UoYi5sYXN0Rm9jdXNlZCxhLGQuY3RybEtleSl9ZWxzZXtpZihkLmN0cmxLZXkpe2IuZG9TZWxlY3QoYSx0cnVlLGZhbHNlKX1lbHNle2lmKGIuaXNTZWxlY3RlZChhKSYmIWQuc2hpZnRLZXkmJiFkLmN0cmxLZXkmJmIuc2VsZWN0ZWQuZ2V0Q291bnQoKT4xKXtiLmRvU2VsZWN0KGEsYyxmYWxzZSl9ZWxzZXtiLmRvU2VsZWN0KGEsZmFsc2UpfX19fWJyZWFrO2Nhc2UiU0lNUExFIjppZihiLmlzU2VsZWN0ZWQoYSkpe2IuZG9EZXNlbGVjdChhKX1lbHNle2IuZG9TZWxlY3QoYSx0cnVlKX1icmVhaztjYXNlIlNJTkdMRSI6aWYoYi5hbGxvd0Rlc2VsZWN0JiZiLmlzU2VsZWN0ZWQoYSkpe2IuZG9EZXNlbGVjdChhKX1lbHNle2IuZG9TZWxlY3QoYSxmYWxzZSl9YnJlYWt9fSxzZWxlY3RSYW5nZTpmdW5jdGlvbihsLGUsbSxjKXt2YXIgaj10aGlzLGs9ai5zdG9yZSxkPTAsaCxnLGEsYj1bXTtpZihqLmlzTG9ja2VkKCkpe3JldHVybn1pZighbSl7ai5kZXNlbGVjdEFsbCh0cnVlKX1pZighRXh0LmlzTnVtYmVyKGwpKXtsPWsuaW5kZXhPZihsKX1pZighRXh0LmlzTnVtYmVyKGUpKXtlPWsuaW5kZXhPZihlKX1pZihsPmUpe2c9ZTtlPWw7bD1nfWZvcihoPWw7aDw9ZTtoKyspe2lmKGouaXNTZWxlY3RlZChrLmdldEF0KGgpKSl7ZCsrfX1pZighYyl7YT0tMX1lbHNle2E9KGM9PSJ1cCIpP2w6ZX1mb3IoaD1sO2g8PWU7aCsrKXtpZihkPT0oZS1sKzEpKXtpZihoIT1hKXtqLmRvRGVzZWxlY3QoaCx0cnVlKX19ZWxzZXtiLnB1c2goay5nZXRBdChoKSl9fWouZG9NdWx0aVNlbGVjdChiLHRydWUpfSxzZWxlY3Q6ZnVuY3Rpb24oYixjLGEpe2lmKEV4dC5pc0RlZmluZWQoYikpe3RoaXMuZG9TZWxlY3QoYixjLGEpfX0sZGVzZWxlY3Q6ZnVuY3Rpb24oYixhKXt0aGlzLmRvRGVzZWxlY3QoYixhKX0sZG9TZWxlY3Q6ZnVuY3Rpb24oYyxlLGIpe3ZhciBkPXRoaXMsYTtpZihkLmxvY2tlZHx8IWQuc3RvcmUpe3JldHVybn1pZih0eXBlb2YgYz09PSJudW1iZXIiKXtjPVtkLnN0b3JlLmdldEF0KGMpXX1pZihkLnNlbGVjdGlvbk1vZGU9PSJTSU5HTEUiJiZjKXthPWMubGVuZ3RoP2NbMF06YztkLmRvU2luZ2xlU2VsZWN0KGEsYil9ZWxzZXtkLmRvTXVsdGlTZWxlY3QoYyxlLGIpfX0sZG9NdWx0aVNlbGVjdDpmdW5jdGlvbihhLGwsayl7dmFyIGg9dGhpcyxiPWguc2VsZWN0ZWQsaj1mYWxzZSxkPTAsZyxlO2lmKGgubG9ja2VkKXtyZXR1cm59YT0hRXh0LmlzQXJyYXkoYSk/W2FdOmE7Zz1hLmxlbmd0aDtpZighbCYmYi5nZXRDb3VudCgpPjApe2lmKGguZG9EZXNlbGVjdChoLmdldFNlbGVjdGlvbigpLGspPT09ZmFsc2Upe3JldHVybn19ZnVuY3Rpb24gYygpe2IuYWRkKGUpO2o9dHJ1ZX1mb3IoO2Q8ZztkKyspe2U9YVtkXTtpZihsJiZoLmlzU2VsZWN0ZWQoZSkpe2NvbnRpbnVlfWgubGFzdFNlbGVjdGVkPWU7aC5vblNlbGVjdENoYW5nZShlLHRydWUsayxjKX1pZighaC5wcmV2ZW50Rm9jdXMpe2guc2V0TGFzdEZvY3VzZWQoZSxrKX1oLm1heWJlRmlyZVNlbGVjdGlvbkNoYW5nZShqJiYhayl9LGRvRGVzZWxlY3Q6ZnVuY3Rpb24oYSxrKXt2YXIgaj10aGlzLGI9ai5zZWxlY3RlZCxkPTAsaCxlLGw9MCxnPTA7aWYoai5sb2NrZWR8fCFqLnN0b3JlKXtyZXR1cm4gZmFsc2V9aWYodHlwZW9mIGE9PT0ibnVtYmVyIil7YT1bai5zdG9yZS5nZXRBdChhKV19ZWxzZXtpZighRXh0LmlzQXJyYXkoYSkpe2E9W2FdfX1mdW5jdGlvbiBjKCl7KytnO2IucmVtb3ZlKGUpfWg9YS5sZW5ndGg7Zm9yKDtkPGg7ZCsrKXtlPWFbZF07aWYoai5pc1NlbGVjdGVkKGUpKXtpZihqLmxhc3RTZWxlY3RlZD09ZSl7ai5sYXN0U2VsZWN0ZWQ9Yi5sYXN0KCl9KytsO2oub25TZWxlY3RDaGFuZ2UoZSxmYWxzZSxrLGMpfX1qLm1heWJlRmlyZVNlbGVjdGlvbkNoYW5nZShnPjAmJiFrKTtyZXR1cm4gZz09PWx9LGRvU2luZ2xlU2VsZWN0OmZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcyxnPWZhbHNlLGM9ZC5zZWxlY3RlZDtpZihkLmxvY2tlZCl7cmV0dXJufWlmKGQuaXNTZWxlY3RlZChhKSl7cmV0dXJufWZ1bmN0aW9uIGUoKXtkLmJ1bGtDaGFuZ2U9dHJ1ZTtpZihjLmdldENvdW50KCk+MCYmZC5kb0Rlc2VsZWN0KGQubGFzdFNlbGVjdGVkLGIpPT09ZmFsc2Upe2RlbGV0ZSBkLmJ1bGtDaGFuZ2U7cmV0dXJuIGZhbHNlfWRlbGV0ZSBkLmJ1bGtDaGFuZ2U7Yy5hZGQoYSk7ZC5sYXN0U2VsZWN0ZWQ9YTtnPXRydWV9ZC5vblNlbGVjdENoYW5nZShhLHRydWUsYixlKTtpZihnKXtpZighYil7ZC5zZXRMYXN0Rm9jdXNlZChhKX1kLm1heWJlRmlyZVNlbGVjdGlvbkNoYW5nZSghYil9fSxzZXRMYXN0Rm9jdXNlZDpmdW5jdGlvbihjLGIpe3ZhciBkPXRoaXMsYT1kLmxhc3RGb2N1c2VkO2QubGFzdEZvY3VzZWQ9YztpZihjIT09YSl7ZC5vbkxhc3RGb2N1c0NoYW5nZWQoYSxjLGIpfX0saXNGb2N1c2VkOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpcy5nZXRMYXN0Rm9jdXNlZCgpfSxtYXliZUZpcmVTZWxlY3Rpb25DaGFuZ2U6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihhJiYhYi5idWxrQ2hhbmdlKXtiLmZpcmVFdmVudCgic2VsZWN0aW9uY2hhbmdlIixiLGIuZ2V0U2VsZWN0aW9uKCkpfX0sZ2V0TGFzdFNlbGVjdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGFzdFNlbGVjdGVkfSxnZXRMYXN0Rm9jdXNlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxhc3RGb2N1c2VkfSxnZXRTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3RlZC5nZXRSYW5nZSgpfSxnZXRTZWxlY3Rpb25Nb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uTW9kZX0sc2V0U2VsZWN0aW9uTW9kZTpmdW5jdGlvbihhKXthPWE/YS50b1VwcGVyQ2FzZSgpOiJTSU5HTEUiO3RoaXMuc2VsZWN0aW9uTW9kZT10aGlzLm1vZGVzW2FdP2E6IlNJTkdMRSJ9LGlzTG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9ja2VkfSxzZXRMb2NrZWQ6ZnVuY3Rpb24oYSl7dGhpcy5sb2NrZWQ9ISFhfSxpc1NlbGVjdGVkOmZ1bmN0aW9uKGEpe2E9RXh0LmlzTnVtYmVyKGEpP3RoaXMuc3RvcmUuZ2V0QXQoYSk6YTtyZXR1cm4gdGhpcy5zZWxlY3RlZC5pbmRleE9mKGEpIT09LTF9LGhhc1NlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkLmdldENvdW50KCk+MH0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsaj1lLnN0b3JlLGM9W10sYT1lLmdldFNlbGVjdGlvbigpLGQ9YS5sZW5ndGgsaCxnLGI9MCxrPWUuZ2V0TGFzdEZvY3VzZWQoKTtpZighail7cmV0dXJufWZvcig7YjxkO2IrKyl7aD1hW2JdO2lmKCFlLnBydW5lUmVtb3ZlZHx8ai5pbmRleE9mKGgpIT09LTEpe2MucHVzaChoKX19aWYoZS5zZWxlY3RlZC5nZXRDb3VudCgpIT1jLmxlbmd0aCl7Zz10cnVlfWUuY2xlYXJTZWxlY3Rpb25zKCk7aWYoai5pbmRleE9mKGspIT09LTEpe2Uuc2V0TGFzdEZvY3VzZWQoayx0cnVlKX1pZihjLmxlbmd0aCl7ZS5kb1NlbGVjdChjLGZhbHNlLHRydWUpfWUubWF5YmVGaXJlU2VsZWN0aW9uQ2hhbmdlKGcpfSxjbGVhclNlbGVjdGlvbnM6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGVkLmNsZWFyKCk7dGhpcy5sYXN0U2VsZWN0ZWQ9bnVsbDt0aGlzLnNldExhc3RGb2N1c2VkKG51bGwpfSxvblN0b3JlQWRkOkV4dC5lbXB0eUZuLG9uU3RvcmVDbGVhcjpmdW5jdGlvbigpe2lmKHRoaXMuc2VsZWN0ZWQuZ2V0Q291bnQ+MCl7dGhpcy5jbGVhclNlbGVjdGlvbnMoKTt0aGlzLm1heWJlRmlyZVNlbGVjdGlvbkNoYW5nZSh0cnVlKX19LG9uU3RvcmVSZW1vdmU6ZnVuY3Rpb24oYixhLGMpe3ZhciBlPXRoaXMsZD1lLnNlbGVjdGVkO2lmKGUubG9ja2VkfHwhZS5wcnVuZVJlbW92ZWQpe3JldHVybn1pZihkLnJlbW92ZShhKSl7aWYoZS5sYXN0U2VsZWN0ZWQ9PWEpe2UubGFzdFNlbGVjdGVkPW51bGx9aWYoZS5nZXRMYXN0Rm9jdXNlZCgpPT1hKXtlLnNldExhc3RGb2N1c2VkKG51bGwpfWUubWF5YmVGaXJlU2VsZWN0aW9uQ2hhbmdlKHRydWUpfX0sZ2V0Q291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3RlZC5nZXRDb3VudCgpfSxkZXN0cm95OkV4dC5lbXB0eUZuLG9uU3RvcmVVcGRhdGU6RXh0LmVtcHR5Rm4sb25TdG9yZUxvYWQ6RXh0LmVtcHR5Rm4sb25TZWxlY3RDaGFuZ2U6RXh0LmVtcHR5Rm4sb25MYXN0Rm9jdXNDaGFuZ2VkOmZ1bmN0aW9uKGIsYSl7dGhpcy5maXJlRXZlbnQoImZvY3VzY2hhbmdlIix0aGlzLGIsYSl9LG9uRWRpdG9yS2V5OkV4dC5lbXB0eUZuLGJpbmRDb21wb25lbnQ6RXh0LmVtcHR5Rm4sYmVmb3JlVmlld1JlbmRlcjpFeHQuZW1wdHlGbn0pO0V4dC5kZWZpbmUoIkV4dC5zZWxlY3Rpb24uRGF0YVZpZXdNb2RlbCIse2V4dGVuZDoiRXh0LnNlbGVjdGlvbi5Nb2RlbCIscmVxdWlyZXM6WyJFeHQudXRpbC5LZXlOYXYiXSxkZXNlbGVjdE9uQ29udGFpbmVyQ2xpY2s6dHJ1ZSxlbmFibGVLZXlOYXY6dHJ1ZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt0aGlzLmFkZEV2ZW50cygiYmVmb3JlZGVzZWxlY3QiLCJiZWZvcmVzZWxlY3QiLCJkZXNlbGVjdCIsInNlbGVjdCIpO3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxiaW5kQ29tcG9uZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz17cmVmcmVzaDpiLnJlZnJlc2gsc2NvcGU6Yn07Yi52aWV3PWE7Yi5iaW5kU3RvcmUoYS5nZXRTdG9yZSgpKTtjW2EudHJpZ2dlckV2ZW50XT1iLm9uSXRlbUNsaWNrO2NbYS50cmlnZ2VyQ3RFdmVudF09Yi5vbkNvbnRhaW5lckNsaWNrO2Eub24oYyk7aWYoYi5lbmFibGVLZXlOYXYpe2IuaW5pdEtleU5hdihhKX19LG9uSXRlbUNsaWNrOmZ1bmN0aW9uKGIsYSxkLGMsZyl7dGhpcy5zZWxlY3RXaXRoRXZlbnQoYSxnKX0sb25Db250YWluZXJDbGljazpmdW5jdGlvbigpe2lmKHRoaXMuZGVzZWxlY3RPbkNvbnRhaW5lckNsaWNrKXt0aGlzLmRlc2VsZWN0QWxsKCl9fSxpbml0S2V5TmF2OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoIWEucmVuZGVyZWQpe2Eub24oe3JlbmRlcjpFeHQuRnVuY3Rpb24uYmluZChiLmluaXRLZXlOYXYsYixbYV0pLHNpbmdsZTp0cnVlfSk7cmV0dXJufWEuZWwuc2V0KHt0YWJJbmRleDotMX0pO2Iua2V5TmF2PW5ldyBFeHQudXRpbC5LZXlOYXYoe3RhcmdldDphLmVsLGlnbm9yZUlucHV0RmllbGRzOnRydWUsZG93bjpFeHQucGFzcyhiLm9uTmF2S2V5LFsxXSxiKSxyaWdodDpFeHQucGFzcyhiLm9uTmF2S2V5LFsxXSxiKSxsZWZ0OkV4dC5wYXNzKGIub25OYXZLZXksWy0xXSxiKSx1cDpFeHQucGFzcyhiLm9uTmF2S2V5LFstMV0sYiksc2NvcGU6Yn0pfSxvbk5hdktleTpmdW5jdGlvbihnKXtnPWd8fDE7dmFyIGU9dGhpcyxiPWUudmlldyxkPWUuZ2V0U2VsZWN0aW9uKClbMF0sYz1lLnZpZXcuc3RvcmUuZ2V0Q291bnQoKSxhO2lmKGQpe2E9Yi5pbmRleE9mKGIuZ2V0Tm9kZShkKSkrZ31lbHNle2E9MH1pZihhPDApe2E9Yy0xfWVsc2V7aWYoYT49Yyl7YT0wfX1lLnNlbGVjdChhKX0sb25TZWxlY3RDaGFuZ2U6ZnVuY3Rpb24oYixlLGQsaCl7dmFyIGc9dGhpcyxhPWcudmlldyxjPWU/InNlbGVjdCI6ImRlc2VsZWN0IjtpZigoZHx8Zy5maXJlRXZlbnQoImJlZm9yZSIrYyxnLGIpKSE9PWZhbHNlJiZoKCkhPT1mYWxzZSl7aWYoYSl7aWYoZSl7YS5vbkl0ZW1TZWxlY3QoYil9ZWxzZXthLm9uSXRlbURlc2VsZWN0KGIpfX1pZighZCl7Zy5maXJlRXZlbnQoYyxnLGIpfX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuZGVzdHJveSh0aGlzLmtleU5hdik7dGhpcy5jYWxsUGFyZW50KCl9fSk7RXh0LmRlZmluZSgiRXh0LnZpZXcuQWJzdHJhY3RWaWV3Iix7ZXh0ZW5kOiJFeHQuQ29tcG9uZW50IixyZXF1aXJlczpbIkV4dC5Mb2FkTWFzayIsIkV4dC5kYXRhLlN0b3JlTWFuYWdlciIsIkV4dC5Db21wb3NpdGVFbGVtZW50TGl0ZSIsIkV4dC5Eb21RdWVyeSIsIkV4dC5zZWxlY3Rpb24uRGF0YVZpZXdNb2RlbCJdLG1peGluczp7YmluZGFibGU6IkV4dC51dGlsLkJpbmRhYmxlIn0saW5oZXJpdGFibGVTdGF0aWNzOntnZXRSZWNvcmQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Qm91bmRWaWV3KGEpLmdldFJlY29yZChhKX0sZ2V0Qm91bmRWaWV3OmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuZ2V0Q21wKGEuYm91bmRWaWV3KX19LGRlZmVySW5pdGlhbFJlZnJlc2g6dHJ1ZSxpdGVtQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJkYXRhdmlldy1pdGVtIixsb2FkaW5nVGV4dDoiTG9hZGluZy4uLiIsbG9hZE1hc2s6dHJ1ZSxsb2FkaW5nVXNlTXNnOnRydWUsc2VsZWN0ZWRJdGVtQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJpdGVtLXNlbGVjdGVkIixlbXB0eVRleHQ6IiIsZGVmZXJFbXB0eVRleHQ6dHJ1ZSx0cmFja092ZXI6ZmFsc2UsYmxvY2tSZWZyZXNoOmZhbHNlLHByZXNlcnZlU2Nyb2xsT25SZWZyZXNoOmZhbHNlLGxhc3Q6ZmFsc2UsdHJpZ2dlckV2ZW50OiJpdGVtY2xpY2siLHRyaWdnZXJDdEV2ZW50OiJjb250YWluZXJjbGljayIsYWRkQ21wRXZlbnRzOmZ1bmN0aW9uKCl7fSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxhPUV4dC5pc0RlZmluZWQsZD1jLml0ZW1UcGwsYj17fTtpZihkKXtpZihFeHQuaXNBcnJheShkKSl7ZD1kLmpvaW4oIiIpfWVsc2V7aWYoRXh0LmlzT2JqZWN0KGQpKXtiPUV4dC5hcHBseShiLGQuaW5pdGlhbENvbmZpZyk7ZD1kLmh0bWx9fWlmKCFjLml0ZW1TZWxlY3Rvcil7Yy5pdGVtU2VsZWN0b3I9Ii4iK2MuaXRlbUNsc31kPUV4dC5TdHJpbmcuZm9ybWF0KCc8dHBsIGZvcj0iLiI+PGRpdiBjbGFzcz0iezB9Ij57MX08L2Rpdj48L3RwbD4nLGMuaXRlbUNscyxkKTtjLnRwbD1uZXcgRXh0LlhUZW1wbGF0ZShkLGIpfWMuY2FsbFBhcmVudCgpO2lmKEV4dC5pc1N0cmluZyhjLnRwbCl8fEV4dC5pc0FycmF5KGMudHBsKSl7Yy50cGw9bmV3IEV4dC5YVGVtcGxhdGUoYy50cGwpfWMuYWRkRXZlbnRzKCJiZWZvcmVyZWZyZXNoIiwicmVmcmVzaCIsInZpZXdyZWFkeSIsIml0ZW11cGRhdGUiLCJpdGVtYWRkIiwiaXRlbXJlbW92ZSIpO2MuYWRkQ21wRXZlbnRzKCk7Yy5zdG9yZT1FeHQuZGF0YS5TdG9yZU1hbmFnZXIubG9va3VwKGMuc3RvcmV8fCJleHQtZW1wdHktc3RvcmUiKTtjLmJpbmRTdG9yZShjLnN0b3JlLHRydWUpO2MuYWxsPW5ldyBFeHQuQ29tcG9zaXRlRWxlbWVudExpdGUoKTtjLnNjcm9sbFN0YXRlPXt0b3A6MCxsZWZ0OjB9O2Mub24oe3Njcm9sbDpjLm9uVmlld1Njcm9sbCxlbGVtZW50OiJlbCIsc2NvcGU6Y30pfSxvblJlbmRlcjpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYj1jLmxvYWRNYXNrLGE9e21zZzpjLmxvYWRpbmdUZXh0LG1zZ0NsczpjLmxvYWRpbmdDbHMsdXNlTXNnOmMubG9hZGluZ1VzZU1zZyxzdG9yZTpjLmdldE1hc2tTdG9yZSgpfTtjLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihiKXtpZihFeHQuaXNPYmplY3QoYikpe2E9RXh0LmFwcGx5KGEsYil9Yy5sb2FkTWFzaz1uZXcgRXh0LkxvYWRNYXNrKGMsYSk7Yy5sb2FkTWFzay5vbih7c2NvcGU6YyxiZWZvcmVzaG93OmMub25NYXNrQmVmb3JlU2hvdyxoaWRlOmMub25NYXNrSGlkZX0pfX0sZmluaXNoUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZighYS51cCgiW2NvbGxhcHNlZF0sW2hpZGRlbl0iKSl7YS5kb0ZpcnN0UmVmcmVzaChhLnN0b3JlKX19LG9uQm94UmVhZHk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKCFhLmZpcnN0UmVmcmVzaERvbmUpe2EuZG9GaXJzdFJlZnJlc2goYS5zdG9yZSl9fSxnZXRNYXNrU3RvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yZX0sb25NYXNrQmVmb3JlU2hvdzpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmxvYWRpbmdIZWlnaHQ7Yi5nZXRTZWxlY3Rpb25Nb2RlbCgpLmRlc2VsZWN0QWxsKCk7Yi5hbGwuY2xlYXIoKTtpZihhJiZhPmIuZ2V0SGVpZ2h0KCkpe2IuaGFzTG9hZGluZ0hlaWdodD10cnVlO2Iub2xkTWluSGVpZ2h0PWIubWluSGVpZ2h0O2IubWluSGVpZ2h0PWE7Yi51cGRhdGVMYXlvdXQoKX19LG9uTWFza0hpZGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKCFhLmRlc3Ryb3lpbmcmJmEuaGFzTG9hZGluZ0hlaWdodCl7YS5taW5IZWlnaHQ9YS5vbGRNaW5IZWlnaHQ7YS51cGRhdGVMYXlvdXQoKTtkZWxldGUgYS5oYXNMb2FkaW5nSGVpZ2h0fX0sYmVmb3JlUmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5nZXRTZWxlY3Rpb25Nb2RlbCgpLmJlZm9yZVZpZXdSZW5kZXIodGhpcyl9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5nZXRTZWxlY3Rpb25Nb2RlbCgpLmJpbmRDb21wb25lbnQodGhpcyl9LGdldFNlbGVjdGlvbk1vZGVsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPSJTSU5HTEUiO2lmKCFhLnNlbE1vZGVsKXthLnNlbE1vZGVsPXt9fWlmKGEuc2ltcGxlU2VsZWN0KXtiPSJTSU1QTEUifWVsc2V7aWYoYS5tdWx0aVNlbGVjdCl7Yj0iTVVMVEkifX1FeHQuYXBwbHlJZihhLnNlbE1vZGVsLHthbGxvd0Rlc2VsZWN0OmEuYWxsb3dEZXNlbGVjdCxtb2RlOmJ9KTtpZighYS5zZWxNb2RlbC5ldmVudHMpe2Euc2VsTW9kZWw9bmV3IEV4dC5zZWxlY3Rpb24uRGF0YVZpZXdNb2RlbChhLnNlbE1vZGVsKX1pZighYS5zZWxNb2RlbC5oYXNSZWxheVNldHVwKXthLnJlbGF5RXZlbnRzKGEuc2VsTW9kZWwsWyJzZWxlY3Rpb25jaGFuZ2UiLCJiZWZvcmVzZWxlY3QiLCJiZWZvcmVkZXNlbGVjdCIsInNlbGVjdCIsImRlc2VsZWN0IiwiZm9jdXNjaGFuZ2UiXSk7YS5zZWxNb2RlbC5oYXNSZWxheVNldHVwPXRydWV9aWYoYS5kaXNhYmxlU2VsZWN0aW9uKXthLnNlbE1vZGVsLmxvY2tlZD10cnVlfXJldHVybiBhLnNlbE1vZGVsfSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxoLGIsZSxkLGcsYTtpZighYy5yZW5kZXJlZHx8Yy5pc0Rlc3Ryb3llZCl7cmV0dXJufWlmKCFjLmhhc0xpc3RlbmVycy5iZWZvcmVyZWZyZXNofHxjLmZpcmVFdmVudCgiYmVmb3JlcmVmcmVzaCIsYykhPT1mYWxzZSl7aD1jLmdldFRhcmdldEVsKCk7YT1jLnN0b3JlLmdldFJhbmdlKCk7Zz1oLmRvbTtpZighYy5wcmVzZXJ2ZVNjcm9sbE9uUmVmcmVzaCl7Yj1nLnBhcmVudE5vZGU7ZT1nLnN0eWxlLmRpc3BsYXk7Zy5zdHlsZS5kaXNwbGF5PSJub25lIjtkPWcubmV4dFNpYmxpbmc7Yi5yZW1vdmVDaGlsZChnKX1pZihjLnJlZnJlc2hDb3VudGVyKXtjLmNsZWFyVmlld0VsKCl9ZWxzZXtjLmZpeGVkTm9kZXM9aC5kb20uY2hpbGROb2Rlcy5sZW5ndGg7Yy5yZWZyZXNoQ291bnRlcj0xfWMudHBsLmFwcGVuZChoLGMuY29sbGVjdERhdGEoYSwwKSk7aWYoYS5sZW5ndGg8MSl7aWYoIWMuZGVmZXJFbXB0eVRleHR8fGMuaGFzU2tpcHBlZEVtcHR5VGV4dCl7RXh0LmNvcmUuRG9tSGVscGVyLmluc2VydEh0bWwoImJlZm9yZUVuZCIsaC5kb20sYy5lbXB0eVRleHQpfWMuYWxsLmNsZWFyKCl9ZWxzZXtjLmFsbC5maWxsKEV4dC5xdWVyeShjLmdldEl0ZW1TZWxlY3RvcigpLGguZG9tKSk7Yy51cGRhdGVJbmRleGVzKDApfWMuc2VsTW9kZWwucmVmcmVzaCgpO2MuaGFzU2tpcHBlZEVtcHR5VGV4dD10cnVlO2lmKCFjLnByZXNlcnZlU2Nyb2xsT25SZWZyZXNoKXtiLmluc2VydEJlZm9yZShnLGQpO2cuc3R5bGUuZGlzcGxheT1lfXRoaXMucmVmcmVzaFNpemUoKTtjLmZpcmVFdmVudCgicmVmcmVzaCIsYyk7aWYoIWMudmlld1JlYWR5KXtjLnZpZXdSZWFkeT10cnVlO2MuZmlyZUV2ZW50KCJ2aWV3cmVhZHkiLGMpfX19LHJlZnJlc2hTaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRTaXplTW9kZWwoKTtpZihhLmhlaWdodC5zaHJpbmtXcmFwfHxhLndpZHRoLnNocmlua1dyYXApe3RoaXMudXBkYXRlTGF5b3V0KCl9fSxjbGVhclZpZXdFbDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmdldFRhcmdldEVsKCk7aWYoYi5maXhlZE5vZGVzKXt3aGlsZShhLmRvbS5jaGlsZE5vZGVzW2IuZml4ZWROb2Rlc10pe2EuZG9tLnJlbW92ZUNoaWxkKGEuZG9tLmNoaWxkTm9kZXNbYi5maXhlZE5vZGVzXSl9fWVsc2V7YS51cGRhdGUoIiIpfWIucmVmcmVzaENvdW50ZXIrK30sb25WaWV3U2Nyb2xsOkV4dC5lbXB0eUZuLHNhdmVTY3JvbGxTdGF0ZTpmdW5jdGlvbigpe2lmKHRoaXMucmVuZGVyZWQpe3ZhciBiPXRoaXMuZWwuZG9tLGE9dGhpcy5zY3JvbGxTdGF0ZTthLmxlZnQ9Yi5zY3JvbGxMZWZ0O2EudG9wPWIuc2Nyb2xsVG9wfX0scmVzdG9yZVNjcm9sbFN0YXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCl7dmFyIGI9dGhpcy5lbC5kb20sYT10aGlzLnNjcm9sbFN0YXRlO2Iuc2Nyb2xsTGVmdD1hLmxlZnQ7Yi5zY3JvbGxUb3A9YS50b3B9fSxwcmVwYXJlRGF0YTpmdW5jdGlvbihlLGQsYyl7dmFyIGIsYTtpZihjKXtiPWMuZ2V0QXNzb2NpYXRlZERhdGEoKTtmb3IoYSBpbiBiKXtpZihiLmhhc093blByb3BlcnR5KGEpKXtlW2FdPWJbYV19fX1yZXR1cm4gZX0sY29sbGVjdERhdGE6ZnVuY3Rpb24oYyxnKXt2YXIgZT1bXSxkPTAsYT1jLmxlbmd0aCxiO2Zvcig7ZDxhO2QrKyl7Yj1jW2RdO2VbZF09dGhpcy5wcmVwYXJlRGF0YShiLmRhdGEsZytkLGIpfXJldHVybiBlfSxidWZmZXJSZW5kZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5yZW5kZXJCdWZmZXJ8fChjLnJlbmRlckJ1ZmZlcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSk7Yy50cGwub3ZlcndyaXRlKGQsYy5jb2xsZWN0RGF0YShhLGIpKTtyZXR1cm4gRXh0LnF1ZXJ5KGMuZ2V0SXRlbVNlbGVjdG9yKCksZCl9LG9uVXBkYXRlOmZ1bmN0aW9uKGUsYSl7dmFyIGQ9dGhpcyxiLGM7aWYoZC52aWV3UmVhZHkpe2I9ZC5zdG9yZS5pbmRleE9mKGEpO2lmKGI+LTEpe2M9ZC5idWZmZXJSZW5kZXIoW2FdLGIpWzBdO2lmKGQuZ2V0Tm9kZShhKSl7ZC5hbGwucmVwbGFjZUVsZW1lbnQoYixjLHRydWUpO2QudXBkYXRlSW5kZXhlcyhiLGIpO2Quc2VsTW9kZWwucmVmcmVzaCgpO2lmKGQuaGFzTGlzdGVuZXJzLml0ZW11cGRhdGUpe2QuZmlyZUV2ZW50KCJpdGVtdXBkYXRlIixhLGIsYyl9cmV0dXJuIGN9fX19LG9uQWRkOmZ1bmN0aW9uKGUsYixjKXt2YXIgZD10aGlzLGE7aWYoZC5yZW5kZXJlZCl7aWYoZC5hbGwuZ2V0Q291bnQoKT09PTApe2QucmVmcmVzaCgpO3JldHVybn1hPWQuYnVmZmVyUmVuZGVyKGIsYyk7ZC5kb0FkZChhLGIsYyk7ZC5zZWxNb2RlbC5yZWZyZXNoKCk7ZC51cGRhdGVJbmRleGVzKGMpO2QucmVmcmVzaFNpemUoKTtpZihkLmhhc0xpc3RlbmVycy5pdGVtYWRkKXtkLmZpcmVFdmVudCgiaXRlbWFkZCIsYixjLGEpfX19LGRvQWRkOmZ1bmN0aW9uKGIsYSxjKXt2YXIgZD10aGlzLmFsbCxlPWQuZ2V0Q291bnQoKTtpZihlPT09MCl7dGhpcy5jbGVhclZpZXdFbCgpO3RoaXMuZ2V0VGFyZ2V0RWwoKS5hcHBlbmRDaGlsZChiKX1lbHNle2lmKGM8ZSl7aWYoYz09PTApe2QuaXRlbShjKS5pbnNlcnRTaWJsaW5nKGIsImJlZm9yZSIsdHJ1ZSl9ZWxzZXtkLml0ZW0oYy0xKS5pbnNlcnRTaWJsaW5nKGIsImFmdGVyIix0cnVlKX19ZWxzZXtkLmxhc3QoKS5pbnNlcnRTaWJsaW5nKGIsImFmdGVyIix0cnVlKX19RXh0LkFycmF5Lmluc2VydChkLmVsZW1lbnRzLGMsYil9LG9uUmVtb3ZlOmZ1bmN0aW9uKGQsYSxiKXt2YXIgYz10aGlzO2lmKGMuYWxsLmdldENvdW50KCkpe2lmKGMuc3RvcmUuZ2V0Q291bnQoKT09PTApe2MucmVmcmVzaCgpfWVsc2V7Yy5kb1JlbW92ZShhLGIpO2lmKGMuc2VsTW9kZWwucmVmcmVzaE9uUmVtb3ZlKXtjLnNlbE1vZGVsLnJlZnJlc2goKX1jLnVwZGF0ZUluZGV4ZXMoYil9dGhpcy5yZWZyZXNoU2l6ZSgpO2lmKGMuaGFzTGlzdGVuZXJzLml0ZW1yZW1vdmUpe2MuZmlyZUV2ZW50KCJpdGVtcmVtb3ZlIixhLGIpfX19LGRvUmVtb3ZlOmZ1bmN0aW9uKGEsYil7dGhpcy5hbGwucmVtb3ZlRWxlbWVudChiLHRydWUpfSxyZWZyZXNoTm9kZTpmdW5jdGlvbihhKXt0aGlzLm9uVXBkYXRlKHRoaXMuc3RvcmUsdGhpcy5zdG9yZS5nZXRBdChhKSl9LHVwZGF0ZUluZGV4ZXM6ZnVuY3Rpb24oZSxkKXt2YXIgYz10aGlzLmFsbC5lbGVtZW50cyxhPXRoaXMuc3RvcmUuZ2V0UmFuZ2UoKSxiO2U9ZXx8MDtkPWR8fCgoZD09PTApPzA6KGMubGVuZ3RoLTEpKTtmb3IoYj1lO2I8PWQ7YisrKXtjW2JdLnZpZXdJbmRleD1iO2NbYl0udmlld1JlY29yZElkPWFbYl0uaW50ZXJuYWxJZDtpZighY1tiXS5ib3VuZFZpZXcpe2NbYl0uYm91bmRWaWV3PXRoaXMuaWR9fX0sZ2V0U3RvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yZX0sYmluZFN0b3JlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcztjLm1peGlucy5iaW5kYWJsZS5iaW5kU3RvcmUuYXBwbHkoYyxhcmd1bWVudHMpO2lmKCFiKXtjLmdldFNlbGVjdGlvbk1vZGVsKCkuYmluZFN0b3JlKGMuc3RvcmUpfWlmKGMuY29tcG9uZW50TGF5b3V0Q291bnRlcil7Yy5kb0ZpcnN0UmVmcmVzaChhKX19LGRvRmlyc3RSZWZyZXNoOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5maXJzdFJlZnJlc2hEb25lPXRydWU7aWYoYSYmIWEubG9hZGluZyl7aWYoYi5kZWZlckluaXRpYWxSZWZyZXNoKXtiLmFwcGx5Rmlyc3RSZWZyZXNoKCl9ZWxzZXtiLnJlZnJlc2goKX19fSxhcHBseUZpcnN0UmVmcmVzaDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5pc0Rlc3Ryb3llZCl7cmV0dXJufWlmKGEudXAoIltpc0NvbGxhcHNpbmdPckV4cGFuZGluZ10iKSl7RXh0LkZ1bmN0aW9uLmRlZmVyKGEuYXBwbHlGaXJzdFJlZnJlc2gsMTAwLGEpfWVsc2V7RXh0LkZ1bmN0aW9uLmRlZmVyKGZ1bmN0aW9uKCl7aWYoIWEuaXNEZXN0cm95ZWQpe2EucmVmcmVzaCgpfX0sMSl9fSxvblVuYmluZFN0b3JlOmZ1bmN0aW9uKGEpe3RoaXMuc2V0TWFza0JpbmQobnVsbCl9LG9uQmluZFN0b3JlOmZ1bmN0aW9uKGEpe3RoaXMuc2V0TWFza0JpbmQoYSl9LHNldE1hc2tCaW5kOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMubG9hZE1hc2s7aWYoYSYmYS5iaW5kU3RvcmUpe2EuYmluZFN0b3JlKGIpfX0sZ2V0U3RvcmVMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybntyZWZyZXNoOmEub25EYXRhUmVmcmVzaCxhZGQ6YS5vbkFkZCxyZW1vdmU6YS5vblJlbW92ZSx1cGRhdGU6YS5vblVwZGF0ZSxjbGVhcjphLnJlZnJlc2h9fSxvbkRhdGFSZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPSFhLmZpcnN0UmVmcmVzaERvbmUmJighYS5yZW5kZXJlZHx8YS51cCgiW2NvbGxhcHNlZF0sW2lzQ29sbGFwc2luZ09yRXhwYW5kaW5nXSxbaGlkZGVuXSIpKTtpZihiKXthLmRlZmVySW5pdGlhbFJlZnJlc2g9ZmFsc2V9ZWxzZXtpZihhLmJsb2NrUmVmcmVzaCE9PXRydWUpe2EuZmlyc3RSZWZyZXNoRG9uZT10cnVlO2EucmVmcmVzaC5hcHBseShhLGFyZ3VtZW50cyl9fX0sZmluZEl0ZW1CeUNoaWxkOmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuZmx5KGEpLmZpbmRQYXJlbnQodGhpcy5nZXRJdGVtU2VsZWN0b3IoKSx0aGlzLmdldFRhcmdldEVsKCkpfSxmaW5kVGFyZ2V0QnlFdmVudDpmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRUYXJnZXQodGhpcy5nZXRJdGVtU2VsZWN0b3IoKSx0aGlzLmdldFRhcmdldEVsKCkpfSxnZXRTZWxlY3RlZE5vZGVzOmZ1bmN0aW9uKCl7dmFyIGI9W10sYT10aGlzLnNlbE1vZGVsLmdldFNlbGVjdGlvbigpLGQ9YS5sZW5ndGgsYz0wO2Zvcig7YzxkO2MrKyl7Yi5wdXNoKHRoaXMuZ2V0Tm9kZShhW2NdKSl9cmV0dXJuIGJ9LGdldFJlY29yZHM6ZnVuY3Rpb24oYyl7dmFyIGI9W10sZD0wLGE9Yy5sZW5ndGgsZT10aGlzLnN0b3JlLmRhdGE7Zm9yKDtkPGE7ZCsrKXtiW2IubGVuZ3RoXT1lLmdldEJ5S2V5KGNbZF0udmlld1JlY29yZElkKX1yZXR1cm4gYn0sZ2V0UmVjb3JkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnN0b3JlLmRhdGEuZ2V0QnlLZXkoRXh0LmdldERvbShhKS52aWV3UmVjb3JkSWQpfSxpc1NlbGVjdGVkOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ2V0UmVjb3JkKGIpO3JldHVybiB0aGlzLnNlbE1vZGVsLmlzU2VsZWN0ZWQoYSl9LHNlbGVjdDpmdW5jdGlvbihiLGMsYSl7dGhpcy5zZWxNb2RlbC5zZWxlY3QoYixjLGEpfSxkZXNlbGVjdDpmdW5jdGlvbihiLGEpe3RoaXMuc2VsTW9kZWwuZGVzZWxlY3QoYixhKX0sZ2V0Tm9kZTpmdW5jdGlvbihhKXtpZigoIWEmJmEhPT0wKXx8IXRoaXMucmVuZGVyZWQpe3JldHVybiBudWxsfWlmKEV4dC5pc1N0cmluZyhhKSl7cmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpfWlmKEV4dC5pc051bWJlcihhKSl7cmV0dXJuIHRoaXMuYWxsLmVsZW1lbnRzW2FdfWlmKGEuaXNNb2RlbCl7cmV0dXJuIHRoaXMuZ2V0Tm9kZUJ5UmVjb3JkKGEpfXJldHVybiBhfSxnZXROb2RlQnlSZWNvcmQ6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5hbGwuZWxlbWVudHMsZD1jLmxlbmd0aCxiPTA7Zm9yKDtiPGQ7YisrKXtpZihjW2JdLnZpZXdSZWNvcmRJZD09PWEuaW50ZXJuYWxJZCl7cmV0dXJuIGNbYl19fXJldHVybiBudWxsfSxnZXROb2RlczpmdW5jdGlvbihjLGEpe3ZhciBiPXRoaXMuYWxsLmVsZW1lbnRzO2lmKGE9PT11bmRlZmluZWQpe2E9Yi5sZW5ndGh9ZWxzZXthKyt9cmV0dXJuIHRoaXMuYWxsLmVsZW1lbnRzLnNsaWNlKGN8fDAsYSl9LGluZGV4T2Y6ZnVuY3Rpb24oYSl7YT10aGlzLmdldE5vZGUoYSk7aWYoIWEmJmEhPT0wKXtyZXR1cm4gLTF9aWYoRXh0LmlzTnVtYmVyKGEudmlld0luZGV4KSl7cmV0dXJuIGEudmlld0luZGV4fXJldHVybiB0aGlzLmFsbC5pbmRleE9mKGEpfSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuYWxsLmNsZWFyKCk7YS5jYWxsUGFyZW50KCk7YS5iaW5kU3RvcmUobnVsbCk7YS5zZWxNb2RlbC5kZXN0cm95KCl9LG9uSXRlbVNlbGVjdDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldE5vZGUoYSk7aWYoYil7RXh0LmZseShiKS5hZGRDbHModGhpcy5zZWxlY3RlZEl0ZW1DbHMpfX0sb25JdGVtRGVzZWxlY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXROb2RlKGEpO2lmKGIpe0V4dC5mbHkoYikucmVtb3ZlQ2xzKHRoaXMuc2VsZWN0ZWRJdGVtQ2xzKX19LGdldEl0ZW1TZWxlY3RvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1TZWxlY3Rvcn19LGZ1bmN0aW9uKCl7RXh0LmRlcHJlY2F0ZSgiZXh0anMiLCI0LjAiLGZ1bmN0aW9uKCl7RXh0LnZpZXcuQWJzdHJhY3RWaWV3Lm92ZXJyaWRlKHtnZXRTZWxlY3Rpb25Db3VudDpmdW5jdGlvbigpe2lmKEV4dC5nbG9iYWwuY29uc29sZSl7RXh0Lmdsb2JhbC5jb25zb2xlLndhcm4oIkRhdGFWaWV3OiBnZXRTZWxlY3Rpb25Db3VudCB3aWxsIGJlIHJlbW92ZWQsIHBsZWFzZSBpbnRlcmFjdCB3aXRoIHRoZSBFeHQuc2VsZWN0aW9uLkRhdGFWaWV3TW9kZWwiKX1yZXR1cm4gdGhpcy5zZWxNb2RlbC5nZXRTZWxlY3Rpb24oKS5sZW5ndGh9LGdldFNlbGVjdGVkUmVjb3JkczpmdW5jdGlvbigpe2lmKEV4dC5nbG9iYWwuY29uc29sZSl7RXh0Lmdsb2JhbC5jb25zb2xlLndhcm4oIkRhdGFWaWV3OiBnZXRTZWxlY3RlZFJlY29yZHMgd2lsbCBiZSByZW1vdmVkLCBwbGVhc2UgaW50ZXJhY3Qgd2l0aCB0aGUgRXh0LnNlbGVjdGlvbi5EYXRhVmlld01vZGVsIil9cmV0dXJuIHRoaXMuc2VsTW9kZWwuZ2V0U2VsZWN0aW9uKCl9LHNlbGVjdDpmdW5jdGlvbihhLGIsZCl7aWYoRXh0Lmdsb2JhbC5jb25zb2xlKXtFeHQuZ2xvYmFsLmNvbnNvbGUud2FybigiRGF0YVZpZXc6IHNlbGVjdCB3aWxsIGJlIHJlbW92ZWQsIHBsZWFzZSBhY2Nlc3Mgc2VsZWN0IHRocm91Z2ggYSBEYXRhVmlldydzIFNlbGVjdGlvbk1vZGVsLCBpZTogdmlldy5nZXRTZWxlY3Rpb25Nb2RlbCgpLnNlbGVjdCgpIil9dmFyIGM9dGhpcy5nZXRTZWxlY3Rpb25Nb2RlbCgpO3JldHVybiBjLnNlbGVjdC5hcHBseShjLGFyZ3VtZW50cyl9LGNsZWFyU2VsZWN0aW9uczpmdW5jdGlvbigpe2lmKEV4dC5nbG9iYWwuY29uc29sZSl7RXh0Lmdsb2JhbC5jb25zb2xlLndhcm4oIkRhdGFWaWV3OiBjbGVhclNlbGVjdGlvbnMgd2lsbCBiZSByZW1vdmVkLCBwbGVhc2UgYWNjZXNzIGRlc2VsZWN0QWxsIHRocm91Z2ggRGF0YVZpZXcncyBTZWxlY3Rpb25Nb2RlbCwgaWU6IHZpZXcuZ2V0U2VsZWN0aW9uTW9kZWwoKS5kZXNlbGVjdEFsbCgpIil9dmFyIGE9dGhpcy5nZXRTZWxlY3Rpb25Nb2RlbCgpO3JldHVybiBhLmRlc2VsZWN0QWxsKCl9fSl9KX0pO0V4dC5kZWZpbmUoIkV4dC52aWV3LlZpZXciLHtleHRlbmQ6IkV4dC52aWV3LkFic3RyYWN0VmlldyIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuRGF0YVZpZXciLGFsaWFzOiJ3aWRnZXQuZGF0YXZpZXciLGRlZmVySGlnaGxpZ2h0OihFeHQuaXNJRTZ8fEV4dC5pc0lFNyk/MTAwOjAsaW5wdXRUYWdSZTovXnRleHRhcmVhJHxeaW5wdXQkL2ksaW5oZXJpdGFibGVTdGF0aWNzOntFdmVudE1hcDp7bW91c2Vkb3duOiJNb3VzZURvd24iLG1vdXNldXA6Ik1vdXNlVXAiLGNsaWNrOiJDbGljayIsZGJsY2xpY2s6IkRibENsaWNrIixjb250ZXh0bWVudToiQ29udGV4dE1lbnUiLG1vdXNlb3ZlcjoiTW91c2VPdmVyIixtb3VzZW91dDoiTW91c2VPdXQiLG1vdXNlZW50ZXI6Ik1vdXNlRW50ZXIiLG1vdXNlbGVhdmU6Ik1vdXNlTGVhdmUiLGtleWRvd246IktleURvd24iLGZvY3VzOiJGb2N1cyJ9fSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoKTtpZihhLmRlZmVySGlnaGxpZ2h0KXthLnNldEhpZ2hsaWdodGVkSXRlbT1FeHQuRnVuY3Rpb24uY3JlYXRlQnVmZmVyZWQoYS5zZXRIaWdobGlnaHRlZEl0ZW0sYS5kZWZlckhpZ2hsaWdodCxhKX19LGFkZENtcEV2ZW50czpmdW5jdGlvbigpe3RoaXMuYWRkRXZlbnRzKCJiZWZvcmVpdGVtbW91c2Vkb3duIiwiYmVmb3JlaXRlbW1vdXNldXAiLCJiZWZvcmVpdGVtbW91c2VlbnRlciIsImJlZm9yZWl0ZW1tb3VzZWxlYXZlIiwiYmVmb3JlaXRlbWNsaWNrIiwiYmVmb3JlaXRlbWRibGNsaWNrIiwiYmVmb3JlaXRlbWNvbnRleHRtZW51IiwiYmVmb3JlaXRlbWtleWRvd24iLCJpdGVtbW91c2Vkb3duIiwiaXRlbW1vdXNldXAiLCJpdGVtbW91c2VlbnRlciIsIml0ZW1tb3VzZWxlYXZlIiwiaXRlbWNsaWNrIiwiaXRlbWRibGNsaWNrIiwiaXRlbWNvbnRleHRtZW51IiwiaXRlbWtleWRvd24iLCJiZWZvcmVjb250YWluZXJtb3VzZWRvd24iLCJiZWZvcmVjb250YWluZXJtb3VzZXVwIiwiYmVmb3JlY29udGFpbmVybW91c2VvdmVyIiwiYmVmb3JlY29udGFpbmVybW91c2VvdXQiLCJiZWZvcmVjb250YWluZXJjbGljayIsImJlZm9yZWNvbnRhaW5lcmRibGNsaWNrIiwiYmVmb3JlY29udGFpbmVyY29udGV4dG1lbnUiLCJiZWZvcmVjb250YWluZXJrZXlkb3duIiwiY29udGFpbmVybW91c2V1cCIsImNvbnRhaW5lcm1vdXNlb3ZlciIsImNvbnRhaW5lcm1vdXNlb3V0IiwiY29udGFpbmVyY2xpY2siLCJjb250YWluZXJkYmxjbGljayIsImNvbnRhaW5lcmNvbnRleHRtZW51IiwiY29udGFpbmVya2V5ZG93biIsInNlbGVjdGlvbmNoYW5nZSIsImJlZm9yZXNlbGVjdCIsImJlZm9yZWRlc2VsZWN0Iiwic2VsZWN0IiwiZGVzZWxlY3QiLCJmb2N1c2NoYW5nZSIsImhpZ2hsaWdodGl0ZW0iLCJ1bmhpZ2hsaWdodGl0ZW0iKX0sZ2V0Rm9jdXNFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFRhcmdldEVsKCl9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoKTthLm1vbihhLmdldFRhcmdldEVsKCkse3Njb3BlOmEsZnJlZXplRXZlbnQ6dHJ1ZSxjbGljazphLmhhbmRsZUV2ZW50LG1vdXNlZG93bjphLmhhbmRsZUV2ZW50LG1vdXNldXA6YS5oYW5kbGVFdmVudCxkYmxjbGljazphLmhhbmRsZUV2ZW50LGNvbnRleHRtZW51OmEuaGFuZGxlRXZlbnQsbW91c2VvdmVyOmEuaGFuZGxlRXZlbnQsbW91c2VvdXQ6YS5oYW5kbGVFdmVudCxrZXlkb3duOmEuaGFuZGxlRXZlbnR9KX0saGFuZGxlRXZlbnQ6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhPWMudHlwZT09ImtleWRvd24iJiZjLmdldEtleSgpO2lmKGIucHJvY2Vzc1VJRXZlbnQoYykhPT1mYWxzZSl7Yi5wcm9jZXNzU3BlY2lhbEV2ZW50KGMpfWlmKGE9PT1jLlNQQUNFKXtpZighYi5pbnB1dFRhZ1JlLnRlc3QoYy5nZXRUYXJnZXQoKS50YWdOYW1lKSl7Yy5zdG9wRXZlbnQoKX19fSxwcm9jZXNzSXRlbUV2ZW50OkV4dC5lbXB0eUZuLHByb2Nlc3NDb250YWluZXJFdmVudDpFeHQuZW1wdHlGbixwcm9jZXNzU3BlY2lhbEV2ZW50OkV4dC5lbXB0eUZuLHN0aWxsT3Zlckl0ZW06ZnVuY3Rpb24oYixhKXt2YXIgYztpZihhJiZ0eXBlb2YoYS5vZmZzZXRQYXJlbnQpPT09Im9iamVjdCIpe2M9KGIudHlwZT09Im1vdXNlb3V0Iik/Yi5nZXRSZWxhdGVkVGFyZ2V0KCk6Yi5nZXRUYXJnZXQoKTtyZXR1cm4gRXh0LmZseShhKS5jb250YWlucyhjKX1yZXR1cm4gZmFsc2V9LHByb2Nlc3NVSUV2ZW50OmZ1bmN0aW9uKGgpe3ZhciBpPXRoaXMsaz1oLmdldFRhcmdldChpLmdldEl0ZW1TZWxlY3RvcigpLGkuZ2V0VGFyZ2V0RWwoKSksYT10aGlzLnN0YXRpY3MoKS5FdmVudE1hcCxnLGMsaj1oLnR5cGUsZD1pLm1vdXNlT3Zlckl0ZW0sYjtpZighayl7aWYoaj09Im1vdXNlb3ZlciImJmkuc3RpbGxPdmVySXRlbShoLGQpKXtrPWR9aWYoaj09ImtleWRvd24iKXtjPWkuZ2V0U2VsZWN0aW9uTW9kZWwoKS5nZXRMYXN0U2VsZWN0ZWQoKTtpZihjKXtrPWkuZ2V0Tm9kZShjKX19fWlmKGspe2c9aS5pbmRleE9mKGspO2lmKCFjKXtjPWkuZ2V0UmVjb3JkKGspfWlmKCFjfHxpLnByb2Nlc3NJdGVtRXZlbnQoYyxrLGcsaCk9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfWI9aS5pc05ld0l0ZW1FdmVudChrLGgpO2lmKGI9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfWlmKChpWyJvbkJlZm9yZUl0ZW0iK2FbYl1dKGMsayxnLGgpPT09ZmFsc2UpfHwoaS5maXJlRXZlbnQoImJlZm9yZWl0ZW0iK2IsaSxjLGssZyxoKT09PWZhbHNlKXx8KGlbIm9uSXRlbSIrYVtiXV0oYyxrLGcsaCk9PT1mYWxzZSkpe3JldHVybiBmYWxzZX1pLmZpcmVFdmVudCgiaXRlbSIrYixpLGMsayxnLGgpfWVsc2V7aWYoKGkucHJvY2Vzc0NvbnRhaW5lckV2ZW50KGgpPT09ZmFsc2UpfHwoaVsib25CZWZvcmVDb250YWluZXIiK2Fbal1dKGgpPT09ZmFsc2UpfHwoaS5maXJlRXZlbnQoImJlZm9yZWNvbnRhaW5lciIraixpLGgpPT09ZmFsc2UpfHwoaVsib25Db250YWluZXIiK2Fbal1dKGgpPT09ZmFsc2UpKXtyZXR1cm4gZmFsc2V9aS5maXJlRXZlbnQoImNvbnRhaW5lciIraixpLGgpfXJldHVybiB0cnVlfSxpc05ld0l0ZW1FdmVudDpmdW5jdGlvbihkLGcpe3ZhciBjPXRoaXMsYT1jLm1vdXNlT3Zlckl0ZW0sYj1nLnR5cGU7c3dpdGNoKGIpe2Nhc2UibW91c2VvdmVyIjppZihkPT09YSl7cmV0dXJuIGZhbHNlfWMubW91c2VPdmVySXRlbT1kO3JldHVybiJtb3VzZWVudGVyIjtjYXNlIm1vdXNlb3V0IjppZihjLnN0aWxsT3Zlckl0ZW0oZyxhKSl7cmV0dXJuIGZhbHNlfWMubW91c2VPdmVySXRlbT1udWxsO3JldHVybiJtb3VzZWxlYXZlIn1yZXR1cm4gYn0sb25JdGVtTW91c2VFbnRlcjpmdW5jdGlvbihhLGMsYixkKXtpZih0aGlzLnRyYWNrT3Zlcil7dGhpcy5oaWdobGlnaHRJdGVtKGMpfX0sb25JdGVtTW91c2VMZWF2ZTpmdW5jdGlvbihhLGMsYixkKXtpZih0aGlzLnRyYWNrT3Zlcil7dGhpcy5jbGVhckhpZ2hsaWdodCgpfX0sb25JdGVtTW91c2VEb3duOkV4dC5lbXB0eUZuLG9uSXRlbU1vdXNlVXA6RXh0LmVtcHR5Rm4sb25JdGVtRm9jdXM6RXh0LmVtcHR5Rm4sb25JdGVtQ2xpY2s6RXh0LmVtcHR5Rm4sb25JdGVtRGJsQ2xpY2s6RXh0LmVtcHR5Rm4sb25JdGVtQ29udGV4dE1lbnU6RXh0LmVtcHR5Rm4sb25JdGVtS2V5RG93bjpFeHQuZW1wdHlGbixvbkJlZm9yZUl0ZW1Nb3VzZURvd246RXh0LmVtcHR5Rm4sb25CZWZvcmVJdGVtTW91c2VVcDpFeHQuZW1wdHlGbixvbkJlZm9yZUl0ZW1Gb2N1czpFeHQuZW1wdHlGbixvbkJlZm9yZUl0ZW1Nb3VzZUVudGVyOkV4dC5lbXB0eUZuLG9uQmVmb3JlSXRlbU1vdXNlTGVhdmU6RXh0LmVtcHR5Rm4sb25CZWZvcmVJdGVtQ2xpY2s6RXh0LmVtcHR5Rm4sb25CZWZvcmVJdGVtRGJsQ2xpY2s6RXh0LmVtcHR5Rm4sb25CZWZvcmVJdGVtQ29udGV4dE1lbnU6RXh0LmVtcHR5Rm4sb25CZWZvcmVJdGVtS2V5RG93bjpFeHQuZW1wdHlGbixvbkNvbnRhaW5lck1vdXNlRG93bjpFeHQuZW1wdHlGbixvbkNvbnRhaW5lck1vdXNlVXA6RXh0LmVtcHR5Rm4sb25Db250YWluZXJNb3VzZU92ZXI6RXh0LmVtcHR5Rm4sb25Db250YWluZXJNb3VzZU91dDpFeHQuZW1wdHlGbixvbkNvbnRhaW5lckNsaWNrOkV4dC5lbXB0eUZuLG9uQ29udGFpbmVyRGJsQ2xpY2s6RXh0LmVtcHR5Rm4sb25Db250YWluZXJDb250ZXh0TWVudTpFeHQuZW1wdHlGbixvbkNvbnRhaW5lcktleURvd246RXh0LmVtcHR5Rm4sb25CZWZvcmVDb250YWluZXJNb3VzZURvd246RXh0LmVtcHR5Rm4sb25CZWZvcmVDb250YWluZXJNb3VzZVVwOkV4dC5lbXB0eUZuLG9uQmVmb3JlQ29udGFpbmVyTW91c2VPdmVyOkV4dC5lbXB0eUZuLG9uQmVmb3JlQ29udGFpbmVyTW91c2VPdXQ6RXh0LmVtcHR5Rm4sb25CZWZvcmVDb250YWluZXJDbGljazpFeHQuZW1wdHlGbixvbkJlZm9yZUNvbnRhaW5lckRibENsaWNrOkV4dC5lbXB0eUZuLG9uQmVmb3JlQ29udGFpbmVyQ29udGV4dE1lbnU6RXh0LmVtcHR5Rm4sb25CZWZvcmVDb250YWluZXJLZXlEb3duOkV4dC5lbXB0eUZuLHNldEhpZ2hsaWdodGVkSXRlbTpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE9Yi5oaWdobGlnaHRlZEl0ZW07aWYoYSE9Yyl7aWYoYSl7RXh0LmZseShhKS5yZW1vdmVDbHMoYi5vdmVySXRlbUNscyk7Yi5maXJlRXZlbnQoInVuaGlnaGxpZ2h0aXRlbSIsYixhKX1iLmhpZ2hsaWdodGVkSXRlbT1jO2lmKGMpe0V4dC5mbHkoYykuYWRkQ2xzKGIub3Zlckl0ZW1DbHMpO2IuZmlyZUV2ZW50KCJoaWdobGlnaHRpdGVtIixiLGMpfX19LGhpZ2hsaWdodEl0ZW06ZnVuY3Rpb24oYSl7dGhpcy5zZXRIaWdobGlnaHRlZEl0ZW0oYSl9LGNsZWFySGlnaGxpZ2h0OmZ1bmN0aW9uKCl7dGhpcy5zZXRIaWdobGlnaHRlZEl0ZW0odW5kZWZpbmVkKX0sb25VcGRhdGU6ZnVuY3Rpb24oYixhKXt2YXIgZz10aGlzLGUsYyxkO2lmKGcudmlld1JlYWR5KXtlPWcuZ2V0Tm9kZShhKTtjPWcuY2FsbFBhcmVudChhcmd1bWVudHMpO2Q9Zy5oaWdobGlnaHRlZEl0ZW07aWYoZCYmZD09PWUpe2RlbGV0ZSBnLmhpZ2hsaWdodGVkSXRlbTtpZihjKXtnLmhpZ2hsaWdodEl0ZW0oYyl9fX19LHJlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLmNsZWFySGlnaGxpZ2h0KCk7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9fSk7RXh0LmRlZmluZSgiRXh0LnRvb2xiYXIuVGV4dEl0ZW0iLHtleHRlbmQ6IkV4dC50b29sYmFyLkl0ZW0iLHJlcXVpcmVzOlsiRXh0LlhUZW1wbGF0ZSJdLGFsaWFzOiJ3aWRnZXQudGJ0ZXh0IixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5Ub29sYmFyLlRleHRJdGVtIix0ZXh0OiIiLHJlbmRlclRwbDoie3RleHR9IixiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ0b29sYmFyLXRleHQiLGJlZm9yZVJlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KCk7RXh0LmFwcGx5KGEucmVuZGVyRGF0YSx7dGV4dDphLnRleHR9KX0sc2V0VGV4dDpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKGEucmVuZGVyZWQpe2EuZWwudXBkYXRlKGIpO2EudXBkYXRlTGF5b3V0KCl9ZWxzZXt0aGlzLnRleHQ9Yn19fSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uZmllbGQuU3Bpbm5lciIse2V4dGVuZDoiRXh0LmZvcm0uZmllbGQuVHJpZ2dlciIsYWxpYXM6IndpZGdldC5zcGlubmVyZmllbGQiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmZvcm0uU3Bpbm5lciIscmVxdWlyZXM6WyJFeHQudXRpbC5LZXlOYXYiXSx0cmlnZ2VyMUNsczpFeHQuYmFzZUNTU1ByZWZpeCsiZm9ybS1zcGlubmVyLXVwIix0cmlnZ2VyMkNsczpFeHQuYmFzZUNTU1ByZWZpeCsiZm9ybS1zcGlubmVyLWRvd24iLHNwaW5VcEVuYWJsZWQ6dHJ1ZSxzcGluRG93bkVuYWJsZWQ6dHJ1ZSxrZXlOYXZFbmFibGVkOnRydWUsbW91c2VXaGVlbEVuYWJsZWQ6dHJ1ZSxyZXBlYXRUcmlnZ2VyQ2xpY2s6dHJ1ZSxvblNwaW5VcDpFeHQuZW1wdHlGbixvblNwaW5Eb3duOkV4dC5lbXB0eUZuLHRyaWdnZXJUcGw6Jzx0ZCBzdHlsZT0ie3RyaWdnZXJTdHlsZX0iPjxkaXYgY2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrInRyaWdnZXItaW5kZXgtMCAiK0V4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLXRyaWdnZXIgIitFeHQuYmFzZUNTU1ByZWZpeCsnZm9ybS1zcGlubmVyLXVwIiByb2xlPSJidXR0b24iPjwvZGl2PjxkaXYgY2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrInRyaWdnZXItaW5kZXgtMSAiK0V4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLXRyaWdnZXIgIitFeHQuYmFzZUNTU1ByZWZpeCsnZm9ybS1zcGlubmVyLWRvd24iIHJvbGU9ImJ1dHRvbiI+PC9kaXY+PC90ZD48L3RyPicsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudCgpO3RoaXMuYWRkRXZlbnRzKCJzcGluIiwic3BpbnVwIiwic3BpbmRvd24iKX0sb25SZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YT1iLnRyaWdnZXJFbDtiLnNwaW5VcEVsPWEuaXRlbSgwKTtiLnNwaW5Eb3duRWw9YS5pdGVtKDEpO2IudHJpZ2dlckNlbGw9Yi5zcGluVXBFbC5wYXJlbnQoKTtiLnNldFNwaW5VcEVuYWJsZWQoYi5zcGluVXBFbmFibGVkKTtiLnNldFNwaW5Eb3duRW5hYmxlZChiLnNwaW5Eb3duRW5hYmxlZCk7aWYoYi5rZXlOYXZFbmFibGVkKXtiLnNwaW5uZXJLZXlOYXY9bmV3IEV4dC51dGlsLktleU5hdihiLmlucHV0RWwse3Njb3BlOmIsdXA6Yi5zcGluVXAsZG93bjpiLnNwaW5Eb3dufSl9aWYoYi5tb3VzZVdoZWVsRW5hYmxlZCl7Yi5tb24oYi5ib2R5RWwsIm1vdXNld2hlZWwiLGIub25Nb3VzZVdoZWVsLGIpfX0sZ2V0U3ViVHBsTWFya3VwOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPUV4dC5mb3JtLmZpZWxkLkJhc2UucHJvdG90eXBlLmdldFN1YlRwbE1hcmt1cC5hcHBseShhLGFyZ3VtZW50cyk7cmV0dXJuJzx0YWJsZSBpZD0iJythLmlkKyctdHJpZ2dlcldyYXAiIGNsYXNzPSInK0V4dC5iYXNlQ1NTUHJlZml4Kydmb3JtLXRyaWdnZXItd3JhcCIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIj48dGJvZHk+PHRyPjx0ZCBpZD0iJythLmlkKyctaW5wdXRDZWxsIiBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsnZm9ybS10cmlnZ2VyLWlucHV0LWNlbGwiPicrYisiPC90ZD4iK2EuZ2V0VHJpZ2dlck1hcmt1cCgpKyI8L3Rib2R5PjwvdGFibGU+In0sZ2V0VHJpZ2dlck1hcmt1cDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj0oYS5yZWFkT25seXx8YS5oaWRlVHJpZ2dlcik7cmV0dXJuIGEuZ2V0VHBsKCJ0cmlnZ2VyVHBsIikuYXBwbHkoe3RyaWdnZXJTdHlsZToid2lkdGg6IithLnRyaWdnZXJXaWR0aCsoYj8icHg7ZGlzcGxheTpub25lIjoicHgiKX0pfSxnZXRUcmlnZ2VyV2lkdGg6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9MDtpZihiLnRyaWdnZXJXcmFwJiYhYi5oaWRlVHJpZ2dlciYmIWIucmVhZE9ubHkpe2E9Yi50cmlnZ2VyV2lkdGh9cmV0dXJuIGF9LG9uVHJpZ2dlcjFDbGljazpmdW5jdGlvbigpe3RoaXMuc3BpblVwKCl9LG9uVHJpZ2dlcjJDbGljazpmdW5jdGlvbigpe3RoaXMuc3BpbkRvd24oKX0sb25UcmlnZ2VyV3JhcE1vdXNldXA6ZnVuY3Rpb24oKXt0aGlzLmlucHV0RWwuZm9jdXMoKX0sc3BpblVwOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnNwaW5VcEVuYWJsZWQmJiFhLmRpc2FibGVkKXthLmZpcmVFdmVudCgic3BpbiIsYSwidXAiKTthLmZpcmVFdmVudCgic3BpbnVwIixhKTthLm9uU3BpblVwKCl9fSxzcGluRG93bjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5zcGluRG93bkVuYWJsZWQmJiFhLmRpc2FibGVkKXthLmZpcmVFdmVudCgic3BpbiIsYSwiZG93biIpO2EuZmlyZUV2ZW50KCJzcGluZG93biIsYSk7YS5vblNwaW5Eb3duKCl9fSxzZXRTcGluVXBFbmFibGVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLnNwaW5VcEVuYWJsZWQ7Yi5zcGluVXBFbmFibGVkPWE7aWYoYyE9PWEmJmIucmVuZGVyZWQpe2Iuc3BpblVwRWxbYT8icmVtb3ZlQ2xzIjoiYWRkQ2xzIl0oYi50cmlnZ2VyMUNscysiLWRpc2FibGVkIil9fSxzZXRTcGluRG93bkVuYWJsZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuc3BpbkRvd25FbmFibGVkO2Iuc3BpbkRvd25FbmFibGVkPWE7aWYoYyE9PWEmJmIucmVuZGVyZWQpe2Iuc3BpbkRvd25FbFthPyJyZW1vdmVDbHMiOiJhZGRDbHMiXShiLnRyaWdnZXIyQ2xzKyItZGlzYWJsZWQiKX19LG9uTW91c2VXaGVlbDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLGM7aWYoYS5oYXNGb2N1cyl7Yz1iLmdldFdoZWVsRGVsdGEoKTtpZihjPjApe2Euc3BpblVwKCl9ZWxzZXtpZihjPDApe2Euc3BpbkRvd24oKX19Yi5zdG9wRXZlbnQoKX19LG9uRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95TWVtYmVycyh0aGlzLCJzcGlubmVyS2V5TmF2Iiwic3BpblVwRWwiLCJzcGluRG93bkVsIik7dGhpcy5jYWxsUGFyZW50KCl9fSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uZmllbGQuTnVtYmVyIix7ZXh0ZW5kOiJFeHQuZm9ybS5maWVsZC5TcGlubmVyIixhbGlhczoid2lkZ2V0Lm51bWJlcmZpZWxkIixhbHRlcm5hdGVDbGFzc05hbWU6WyJFeHQuZm9ybS5OdW1iZXJGaWVsZCIsIkV4dC5mb3JtLk51bWJlciJdLGFsbG93RGVjaW1hbHM6dHJ1ZSxkZWNpbWFsU2VwYXJhdG9yOiIuIixzdWJtaXRMb2NhbGVTZXBhcmF0b3I6dHJ1ZSxkZWNpbWFsUHJlY2lzaW9uOjIsbWluVmFsdWU6TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heFZhbHVlOk51bWJlci5NQVhfVkFMVUUsc3RlcDoxLG1pblRleHQ6IlRoZSBtaW5pbXVtIHZhbHVlIGZvciB0aGlzIGZpZWxkIGlzIHswfSIsbWF4VGV4dDoiVGhlIG1heGltdW0gdmFsdWUgZm9yIHRoaXMgZmllbGQgaXMgezB9IixuYW5UZXh0OiJ7MH0gaXMgbm90IGEgdmFsaWQgbnVtYmVyIixuZWdhdGl2ZVRleHQ6IlRoZSB2YWx1ZSBjYW5ub3QgYmUgbmVnYXRpdmUiLGJhc2VDaGFyczoiMDEyMzQ1Njc4OSIsYXV0b1N0cmlwQ2hhcnM6ZmFsc2UsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYjthLmNhbGxQYXJlbnQoKTthLnNldE1pblZhbHVlKGEubWluVmFsdWUpO2Euc2V0TWF4VmFsdWUoYS5tYXhWYWx1ZSk7aWYoYS5kaXNhYmxlS2V5RmlsdGVyIT09dHJ1ZSl7Yj1hLmJhc2VDaGFycysiIjtpZihhLmFsbG93RGVjaW1hbHMpe2IrPWEuZGVjaW1hbFNlcGFyYXRvcn1pZihhLm1pblZhbHVlPDApe2IrPSItIn1iPUV4dC5TdHJpbmcuZXNjYXBlUmVnZXgoYik7YS5tYXNrUmU9bmV3IFJlZ0V4cCgiWyIrYisiXSIpO2lmKGEuYXV0b1N0cmlwQ2hhcnMpe2Euc3RyaXBDaGFyc1JlPW5ldyBSZWdFeHAoIlteIitiKyJdIiwiZ2kiKX19fSxnZXRFcnJvcnM6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxlPWIuY2FsbFBhcmVudChhcmd1bWVudHMpLGQ9RXh0LlN0cmluZy5mb3JtYXQsYTtjPUV4dC5pc0RlZmluZWQoYyk/Yzp0aGlzLnByb2Nlc3NSYXdWYWx1ZSh0aGlzLmdldFJhd1ZhbHVlKCkpO2lmKGMubGVuZ3RoPDEpe3JldHVybiBlfWM9U3RyaW5nKGMpLnJlcGxhY2UoYi5kZWNpbWFsU2VwYXJhdG9yLCIuIik7aWYoaXNOYU4oYykpe2UucHVzaChkKGIubmFuVGV4dCxjKSl9YT1iLnBhcnNlVmFsdWUoYyk7aWYoYi5taW5WYWx1ZT09PTAmJmE8MCl7ZS5wdXNoKHRoaXMubmVnYXRpdmVUZXh0KX1lbHNle2lmKGE8Yi5taW5WYWx1ZSl7ZS5wdXNoKGQoYi5taW5UZXh0LGIubWluVmFsdWUpKX19aWYoYT5iLm1heFZhbHVlKXtlLnB1c2goZChiLm1heFRleHQsYi5tYXhWYWx1ZSkpfXJldHVybiBlfSxyYXdUb1ZhbHVlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZml4UHJlY2lzaW9uKHRoaXMucGFyc2VWYWx1ZShiKSk7aWYoYT09PW51bGwpe2E9Ynx8bnVsbH1yZXR1cm4gYX0sdmFsdWVUb1JhdzpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE9Yi5kZWNpbWFsU2VwYXJhdG9yO2M9Yi5wYXJzZVZhbHVlKGMpO2M9Yi5maXhQcmVjaXNpb24oYyk7Yz1FeHQuaXNOdW1iZXIoYyk/YzpwYXJzZUZsb2F0KFN0cmluZyhjKS5yZXBsYWNlKGEsIi4iKSk7Yz1pc05hTihjKT8iIjpTdHJpbmcoYykucmVwbGFjZSgiLiIsYSk7cmV0dXJuIGN9LGdldFN1Ym1pdFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY2FsbFBhcmVudCgpO2lmKCFhLnN1Ym1pdExvY2FsZVNlcGFyYXRvcil7Yj1iLnJlcGxhY2UoYS5kZWNpbWFsU2VwYXJhdG9yLCIuIil9cmV0dXJuIGJ9LG9uQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy50b2dnbGVTcGlubmVycygpO3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSx0b2dnbGVTcGlubmVyczpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1iLmdldFZhbHVlKCksYT1jPT09bnVsbDtiLnNldFNwaW5VcEVuYWJsZWQoYXx8YzxiLm1heFZhbHVlKTtiLnNldFNwaW5Eb3duRW5hYmxlZChhfHxjPmIubWluVmFsdWUpfSxzZXRNaW5WYWx1ZTpmdW5jdGlvbihhKXt0aGlzLm1pblZhbHVlPUV4dC5OdW1iZXIuZnJvbShhLE51bWJlci5ORUdBVElWRV9JTkZJTklUWSk7dGhpcy50b2dnbGVTcGlubmVycygpfSxzZXRNYXhWYWx1ZTpmdW5jdGlvbihhKXt0aGlzLm1heFZhbHVlPUV4dC5OdW1iZXIuZnJvbShhLE51bWJlci5NQVhfVkFMVUUpO3RoaXMudG9nZ2xlU3Bpbm5lcnMoKX0scGFyc2VWYWx1ZTpmdW5jdGlvbihhKXthPXBhcnNlRmxvYXQoU3RyaW5nKGEpLnJlcGxhY2UodGhpcy5kZWNpbWFsU2VwYXJhdG9yLCIuIikpO3JldHVybiBpc05hTihhKT9udWxsOmF9LGZpeFByZWNpc2lvbjpmdW5jdGlvbihkKXt2YXIgYz10aGlzLGI9aXNOYU4oZCksYT1jLmRlY2ltYWxQcmVjaXNpb247aWYoYnx8IWQpe3JldHVybiBiPyIiOmR9ZWxzZXtpZighYy5hbGxvd0RlY2ltYWxzfHxhPD0wKXthPTB9fXJldHVybiBwYXJzZUZsb2F0KEV4dC5OdW1iZXIudG9GaXhlZChwYXJzZUZsb2F0KGQpLGEpKX0sYmVmb3JlQmx1cjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLnBhcnNlVmFsdWUoYi5nZXRSYXdWYWx1ZSgpKTtpZighRXh0LmlzRW1wdHkoYSkpe2Iuc2V0VmFsdWUoYSl9fSxvblNwaW5VcDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoIWEucmVhZE9ubHkpe2Euc2V0VmFsdWUoRXh0Lk51bWJlci5jb25zdHJhaW4oYS5nZXRWYWx1ZSgpK2Euc3RlcCxhLm1pblZhbHVlLGEubWF4VmFsdWUpKX19LG9uU3BpbkRvd246ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKCFhLnJlYWRPbmx5KXthLnNldFZhbHVlKEV4dC5OdW1iZXIuY29uc3RyYWluKGEuZ2V0VmFsdWUoKS1hLnN0ZXAsYS5taW5WYWx1ZSxhLm1heFZhbHVlKSl9fX0pO0V4dC5kZWZpbmUoIkV4dC50b29sYmFyLlBhZ2luZyIse2V4dGVuZDoiRXh0LnRvb2xiYXIuVG9vbGJhciIsYWxpYXM6IndpZGdldC5wYWdpbmd0b29sYmFyIixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5QYWdpbmdUb29sYmFyIixyZXF1aXJlczpbIkV4dC50b29sYmFyLlRleHRJdGVtIiwiRXh0LmZvcm0uZmllbGQuTnVtYmVyIl0sbWl4aW5zOntiaW5kYWJsZToiRXh0LnV0aWwuQmluZGFibGUifSxkaXNwbGF5SW5mbzpmYWxzZSxwcmVwZW5kQnV0dG9uczpmYWxzZSxkaXNwbGF5TXNnOiJEaXNwbGF5aW5nIHswfSAtIHsxfSBvZiB7Mn0iLGVtcHR5TXNnOiJObyBkYXRhIHRvIGRpc3BsYXkiLGJlZm9yZVBhZ2VUZXh0OiJQYWdlIixhZnRlclBhZ2VUZXh0OiJvZiB7MH0iLGZpcnN0VGV4dDoiRmlyc3QgUGFnZSIscHJldlRleHQ6IlByZXZpb3VzIFBhZ2UiLG5leHRUZXh0OiJOZXh0IFBhZ2UiLGxhc3RUZXh0OiJMYXN0IFBhZ2UiLHJlZnJlc2hUZXh0OiJSZWZyZXNoIixpbnB1dEl0ZW1XaWR0aDozMCxnZXRQYWdpbmdJdGVtczpmdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuW3tpdGVtSWQ6ImZpcnN0Iix0b29sdGlwOmEuZmlyc3RUZXh0LG92ZXJmbG93VGV4dDphLmZpcnN0VGV4dCxpY29uQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ0YmFyLXBhZ2UtZmlyc3QiLGRpc2FibGVkOnRydWUsaGFuZGxlcjphLm1vdmVGaXJzdCxzY29wZTphfSx7aXRlbUlkOiJwcmV2Iix0b29sdGlwOmEucHJldlRleHQsb3ZlcmZsb3dUZXh0OmEucHJldlRleHQsaWNvbkNsczpFeHQuYmFzZUNTU1ByZWZpeCsidGJhci1wYWdlLXByZXYiLGRpc2FibGVkOnRydWUsaGFuZGxlcjphLm1vdmVQcmV2aW91cyxzY29wZTphfSwiLSIsYS5iZWZvcmVQYWdlVGV4dCx7eHR5cGU6Im51bWJlcmZpZWxkIixpdGVtSWQ6ImlucHV0SXRlbSIsbmFtZToiaW5wdXRJdGVtIixjbHM6RXh0LmJhc2VDU1NQcmVmaXgrInRiYXItcGFnZS1udW1iZXIiLGFsbG93RGVjaW1hbHM6ZmFsc2UsbWluVmFsdWU6MSxoaWRlVHJpZ2dlcjp0cnVlLGVuYWJsZUtleUV2ZW50czp0cnVlLGtleU5hdkVuYWJsZWQ6ZmFsc2Usc2VsZWN0T25Gb2N1czp0cnVlLHN1Ym1pdFZhbHVlOmZhbHNlLGlzRm9ybUZpZWxkOmZhbHNlLHdpZHRoOmEuaW5wdXRJdGVtV2lkdGgsbWFyZ2luczoiLTEgMiAzIDIiLGxpc3RlbmVyczp7c2NvcGU6YSxrZXlkb3duOmEub25QYWdpbmdLZXlEb3duLGJsdXI6YS5vblBhZ2luZ0JsdXJ9fSx7eHR5cGU6InRidGV4dCIsaXRlbUlkOiJhZnRlclRleHRJdGVtIix0ZXh0OkV4dC5TdHJpbmcuZm9ybWF0KGEuYWZ0ZXJQYWdlVGV4dCwxKX0sIi0iLHtpdGVtSWQ6Im5leHQiLHRvb2x0aXA6YS5uZXh0VGV4dCxvdmVyZmxvd1RleHQ6YS5uZXh0VGV4dCxpY29uQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ0YmFyLXBhZ2UtbmV4dCIsZGlzYWJsZWQ6dHJ1ZSxoYW5kbGVyOmEubW92ZU5leHQsc2NvcGU6YX0se2l0ZW1JZDoibGFzdCIsdG9vbHRpcDphLmxhc3RUZXh0LG92ZXJmbG93VGV4dDphLmxhc3RUZXh0LGljb25DbHM6RXh0LmJhc2VDU1NQcmVmaXgrInRiYXItcGFnZS1sYXN0IixkaXNhYmxlZDp0cnVlLGhhbmRsZXI6YS5tb3ZlTGFzdCxzY29wZTphfSwiLSIse2l0ZW1JZDoicmVmcmVzaCIsdG9vbHRpcDphLnJlZnJlc2hUZXh0LG92ZXJmbG93VGV4dDphLnJlZnJlc2hUZXh0LGljb25DbHM6RXh0LmJhc2VDU1NQcmVmaXgrInRiYXItbG9hZGluZyIsaGFuZGxlcjphLmRvUmVmcmVzaCxzY29wZTphfV19LGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9Yi5nZXRQYWdpbmdJdGVtcygpLGE9Yi5pdGVtc3x8Yi5idXR0b25zfHxbXTtpZihiLnByZXBlbmRCdXR0b25zKXtiLml0ZW1zPWEuY29uY2F0KGMpfWVsc2V7Yi5pdGVtcz1jLmNvbmNhdChhKX1kZWxldGUgYi5idXR0b25zO2lmKGIuZGlzcGxheUluZm8pe2IuaXRlbXMucHVzaCgiLT4iKTtiLml0ZW1zLnB1c2goe3h0eXBlOiJ0YnRleHQiLGl0ZW1JZDoiZGlzcGxheUl0ZW0ifSl9Yi5jYWxsUGFyZW50KCk7Yi5hZGRFdmVudHMoImNoYW5nZSIsImJlZm9yZWNoYW5nZSIpO2Iub24oImJlZm9yZXJlbmRlciIsYi5vbkxvYWQsYix7c2luZ2xlOnRydWV9KTtiLmJpbmRTdG9yZShiLnN0b3JlfHwiZXh0LWVtcHR5LXN0b3JlIix0cnVlKX0sdXBkYXRlSW5mbzpmdW5jdGlvbigpe3ZhciBlPXRoaXMsYz1lLmNoaWxkKCIjZGlzcGxheUl0ZW0iKSxhPWUuc3RvcmUsYj1lLmdldFBhZ2VEYXRhKCksZCxnO2lmKGMpe2Q9YS5nZXRDb3VudCgpO2lmKGQ9PT0wKXtnPWUuZW1wdHlNc2d9ZWxzZXtnPUV4dC5TdHJpbmcuZm9ybWF0KGUuZGlzcGxheU1zZyxiLmZyb21SZWNvcmQsYi50b1JlY29yZCxiLnRvdGFsKX1jLnNldFRleHQoZyl9fSxvbkxvYWQ6ZnVuY3Rpb24oKXt2YXIgZz10aGlzLGQsYixjLGEsZSxoO2U9Zy5zdG9yZS5nZXRDb3VudCgpO2g9ZT09PTA7aWYoIWgpe2Q9Zy5nZXRQYWdlRGF0YSgpO2I9ZC5jdXJyZW50UGFnZTtjPWQucGFnZUNvdW50O2E9RXh0LlN0cmluZy5mb3JtYXQoZy5hZnRlclBhZ2VUZXh0LGlzTmFOKGMpPzE6Yyl9ZWxzZXtiPTA7Yz0wO2E9RXh0LlN0cmluZy5mb3JtYXQoZy5hZnRlclBhZ2VUZXh0LDApfUV4dC5zdXNwZW5kTGF5b3V0cygpO2cuY2hpbGQoIiNhZnRlclRleHRJdGVtIikuc2V0VGV4dChhKTtnLmNoaWxkKCIjaW5wdXRJdGVtIikuc2V0RGlzYWJsZWQoaCkuc2V0VmFsdWUoYik7Zy5jaGlsZCgiI2ZpcnN0Iikuc2V0RGlzYWJsZWQoYj09PTF8fGgpO2cuY2hpbGQoIiNwcmV2Iikuc2V0RGlzYWJsZWQoYj09PTF8fGgpO2cuY2hpbGQoIiNuZXh0Iikuc2V0RGlzYWJsZWQoYj09PWN8fGgpO2cuY2hpbGQoIiNsYXN0Iikuc2V0RGlzYWJsZWQoYj09PWN8fGgpO2cuY2hpbGQoIiNyZWZyZXNoIikuZW5hYmxlKCk7Zy51cGRhdGVJbmZvKCk7RXh0LnJlc3VtZUxheW91dHModHJ1ZSk7aWYoZy5yZW5kZXJlZCl7Zy5maXJlRXZlbnQoImNoYW5nZSIsZyxkKX19LGdldFBhZ2VEYXRhOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5zdG9yZSxhPWIuZ2V0VG90YWxDb3VudCgpO3JldHVybnt0b3RhbDphLGN1cnJlbnRQYWdlOmIuY3VycmVudFBhZ2UscGFnZUNvdW50Ok1hdGguY2VpbChhL2IucGFnZVNpemUpLGZyb21SZWNvcmQ6KChiLmN1cnJlbnRQYWdlLTEpKmIucGFnZVNpemUpKzEsdG9SZWNvcmQ6TWF0aC5taW4oYi5jdXJyZW50UGFnZSpiLnBhZ2VTaXplLGEpfX0sb25Mb2FkRXJyb3I6ZnVuY3Rpb24oKXtpZighdGhpcy5yZW5kZXJlZCl7cmV0dXJufXRoaXMuY2hpbGQoIiNyZWZyZXNoIikuZW5hYmxlKCl9LHJlYWRQYWdlRnJvbUlucHV0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuY2hpbGQoIiNpbnB1dEl0ZW0iKS5nZXRWYWx1ZSgpLGM9cGFyc2VJbnQoYSwxMCk7aWYoIWF8fGlzTmFOKGMpKXt0aGlzLmNoaWxkKCIjaW5wdXRJdGVtIikuc2V0VmFsdWUoYi5jdXJyZW50UGFnZSk7cmV0dXJuIGZhbHNlfXJldHVybiBjfSxvblBhZ2luZ0ZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5jaGlsZCgiI2lucHV0SXRlbSIpLnNlbGVjdCgpfSxvblBhZ2luZ0JsdXI6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5nZXRQYWdlRGF0YSgpLmN1cnJlbnRQYWdlO3RoaXMuY2hpbGQoIiNpbnB1dEl0ZW0iKS5zZXRWYWx1ZShhKX0sb25QYWdpbmdLZXlEb3duOmZ1bmN0aW9uKGksaCl7dmFyIGQ9dGhpcyxiPWguZ2V0S2V5KCksYz1kLmdldFBhZ2VEYXRhKCksYT1oLnNoaWZ0S2V5PzEwOjEsZztpZihiPT1oLlJFVFVSTil7aC5zdG9wRXZlbnQoKTtnPWQucmVhZFBhZ2VGcm9tSW5wdXQoYyk7aWYoZyE9PWZhbHNlKXtnPU1hdGgubWluKE1hdGgubWF4KDEsZyksYy5wYWdlQ291bnQpO2lmKGQuZmlyZUV2ZW50KCJiZWZvcmVjaGFuZ2UiLGQsZykhPT1mYWxzZSl7ZC5zdG9yZS5sb2FkUGFnZShnKX19fWVsc2V7aWYoYj09aC5IT01FfHxiPT1oLkVORCl7aC5zdG9wRXZlbnQoKTtnPWI9PWguSE9NRT8xOmMucGFnZUNvdW50O2kuc2V0VmFsdWUoZyl9ZWxzZXtpZihiPT1oLlVQfHxiPT1oLlBBR0VfVVB8fGI9PWguRE9XTnx8Yj09aC5QQUdFX0RPV04pe2guc3RvcEV2ZW50KCk7Zz1kLnJlYWRQYWdlRnJvbUlucHV0KGMpO2lmKGcpe2lmKGI9PWguRE9XTnx8Yj09aC5QQUdFX0RPV04pe2EqPS0xfWcrPWE7aWYoZz49MSYmZzw9Yy5wYWdlQ291bnQpe2kuc2V0VmFsdWUoZyl9fX19fX0sYmVmb3JlTG9hZDpmdW5jdGlvbigpe2lmKHRoaXMucmVuZGVyZWQmJnRoaXMucmVmcmVzaCl7dGhpcy5yZWZyZXNoLmRpc2FibGUoKX19LG1vdmVGaXJzdDpmdW5jdGlvbigpe2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVjaGFuZ2UiLHRoaXMsMSkhPT1mYWxzZSl7dGhpcy5zdG9yZS5sb2FkUGFnZSgxKX19LG1vdmVQcmV2aW91czpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLnN0b3JlLmN1cnJlbnRQYWdlLTE7aWYoYT4wKXtpZihiLmZpcmVFdmVudCgiYmVmb3JlY2hhbmdlIixiLGEpIT09ZmFsc2Upe2Iuc3RvcmUucHJldmlvdXNQYWdlKCl9fX0sbW92ZU5leHQ6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9Yy5nZXRQYWdlRGF0YSgpLnBhZ2VDb3VudCxhPWMuc3RvcmUuY3VycmVudFBhZ2UrMTtpZihhPD1iKXtpZihjLmZpcmVFdmVudCgiYmVmb3JlY2hhbmdlIixjLGEpIT09ZmFsc2Upe2Muc3RvcmUubmV4dFBhZ2UoKX19fSxtb3ZlTGFzdDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmdldFBhZ2VEYXRhKCkucGFnZUNvdW50O2lmKGIuZmlyZUV2ZW50KCJiZWZvcmVjaGFuZ2UiLGIsYSkhPT1mYWxzZSl7Yi5zdG9yZS5sb2FkUGFnZShhKX19LGRvUmVmcmVzaDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLnN0b3JlLmN1cnJlbnRQYWdlO2lmKGEuZmlyZUV2ZW50KCJiZWZvcmVjaGFuZ2UiLGEsYikhPT1mYWxzZSl7YS5zdG9yZS5sb2FkUGFnZShiKX19LGdldFN0b3JlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7cmV0dXJue2JlZm9yZWxvYWQ6dGhpcy5iZWZvcmVMb2FkLGxvYWQ6dGhpcy5vbkxvYWQsZXhjZXB0aW9uOnRoaXMub25Mb2FkRXJyb3J9fSx1bmJpbmQ6ZnVuY3Rpb24oYSl7dGhpcy5iaW5kU3RvcmUobnVsbCl9LGJpbmQ6ZnVuY3Rpb24oYSl7dGhpcy5iaW5kU3RvcmUoYSl9LG9uRGVzdHJveTpmdW5jdGlvbigpe3RoaXMudW5iaW5kKCk7dGhpcy5jYWxsUGFyZW50KCl9fSk7RXh0LmRlZmluZSgiRXh0LnZpZXcuQm91bmRMaXN0Iix7ZXh0ZW5kOiJFeHQudmlldy5WaWV3IixhbGlhczoid2lkZ2V0LmJvdW5kbGlzdCIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuQm91bmRMaXN0IixyZXF1aXJlczpbIkV4dC5sYXlvdXQuY29tcG9uZW50LkJvdW5kTGlzdCIsIkV4dC50b29sYmFyLlBhZ2luZyJdLHBhZ2VTaXplOjAsYmFzZUNsczpFeHQuYmFzZUNTU1ByZWZpeCsiYm91bmRsaXN0IixpdGVtQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJib3VuZGxpc3QtaXRlbSIsbGlzdEl0ZW1DbHM6IiIsc2hhZG93OmZhbHNlLHRyYWNrT3Zlcjp0cnVlLHJlZnJlc2hlZDowLGRlZmVySW5pdGlhbFJlZnJlc2g6ZmFsc2UsY29tcG9uZW50TGF5b3V0OiJib3VuZGxpc3QiLGNoaWxkRWxzOlsibGlzdEVsIl0scmVuZGVyVHBsOlsnPGRpdiBpZD0ie2lkfS1saXN0RWwiIGNsYXNzPSJ7YmFzZUNsc30tbGlzdC1jdCIgc3R5bGU9Im92ZXJmbG93OmF1dG8iPjwvZGl2PicsInslIiwidmFyIG1lPXZhbHVlcy4kY29tcCwgcGFnaW5nVG9vbGJhcj1tZS5wYWdpbmdUb29sYmFyOyIsImlmIChwYWdpbmdUb29sYmFyKSB7IiwicGFnaW5nVG9vbGJhci5vd25lckxheW91dCA9IG1lLmNvbXBvbmVudExheW91dDsiLCJFeHQuRG9tSGVscGVyLmdlbmVyYXRlTWFya3VwKHBhZ2luZ1Rvb2xiYXIuZ2V0UmVuZGVyVHJlZSgpLCBvdXQpOyIsIn0iLCIlfSIse2Rpc2FibGVGb3JtYXRzOnRydWV9XSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuYmFzZUNscyxjPWIuaXRlbUNscztiLnNlbGVjdGVkSXRlbUNscz1hKyItc2VsZWN0ZWQiO2Iub3Zlckl0ZW1DbHM9YSsiLWl0ZW0tb3ZlciI7Yi5pdGVtU2VsZWN0b3I9Ii4iK2M7aWYoYi5mbG9hdGluZyl7Yi5hZGRDbHMoYSsiLWZsb2F0aW5nIil9aWYoIWIudHBsKXtiLnRwbD1uZXcgRXh0LlhUZW1wbGF0ZSgnPHVsPjx0cGwgZm9yPSIuIj4nLCc8bGkgcm9sZT0ib3B0aW9uIiBjbGFzcz0iJytjKyciPicrYi5nZXRJbm5lclRwbChiLmRpc3BsYXlGaWVsZCkrIjwvbGk+IiwiPC90cGw+PC91bD4iKX1lbHNle2lmKEV4dC5pc1N0cmluZyhiLnRwbCkpe2IudHBsPW5ldyBFeHQuWFRlbXBsYXRlKGIudHBsKX19aWYoYi5wYWdlU2l6ZSl7Yi5wYWdpbmdUb29sYmFyPWIuY3JlYXRlUGFnaW5nVG9vbGJhcigpfWIuY2FsbFBhcmVudCgpfSxiZWZvcmVSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGEudXAoIm1lbnUiKSl7YS5hZGRDbHMoRXh0LmJhc2VDU1NQcmVmaXgrIm1lbnUiKX19LGdldEJ1YmJsZVRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBpY2tlckZpZWxkfSxnZXRSZWZJdGVtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhZ2luZ1Rvb2xiYXI/W3RoaXMucGFnaW5nVG9vbGJhcl06W119LGNyZWF0ZVBhZ2luZ1Rvb2xiYXI6ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LndpZGdldCgicGFnaW5ndG9vbGJhciIse2lkOnRoaXMuaWQrIi1wYWdpbmctdG9vbGJhciIscGFnZVNpemU6dGhpcy5wYWdlU2l6ZSxzdG9yZTp0aGlzLnN0b3JlLGJvcmRlcjpmYWxzZSxvd25lckN0OnRoaXMsb3duZXJMYXlvdXQ6dGhpcy5nZXRDb21wb25lbnRMYXlvdXQoKX0pfSxmaW5pc2hSZW5kZXJDaGlsZHJlbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFnaW5nVG9vbGJhcjt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihhKXthLmZpbmlzaFJlbmRlcigpfX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLnBhZ2luZ1Rvb2xiYXI7Yi5jYWxsUGFyZW50KCk7aWYoYi5yZW5kZXJlZCYmYSYmYS5yZW5kZXJlZCYmIWIucHJlc2VydmVTY3JvbGxPblJlZnJlc2gpe2IuZWwuYXBwZW5kQ2hpbGQoYS5lbCl9fSxiaW5kU3RvcmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnBhZ2luZ1Rvb2xiYXI7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYyl7Yy5iaW5kU3RvcmUodGhpcy5zdG9yZSxiKX19LGdldFRhcmdldEVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGlzdEVsfHx0aGlzLmVsfSxnZXRJbm5lclRwbDpmdW5jdGlvbihhKXtyZXR1cm4ieyIrYSsifSJ9LG9uRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95TWVtYmVycyh0aGlzLCJwYWdpbmdUb29sYmFyIiwibGlzdEVsIik7dGhpcy5jYWxsUGFyZW50KCl9fSk7RXh0LmRlZmluZSgiRXh0LnZpZXcuQm91bmRMaXN0S2V5TmF2Iix7ZXh0ZW5kOiJFeHQudXRpbC5LZXlOYXYiLHJlcXVpcmVzOiJFeHQudmlldy5Cb3VuZExpc3QiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcztjLmJvdW5kTGlzdD1hLmJvdW5kTGlzdDtjLmNhbGxQYXJlbnQoW2IsRXh0LmFwcGx5KHt9LGEsYy5kZWZhdWx0SGFuZGxlcnMpXSl9LGRlZmF1bHRIYW5kbGVyczp7dXA6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGI9ZS5ib3VuZExpc3QsZD1iLmFsbCxnPWIuaGlnaGxpZ2h0ZWRJdGVtLGM9Zz9iLmluZGV4T2YoZyk6LTEsYT1jPjA/Yy0xOmQuZ2V0Q291bnQoKS0xO2UuaGlnaGxpZ2h0QXQoYSl9LGRvd246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGI9ZS5ib3VuZExpc3QsZD1iLmFsbCxnPWIuaGlnaGxpZ2h0ZWRJdGVtLGM9Zz9iLmluZGV4T2YoZyk6LTEsYT1jPGQuZ2V0Q291bnQoKS0xP2MrMTowO2UuaGlnaGxpZ2h0QXQoYSl9LHBhZ2V1cDpmdW5jdGlvbigpe30scGFnZWRvd246ZnVuY3Rpb24oKXt9LGhvbWU6ZnVuY3Rpb24oKXt0aGlzLmhpZ2hsaWdodEF0KDApfSxlbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuaGlnaGxpZ2h0QXQoYS5ib3VuZExpc3QuYWxsLmdldENvdW50KCktMSl9LGVudGVyOmZ1bmN0aW9uKGEpe3RoaXMuc2VsZWN0SGlnaGxpZ2h0ZWQoYSl9fSxoaWdobGlnaHRBdDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmJvdW5kTGlzdCxjPWEuYWxsLml0ZW0oYik7aWYoYyl7Yz1jLmRvbTthLmhpZ2hsaWdodEl0ZW0oYyk7YS5nZXRUYXJnZXRFbCgpLnNjcm9sbENoaWxkSW50b1ZpZXcoYyxmYWxzZSl9fSxzZWxlY3RIaWdobGlnaHRlZDpmdW5jdGlvbihnKXt2YXIgZD10aGlzLGI9ZC5ib3VuZExpc3QsYz1iLmhpZ2hsaWdodGVkSXRlbSxhPWIuZ2V0U2VsZWN0aW9uTW9kZWwoKTtpZihjKXthLnNlbGVjdFdpdGhFdmVudChiLmdldFJlY29yZChjKSxnKX19fSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uZmllbGQuQ29tYm9Cb3giLHtleHRlbmQ6IkV4dC5mb3JtLmZpZWxkLlBpY2tlciIscmVxdWlyZXM6WyJFeHQudXRpbC5EZWxheWVkVGFzayIsIkV4dC5FdmVudE9iamVjdCIsIkV4dC52aWV3LkJvdW5kTGlzdCIsIkV4dC52aWV3LkJvdW5kTGlzdEtleU5hdiIsIkV4dC5kYXRhLlN0b3JlTWFuYWdlciIsIkV4dC5sYXlvdXQuY29tcG9uZW50LmZpZWxkLkNvbWJvQm94Il0sYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuZm9ybS5Db21ib0JveCIsYWxpYXM6WyJ3aWRnZXQuY29tYm9ib3giLCJ3aWRnZXQuY29tYm8iXSxtaXhpbnM6e2JpbmRhYmxlOiJFeHQudXRpbC5CaW5kYWJsZSJ9LGNvbXBvbmVudExheW91dDoiY29tYm9ib3giLHRyaWdnZXJDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0tYXJyb3ctdHJpZ2dlciIsaGlkZGVuTmFtZToiIixoaWRkZW5EYXRhQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJoaWRlLWRpc3BsYXkgIitFeHQuYmFzZUNTU1ByZWZpeCsiZm9ybS1kYXRhLWhpZGRlbiIsZmllbGRTdWJUcGw6Wyc8ZGl2IGNsYXNzPSJ7aGlkZGVuRGF0YUNsc30iIHJvbGU9InByZXNlbnRhdGlvbiI+PC9kaXY+JywnPGlucHV0IGlkPSJ7aWR9IiB0eXBlPSJ7dHlwZX0iIHtpbnB1dEF0dHJUcGx9IGNsYXNzPSJ7ZmllbGRDbHN9IHt0eXBlQ2xzfSIgYXV0b2NvbXBsZXRlPSJvZmYiJywnPHRwbCBpZj0idmFsdWUiPiB2YWx1ZT0ie1tFeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZSh2YWx1ZXMudmFsdWUpXX0iPC90cGw+JywnPHRwbCBpZj0ibmFtZSI+IG5hbWU9IntuYW1lfSI8L3RwbD4nLCc8dHBsIGlmPSJwbGFjZWhvbGRlciI+IHBsYWNlaG9sZGVyPSJ7cGxhY2Vob2xkZXJ9IjwvdHBsPicsJzx0cGwgaWY9InNpemUiPiBzaXplPSJ7c2l6ZX0iPC90cGw+JywnPHRwbCBpZj0ibWF4TGVuZ3RoICE9PSB1bmRlZmluZWQiPiBtYXhsZW5ndGg9InttYXhMZW5ndGh9IjwvdHBsPicsJzx0cGwgaWY9InJlYWRPbmx5Ij4gcmVhZG9ubHk9InJlYWRvbmx5IjwvdHBsPicsJzx0cGwgaWY9ImRpc2FibGVkIj4gZGlzYWJsZWQ9ImRpc2FibGVkIjwvdHBsPicsJzx0cGwgaWY9InRhYklkeCI+IHRhYkluZGV4PSJ7dGFiSWR4fSI8L3RwbD4nLCc8dHBsIGlmPSJmaWVsZFN0eWxlIj4gc3R5bGU9IntmaWVsZFN0eWxlfSI8L3RwbD4nLCIvPiIse2NvbXBpbGVkOnRydWUsZGlzYWJsZUZvcm1hdHM6dHJ1ZX1dLGdldFN1YlRwbERhdGE6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO0V4dC5hcHBseUlmKGEuc3ViVHBsRGF0YSx7aGlkZGVuRGF0YUNsczphLmhpZGRlbkRhdGFDbHN9KTtyZXR1cm4gYS5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLnNldEhpZGRlblZhbHVlKGEudmFsdWUpfSxtdWx0aVNlbGVjdDpmYWxzZSxkZWxpbWl0ZXI6IiwgIixkaXNwbGF5RmllbGQ6InRleHQiLHRyaWdnZXJBY3Rpb246ImFsbCIsYWxsUXVlcnk6IiIscXVlcnlQYXJhbToicXVlcnkiLHF1ZXJ5TW9kZToicmVtb3RlIixxdWVyeUNhY2hpbmc6dHJ1ZSxwYWdlU2l6ZTowLGF1dG9TZWxlY3Q6dHJ1ZSx0eXBlQWhlYWQ6ZmFsc2UsdHlwZUFoZWFkRGVsYXk6MjUwLHNlbGVjdE9uVGFiOnRydWUsZm9yY2VTZWxlY3Rpb246ZmFsc2UsZ3Jvd1RvTG9uZ2VzdFZhbHVlOnRydWUsZGVmYXVsdExpc3RDb25maWc6e2xvYWRpbmdIZWlnaHQ6NzAsbWluV2lkdGg6NzAsbWF4SGVpZ2h0OjMwMCxzaGFkb3c6InNpZGVzIn0saWdub3JlU2VsZWN0aW9uOjAscmVtb3ZpbmdSZWNvcmRzOm51bGwscmVzaXplQ29tYm9Ub0dyb3c6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiBhLmdyb3cmJmEuZ3Jvd1RvTG9uZ2VzdFZhbHVlfSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxjPUV4dC5pc0RlZmluZWQsYj1lLnN0b3JlLGQ9ZS50cmFuc2Zvcm0sYSxnO0V4dC5hcHBseUlmKGUucmVuZGVyU2VsZWN0b3JzLHtoaWRkZW5EYXRhRWw6Ii4iK2UuaGlkZGVuRGF0YUNscy5zcGxpdCgiICIpLmpvaW4oIi4iKX0pO3RoaXMuYWRkRXZlbnRzKCJiZWZvcmVxdWVyeSIsInNlbGVjdCIsImJlZm9yZXNlbGVjdCIsImJlZm9yZWRlc2VsZWN0Iik7aWYoZCl7YT1FeHQuZ2V0RG9tKGQpO2lmKGEpe2lmKCFlLnN0b3JlKXtiPUV4dC5BcnJheS5tYXAoRXh0LkFycmF5LmZyb20oYS5vcHRpb25zKSxmdW5jdGlvbihoKXtyZXR1cm5baC52YWx1ZSxoLnRleHRdfSl9aWYoIWUubmFtZSl7ZS5uYW1lPWEubmFtZX1pZighKCJ2YWx1ZSIgaW4gZSkpe2UudmFsdWU9YS52YWx1ZX19fWUuYmluZFN0b3JlKGJ8fCJleHQtZW1wdHktc3RvcmUiLHRydWUpO2I9ZS5zdG9yZTtpZihiLmF1dG9DcmVhdGVkKXtlLnF1ZXJ5TW9kZT0ibG9jYWwiO2UudmFsdWVGaWVsZD1lLmRpc3BsYXlGaWVsZD0iZmllbGQxIjtpZighYi5leHBhbmRlZCl7ZS5kaXNwbGF5RmllbGQ9ImZpZWxkMiJ9fWlmKCFjKGUudmFsdWVGaWVsZCkpe2UudmFsdWVGaWVsZD1lLmRpc3BsYXlGaWVsZH1nPWUucXVlcnlNb2RlPT09ImxvY2FsIjtpZighYyhlLnF1ZXJ5RGVsYXkpKXtlLnF1ZXJ5RGVsYXk9Zz8xMDo1MDB9aWYoIWMoZS5taW5DaGFycykpe2UubWluQ2hhcnM9Zz8wOjR9aWYoIWUuZGlzcGxheVRwbCl7ZS5kaXNwbGF5VHBsPW5ldyBFeHQuWFRlbXBsYXRlKCc8dHBsIGZvcj0iLiI+e1t0eXBlb2YgdmFsdWVzID09PSAic3RyaW5nIiA/IHZhbHVlcyA6IHZhbHVlc1siJytlLmRpc3BsYXlGaWVsZCsnIl1dfTx0cGwgaWY9InhpbmRleCA8IHhjb3VudCI+JytlLmRlbGltaXRlcisiPC90cGw+PC90cGw+Iil9ZWxzZXtpZihFeHQuaXNTdHJpbmcoZS5kaXNwbGF5VHBsKSl7ZS5kaXNwbGF5VHBsPW5ldyBFeHQuWFRlbXBsYXRlKGUuZGlzcGxheVRwbCl9fWUuY2FsbFBhcmVudCgpO2UuZG9RdWVyeVRhc2s9bmV3IEV4dC51dGlsLkRlbGF5ZWRUYXNrKGUuZG9SYXdRdWVyeSxlKTtpZihlLnN0b3JlLmdldENvdW50KCk+MCl7ZS5zZXRWYWx1ZShlLnZhbHVlKX1pZihhKXtlLnJlbmRlcihhLnBhcmVudE5vZGUsYSk7RXh0LnJlbW92ZU5vZGUoYSk7ZGVsZXRlIGUucmVuZGVyVG99fSxnZXRTdG9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlfSxiZWZvcmVCbHVyOmZ1bmN0aW9uKCl7dGhpcy5kb1F1ZXJ5VGFzay5jYW5jZWwoKTt0aGlzLmFzc2VydFZhbHVlKCl9LGFzc2VydFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuZ2V0UmF3VmFsdWUoKSxjO2lmKGEuZm9yY2VTZWxlY3Rpb24pe2lmKGEubXVsdGlTZWxlY3Qpe2lmKGIhPT1hLmdldERpc3BsYXlWYWx1ZSgpKXthLnNldFZhbHVlKGEubGFzdFNlbGVjdGlvbil9fWVsc2V7Yz1hLmZpbmRSZWNvcmRCeURpc3BsYXkoYik7aWYoYyl7YS5zZWxlY3QoYyl9ZWxzZXthLnNldFZhbHVlKGEubGFzdFNlbGVjdGlvbil9fX1hLmNvbGxhcHNlKCl9LG9uVHlwZUFoZWFkOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxkPWUuZGlzcGxheUZpZWxkLGI9ZS5zdG9yZS5maW5kUmVjb3JkKGQsZS5nZXRSYXdWYWx1ZSgpKSxjPWUuZ2V0UGlja2VyKCksZyxhLGg7aWYoYil7Zz1iLmdldChkKTthPWcubGVuZ3RoO2g9ZS5nZXRSYXdWYWx1ZSgpLmxlbmd0aDtjLmhpZ2hsaWdodEl0ZW0oYy5nZXROb2RlKGIpKTtpZihoIT09MCYmaCE9PWEpe2Uuc2V0UmF3VmFsdWUoZyk7ZS5zZWxlY3RUZXh0KGgsZy5sZW5ndGgpfX19LHJlc2V0VG9EZWZhdWx0OkV4dC5lbXB0eUZuLGJlZm9yZVJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KCk7dGhpcy5jbGVhckZpbHRlcigpfSxvblVuYmluZFN0b3JlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGlja2VyO2lmKCFhJiZiKXtiLmJpbmRTdG9yZShudWxsKX10aGlzLmNsZWFyRmlsdGVyKCl9LG9uQmluZFN0b3JlOmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcy5waWNrZXI7aWYoIWMpe3RoaXMucmVzZXRUb0RlZmF1bHQoKX1pZihiKXtiLmJpbmRTdG9yZShhKX19LGdldFN0b3JlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm57YmVmb3JlbG9hZDphLm9uQmVmb3JlTG9hZCxjbGVhcjphLm9uQ2xlYXIsZGF0YWNoYW5nZWQ6YS5vbkRhdGFDaGFuZ2VkLGxvYWQ6YS5vbkxvYWQsZXhjZXB0aW9uOmEub25FeGNlcHRpb24scmVtb3ZlOmEub25SZW1vdmV9fSxvbkJlZm9yZUxvYWQ6ZnVuY3Rpb24oKXsrK3RoaXMuaWdub3JlU2VsZWN0aW9ufSxvbkRhdGFDaGFuZ2VkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnJlc2l6ZUNvbWJvVG9Hcm93KCkpe2EudXBkYXRlTGF5b3V0KCl9fSxvbkNsZWFyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnJlc2l6ZUNvbWJvVG9Hcm93KCkpe2EucmVtb3ZpbmdSZWNvcmRzPXRydWU7YS5vbkRhdGFDaGFuZ2VkKCl9fSxvblJlbW92ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5yZXNpemVDb21ib1RvR3JvdygpKXthLnJlbW92aW5nUmVjb3Jkcz10cnVlfX0sb25FeGNlcHRpb246ZnVuY3Rpb24oKXtpZih0aGlzLmlnbm9yZVNlbGVjdGlvbj4wKXstLXRoaXMuaWdub3JlU2VsZWN0aW9ufXRoaXMuY29sbGFwc2UoKX0sb25Mb2FkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEudmFsdWU7aWYoYS5pZ25vcmVTZWxlY3Rpb24+MCl7LS1hLmlnbm9yZVNlbGVjdGlvbn1pZihhLnJhd1F1ZXJ5KXthLnJhd1F1ZXJ5PWZhbHNlO2Euc3luY1NlbGVjdGlvbigpO2lmKGEucGlja2VyJiYhYS5waWNrZXIuZ2V0U2VsZWN0aW9uTW9kZWwoKS5oYXNTZWxlY3Rpb24oKSl7YS5kb0F1dG9TZWxlY3QoKX19ZWxzZXtpZihhLnZhbHVlfHxhLnZhbHVlPT09MCl7YS5zZXRWYWx1ZShhLnZhbHVlKX1lbHNle2lmKGEuc3RvcmUuZ2V0Q291bnQoKSl7YS5kb0F1dG9TZWxlY3QoKX1lbHNle2Euc2V0VmFsdWUoYS52YWx1ZSl9fX19LGRvUmF3UXVlcnk6ZnVuY3Rpb24oKXt0aGlzLmRvUXVlcnkodGhpcy5nZXRSYXdWYWx1ZSgpLGZhbHNlLHRydWUpfSxkb1F1ZXJ5OmZ1bmN0aW9uKGksZCxnKXtpPWl8fCIiO3ZhciBlPXRoaXMsYj17cXVlcnk6aSxmb3JjZUFsbDpkLGNvbWJvOmUsY2FuY2VsOmZhbHNlfSxhPWUuc3RvcmUsaD1lLnF1ZXJ5TW9kZT09PSJsb2NhbCIsYztpZihlLmZpcmVFdmVudCgiYmVmb3JlcXVlcnkiLGIpPT09ZmFsc2V8fGIuY2FuY2VsKXtyZXR1cm4gZmFsc2V9aT1iLnF1ZXJ5O2Q9Yi5mb3JjZUFsbDtpZihkfHwoaS5sZW5ndGg+PWUubWluQ2hhcnMpKXtlLmV4cGFuZCgpO2lmKCFlLnF1ZXJ5Q2FjaGluZ3x8ZS5sYXN0UXVlcnkhPT1pKXtlLmxhc3RRdWVyeT1pO2lmKGgpe2Euc3VzcGVuZEV2ZW50cygpO2M9ZS5jbGVhckZpbHRlcigpO2lmKGl8fCFkKXtlLmFjdGl2ZUZpbHRlcj1uZXcgRXh0LnV0aWwuRmlsdGVyKHtyb290OiJkYXRhIixwcm9wZXJ0eTplLmRpc3BsYXlGaWVsZCx2YWx1ZTppfSk7YS5maWx0ZXIoZS5hY3RpdmVGaWx0ZXIpO2M9dHJ1ZX1lbHNle2RlbGV0ZSBlLmFjdGl2ZUZpbHRlcn1hLnJlc3VtZUV2ZW50cygpO2lmKGUucmVuZGVyZWQmJmMpe2UuZ2V0UGlja2VyKCkucmVmcmVzaCgpfX1lbHNle2UucmF3UXVlcnk9ZztpZihlLnBhZ2VTaXplKXtlLmxvYWRQYWdlKDEpfWVsc2V7YS5sb2FkKHtwYXJhbXM6ZS5nZXRQYXJhbXMoaSl9KX19fWlmKGUuZ2V0UmF3VmFsdWUoKSE9PWUuZ2V0RGlzcGxheVZhbHVlKCkpe2UuaWdub3JlU2VsZWN0aW9uKys7ZS5waWNrZXIuZ2V0U2VsZWN0aW9uTW9kZWwoKS5kZXNlbGVjdEFsbCgpO2UuaWdub3JlU2VsZWN0aW9uLS19aWYoaCl7ZS5kb0F1dG9TZWxlY3QoKX1pZihlLnR5cGVBaGVhZCl7ZS5kb1R5cGVBaGVhZCgpfX1yZXR1cm4gdHJ1ZX0sY2xlYXJGaWx0ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnN0b3JlLGM9dGhpcy5hY3RpdmVGaWx0ZXIsZD1hLmZpbHRlcnMsYjtpZihjKXtpZihkLmdldENvdW50KCk+MSl7ZC5yZW1vdmUoYyk7Yj1kLmdldFJhbmdlKCl9YS5jbGVhckZpbHRlcih0cnVlKTtpZihiKXthLmZpbHRlcihiKX19cmV0dXJuICEhY30sbG9hZFBhZ2U6ZnVuY3Rpb24oYSl7dGhpcy5zdG9yZS5sb2FkUGFnZShhLHtwYXJhbXM6dGhpcy5nZXRQYXJhbXModGhpcy5sYXN0UXVlcnkpfSl9LG9uUGFnZUNoYW5nZTpmdW5jdGlvbihiLGEpe3RoaXMubG9hZFBhZ2UoYSk7cmV0dXJuIGZhbHNlfSxnZXRQYXJhbXM6ZnVuY3Rpb24oYyl7dmFyIGI9e30sYT10aGlzLnF1ZXJ5UGFyYW07aWYoYSl7YlthXT1jfXJldHVybiBifSxkb0F1dG9TZWxlY3Q6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5waWNrZXIsYyxkO2lmKGEmJmIuYXV0b1NlbGVjdCYmYi5zdG9yZS5nZXRDb3VudCgpPjApe2M9YS5nZXRTZWxlY3Rpb25Nb2RlbCgpLmxhc3RTZWxlY3RlZDtkPWEuZ2V0Tm9kZShjfHwwKTtpZihkKXthLmhpZ2hsaWdodEl0ZW0oZCk7YS5saXN0RWwuc2Nyb2xsQ2hpbGRJbnRvVmlldyhkLGZhbHNlKX19fSxkb1R5cGVBaGVhZDpmdW5jdGlvbigpe2lmKCF0aGlzLnR5cGVBaGVhZFRhc2spe3RoaXMudHlwZUFoZWFkVGFzaz1uZXcgRXh0LnV0aWwuRGVsYXllZFRhc2sodGhpcy5vblR5cGVBaGVhZCx0aGlzKX1pZih0aGlzLmxhc3RLZXkhPUV4dC5FdmVudE9iamVjdC5CQUNLU1BBQ0UmJnRoaXMubGFzdEtleSE9RXh0LkV2ZW50T2JqZWN0LkRFTEVURSl7dGhpcy50eXBlQWhlYWRUYXNrLmRlbGF5KHRoaXMudHlwZUFoZWFkRGVsYXkpfX0sb25UcmlnZ2VyQ2xpY2s6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKCFhLnJlYWRPbmx5JiYhYS5kaXNhYmxlZCl7aWYoYS5pc0V4cGFuZGVkKXthLmNvbGxhcHNlKCl9ZWxzZXthLm9uRm9jdXMoe30pO2lmKGEudHJpZ2dlckFjdGlvbj09PSJhbGwiKXthLmRvUXVlcnkoYS5hbGxRdWVyeSx0cnVlKX1lbHNle2EuZG9RdWVyeShhLmdldFJhd1ZhbHVlKCksZmFsc2UsdHJ1ZSl9fWEuaW5wdXRFbC5mb2N1cygpfX0sb25LZXlVcDpmdW5jdGlvbihkLGIpe3ZhciBjPXRoaXMsYT1kLmdldEtleSgpO2lmKCFjLnJlYWRPbmx5JiYhYy5kaXNhYmxlZCYmYy5lZGl0YWJsZSl7Yy5sYXN0S2V5PWE7aWYoIWQuaXNTcGVjaWFsS2V5KCl8fGE9PWQuQkFDS1NQQUNFfHxhPT1kLkRFTEVURSl7Yy5kb1F1ZXJ5VGFzay5kZWxheShjLnF1ZXJ5RGVsYXkpfX1pZihjLmVuYWJsZUtleUV2ZW50cyl7Yy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9fSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoKTtpZighYS5lbmFibGVLZXlFdmVudHMpe2EubW9uKGEuaW5wdXRFbCwia2V5dXAiLGEub25LZXlVcCxhKX19LG9uRGVzdHJveTpmdW5jdGlvbigpe3RoaXMuYmluZFN0b3JlKG51bGwpO3RoaXMuY2FsbFBhcmVudCgpfSxvbkFkZGVkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihhLnBpY2tlcil7YS5waWNrZXIub3duZXJDdD1hLnVwKCJbZmxvYXRpbmddIik7YS5waWNrZXIucmVnaXN0ZXJXaXRoT3duZXJDdCgpfX0sY3JlYXRlUGlja2VyOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxiLGE9RXh0LmFwcGx5KHt4dHlwZToiYm91bmRsaXN0IixwaWNrZXJGaWVsZDpjLHNlbE1vZGVsOnttb2RlOmMubXVsdGlTZWxlY3Q/IlNJTVBMRSI6IlNJTkdMRSJ9LGZsb2F0aW5nOnRydWUsaGlkZGVuOnRydWUsc3RvcmU6Yy5zdG9yZSxkaXNwbGF5RmllbGQ6Yy5kaXNwbGF5RmllbGQsZm9jdXNPblRvRnJvbnQ6ZmFsc2UscGFnZVNpemU6Yy5wYWdlU2l6ZSx0cGw6Yy50cGx9LGMubGlzdENvbmZpZyxjLmRlZmF1bHRMaXN0Q29uZmlnKTtiPWMucGlja2VyPUV4dC53aWRnZXQoYSk7aWYoYy5wYWdlU2l6ZSl7Yi5wYWdpbmdUb29sYmFyLm9uKCJiZWZvcmVjaGFuZ2UiLGMub25QYWdlQ2hhbmdlLGMpfWMubW9uKGIse2l0ZW1jbGljazpjLm9uSXRlbUNsaWNrLHJlZnJlc2g6Yy5vbkxpc3RSZWZyZXNoLHNjb3BlOmN9KTtjLm1vbihiLmdldFNlbGVjdGlvbk1vZGVsKCkse2JlZm9yZXNlbGVjdDpjLm9uQmVmb3JlU2VsZWN0LGJlZm9yZWRlc2VsZWN0OmMub25CZWZvcmVEZXNlbGVjdCxzZWxlY3Rpb25jaGFuZ2U6Yy5vbkxpc3RTZWxlY3Rpb25DaGFuZ2Usc2NvcGU6Y30pO3JldHVybiBifSxhbGlnblBpY2tlcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmdldFBpY2tlcigpLGU9Yi5nZXRQb3NpdGlvbigpWzFdLUV4dC5nZXRCb2R5KCkuZ2V0U2Nyb2xsKCkudG9wLGQ9RXh0LkVsZW1lbnQuZ2V0Vmlld0hlaWdodCgpLWUtYi5nZXRIZWlnaHQoKSxjPU1hdGgubWF4KGUsZCk7aWYoYS5oZWlnaHQpe2RlbGV0ZSBhLmhlaWdodDthLnVwZGF0ZUxheW91dCgpfWlmKGEuZ2V0SGVpZ2h0KCk+Yy01KXthLnNldEhlaWdodChjLTUpfWIuY2FsbFBhcmVudCgpfSxvbkxpc3RSZWZyZXNoOmZ1bmN0aW9uKCl7dGhpcy5hbGlnblBpY2tlcigpO3RoaXMuc3luY1NlbGVjdGlvbigpfSxvbkl0ZW1DbGljazpmdW5jdGlvbihjLGEpe3ZhciBlPXRoaXMsZD1lLnBpY2tlci5nZXRTZWxlY3Rpb25Nb2RlbCgpLmdldFNlbGVjdGlvbigpLGI9ZS52YWx1ZUZpZWxkO2lmKCFlLm11bHRpU2VsZWN0JiZkLmxlbmd0aCl7aWYoYS5nZXQoYik9PT1kWzBdLmdldChiKSl7ZS5kaXNwbGF5VHBsRGF0YT1bYS5kYXRhXTtlLnNldFJhd1ZhbHVlKGUuZ2V0RGlzcGxheVZhbHVlKCkpO2UuY29sbGFwc2UoKX19fSxvbkJlZm9yZVNlbGVjdDpmdW5jdGlvbihiLGEpe3JldHVybiB0aGlzLmZpcmVFdmVudCgiYmVmb3Jlc2VsZWN0Iix0aGlzLGEsYS5pbmRleCl9LG9uQmVmb3JlRGVzZWxlY3Q6ZnVuY3Rpb24oYixhKXtyZXR1cm4gdGhpcy5maXJlRXZlbnQoImJlZm9yZWRlc2VsZWN0Iix0aGlzLGEsYS5pbmRleCl9LG9uTGlzdFNlbGVjdGlvbkNoYW5nZTpmdW5jdGlvbihiLGQpe3ZhciBhPXRoaXMsZT1hLm11bHRpU2VsZWN0LGM9ZC5sZW5ndGg+MDtpZighYS5pZ25vcmVTZWxlY3Rpb24mJmEuaXNFeHBhbmRlZCl7aWYoIWUpe0V4dC5kZWZlcihhLmNvbGxhcHNlLDEsYSl9aWYoZXx8Yyl7YS5zZXRWYWx1ZShkLGZhbHNlKX1pZihjKXthLmZpcmVFdmVudCgic2VsZWN0IixhLGQpfWEuaW5wdXRFbC5mb2N1cygpfX0sb25FeHBhbmQ6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGE9ZC5saXN0S2V5TmF2LGM9ZC5zZWxlY3RPblRhYixiPWQuZ2V0UGlja2VyKCk7aWYoYSl7YS5lbmFibGUoKX1lbHNle2E9ZC5saXN0S2V5TmF2PW5ldyBFeHQudmlldy5Cb3VuZExpc3RLZXlOYXYodGhpcy5pbnB1dEVsLHtib3VuZExpc3Q6Yixmb3JjZUtleURvd246dHJ1ZSx0YWI6ZnVuY3Rpb24oZyl7aWYoYyl7dGhpcy5zZWxlY3RIaWdobGlnaHRlZChnKTtkLnRyaWdnZXJCbHVyKCl9cmV0dXJuIHRydWV9fSl9aWYoYyl7ZC5pZ25vcmVNb25pdG9yVGFiPXRydWV9RXh0LmRlZmVyKGEuZW5hYmxlLDEsYSk7ZC5pbnB1dEVsLmZvY3VzKCl9LG9uQ29sbGFwc2U6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5saXN0S2V5TmF2O2lmKGEpe2EuZGlzYWJsZSgpO2IuaWdub3JlTW9uaXRvclRhYj1mYWxzZX19LHNlbGVjdDpmdW5jdGlvbihhKXt0aGlzLnNldFZhbHVlKGEsdHJ1ZSl9LGZpbmRSZWNvcmQ6ZnVuY3Rpb24oZCxjKXt2YXIgYj10aGlzLnN0b3JlLGE9Yi5maW5kRXhhY3QoZCxjKTtyZXR1cm4gYSE9PS0xP2IuZ2V0QXQoYSk6ZmFsc2V9LGZpbmRSZWNvcmRCeVZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZpbmRSZWNvcmQodGhpcy52YWx1ZUZpZWxkLGEpfSxmaW5kUmVjb3JkQnlEaXNwbGF5OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZpbmRSZWNvcmQodGhpcy5kaXNwbGF5RmllbGQsYSl9LHNldFZhbHVlOmZ1bmN0aW9uKG0sZSl7dmFyIGs9dGhpcyxjPWsudmFsdWVOb3RGb3VuZFRleHQsbj1rLmlucHV0RWwsZyxqLGgsYSxsPVtdLGI9W10sZD1bXTtpZihrLnN0b3JlLmxvYWRpbmcpe2sudmFsdWU9bTtrLnNldEhpZGRlblZhbHVlKGsudmFsdWUpO3JldHVybiBrfW09RXh0LkFycmF5LmZyb20obSk7Zm9yKGc9MCxqPW0ubGVuZ3RoO2c8ajtnKyspe2g9bVtnXTtpZighaHx8IWguaXNNb2RlbCl7aD1rLmZpbmRSZWNvcmRCeVZhbHVlKGgpfWlmKGgpe2wucHVzaChoKTtiLnB1c2goaC5kYXRhKTtkLnB1c2goaC5nZXQoay52YWx1ZUZpZWxkKSl9ZWxzZXtpZighay5mb3JjZVNlbGVjdGlvbil7ZC5wdXNoKG1bZ10pO2E9e307YVtrLmRpc3BsYXlGaWVsZF09bVtnXTtiLnB1c2goYSl9ZWxzZXtpZihFeHQuaXNEZWZpbmVkKGMpKXtiLnB1c2goYyl9fX19ay5zZXRIaWRkZW5WYWx1ZShkKTtrLnZhbHVlPWsubXVsdGlTZWxlY3Q/ZDpkWzBdO2lmKCFFeHQuaXNEZWZpbmVkKGsudmFsdWUpKXtrLnZhbHVlPW51bGx9ay5kaXNwbGF5VHBsRGF0YT1iO2subGFzdFNlbGVjdGlvbj1rLnZhbHVlTW9kZWxzPWw7aWYobiYmay5lbXB0eVRleHQmJiFFeHQuaXNFbXB0eShtKSl7bi5yZW1vdmVDbHMoay5lbXB0eUNscyl9ay5zZXRSYXdWYWx1ZShrLmdldERpc3BsYXlWYWx1ZSgpKTtrLmNoZWNrQ2hhbmdlKCk7aWYoZSE9PWZhbHNlKXtrLnN5bmNTZWxlY3Rpb24oKX1rLmFwcGx5RW1wdHlUZXh0KCk7cmV0dXJuIGt9LHNldEhpZGRlblZhbHVlOmZ1bmN0aW9uKGope3ZhciBlPXRoaXMsYT1lLmhpZGRlbk5hbWUsZCxiLGssaCxnLGM7aWYoIWUuaGlkZGVuRGF0YUVsfHwhYSl7cmV0dXJufWo9RXh0LkFycmF5LmZyb20oaik7Yj1lLmhpZGRlbkRhdGFFbC5kb207az1iLmNoaWxkTm9kZXM7aD1rWzBdO2c9ai5sZW5ndGg7Yz1rLmxlbmd0aDtpZighaCYmZz4wKXtlLmhpZGRlbkRhdGFFbC51cGRhdGUoRXh0LkRvbUhlbHBlci5tYXJrdXAoe3RhZzoiaW5wdXQiLHR5cGU6ImhpZGRlbiIsbmFtZTphfSkpO2M9MTtoPWIuZmlyc3RDaGlsZH13aGlsZShjPmcpe2IucmVtb3ZlQ2hpbGQoa1swXSk7LS1jfXdoaWxlKGM8Zyl7Yi5hcHBlbmRDaGlsZChoLmNsb25lTm9kZSh0cnVlKSk7KytjfWZvcihkPTA7ZDxnO2QrKyl7a1tkXS52YWx1ZT1qW2RdfX0sZ2V0RGlzcGxheVZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGlzcGxheVRwbC5hcHBseSh0aGlzLmRpc3BsYXlUcGxEYXRhKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5waWNrZXIsZD1iLmdldFJhd1ZhbHVlKCksYz1iLnZhbHVlO2lmKGIuZ2V0RGlzcGxheVZhbHVlKCkhPT1kKXtjPWQ7Yi52YWx1ZT1iLmRpc3BsYXlUcGxEYXRhPWIudmFsdWVNb2RlbHM9bnVsbDtpZihhKXtiLmlnbm9yZVNlbGVjdGlvbisrO2EuZ2V0U2VsZWN0aW9uTW9kZWwoKS5kZXNlbGVjdEFsbCgpO2IuaWdub3JlU2VsZWN0aW9uLS19fXJldHVybiBjfSxnZXRTdWJtaXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFZhbHVlKCl9LGlzRXF1YWw6ZnVuY3Rpb24oZSxkKXt2YXIgYj1FeHQuQXJyYXkuZnJvbSxjLGE7ZT1iKGUpO2Q9YihkKTthPWUubGVuZ3RoO2lmKGEhPT1kLmxlbmd0aCl7cmV0dXJuIGZhbHNlfWZvcihjPTA7YzxhO2MrKyl7aWYoZFtjXSE9PWVbY10pe3JldHVybiBmYWxzZX19cmV0dXJuIHRydWV9LGNsZWFyVmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNldFZhbHVlKFtdKX0sc3luY1NlbGVjdGlvbjpmdW5jdGlvbigpe3ZhciBoPXRoaXMsZD1oLnBpY2tlcixnLGMsYj1oLnZhbHVlTW9kZWxzfHxbXSxlPWIubGVuZ3RoLGEsaTtpZihkKXtnPVtdO2ZvcihhPTA7YTxlO2ErKyl7aT1iW2FdO2lmKGkmJmkuaXNNb2RlbCYmaC5zdG9yZS5pbmRleE9mKGkpPj0wKXtnLnB1c2goaSl9fWguaWdub3JlU2VsZWN0aW9uKys7Yz1kLmdldFNlbGVjdGlvbk1vZGVsKCk7Yy5kZXNlbGVjdEFsbCgpO2lmKGcubGVuZ3RoKXtjLnNlbGVjdChnKX1oLmlnbm9yZVNlbGVjdGlvbi0tfX0sb25FZGl0b3JUYWI6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5saXN0S2V5TmF2O2lmKHRoaXMuc2VsZWN0T25UYWImJmEpe2Euc2VsZWN0SGlnaGxpZ2h0ZWQoYil9fX0pO0V4dC5kZWZpbmUoIkV4dC5waWNrZXIuTW9udGgiLHtleHRlbmQ6IkV4dC5Db21wb25lbnQiLHJlcXVpcmVzOlsiRXh0LlhUZW1wbGF0ZSIsIkV4dC51dGlsLkNsaWNrUmVwZWF0ZXIiLCJFeHQuRGF0ZSIsIkV4dC5idXR0b24uQnV0dG9uIl0sYWxpYXM6IndpZGdldC5tb250aHBpY2tlciIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuTW9udGhQaWNrZXIiLGNoaWxkRWxzOlsiYm9keUVsIiwicHJldkVsIiwibmV4dEVsIiwiYnV0dG9uc0VsIiwibW9udGhFbCIsInllYXJFbCJdLHJlbmRlclRwbDpbJzxkaXYgaWQ9IntpZH0tYm9keUVsIiBjbGFzcz0ie2Jhc2VDbHN9LWJvZHkiPicsJzxkaXYgaWQ9IntpZH0tbW9udGhFbCIgY2xhc3M9IntiYXNlQ2xzfS1tb250aHMiPicsJzx0cGwgZm9yPSJtb250aHMiPicsJzxkaXYgY2xhc3M9IntwYXJlbnQuYmFzZUNsc30taXRlbSB7cGFyZW50LmJhc2VDbHN9LW1vbnRoIj48YSBzdHlsZT0ie3BhcmVudC5tb250aFN0eWxlfSIgaHJlZj0iIyIgaGlkZWZvY3VzPSJvbiI+ey59PC9hPjwvZGl2PicsIjwvdHBsPiIsIjwvZGl2PiIsJzxkaXYgaWQ9IntpZH0teWVhckVsIiBjbGFzcz0ie2Jhc2VDbHN9LXllYXJzIj4nLCc8ZGl2IGNsYXNzPSJ7YmFzZUNsc30teWVhcm5hdiI+JywnPGJ1dHRvbiBpZD0ie2lkfS1wcmV2RWwiIGNsYXNzPSJ7YmFzZUNsc30teWVhcm5hdi1wcmV2Ij48L2J1dHRvbj4nLCc8YnV0dG9uIGlkPSJ7aWR9LW5leHRFbCIgY2xhc3M9IntiYXNlQ2xzfS15ZWFybmF2LW5leHQiPjwvYnV0dG9uPicsIjwvZGl2PiIsJzx0cGwgZm9yPSJ5ZWFycyI+JywnPGRpdiBjbGFzcz0ie3BhcmVudC5iYXNlQ2xzfS1pdGVtIHtwYXJlbnQuYmFzZUNsc30teWVhciI+PGEgaHJlZj0iIyIgaGlkZWZvY3VzPSJvbiI+ey59PC9hPjwvZGl2PicsIjwvdHBsPiIsIjwvZGl2PiIsJzxkaXYgY2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrJ2NsZWFyIj48L2Rpdj4nLCI8L2Rpdj4iLCc8dHBsIGlmPSJzaG93QnV0dG9ucyI+JywnPGRpdiBpZD0ie2lkfS1idXR0b25zRWwiIGNsYXNzPSJ7YmFzZUNsc30tYnV0dG9ucyI+eyUnLCJ2YXIgbWU9dmFsdWVzLiRjb21wLCBva0J0bj1tZS5va0J0biwgY2FuY2VsQnRuPW1lLmNhbmNlbEJ0bjsiLCJva0J0bi5vd25lckxheW91dCA9IGNhbmNlbEJ0bi5vd25lckxheW91dCA9IG1lLmNvbXBvbmVudExheW91dDsiLCJva0J0bi5vd25lckN0ID0gY2FuY2VsQnRuLm93bmVyQ3QgPSBtZTsiLCJFeHQuRG9tSGVscGVyLmdlbmVyYXRlTWFya3VwKG9rQnRuLmdldFJlbmRlclRyZWUoKSwgb3V0KTsiLCJFeHQuRG9tSGVscGVyLmdlbmVyYXRlTWFya3VwKGNhbmNlbEJ0bi5nZXRSZW5kZXJUcmVlKCksIG91dCk7IiwiJX08L2Rpdj4iLCI8L3RwbD4iXSxva1RleHQ6Ik9LIixjYW5jZWxUZXh0OiJDYW5jZWwiLGJhc2VDbHM6RXh0LmJhc2VDU1NQcmVmaXgrIm1vbnRocGlja2VyIixzaG93QnV0dG9uczp0cnVlLHdpZHRoOjE3OCxtZWFzdXJlV2lkdGg6MzUsbWVhc3VyZU1heEhlaWdodDoyMCxzbWFsbENsczpFeHQuYmFzZUNTU1ByZWZpeCsibW9udGhwaWNrZXItc21hbGwiLHRvdGFsWWVhcnM6MTAseWVhck9mZnNldDo1LG1vbnRoT2Zmc2V0OjYsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5zZWxlY3RlZENscz1hLmJhc2VDbHMrIi1zZWxlY3RlZCI7YS5hZGRFdmVudHMoImNhbmNlbGNsaWNrIiwibW9udGhjbGljayIsIm1vbnRoZGJsY2xpY2siLCJva2NsaWNrIiwic2VsZWN0IiwieWVhcmNsaWNrIiwieWVhcmRibGNsaWNrIik7aWYoYS5zbWFsbCl7YS5hZGRDbHMoYS5zbWFsbENscyl9YS5zZXRWYWx1ZShhLnZhbHVlKTthLmFjdGl2ZVllYXI9YS5nZXRZZWFyKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKS00LC00KTtpZihhLnNob3dCdXR0b25zKXthLm9rQnRuPW5ldyBFeHQuYnV0dG9uLkJ1dHRvbih7dGV4dDphLm9rVGV4dCxoYW5kbGVyOmEub25Pa0NsaWNrLHNjb3BlOmF9KTthLmNhbmNlbEJ0bj1uZXcgRXh0LmJ1dHRvbi5CdXR0b24oe3RleHQ6YS5jYW5jZWxUZXh0LGhhbmRsZXI6YS5vbkNhbmNlbENsaWNrLHNjb3BlOmF9KX10aGlzLmNhbGxQYXJlbnQoKX0sYmVmb3JlUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcyxjPTAsYj1bXSxhPUV4dC5EYXRlLmdldFNob3J0TW9udGhOYW1lLGU9Zy5tb250aE9mZnNldCxoPWcubW9udGhNYXJnaW4sZD0iIjtnLmNhbGxQYXJlbnQoKTtmb3IoO2M8ZTsrK2Mpe2IucHVzaChhKGMpLGEoYytlKSl9aWYoRXh0LmlzRGVmaW5lZChoKSl7ZD0ibWFyZ2luOiAwICIraCsicHg7In1FeHQuYXBwbHkoZy5yZW5kZXJEYXRhLHttb250aHM6Yix5ZWFyczpnLmdldFllYXJzKCksc2hvd0J1dHRvbnM6Zy5zaG93QnV0dG9ucyxtb250aFN0eWxlOmR9KX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5ib2R5RWwsYz1iLmJ1dHRvbnNFbDtiLmNhbGxQYXJlbnQoKTtiLm1vbihhLCJjbGljayIsYi5vbkJvZHlDbGljayxiKTtiLm1vbihhLCJkYmxjbGljayIsYi5vbkJvZHlDbGljayxiKTtiLnllYXJzPWEuc2VsZWN0KCIuIitiLmJhc2VDbHMrIi15ZWFyIGEiKTtiLm1vbnRocz1hLnNlbGVjdCgiLiIrYi5iYXNlQ2xzKyItbW9udGggYSIpO2IuYmFja1JlcGVhdGVyPW5ldyBFeHQudXRpbC5DbGlja1JlcGVhdGVyKGIucHJldkVsLHtoYW5kbGVyOkV4dC5GdW5jdGlvbi5iaW5kKGIuYWRqdXN0WWVhcixiLFstYi50b3RhbFllYXJzXSl9KTtiLnByZXZFbC5hZGRDbHNPbk92ZXIoYi5iYXNlQ2xzKyIteWVhcm5hdi1wcmV2LW92ZXIiKTtiLm5leHRSZXBlYXRlcj1uZXcgRXh0LnV0aWwuQ2xpY2tSZXBlYXRlcihiLm5leHRFbCx7aGFuZGxlcjpFeHQuRnVuY3Rpb24uYmluZChiLmFkanVzdFllYXIsYixbYi50b3RhbFllYXJzXSl9KTtiLm5leHRFbC5hZGRDbHNPbk92ZXIoYi5iYXNlQ2xzKyIteWVhcm5hdi1uZXh0LW92ZXIiKTtiLnVwZGF0ZUJvZHkoKTtpZighRXh0LmlzRGVmaW5lZChiLm1vbnRoTWFyZ2luKSl7RXh0LnBpY2tlci5Nb250aC5wcm90b3R5cGUubW9udGhNYXJnaW49Yi5jYWxjdWxhdGVNb250aE1hcmdpbigpfX0sY2FsY3VsYXRlTW9udGhNYXJnaW46ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGI9ZC5tb250aEVsLGE9ZC5tb250aHMsZT1hLmZpcnN0KCksYz1lLmdldE1hcmdpbigibCIpO3doaWxlKGMmJmQuZ2V0TGFyZ2VzdCgpPmQubWVhc3VyZU1heEhlaWdodCl7LS1jO2Euc2V0U3R5bGUoIm1hcmdpbiIsIjAgIitjKyJweCIpfXJldHVybiBjfSxnZXRMYXJnZXN0OmZ1bmN0aW9uKGEpe3ZhciBiPTA7dGhpcy5tb250aHMuZWFjaChmdW5jdGlvbihkKXt2YXIgYz1kLmdldEhlaWdodCgpO2lmKGM+Yil7Yj1jfX0pO3JldHVybiBifSxzZXRWYWx1ZTpmdW5jdGlvbihkKXt2YXIgYz10aGlzLGU9Yy5hY3RpdmVZZWFyLGc9Yy5tb250aE9mZnNldCxiLGE7aWYoIWQpe2MudmFsdWU9W251bGwsbnVsbF19ZWxzZXtpZihFeHQuaXNEYXRlKGQpKXtjLnZhbHVlPVtkLmdldE1vbnRoKCksZC5nZXRGdWxsWWVhcigpXX1lbHNle2MudmFsdWU9W2RbMF0sZFsxXV19fWlmKGMucmVuZGVyZWQpe2I9Yy52YWx1ZVsxXTtpZihiIT09bnVsbCl7aWYoKGI8ZXx8Yj5lK2MueWVhck9mZnNldCkpe2MuYWN0aXZlWWVhcj1iLWMueWVhck9mZnNldCsxfX1jLnVwZGF0ZUJvZHkoKX1yZXR1cm4gY30sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZX0saGFzU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy52YWx1ZTtyZXR1cm4gYVswXSE9PW51bGwmJmFbMV0hPT1udWxsfSxnZXRZZWFyczpmdW5jdGlvbigpe3ZhciBkPXRoaXMsZT1kLnllYXJPZmZzZXQsZz1kLmFjdGl2ZVllYXIsYT1nK2UsYz1nLGI9W107Zm9yKDtjPGE7KytjKXtiLnB1c2goYyxjK2UpfXJldHVybiBifSx1cGRhdGVCb2R5OmZ1bmN0aW9uKCl7dmFyIGk9dGhpcyxlPWkueWVhcnMsYj1pLm1vbnRocyxtPWkuZ2V0WWVhcnMoKSxuPWkuc2VsZWN0ZWRDbHMsaz1pLmdldFllYXIobnVsbCksZz1pLnZhbHVlWzBdLGw9aS5tb250aE9mZnNldCxoLGQsaixhLGM7aWYoaS5yZW5kZXJlZCl7ZS5yZW1vdmVDbHMobik7Yi5yZW1vdmVDbHMobik7ZD1lLmVsZW1lbnRzO2E9ZC5sZW5ndGg7Zm9yKGo9MDtqPGE7aisrKXtjPUV4dC5mbHkoZFtqXSk7aD1tW2pdO2MuZG9tLmlubmVySFRNTD1oO2lmKGg9PWspe2MuZG9tLmNsYXNzTmFtZT1ufX1pZihnIT09bnVsbCl7aWYoZzxsKXtnPWcqMn1lbHNle2c9KGctbCkqMisxfWIuaXRlbShnKS5hZGRDbHMobil9fX0sZ2V0WWVhcjpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXMudmFsdWVbMV07Yz1jfHwwO3JldHVybiBiPT09bnVsbD9hOmIrY30sb25Cb2R5Q2xpY2s6ZnVuY3Rpb24oZCxiKXt2YXIgYz10aGlzLGE9ZC50eXBlPT0iZGJsY2xpY2siO2lmKGQuZ2V0VGFyZ2V0KCIuIitjLmJhc2VDbHMrIi1tb250aCIpKXtkLnN0b3BFdmVudCgpO2Mub25Nb250aENsaWNrKGIsYSl9ZWxzZXtpZihkLmdldFRhcmdldCgiLiIrYy5iYXNlQ2xzKyIteWVhciIpKXtkLnN0b3BFdmVudCgpO2Mub25ZZWFyQ2xpY2soYixhKX19fSxhZGp1c3RZZWFyOmZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhIT0ibnVtYmVyIil7YT10aGlzLnRvdGFsWWVhcnN9dGhpcy5hY3RpdmVZZWFyKz1hO3RoaXMudXBkYXRlQm9keSgpfSxvbk9rQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgib2tjbGljayIsdGhpcyx0aGlzLnZhbHVlKX0sb25DYW5jZWxDbGljazpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJjYW5jZWxjbGljayIsdGhpcyl9LG9uTW9udGhDbGljazpmdW5jdGlvbihjLGEpe3ZhciBiPXRoaXM7Yi52YWx1ZVswXT1iLnJlc29sdmVPZmZzZXQoYi5tb250aHMuaW5kZXhPZihjKSxiLm1vbnRoT2Zmc2V0KTtiLnVwZGF0ZUJvZHkoKTtiLmZpcmVFdmVudCgibW9udGgiKyhhPyJkYmwiOiIiKSsiY2xpY2siLGIsYi52YWx1ZSk7Yi5maXJlRXZlbnQoInNlbGVjdCIsYixiLnZhbHVlKX0sb25ZZWFyQ2xpY2s6ZnVuY3Rpb24oYyxhKXt2YXIgYj10aGlzO2IudmFsdWVbMV09Yi5hY3RpdmVZZWFyK2IucmVzb2x2ZU9mZnNldChiLnllYXJzLmluZGV4T2YoYyksYi55ZWFyT2Zmc2V0KTtiLnVwZGF0ZUJvZHkoKTtiLmZpcmVFdmVudCgieWVhciIrKGE/ImRibCI6IiIpKyJjbGljayIsYixiLnZhbHVlKTtiLmZpcmVFdmVudCgic2VsZWN0IixiLGIudmFsdWUpfSxyZXNvbHZlT2Zmc2V0OmZ1bmN0aW9uKGEsYil7aWYoYSUyPT09MCl7cmV0dXJuKGEvMil9ZWxzZXtyZXR1cm4gYitNYXRoLmZsb29yKGEvMil9fSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLnllYXJzPWEubW9udGhzPW51bGw7RXh0LmRlc3Ryb3lNZW1iZXJzKGEsImJhY2tSZXBlYXRlciIsIm5leHRSZXBlYXRlciIsIm9rQnRuIiwiY2FuY2VsQnRuIik7YS5jYWxsUGFyZW50KCl9LGZpbmlzaFJlbmRlckNoaWxkcmVuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZih0aGlzLnNob3dCdXR0b25zKXthLm9rQnRuLmZpbmlzaFJlbmRlcigpO2EuY2FuY2VsQnRuLmZpbmlzaFJlbmRlcigpfX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3lNZW1iZXJzKHRoaXMsIm9rQnRuIiwiY2FuY2VsQnRuIik7dGhpcy5jYWxsUGFyZW50KCl9fSk7RXh0LmRlZmluZSgiRXh0LnBpY2tlci5EYXRlIix7ZXh0ZW5kOiJFeHQuQ29tcG9uZW50IixyZXF1aXJlczpbIkV4dC5YVGVtcGxhdGUiLCJFeHQuYnV0dG9uLkJ1dHRvbiIsIkV4dC5idXR0b24uU3BsaXQiLCJFeHQudXRpbC5DbGlja1JlcGVhdGVyIiwiRXh0LnV0aWwuS2V5TmF2IiwiRXh0LkV2ZW50T2JqZWN0IiwiRXh0LmZ4Lk1hbmFnZXIiLCJFeHQucGlja2VyLk1vbnRoIl0sYWxpYXM6IndpZGdldC5kYXRlcGlja2VyIixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5EYXRlUGlja2VyIixjaGlsZEVsczpbImlubmVyRWwiLCJldmVudEVsIiwicHJldkVsIiwibmV4dEVsIiwibWlkZGxlQnRuRWwiLCJmb290ZXJFbCJdLGJvcmRlcjp0cnVlLHJlbmRlclRwbDpbJzxkaXYgaWQ9IntpZH0taW5uZXJFbCIgcm9sZT0iZ3JpZCI+JywnPGRpdiByb2xlPSJwcmVzZW50YXRpb24iIGNsYXNzPSJ7YmFzZUNsc30taGVhZGVyIj4nLCc8ZGl2IGNsYXNzPSJ7YmFzZUNsc30tcHJldiI+PGEgaWQ9IntpZH0tcHJldkVsIiBocmVmPSIjIiByb2xlPSJidXR0b24iIHRpdGxlPSJ7cHJldlRleHR9Ij48L2E+PC9kaXY+JywnPGRpdiBjbGFzcz0ie2Jhc2VDbHN9LW1vbnRoIiBpZD0ie2lkfS1taWRkbGVCdG5FbCI+eyV0aGlzLnJlbmRlck1vbnRoQnRuKHZhbHVlcywgb3V0KSV9PC9kaXY+JywnPGRpdiBjbGFzcz0ie2Jhc2VDbHN9LW5leHQiPjxhIGlkPSJ7aWR9LW5leHRFbCIgaHJlZj0iIyIgcm9sZT0iYnV0dG9uIiB0aXRsZT0ie25leHRUZXh0fSI+PC9hPjwvZGl2PicsIjwvZGl2PiIsJzx0YWJsZSBpZD0ie2lkfS1ldmVudEVsIiBjbGFzcz0ie2Jhc2VDbHN9LWlubmVyIiBjZWxsc3BhY2luZz0iMCIgcm9sZT0icHJlc2VudGF0aW9uIj4nLCc8dGhlYWQgcm9sZT0icHJlc2VudGF0aW9uIj48dHIgcm9sZT0icHJlc2VudGF0aW9uIj4nLCc8dHBsIGZvcj0iZGF5TmFtZXMiPicsJzx0aCByb2xlPSJjb2x1bW5oZWFkZXIiIHRpdGxlPSJ7Ln0iPjxzcGFuPnsuOnRoaXMuZmlyc3RJbml0aWFsfTwvc3Bhbj48L3RoPicsIjwvdHBsPiIsIjwvdHI+PC90aGVhZD4iLCc8dGJvZHkgcm9sZT0icHJlc2VudGF0aW9uIj48dHIgcm9sZT0icHJlc2VudGF0aW9uIj4nLCc8dHBsIGZvcj0iZGF5cyI+JywieyM6dGhpcy5pc0VuZE9mV2Vla30iLCc8dGQgcm9sZT0iZ3JpZGNlbGwiIGlkPSJ7W0V4dC5pZCgpXX0iPicsJzxhIHJvbGU9InByZXNlbnRhdGlvbiIgaHJlZj0iIyIgaGlkZWZvY3VzPSJvbiIgY2xhc3M9IntwYXJlbnQuYmFzZUNsc30tZGF0ZSIgdGFiSW5kZXg9IjEiPicsJzxlbSByb2xlPSJwcmVzZW50YXRpb24iPjxzcGFuIHJvbGU9InByZXNlbnRhdGlvbiI+PC9zcGFuPjwvZW0+JywiPC9hPiIsIjwvdGQ+IiwiPC90cGw+IiwiPC90cj48L3Rib2R5PiIsIjwvdGFibGU+IiwnPHRwbCBpZj0ic2hvd1RvZGF5Ij4nLCc8ZGl2IGlkPSJ7aWR9LWZvb3RlckVsIiByb2xlPSJwcmVzZW50YXRpb24iIGNsYXNzPSJ7YmFzZUNsc30tZm9vdGVyIj57JXRoaXMucmVuZGVyVG9kYXlCdG4odmFsdWVzLCBvdXQpJX08L2Rpdj4nLCI8L3RwbD4iLCI8L2Rpdj4iLHtmaXJzdEluaXRpYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5waWNrZXIuRGF0ZS5wcm90b3R5cGUuZ2V0RGF5SW5pdGlhbChhKX0saXNFbmRPZldlZWs6ZnVuY3Rpb24oYil7Yi0tO3ZhciBhPWIlNz09PTAmJmIhPT0wO3JldHVybiBhPyc8L3RyPjx0ciByb2xlPSJyb3ciPic6IiJ9LHJlbmRlclRvZGF5QnRuOmZ1bmN0aW9uKGEsYil7RXh0LkRvbUhlbHBlci5nZW5lcmF0ZU1hcmt1cChhLiRjb21wLnRvZGF5QnRuLmdldFJlbmRlclRyZWUoKSxiKX0scmVuZGVyTW9udGhCdG46ZnVuY3Rpb24oYSxiKXtFeHQuRG9tSGVscGVyLmdlbmVyYXRlTWFya3VwKGEuJGNvbXAubW9udGhCdG4uZ2V0UmVuZGVyVHJlZSgpLGIpfX1dLHRvZGF5VGV4dDoiVG9kYXkiLGFyaWFUaXRsZToiRGF0ZSBQaWNrZXI6IHswfSIsYXJpYVRpdGxlRGF0ZUZvcm1hdDoiRiBkLCBZIix0b2RheVRpcDoiezB9IChTcGFjZWJhcikiLG1pblRleHQ6IlRoaXMgZGF0ZSBpcyBiZWZvcmUgdGhlIG1pbmltdW0gZGF0ZSIsbWF4VGV4dDoiVGhpcyBkYXRlIGlzIGFmdGVyIHRoZSBtYXhpbXVtIGRhdGUiLGRpc2FibGVkRGF5c1RleHQ6IkRpc2FibGVkIixkaXNhYmxlZERhdGVzVGV4dDoiRGlzYWJsZWQiLG5leHRUZXh0OiJOZXh0IE1vbnRoIChDb250cm9sK1JpZ2h0KSIscHJldlRleHQ6IlByZXZpb3VzIE1vbnRoIChDb250cm9sK0xlZnQpIixtb250aFllYXJUZXh0OiJDaG9vc2UgYSBtb250aCAoQ29udHJvbCtVcC9Eb3duIHRvIG1vdmUgeWVhcnMpIixtb250aFllYXJGb3JtYXQ6IkYgWSIsc3RhcnREYXk6MCxzaG93VG9kYXk6dHJ1ZSxkaXNhYmxlQW5pbTpmYWxzZSxiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJkYXRlcGlja2VyIixsb25nRGF5Rm9ybWF0OiJGIGQsIFkiLGZvY3VzT25TaG93OmZhbHNlLGZvY3VzT25TZWxlY3Q6dHJ1ZSx3aWR0aDoxNzgsaW5pdEhvdXI6MTIsbnVtRGF5czo0Mixpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPUV4dC5EYXRlLmNsZWFyVGltZTtiLnNlbGVjdGVkQ2xzPWIuYmFzZUNscysiLXNlbGVjdGVkIjtiLmRpc2FibGVkQ2VsbENscz1iLmJhc2VDbHMrIi1kaXNhYmxlZCI7Yi5wcmV2Q2xzPWIuYmFzZUNscysiLXByZXZkYXkiO2IuYWN0aXZlQ2xzPWIuYmFzZUNscysiLWFjdGl2ZSI7Yi5uZXh0Q2xzPWIuYmFzZUNscysiLXByZXZkYXkiO2IudG9kYXlDbHM9Yi5iYXNlQ2xzKyItdG9kYXkiO2IuZGF5TmFtZXM9Yi5kYXlOYW1lcy5zbGljZShiLnN0YXJ0RGF5KS5jb25jYXQoYi5kYXlOYW1lcy5zbGljZSgwLGIuc3RhcnREYXkpKTtiLmxpc3RlbmVycz1FeHQuYXBwbHkoYi5saXN0ZW5lcnN8fHt9LHttb3VzZXdoZWVsOntlbGVtZW50OiJldmVudEVsIixmbjpiLmhhbmRsZU1vdXNlV2hlZWwsc2NvcGU6Yn0sY2xpY2s6e2VsZW1lbnQ6ImV2ZW50RWwiLGZuOmIuaGFuZGxlRGF0ZUNsaWNrLHNjb3BlOmIsZGVsZWdhdGU6ImEuIitiLmJhc2VDbHMrIi1kYXRlIn19KTt0aGlzLmNhbGxQYXJlbnQoKTtiLnZhbHVlPWIudmFsdWU/YShiLnZhbHVlLHRydWUpOmEobmV3IERhdGUoKSk7Yi5hZGRFdmVudHMoInNlbGVjdCIpO2IuaW5pdERpc2FibGVkRGF5cygpfSxiZWZvcmVSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9bmV3IEFycmF5KGIubnVtRGF5cyksYT1FeHQuRGF0ZS5mb3JtYXQobmV3IERhdGUoKSxiLmZvcm1hdCk7aWYoYi51cCgibWVudSIpKXtiLmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsibWVudSIpfWIubW9udGhCdG49bmV3IEV4dC5idXR0b24uU3BsaXQoe293bmVyQ3Q6Yixvd25lckxheW91dDpiLmdldENvbXBvbmVudExheW91dCgpLHRleHQ6IiIsdG9vbHRpcDpiLm1vbnRoWWVhclRleHQsbGlzdGVuZXJzOntjbGljazpiLnNob3dNb250aFBpY2tlcixhcnJvd2NsaWNrOmIuc2hvd01vbnRoUGlja2VyLHNjb3BlOmJ9fSk7aWYodGhpcy5zaG93VG9kYXkpe2IudG9kYXlCdG49bmV3IEV4dC5idXR0b24uQnV0dG9uKHtvd25lckN0OmIsb3duZXJMYXlvdXQ6Yi5nZXRDb21wb25lbnRMYXlvdXQoKSx0ZXh0OkV4dC5TdHJpbmcuZm9ybWF0KGIudG9kYXlUZXh0LGEpLHRvb2x0aXA6RXh0LlN0cmluZy5mb3JtYXQoYi50b2RheVRpcCxhKSx0b29sdGlwVHlwZToidGl0bGUiLGhhbmRsZXI6Yi5zZWxlY3RUb2RheSxzY29wZTpifSl9Yi5jYWxsUGFyZW50KCk7RXh0LmFwcGx5SWYoYix7cmVuZGVyRGF0YTp7fX0pO0V4dC5hcHBseShiLnJlbmRlckRhdGEse2RheU5hbWVzOmIuZGF5TmFtZXMsc2hvd1RvZGF5OmIuc2hvd1RvZGF5LHByZXZUZXh0OmIucHJldlRleHQsbmV4dFRleHQ6Yi5uZXh0VGV4dCxkYXlzOmN9KX0sZmluaXNoUmVuZGVyQ2hpbGRyZW46ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudCgpO2EubW9udGhCdG4uZmluaXNoUmVuZGVyKCk7aWYoYS5zaG93VG9kYXkpe2EudG9kYXlCdG4uZmluaXNoUmVuZGVyKCl9fSxvblJlbmRlcjpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXM7Yy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7Yy5lbC51bnNlbGVjdGFibGUoKTtjLmNlbGxzPWMuZXZlbnRFbC5zZWxlY3QoInRib2R5IHRkIik7Yy50ZXh0Tm9kZXM9Yy5ldmVudEVsLnF1ZXJ5KCJ0Ym9keSB0ZCBzcGFuIil9LGluaXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGE9RXh0LkRhdGUsYj1hLkRBWTtjLmNhbGxQYXJlbnQoKTtjLnByZXZSZXBlYXRlcj1uZXcgRXh0LnV0aWwuQ2xpY2tSZXBlYXRlcihjLnByZXZFbCx7aGFuZGxlcjpjLnNob3dQcmV2TW9udGgsc2NvcGU6YyxwcmV2ZW50RGVmYXVsdDp0cnVlLHN0b3BEZWZhdWx0OnRydWV9KTtjLm5leHRSZXBlYXRlcj1uZXcgRXh0LnV0aWwuQ2xpY2tSZXBlYXRlcihjLm5leHRFbCx7aGFuZGxlcjpjLnNob3dOZXh0TW9udGgsc2NvcGU6YyxwcmV2ZW50RGVmYXVsdDp0cnVlLHN0b3BEZWZhdWx0OnRydWV9KTtjLmtleU5hdj1uZXcgRXh0LnV0aWwuS2V5TmF2KGMuZXZlbnRFbCxFeHQuYXBwbHkoe3Njb3BlOmMsbGVmdDpmdW5jdGlvbihkKXtpZihkLmN0cmxLZXkpe2Muc2hvd1ByZXZNb250aCgpfWVsc2V7Yy51cGRhdGUoYS5hZGQoYy5hY3RpdmVEYXRlLGIsLTEpKX19LHJpZ2h0OmZ1bmN0aW9uKGQpe2lmKGQuY3RybEtleSl7Yy5zaG93TmV4dE1vbnRoKCl9ZWxzZXtjLnVwZGF0ZShhLmFkZChjLmFjdGl2ZURhdGUsYiwxKSl9fSx1cDpmdW5jdGlvbihkKXtpZihkLmN0cmxLZXkpe2Muc2hvd05leHRZZWFyKCl9ZWxzZXtjLnVwZGF0ZShhLmFkZChjLmFjdGl2ZURhdGUsYiwtNykpfX0sZG93bjpmdW5jdGlvbihkKXtpZihkLmN0cmxLZXkpe2Muc2hvd1ByZXZZZWFyKCl9ZWxzZXtjLnVwZGF0ZShhLmFkZChjLmFjdGl2ZURhdGUsYiw3KSl9fSxwYWdlVXA6Yy5zaG93TmV4dE1vbnRoLHBhZ2VEb3duOmMuc2hvd1ByZXZNb250aCxlbnRlcjpmdW5jdGlvbihkKXtkLnN0b3BQcm9wYWdhdGlvbigpO3JldHVybiB0cnVlfX0sYy5rZXlOYXZDb25maWcpKTtpZihjLnNob3dUb2RheSl7Yy50b2RheUtleUxpc3RlbmVyPWMuZXZlbnRFbC5hZGRLZXlMaXN0ZW5lcihFeHQuRXZlbnRPYmplY3QuU1BBQ0UsYy5zZWxlY3RUb2RheSxjKX1jLnVwZGF0ZShjLnZhbHVlKX0saW5pdERpc2FibGVkRGF5czpmdW5jdGlvbigpe3ZhciBoPXRoaXMsYj1oLmRpc2FibGVkRGF0ZXMsZz0iKD86IixhLGksYyxlO2lmKCFoLmRpc2FibGVkRGF0ZXNSRSYmYil7YT1iLmxlbmd0aC0xO2M9Yi5sZW5ndGg7Zm9yKGk9MDtpPGM7aSsrKXtlPWJbaV07Zys9RXh0LmlzRGF0ZShlKT8iXiIrRXh0LlN0cmluZy5lc2NhcGVSZWdleChFeHQuRGF0ZS5kYXRlRm9ybWF0KGUsaC5mb3JtYXQpKSsiJCI6ZTtpZihpIT1hKXtnKz0ifCJ9fWguZGlzYWJsZWREYXRlc1JFPW5ldyBSZWdFeHAoZysiKSIpfX0sc2V0RGlzYWJsZWREYXRlczpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKEV4dC5pc0FycmF5KGEpKXtiLmRpc2FibGVkRGF0ZXM9YTtiLmRpc2FibGVkRGF0ZXNSRT1udWxsfWVsc2V7Yi5kaXNhYmxlZERhdGVzUkU9YX1iLmluaXREaXNhYmxlZERheXMoKTtiLnVwZGF0ZShiLnZhbHVlLHRydWUpO3JldHVybiBifSxzZXREaXNhYmxlZERheXM6ZnVuY3Rpb24oYSl7dGhpcy5kaXNhYmxlZERheXM9YTtyZXR1cm4gdGhpcy51cGRhdGUodGhpcy52YWx1ZSx0cnVlKX0sc2V0TWluRGF0ZTpmdW5jdGlvbihhKXt0aGlzLm1pbkRhdGU9YTtyZXR1cm4gdGhpcy51cGRhdGUodGhpcy52YWx1ZSx0cnVlKX0sc2V0TWF4RGF0ZTpmdW5jdGlvbihhKXt0aGlzLm1heERhdGU9YTtyZXR1cm4gdGhpcy51cGRhdGUodGhpcy52YWx1ZSx0cnVlKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy52YWx1ZT1FeHQuRGF0ZS5jbGVhclRpbWUoYSx0cnVlKTtyZXR1cm4gdGhpcy51cGRhdGUodGhpcy52YWx1ZSl9LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9LGdldERheUluaXRpYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3Vic3RyKDAsMSl9LGZvY3VzOmZ1bmN0aW9uKCl7dGhpcy51cGRhdGUodGhpcy5hY3RpdmVEYXRlKX0sb25FbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt0aGlzLnNldERpc2FibGVkU3RhdHVzKGZhbHNlKTt0aGlzLnVwZGF0ZSh0aGlzLmFjdGl2ZURhdGUpfSxvbkRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt0aGlzLnNldERpc2FibGVkU3RhdHVzKHRydWUpfSxzZXREaXNhYmxlZFN0YXR1czpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2Iua2V5TmF2LnNldERpc2FibGVkKGEpO2IucHJldlJlcGVhdGVyLnNldERpc2FibGVkKGEpO2IubmV4dFJlcGVhdGVyLnNldERpc2FibGVkKGEpO2lmKGIuc2hvd1RvZGF5KXtiLnRvZGF5S2V5TGlzdGVuZXIuc2V0RGlzYWJsZWQoYSk7Yi50b2RheUJ0bi5zZXREaXNhYmxlZChhKX19LGdldEFjdGl2ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFjdGl2ZURhdGV8fHRoaXMudmFsdWV9LHJ1bkFuaW1hdGlvbjpmdW5jdGlvbihjKXt2YXIgYj10aGlzLm1vbnRoUGlja2VyLGE9e2R1cmF0aW9uOjIwMCxjYWxsYmFjazpmdW5jdGlvbigpe2lmKGMpe2IuaGlkZSgpfWVsc2V7Yi5zaG93KCl9fX07aWYoYyl7Yi5lbC5zbGlkZU91dCgidCIsYSl9ZWxzZXtiLmVsLnNsaWRlSW4oInQiLGEpfX0saGlkZU1vbnRoUGlja2VyOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMsYj1jLm1vbnRoUGlja2VyO2lmKGIpe2lmKGMuc2hvdWxkQW5pbWF0ZShhKSl7Yy5ydW5BbmltYXRpb24odHJ1ZSl9ZWxzZXtiLmhpZGUoKX19cmV0dXJuIGN9LHNob3dNb250aFBpY2tlcjpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGI7aWYoYy5yZW5kZXJlZCYmIWMuZGlzYWJsZWQpe2I9Yy5jcmVhdGVNb250aFBpY2tlcigpO2Iuc2V0VmFsdWUoYy5nZXRBY3RpdmUoKSk7Yi5zZXRTaXplKGMuZ2V0U2l6ZSgpKTtiLnNldFBvc2l0aW9uKC0xLC0xKTtpZihjLnNob3VsZEFuaW1hdGUoYSkpe2MucnVuQW5pbWF0aW9uKGZhbHNlKX1lbHNle2Iuc2hvdygpfX1yZXR1cm4gY30sc2hvdWxkQW5pbWF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LmlzRGVmaW5lZChhKT9hOiF0aGlzLmRpc2FibGVBbmltfSxjcmVhdGVNb250aFBpY2tlcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLm1vbnRoUGlja2VyO2lmKCFhKXtiLm1vbnRoUGlja2VyPWE9bmV3IEV4dC5waWNrZXIuTW9udGgoe3JlbmRlclRvOmIuZWwsZmxvYXRpbmc6dHJ1ZSxzaGFkb3c6ZmFsc2Usc21hbGw6Yi5zaG93VG9kYXk9PT1mYWxzZSxsaXN0ZW5lcnM6e3Njb3BlOmIsY2FuY2VsY2xpY2s6Yi5vbkNhbmNlbENsaWNrLG9rY2xpY2s6Yi5vbk9rQ2xpY2sseWVhcmRibGNsaWNrOmIub25Pa0NsaWNrLG1vbnRoZGJsY2xpY2s6Yi5vbk9rQ2xpY2t9fSk7aWYoIWIuZGlzYWJsZUFuaW0pe2EuZWwuc2V0U3R5bGUoImRpc3BsYXkiLCJub25lIil9Yi5vbigiYmVmb3JlaGlkZSIsRXh0LkZ1bmN0aW9uLmJpbmQoYi5oaWRlTW9udGhQaWNrZXIsYixbZmFsc2VdKSl9cmV0dXJuIGF9LG9uT2tDbGljazpmdW5jdGlvbihiLGUpe3ZhciBkPXRoaXMsZz1lWzBdLGM9ZVsxXSxhPW5ldyBEYXRlKGMsZyxkLmdldEFjdGl2ZSgpLmdldERhdGUoKSk7aWYoYS5nZXRNb250aCgpIT09Zyl7YT1FeHQuRGF0ZS5nZXRMYXN0RGF0ZU9mTW9udGgobmV3IERhdGUoYyxnLDEpKX1kLnVwZGF0ZShhKTtkLmhpZGVNb250aFBpY2tlcigpfSxvbkNhbmNlbENsaWNrOmZ1bmN0aW9uKCl7dGhpcy5zZWxlY3RlZFVwZGF0ZSh0aGlzLmFjdGl2ZURhdGUpO3RoaXMuaGlkZU1vbnRoUGlja2VyKCl9LHNob3dQcmV2TW9udGg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudXBkYXRlKEV4dC5EYXRlLmFkZCh0aGlzLmFjdGl2ZURhdGUsRXh0LkRhdGUuTU9OVEgsLTEpKX0sc2hvd05leHRNb250aDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy51cGRhdGUoRXh0LkRhdGUuYWRkKHRoaXMuYWN0aXZlRGF0ZSxFeHQuRGF0ZS5NT05USCwxKSl9LHNob3dQcmV2WWVhcjpmdW5jdGlvbigpe3RoaXMudXBkYXRlKEV4dC5EYXRlLmFkZCh0aGlzLmFjdGl2ZURhdGUsRXh0LkRhdGUuWUVBUiwtMSkpfSxzaG93TmV4dFllYXI6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZShFeHQuRGF0ZS5hZGQodGhpcy5hY3RpdmVEYXRlLEV4dC5EYXRlLllFQVIsMSkpfSxoYW5kbGVNb3VzZVdoZWVsOmZ1bmN0aW9uKGEpe2Euc3RvcEV2ZW50KCk7aWYoIXRoaXMuZGlzYWJsZWQpe3ZhciBiPWEuZ2V0V2hlZWxEZWx0YSgpO2lmKGI+MCl7dGhpcy5zaG93UHJldk1vbnRoKCl9ZWxzZXtpZihiPDApe3RoaXMuc2hvd05leHRNb250aCgpfX19fSxoYW5kbGVEYXRlQ2xpY2s6ZnVuY3Rpb24oZCxhKXt2YXIgYz10aGlzLGI9Yy5oYW5kbGVyO2Quc3RvcEV2ZW50KCk7aWYoIWMuZGlzYWJsZWQmJmEuZGF0ZVZhbHVlJiYhRXh0LmZseShhLnBhcmVudE5vZGUpLmhhc0NscyhjLmRpc2FibGVkQ2VsbENscykpe2MuZG9DYW5jZWxGb2N1cz1jLmZvY3VzT25TZWxlY3Q9PT1mYWxzZTtjLnNldFZhbHVlKG5ldyBEYXRlKGEuZGF0ZVZhbHVlKSk7ZGVsZXRlIGMuZG9DYW5jZWxGb2N1cztjLmZpcmVFdmVudCgic2VsZWN0IixjLGMudmFsdWUpO2lmKGIpe2IuY2FsbChjLnNjb3BlfHxjLGMsYy52YWx1ZSl9Yy5vblNlbGVjdCgpfX0sb25TZWxlY3Q6ZnVuY3Rpb24oKXtpZih0aGlzLmhpZGVPblNlbGVjdCl7dGhpcy5oaWRlKCl9fSxzZWxlY3RUb2RheTpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYT1jLnRvZGF5QnRuLGI9Yy5oYW5kbGVyO2lmKGEmJiFhLmRpc2FibGVkKXtjLnNldFZhbHVlKEV4dC5EYXRlLmNsZWFyVGltZShuZXcgRGF0ZSgpKSk7Yy5maXJlRXZlbnQoInNlbGVjdCIsYyxjLnZhbHVlKTtpZihiKXtiLmNhbGwoYy5zY29wZXx8YyxjLGMudmFsdWUpfWMub25TZWxlY3QoKX1yZXR1cm4gY30sc2VsZWN0ZWRVcGRhdGU6ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpcyxpPWEuZ2V0VGltZSgpLGo9ZC5jZWxscyxrPWQuc2VsZWN0ZWRDbHMsZz1qLmVsZW1lbnRzLGIsZT1nLmxlbmd0aCxoO2oucmVtb3ZlQ2xzKGspO2ZvcihiPTA7YjxlO2IrKyl7aD1FeHQuZmx5KGdbYl0pO2lmKGguZG9tLmZpcnN0Q2hpbGQuZGF0ZVZhbHVlPT1pKXtkLmZpcmVFdmVudCgiaGlnaGxpZ2h0aXRlbSIsZCxoKTtoLmFkZENscyhrKTtpZihkLmlzVmlzaWJsZSgpJiYhZC5kb0NhbmNlbEZvY3VzKXtFeHQuZmx5KGguZG9tLmZpcnN0Q2hpbGQpLmZvY3VzKDUwKX1icmVha319fSxmdWxsVXBkYXRlOmZ1bmN0aW9uKEEpe3ZhciBFPXRoaXMsZz1FLmNlbGxzLmVsZW1lbnRzLGQ9RS50ZXh0Tm9kZXMsRz1FLmRpc2FibGVkQ2VsbENscyxuPUV4dC5EYXRlLHc9MCxEPTAsZT1FLmlzVmlzaWJsZSgpLHU9K24uY2xlYXJUaW1lKEEsdHJ1ZSksej0rbi5jbGVhclRpbWUobmV3IERhdGUoKSksdD1FLm1pbkRhdGU/bi5jbGVhclRpbWUoRS5taW5EYXRlLHRydWUpOk51bWJlci5ORUdBVElWRV9JTkZJTklUWSx2PUUubWF4RGF0ZT9uLmNsZWFyVGltZShFLm1heERhdGUsdHJ1ZSk6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLEM9RS5kaXNhYmxlZERhdGVzUkUscz1FLmRpc2FibGVkRGF0ZXNUZXh0LEg9RS5kaXNhYmxlZERheXM/RS5kaXNhYmxlZERheXMuam9pbigiIik6ZmFsc2UsQj1FLmRpc2FibGVkRGF5c1RleHQseD1FLmZvcm1hdCxsPW4uZ2V0RGF5c0luTW9udGgoQSkscD1uLmdldEZpcnN0RGF0ZU9mTW9udGgoQSksaD1wLmdldERheSgpLUUuc3RhcnREYXkseT1uLmFkZChBLG4uTU9OVEgsLTEpLGI9RS5sb25nRGF5Rm9ybWF0LGsscSxhLEYsbSxvLGMsaixyO2lmKGg8MCl7aCs9N31sKz1oO2s9bi5nZXREYXlzSW5Nb250aCh5KS1oO3E9bmV3IERhdGUoeS5nZXRGdWxsWWVhcigpLHkuZ2V0TW9udGgoKSxrLEUuaW5pdEhvdXIpO2lmKEUuc2hvd1RvZGF5KXtGPW4uY2xlYXJUaW1lKG5ldyBEYXRlKCkpO2E9KEY8dHx8Rj52fHwoQyYmeCYmQy50ZXN0KG4uZGF0ZUZvcm1hdChGLHgpKSl8fChIJiZILmluZGV4T2YoRi5nZXREYXkoKSkhPS0xKSk7aWYoIUUuZGlzYWJsZWQpe0UudG9kYXlCdG4uc2V0RGlzYWJsZWQoYSk7RS50b2RheUtleUxpc3RlbmVyLnNldERpc2FibGVkKGEpfX1tPWZ1bmN0aW9uKGkpe3I9K24uY2xlYXJUaW1lKHEsdHJ1ZSk7aS50aXRsZT1uLmZvcm1hdChxLGIpO2kuZmlyc3RDaGlsZC5kYXRlVmFsdWU9cjtpZihyPT16KXtpLmNsYXNzTmFtZSs9IiAiK0UudG9kYXlDbHM7aS50aXRsZT1FLnRvZGF5VGV4dH1pZihyPT11KXtpLmNsYXNzTmFtZSs9IiAiK0Uuc2VsZWN0ZWRDbHM7RS5maXJlRXZlbnQoImhpZ2hsaWdodGl0ZW0iLEUsaSk7aWYoZSYmRS5mbG9hdGluZyl7RXh0LmZseShpLmZpcnN0Q2hpbGQpLmZvY3VzKDUwKX19aWYocjx0KXtpLmNsYXNzTmFtZT1HO2kudGl0bGU9RS5taW5UZXh0O3JldHVybn1pZihyPnYpe2kuY2xhc3NOYW1lPUc7aS50aXRsZT1FLm1heFRleHQ7cmV0dXJufWlmKEgpe2lmKEguaW5kZXhPZihxLmdldERheSgpKSE9LTEpe2kudGl0bGU9QjtpLmNsYXNzTmFtZT1HfX1pZihDJiZ4KXtqPW4uZGF0ZUZvcm1hdChxLHgpO2lmKEMudGVzdChqKSl7aS50aXRsZT1zLnJlcGxhY2UoIiUwIixqKTtpLmNsYXNzTmFtZT1HfX19O2Zvcig7dzxFLm51bURheXM7Kyt3KXtpZih3PGgpe289KCsrayk7Yz1FLnByZXZDbHN9ZWxzZXtpZih3Pj1sKXtvPSgrK0QpO2M9RS5uZXh0Q2xzfWVsc2V7bz13LWgrMTtjPUUuYWN0aXZlQ2xzfX1kW3ddLmlubmVySFRNTD1vO2dbd10uY2xhc3NOYW1lPWM7cS5zZXREYXRlKHEuZ2V0RGF0ZSgpKzEpO20oZ1t3XSl9RS5tb250aEJ0bi5zZXRUZXh0KEV4dC5EYXRlLmZvcm1hdChBLEUubW9udGhZZWFyRm9ybWF0KSl9LHVwZGF0ZTpmdW5jdGlvbihhLGQpe3ZhciBiPXRoaXMsYz1iLmFjdGl2ZURhdGU7aWYoYi5yZW5kZXJlZCl7Yi5hY3RpdmVEYXRlPWE7aWYoIWQmJmMmJmIuZWwmJmMuZ2V0TW9udGgoKT09YS5nZXRNb250aCgpJiZjLmdldEZ1bGxZZWFyKCk9PWEuZ2V0RnVsbFllYXIoKSl7Yi5zZWxlY3RlZFVwZGF0ZShhLGMpfWVsc2V7Yi5mdWxsVXBkYXRlKGEsYyl9Yi5pbm5lckVsLmRvbS50aXRsZT1FeHQuU3RyaW5nLmZvcm1hdChiLmFyaWFUaXRsZSxFeHQuRGF0ZS5mb3JtYXQoYi5hY3RpdmVEYXRlLGIuYXJpYVRpdGxlRGF0ZUZvcm1hdCkpfXJldHVybiBifSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnJlbmRlcmVkKXtFeHQuZGVzdHJveShhLnRvZGF5S2V5TGlzdGVuZXIsYS5rZXlOYXYsYS5tb250aFBpY2tlcixhLm1vbnRoQnRuLGEubmV4dFJlcGVhdGVyLGEucHJldlJlcGVhdGVyLGEudG9kYXlCdG4pO2RlbGV0ZSBhLnRleHROb2RlcztkZWxldGUgYS5jZWxscy5lbGVtZW50c31hLmNhbGxQYXJlbnQoKX0sb25TaG93OmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYodGhpcy5mb2N1c09uU2hvdyl7dGhpcy5mb2N1cygpfX19LGZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5wcm90b3R5cGUsYT1FeHQuRGF0ZTtiLm1vbnRoTmFtZXM9YS5tb250aE5hbWVzO2IuZGF5TmFtZXM9YS5kYXlOYW1lcztiLmZvcm1hdD1hLmRlZmF1bHRGb3JtYXR9KTtFeHQuZGVmaW5lKCJFeHQuZm9ybS5maWVsZC5EYXRlIix7ZXh0ZW5kOiJFeHQuZm9ybS5maWVsZC5QaWNrZXIiLGFsaWFzOiJ3aWRnZXQuZGF0ZWZpZWxkIixyZXF1aXJlczpbIkV4dC5waWNrZXIuRGF0ZSJdLGFsdGVybmF0ZUNsYXNzTmFtZTpbIkV4dC5mb3JtLkRhdGVGaWVsZCIsIkV4dC5mb3JtLkRhdGUiXSxmb3JtYXQ6Im0vZC9ZIixhbHRGb3JtYXRzOiJtL2QvWXxuL2ovWXxuL2oveXxtL2oveXxuL2QveXxtL2ovWXxuL2QvWXxtLWQteXxtLWQtWXxtL2R8bS1kfG1kfG1keXxtZFl8ZHxZLW0tZHxuLWp8bi9qIixkaXNhYmxlZERheXNUZXh0OiJEaXNhYmxlZCIsZGlzYWJsZWREYXRlc1RleHQ6IkRpc2FibGVkIixtaW5UZXh0OiJUaGUgZGF0ZSBpbiB0aGlzIGZpZWxkIG11c3QgYmUgZXF1YWwgdG8gb3IgYWZ0ZXIgezB9IixtYXhUZXh0OiJUaGUgZGF0ZSBpbiB0aGlzIGZpZWxkIG11c3QgYmUgZXF1YWwgdG8gb3IgYmVmb3JlIHswfSIsaW52YWxpZFRleHQ6InswfSBpcyBub3QgYSB2YWxpZCBkYXRlIC0gaXQgbXVzdCBiZSBpbiB0aGUgZm9ybWF0IHsxfSIsdHJpZ2dlckNsczpFeHQuYmFzZUNTU1ByZWZpeCsiZm9ybS1kYXRlLXRyaWdnZXIiLHNob3dUb2RheTp0cnVlLHVzZVN0cmljdDp1bmRlZmluZWQsaW5pdFRpbWU6IjEyIixpbml0VGltZUZvcm1hdDoiSCIsbWF0Y2hGaWVsZFdpZHRoOmZhbHNlLHN0YXJ0RGF5OjAsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBkPXRoaXMsYj1FeHQuaXNTdHJpbmcsYyxhO2M9ZC5taW5WYWx1ZTthPWQubWF4VmFsdWU7aWYoYihjKSl7ZC5taW5WYWx1ZT1kLnBhcnNlRGF0ZShjKX1pZihiKGEpKXtkLm1heFZhbHVlPWQucGFyc2VEYXRlKGEpfWQuZGlzYWJsZWREYXRlc1JFPW51bGw7ZC5pbml0RGlzYWJsZWREYXlzKCk7ZC5jYWxsUGFyZW50KCl9LGluaXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLnZhbHVlO2lmKEV4dC5pc1N0cmluZyhiKSl7YS52YWx1ZT1hLnJhd1RvVmFsdWUoYil9YS5jYWxsUGFyZW50KCl9LGluaXREaXNhYmxlZERheXM6ZnVuY3Rpb24oKXtpZih0aGlzLmRpc2FibGVkRGF0ZXMpe3ZhciBiPXRoaXMuZGlzYWJsZWREYXRlcyxhPWIubGVuZ3RoLTEsZz0iKD86IixoLGU9Yi5sZW5ndGgsYztmb3IoaD0wO2g8ZTtoKyspe2M9YltoXTtnKz1FeHQuaXNEYXRlKGMpPyJeIitFeHQuU3RyaW5nLmVzY2FwZVJlZ2V4KGMuZGF0ZUZvcm1hdCh0aGlzLmZvcm1hdCkpKyIkIjpjO2lmKGghPT1hKXtnKz0ifCJ9fXRoaXMuZGlzYWJsZWREYXRlc1JFPW5ldyBSZWdFeHAoZysiKSIpfX0sc2V0RGlzYWJsZWREYXRlczpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGI9Yy5waWNrZXI7Yy5kaXNhYmxlZERhdGVzPWE7Yy5pbml0RGlzYWJsZWREYXlzKCk7aWYoYil7Yi5zZXREaXNhYmxlZERhdGVzKGMuZGlzYWJsZWREYXRlc1JFKX19LHNldERpc2FibGVkRGF5czpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBpY2tlcjt0aGlzLmRpc2FibGVkRGF5cz1hO2lmKGIpe2Iuc2V0RGlzYWJsZWREYXlzKGEpfX0sc2V0TWluVmFsdWU6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhPWIucGlja2VyLGQ9KEV4dC5pc1N0cmluZyhjKT9iLnBhcnNlRGF0ZShjKTpjKTtiLm1pblZhbHVlPWQ7aWYoYSl7YS5taW5UZXh0PUV4dC5TdHJpbmcuZm9ybWF0KGIubWluVGV4dCxiLmZvcm1hdERhdGUoYi5taW5WYWx1ZSkpO2Euc2V0TWluRGF0ZShkKX19LHNldE1heFZhbHVlOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLnBpY2tlcixkPShFeHQuaXNTdHJpbmcoYyk/Yi5wYXJzZURhdGUoYyk6Yyk7Yi5tYXhWYWx1ZT1kO2lmKGEpe2EubWF4VGV4dD1FeHQuU3RyaW5nLmZvcm1hdChiLm1heFRleHQsYi5mb3JtYXREYXRlKGIubWF4VmFsdWUpKTthLnNldE1heERhdGUoZCl9fSxnZXRFcnJvcnM6ZnVuY3Rpb24ocSl7dmFyIGo9dGhpcyxwPUV4dC5TdHJpbmcuZm9ybWF0LGs9RXh0LkRhdGUuY2xlYXJUaW1lLG89ai5jYWxsUGFyZW50KGFyZ3VtZW50cyksbj1qLmRpc2FibGVkRGF5cyxkPWouZGlzYWJsZWREYXRlc1JFLG09ai5taW5WYWx1ZSxoPWoubWF4VmFsdWUsZz1uP24ubGVuZ3RoOjAsZT0wLGEsYixsLGM7cT1qLmZvcm1hdERhdGUocXx8ai5wcm9jZXNzUmF3VmFsdWUoai5nZXRSYXdWYWx1ZSgpKSk7aWYocT09PW51bGx8fHEubGVuZ3RoPDEpe3JldHVybiBvfWE9cTtxPWoucGFyc2VEYXRlKHEpO2lmKCFxKXtvLnB1c2gocChqLmludmFsaWRUZXh0LGEsRXh0LkRhdGUudW5lc2NhcGVGb3JtYXQoai5mb3JtYXQpKSk7cmV0dXJuIG99Yz1xLmdldFRpbWUoKTtpZihtJiZjPGsobSkuZ2V0VGltZSgpKXtvLnB1c2gocChqLm1pblRleHQsai5mb3JtYXREYXRlKG0pKSl9aWYoaCYmYz5rKGgpLmdldFRpbWUoKSl7by5wdXNoKHAoai5tYXhUZXh0LGouZm9ybWF0RGF0ZShoKSkpfWlmKG4pe2w9cS5nZXREYXkoKTtmb3IoO2U8ZztlKyspe2lmKGw9PT1uW2VdKXtvLnB1c2goai5kaXNhYmxlZERheXNUZXh0KTticmVha319fWI9ai5mb3JtYXREYXRlKHEpO2lmKGQmJmQudGVzdChiKSl7by5wdXNoKHAoai5kaXNhYmxlZERhdGVzVGV4dCxiKSl9cmV0dXJuIG99LHJhd1RvVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucGFyc2VEYXRlKGEpfHxhfHxudWxsfSx2YWx1ZVRvUmF3OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZvcm1hdERhdGUodGhpcy5wYXJzZURhdGUoYSkpfSxzYWZlUGFyc2U6ZnVuY3Rpb24oZyxoKXt2YXIgZT10aGlzLGM9RXh0LkRhdGUsYT1udWxsLGI9ZS51c2VTdHJpY3QsZDtpZihjLmZvcm1hdENvbnRhaW5zSG91ckluZm8oaCkpe2E9Yy5wYXJzZShnLGgsYil9ZWxzZXtkPWMucGFyc2UoZysiICIrZS5pbml0VGltZSxoKyIgIitlLmluaXRUaW1lRm9ybWF0LGIpO2lmKGQpe2E9Yy5jbGVhclRpbWUoZCl9fXJldHVybiBhfSxnZXRTdWJtaXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMuc3VibWl0Rm9ybWF0fHx0aGlzLmZvcm1hdCxhPXRoaXMuZ2V0VmFsdWUoKTtyZXR1cm4gYT9FeHQuRGF0ZS5mb3JtYXQoYSxiKToiIn0scGFyc2VEYXRlOmZ1bmN0aW9uKGUpe2lmKCFlfHxFeHQuaXNEYXRlKGUpKXtyZXR1cm4gZX12YXIgZD10aGlzLGg9ZC5zYWZlUGFyc2UoZSxkLmZvcm1hdCksYj1kLmFsdEZvcm1hdHMsZz1kLmFsdEZvcm1hdHNBcnJheSxjPTAsYTtpZighaCYmYil7Zz1nfHxiLnNwbGl0KCJ8Iik7YT1nLmxlbmd0aDtmb3IoO2M8YSYmIWg7KytjKXtoPWQuc2FmZVBhcnNlKGUsZ1tjXSl9fXJldHVybiBofSxmb3JtYXREYXRlOmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuaXNEYXRlKGEpP0V4dC5EYXRlLmRhdGVGb3JtYXQoYSx0aGlzLmZvcm1hdCk6YX0sY3JlYXRlUGlja2VyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPUV4dC5TdHJpbmcuZm9ybWF0O3JldHVybiBuZXcgRXh0LnBpY2tlci5EYXRlKHtwaWNrZXJGaWVsZDphLG93bmVyQ3Q6YS5vd25lckN0LHJlbmRlclRvOmRvY3VtZW50LmJvZHksZmxvYXRpbmc6dHJ1ZSxoaWRkZW46dHJ1ZSxmb2N1c09uU2hvdzp0cnVlLG1pbkRhdGU6YS5taW5WYWx1ZSxtYXhEYXRlOmEubWF4VmFsdWUsZGlzYWJsZWREYXRlc1JFOmEuZGlzYWJsZWREYXRlc1JFLGRpc2FibGVkRGF0ZXNUZXh0OmEuZGlzYWJsZWREYXRlc1RleHQsZGlzYWJsZWREYXlzOmEuZGlzYWJsZWREYXlzLGRpc2FibGVkRGF5c1RleHQ6YS5kaXNhYmxlZERheXNUZXh0LGZvcm1hdDphLmZvcm1hdCxzaG93VG9kYXk6YS5zaG93VG9kYXksc3RhcnREYXk6YS5zdGFydERheSxtaW5UZXh0OmIoYS5taW5UZXh0LGEuZm9ybWF0RGF0ZShhLm1pblZhbHVlKSksbWF4VGV4dDpiKGEubWF4VGV4dCxhLmZvcm1hdERhdGUoYS5tYXhWYWx1ZSkpLGxpc3RlbmVyczp7c2NvcGU6YSxzZWxlY3Q6YS5vblNlbGVjdH0sa2V5TmF2Q29uZmlnOntlc2M6ZnVuY3Rpb24oKXthLmNvbGxhcHNlKCl9fX0pfSxvblNlbGVjdDpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXM7Yi5zZXRWYWx1ZShjKTtiLmZpcmVFdmVudCgic2VsZWN0IixiLGMpO2IuY29sbGFwc2UoKX0sb25FeHBhbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFZhbHVlKCk7dGhpcy5waWNrZXIuc2V0VmFsdWUoRXh0LmlzRGF0ZShhKT9hOm5ldyBEYXRlKCkpfSxvbkNvbGxhcHNlOmZ1bmN0aW9uKCl7dGhpcy5mb2N1cyhmYWxzZSw2MCl9LGJlZm9yZUJsdXI6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGE9Yy5wYXJzZURhdGUoYy5nZXRSYXdWYWx1ZSgpKSxiPWMuZm9jdXNUYXNrO2lmKGIpe2IuY2FuY2VsKCl9aWYoYSl7Yy5zZXRWYWx1ZShhKX19fSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uZmllbGQuRmlsZSIse2V4dGVuZDoiRXh0LmZvcm0uZmllbGQuVHJpZ2dlciIsYWxpYXM6WyJ3aWRnZXQuZmlsZWZpZWxkIiwid2lkZ2V0LmZpbGV1cGxvYWRmaWVsZCJdLGFsdGVybmF0ZUNsYXNzTmFtZTpbIkV4dC5mb3JtLkZpbGVVcGxvYWRGaWVsZCIsIkV4dC51eC5mb3JtLkZpbGVVcGxvYWRGaWVsZCIsIkV4dC5mb3JtLkZpbGUiXSx1c2VzOlsiRXh0LmJ1dHRvbi5CdXR0b24iLCJFeHQubGF5b3V0LmNvbXBvbmVudC5maWVsZC5GaWVsZCJdLGJ1dHRvblRleHQ6IkJyb3dzZS4uLiIsYnV0dG9uT25seTpmYWxzZSxidXR0b25NYXJnaW46MyxmaWVsZEJvZHlDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0tZmlsZS13cmFwIixyZWFkT25seTp0cnVlLHRyaWdnZXJOb0VkaXRDbHM6IiIsY29tcG9uZW50TGF5b3V0OiJ0cmlnZ2VyZmllbGQiLGNoaWxkRWxzOlsiZmlsZUlucHV0RWwiLCJidXR0b25FbCIsImJ1dHRvbkVsLWJ0bkVsIiwiYnJvd3NlQnV0dG9uV3JhcCJdLG9uUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2I9YS5pbnB1dEVsO2IuZG9tLm5hbWU9IiI7YS5maWxlSW5wdXRFbC5kb20ubmFtZT1hLmdldE5hbWUoKTthLmZpbGVJbnB1dEVsLm9uKHtzY29wZTphLGNoYW5nZTphLm9uRmlsZUNoYW5nZX0pO2lmKGEuYnV0dG9uT25seSl7YS5pbnB1dENlbGwuc2V0RGlzcGxheWVkKGZhbHNlKX1hLmJyb3dzZUJ1dHRvbldyYXAuZG9tLnN0eWxlLndpZHRoPShhLmJyb3dzZUJ1dHRvbldyYXAuZG9tLmxhc3RDaGlsZC5vZmZzZXRXaWR0aCthLmJ1dHRvbkVsLmdldE1hcmdpbigibHIiKSkrInB4IjtpZihFeHQuaXNJRSl7YS5idXR0b25FbC5yZXBhaW50KCl9fSxnZXRUcmlnZ2VyTWFya3VwOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxhLGM9RXh0LndpZGdldCgiYnV0dG9uIixFeHQuYXBwbHkoe2lkOmQuaWQrIi1idXR0b25FbCIsdWk6ZC51aSxkaXNhYmxlZDpkLmRpc2FibGVkLHRleHQ6ZC5idXR0b25UZXh0LGNsczpFeHQuYmFzZUNTU1ByZWZpeCsiZm9ybS1maWxlLWJ0biIscHJldmVudERlZmF1bHQ6ZmFsc2Usc3R5bGU6ZC5idXR0b25Pbmx5PyIiOiJtYXJnaW4tbGVmdDoiK2QuYnV0dG9uTWFyZ2luKyJweCJ9LGQuYnV0dG9uQ29uZmlnKSksYj1jLmdldFJlbmRlclRyZWUoKSxlPXtpZDpkLmlkKyItZmlsZUlucHV0RWwiLGNsczpFeHQuYmFzZUNTU1ByZWZpeCsiZm9ybS1maWxlLWlucHV0Iix0YWc6ImlucHV0Iix0eXBlOiJmaWxlIixzaXplOjF9O2lmKGQuZGlzYWJsZWQpe2UuZGlzYWJsZWQ9dHJ1ZX1iLmNuPWU7YT0nPHRkIGlkPSInK2QuaWQrJy1icm93c2VCdXR0b25XcmFwIj4nK0V4dC5Eb21IZWxwZXIubWFya3VwKGIpKyI8L3RkPiI7Yy5kZXN0cm95KCk7cmV0dXJuIGF9LGNyZWF0ZUZpbGVJbnB1dDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5maWxlSW5wdXRFbD1hLmJ1dHRvbkVsLmNyZWF0ZUNoaWxkKHtuYW1lOmEuZ2V0TmFtZSgpLGlkOmEuaWQrIi1maWxlSW5wdXRFbCIsY2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLWZpbGUtaW5wdXQiLHRhZzoiaW5wdXQiLHR5cGU6ImZpbGUiLHNpemU6MX0pO2EuZmlsZUlucHV0RWwub24oe3Njb3BlOmEsY2hhbmdlOmEub25GaWxlQ2hhbmdlfSl9LG9uRmlsZUNoYW5nZTpmdW5jdGlvbigpe3RoaXMubGFzdFZhbHVlPW51bGw7RXh0LmZvcm0uZmllbGQuRmlsZS5zdXBlcmNsYXNzLnNldFZhbHVlLmNhbGwodGhpcyx0aGlzLmZpbGVJbnB1dEVsLmRvbS52YWx1ZSl9LHNldFZhbHVlOkV4dC5lbXB0eUZuLHJlc2V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnJlbmRlcmVkKXthLmZpbGVJbnB1dEVsLnJlbW92ZSgpO2EuY3JlYXRlRmlsZUlucHV0KCk7YS5pbnB1dEVsLmRvbS52YWx1ZT0iIn1hLmNhbGxQYXJlbnQoKX0sb25EaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KCk7dGhpcy5kaXNhYmxlSXRlbXMoKX0sZGlzYWJsZUl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5maWxlSW5wdXRFbDtpZihhKXthLmRvbS5kaXNhYmxlZD10cnVlfXRoaXNbImJ1dHRvbkVsLWJ0bkVsIl0uZG9tLmRpc2FibGVkPXRydWV9LG9uRW5hYmxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoKTthLmZpbGVJbnB1dEVsLmRvbS5kaXNhYmxlZD1mYWxzZTt0aGlzWyJidXR0b25FbC1idG5FbCJdLmRvbS5kaXNhYmxlZD1mYWxzZX0saXNGaWxlVXBsb2FkOmZ1bmN0aW9uKCl7cmV0dXJuIHRydWV9LGV4dHJhY3RGaWxlSW5wdXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmZpbGVJbnB1dEVsLmRvbTt0aGlzLnJlc2V0KCk7cmV0dXJuIGF9LG9uRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95TWVtYmVycyh0aGlzLCJmaWxlSW5wdXRFbCIsImJ1dHRvbkVsIik7dGhpcy5jYWxsUGFyZW50KCl9fSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uZmllbGQuSGlkZGVuIix7ZXh0ZW5kOiJFeHQuZm9ybS5maWVsZC5CYXNlIixhbGlhczpbIndpZGdldC5oaWRkZW5maWVsZCIsIndpZGdldC5oaWRkZW4iXSxhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5mb3JtLkhpZGRlbiIsaW5wdXRUeXBlOiJoaWRkZW4iLGhpZGVMYWJlbDp0cnVlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt0aGlzLmZvcm1JdGVtQ2xzKz0iLWhpZGRlbiI7dGhpcy5jYWxsUGFyZW50KCl9LGlzRXF1YWw6ZnVuY3Rpb24oYixhKXtyZXR1cm4gdGhpcy5pc0VxdWFsQXNTdHJpbmcoYixhKX0saW5pdEV2ZW50czpFeHQuZW1wdHlGbixzZXRTaXplOkV4dC5lbXB0eUZuLHNldFdpZHRoOkV4dC5lbXB0eUZuLHNldEhlaWdodDpFeHQuZW1wdHlGbixzZXRQb3NpdGlvbjpFeHQuZW1wdHlGbixzZXRQYWdlUG9zaXRpb246RXh0LmVtcHR5Rm4sbWFya0ludmFsaWQ6RXh0LmVtcHR5Rm4sY2xlYXJJbnZhbGlkOkV4dC5lbXB0eUZufSk7RXh0LmRlZmluZSgiRXh0LmxheW91dC5jb21wb25lbnQuZmllbGQuSHRtbEVkaXRvciIse2V4dGVuZDoiRXh0LmxheW91dC5jb21wb25lbnQuZmllbGQuRmllbGQiLGFsaWFzOlsibGF5b3V0Lmh0bWxlZGl0b3IiXSx0eXBlOiJodG1sZWRpdG9yIix0b29sYmFyU2l6ZVBvbGljeTp7c2V0c1dpZHRoOjAsc2V0c0hlaWdodDowfSxiZWdpbkxheW91dDpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLnRleHRBcmVhQ29udGV4dD1hLmdldEVsKCJ0ZXh0YXJlYUVsIik7YS5pZnJhbWVDb250ZXh0PWEuZ2V0RWwoImlmcmFtZUVsIik7YS50b29sYmFyQ29udGV4dD1hLmNvbnRleHQuZ2V0Q21wKHRoaXMub3duZXIuZ2V0VG9vbGJhcigpKX0scmVuZGVySXRlbXM6RXh0LmVtcHR5Rm4sZ2V0SXRlbVNpemVQb2xpY3k6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudG9vbGJhclNpemVQb2xpY3l9LGdldExheW91dEl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vd25lci5nZXRUb29sYmFyKCk7cmV0dXJuIGE/W2FdOltdfSxnZXRSZW5kZXJUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25lci5ib2R5RWx9LHB1Ymxpc2hJbm5lckhlaWdodDpmdW5jdGlvbihjLGEpe3ZhciBiPXRoaXMsZD1hLWIubWVhc3VyZUxhYmVsRXJyb3JIZWlnaHQoYyktYy50b29sYmFyQ29udGV4dC5nZXRQcm9wKCJoZWlnaHQiKS1jLmJvZHlDZWxsQ29udGV4dC5nZXRQYWRkaW5nSW5mbygpLmhlaWdodDtpZihFeHQuaXNOdW1iZXIoZCkpe2MudGV4dEFyZWFDb250ZXh0LnNldEhlaWdodChkKTtjLmlmcmFtZUNvbnRleHQuc2V0SGVpZ2h0KGQpfWVsc2V7Yi5kb25lPWZhbHNlfX19KTtFeHQuZGVmaW5lKCJFeHQucGlja2VyLkNvbG9yIix7ZXh0ZW5kOiJFeHQuQ29tcG9uZW50IixyZXF1aXJlczoiRXh0LlhUZW1wbGF0ZSIsYWxpYXM6IndpZGdldC5jb2xvcnBpY2tlciIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuQ29sb3JQYWxldHRlIixjb21wb25lbnRDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImNvbG9yLXBpY2tlciIsc2VsZWN0ZWRDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImNvbG9yLXBpY2tlci1zZWxlY3RlZCIsdmFsdWU6bnVsbCxjbGlja0V2ZW50OiJjbGljayIsYWxsb3dSZXNlbGVjdDpmYWxzZSxjb2xvcnM6WyIwMDAwMDAiLCI5OTMzMDAiLCIzMzMzMDAiLCIwMDMzMDAiLCIwMDMzNjYiLCIwMDAwODAiLCIzMzMzOTkiLCIzMzMzMzMiLCI4MDAwMDAiLCJGRjY2MDAiLCI4MDgwMDAiLCIwMDgwMDAiLCIwMDgwODAiLCIwMDAwRkYiLCI2NjY2OTkiLCI4MDgwODAiLCJGRjAwMDAiLCJGRjk5MDAiLCI5OUNDMDAiLCIzMzk5NjYiLCIzM0NDQ0MiLCIzMzY2RkYiLCI4MDAwODAiLCI5Njk2OTYiLCJGRjAwRkYiLCJGRkNDMDAiLCJGRkZGMDAiLCIwMEZGMDAiLCIwMEZGRkYiLCIwMENDRkYiLCI5OTMzNjYiLCJDMEMwQzAiLCJGRjk5Q0MiLCJGRkNDOTkiLCJGRkZGOTkiLCJDQ0ZGQ0MiLCJDQ0ZGRkYiLCI5OUNDRkYiLCJDQzk5RkYiLCJGRkZGRkYiXSxjb2xvclJlOi8oPzpefFxzKWNvbG9yLSguezZ9KSg/OlxzfCQpLyxyZW5kZXJUcGw6Wyc8dHBsIGZvcj0iY29sb3JzIj4nLCc8YSBocmVmPSIjIiBjbGFzcz0iY29sb3Itey59IiBoaWRlZm9jdXM9Im9uIj4nLCc8ZW0+PHNwYW4gc3R5bGU9ImJhY2tncm91bmQ6I3sufSIgdW5zZWxlY3RhYmxlPSJvbiI+JiMxNjA7PC9zcGFuPjwvZW0+JywiPC9hPiIsIjwvdHBsPiJdLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2EuYWRkRXZlbnRzKCJzZWxlY3QiKTtpZihhLmhhbmRsZXIpe2Eub24oInNlbGVjdCIsYS5oYW5kbGVyLGEuc2NvcGUsdHJ1ZSl9fSxpbml0UmVuZGVyRGF0YTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIEV4dC5hcHBseShhLmNhbGxQYXJlbnQoKSx7aXRlbUNsczphLml0ZW1DbHMsY29sb3JzOmEuY29sb3JzfSl9LG9uUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuY2xpY2tFdmVudDtiLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtiLm1vbihiLmVsLGEsYi5oYW5kbGVDbGljayxiLHtkZWxlZ2F0ZToiYSJ9KTtpZihhIT0iY2xpY2siKXtiLm1vbihiLmVsLCJjbGljayIsRXh0LmVtcHR5Rm4sYix7ZGVsZWdhdGU6ImEiLHN0b3BFdmVudDp0cnVlfSl9fSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYjthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihhLnZhbHVlKXtiPWEudmFsdWU7YS52YWx1ZT1udWxsO2Euc2VsZWN0KGIsdHJ1ZSl9fSxoYW5kbGVDbGljazpmdW5jdGlvbihjLGQpe3ZhciBiPXRoaXMsYTtjLnN0b3BFdmVudCgpO2lmKCFiLmRpc2FibGVkKXthPWQuY2xhc3NOYW1lLm1hdGNoKGIuY29sb3JSZSlbMV07Yi5zZWxlY3QoYS50b1VwcGVyQ2FzZSgpKX19LHNlbGVjdDpmdW5jdGlvbihiLGEpe3ZhciBkPXRoaXMsZz1kLnNlbGVjdGVkQ2xzLGU9ZC52YWx1ZSxjO2I9Yi5yZXBsYWNlKCIjIiwiIik7aWYoIWQucmVuZGVyZWQpe2QudmFsdWU9YjtyZXR1cm59aWYoYiE9ZXx8ZC5hbGxvd1Jlc2VsZWN0KXtjPWQuZWw7aWYoZC52YWx1ZSl7Yy5kb3duKCJhLmNvbG9yLSIrZSkucmVtb3ZlQ2xzKGcpfWMuZG93bigiYS5jb2xvci0iK2IpLmFkZENscyhnKTtkLnZhbHVlPWI7aWYoYSE9PXRydWUpe2QuZmlyZUV2ZW50KCJzZWxlY3QiLGQsYil9fX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZXx8bnVsbH19KTtFeHQuZGVmaW5lKCJFeHQuZm9ybS5maWVsZC5IdG1sRWRpdG9yIix7ZXh0ZW5kOiJFeHQuQ29tcG9uZW50IixtaXhpbnM6e2xhYmVsYWJsZToiRXh0LmZvcm0uTGFiZWxhYmxlIixmaWVsZDoiRXh0LmZvcm0uZmllbGQuRmllbGQifSxhbGlhczoid2lkZ2V0Lmh0bWxlZGl0b3IiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmZvcm0uSHRtbEVkaXRvciIscmVxdWlyZXM6WyJFeHQudGlwLlF1aWNrVGlwTWFuYWdlciIsIkV4dC5waWNrZXIuQ29sb3IiLCJFeHQudG9vbGJhci5JdGVtIiwiRXh0LnRvb2xiYXIuVG9vbGJhciIsIkV4dC51dGlsLkZvcm1hdCIsIkV4dC5sYXlvdXQuY29tcG9uZW50LmZpZWxkLkh0bWxFZGl0b3IiXSxjaGlsZEVsczpbImlmcmFtZUVsIiwidGV4dGFyZWFFbCJdLGZpZWxkU3ViVHBsOlsie2JlZm9yZVRleHRBcmVhVHBsfSIsJzx0ZXh0YXJlYSBpZD0ie2NtcElkfS10ZXh0YXJlYUVsIiBuYW1lPSJ7bmFtZX0iIHRhYkluZGV4PSItMSIge2lucHV0QXR0clRwbH0nLCcgY2xhc3M9Int0ZXh0YXJlYUNsc30iIHN0eWxlPSJ7c2l6ZX0iIGF1dG9jb21wbGV0ZT0ib2ZmIj4nLCJ7W0V4dC51dGlsLkZvcm1hdC5odG1sRW5jb2RlKHZhbHVlcy52YWx1ZSldfSIsIjwvdGV4dGFyZWE+Iiwie2FmdGVyVGV4dEFyZWFUcGx9Iiwie2JlZm9yZUlGcmFtZVRwbH0iLCc8aWZyYW1lIGlkPSJ7Y21wSWR9LWlmcmFtZUVsIiBuYW1lPSJ7aWZyYW1lTmFtZX0iIGZyYW1lQm9yZGVyPSIwIiB7aWZyYW1lQXR0clRwbH0nLCcgc3R5bGU9Im92ZXJmbG93OmF1dG87e3NpemV9IiBzcmM9IntpZnJhbWVTcmN9Ij48L2lmcmFtZT4nLCJ7YWZ0ZXJJRnJhbWVUcGx9Iix7ZGlzYWJsZUZvcm1hdHM6dHJ1ZX1dLHN1YlRwbEluc2VydGlvbnM6WyJiZWZvcmVUZXh0QXJlYVRwbCIsImFmdGVyVGV4dEFyZWFUcGwiLCJiZWZvcmVJRnJhbWVUcGwiLCJhZnRlcklGcmFtZVRwbCIsImlmcmFtZUF0dHJUcGwiLCJpbnB1dEF0dHJUcGwiXSxlbmFibGVGb3JtYXQ6dHJ1ZSxlbmFibGVGb250U2l6ZTp0cnVlLGVuYWJsZUNvbG9yczp0cnVlLGVuYWJsZUFsaWdubWVudHM6dHJ1ZSxlbmFibGVMaXN0czp0cnVlLGVuYWJsZVNvdXJjZUVkaXQ6dHJ1ZSxlbmFibGVMaW5rczp0cnVlLGVuYWJsZUZvbnQ6dHJ1ZSxjcmVhdGVMaW5rVGV4dDoiUGxlYXNlIGVudGVyIHRoZSBVUkwgZm9yIHRoZSBsaW5rOiIsZGVmYXVsdExpbmtWYWx1ZToiaHR0cDovLyIsZm9udEZhbWlsaWVzOlsiQXJpYWwiLCJDb3VyaWVyIE5ldyIsIlRhaG9tYSIsIlRpbWVzIE5ldyBSb21hbiIsIlZlcmRhbmEiXSxkZWZhdWx0Rm9udDoidGFob21hIixkZWZhdWx0VmFsdWU6KEV4dC5pc09wZXJhfHxFeHQuaXNJRTYpPyImIzE2MDsiOiImIzgyMDM7IixlZGl0b3JXcmFwQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJodG1sLWVkaXRvci13cmFwIixjb21wb25lbnRMYXlvdXQ6Imh0bWxlZGl0b3IiLGluaXRpYWxpemVkOmZhbHNlLGFjdGl2YXRlZDpmYWxzZSxzb3VyY2VFZGl0TW9kZTpmYWxzZSxpZnJhbWVQYWQ6MyxoaWRlTW9kZToib2Zmc2V0cyIsYWZ0ZXJCb2R5RWw6IjwvZGl2PiIsbWFza09uRGlzYWJsZTp0cnVlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuYWRkRXZlbnRzKCJpbml0aWFsaXplIiwiYWN0aXZhdGUiLCJiZWZvcmVzeW5jIiwiYmVmb3JlcHVzaCIsInN5bmMiLCJwdXNoIiwiZWRpdG1vZGVjaGFuZ2UiKTthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLmNyZWF0ZVRvb2xiYXIoYSk7YS5pbml0TGFiZWxhYmxlKCk7YS5pbml0RmllbGQoKX0sZ2V0UmVmSXRlbXM6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy50b29sYmFyXX0sY3JlYXRlVG9vbGJhcjpmdW5jdGlvbihnKXt2YXIgaj10aGlzLGg9W10sYyxsPUV4dC50aXAuUXVpY2tUaXBNYW5hZ2VyJiZFeHQudGlwLlF1aWNrVGlwTWFuYWdlci5pc0VuYWJsZWQoKSxlPUV4dC5iYXNlQ1NTUHJlZml4LGQsayxiO2Z1bmN0aW9uIGEobixpLG0pe3JldHVybntpdGVtSWQ6bixjbHM6ZSsiYnRuLWljb24iLGljb25DbHM6ZSsiZWRpdC0iK24sZW5hYmxlVG9nZ2xlOmkhPT1mYWxzZSxzY29wZTpnLGhhbmRsZXI6bXx8Zy5yZWxheUJ0bkNtZCxjbGlja0V2ZW50OiJtb3VzZWRvd24iLHRvb2x0aXA6bD9nLmJ1dHRvblRpcHNbbl18fGI6YixvdmVyZmxvd1RleHQ6Zy5idXR0b25UaXBzW25dLnRpdGxlfHxiLHRhYkluZGV4Oi0xfX1pZihqLmVuYWJsZUZvbnQmJiFFeHQuaXNTYWZhcmkyKXtkPUV4dC53aWRnZXQoImNvbXBvbmVudCIse3JlbmRlclRwbDpbJzxzZWxlY3QgaWQ9IntpZH0tc2VsZWN0RWwiIGNsYXNzPSJ7Y2xzfSI+JywnPHRwbCBmb3I9ImZvbnRzIj4nLCc8b3B0aW9uIHZhbHVlPSJ7W3ZhbHVlcy50b0xvd2VyQ2FzZSgpXX0iIHN0eWxlPSJmb250LWZhbWlseTp7Ln0iPHRwbCBpZj0idmFsdWVzLnRvTG93ZXJDYXNlKCk9PXBhcmVudC5kZWZhdWx0Rm9udCI+IHNlbGVjdGVkPC90cGw+PnsufTwvb3B0aW9uPicsIjwvdHBsPiIsIjwvc2VsZWN0PiJdLHJlbmRlckRhdGE6e2NsczplKyJmb250LXNlbGVjdCIsZm9udHM6ai5mb250RmFtaWxpZXMsZGVmYXVsdEZvbnQ6ai5kZWZhdWx0Rm9udH0sY2hpbGRFbHM6WyJzZWxlY3RFbCJdLGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7ai5mb250U2VsZWN0PXRoaXMuc2VsZWN0RWw7RXh0LkNvbXBvbmVudC5wcm90b3R5cGUuYWZ0ZXJSZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxvbkRpc2FibGU6ZnVuY3Rpb24oKXt2YXIgaT10aGlzLnNlbGVjdEVsO2lmKGkpe2kuZG9tLmRpc2FibGVkPXRydWV9RXh0LkNvbXBvbmVudC5wcm90b3R5cGUub25EaXNhYmxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb25FbmFibGU6ZnVuY3Rpb24oKXt2YXIgaT10aGlzLnNlbGVjdEVsO2lmKGkpe2kuZG9tLmRpc2FibGVkPWZhbHNlfUV4dC5Db21wb25lbnQucHJvdG90eXBlLm9uRW5hYmxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbGlzdGVuZXJzOntjaGFuZ2U6ZnVuY3Rpb24oKXtqLnJlbGF5Q21kKCJmb250bmFtZSIsai5mb250U2VsZWN0LmRvbS52YWx1ZSk7ai5kZWZlckZvY3VzKCl9LGVsZW1lbnQ6InNlbGVjdEVsIn19KTtoLnB1c2goZCwiLSIpfWlmKGouZW5hYmxlRm9ybWF0KXtoLnB1c2goYSgiYm9sZCIpLGEoIml0YWxpYyIpLGEoInVuZGVybGluZSIpKX1pZihqLmVuYWJsZUZvbnRTaXplKXtoLnB1c2goIi0iLGEoImluY3JlYXNlZm9udHNpemUiLGZhbHNlLGouYWRqdXN0Rm9udCksYSgiZGVjcmVhc2Vmb250c2l6ZSIsZmFsc2Usai5hZGp1c3RGb250KSl9aWYoai5lbmFibGVDb2xvcnMpe2gucHVzaCgiLSIse2l0ZW1JZDoiZm9yZWNvbG9yIixjbHM6ZSsiYnRuLWljb24iLGljb25DbHM6ZSsiZWRpdC1mb3JlY29sb3IiLG92ZXJmbG93VGV4dDpnLmJ1dHRvblRpcHMuZm9yZWNvbG9yLnRpdGxlLHRvb2x0aXA6bD9nLmJ1dHRvblRpcHMuZm9yZWNvbG9yfHxiOmIsdGFiSW5kZXg6LTEsbWVudTpFeHQud2lkZ2V0KCJtZW51Iix7cGxhaW46dHJ1ZSxpdGVtczpbe3h0eXBlOiJjb2xvcnBpY2tlciIsYWxsb3dSZXNlbGVjdDp0cnVlLGZvY3VzOkV4dC5lbXB0eUZuLHZhbHVlOiIwMDAwMDAiLHBsYWluOnRydWUsY2xpY2tFdmVudDoibW91c2Vkb3duIixoYW5kbGVyOmZ1bmN0aW9uKG0saSl7ai5leGVjQ21kKCJmb3JlY29sb3IiLEV4dC5pc1dlYktpdHx8RXh0LmlzSUU/IiMiK2k6aSk7ai5kZWZlckZvY3VzKCk7dGhpcy51cCgibWVudSIpLmhpZGUoKX19XX0pfSx7aXRlbUlkOiJiYWNrY29sb3IiLGNsczplKyJidG4taWNvbiIsaWNvbkNsczplKyJlZGl0LWJhY2tjb2xvciIsb3ZlcmZsb3dUZXh0OmcuYnV0dG9uVGlwcy5iYWNrY29sb3IudGl0bGUsdG9vbHRpcDpsP2cuYnV0dG9uVGlwcy5iYWNrY29sb3J8fGI6Yix0YWJJbmRleDotMSxtZW51OkV4dC53aWRnZXQoIm1lbnUiLHtwbGFpbjp0cnVlLGl0ZW1zOlt7eHR5cGU6ImNvbG9ycGlja2VyIixmb2N1czpFeHQuZW1wdHlGbix2YWx1ZToiRkZGRkZGIixwbGFpbjp0cnVlLGFsbG93UmVzZWxlY3Q6dHJ1ZSxjbGlja0V2ZW50OiJtb3VzZWRvd24iLGhhbmRsZXI6ZnVuY3Rpb24obSxpKXtpZihFeHQuaXNHZWNrbyl7ai5leGVjQ21kKCJ1c2VDU1MiLGZhbHNlKTtqLmV4ZWNDbWQoImhpbGl0ZWNvbG9yIixpKTtqLmV4ZWNDbWQoInVzZUNTUyIsdHJ1ZSk7ai5kZWZlckZvY3VzKCl9ZWxzZXtqLmV4ZWNDbWQoRXh0LmlzT3BlcmE/ImhpbGl0ZWNvbG9yIjoiYmFja2NvbG9yIixFeHQuaXNXZWJLaXR8fEV4dC5pc0lFPyIjIitpOmkpO2ouZGVmZXJGb2N1cygpfXRoaXMudXAoIm1lbnUiKS5oaWRlKCl9fV19KX0pfWlmKGouZW5hYmxlQWxpZ25tZW50cyl7aC5wdXNoKCItIixhKCJqdXN0aWZ5bGVmdCIpLGEoImp1c3RpZnljZW50ZXIiKSxhKCJqdXN0aWZ5cmlnaHQiKSl9aWYoIUV4dC5pc1NhZmFyaTIpe2lmKGouZW5hYmxlTGlua3Mpe2gucHVzaCgiLSIsYSgiY3JlYXRlbGluayIsZmFsc2Usai5jcmVhdGVMaW5rKSl9aWYoai5lbmFibGVMaXN0cyl7aC5wdXNoKCItIixhKCJpbnNlcnRvcmRlcmVkbGlzdCIpLGEoImluc2VydHVub3JkZXJlZGxpc3QiKSl9aWYoai5lbmFibGVTb3VyY2VFZGl0KXtoLnB1c2goIi0iLGEoInNvdXJjZWVkaXQiLHRydWUsZnVuY3Rpb24oaSl7ai50b2dnbGVTb3VyY2VFZGl0KCFqLnNvdXJjZUVkaXRNb2RlKX0pKX19Zm9yKGM9MDtjPGgubGVuZ3RoO2MrKyl7aWYoaFtjXS5pdGVtSWQhPT0ic291cmNlZWRpdCIpe2hbY10uZGlzYWJsZWQ9dHJ1ZX19az1FeHQud2lkZ2V0KCJ0b29sYmFyIix7aWQ6ai5pZCsiLXRvb2xiYXIiLG93bmVyQ3Q6aixjbHM6RXh0LmJhc2VDU1NQcmVmaXgrImh0bWwtZWRpdG9yLXRiIixlbmFibGVPdmVyZmxvdzp0cnVlLGl0ZW1zOmgsb3duZXJMYXlvdXQ6ai5nZXRDb21wb25lbnRMYXlvdXQoKSxsaXN0ZW5lcnM6e2NsaWNrOmZ1bmN0aW9uKGkpe2kucHJldmVudERlZmF1bHQoKX0sZWxlbWVudDoiZWwifX0pO2oudG9vbGJhcj1rfSxnZXRNYXNrVGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keUVsfSxzZXRSZWFkT25seTpmdW5jdGlvbihlKXt2YXIgZD10aGlzLGM9ZC50ZXh0YXJlYUVsLGI9ZC5pZnJhbWVFbCxhO2QucmVhZE9ubHk9ZTtpZihjKXtjLmRvbS5yZWFkT25seT1lfWlmKGQuaW5pdGlhbGl6ZWQpe2E9ZC5nZXRFZGl0b3JCb2R5KCk7aWYoRXh0LmlzSUUpe2Iuc2V0RGlzcGxheWVkKGZhbHNlKTthLmNvbnRlbnRFZGl0YWJsZT0hZTtiLnNldERpc3BsYXllZCh0cnVlKX1lbHNle2Quc2V0RGVzaWduTW9kZSghZSl9aWYoYSl7YS5zdHlsZS5jdXJzb3I9ZT8iZGVmYXVsdCI6InRleHQifWQuZGlzYWJsZUl0ZW1zKGUpfX0sZ2V0RG9jTWFya3VwOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuaWZyYW1lRWwuZ2V0SGVpZ2h0KCktYi5pZnJhbWVQYWQqMjtyZXR1cm4gRXh0LlN0cmluZy5mb3JtYXQoJzxodG1sPjxoZWFkPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Ym9keXtib3JkZXI6MDttYXJnaW46MDtwYWRkaW5nOnswfXB4O2hlaWdodDp7MX1weDtib3gtc2l6aW5nOiBib3JkZXItYm94OyAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7IC13ZWJraXQtYm94LXNpemluZzogYm9yZGVyLWJveDtjdXJzb3I6dGV4dH08L3N0eWxlPjwvaGVhZD48Ym9keT48L2JvZHk+PC9odG1sPicsYi5pZnJhbWVQYWQsYSl9LGdldEVkaXRvckJvZHk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldERvYygpO3JldHVybiBhLmJvZHl8fGEuZG9jdW1lbnRFbGVtZW50fSxnZXREb2M6ZnVuY3Rpb24oKXtyZXR1cm4oIUV4dC5pc0lFJiZ0aGlzLmlmcmFtZUVsLmRvbS5jb250ZW50RG9jdW1lbnQpfHx0aGlzLmdldFdpbigpLmRvY3VtZW50fSxnZXRXaW46ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmlzSUU/dGhpcy5pZnJhbWVFbC5kb20uY29udGVudFdpbmRvdzp3aW5kb3cuZnJhbWVzW3RoaXMuaWZyYW1lRWwuZG9tLm5hbWVdfSxmaW5pc2hSZW5kZXJDaGlsZHJlbjpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudCgpO3RoaXMudG9vbGJhci5maW5pc2hSZW5kZXIoKX0sb25SZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2EuaW5wdXRFbD1hLmlmcmFtZUVsO2EubW9uaXRvclRhc2s9RXh0LlRhc2tNYW5hZ2VyLnN0YXJ0KHtydW46YS5jaGVja0Rlc2lnbk1vZGUsc2NvcGU6YSxpbnRlcnZhbDoxMDB9KX0saW5pdFJlbmRlclRwbDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoIWEuaGFzT3duUHJvcGVydHkoInJlbmRlclRwbCIpKXthLnJlbmRlclRwbD1hLmdldFRwbCgibGFiZWxhYmxlUmVuZGVyVHBsIil9cmV0dXJuIGEuY2FsbFBhcmVudCgpfSxpbml0UmVuZGVyRGF0YTpmdW5jdGlvbigpe3RoaXMuYmVmb3JlU3ViVHBsPSc8ZGl2IGNsYXNzPSInK3RoaXMuZWRpdG9yV3JhcENscysnIj4nK0V4dC5Eb21IZWxwZXIubWFya3VwKHRoaXMudG9vbGJhci5nZXRSZW5kZXJUcmVlKCkpO3JldHVybiBFeHQuYXBwbHlJZih0aGlzLmNhbGxQYXJlbnQoKSx0aGlzLmdldExhYmVsYWJsZVJlbmRlckRhdGEoKSl9LGdldFN1YlRwbERhdGE6ZnVuY3Rpb24oKXtyZXR1cm57JGNvbXA6dGhpcyxjbXBJZDp0aGlzLmlkLGlkOnRoaXMuZ2V0SW5wdXRJZCgpLHRleHRhcmVhQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJoaWRkZW4iLHZhbHVlOnRoaXMudmFsdWUsaWZyYW1lTmFtZTpFeHQuaWQoKSxpZnJhbWVTcmM6RXh0LlNTTF9TRUNVUkVfVVJMLHNpemU6ImhlaWdodDoxMDBweDt3aWR0aDoxMDAlIn19LGdldFN1YlRwbE1hcmt1cDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFRwbCgiZmllbGRTdWJUcGwiKS5hcHBseSh0aGlzLmdldFN1YlRwbERhdGEoKSl9LGluaXRGcmFtZURvYzpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYyxhO0V4dC5UYXNrTWFuYWdlci5zdG9wKGIubW9uaXRvclRhc2spO2M9Yi5nZXREb2MoKTtiLndpbj1iLmdldFdpbigpO2Mub3BlbigpO2Mud3JpdGUoYi5nZXREb2NNYXJrdXAoKSk7Yy5jbG9zZSgpO2E9e3J1bjpmdW5jdGlvbigpe3ZhciBkPWIuZ2V0RG9jKCk7aWYoZC5ib2R5fHxkLnJlYWR5U3RhdGU9PT0iY29tcGxldGUiKXtFeHQuVGFza01hbmFnZXIuc3RvcChhKTtiLnNldERlc2lnbk1vZGUodHJ1ZSk7RXh0LmRlZmVyKGIuaW5pdEVkaXRvciwxMCxiKX19LGludGVydmFsOjEwLGR1cmF0aW9uOjEwMDAwLHNjb3BlOmJ9O0V4dC5UYXNrTWFuYWdlci5zdGFydChhKX0sY2hlY2tEZXNpZ25Nb2RlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuZ2V0RG9jKCk7aWYoYiYmKCFiLmVkaXRvckluaXRpYWxpemVkfHxhLmdldERlc2lnbk1vZGUoKSE9PSJvbiIpKXthLmluaXRGcmFtZURvYygpfX0sc2V0RGVzaWduTW9kZTpmdW5jdGlvbihjKXt2YXIgYT10aGlzLGI9YS5nZXREb2MoKTtpZihiKXtpZihhLnJlYWRPbmx5KXtjPWZhbHNlfWIuZGVzaWduTW9kZT0oL29ufHRydWUvaSkudGVzdChTdHJpbmcoYykudG9Mb3dlckNhc2UoKSk/Im9uIjoib2ZmIn19LGdldERlc2lnbk1vZGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldERvYygpO3JldHVybiAhYT8iIjpTdHJpbmcoYS5kZXNpZ25Nb2RlKS50b0xvd2VyQ2FzZSgpfSxkaXNhYmxlSXRlbXM6ZnVuY3Rpb24oZCl7dmFyIGI9dGhpcy5nZXRUb29sYmFyKCkuaXRlbXMuaXRlbXMsYyxhPWIubGVuZ3RoLGU7Zm9yKGM9MDtjPGE7YysrKXtlPWJbY107aWYoZS5nZXRJdGVtSWQoKSE9PSJzb3VyY2VlZGl0Iil7ZS5zZXREaXNhYmxlZChkKX19fSx0b2dnbGVTb3VyY2VFZGl0OmZ1bmN0aW9uKGIpe3ZhciBnPXRoaXMsZD1nLmlmcmFtZUVsLGE9Zy50ZXh0YXJlYUVsLGU9RXh0LmJhc2VDU1NQcmVmaXgrImhpZGRlbiIsYz1nLmdldFRvb2xiYXIoKS5nZXRDb21wb25lbnQoInNvdXJjZWVkaXQiKTtpZighRXh0LmlzQm9vbGVhbihiKSl7Yj0hZy5zb3VyY2VFZGl0TW9kZX1nLnNvdXJjZUVkaXRNb2RlPWI7aWYoYy5wcmVzc2VkIT09Yil7Yy50b2dnbGUoYil9aWYoYil7Zy5kaXNhYmxlSXRlbXModHJ1ZSk7Zy5zeW5jVmFsdWUoKTtkLmFkZENscyhlKTthLnJlbW92ZUNscyhlKTthLmRvbS5yZW1vdmVBdHRyaWJ1dGUoInRhYkluZGV4Iik7YS5mb2N1cygpO2cuaW5wdXRFbD1hfWVsc2V7aWYoZy5pbml0aWFsaXplZCl7Zy5kaXNhYmxlSXRlbXMoZy5yZWFkT25seSl9Zy5wdXNoVmFsdWUoKTtkLnJlbW92ZUNscyhlKTthLmFkZENscyhlKTthLmRvbS5zZXRBdHRyaWJ1dGUoInRhYkluZGV4IiwtMSk7Zy5kZWZlckZvY3VzKCk7Zy5pbnB1dEVsPWR9Zy5maXJlRXZlbnQoImVkaXRtb2RlY2hhbmdlIixnLGIpO2cudXBkYXRlTGF5b3V0KCl9LGNyZWF0ZUxpbms6ZnVuY3Rpb24oKXt2YXIgYT1wcm9tcHQodGhpcy5jcmVhdGVMaW5rVGV4dCx0aGlzLmRlZmF1bHRMaW5rVmFsdWUpO2lmKGEmJmEhPT0iaHR0cDovLyIpe3RoaXMucmVsYXlDbWQoImNyZWF0ZWxpbmsiLGEpfX0sY2xlYXJJbnZhbGlkOkV4dC5lbXB0eUZuLHNldFZhbHVlOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLnRleHRhcmVhRWw7Yi5taXhpbnMuZmllbGQuc2V0VmFsdWUuY2FsbChiLGMpO2lmKGM9PT1udWxsfHxjPT09dW5kZWZpbmVkKXtjPSIifWlmKGEpe2EuZG9tLnZhbHVlPWN9Yi5wdXNoVmFsdWUoKTtyZXR1cm4gdGhpc30sY2xlYW5IdG1sOmZ1bmN0aW9uKGEpe2E9U3RyaW5nKGEpO2lmKEV4dC5pc1dlYktpdCl7YT1hLnJlcGxhY2UoL1xzY2xhc3M9Iig/OkFwcGxlLXN0eWxlLXNwYW58a2h0bWwtYmxvY2stcGxhY2Vob2xkZXIpIi9naSwiIil9aWYoYS5jaGFyQ29kZUF0KDApPT09cGFyc2VJbnQodGhpcy5kZWZhdWx0VmFsdWUucmVwbGFjZSgvXEQvZywiIiksMTApKXthPWEuc3Vic3RyaW5nKDEpfXJldHVybiBhfSxzeW5jVmFsdWU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGIsZyxkLGEsYztpZihlLmluaXRpYWxpemVkKXtiPWUuZ2V0RWRpdG9yQm9keSgpO2Q9Yi5pbm5lckhUTUw7aWYoRXh0LmlzV2ViS2l0KXthPWIuZ2V0QXR0cmlidXRlKCJzdHlsZSIpO2M9YS5tYXRjaCgvdGV4dC1hbGlnbjooLio/KTsvaSk7aWYoYyYmY1sxXSl7ZD0nPGRpdiBzdHlsZT0iJytjWzBdKyciPicrZCsiPC9kaXY+In19ZD1lLmNsZWFuSHRtbChkKTtpZihlLmZpcmVFdmVudCgiYmVmb3Jlc3luYyIsZSxkKSE9PWZhbHNlKXtpZihlLnRleHRhcmVhRWwuZG9tLnZhbHVlIT1kKXtlLnRleHRhcmVhRWwuZG9tLnZhbHVlPWQ7Zz10cnVlfWUuZmlyZUV2ZW50KCJzeW5jIixlLGQpO2lmKGcpe2UuY2hlY2tDaGFuZ2UoKX19fX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI7aWYoIWEuc291cmNlRWRpdE1vZGUpe2Euc3luY1ZhbHVlKCl9Yj1hLnJlbmRlcmVkP2EudGV4dGFyZWFFbC5kb20udmFsdWU6YS52YWx1ZTthLnZhbHVlPWI7cmV0dXJuIGJ9LHB1c2hWYWx1ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYTtpZihiLmluaXRpYWxpemVkKXthPWIudGV4dGFyZWFFbC5kb20udmFsdWV8fCIiO2lmKCFiLmFjdGl2YXRlZCYmYS5sZW5ndGg8MSl7YT1iLmRlZmF1bHRWYWx1ZX1pZihiLmZpcmVFdmVudCgiYmVmb3JlcHVzaCIsYixhKSE9PWZhbHNlKXtiLmdldEVkaXRvckJvZHkoKS5pbm5lckhUTUw9YTtpZihFeHQuaXNHZWNrbyl7Yi5zZXREZXNpZ25Nb2RlKGZhbHNlKTtiLnNldERlc2lnbk1vZGUodHJ1ZSl9Yi5maXJlRXZlbnQoInB1c2giLGIsYSl9fX0sZGVmZXJGb2N1czpmdW5jdGlvbigpe3RoaXMuZm9jdXMoZmFsc2UsdHJ1ZSl9LGdldEZvY3VzRWw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS53aW47cmV0dXJuIGImJiFhLnNvdXJjZUVkaXRNb2RlP2I6YS50ZXh0YXJlYUVsfSxpbml0RWRpdG9yOmZ1bmN0aW9uKCl7dHJ5e3ZhciBnPXRoaXMsZD1nLmdldEVkaXRvckJvZHkoKSxiPWcudGV4dGFyZWFFbC5nZXRTdHlsZXMoImZvbnQtc2l6ZSIsImZvbnQtZmFtaWx5IiwiYmFja2dyb3VuZC1pbWFnZSIsImJhY2tncm91bmQtcmVwZWF0IiwiYmFja2dyb3VuZC1jb2xvciIsImNvbG9yIiksaSxjO2JbImJhY2tncm91bmQtYXR0YWNobWVudCJdPSJmaXhlZCI7ZC5iZ1Byb3BlcnRpZXM9ImZpeGVkIjtFeHQuRG9tSGVscGVyLmFwcGx5U3R5bGVzKGQsYik7aT1nLmdldERvYygpO2lmKGkpe3RyeXtFeHQuRXZlbnRNYW5hZ2VyLnJlbW92ZUFsbChpKX1jYXRjaChoKXt9fWM9RXh0LkZ1bmN0aW9uLmJpbmQoZy5vbkVkaXRvckV2ZW50LGcpO0V4dC5FdmVudE1hbmFnZXIub24oaSx7bW91c2Vkb3duOmMsZGJsY2xpY2s6YyxjbGljazpjLGtleXVwOmMsYnVmZmVyOjEwMH0pO2M9Zy5vblJlbGF5ZWRFdmVudDtFeHQuRXZlbnRNYW5hZ2VyLm9uKGkse21vdXNlZG93bjpjLG1vdXNlbW92ZTpjLG1vdXNldXA6YyxjbGljazpjLGRibGNsaWNrOmMsc2NvcGU6Z30pO2lmKEV4dC5pc0dlY2tvKXtFeHQuRXZlbnRNYW5hZ2VyLm9uKGksImtleXByZXNzIixnLmFwcGx5Q29tbWFuZCxnKX1pZihnLmZpeEtleXMpe0V4dC5FdmVudE1hbmFnZXIub24oaSwia2V5ZG93biIsZy5maXhLZXlzLGcpfUV4dC5FdmVudE1hbmFnZXIub24od2luZG93LCJ1bmxvYWQiLGcuYmVmb3JlRGVzdHJveSxnKTtpLmVkaXRvckluaXRpYWxpemVkPXRydWU7Zy5pbml0aWFsaXplZD10cnVlO2cucHVzaFZhbHVlKCk7Zy5zZXRSZWFkT25seShnLnJlYWRPbmx5KTtnLmZpcmVFdmVudCgiaW5pdGlhbGl6ZSIsZyl9Y2F0Y2goYSl7fX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsZD1hLm1vbml0b3JUYXNrLGMsZztpZihkKXtFeHQuVGFza01hbmFnZXIuc3RvcChkKX1pZihhLnJlbmRlcmVkKXt0cnl7Yz1hLmdldERvYygpO2lmKGMpe0V4dC5FdmVudE1hbmFnZXIucmVtb3ZlQWxsKEV4dC5mbHkoYykpO2ZvcihnIGluIGMpe2lmKGMuaGFzT3duUHJvcGVydHkmJmMuaGFzT3duUHJvcGVydHkoZykpe2RlbGV0ZSBjW2ddfX19fWNhdGNoKGIpe31FeHQuZGVzdHJveU1lbWJlcnMoYSwidG9vbGJhciIsImlmcmFtZUVsIiwidGV4dGFyZWFFbCIpfWEuY2FsbFBhcmVudCgpfSxvblJlbGF5ZWRFdmVudDpmdW5jdGlvbihjKXt2YXIgYj10aGlzLmlmcmFtZUVsLGQ9Yi5nZXRYWSgpLGE9Yy5nZXRYWSgpO2MueHk9W2RbMF0rYVswXSxkWzFdK2FbMV1dO2MuaW5qZWN0RXZlbnQoYik7Yy54eT1hfSxvbkZpcnN0Rm9jdXM6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGIsYTtjLmFjdGl2YXRlZD10cnVlO2MuZGlzYWJsZUl0ZW1zKGMucmVhZE9ubHkpO2lmKEV4dC5pc0dlY2tvKXtjLndpbi5mb2N1cygpO2I9Yy53aW4uZ2V0U2VsZWN0aW9uKCk7aWYoIWIuZm9jdXNOb2RlfHxiLmZvY3VzTm9kZS5ub2RlVHlwZSE9PTMpe2E9Yi5nZXRSYW5nZUF0KDApO2Euc2VsZWN0Tm9kZUNvbnRlbnRzKGMuZ2V0RWRpdG9yQm9keSgpKTthLmNvbGxhcHNlKHRydWUpO2MuZGVmZXJGb2N1cygpfXRyeXtjLmV4ZWNDbWQoInVzZUNTUyIsdHJ1ZSk7Yy5leGVjQ21kKCJzdHlsZVdpdGhDU1MiLGZhbHNlKX1jYXRjaChkKXt9fWMuZmlyZUV2ZW50KCJhY3RpdmF0ZSIsYyl9LGFkanVzdEZvbnQ6ZnVuY3Rpb24oZCl7dmFyIGU9ZC5nZXRJdGVtSWQoKT09PSJpbmNyZWFzZWZvbnRzaXplIj8xOi0xLGM9dGhpcy5nZXREb2MoKS5xdWVyeUNvbW1hbmRWYWx1ZSgiRm9udFNpemUiKXx8IjIiLGE9RXh0LmlzU3RyaW5nKGMpJiZjLmluZGV4T2YoInB4IikhPT0tMSxiO2M9cGFyc2VJbnQoYywxMCk7aWYoYSl7aWYoYzw9MTApe2M9MStlfWVsc2V7aWYoYzw9MTMpe2M9MitlfWVsc2V7aWYoYzw9MTYpe2M9MytlfWVsc2V7aWYoYzw9MTgpe2M9NCtlfWVsc2V7aWYoYzw9MjQpe2M9NStlfWVsc2V7Yz02K2V9fX19fWM9RXh0Lk51bWJlci5jb25zdHJhaW4oYywxLDYpfWVsc2V7Yj1FeHQuaXNTYWZhcmk7aWYoYil7ZSo9Mn1jPU1hdGgubWF4KDEsYytlKSsoYj8icHgiOjApfXRoaXMuZXhlY0NtZCgiRm9udFNpemUiLGMpfSxvbkVkaXRvckV2ZW50OmZ1bmN0aW9uKGEpe3RoaXMudXBkYXRlVG9vbGJhcigpfSx1cGRhdGVUb29sYmFyOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxkLGcsYSxjO2lmKGUucmVhZE9ubHkpe3JldHVybn1pZighZS5hY3RpdmF0ZWQpe2Uub25GaXJzdEZvY3VzKCk7cmV0dXJufWQ9ZS5nZXRUb29sYmFyKCkuaXRlbXMubWFwO2c9ZS5nZXREb2MoKTtpZihlLmVuYWJsZUZvbnQmJiFFeHQuaXNTYWZhcmkyKXthPShnLnF1ZXJ5Q29tbWFuZFZhbHVlKCJGb250TmFtZSIpfHxlLmRlZmF1bHRGb250KS50b0xvd2VyQ2FzZSgpO2M9ZS5mb250U2VsZWN0LmRvbTtpZihhIT09Yy52YWx1ZSl7Yy52YWx1ZT1hfX1mdW5jdGlvbiBiKCl7Zm9yKHZhciBrPTAsaD1hcmd1bWVudHMubGVuZ3RoLGo7azxoO2srKyl7aj1hcmd1bWVudHNba107ZFtqXS50b2dnbGUoZy5xdWVyeUNvbW1hbmRTdGF0ZShqKSl9fWlmKGUuZW5hYmxlRm9ybWF0KXtiKCJib2xkIiwiaXRhbGljIiwidW5kZXJsaW5lIil9aWYoZS5lbmFibGVBbGlnbm1lbnRzKXtiKCJqdXN0aWZ5bGVmdCIsImp1c3RpZnljZW50ZXIiLCJqdXN0aWZ5cmlnaHQiKX1pZighRXh0LmlzU2FmYXJpMiYmZS5lbmFibGVMaXN0cyl7YigiaW5zZXJ0b3JkZXJlZGxpc3QiLCJpbnNlcnR1bm9yZGVyZWRsaXN0Iil9RXh0Lm1lbnUuTWFuYWdlci5oaWRlQWxsKCk7ZS5zeW5jVmFsdWUoKX0scmVsYXlCdG5DbWQ6ZnVuY3Rpb24oYSl7dGhpcy5yZWxheUNtZChhLmdldEl0ZW1JZCgpKX0scmVsYXlDbWQ6ZnVuY3Rpb24oYixhKXtFeHQuZGVmZXIoZnVuY3Rpb24oKXt2YXIgYz10aGlzO2MuZm9jdXMoKTtjLmV4ZWNDbWQoYixhKTtjLnVwZGF0ZVRvb2xiYXIoKX0sMTAsdGhpcyl9LGV4ZWNDbWQ6ZnVuY3Rpb24oZCxjKXt2YXIgYj10aGlzLGU9Yi5nZXREb2MoKSxhO2UuZXhlY0NvbW1hbmQoZCxmYWxzZSxjPT09YT9udWxsOmMpO2Iuc3luY1ZhbHVlKCl9LGFwcGx5Q29tbWFuZDpmdW5jdGlvbihkKXtpZihkLmN0cmxLZXkpe3ZhciBhPXRoaXMsZz1kLmdldENoYXJDb2RlKCksYjtpZihnPjApe2c9U3RyaW5nLmZyb21DaGFyQ29kZShnKTtzd2l0Y2goZyl7Y2FzZSJiIjpiPSJib2xkIjticmVhaztjYXNlImkiOmI9Iml0YWxpYyI7YnJlYWs7Y2FzZSJ1IjpiPSJ1bmRlcmxpbmUiO2JyZWFrfWlmKGIpe2Eud2luLmZvY3VzKCk7YS5leGVjQ21kKGIpO2EuZGVmZXJGb2N1cygpO2QucHJldmVudERlZmF1bHQoKX19fX0saW5zZXJ0QXRDdXJzb3I6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhO2lmKGIuYWN0aXZhdGVkKXtiLndpbi5mb2N1cygpO2lmKEV4dC5pc0lFKXthPWIuZ2V0RG9jKCkuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7aWYoYSl7YS5wYXN0ZUhUTUwoYyk7Yi5zeW5jVmFsdWUoKTtiLmRlZmVyRm9jdXMoKX19ZWxzZXtiLmV4ZWNDbWQoIkluc2VydEhUTUwiLGMpO2IuZGVmZXJGb2N1cygpfX19LGZpeEtleXM6KGZ1bmN0aW9uKCl7aWYoRXh0LmlzSUUpe3JldHVybiBmdW5jdGlvbihoKXt2YXIgYz10aGlzLGI9aC5nZXRLZXkoKSxnPWMuZ2V0RG9jKCksaT1jLnJlYWRPbmx5LGEsZDtpZihiPT09aC5UQUIpe2guc3RvcEV2ZW50KCk7aWYoIWkpe2E9Zy5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtpZihhKXthLmNvbGxhcHNlKHRydWUpO2EucGFzdGVIVE1MKCImIzE2MDsmIzE2MDsmIzE2MDsmIzE2MDsiKTtjLmRlZmVyRm9jdXMoKX19fWVsc2V7aWYoYj09PWguRU5URVIpe2lmKCFpKXthPWcuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7aWYoYSl7ZD1hLnBhcmVudEVsZW1lbnQoKTtpZighZHx8ZC50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPT0ibGkiKXtoLnN0b3BFdmVudCgpO2EucGFzdGVIVE1MKCI8YnIgLz4iKTthLmNvbGxhcHNlKGZhbHNlKTthLnNlbGVjdCgpfX19fX19fWlmKEV4dC5pc09wZXJhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZihiLmdldEtleSgpPT09Yi5UQUIpe2Iuc3RvcEV2ZW50KCk7aWYoIWEucmVhZE9ubHkpe2Eud2luLmZvY3VzKCk7YS5leGVjQ21kKCJJbnNlcnRIVE1MIiwiJiMxNjA7JiMxNjA7JiMxNjA7JiMxNjA7Iik7YS5kZWZlckZvY3VzKCl9fX19aWYoRXh0LmlzV2ViS2l0KXtyZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhPWMuZ2V0S2V5KCksZD1iLnJlYWRPbmx5O2lmKGE9PT1jLlRBQil7Yy5zdG9wRXZlbnQoKTtpZighZCl7Yi5leGVjQ21kKCJJbnNlcnRUZXh0IiwiXHQiKTtiLmRlZmVyRm9jdXMoKX19ZWxzZXtpZihhPT09Yy5FTlRFUil7Yy5zdG9wRXZlbnQoKTtpZighZCl7Yi5leGVjQ21kKCJJbnNlcnRIdG1sIiwiPGJyIC8+PGJyIC8+Iik7Yi5kZWZlckZvY3VzKCl9fX19fXJldHVybiBudWxsfSgpKSxnZXRUb29sYmFyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9vbGJhcn0sYnV0dG9uVGlwczp7Ym9sZDp7dGl0bGU6IkJvbGQgKEN0cmwrQikiLHRleHQ6Ik1ha2UgdGhlIHNlbGVjdGVkIHRleHQgYm9sZC4iLGNsczpFeHQuYmFzZUNTU1ByZWZpeCsiaHRtbC1lZGl0b3ItdGlwIn0saXRhbGljOnt0aXRsZToiSXRhbGljIChDdHJsK0kpIix0ZXh0OiJNYWtlIHRoZSBzZWxlY3RlZCB0ZXh0IGl0YWxpYy4iLGNsczpFeHQuYmFzZUNTU1ByZWZpeCsiaHRtbC1lZGl0b3ItdGlwIn0sdW5kZXJsaW5lOnt0aXRsZToiVW5kZXJsaW5lIChDdHJsK1UpIix0ZXh0OiJVbmRlcmxpbmUgdGhlIHNlbGVjdGVkIHRleHQuIixjbHM6RXh0LmJhc2VDU1NQcmVmaXgrImh0bWwtZWRpdG9yLXRpcCJ9LGluY3JlYXNlZm9udHNpemU6e3RpdGxlOiJHcm93IFRleHQiLHRleHQ6IkluY3JlYXNlIHRoZSBmb250IHNpemUuIixjbHM6RXh0LmJhc2VDU1NQcmVmaXgrImh0bWwtZWRpdG9yLXRpcCJ9LGRlY3JlYXNlZm9udHNpemU6e3RpdGxlOiJTaHJpbmsgVGV4dCIsdGV4dDoiRGVjcmVhc2UgdGhlIGZvbnQgc2l6ZS4iLGNsczpFeHQuYmFzZUNTU1ByZWZpeCsiaHRtbC1lZGl0b3ItdGlwIn0sYmFja2NvbG9yOnt0aXRsZToiVGV4dCBIaWdobGlnaHQgQ29sb3IiLHRleHQ6IkNoYW5nZSB0aGUgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgc2VsZWN0ZWQgdGV4dC4iLGNsczpFeHQuYmFzZUNTU1ByZWZpeCsiaHRtbC1lZGl0b3ItdGlwIn0sZm9yZWNvbG9yOnt0aXRsZToiRm9udCBDb2xvciIsdGV4dDoiQ2hhbmdlIHRoZSBjb2xvciBvZiB0aGUgc2VsZWN0ZWQgdGV4dC4iLGNsczpFeHQuYmFzZUNTU1ByZWZpeCsiaHRtbC1lZGl0b3ItdGlwIn0sanVzdGlmeWxlZnQ6e3RpdGxlOiJBbGlnbiBUZXh0IExlZnQiLHRleHQ6IkFsaWduIHRleHQgdG8gdGhlIGxlZnQuIixjbHM6RXh0LmJhc2VDU1NQcmVmaXgrImh0bWwtZWRpdG9yLXRpcCJ9LGp1c3RpZnljZW50ZXI6e3RpdGxlOiJDZW50ZXIgVGV4dCIsdGV4dDoiQ2VudGVyIHRleHQgaW4gdGhlIGVkaXRvci4iLGNsczpFeHQuYmFzZUNTU1ByZWZpeCsiaHRtbC1lZGl0b3ItdGlwIn0sanVzdGlmeXJpZ2h0Ont0aXRsZToiQWxpZ24gVGV4dCBSaWdodCIsdGV4dDoiQWxpZ24gdGV4dCB0byB0aGUgcmlnaHQuIixjbHM6RXh0LmJhc2VDU1NQcmVmaXgrImh0bWwtZWRpdG9yLXRpcCJ9LGluc2VydHVub3JkZXJlZGxpc3Q6e3RpdGxlOiJCdWxsZXQgTGlzdCIsdGV4dDoiU3RhcnQgYSBidWxsZXRlZCBsaXN0LiIsY2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJodG1sLWVkaXRvci10aXAifSxpbnNlcnRvcmRlcmVkbGlzdDp7dGl0bGU6Ik51bWJlcmVkIExpc3QiLHRleHQ6IlN0YXJ0IGEgbnVtYmVyZWQgbGlzdC4iLGNsczpFeHQuYmFzZUNTU1ByZWZpeCsiaHRtbC1lZGl0b3ItdGlwIn0sY3JlYXRlbGluazp7dGl0bGU6Ikh5cGVybGluayIsdGV4dDoiTWFrZSB0aGUgc2VsZWN0ZWQgdGV4dCBhIGh5cGVybGluay4iLGNsczpFeHQuYmFzZUNTU1ByZWZpeCsiaHRtbC1lZGl0b3ItdGlwIn0sc291cmNlZWRpdDp7dGl0bGU6IlNvdXJjZSBFZGl0Iix0ZXh0OiJTd2l0Y2ggdG8gc291cmNlIGVkaXRpbmcgbW9kZS4iLGNsczpFeHQuYmFzZUNTU1ByZWZpeCsiaHRtbC1lZGl0b3ItdGlwIn19fSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uZmllbGQuUmFkaW8iLHtleHRlbmQ6IkV4dC5mb3JtLmZpZWxkLkNoZWNrYm94IixhbGlhczpbIndpZGdldC5yYWRpb2ZpZWxkIiwid2lkZ2V0LnJhZGlvIl0sYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuZm9ybS5SYWRpbyIscmVxdWlyZXM6WyJFeHQuZm9ybS5SYWRpb01hbmFnZXIiXSxpc1JhZGlvOnRydWUsaW5wdXRUeXBlOiJyYWRpbyIsYXJpYVJvbGU6InJhZGlvIixmb3JtSWQ6bnVsbCxnZXRHcm91cFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRNYW5hZ2VyKCkuZ2V0Q2hlY2tlZCh0aGlzLm5hbWUsdGhpcy5nZXRGb3JtSWQoKSk7cmV0dXJuIGE/YS5pbnB1dFZhbHVlOm51bGx9LG9uQm94Q2xpY2s6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZighYS5kaXNhYmxlZCYmIWEucmVhZE9ubHkpe3RoaXMuc2V0VmFsdWUodHJ1ZSl9fSxvblJlbW92ZWQ6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLmZvcm1JZD1udWxsfSxzZXRWYWx1ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM7aWYoRXh0LmlzQm9vbGVhbihhKSl7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyl9ZWxzZXtjPWIuZ2V0TWFuYWdlcigpLmdldFdpdGhWYWx1ZShiLm5hbWUsYSxiLmdldEZvcm1JZCgpKS5nZXRBdCgwKTtpZihjKXtjLnNldFZhbHVlKHRydWUpfX1yZXR1cm4gYn0sZ2V0U3VibWl0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGVja2VkP3RoaXMuaW5wdXRWYWx1ZTpudWxsfSxnZXRNb2RlbERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTdWJtaXREYXRhKCl9LG9uQ2hhbmdlOmZ1bmN0aW9uKGMsYSl7dmFyIGc9dGhpcyxlLGQsYixoO2cuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGMpe2g9Zy5nZXRNYW5hZ2VyKCkuZ2V0QnlOYW1lKGcubmFtZSxnLmdldEZvcm1JZCgpKS5pdGVtcztkPWgubGVuZ3RoO2ZvcihlPTA7ZTxkO2UrKyl7Yj1oW2VdO2lmKGIhPT1nKXtiLnNldFZhbHVlKGZhbHNlKX19fX0sZ2V0TWFuYWdlcjpmdW5jdGlvbigpe3JldHVybiBFeHQuZm9ybS5SYWRpb01hbmFnZXJ9fSk7RXh0LmRlZmluZSgiRXh0LnBpY2tlci5UaW1lIix7ZXh0ZW5kOiJFeHQudmlldy5Cb3VuZExpc3QiLGFsaWFzOiJ3aWRnZXQudGltZXBpY2tlciIscmVxdWlyZXM6WyJFeHQuZGF0YS5TdG9yZSIsIkV4dC5EYXRlIl0saW5jcmVtZW50OjE1LGZvcm1hdDoiZzppIEEiLGRpc3BsYXlGaWVsZDoiZGlzcCIsaW5pdERhdGU6WzIwMDgsMCwxXSxjb21wb25lbnRDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInRpbWVwaWNrZXIiLGxvYWRNYXNrOmZhbHNlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGE9RXh0LkRhdGUsYj1hLmNsZWFyVGltZSxkPWMuaW5pdERhdGU7Yy5hYnNNaW49YihuZXcgRGF0ZShkWzBdLGRbMV0sZFsyXSkpO2MuYWJzTWF4PWEuYWRkKGIobmV3IERhdGUoZFswXSxkWzFdLGRbMl0pKSwibWkiLCgyNCo2MCktMSk7Yy5zdG9yZT1jLmNyZWF0ZVN0b3JlKCk7Yy51cGRhdGVMaXN0KCk7Yy5jYWxsUGFyZW50KCl9LHNldE1pblZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMubWluVmFsdWU9YTt0aGlzLnVwZGF0ZUxpc3QoKX0sc2V0TWF4VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5tYXhWYWx1ZT1hO3RoaXMudXBkYXRlTGlzdCgpfSxub3JtYWxpemVEYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW5pdERhdGU7YS5zZXRGdWxsWWVhcihiWzBdLGJbMV0sYlsyXSk7cmV0dXJuIGF9LHVwZGF0ZUxpc3Q6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9Yy5ub3JtYWxpemVEYXRlKGMubWluVmFsdWV8fGMuYWJzTWluKSxhPWMubm9ybWFsaXplRGF0ZShjLm1heFZhbHVlfHxjLmFic01heCk7Yy5zdG9yZS5maWx0ZXJCeShmdW5jdGlvbihkKXt2YXIgZT1kLmdldCgiZGF0ZSIpO3JldHVybiBlPj1iJiZlPD1hfSl9LGNyZWF0ZVN0b3JlOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxjPUV4dC5EYXRlLGU9W10sYj1kLmFic01pbixhPWQuYWJzTWF4O3doaWxlKGI8PWEpe2UucHVzaCh7ZGlzcDpjLmRhdGVGb3JtYXQoYixkLmZvcm1hdCksZGF0ZTpifSk7Yj1jLmFkZChiLCJtaSIsZC5pbmNyZW1lbnQpfXJldHVybiBuZXcgRXh0LmRhdGEuU3RvcmUoe2ZpZWxkczpbImRpc3AiLCJkYXRlIl0sZGF0YTplfSl9fSk7RXh0LmRlZmluZSgiRXh0LmZvcm0uZmllbGQuVGltZSIse2V4dGVuZDoiRXh0LmZvcm0uZmllbGQuQ29tYm9Cb3giLGFsaWFzOiJ3aWRnZXQudGltZWZpZWxkIixyZXF1aXJlczpbIkV4dC5mb3JtLmZpZWxkLkRhdGUiLCJFeHQucGlja2VyLlRpbWUiLCJFeHQudmlldy5Cb3VuZExpc3RLZXlOYXYiLCJFeHQuRGF0ZSJdLGFsdGVybmF0ZUNsYXNzTmFtZTpbIkV4dC5mb3JtLlRpbWVGaWVsZCIsIkV4dC5mb3JtLlRpbWUiXSx0cmlnZ2VyQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJmb3JtLXRpbWUtdHJpZ2dlciIsbWluVGV4dDoiVGhlIHRpbWUgaW4gdGhpcyBmaWVsZCBtdXN0IGJlIGVxdWFsIHRvIG9yIGFmdGVyIHswfSIsbWF4VGV4dDoiVGhlIHRpbWUgaW4gdGhpcyBmaWVsZCBtdXN0IGJlIGVxdWFsIHRvIG9yIGJlZm9yZSB7MH0iLGludmFsaWRUZXh0OiJ7MH0gaXMgbm90IGEgdmFsaWQgdGltZSIsZm9ybWF0OiJnOmkgQSIsYWx0Rm9ybWF0czoiZzppYXxnOmlBfGc6aSBhfGc6aSBBfGg6aXxnOml8SDppfGdhfGhhfGdBfGggYXxnIGF8ZyBBfGdpfGhpfGdpYXxoaWF8Z3xIfGdpIGF8aGkgYXxnaUF8aGlBfGdpIEF8aGkgQSIsaW5jcmVtZW50OjE1LHBpY2tlck1heEhlaWdodDozMDAsc2VsZWN0T25UYWI6dHJ1ZSxzbmFwVG9JbmNyZW1lbnQ6ZmFsc2UsaW5pdERhdGU6IjEvMS8yMDA4Iixpbml0RGF0ZUZvcm1hdDoiai9uL1kiLGlnbm9yZVNlbGVjdGlvbjowLHF1ZXJ5TW9kZToibG9jYWwiLGRpc3BsYXlGaWVsZDoiZGlzcCIsdmFsdWVGaWVsZDoiZGF0ZSIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYj1jLm1pblZhbHVlLGE9Yy5tYXhWYWx1ZTtpZihiKXtjLnNldE1pblZhbHVlKGIpfWlmKGEpe2Muc2V0TWF4VmFsdWUoYSl9Yy5kaXNwbGF5VHBsPW5ldyBFeHQuWFRlbXBsYXRlKCc8dHBsIGZvcj0iLiI+e1t0eXBlb2YgdmFsdWVzID09PSAic3RyaW5nIiA/IHZhbHVlcyA6IHRoaXMuZm9ybWF0RGF0ZSh2YWx1ZXNbIicrYy5kaXNwbGF5RmllbGQrJyJdKV19PHRwbCBpZj0ieGluZGV4IDwgeGNvdW50Ij4nK2MuZGVsaW1pdGVyKyI8L3RwbD48L3RwbD4iLHtmb3JtYXREYXRlOkV4dC5GdW5jdGlvbi5iaW5kKGMuZm9ybWF0RGF0ZSxjKX0pO3RoaXMuY2FsbFBhcmVudCgpfSx0cmFuc2Zvcm1PcmlnaW5hbFZhbHVlOmZ1bmN0aW9uKGEpe2lmKEV4dC5pc1N0cmluZyhhKSl7cmV0dXJuIHRoaXMucmF3VG9WYWx1ZShhKX1yZXR1cm4gYX0saXNFcXVhbDpmdW5jdGlvbihiLGEpe3JldHVybiBFeHQuRGF0ZS5pc0VxdWFsKGIsYSl9LHNldE1pblZhbHVlOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLnBpY2tlcjtiLnNldExpbWl0KGMsdHJ1ZSk7aWYoYSl7YS5zZXRNaW5WYWx1ZShiLm1pblZhbHVlKX19LHNldE1heFZhbHVlOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLnBpY2tlcjtiLnNldExpbWl0KGMsZmFsc2UpO2lmKGEpe2Euc2V0TWF4VmFsdWUoYi5tYXhWYWx1ZSl9fSxzZXRMaW1pdDpmdW5jdGlvbihiLGcpe3ZhciBhPXRoaXMsZSxjO2lmKEV4dC5pc1N0cmluZyhiKSl7ZT1hLnBhcnNlRGF0ZShiKX1lbHNle2lmKEV4dC5pc0RhdGUoYikpe2U9Yn19aWYoZSl7Yz1FeHQuRGF0ZS5jbGVhclRpbWUobmV3IERhdGUoYS5pbml0RGF0ZSkpO2Muc2V0SG91cnMoZS5nZXRIb3VycygpLGUuZ2V0TWludXRlcygpLGUuZ2V0U2Vjb25kcygpLGUuZ2V0TWlsbGlzZWNvbmRzKCkpfWVsc2V7Yz1udWxsfWFbZz8ibWluVmFsdWUiOiJtYXhWYWx1ZSJdPWN9LHJhd1RvVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucGFyc2VEYXRlKGEpfHxhfHxudWxsfSx2YWx1ZVRvUmF3OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmZvcm1hdERhdGUodGhpcy5wYXJzZURhdGUoYSkpfSxnZXRFcnJvcnM6ZnVuY3Rpb24oZCl7dmFyIGI9dGhpcyxnPUV4dC5TdHJpbmcuZm9ybWF0LGg9Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyksYz1iLm1pblZhbHVlLGU9Yi5tYXhWYWx1ZSxhO2Q9Yi5mb3JtYXREYXRlKGR8fGIucHJvY2Vzc1Jhd1ZhbHVlKGIuZ2V0UmF3VmFsdWUoKSkpO2lmKGQ9PT1udWxsfHxkLmxlbmd0aDwxKXtyZXR1cm4gaH1hPWIucGFyc2VEYXRlKGQpO2lmKCFhKXtoLnB1c2goZyhiLmludmFsaWRUZXh0LGQsRXh0LkRhdGUudW5lc2NhcGVGb3JtYXQoYi5mb3JtYXQpKSk7cmV0dXJuIGh9aWYoYyYmYTxjKXtoLnB1c2goZyhiLm1pblRleHQsYi5mb3JtYXREYXRlKGMpKSl9aWYoZSYmYT5lKXtoLnB1c2goZyhiLm1heFRleHQsYi5mb3JtYXREYXRlKGUpKSl9cmV0dXJuIGh9LGZvcm1hdERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmZvcm0uZmllbGQuRGF0ZS5wcm90b3R5cGUuZm9ybWF0RGF0ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHBhcnNlRGF0ZTpmdW5jdGlvbihlKXt2YXIgZD10aGlzLGg9ZSxiPWQuYWx0Rm9ybWF0cyxnPWQuYWx0Rm9ybWF0c0FycmF5LGM9MCxhO2lmKGUmJiFFeHQuaXNEYXRlKGUpKXtoPWQuc2FmZVBhcnNlKGUsZC5mb3JtYXQpO2lmKCFoJiZiKXtnPWd8fGIuc3BsaXQoInwiKTthPWcubGVuZ3RoO2Zvcig7YzxhJiYhaDsrK2Mpe2g9ZC5zYWZlUGFyc2UoZSxnW2NdKX19fWlmKGgmJmQuc25hcFRvSW5jcmVtZW50KXtoPW5ldyBEYXRlKEV4dC5OdW1iZXIuc25hcChoLmdldFRpbWUoKSxkLmluY3JlbWVudCo2MCoxMDAwKSl9cmV0dXJuIGh9LHNhZmVQYXJzZTpmdW5jdGlvbihlLGcpe3ZhciBkPXRoaXMsYj1FeHQuRGF0ZSxjLGE9bnVsbDtpZihiLmZvcm1hdENvbnRhaW5zRGF0ZUluZm8oZykpe2E9Yi5wYXJzZShlLGcpfWVsc2V7Yz1iLnBhcnNlKGQuaW5pdERhdGUrIiAiK2UsZC5pbml0RGF0ZUZvcm1hdCsiICIrZyk7aWYoYyl7YT1jfX1yZXR1cm4gYX0sZ2V0U3VibWl0VmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGM9YS5zdWJtaXRGb3JtYXR8fGEuZm9ybWF0LGI9YS5nZXRWYWx1ZSgpO3JldHVybiBiP0V4dC5EYXRlLmZvcm1hdChiLGMpOm51bGx9LGNyZWF0ZVBpY2tlcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYTtiLmxpc3RDb25maWc9RXh0LmFwcGx5KHt4dHlwZToidGltZXBpY2tlciIsc2VsTW9kZWw6e21vZGU6IlNJTkdMRSJ9LGNsczp1bmRlZmluZWQsbWluVmFsdWU6Yi5taW5WYWx1ZSxtYXhWYWx1ZTpiLm1heFZhbHVlLGluY3JlbWVudDpiLmluY3JlbWVudCxmb3JtYXQ6Yi5mb3JtYXQsbWF4SGVpZ2h0OmIucGlja2VyTWF4SGVpZ2h0fSxiLmxpc3RDb25maWcpO2E9Yi5jYWxsUGFyZW50KCk7Yi5zdG9yZT1hLnN0b3JlO3JldHVybiBhfSxvbkl0ZW1DbGljazpmdW5jdGlvbihiLGEpe3ZhciBkPXRoaXMsYz1iLmdldFNlbGVjdGlvbk1vZGVsKCkuZ2V0U2VsZWN0aW9uKCk7aWYoYy5sZW5ndGg+MCl7Yz1jWzBdO2lmKGMmJkV4dC5EYXRlLmlzRXF1YWwoYS5nZXQoImRhdGUiKSxjLmdldCgiZGF0ZSIpKSl7ZC5jb2xsYXBzZSgpfX19LG9uTGlzdFNlbGVjdGlvbkNoYW5nZTpmdW5jdGlvbihjLGUpe3ZhciBiPXRoaXMsYT1lWzBdLGQ9YT9hLmdldCgiZGF0ZSIpOm51bGw7aWYoIWIuaWdub3JlU2VsZWN0aW9uKXtiLnNraXBTeW5jPXRydWU7Yi5zZXRWYWx1ZShkKTtiLnNraXBTeW5jPWZhbHNlO2IuZmlyZUV2ZW50KCJzZWxlY3QiLGIsZCk7Yi5waWNrZXIuY2xlYXJIaWdobGlnaHQoKTtiLmNvbGxhcHNlKCk7Yi5pbnB1dEVsLmZvY3VzKCl9fSxzeW5jU2VsZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGo9dGhpcyxoPWoucGlja2VyLGMsZyxrLGIsaSxlLGE7aWYoaCYmIWouc2tpcFN5bmMpe2guY2xlYXJIaWdobGlnaHQoKTtrPWouZ2V0VmFsdWUoKTtnPWguZ2V0U2VsZWN0aW9uTW9kZWwoKTtqLmlnbm9yZVNlbGVjdGlvbisrO2lmKGs9PT1udWxsKXtnLmRlc2VsZWN0QWxsKCl9ZWxzZXtpZihFeHQuaXNEYXRlKGspKXtiPWguc3RvcmUuZGF0YS5pdGVtcztlPWIubGVuZ3RoO2ZvcihpPTA7aTxlO2krKyl7YT1iW2ldO2lmKEV4dC5EYXRlLmlzRXF1YWwoYS5nZXQoImRhdGUiKSxrKSl7Yz1hO2JyZWFrfX1nLnNlbGVjdChjKX19ai5pZ25vcmVTZWxlY3Rpb24tLX19LHBvc3RCbHVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLnNldFJhd1ZhbHVlKGEuZm9ybWF0RGF0ZShhLmdldFZhbHVlKCkpKX0sc2V0VmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmdldFBpY2tlcigpO3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcnNlRGF0ZSh0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKSl9fSk7RXh0LmRlZmluZSgiRXh0LmdyaWQuQ2VsbEVkaXRvciIse2V4dGVuZDoiRXh0LkVkaXRvciIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7YT1FeHQuYXBwbHkoe30sYSk7aWYoYS5maWVsZCl7YS5maWVsZC5tb25pdG9yVGFiPWZhbHNlfXRoaXMuY2FsbFBhcmVudChbYV0pfSxvblNob3c6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGQ9Yi5ib3VuZEVsLmZpcnN0KCksYSxjO2lmKGQpe2E9ZC5kb20ubGFzdENoaWxkO2lmKGEmJmEubm9kZVR5cGU9PT0zKXtjPWIuY2VsbFRleHROb2RlPWQuZG9tLmxhc3RDaGlsZDtiLmNlbGxUZXh0VmFsdWU9Yy5ub2RlVmFsdWU7Yy5ub2RlVmFsdWU9Ilx1MDBhMCJ9fWIuY2FsbFBhcmVudChhcmd1bWVudHMpfSxvbkhpZGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5ib3VuZEVsLmZpcnN0KCk7aWYoYiYmYS5jZWxsVGV4dE5vZGUpe2EuY2VsbFRleHROb2RlLm5vZGVWYWx1ZT1hLmNlbGxUZXh0VmFsdWU7ZGVsZXRlIGEuY2VsbFRleHROb2RlO2RlbGV0ZSBhLmNlbGxUZXh0VmFsdWV9YS5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuZmllbGQ7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYi5pc1hUeXBlKCJjaGVja2JveGZpZWxkIikpe2IubW9uKGIuaW5wdXRFbCx7bW91c2Vkb3duOmEub25DaGVja0JveE1vdXNlRG93bixjbGljazphLm9uQ2hlY2tCb3hDbGljayxzY29wZTphfSl9fSxvbkNoZWNrQm94TW91c2VEb3duOmZ1bmN0aW9uKCl7dGhpcy5jb21wbGV0ZUVkaXQ9RXh0LmVtcHR5Rm59LG9uQ2hlY2tCb3hDbGljazpmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmNvbXBsZXRlRWRpdDt0aGlzLmZpZWxkLmZvY3VzKGZhbHNlLDEwKX0scmVhbGlnbjpmdW5jdGlvbihlKXt2YXIgaz10aGlzLGg9ay5ib3VuZEVsLGo9aC5maXJzdCgpLGM9ai5kb20uY2hpbGROb2RlcyxnPWMubGVuZ3RoLGQ9RXh0LkFycmF5LmNsb25lKGsub2Zmc2V0cyksbD1rLmZpZWxkLmlucHV0RWwsYixpLG0sYTtpZihrLmlzRm9yVHJlZSYmKGc+MXx8KGc9PT0xJiZjWzBdLm5vZGVUeXBlIT09MykpKXtiPWoubGFzdCgpO2k9Yi5nZXRPZmZzZXRzVG8oailbMF0rYi5nZXRXaWR0aCgpO209ai5nZXRXaWR0aCgpO2E9bS1pO2lmKCFrLmVkaXRpbmdQbHVnaW4uZ3JpZC5jb2x1bW5MaW5lcyl7YS0tfWRbMF0rPWk7ay5hZGRDbHMoRXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtZWRpdG9yLW9uLXRleHQtbm9kZSIpfWVsc2V7YT1oLmdldFdpZHRoKCktMX1pZihlPT09dHJ1ZSl7ay5maWVsZC5zZXRXaWR0aChhKX1rLmFsaWduVG8oaCxrLmFsaWdubWVudCxkKX0sb25FZGl0b3JUYWI6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5maWVsZDtpZihhLm9uRWRpdG9yVGFiKXthLm9uRWRpdG9yVGFiKGIpfX0sYWxpZ25tZW50OiJ0bC10bCIsaGlkZUVsOmZhbHNlLGNsczpFeHQuYmFzZUNTU1ByZWZpeCsic21hbGwtZWRpdG9yICIrRXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtZWRpdG9yIixzaGltOmZhbHNlLHNoYWRvdzpmYWxzZX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLkNvbHVtbkNvbXBvbmVudExheW91dCIse2V4dGVuZDoiRXh0LmxheW91dC5jb21wb25lbnQuQXV0byIsYWxpYXM6ImxheW91dC5jb2x1bW5jb21wb25lbnQiLHR5cGU6ImNvbHVtbmNvbXBvbmVudCIsc2V0V2lkdGhJbkRvbTp0cnVlLGdldENvbnRlbnRIZWlnaHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub3duZXIuaXNHcm91cEhlYWRlcj9hLmdldFByb3AoImNvbnRlbnRIZWlnaHQiKTp0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sY2FsY3VsYXRlT3duZXJIZWlnaHRGcm9tQ29udGVudEhlaWdodDpmdW5jdGlvbihjLGIpe3ZhciBhPXRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKHRoaXMub3duZXIuaXNHcm91cEhlYWRlcil7YSs9dGhpcy5vd25lci50aXRsZUVsLmRvbS5vZmZzZXRIZWlnaHR9cmV0dXJuIGF9LGdldENvbnRlbnRXaWR0aDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vd25lci5pc0dyb3VwSGVhZGVyP2EuZ2V0UHJvcCgiY29udGVudFdpZHRoIik6dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGNhbGN1bGF0ZU93bmVyV2lkdGhGcm9tQ29udGVudFdpZHRoOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIGErYi5nZXRQYWRkaW5nSW5mbygpLndpZHRofX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLkNvbHVtbkxheW91dCIse2V4dGVuZDoiRXh0LmxheW91dC5jb250YWluZXIuSEJveCIsYWxpYXM6ImxheW91dC5ncmlkY29sdW1uIix0eXBlOiJncmlkY29sdW1uIixyZXNlcnZlT2Zmc2V0OmZhbHNlLGZpcnN0SGVhZGVyQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJjb2x1bW4taGVhZGVyLWZpcnN0IixsYXN0SGVhZGVyQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJjb2x1bW4taGVhZGVyLWxhc3QiLGluaXRMYXlvdXQ6ZnVuY3Rpb24oKXt0aGlzLmdyaWQ9dGhpcy5vd25lci51cCgiW3Njcm9sbGVyT3duZXJdIik7dGhpcy5jYWxsUGFyZW50KCl9LGJlZ2luTGF5b3V0OmZ1bmN0aW9uKGope3ZhciBoPXRoaXMsZT1oLmdyaWQsYj1lLnZpZXcsZD0wLGM9aC5nZXRWaXNpYmxlSXRlbXMoKSxhPWMubGVuZ3RoLGc7ai5ncmlkQ29udGV4dD1qLmNvbnRleHQuZ2V0Q21wKGguZ3JpZCk7aWYoZS5sb2NrYWJsZSl7aWYoaC5vd25lci51cCgidGFibGVwYW5lbCIpPT09Yi5ub3JtYWxHcmlkKXtiPWIubm9ybWFsR3JpZC5nZXRWaWV3KCl9ZWxzZXtiPW51bGx9fWguY2FsbFBhcmVudChhcmd1bWVudHMpO2Zvcig7ZDxhO2QrKyl7Zz1jW2RdO2cucmVtb3ZlQ2xzKFtoLmZpcnN0SGVhZGVyQ2xzLGgubGFzdEhlYWRlckNsc10pO2cuZWwuc2V0U3R5bGUoe2hlaWdodDoiYXV0byJ9KTtnLnRpdGxlRWwuc2V0U3R5bGUoe2hlaWdodDoiYXV0byIscGFkZGluZ1RvcDoiIn0pfWlmKGE+MCl7Y1swXS5hZGRDbHMoaC5maXJzdEhlYWRlckNscyk7Y1thLTFdLmFkZENscyhoLmxhc3RIZWFkZXJDbHMpfWlmKCFoLm93bmVyLmlzSGVhZGVyJiZFeHQuZ2V0U2Nyb2xsYmFyU2l6ZSgpLndpZHRoJiYhZS5jb2xsYXBzZWQmJmImJmIudGFibGUuZG9tJiYoYi5hdXRvU2Nyb2xsfHxiLm92ZXJmbG93WSkpe2oudmlld0NvbnRleHQ9ai5jb250ZXh0LmdldENtcChiKX19LHJvdW5kRmxleDpmdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5mbG9vcihhKX0sY2FsY3VsYXRlOmZ1bmN0aW9uKGUpe3ZhciBkPXRoaXMsYz1lLnZpZXdDb250ZXh0LGIsYTtkLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihlLnN0YXRlLnBhcmFsbGVsRG9uZSl7ZS5zZXRQcm9wKCJjb2x1bW5XaWR0aHNEb25lIix0cnVlKX1pZihjJiYhZS5zdGF0ZS5vdmVyZmxvd0FkanVzdC53aWR0aCYmIWUuZ3JpZENvbnRleHQuaGVpZ2h0TW9kZWwuc2hyaW5rV3JhcCl7Yj1jLnRhYmxlQ29udGV4dC5nZXRQcm9wKCJoZWlnaHQiKTthPWMuZ2V0UHJvcCgiaGVpZ2h0Iik7aWYoaXNOYU4oYithKSl7ZC5kb25lPWZhbHNlfWVsc2V7aWYoYj49YSl7ZS5ncmlkQ29udGV4dC5pbnZhbGlkYXRlKHthZnRlcjpmdW5jdGlvbigpe2Uuc3RhdGUub3ZlcmZsb3dBZGp1c3Q9e3dpZHRoOkV4dC5nZXRTY3JvbGxiYXJTaXplKCkud2lkdGgsaGVpZ2h0OjB9fX0pfX19fSxjb21wbGV0ZUxheW91dDpmdW5jdGlvbihjKXt2YXIgaj10aGlzLGI9ai5vd25lcixhPWMuc3RhdGUsZz1mYWxzZSxrPWouc2l6ZU1vZGVscy5jYWxjdWxhdGVkLGUsaCxkLG0sbDtqLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZighYS5mbGV4ZXNDYWxjdWxhdGVkJiZiLmZvcmNlRml0JiYhYi5pc0hlYWRlcil7ZT1jLmNoaWxkSXRlbXM7aD1lLmxlbmd0aDtmb3IoZD0wO2Q8aDtkKyspe209ZVtkXTtsPW0udGFyZ2V0O2lmKGwud2lkdGgpe2wuZmxleD1jLmNoaWxkSXRlbXNbZF0uZmxleD1sLndpZHRoO2RlbGV0ZSBsLndpZHRoO20ud2lkdGhNb2RlbD1rO2c9dHJ1ZX19aWYoZyl7ai5jYWNoZUZsZXhlcyhjKTtjLmludmFsaWRhdGUoe3N0YXRlOntmbGV4ZXNDYWxjdWxhdGVkOnRydWV9fSl9fX0sZmluYWxpemVMYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgZz10aGlzLGU9MCxkLGIsaCxhPWcub3duZXIsYz1hLnRpdGxlRWw7ZD1nLmdldFZpc2libGVJdGVtcygpO2I9ZC5sZW5ndGg7aD1hLmVsLmdldFZpZXdTaXplKCkuaGVpZ2h0O2lmKGMpe2gtPWMuZ2V0SGVpZ2h0KCl9Zm9yKDtlPGI7ZSsrKXtkW2VdLnNldFBhZGRpbmcoaCl9fSxwdWJsaXNoSW5uZXJDdFNpemU6ZnVuY3Rpb24oZSl7dmFyIGQ9dGhpcyxjPWUuc3RhdGUuYm94UGxhbi50YXJnZXRTaXplLGI9ZS5wZWVrKCJjb250ZW50V2lkdGgiKSxhO2lmKChiIT1udWxsKSYmIWQub3duZXIuaXNIZWFkZXIpe2Mud2lkdGg9YjthPWQub3duZXIub3duZXJDdC52aWV3O2lmKGEuYXV0b1Njcm9sbHx8YS5vdmVyZmxvd1kpe2Mud2lkdGgrPUV4dC5nZXRTY3JvbGxiYXJTaXplKCkud2lkdGh9fXJldHVybiBkLmNhbGxQYXJlbnQoYXJndW1lbnRzKX19KTtFeHQuZGVmaW5lKCJFeHQuZ3JpZC5Mb2NraW5nVmlldyIse21peGluczp7b2JzZXJ2YWJsZToiRXh0LnV0aWwuT2JzZXJ2YWJsZSJ9LGV2ZW50UmVsYXlSZTovXihiZWZvcmVpdGVtfGJlZm9yZWNvbnRhaW5lcnxpdGVtfGNvbnRhaW5lcnxjZWxsKS8sY29uc3RydWN0b3I6ZnVuY3Rpb24oYyl7dmFyIGc9dGhpcyxpPVtdLGE9Zy5ldmVudFJlbGF5UmUsYj1jLmxvY2tlZC5nZXRWaWV3KCksaD1jLm5vcm1hbC5nZXRWaWV3KCksZCxlO0V4dC5hcHBseShnLHtsb2NrZWRWaWV3OmIsbm9ybWFsVmlldzpoLGxvY2tlZEdyaWQ6Yy5sb2NrZWQsbm9ybWFsR3JpZDpjLm5vcm1hbCxwYW5lbDpjLnBhbmVsfSk7Zy5taXhpbnMub2JzZXJ2YWJsZS5jb25zdHJ1Y3Rvci5jYWxsKGcsYyk7ZD1iLmV2ZW50cztmb3IoZSBpbiBkKXtpZihkLmhhc093blByb3BlcnR5KGUpJiZhLnRlc3QoZSkpe2kucHVzaChlKX19Zy5yZWxheUV2ZW50cyhiLGkpO2cucmVsYXlFdmVudHMoaCxpKTtoLm9uKHtzY29wZTpnLGl0ZW1tb3VzZWxlYXZlOmcub25JdGVtTW91c2VMZWF2ZSxpdGVtbW91c2VlbnRlcjpnLm9uSXRlbU1vdXNlRW50ZXJ9KTtiLm9uKHtzY29wZTpnLGl0ZW1tb3VzZWxlYXZlOmcub25JdGVtTW91c2VMZWF2ZSxpdGVtbW91c2VlbnRlcjpnLm9uSXRlbU1vdXNlRW50ZXJ9KX0sZ2V0R3JpZENvbHVtbnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxvY2tlZEdyaWQuaGVhZGVyQ3QuZ2V0R3JpZENvbHVtbnMoKTtyZXR1cm4gYS5jb25jYXQodGhpcy5ub3JtYWxHcmlkLmhlYWRlckN0LmdldEdyaWRDb2x1bW5zKCkpfSxnZXRFbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRWaWV3Rm9yQ29sdW1uKGEpLmdldEVsKCl9LGdldFZpZXdGb3JDb2x1bW46ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5sb2NrZWRWaWV3LGM7YS5oZWFkZXJDdC5jYXNjYWRlKGZ1bmN0aW9uKGQpe2lmKGQ9PT1iKXtjPXRydWU7cmV0dXJuIGZhbHNlfX0pO3JldHVybiBjP2E6dGhpcy5ub3JtYWxWaWV3fSxvbkl0ZW1Nb3VzZUVudGVyOmZ1bmN0aW9uKGMsYil7dmFyIGc9dGhpcyxkPWcubG9ja2VkVmlldyxhPWcubm9ybWFsVmlldyxlO2lmKGMudHJhY2tPdmVyKXtpZihjIT09ZCl7YT1kfWU9YS5nZXROb2RlKGIpO2EuaGlnaGxpZ2h0SXRlbShlKX19LG9uSXRlbU1vdXNlTGVhdmU6ZnVuY3Rpb24oYyxiKXt2YXIgZT10aGlzLGQ9ZS5sb2NrZWRWaWV3LGE9ZS5ub3JtYWxWaWV3O2lmKGMudHJhY2tPdmVyKXtpZihjIT09ZCl7YT1kfWEuY2xlYXJIaWdobGlnaHQoKX19LHJlbGF5Rm46ZnVuY3Rpb24oYyxiKXtiPWJ8fFtdO3ZhciBhPXRoaXMubG9ja2VkVmlldzthW2NdLmFwcGx5KGEsYnx8W10pO2E9dGhpcy5ub3JtYWxWaWV3O2FbY10uYXBwbHkoYSxifHxbXSl9LGdldFNlbGVjdGlvbk1vZGVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFuZWwuZ2V0U2VsZWN0aW9uTW9kZWwoKX0sZ2V0U3RvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5lbC5zdG9yZX0sZ2V0Tm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ub3JtYWxWaWV3LmdldE5vZGUoYSl9LGdldENlbGw6ZnVuY3Rpb24oYixjKXt2YXIgYT10aGlzLmdldFZpZXdGb3JDb2x1bW4oYyksZDtkPWEuZ2V0Tm9kZShiKTtyZXR1cm4gRXh0LmZseShkKS5kb3duKGMuZ2V0Q2VsbFNlbGVjdG9yKCkpfSxnZXRSZWNvcmQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5sb2NrZWRWaWV3LmdldFJlY29yZChiKTtpZighYil7YT10aGlzLm5vcm1hbFZpZXcuZ2V0UmVjb3JkKGIpfXJldHVybiBhfSxhZGRFbExpc3RlbmVyOmZ1bmN0aW9uKGEsYyxiKXt0aGlzLnJlbGF5Rm4oImFkZEVsTGlzdGVuZXIiLGFyZ3VtZW50cyl9LHJlZnJlc2hOb2RlOmZ1bmN0aW9uKCl7dGhpcy5yZWxheUZuKCJyZWZyZXNoTm9kZSIsYXJndW1lbnRzKX0scmVmcmVzaDpmdW5jdGlvbigpe3RoaXMucmVsYXlGbigicmVmcmVzaCIsYXJndW1lbnRzKX0sYmluZFN0b3JlOmZ1bmN0aW9uKCl7dGhpcy5yZWxheUZuKCJiaW5kU3RvcmUiLGFyZ3VtZW50cyl9LGFkZFJvd0NsczpmdW5jdGlvbigpe3RoaXMucmVsYXlGbigiYWRkUm93Q2xzIixhcmd1bWVudHMpfSxyZW1vdmVSb3dDbHM6ZnVuY3Rpb24oKXt0aGlzLnJlbGF5Rm4oInJlbW92ZVJvd0NscyIsYXJndW1lbnRzKX19KTtFeHQuZGVmaW5lKCJFeHQudmlldy5UYWJsZUxheW91dCIse2V4dGVuZDoiRXh0LmxheW91dC5jb21wb25lbnQuQXV0byIsYWxpYXM6WyJsYXlvdXQudGFibGV2aWV3Il0sdHlwZToidGFibGV2aWV3IixiZWdpbkxheW91dDpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGEub3duZXIudGFibGUuZG9tKXtiLnRhYmxlQ29udGV4dD1iLmdldEVsKGEub3duZXIudGFibGUpO2IuaGVhZGVyQ29udGV4dD1iLmNvbnRleHQuZ2V0Q21wKGEuaGVhZGVyQ3QpfX0sY2FsY3VsYXRlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYi50YWJsZUNvbnRleHQpe2lmKGIuc3RhdGUuY29sdW1uV2lkdGhzU3luY2VkKXtpZihiLmhhc1Byb3AoImNvbHVtbldpZHRoc0ZsdXNoZWQiKSl7Yi50YWJsZUNvbnRleHQuc2V0SGVpZ2h0KGIudGFibGVDb250ZXh0LmVsLmRvbS5vZmZzZXRIZWlnaHQsZmFsc2UpfWVsc2V7YS5kb25lPWZhbHNlfX1lbHNle2lmKGIuaGVhZGVyQ29udGV4dC5oYXNQcm9wKCJjb2x1bW5XaWR0aHNEb25lIikpe2IuY29udGV4dC5xdWV1ZUZsdXNoKGEpO2Iuc3RhdGUuY29sdW1uV2lkdGhzU3luY2VkPXRydWV9YS5kb25lPWZhbHNlfX19LG1lYXN1cmVDb250ZW50SGVpZ2h0OmZ1bmN0aW9uKGEpe2lmKCFhLmhlYWRlckNvbnRleHR8fGEuaGFzUHJvcCgiY29sdW1uV2lkdGhzRmx1c2hlZCIpKXtyZXR1cm4gdGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9fSxmbHVzaDpmdW5jdGlvbigpe3ZhciBqPXRoaXMsZT1qLm93bmVyQ29udGV4dC5jb250ZXh0LGQ9ai5oZWFkZXJDdC5nZXRHcmlkQ29sdW1ucygpLGM9MCxiPWQubGVuZ3RoLGg9ai5vd25lci5lbCxhPTAsZztlLmN1cnJlbnRMYXlvdXQ9ajtmb3IoYz0wO2M8YjtjKyspe2c9ZFtjXS5oaWRkZW4/MDplLmdldENtcChkW2NdKS5wcm9wcy53aWR0aDthKz1nO2guc2VsZWN0KGouZ2V0Q29sdW1uU2VsZWN0b3IoZFtjXSkpLnNldFdpZHRoKGcpfWguc2VsZWN0KCJ0YWJsZS4iK0V4dC5iYXNlQ1NTUHJlZml4KyJncmlkLXRhYmxlLXJlc2l6ZXIiKS5zZXRXaWR0aChhKTtqLm93bmVyQ29udGV4dC5zZXRQcm9wKCJjb2x1bW5XaWR0aHNGbHVzaGVkIix0cnVlKX0sZmluaXNoZWRMYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoRXh0LmlzR2Vja28pe2I9YS5oZWFkZXJDdC5nZXRHcmlkQ29sdW1ucygpWzBdO2lmKGIpe2I9YS5vd25lci5lbC5kb3duKGEuZ2V0Q29sdW1uU2VsZWN0b3IoYikpO2lmKGIpe2Iuc2V0U3R5bGUoImRpc3BsYXkiLCJub25lIik7Yi5kb20uc2Nyb2xsV2lkdGg7Yi5zZXRTdHlsZSgiZGlzcGxheSIsIiIpfX19fSxnZXRDb2x1bW5TZWxlY3RvcjpmdW5jdGlvbihhKXtyZXR1cm4idGguIitFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1jb2wtcmVzaXplci0iK2EuaWR9fSk7RXh0LmRlZmluZSgiRXh0LnZpZXcuVGFibGUiLHtleHRlbmQ6IkV4dC52aWV3LlZpZXciLGFsaWFzOiJ3aWRnZXQudGFibGV2aWV3Iix1c2VzOlsiRXh0LnZpZXcuVGFibGVMYXlvdXQiLCJFeHQudmlldy5UYWJsZUNodW5rZXIiLCJFeHQudXRpbC5EZWxheWVkVGFzayIsIkV4dC51dGlsLk1peGVkQ29sbGVjdGlvbiJdLGNvbXBvbmVudExheW91dDoidGFibGV2aWV3IixiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLXZpZXciLGl0ZW1TZWxlY3RvcjoidHIuIitFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1yb3ciLGNlbGxTZWxlY3RvcjoidGQuIitFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1jZWxsIixyb3dTZWxlY3RvcjoidHIuIitFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1yb3ciLGZpcnN0Q2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLWNlbGwtZmlyc3QiLGxhc3RDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtY2VsbC1sYXN0IixoZWFkZXJSb3dTZWxlY3RvcjoidHIuIitFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1oZWFkZXItcm93IixzZWxlY3RlZEl0ZW1DbHM6RXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtcm93LXNlbGVjdGVkIixzZWxlY3RlZENlbGxDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtY2VsbC1zZWxlY3RlZCIsZm9jdXNlZEl0ZW1DbHM6RXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtcm93LWZvY3VzZWQiLG92ZXJJdGVtQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLXJvdy1vdmVyIixhbHRSb3dDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtcm93LWFsdCIscm93Q2xzUmU6bmV3IFJlZ0V4cCgiKD86XnxcXHMqKSIrRXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtcm93LShmaXJzdHxsYXN0fGFsdCkoPzpcXHMrfCQpIiwiZyIpLGNlbGxSZTpuZXcgUmVnRXhwKEV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLWNlbGwtKFteXFxzXSspICIsIiIpLHRyYWNrT3Zlcjp0cnVlLGdldFJvd0NsYXNzOm51bGwsc3RyaXBlUm93czp0cnVlLG1hcmtEaXJ0eTp0cnVlLGluaXRpYWxUcGw6IjxkaXY+PC9kaXY+Iixpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuc2Nyb2xsO2IudGFibGU9bmV3IEV4dC5kb20uRWxlbWVudC5GbHkoKTtiLnRhYmxlLmlkPWIuaWQrImdyaWRUYWJsZSI7Yi5hdXRvU2Nyb2xsPXVuZGVmaW5lZDtpZihhPT09dHJ1ZXx8YT09PSJib3RoIil7Yi5hdXRvU2Nyb2xsPXRydWV9ZWxzZXtpZihhPT09Imhvcml6b250YWwiKXtiLm92ZXJmbG93WD0iYXV0byJ9ZWxzZXtpZihhPT09InZlcnRpY2FsIil7Yi5vdmVyZmxvd1k9ImF1dG8ifX19Yi5zZWxNb2RlbC52aWV3PWI7Yi5oZWFkZXJDdC52aWV3PWI7Yi5oZWFkZXJDdC5tYXJrRGlydHk9Yi5tYXJrRGlydHk7Yi5pbml0RmVhdHVyZXMoYi5ncmlkKTtkZWxldGUgYi5ncmlkO2IudHBsPWIuZ2V0VHBsKCJpbml0aWFsVHBsIik7Yi5jYWxsUGFyZW50KCl9LG1vdmVDb2x1bW46ZnVuY3Rpb24oYSxwLGQpe3ZhciBuPXRoaXMsbD0oZD4xKT9kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk6dW5kZWZpbmVkLGM9cCxxPW4uZ2V0R3JpZENvbHVtbnMoKS5sZW5ndGgsbz1xLTEsYj0obi5maXJzdENsc3x8bi5sYXN0Q2xzKSYmKHA9PT0wfHxwPT1xfHxhPT09MHx8YT09byksZyxlLHIsayxtLGg7aWYobi5yZW5kZXJlZCl7aD1uLmVsLnF1ZXJ5KG4uaGVhZGVyUm93U2VsZWN0b3IpO3I9bi5lbC5xdWVyeShuLnJvd1NlbGVjdG9yKTtpZihwPmEmJmwpe2MtPWR9Zm9yKGc9MCxrPWgubGVuZ3RoO2c8azsrK2cpe209aFtnXTtpZihsKXtmb3IoZT0wO2U8ZDtlKyspe2wuYXBwZW5kQ2hpbGQobS5jZWxsc1thXSl9bS5pbnNlcnRCZWZvcmUobCxtLmNlbGxzW2NdfHxudWxsKX1lbHNle20uaW5zZXJ0QmVmb3JlKG0uY2VsbHNbYV0sbS5jZWxsc1tjXXx8bnVsbCl9fWZvcihnPTAsaz1yLmxlbmd0aDtnPGs7ZysrKXttPXJbZ107aWYoYil7aWYoYT09PTApe0V4dC5mbHkobS5jZWxsc1swXSkucmVtb3ZlQ2xzKG4uZmlyc3RDbHMpO0V4dC5mbHkobS5jZWxsc1sxXSkuYWRkQ2xzKG4uZmlyc3RDbHMpfWVsc2V7aWYoYT09PW8pe0V4dC5mbHkobS5jZWxsc1tvXSkucmVtb3ZlQ2xzKG4ubGFzdENscyk7RXh0LmZseShtLmNlbGxzW28tMV0pLmFkZENscyhuLmxhc3RDbHMpfX1pZihwPT09MCl7RXh0LmZseShtLmNlbGxzWzBdKS5yZW1vdmVDbHMobi5maXJzdENscyk7RXh0LmZseShtLmNlbGxzW2FdKS5hZGRDbHMobi5maXJzdENscyl9ZWxzZXtpZihwPT09cSl7RXh0LmZseShtLmNlbGxzW29dKS5yZW1vdmVDbHMobi5sYXN0Q2xzKTtFeHQuZmx5KG0uY2VsbHNbYV0pLmFkZENscyhuLmxhc3RDbHMpfX19aWYobCl7Zm9yKGU9MDtlPGQ7ZSsrKXtsLmFwcGVuZENoaWxkKG0uY2VsbHNbYV0pfW0uaW5zZXJ0QmVmb3JlKGwsbS5jZWxsc1tjXXx8bnVsbCl9ZWxzZXttLmluc2VydEJlZm9yZShtLmNlbGxzW2FdLG0uY2VsbHNbY118fG51bGwpfX1uLnNldE5ld1RlbXBsYXRlKCl9fSxzY3JvbGxUb1RvcDpFeHQuZW1wdHlGbixhZGRFbExpc3RlbmVyOmZ1bmN0aW9uKGEsYyxiKXt0aGlzLm1vbih0aGlzLGEsYyxiLHtlbGVtZW50OiJlbCJ9KX0sZ2V0R3JpZENvbHVtbnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWFkZXJDdC5nZXRHcmlkQ29sdW1ucygpfSxnZXRIZWFkZXJBdEluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmhlYWRlckN0LmdldEhlYWRlckF0SW5kZXgoYSl9LGdldENlbGw6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmdldE5vZGUoYSk7cmV0dXJuIEV4dC5mbHkoYykuZG93bihiLmdldENlbGxTZWxlY3RvcigpKX0sZ2V0RmVhdHVyZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmZlYXR1cmVzTUM7aWYoYSl7cmV0dXJuIGEuZ2V0KGIpfX0saW5pdEZlYXR1cmVzOmZ1bmN0aW9uKGQpe3ZhciBnPXRoaXMsYyxlLGIsYTtnLmZlYXR1cmVzTUM9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbigpO2U9Zy5mZWF0dXJlcz1nLmNvbnN0cnVjdEZlYXR1cmVzKCk7YT1lP2UubGVuZ3RoOjA7Zm9yKGM9MDtjPGE7YysrKXtiPWVbY107Yi52aWV3PWc7Yi5ncmlkPWQ7Zy5mZWF0dXJlc01DLmFkZChiKTtiLmluaXQoKX19LGNvbnN0cnVjdEZlYXR1cmVzOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcyxlPWcuZmVhdHVyZXMsZCxiLGM9MCxhO2lmKGUpe2I9W107YT1lLmxlbmd0aDtmb3IoO2M8YTtjKyspe2Q9ZVtjXTtpZighZC5pc0ZlYXR1cmUpe2Q9RXh0LmNyZWF0ZSgiZmVhdHVyZS4iK2QuZnR5cGUsZCl9YltjXT1kfX1yZXR1cm4gYn0sYXR0YWNoRXZlbnRzRm9yRmVhdHVyZXM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmZlYXR1cmVzLGM9Yi5sZW5ndGgsYT0wO2Zvcig7YTxjO2ErKyl7aWYoYlthXS5pc0ZlYXR1cmUpe2JbYV0uYXR0YWNoRXZlbnRzKCl9fX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudCgpO2lmKCFhLmVuYWJsZVRleHRTZWxlY3Rpb24pe2EuZWwudW5zZWxlY3RhYmxlKCl9YS5hdHRhY2hFdmVudHNGb3JGZWF0dXJlcygpfSxvblZpZXdTY3JvbGw6ZnVuY3Rpb24oYixhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLmZpcmVFdmVudCgiYm9keXNjcm9sbCIsYixhKX0scHJlcGFyZURhdGE6ZnVuY3Rpb24oYixoLGQpe3ZhciBnPXRoaXMsaz1nLmhlYWRlckN0LnByZXBhcmVEYXRhKGIsaCxkLGcsZy5vd25lckN0KSxhPWcuZmVhdHVyZXMsZT1hLmxlbmd0aCxjPTAsajtmb3IoO2M8ZTtjKyspe2o9YVtjXTtpZihqLmlzRmVhdHVyZSl7RXh0LmFwcGx5KGssai5nZXRBZGRpdGlvbmFsRGF0YShiLGgsZCxrLGcpKX19cmV0dXJuIGt9LGNvbGxlY3REYXRhOmZ1bmN0aW9uKGQscSl7dmFyIG49dGhpcyxzPW4uY2FsbFBhcmVudChhcmd1bWVudHMpLGM9bi5oZWFkZXJDdCxwPWMuZ2V0RnVsbFdpZHRoKCksYj1uLmZlYXR1cmVzLGw9Yi5sZW5ndGgsYT17cm93czpzLGZ1bGxXaWR0aDpwfSxoPTAsdCxnPTAsbSxrLGUscjttPXMubGVuZ3RoO2lmKG4uZ2V0Um93Q2xhc3Mpe2Zvcig7ZzxtO2crKyl7az17fTtlPXNbZ107cj1lLnJvd0Nsc3x8IiI7ZS5yb3dDbHM9dGhpcy5nZXRSb3dDbGFzcyhkW2ddLGcsayxuLnN0b3JlKSsiICIrcn19Zm9yKDtoPGw7aCsrKXt0PWJbaF07aWYodC5pc0ZlYXR1cmUmJnQuY29sbGVjdERhdGEmJiF0LmRpc2FibGVkKXthPXQuY29sbGVjdERhdGEoZCxzLHEscCxhKTticmVha319cmV0dXJuIGF9LHJlZnJlc2hTaXplOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhO2IudGFibGUuYXR0YWNoKGIuZWwuY2hpbGQoInRhYmxlIix0cnVlKSk7aWYoIWIuaGFzTG9hZGluZ0hlaWdodCl7YT1iLnVwKCJ0YWJsZXBhbmVsIik7RXh0LnN1c3BlbmRMYXlvdXRzKCk7Yi5jYWxsUGFyZW50KCk7aWYoYSYmRXh0LmdldFNjcm9sbGJhclNpemUoKS53aWR0aCYmKGIuYXV0b1Njcm9sbHx8Yi5vdmVyZmxvd1kpKXthLnVwZGF0ZUxheW91dCgpfUV4dC5yZXN1bWVMYXlvdXRzKHRydWUpfX0sc2V0TmV3VGVtcGxhdGU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5oZWFkZXJDdC5nZXRDb2x1bW5zRm9yVHBsKHRydWUpO2IudHBsPWIuZ2V0VGFibGVDaHVua2VyKCkuZ2V0VGFibGVUcGwoe3Jvd0NvdW50OmIuc3RvcmUuZ2V0Q291bnQoKSxjb2x1bW5zOmEsZmVhdHVyZXM6Yi5mZWF0dXJlcyxlbmFibGVUZXh0U2VsZWN0aW9uOmIuZW5hYmxlVGV4dFNlbGVjdGlvbn0pfSxnZXRUYWJsZUNodW5rZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaHVua2VyfHxFeHQudmlldy5UYWJsZUNodW5rZXJ9LGFkZFJvd0NsczpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXMuZ2V0Tm9kZShiKTtpZihjKXtFeHQuZmx5KGMpLmFkZENscyhhKX19LHJlbW92ZVJvd0NsczpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXMuZ2V0Tm9kZShiKTtpZihjKXtFeHQuZmx5KGMpLnJlbW92ZUNscyhhKX19LG9uUm93U2VsZWN0OmZ1bmN0aW9uKGEpe3RoaXMuYWRkUm93Q2xzKGEsdGhpcy5zZWxlY3RlZEl0ZW1DbHMpfSxvblJvd0Rlc2VsZWN0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5yZW1vdmVSb3dDbHMoYixhLnNlbGVjdGVkSXRlbUNscyk7YS5yZW1vdmVSb3dDbHMoYixhLmZvY3VzZWRJdGVtQ2xzKX0sb25DZWxsU2VsZWN0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ2V0Q2VsbEJ5UG9zaXRpb24oYix0cnVlKTtpZihhKXtFeHQuZmx5KGEpLmFkZENscyh0aGlzLnNlbGVjdGVkQ2VsbENscyl9fSxvbkNlbGxEZXNlbGVjdDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldENlbGxCeVBvc2l0aW9uKGIsdHJ1ZSk7aWYoYSl7RXh0LmZseShhKS5yZW1vdmVDbHModGhpcy5zZWxlY3RlZENlbGxDbHMpfX0sb25DZWxsRm9jdXM6ZnVuY3Rpb24oYSl7dGhpcy5mb2N1c0NlbGwoYSl9LGdldENlbGxCeVBvc2l0aW9uOmZ1bmN0aW9uKGEsYil7aWYoYSl7dmFyIGM9dGhpcy5nZXROb2RlKGEucm93KSxkPXRoaXMuaGVhZGVyQ3QuZ2V0SGVhZGVyQXRJbmRleChhLmNvbHVtbik7aWYoZCYmYyl7cmV0dXJuIEV4dC5mbHkoYykuZG93bihkLmdldENlbGxTZWxlY3RvcigpLGIpfX1yZXR1cm4gZmFsc2V9LG9uUm93Rm9jdXM6ZnVuY3Rpb24oZCxiLGEpe3ZhciBjPXRoaXM7aWYoYil7Yy5hZGRSb3dDbHMoZCxjLmZvY3VzZWRJdGVtQ2xzKTtpZighYSl7Yy5mb2N1c1JvdyhkKX19ZWxzZXtjLnJlbW92ZVJvd0NscyhkLGMuZm9jdXNlZEl0ZW1DbHMpfX0sZm9jdXNSb3c6ZnVuY3Rpb24oYil7dmFyIGc9dGhpcyxrPWcuZ2V0Tm9kZShiKSxjPWcuZWwsaT0wLGE9Zy5vd25lckN0LGosaCxlLGQ7aWYoayYmYyl7aD1jLmdldFkoKTtlPWgrYy5kb20uY2xpZW50SGVpZ2h0O2o9RXh0LmZseShrKS5nZXRSZWdpb24oKTtpZihqLnRvcDxoKXtpPWoudG9wLWh9ZWxzZXtpZihqLmJvdHRvbT5lKXtpPWouYm90dG9tLWV9fWQ9Zy5nZXRSZWNvcmQoayk7Yj1nLnN0b3JlLmluZGV4T2YoZCk7aWYoaSl7YS5zY3JvbGxCeURlbHRhWShpKX1nLmZpcmVFdmVudCgicm93Zm9jdXMiLGQsayxiKX19LGZvY3VzQ2VsbDpmdW5jdGlvbihoKXt2YXIgaj10aGlzLGs9ai5nZXRDZWxsQnlQb3NpdGlvbihoKSxiPWouZWwsZD0wLGU9MCxjPWIuZ2V0UmVnaW9uKCksYT1qLm93bmVyQ3QsaSxnO2MuYm90dG9tPWMudG9wK2IuZG9tLmNsaWVudEhlaWdodDtjLnJpZ2h0PWMubGVmdCtiLmRvbS5jbGllbnRXaWR0aDtpZihrKXtpPWsuZ2V0UmVnaW9uKCk7aWYoaS50b3A8Yy50b3Ape2Q9aS50b3AtYy50b3B9ZWxzZXtpZihpLmJvdHRvbT5jLmJvdHRvbSl7ZD1pLmJvdHRvbS1jLmJvdHRvbX19aWYoaS5sZWZ0PGMubGVmdCl7ZT1pLmxlZnQtYy5sZWZ0fWVsc2V7aWYoaS5yaWdodD5jLnJpZ2h0KXtlPWkucmlnaHQtYy5yaWdodH19aWYoZCl7YS5zY3JvbGxCeURlbHRhWShkKX1pZihlKXthLnNjcm9sbEJ5RGVsdGFYKGUpfWIuZm9jdXMoKTtqLmZpcmVFdmVudCgiY2VsbGZvY3VzIixnLGssaCl9fSxzY3JvbGxCeURlbHRhOmZ1bmN0aW9uKGMsYil7Yj1ifHwic2Nyb2xsVG9wIjt2YXIgYT10aGlzLmVsLmRvbTthW2JdPShhW2JdKz1jKX0sb25VcGRhdGU6ZnVuY3Rpb24oZyxlLGsscCl7dmFyIHY9dGhpcyxqLGQsbCxzLHIsdSxxLGIsYyx3LHQscixhLG4sbSxoLG89di5lZGl0aW5nUGx1Z2luJiZ2LmVkaXRpbmdQbHVnaW4uZWRpdGluZztpZih2LnZpZXdSZWFkeSl7aj12LnN0b3JlLmluZGV4T2YoZSk7YT12LmhlYWRlckN0LmdldEdyaWRDb2x1bW5zKCk7bj12Lm92ZXJJdGVtQ2xzO2lmKGEubGVuZ3RoJiZqPi0xKXtkPXYuYnVmZmVyUmVuZGVyKFtlXSxqKVswXTtxPXYuYWxsLml0ZW0oaik7aWYocSl7Yj1xLmRvbTttPXEuaGFzQ2xzKG4pO2lmKGIubWVyZ2VBdHRyaWJ1dGVzKXtiLm1lcmdlQXR0cmlidXRlcyhkLHRydWUpfWVsc2V7bD1kLmF0dHJpYnV0ZXM7cz1sLmxlbmd0aDtmb3Iocj0wO3I8cztyKyspe3U9bFtyXS5uYW1lO2lmKHUhPT0iaWQiKXtiLnNldEF0dHJpYnV0ZSh1LGxbcl0udmFsdWUpfX19aWYobSl7cS5hZGRDbHMobil9Yz1xLnF1ZXJ5KHYuY2VsbFNlbGVjdG9yKTt3PUV4dC5mbHkoZCkucXVlcnkodi5jZWxsU2VsZWN0b3IpO3Q9dy5sZW5ndGg7aD1jWzBdLnBhcmVudE5vZGU7Zm9yKHI9MDtyPHQ7cisrKXtpZih2LnNob3VsZFVwZGF0ZUNlbGwoYVtyXSxwKSl7aWYobyl7RXh0LmZseShjW3JdKS5zeW5jQ29udGVudCh3W3JdKX1lbHNle2guaW5zZXJ0QmVmb3JlKHdbcl0sY1tyXSk7aC5yZW1vdmVDaGlsZChjW3JdKX19fX12LmZpcmVFdmVudCgiaXRlbXVwZGF0ZSIsZSxqLGQpfX19LHNob3VsZFVwZGF0ZUNlbGw6ZnVuY3Rpb24oYixhKXtpZihiLmhhc0N1c3RvbVJlbmRlcmVyKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gIWF8fEV4dC5BcnJheS5jb250YWlucyhhLGIuZGF0YUluZGV4KX0scmVmcmVzaDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5zZXROZXdUZW1wbGF0ZSgpO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2EuZG9TdHJpcGVSb3dzKDApO2EuaGVhZGVyQ3Quc2V0U29ydFN0YXRlKCl9LGNsZWFyVmlld0VsOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KCk7ZGVsZXRlIHRoaXMudGFibGUuZG9tfSxwcm9jZXNzSXRlbUV2ZW50OmZ1bmN0aW9uKGIsbSxqLGQpe3ZhciBoPXRoaXMsaz1kLmdldFRhcmdldChoLmNlbGxTZWxlY3RvcixtKSxpPWs/ay5jZWxsSW5kZXg6LTEsYT1oLnN0YXRpY3MoKS5FdmVudE1hcCxjPWguZ2V0U2VsZWN0aW9uTW9kZWwoKSxnPWQudHlwZSxsO2lmKGc9PSJrZXlkb3duIiYmIWsmJmMuZ2V0Q3VycmVudFBvc2l0aW9uKXtrPWguZ2V0Q2VsbEJ5UG9zaXRpb24oYy5nZXRDdXJyZW50UG9zaXRpb24oKSk7aWYoayl7az1rLmRvbTtpPWsuY2VsbEluZGV4fX1sPWguZmlyZUV2ZW50KCJ1aWV2ZW50IixnLGgsayxqLGksZCxiLG0pO2lmKGw9PT1mYWxzZXx8aC5jYWxsUGFyZW50KGFyZ3VtZW50cyk9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfWlmKGc9PSJtb3VzZW92ZXIifHxnPT0ibW91c2VvdXQiKXtyZXR1cm4gdHJ1ZX1pZighayl7cmV0dXJuIHRydWV9cmV0dXJuICEoKGhbIm9uQmVmb3JlQ2VsbCIrYVtnXV0oayxpLGIsbSxqLGQpPT09ZmFsc2UpfHwoaC5maXJlRXZlbnQoImJlZm9yZWNlbGwiK2csaCxrLGksYixtLGosZCk9PT1mYWxzZSl8fChoWyJvbkNlbGwiK2FbZ11dKGssaSxiLG0saixkKT09PWZhbHNlKXx8KGguZmlyZUV2ZW50KCJjZWxsIitnLGgsayxpLGIsbSxqLGQpPT09ZmFsc2UpKX0scHJvY2Vzc1NwZWNpYWxFdmVudDpmdW5jdGlvbihrKXt2YXIgbj10aGlzLGI9bi5zdGF0aWNzKCkuRXZlbnRNYXAsZD1uLmZlYXR1cmVzLG09ZC5sZW5ndGgsbz1rLnR5cGUsZyxwLGgsaixjLGwsYT1uLm93bmVyQ3Q7bi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYobz09Im1vdXNlb3ZlciJ8fG89PSJtb3VzZW91dCIpe3JldHVybn1mb3IoZz0wO2c8bTtnKyspe3A9ZFtnXTtpZihwLmhhc0ZlYXR1cmVFdmVudCl7aj1rLmdldFRhcmdldChwLmV2ZW50U2VsZWN0b3Isbi5nZXRUYXJnZXRFbCgpKTtpZihqKXtoPXAuZXZlbnRQcmVmaXg7Yz1wLmdldEZpcmVFdmVudEFyZ3MoImJlZm9yZSIraCtvLG4saixrKTtsPXAuZ2V0RmlyZUV2ZW50QXJncyhoK28sbixqLGspO2lmKChuLmZpcmVFdmVudC5hcHBseShuLGMpPT09ZmFsc2UpfHwoYS5maXJlRXZlbnQuYXBwbHkoYSxjKT09PWZhbHNlKXx8KG4uZmlyZUV2ZW50LmFwcGx5KG4sbCk9PT1mYWxzZSl8fChhLmZpcmVFdmVudC5hcHBseShhLGwpPT09ZmFsc2UpKXtyZXR1cm4gZmFsc2V9fX19cmV0dXJuIHRydWV9LG9uQ2VsbE1vdXNlRG93bjpFeHQuZW1wdHlGbixvbkNlbGxNb3VzZVVwOkV4dC5lbXB0eUZuLG9uQ2VsbENsaWNrOkV4dC5lbXB0eUZuLG9uQ2VsbERibENsaWNrOkV4dC5lbXB0eUZuLG9uQ2VsbENvbnRleHRNZW51OkV4dC5lbXB0eUZuLG9uQ2VsbEtleURvd246RXh0LmVtcHR5Rm4sb25CZWZvcmVDZWxsTW91c2VEb3duOkV4dC5lbXB0eUZuLG9uQmVmb3JlQ2VsbE1vdXNlVXA6RXh0LmVtcHR5Rm4sb25CZWZvcmVDZWxsQ2xpY2s6RXh0LmVtcHR5Rm4sb25CZWZvcmVDZWxsRGJsQ2xpY2s6RXh0LmVtcHR5Rm4sb25CZWZvcmVDZWxsQ29udGV4dE1lbnU6RXh0LmVtcHR5Rm4sb25CZWZvcmVDZWxsS2V5RG93bjpFeHQuZW1wdHlGbixleHBhbmRUb0ZpdDpmdW5jdGlvbihiKXtpZihiKXt2YXIgYT10aGlzLmdldE1heENvbnRlbnRXaWR0aChiKTtkZWxldGUgYi5mbGV4O2Iuc2V0V2lkdGgoYSl9fSxnZXRNYXhDb250ZW50V2lkdGg6ZnVuY3Rpb24oaCl7dmFyIGE9aC5nZXRDZWxsSW5uZXJTZWxlY3RvcigpLGM9dGhpcy5lbC5xdWVyeShhKSxkPTAsZz1jLmxlbmd0aCxlPWguZWwuZG9tLnNjcm9sbFdpZHRoLGI7Zm9yKDtkPGc7ZCsrKXtiPWNbZF0uc2Nyb2xsV2lkdGg7aWYoYj5lKXtlPWJ9fXJldHVybiBlfSxnZXRQb3NpdGlvbkJ5RXZlbnQ6ZnVuY3Rpb24oZyl7dmFyIGQ9dGhpcyxiPWcuZ2V0VGFyZ2V0KGQuY2VsbFNlbGVjdG9yKSxjPWcuZ2V0VGFyZ2V0KGQuaXRlbVNlbGVjdG9yKSxhPWQuZ2V0UmVjb3JkKGMpLGg9ZC5nZXRIZWFkZXJCeUNlbGwoYik7cmV0dXJuIGQuZ2V0UG9zaXRpb24oYSxoKX0sZ2V0SGVhZGVyQnlDZWxsOmZ1bmN0aW9uKGIpe2lmKGIpe3ZhciBhPWIuY2xhc3NOYW1lLm1hdGNoKHRoaXMuY2VsbFJlKTtpZihhJiZhWzFdKXtyZXR1cm4gRXh0LmdldENtcChhWzFdKX19cmV0dXJuIGZhbHNlfSx3YWxrQ2VsbHM6ZnVuY3Rpb24obCxtLGgsbixhLG8pe2lmKCFsKXtyZXR1cm59dmFyIGo9dGhpcyxwPWwucm93LGQ9bC5jb2x1bW4saz1qLnN0b3JlLmdldENvdW50KCksZz1qLmdldEZpcnN0VmlzaWJsZUNvbHVtbkluZGV4KCksYj1qLmdldExhc3RWaXNpYmxlQ29sdW1uSW5kZXgoKSxpPXtyb3c6cCxjb2x1bW46ZH0sYz1qLmhlYWRlckN0LmdldEhlYWRlckF0SW5kZXgoZCk7aWYoIWN8fGMuaGlkZGVuKXtyZXR1cm4gZmFsc2V9aD1ofHx7fTttPW0udG9Mb3dlckNhc2UoKTtzd2l0Y2gobSl7Y2FzZSJyaWdodCI6aWYoZD09PWIpe2lmKG58fHA9PT1rLTEpe3JldHVybiBmYWxzZX1pZighaC5jdHJsS2V5KXtpLnJvdz1wKzE7aS5jb2x1bW49Z319ZWxzZXtpZighaC5jdHJsS2V5KXtpLmNvbHVtbj1kK2ouZ2V0UmlnaHRHYXAoYyl9ZWxzZXtpLmNvbHVtbj1ifX1icmVhaztjYXNlImxlZnQiOmlmKGQ9PT1nKXtpZihufHxwPT09MCl7cmV0dXJuIGZhbHNlfWlmKCFoLmN0cmxLZXkpe2kucm93PXAtMTtpLmNvbHVtbj1ifX1lbHNle2lmKCFoLmN0cmxLZXkpe2kuY29sdW1uPWQrai5nZXRMZWZ0R2FwKGMpfWVsc2V7aS5jb2x1bW49Z319YnJlYWs7Y2FzZSJ1cCI6aWYocD09PTApe3JldHVybiBmYWxzZX1lbHNle2lmKCFoLmN0cmxLZXkpe2kucm93PXAtMX1lbHNle2kucm93PTB9fWJyZWFrO2Nhc2UiZG93biI6aWYocD09PWstMSl7cmV0dXJuIGZhbHNlfWVsc2V7aWYoIWguY3RybEtleSl7aS5yb3c9cCsxfWVsc2V7aS5yb3c9ay0xfX1icmVha31pZihhJiZhLmNhbGwob3x8d2luZG93LGkpIT09dHJ1ZSl7cmV0dXJuIGZhbHNlfWVsc2V7cmV0dXJuIGl9fSxnZXRGaXJzdFZpc2libGVDb2x1bW5JbmRleDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0SGVhZGVyQ3QoKS5nZXRWaXNpYmxlR3JpZENvbHVtbnMoKVswXTtyZXR1cm4gYT9hLmdldEluZGV4KCk6LTF9LGdldExhc3RWaXNpYmxlQ29sdW1uSW5kZXg6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldEhlYWRlckN0KCkuZ2V0VmlzaWJsZUdyaWRDb2x1bW5zKCksYT1iW2IubGVuZ3RoLTFdO3JldHVybiBhLmdldEluZGV4KCl9LGdldEhlYWRlckN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGVhZGVyQ3R9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGEsZSl7dmFyIGQ9dGhpcyxiPWQuc3RvcmUsYz1kLmhlYWRlckN0LmdldEdyaWRDb2x1bW5zKCk7cmV0dXJue3JvdzpiLmluZGV4T2YoYSksY29sdW1uOkV4dC5BcnJheS5pbmRleE9mKGMsZSl9fSxnZXRSaWdodEdhcDpmdW5jdGlvbihhKXt2YXIgZz10aGlzLmdldEhlYWRlckN0KCksZT1nLmdldEdyaWRDb2x1bW5zKCksYj1FeHQuQXJyYXkuaW5kZXhPZihlLGEpLGM9YisxLGQ7Zm9yKDtjPD1lLmxlbmd0aDtjKyspe2lmKCFlW2NdLmhpZGRlbil7ZD1jO2JyZWFrfX1yZXR1cm4gZC1ifSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5lbC5yZW1vdmVBbGxMaXN0ZW5lcnMoKX10aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sZ2V0TGVmdEdhcDpmdW5jdGlvbihhKXt2YXIgZz10aGlzLmdldEhlYWRlckN0KCksZT1nLmdldEdyaWRDb2x1bW5zKCksYz1FeHQuQXJyYXkuaW5kZXhPZihlLGEpLGQ9Yy0xLGI7Zm9yKDtkPj0wO2QtLSl7aWYoIWVbZF0uaGlkZGVuKXtiPWQ7YnJlYWt9fXJldHVybiBiLWN9LG9uQWRkOmZ1bmN0aW9uKGMsYSxiKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLmRvU3RyaXBlUm93cyhiKX0sb25SZW1vdmU6ZnVuY3Rpb24oYyxhLGIpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3RoaXMuZG9TdHJpcGVSb3dzKGIpfSxkb1N0cmlwZVJvd3M6ZnVuY3Rpb24oYixhKXt2YXIgZD10aGlzLGUsaCxjLGc7aWYoZC5yZW5kZXJlZCYmZC5zdHJpcGVSb3dzKXtlPWQuZ2V0Tm9kZXMoYixhKTtmb3IoYz0wLGg9ZS5sZW5ndGg7YzxoO2MrKyl7Zz1lW2NdO2cuY2xhc3NOYW1lPWcuY2xhc3NOYW1lLnJlcGxhY2UoZC5yb3dDbHNSZSwiICIpO2IrKztpZihiJTI9PT0wKXtnLmNsYXNzTmFtZSs9KCIgIitkLmFsdFJvd0Nscyl9fX19fSk7RXh0LmRlZmluZSgiRXh0LmdyaWQuTG9ja2FibGUiLHtyZXF1aXJlczpbIkV4dC5ncmlkLkxvY2tpbmdWaWV3IiwiRXh0LnZpZXcuVGFibGUiXSxzeW5jUm93SGVpZ2h0OnRydWUsaGVhZGVyQ291bnRlcjowLHNjcm9sbERlbHRhOjQwLHVubG9ja1RleHQ6IlVubG9jayIsbG9ja1RleHQ6IkxvY2siLGRldGVybWluZVhUeXBlVG9DcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGcsZCxiLGUsYTtpZihjLnN1YkdyaWRYVHlwZSl7Zz1jLnN1YkdyaWRYVHlwZX1lbHNle2Q9dGhpcy5nZXRYVHlwZXMoKS5zcGxpdCgiLyIpO2I9ZC5sZW5ndGg7ZT1kW2ItMV07YT1kW2ItMl07aWYoYSE9PSJ0YWJsZXBhbmVsIil7Zz1hfWVsc2V7Zz1lfX1yZXR1cm4gZ30saW5qZWN0TG9ja2FibGU6ZnVuY3Rpb24oKXt0aGlzLmxvY2thYmxlPXRydWU7dGhpcy5oYXNWaWV3PXRydWU7dmFyIHQ9dGhpcyxiPUV4dC5nZXRTY3JvbGxiYXJTaXplKCkud2lkdGg9PT0wLGQ9dC5zdG9yZT1FeHQuU3RvcmVNYW5hZ2VyLmxvb2t1cCh0LnN0b3JlKSxjPXQuZGV0ZXJtaW5lWFR5cGVUb0NyZWF0ZSgpLGo9dC5nZXRTZWxlY3Rpb25Nb2RlbCgpLGwscCxxLG8scyxoLG0sbixhLGUscixnLHUsaztsPXQuY29uc3RydWN0RmVhdHVyZXMoKTt0LmNsb25lRmVhdHVyZXMoKTtwPXQuY29uc3RydWN0RmVhdHVyZXMoKTtxPXQuY29uc3RydWN0UGx1Z2lucygpO3QuY2xvbmVQbHVnaW5zKCk7bz10LmNvbnN0cnVjdFBsdWdpbnMoKTtkZWxldGUgdC5mZWF0dXJlcztkZWxldGUgdC5wbHVnaW5zO2ZvcihtPTAsbj0obD9sLmxlbmd0aDowKTttPG47bSsrKXtsW21dLmxvY2tpbmdQYXJ0bmVyPXBbbV07cFttXS5sb2NraW5nUGFydG5lcj1sW21dfXM9RXh0LmFwcGx5KHt4dHlwZTpjLHN0b3JlOmQsc2Nyb2xsZXJPd25lcjpmYWxzZSxlbmFibGVBbmltYXRpb25zOmZhbHNlLHNjcm9sbDpiPyJ2ZXJ0aWNhbCI6ZmFsc2Usc2VsTW9kZWw6aixib3JkZXI6ZmFsc2UsY2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLWlubmVyLWxvY2tlZCIsaXNMYXlvdXRSb290OmZ1bmN0aW9uKCl7cmV0dXJuIGZhbHNlfSxmZWF0dXJlczpsLHBsdWdpbnM6cX0sdC5sb2NrZWRHcmlkQ29uZmlnKTtoPUV4dC5hcHBseSh7eHR5cGU6YyxzdG9yZTpkLHNjcm9sbGVyT3duZXI6ZmFsc2UsZW5hYmxlQW5pbWF0aW9uczpmYWxzZSxzZWxNb2RlbDpqLGJvcmRlcjpmYWxzZSxpc0xheW91dFJvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9LGZlYXR1cmVzOnAscGx1Z2luczpvfSx0Lm5vcm1hbEdyaWRDb25maWcpO3QuYWRkQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLWxvY2tlZCIpO0V4dC5jb3B5VG8oaCx0LHQuYm90aENmZ0NvcHkpO0V4dC5jb3B5VG8ocyx0LHQuYm90aENmZ0NvcHkpO0V4dC5jb3B5VG8oaCx0LHQubm9ybWFsQ2ZnQ29weSk7RXh0LmNvcHlUbyhzLHQsdC5sb2NrZWRDZmdDb3B5KTtmb3IobT0wO208dC5ub3JtYWxDZmdDb3B5Lmxlbmd0aDttKyspe2RlbGV0ZSB0W3Qubm9ybWFsQ2ZnQ29weVttXV19Zm9yKG09MDttPHQubG9ja2VkQ2ZnQ29weS5sZW5ndGg7bSsrKXtkZWxldGUgdFt0LmxvY2tlZENmZ0NvcHlbbV1dfXQuYWRkRXZlbnRzKCJsb2NrY29sdW1uIiwidW5sb2NrY29sdW1uIik7dC5hZGRTdGF0ZUV2ZW50cyhbImxvY2tjb2x1bW4iLCJ1bmxvY2tjb2x1bW4iXSk7dC5sb2NrZWRIZWlnaHRzPVtdO3Qubm9ybWFsSGVpZ2h0cz1bXTthPXQucHJvY2Vzc0NvbHVtbnModC5jb2x1bW5zKTtzLndpZHRoPWEubG9ja2VkV2lkdGgrRXh0Lm51bShqLmhlYWRlcldpZHRoLDApO3MuY29sdW1ucz1hLmxvY2tlZDtoLmNvbHVtbnM9YS5ub3JtYWw7aC5mbGV4PTE7cy52aWV3Q29uZmlnPXQubG9ja2VkVmlld0NvbmZpZ3x8e307cy52aWV3Q29uZmlnLmxvYWRpbmdVc2VNc2c9ZmFsc2U7aC52aWV3Q29uZmlnPXQubm9ybWFsVmlld0NvbmZpZ3x8e307RXh0LmFwcGx5SWYocy52aWV3Q29uZmlnLHQudmlld0NvbmZpZyk7RXh0LmFwcGx5SWYoaC52aWV3Q29uZmlnLHQudmlld0NvbmZpZyk7dC5sb2NrZWRHcmlkPUV4dC5Db21wb25lbnRNYW5hZ2VyLmNyZWF0ZShzKTtnPXQubG9ja2VkR3JpZC5nZXRWaWV3KCk7aC52aWV3Q29uZmlnLmxvY2tpbmdQYXJ0bmVyPWc7dC5ub3JtYWxHcmlkPUV4dC5Db21wb25lbnRNYW5hZ2VyLmNyZWF0ZShoKTt1PXQubm9ybWFsR3JpZC5nZXRWaWV3KCk7dC52aWV3PW5ldyBFeHQuZ3JpZC5Mb2NraW5nVmlldyh7bG9ja2VkOnQubG9ja2VkR3JpZCxub3JtYWw6dC5ub3JtYWxHcmlkLHBhbmVsOnR9KTtrPXtzY3JvbGw6e2ZuOnQub25Mb2NrZWRWaWV3U2Nyb2xsLGVsZW1lbnQ6ImVsIixzY29wZTp0fX07aWYoIWIpe2subW91c2V3aGVlbD17Zm46dC5vbkxvY2tlZFZpZXdNb3VzZVdoZWVsLGVsZW1lbnQ6ImVsIixzY29wZTp0fX1pZih0LnN5bmNSb3dIZWlnaHQpe2sucmVmcmVzaD10Lm9uTG9ja2VkVmlld1JlZnJlc2g7ay5pdGVtdXBkYXRlPXQub25Mb2NrZWRWaWV3SXRlbVVwZGF0ZTtrLnNjb3BlPXR9Zy5vbihrKTtrPXtzY3JvbGw6e2ZuOnQub25Ob3JtYWxWaWV3U2Nyb2xsLGVsZW1lbnQ6ImVsIixzY29wZTp0fSxyZWZyZXNoOnQuc3luY1Jvd0hlaWdodD90Lm9uTm9ybWFsVmlld1JlZnJlc2g6dC51cGRhdGVTcGFjZXIsc2NvcGU6dH07dS5vbihrKTtlPXQubG9ja2VkR3JpZC5oZWFkZXJDdDtyPXQubm9ybWFsR3JpZC5oZWFkZXJDdDtlLmxvY2tlZEN0PXRydWU7ZS5sb2NrYWJsZUluamVjdGVkPXRydWU7ci5sb2NrYWJsZUluamVjdGVkPXRydWU7ZS5vbih7Y29sdW1uc2hvdzp0Lm9uTG9ja2VkSGVhZGVyU2hvdyxjb2x1bW5oaWRlOnQub25Mb2NrZWRIZWFkZXJIaWRlLGNvbHVtbm1vdmU6dC5vbkxvY2tlZEhlYWRlck1vdmUsc29ydGNoYW5nZTp0Lm9uTG9ja2VkSGVhZGVyU29ydENoYW5nZSxjb2x1bW5yZXNpemU6dC5vbkxvY2tlZEhlYWRlclJlc2l6ZSxzY29wZTp0fSk7ci5vbih7Y29sdW1ubW92ZTp0Lm9uTm9ybWFsSGVhZGVyTW92ZSxzb3J0Y2hhbmdlOnQub25Ob3JtYWxIZWFkZXJTb3J0Q2hhbmdlLHNjb3BlOnR9KTt0Lm1vZGlmeUhlYWRlckN0KCk7dC5pdGVtcz1bdC5sb2NrZWRHcmlkLHQubm9ybWFsR3JpZF07dC5yZWxheUhlYWRlckN0RXZlbnRzKGUpO3QucmVsYXlIZWFkZXJDdEV2ZW50cyhyKTt0LmxheW91dD17dHlwZToiaGJveCIsYWxpZ246InN0cmV0Y2gifX0scHJvY2Vzc0NvbHVtbnM6ZnVuY3Rpb24oZyl7dmFyIGU9MCxhPWcubGVuZ3RoLGI9MCxkPVtdLGM9W10saDtmb3IoO2U8YTsrK2Upe2g9Z1tlXTtpZighaC5pc0NvbXBvbmVudCl7aD1FeHQuYXBwbHkoe30sZ1tlXSl9aC5wcm9jZXNzZWQ9dHJ1ZTtpZihoLmxvY2tlZCl7aWYoIWguaGlkZGVuKXtiKz1oLndpZHRofHxFeHQuZ3JpZC5oZWFkZXIuQ29udGFpbmVyLnByb3RvdHlwZS5kZWZhdWx0V2lkdGh9ZC5wdXNoKGgpfWVsc2V7Yy5wdXNoKGgpfWlmKCFoLmhlYWRlcklkKXtoLmhlYWRlcklkPShoLmluaXRpYWxDb25maWd8fGgpLmlkfHwoIkwiKygrK3RoaXMuaGVhZGVyQ291bnRlcikpfX1yZXR1cm57bG9ja2VkV2lkdGg6Yixsb2NrZWQ6e2l0ZW1zOmQsaXRlbUlkOiJsb2NrZWRIZWFkZXJDdCIsc3RyZXRjaE1heFBhcnRuZXI6Il5ePj4jbm9ybWFsSGVhZGVyQ3QifSxub3JtYWw6e2l0ZW1zOmMsaXRlbUlkOiJub3JtYWxIZWFkZXJDdCIsc3RyZXRjaE1heFBhcnRuZXI6Il5ePj4jbG9ja2VkSGVhZGVyQ3QifX19LG9uTG9ja2VkVmlld01vdXNlV2hlZWw6ZnVuY3Rpb24oaSl7dmFyIGQ9dGhpcyxoPS1kLnNjcm9sbERlbHRhLGE9aCppLmdldFdoZWVsRGVsdGFzKCkueSxiPWQubG9ja2VkR3JpZC5nZXRWaWV3KCkuZWwuZG9tLGMsZztpZihiKXtjPWIuc2Nyb2xsVG9wIT09Yi5zY3JvbGxIZWlnaHQtYi5jbGllbnRIZWlnaHQ7Zz1iLnNjcm9sbFRvcCE9PTB9aWYoKGE8MCYmZyl8fChhPjAmJmMpKXtpLnN0b3BFdmVudCgpO2Quc2Nyb2xsaW5nPXRydWU7Yi5zY3JvbGxUb3ArPWE7ZC5ub3JtYWxHcmlkLmdldFZpZXcoKS5lbC5kb20uc2Nyb2xsVG9wPWIuc2Nyb2xsVG9wO2Quc2Nyb2xsaW5nPWZhbHNlO2Qub25Ob3JtYWxWaWV3U2Nyb2xsKCl9fSxvbkxvY2tlZFZpZXdTY3JvbGw6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGQ9ZS5sb2NrZWRHcmlkLmdldFZpZXcoKSxjPWUubm9ybWFsR3JpZC5nZXRWaWV3KCksYSxiO2lmKCFlLnNjcm9sbGluZyl7ZS5zY3JvbGxpbmc9dHJ1ZTtjLmVsLmRvbS5zY3JvbGxUb3A9ZC5lbC5kb20uc2Nyb2xsVG9wO2lmKGUuc3RvcmUuYnVmZmVyZWQpe2I9ZC5lbC5jaGlsZCgidGFibGUiLHRydWUpO2E9Yy5lbC5jaGlsZCgidGFibGUiLHRydWUpO2Iuc3R5bGUucG9zaXRpb249ImFic29sdXRlIn1lLnNjcm9sbGluZz1mYWxzZX19LG9uTm9ybWFsVmlld1Njcm9sbDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsZD1lLmxvY2tlZEdyaWQuZ2V0VmlldygpLGM9ZS5ub3JtYWxHcmlkLmdldFZpZXcoKSxhLGI7aWYoIWUuc2Nyb2xsaW5nKXtlLnNjcm9sbGluZz10cnVlO2QuZWwuZG9tLnNjcm9sbFRvcD1jLmVsLmRvbS5zY3JvbGxUb3A7aWYoZS5zdG9yZS5idWZmZXJlZCl7Yj1kLmVsLmNoaWxkKCJ0YWJsZSIsdHJ1ZSk7YT1jLmVsLmNoaWxkKCJ0YWJsZSIsdHJ1ZSk7Yi5zdHlsZS5wb3NpdGlvbj0iYWJzb2x1dGUiO2Iuc3R5bGUudG9wPWEuc3R5bGUudG9wfWUuc2Nyb2xsaW5nPWZhbHNlfX0sb25Mb2NrZWRIZWFkZXJNb3ZlOmZ1bmN0aW9uKCl7aWYodGhpcy5zeW5jUm93SGVpZ2h0KXt0aGlzLm9uTm9ybWFsVmlld1JlZnJlc2goKX19LG9uTm9ybWFsSGVhZGVyTW92ZTpmdW5jdGlvbigpe2lmKHRoaXMuc3luY1Jvd0hlaWdodCl7dGhpcy5vbkxvY2tlZFZpZXdSZWZyZXNoKCl9fSx1cGRhdGVTcGFjZXI6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGI9ZC5sb2NrZWRHcmlkLmdldFZpZXcoKS5lbCxjPWQubm9ybWFsR3JpZC5nZXRWaWV3KCkuZWwuZG9tLGE9Yi5kb20uaWQrIi1zcGFjZXIiLGU9KGMub2Zmc2V0SGVpZ2h0LWMuY2xpZW50SGVpZ2h0KSsicHgiO2Quc3BhY2VyRWw9RXh0LmdldERvbShhKTtpZihkLnNwYWNlckVsKXtkLnNwYWNlckVsLnN0eWxlLmhlaWdodD1lfWVsc2V7RXh0LmNvcmUuRG9tSGVscGVyLmFwcGVuZChiLHtpZDphLHN0eWxlOiJoZWlnaHQ6ICIrZX0pfX0sb25Mb2NrZWRWaWV3UmVmcmVzaDpmdW5jdGlvbigpe2lmKHRoaXMubm9ybWFsR3JpZC5oZWFkZXJDdC5nZXRHcmlkQ29sdW1ucygpLmxlbmd0aCl7dmFyIGU9dGhpcyxhPWUubG9ja2VkR3JpZC5nZXRWaWV3KCksYz1hLmVsLGc9Yy5xdWVyeShhLmdldEl0ZW1TZWxlY3RvcigpKSxkPWcubGVuZ3RoLGI9MDtlLmxvY2tlZEhlaWdodHM9W107Zm9yKDtiPGQ7YisrKXtlLmxvY2tlZEhlaWdodHNbYl09Z1tiXS5vZmZzZXRIZWlnaHR9ZS5zeW5jUm93SGVpZ2h0cygpO2UudXBkYXRlU3BhY2VyKCl9fSxvbk5vcm1hbFZpZXdSZWZyZXNoOmZ1bmN0aW9uKCl7aWYodGhpcy5sb2NrZWRHcmlkLmhlYWRlckN0LmdldEdyaWRDb2x1bW5zKCkubGVuZ3RoKXt2YXIgZT10aGlzLGE9ZS5ub3JtYWxHcmlkLmdldFZpZXcoKSxjPWEuZWwsZz1jLnF1ZXJ5KGEuZ2V0SXRlbVNlbGVjdG9yKCkpLGQ9Zy5sZW5ndGgsYj0wO2Uubm9ybWFsSGVpZ2h0cz1bXTtmb3IoO2I8ZDtiKyspe2Uubm9ybWFsSGVpZ2h0c1tiXT1nW2JdLm9mZnNldEhlaWdodH1lLnN5bmNSb3dIZWlnaHRzKCk7ZS51cGRhdGVTcGFjZXIoKX19LG9uTG9ja2VkVmlld0l0ZW1VcGRhdGU6ZnVuY3Rpb24oYSxiLGMpe2lmKHRoaXMubm9ybWFsR3JpZC5oZWFkZXJDdC5nZXRHcmlkQ29sdW1ucygpLmxlbmd0aCl7dGhpcy5sb2NrZWRIZWlnaHRzW2JdPWMub2Zmc2V0SGVpZ2h0O3RoaXMuc3luY1Jvd0hlaWdodHMoKX19LG9uTm9ybWFsVmlld0l0ZW1VcGRhdGU6ZnVuY3Rpb24oYSxiLGMpe2lmKHRoaXMubG9ja2VkR3JpZC5oZWFkZXJDdC5nZXRHcmlkQ29sdW1ucygpLmxlbmd0aCl7dGhpcy5ub3JtYWxIZWlnaHRzW2JdPWMub2Zmc2V0SGVpZ2h0O3RoaXMuc3luY1Jvd0hlaWdodHMoKX19LHN5bmNSb3dIZWlnaHRzOmZ1bmN0aW9uKCl7dmFyIGo9dGhpcyxhPWoubG9ja2VkSGVpZ2h0cyxrPWoubm9ybWFsSGVpZ2h0cyxoPWEubGVuZ3RoLGU9MCxsLGMsZCxnLGI7aWYoYS5sZW5ndGgmJmsubGVuZ3RoKXtsPWoubG9ja2VkR3JpZC5nZXRWaWV3KCk7Yz1qLm5vcm1hbEdyaWQuZ2V0VmlldygpO2Q9bC5lbC5xdWVyeShsLmdldEl0ZW1TZWxlY3RvcigpKTtnPWMuZWwucXVlcnkoYy5nZXRJdGVtU2VsZWN0b3IoKSk7Zm9yKDtlPGg7ZSsrKXtpZighaXNOYU4oYVtlXSkmJiFpc05hTihrW2VdKSl7aWYoYVtlXT5rW2VdKXtFeHQuZmx5KGdbZV0pLnNldEhlaWdodChhW2VdKX1lbHNle2lmKGFbZV08a1tlXSl7RXh0LmZseShkW2VdKS5zZXRIZWlnaHQoa1tlXSl9fX19Yj1jLmVsLmRvbS5zY3JvbGxUb3A7Yy5lbC5kb20uc2Nyb2xsVG9wPWI7bC5lbC5kb20uc2Nyb2xsVG9wPWI7ai5sb2NrZWRIZWlnaHRzPVtdO2oubm9ybWFsSGVpZ2h0cz1bXX19LG1vZGlmeUhlYWRlckN0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmxvY2tlZEdyaWQuaGVhZGVyQ3QuZ2V0TWVudUl0ZW1zPWEuZ2V0TWVudUl0ZW1zKGEubG9ja2VkR3JpZC5oZWFkZXJDdC5nZXRNZW51SXRlbXMsdHJ1ZSk7YS5ub3JtYWxHcmlkLmhlYWRlckN0LmdldE1lbnVJdGVtcz1hLmdldE1lbnVJdGVtcyhhLm5vcm1hbEdyaWQuaGVhZGVyQ3QuZ2V0TWVudUl0ZW1zLGZhbHNlKX0sb25VbmxvY2tNZW51Q2xpY2s6ZnVuY3Rpb24oKXt0aGlzLnVubG9jaygpfSxvbkxvY2tNZW51Q2xpY2s6ZnVuY3Rpb24oKXt0aGlzLmxvY2soKX0sZ2V0TWVudUl0ZW1zOmZ1bmN0aW9uKGcsYyl7dmFyIGg9dGhpcyxpPWgudW5sb2NrVGV4dCxhPWgubG9ja1RleHQsaj1FeHQuYmFzZUNTU1ByZWZpeCsiaG1lbnUtdW5sb2NrIixiPUV4dC5iYXNlQ1NTUHJlZml4KyJobWVudS1sb2NrIixlPUV4dC5GdW5jdGlvbi5iaW5kKGgub25VbmxvY2tNZW51Q2xpY2ssaCksZD1FeHQuRnVuY3Rpb24uYmluZChoLm9uTG9ja01lbnVDbGljayxoKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaz1nLmNhbGwodGhpcyk7ay5wdXNoKCItIix7Y2xzOmosdGV4dDppLGhhbmRsZXI6ZSxkaXNhYmxlZDohY30pO2sucHVzaCh7Y2xzOmIsdGV4dDphLGhhbmRsZXI6ZCxkaXNhYmxlZDpjfSk7cmV0dXJuIGt9fSxsb2NrOmZ1bmN0aW9uKGEsZCl7dmFyIGM9dGhpcyxlPWMubm9ybWFsR3JpZCxoPWMubG9ja2VkR3JpZCxnPWUuaGVhZGVyQ3QsYj1oLmhlYWRlckN0O2E9YXx8Zy5nZXRNZW51KCkuYWN0aXZlSGVhZGVyO2lmKGEuZmxleCl7YS53aWR0aD1hLmdldFdpZHRoKCk7ZGVsZXRlIGEuZmxleH1FeHQuc3VzcGVuZExheW91dHMoKTthLm93bmVyQ3QucmVtb3ZlKGEsZmFsc2UpO2EubG9ja2VkPXRydWU7aWYoRXh0LmlzRGVmaW5lZChkKSl7Yi5pbnNlcnQoZCxhKX1lbHNle2IuYWRkKGEpfWMuc3luY0xvY2tlZFNlY3Rpb24oKTtFeHQucmVzdW1lTGF5b3V0cyh0cnVlKTtjLnVwZGF0ZVNwYWNlcigpO2MuZmlyZUV2ZW50KCJsb2NrY29sdW1uIixjLGEpfSxzeW5jTG9ja2VkU2VjdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5zeW5jTG9ja2VkV2lkdGgoKTthLmxvY2tlZEdyaWQuZ2V0VmlldygpLnJlZnJlc2goKTthLm5vcm1hbEdyaWQuZ2V0VmlldygpLnJlZnJlc2goKX0sc3luY0xvY2tlZFdpZHRoOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxhPWMubG9ja2VkR3JpZCxiPWEuaGVhZGVyQ3QuZ2V0RnVsbFdpZHRoKHRydWUpO0V4dC5zdXNwZW5kTGF5b3V0cygpO2lmKGI+MCl7YS5zZXRXaWR0aChiKTthLnNob3coKX1lbHNle2EuaGlkZSgpfUV4dC5yZXN1bWVMYXlvdXRzKHRydWUpO3JldHVybiBiPjB9LG9uTG9ja2VkSGVhZGVyUmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5zeW5jTG9ja2VkV2lkdGgoKX0sb25Mb2NrZWRIZWFkZXJIaWRlOmZ1bmN0aW9uKCl7dGhpcy5zeW5jTG9ja2VkV2lkdGgoKX0sb25Mb2NrZWRIZWFkZXJTaG93OmZ1bmN0aW9uKCl7dGhpcy5zeW5jTG9ja2VkV2lkdGgoKX0sb25Mb2NrZWRIZWFkZXJTb3J0Q2hhbmdlOmZ1bmN0aW9uKGIsYyxhKXtpZihhKXt0aGlzLm5vcm1hbEdyaWQuaGVhZGVyQ3QuY2xlYXJPdGhlclNvcnRTdGF0ZXMobnVsbCx0cnVlKX19LG9uTm9ybWFsSGVhZGVyU29ydENoYW5nZTpmdW5jdGlvbihiLGMsYSl7aWYoYSl7dGhpcy5sb2NrZWRHcmlkLmhlYWRlckN0LmNsZWFyT3RoZXJTb3J0U3RhdGVzKG51bGwsdHJ1ZSl9fSx1bmxvY2s6ZnVuY3Rpb24oYSxlKXt2YXIgZD10aGlzLGc9ZC5ub3JtYWxHcmlkLGk9ZC5sb2NrZWRHcmlkLGg9Zy5oZWFkZXJDdCxjPWkuaGVhZGVyQ3QsYj1mYWxzZTtpZighRXh0LmlzRGVmaW5lZChlKSl7ZT0wfWE9YXx8Yy5nZXRNZW51KCkuYWN0aXZlSGVhZGVyO0V4dC5zdXNwZW5kTGF5b3V0cygpO2Eub3duZXJDdC5yZW1vdmUoYSxmYWxzZSk7aWYoZC5zeW5jTG9ja2VkV2lkdGgoKSl7Yj10cnVlfWEubG9ja2VkPWZhbHNlO2guaW5zZXJ0KGUsYSk7ZC5ub3JtYWxHcmlkLmdldFZpZXcoKS5yZWZyZXNoKCk7aWYoYil7ZC5sb2NrZWRHcmlkLmdldFZpZXcoKS5yZWZyZXNoKCl9RXh0LnJlc3VtZUxheW91dHModHJ1ZSk7ZC5maXJlRXZlbnQoInVubG9ja2NvbHVtbiIsZCxhKX0sYXBwbHlDb2x1bW5zU3RhdGU6ZnVuY3Rpb24oaCl7dmFyIHA9dGhpcyxlPXAubG9ja2VkR3JpZCxnPWUuaGVhZGVyQ3Qsbj1wLm5vcm1hbEdyaWQuaGVhZGVyQ3QscT1FeHQuQXJyYXkudG9NYXAoZy5pdGVtcywiaGVhZGVySWQiKSxqPUV4dC5BcnJheS50b01hcChuLml0ZW1zLCJoZWFkZXJJZCIpLG09W10sbz1bXSxsPTEsYj1oLmxlbmd0aCxrLGEsZCxjO2ZvcihrPTA7azxiO2srKyl7Yz1oW2tdO2Q9cVtjLmlkXTthPWR8fGpbYy5pZF07aWYoYSl7aWYoYS5hcHBseUNvbHVtblN0YXRlKXthLmFwcGx5Q29sdW1uU3RhdGUoYyl9aWYoYS5sb2NrZWQ9PT11bmRlZmluZWQpe2EubG9ja2VkPSEhZH1pZihhLmxvY2tlZCl7bS5wdXNoKGEpO2lmKCFhLmhpZGRlbiYmdHlwZW9mIGEud2lkdGg9PSJudW1iZXIiKXtsKz1hLndpZHRofX1lbHNle28ucHVzaChhKX19fWlmKG0ubGVuZ3RoK28ubGVuZ3RoPT1nLml0ZW1zLmdldENvdW50KCkrbi5pdGVtcy5nZXRDb3VudCgpKXtnLnJlbW92ZUFsbChmYWxzZSk7bi5yZW1vdmVBbGwoZmFsc2UpO2cuYWRkKG0pO24uYWRkKG8pO2Uuc2V0V2lkdGgobCl9fSxnZXRDb2x1bW5zU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5sb2NrZWRHcmlkLmhlYWRlckN0LmdldENvbHVtbnNTdGF0ZSgpLGM9Yi5ub3JtYWxHcmlkLmhlYWRlckN0LmdldENvbHVtbnNTdGF0ZSgpO3JldHVybiBhLmNvbmNhdChjKX0scmVjb25maWd1cmVMb2NrYWJsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZT1jLmxvY2tlZEdyaWQsZD1jLm5vcm1hbEdyaWQ7aWYoYil7RXh0LnN1c3BlbmRMYXlvdXRzKCk7ZS5oZWFkZXJDdC5yZW1vdmVBbGwoKTtkLmhlYWRlckN0LnJlbW92ZUFsbCgpO2I9Yy5wcm9jZXNzQ29sdW1ucyhiKTtlLnNldFdpZHRoKGIubG9ja2VkV2lkdGgpO2UuaGVhZGVyQ3QuYWRkKGIubG9ja2VkLml0ZW1zKTtkLmhlYWRlckN0LmFkZChiLm5vcm1hbC5pdGVtcyk7RXh0LnJlc3VtZUxheW91dHModHJ1ZSl9aWYoYSl7YT1FeHQuZGF0YS5TdG9yZU1hbmFnZXIubG9va3VwKGEpO2Muc3RvcmU9YTtlLmJpbmRTdG9yZShhKTtkLmJpbmRTdG9yZShhKX1lbHNle2UuZ2V0VmlldygpLnJlZnJlc2goKTtkLmdldFZpZXcoKS5yZWZyZXNoKCl9fSxjbG9uZUZlYXR1cmVzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxkPWUuZmVhdHVyZXMsYyxiPTAsYTtpZihkKXthPWQubGVuZ3RoO2Zvcig7YjxhO2IrKyl7Yz1kW2JdO2lmKGMuaXNGZWF0dXJlKXtkW2JdPWMuY2xvbmUoKX19fX0sY2xvbmVQbHVnaW5zOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxiPWUucGx1Z2lucyxkLGM9MCxhO2lmKGIpe2E9Yi5sZW5ndGg7Zm9yKDtjPGE7YysrKXtkPWJbY107aWYodHlwZW9mIGQuaW5pdD09PSJmdW5jdGlvbiIpe2JbY109ZC5jbG9uZSgpfX19fX0sZnVuY3Rpb24oKXt0aGlzLmJvcnJvdyhFeHQudmlldy5UYWJsZSxbImNvbnN0cnVjdEZlYXR1cmVzIl0pO3RoaXMuYm9ycm93KEV4dC5BYnN0cmFjdENvbXBvbmVudCxbImNvbnN0cnVjdFBsdWdpbnMiLCJjb25zdHJ1Y3RQbHVnaW4iXSl9KTtFeHQuZGVmaW5lKCJFeHQuZ3JpZC5QYWdpbmdTY3JvbGxlciIse3BlcmNlbnRhZ2VGcm9tRWRnZTowLjM1LG51bUZyb21FZGdlOjIsdHJhaWxpbmdCdWZmZXJab25lOjUsbGVhZGluZ0J1ZmZlclpvbmU6MTUsc2Nyb2xsVG9Mb2FkQnVmZmVyOjIwMCx2aWV3U2l6ZTowLHJvd0hlaWdodDoyMSx0YWJsZVN0YXJ0OjAsdGFibGVFbmQ6MCxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2IudmFyaWFibGVSb3dIZWlnaHQ9YS52YXJpYWJsZVJvd0hlaWdodDtiLmJpbmRWaWV3KGEudmlldyk7RXh0LmFwcGx5KGIsYSk7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGJpbmRWaWV3OmZ1bmN0aW9uKGIpe3ZhciBnPXRoaXMsZD17c2Nyb2xsOntmbjpnLm9uVmlld1Njcm9sbCxlbGVtZW50OiJlbCIsc2NvcGU6Z30scmVuZGVyOmcub25WaWV3UmVuZGVyLHJlc2l6ZTpnLm9uVmlld1Jlc2l6ZSxib3hyZWFkeTp7Zm46Zy5vblZpZXdSZXNpemUsc2NvcGU6ZyxzaW5nbGU6dHJ1ZX0sYmVmb3JlcmVmcmVzaDpnLmJlZm9yZVZpZXdSZWZyZXNoLHJlZnJlc2g6Zy5vblZpZXdSZWZyZXNoLHNjb3BlOmd9LGE9e2d1YXJhbnRlZWRyYW5nZTpnLm9uR3VhcmFudGVlZFJhbmdlLHNjb3BlOmd9LGM9e3JlY29uZmlndXJlOmcub25HcmlkUmVjb25maWd1cmUsc2NvcGU6Z30sZTtpZihnLnZpZXcpe2lmKGcudmlldy5lbCl7Zy52aWV3LmVsLnVuKCJzY3JvbGwiLGcub25WaWV3U2Nyb2xsLGcpfWU9Yi5sb2NraW5nUGFydG5lcjtpZihlKXtlLnVuKCJyZWZyZXNoIixnLm9uTG9ja1JlZnJlc2gsZyl9Zy52aWV3LnVuKGQpO2cuc3RvcmUudW4oYSk7aWYoZy5ncmlkKXtnLmdyaWQudW4oYyl9ZGVsZXRlIGcudmlldy5yZWZyZXNoU2l6ZX1nLnZpZXc9YjtnLmdyaWQ9Zy52aWV3LnVwKCJ0YWJsZXBhbmVsIik7Zy5zdG9yZT1iLnN0b3JlO2lmKGIucmVuZGVyZWQpe2cudmlld1NpemU9Zy5zdG9yZS52aWV3U2l6ZT1NYXRoLmNlaWwoYi5nZXRIZWlnaHQoKS9nLnJvd0hlaWdodCkrZy50cmFpbGluZ0J1ZmZlclpvbmUrKGcubnVtRnJvbUVkZ2UqMikrZy5sZWFkaW5nQnVmZmVyWm9uZX1lPWIubG9ja2luZ1BhcnRuZXI7aWYoZSl7ZS5vbigicmVmcmVzaCIsZy5vbkxvY2tSZWZyZXNoLGcpfWcudmlldy5tb24oZy5zdG9yZS5wYWdlTWFwLHtzY29wZTpnLGNsZWFyOmcub25DYWNoZUNsZWFyfSk7Zy52aWV3LnJlZnJlc2hTaXplPUV4dC5GdW5jdGlvbi5jcmVhdGVJbnRlcmNlcHRvcihnLnZpZXcucmVmcmVzaFNpemUsZy5iZWZvcmVWaWV3cmVmcmVzaFNpemUsZyk7Zy5wb3NpdGlvbj0wO2lmKGcuZ3JpZCl7Zy5ncmlkLm9uKGMpfWVsc2V7Zy52aWV3Lm9uKHthZGRlZDpmdW5jdGlvbigpe2cuZ3JpZD1nLnZpZXcudXAoInRhYmxlcGFuZWwiKTtnLmdyaWQub24oYyl9LHNpbmdsZTp0cnVlfSl9Zy52aWV3Lm9uKGcudmlld0xpc3RlbmVycz1kKTtnLnN0b3JlLm9uKGEpfSxvbkNhY2hlQ2xlYXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEudmlldy5yZW5kZXJlZCYmIWEuc3RvcmUuaXNEZXN0cm95ZWQpe2EuaWdub3JlTmV4dFNjcm9sbEV2ZW50PWEudmlldy5lbC5kb20uc2Nyb2xsVG9wIT09MDthLnZpZXcuZWwuZG9tLnNjcm9sbFRvcD0wO2RlbGV0ZSBhLmxhc3RTY3JvbGxEaXJlY3Rpb247ZGVsZXRlIGEuc2Nyb2xsT2Zmc2V0O2RlbGV0ZSBhLnNjcm9sbFByb3BvcnRpb259fSxvbkdyaWRSZWNvbmZpZ3VyZTpmdW5jdGlvbihhKXt0aGlzLmJpbmRWaWV3KGEudmlldyl9LG9uVmlld1JlbmRlcjpmdW5jdGlvbigpe3ZhciBkPXRoaXMsYT1kLnZpZXcsYz1kLnZpZXcuZWwsYjtkLnN0cmV0Y2hlcj1kLmNyZWF0ZVN0cmV0Y2hlcihhKTthPWEubG9ja2luZ1BhcnRuZXI7aWYoYSl7Yj1kLnN0cmV0Y2hlcjtkLnN0cmV0Y2hlcj1uZXcgRXh0LkNvbXBvc2l0ZUVsZW1lbnQoYik7ZC5zdHJldGNoZXIuYWRkKGQuY3JlYXRlU3RyZXRjaGVyKGEpKX19LGNyZWF0ZVN0cmV0Y2hlcjpmdW5jdGlvbihhKXt2YXIgYj1hLmVsO2Iuc2V0U3R5bGUoInBvc2l0aW9uIiwicmVsYXRpdmUiKTtyZXR1cm4gYi5jcmVhdGVDaGlsZCh7c3R5bGU6e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsd2lkdGg6IjFweCIsaGVpZ2h0OjAsdG9wOjAsbGVmdDowfX0sYi5kb20uZmlyc3RDaGlsZCl9LG9uVmlld1Jlc2l6ZTpmdW5jdGlvbihiLGQsYSl7dmFyIGU9dGhpcyxjO2M9TWF0aC5jZWlsKGEvZS5yb3dIZWlnaHQpK2UudHJhaWxpbmdCdWZmZXJab25lKyhlLm51bUZyb21FZGdlKjIpK2UubGVhZGluZ0J1ZmZlclpvbmU7aWYoYz5lLnZpZXdTaXplKXtlLnZpZXdTaXplPWUuc3RvcmUudmlld1NpemU9YztlLmhhbmRsZVZpZXdTY3JvbGwoZS5sYXN0U2Nyb2xsRGlyZWN0aW9ufHwxKX19LGJlZm9yZVZpZXdSZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIudmlldyxjLGQ7Yi5mb2N1c09uUmVmcmVzaD1FeHQuRWxlbWVudC5nZXRBY3RpdmVFbGVtZW50PT09YS5lbC5kb207aWYoYi52YXJpYWJsZVJvd0hlaWdodCl7ZD1iLmxhc3RTY3JvbGxEaXJlY3Rpb247Yi5jb21tb25SZWNvcmRJbmRleD11bmRlZmluZWQ7aWYoZCYmKGIucHJldmlvdXNTdGFydCE9PXVuZGVmaW5lZCkmJihiLnNjcm9sbFByb3BvcnRpb249PT11bmRlZmluZWQpJiYoYz1hLmdldE5vZGVzKCkpLmxlbmd0aCl7aWYoZD09PTEpe2lmKGIudGFibGVTdGFydDw9Yi5wcmV2aW91c0VuZCl7Yi5jb21tb25SZWNvcmRJbmRleD1jLmxlbmd0aC0xfX1lbHNle2lmKGQ9PT0tMSl7aWYoYi50YWJsZUVuZD49Yi5wcmV2aW91c1N0YXJ0KXtiLmNvbW1vblJlY29yZEluZGV4PTB9fX1iLnNjcm9sbE9mZnNldD0tYS5lbC5nZXRPZmZzZXRzVG8oY1tiLmNvbW1vblJlY29yZEluZGV4XSlbMV07Yi5jb21tb25SZWNvcmRJbmRleC09KGIudGFibGVTdGFydC1iLnByZXZpb3VzU3RhcnQpfWVsc2V7Yi5zY3JvbGxPZmZzZXQ9dW5kZWZpbmVkfX19LG9uTG9ja1JlZnJlc2g6ZnVuY3Rpb24oYSl7YS50YWJsZS5kb20uc3R5bGUucG9zaXRpb249ImFic29sdXRlIn0sb25WaWV3UmVmcmVzaDpmdW5jdGlvbigpe3ZhciBkPXRoaXMsZz1kLnN0b3JlLGMsZT1kLnZpZXcsaj1lLmVsLGs9ai5kb20sbSxpLGIsbD1lLnRhYmxlLmRvbSxoLGE7aWYoZC5mb2N1c09uUmVmcmVzaCl7ai5mb2N1cygpO2QuZm9jdXNPblJlZnJlc2g9ZmFsc2V9ZC5kaXNhYmxlZD10cnVlO2lmKGcuZ2V0Q291bnQoKT09PWcuZ2V0VG90YWxDb3VudCgpfHwoZy5pc0ZpbHRlcmVkKCkmJiFnLnJlbW90ZUZpbHRlcikpe2Quc3RyZXRjaGVyLnNldEhlaWdodCgwKTtkLnBvc2l0aW9uPWsuc2Nyb2xsVG9wPTA7ZC5zZXRUYWJsZVBvc2l0aW9uKCJhYnNvbHV0ZSIpO3JldHVybn1kLnN0cmV0Y2hlci5zZXRIZWlnaHQoYz1kLmdldFNjcm9sbEhlaWdodCgpKTthPWsuc2Nyb2xsVG9wO2QuaXNTY3JvbGxSZWZyZXNoPShhPjApO2lmKGQuc2Nyb2xsUHJvcG9ydGlvbiE9PXVuZGVmaW5lZCl7ZC5zZXRUYWJsZVBvc2l0aW9uKCJhYnNvbHV0ZSIpO2Quc2V0VGFibGVUb3AoKGQuc2Nyb2xsUHJvcG9ydGlvbj8oYypkLnNjcm9sbFByb3BvcnRpb24pLShsLm9mZnNldEhlaWdodCpkLnNjcm9sbFByb3BvcnRpb24pOjApKyJweCIpfWVsc2V7ZC5zZXRUYWJsZVBvc2l0aW9uKCJhYnNvbHV0ZSIpO2Quc2V0VGFibGVUb3AoKGg9KGQudGFibGVTdGFydHx8MCkqZC5yb3dIZWlnaHQpKyJweCIpO2lmKGQuc2Nyb2xsT2Zmc2V0KXttPWUuZ2V0Tm9kZXMoKTtpPS1qLmdldE9mZnNldHNUbyhtW2QuY29tbW9uUmVjb3JkSW5kZXhdKVsxXTtiPWktZC5zY3JvbGxPZmZzZXQ7ZC5wb3NpdGlvbj0oay5zY3JvbGxUb3ArPWIpfWVsc2V7aWYoKGg+YSl8fCgoaCtsLm9mZnNldEhlaWdodCk8YStrLmNsaWVudEhlaWdodCkpe2QubGFzdFNjcm9sbERpcmVjdGlvbj0tMTtkLnBvc2l0aW9uPWsuc2Nyb2xsVG9wPWh9fX1kLmRpc2FibGVkPWZhbHNlfSxzZXRUYWJsZVBvc2l0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuc2V0Vmlld1RhYmxlU3R5bGUodGhpcy52aWV3LCJwb3NpdGlvbiIsYSl9LHNldFRhYmxlVG9wOmZ1bmN0aW9uKGEpe3RoaXMuc2V0Vmlld1RhYmxlU3R5bGUodGhpcy52aWV3LCJ0b3AiLGEpfSxzZXRWaWV3VGFibGVTdHlsZTpmdW5jdGlvbihhLGMsYil7YS5lbC5jaGlsZCgidGFibGUiLHRydWUpLnN0eWxlW2NdPWI7YT1hLmxvY2tpbmdQYXJ0bmVyO2lmKGEpe2EuZWwuY2hpbGQoInRhYmxlIix0cnVlKS5zdHlsZVtjXT1ifX0sYmVmb3JlVmlld3JlZnJlc2hTaXplOmZ1bmN0aW9uKCl7aWYodGhpcy5pc1Njcm9sbFJlZnJlc2gpe3RoaXMudmlldy50YWJsZS5hdHRhY2godGhpcy52aWV3LmVsLmNoaWxkKCJ0YWJsZSIsdHJ1ZSkpO3JldHVybih0aGlzLmlzU2Nyb2xsUmVmcmVzaD1mYWxzZSl9fSxvbkd1YXJhbnRlZWRSYW5nZTpmdW5jdGlvbihiLGUsYSl7dmFyIGM9dGhpcyxkPWMuc3RvcmU7aWYoYi5sZW5ndGgmJmMudmlzaWJsZVN0YXJ0PGJbMF0uaW5kZXgpe3JldHVybn1jLnByZXZpb3VzU3RhcnQ9Yy50YWJsZVN0YXJ0O2MucHJldmlvdXNFbmQ9Yy50YWJsZUVuZDtjLnRhYmxlU3RhcnQ9ZTtjLnRhYmxlRW5kPWE7ZC5sb2FkUmVjb3JkcyhiLHtzdGFydDplfSl9LG9uVmlld1Njcm9sbDpmdW5jdGlvbihnLGMpe3ZhciBkPXRoaXMsYT1kLnZpZXcsYj1kLnBvc2l0aW9uO2QucG9zaXRpb249YS5lbC5kb20uc2Nyb2xsVG9wO2lmKGQuaWdub3JlTmV4dFNjcm9sbEV2ZW50KXtkLmlnbm9yZU5leHRTY3JvbGxFdmVudD1mYWxzZTtyZXR1cm59aWYoIWQuZGlzYWJsZWQpe2QubGFzdFNjcm9sbERpcmVjdGlvbj1kLnBvc2l0aW9uPmI/MTotMTtpZihiIT09ZC5wb3NpdGlvbil7ZC5oYW5kbGVWaWV3U2Nyb2xsKGQubGFzdFNjcm9sbERpcmVjdGlvbil9fX0saGFuZGxlVmlld1Njcm9sbDpmdW5jdGlvbihpKXt2YXIgZT10aGlzLGs9ZS5zdG9yZSxoPWUudmlldyxnPWUudmlld1NpemUsbD1rLmdldFRvdGFsQ291bnQoKSxkPWwtZyxjPWUuZ2V0Rmlyc3RWaXNpYmxlUm93SW5kZXgoKSxqPWUuZ2V0TGFzdFZpc2libGVSb3dJbmRleCgpLGE9aC5lbC5kb20sYixtO2lmKGw+PWcpe2Uuc2Nyb2xsUHJvcG9ydGlvbj11bmRlZmluZWQ7aWYoaT09LTEpe2lmKGUudGFibGVTdGFydCl7aWYoYyE9PXVuZGVmaW5lZCl7aWYoYzwoZS50YWJsZVN0YXJ0K2UubnVtRnJvbUVkZ2UpKXtiPU1hdGgubWF4KDAsaitlLnRyYWlsaW5nQnVmZmVyWm9uZS1nKX19ZWxzZXtlLnNjcm9sbFByb3BvcnRpb249YS5zY3JvbGxUb3AvKGEuc2Nyb2xsSGVpZ2h0LWEuY2xpZW50SGVpZ2h0KTtiPU1hdGgubWF4KDAsbCplLnNjcm9sbFByb3BvcnRpb24tKGcvMiktZS5udW1Gcm9tRWRnZS0oKGUubGVhZGluZ0J1ZmZlclpvbmUrZS50cmFpbGluZ0J1ZmZlclpvbmUpLzIpKX19fWVsc2V7aWYoYyE9PXVuZGVmaW5lZCl7aWYoaj4oZS50YWJsZUVuZC1lLm51bUZyb21FZGdlKSl7Yj1NYXRoLm1heCgwLGMtZS50cmFpbGluZ0J1ZmZlclpvbmUpfX1lbHNle2Uuc2Nyb2xsUHJvcG9ydGlvbj1hLnNjcm9sbFRvcC8oYS5zY3JvbGxIZWlnaHQtYS5jbGllbnRIZWlnaHQpO2I9bCplLnNjcm9sbFByb3BvcnRpb24tKGcvMiktZS5udW1Gcm9tRWRnZS0oKGUubGVhZGluZ0J1ZmZlclpvbmUrZS50cmFpbGluZ0J1ZmZlclpvbmUpLzIpfX1pZihiIT09dW5kZWZpbmVkKXtpZihiPmQpe2I9ZCZ+MTttPWwtMX1lbHNle2I9YiZ+MTttPWIrZy0xfWlmKGsucmFuZ2VDYWNoZWQoYixtKSl7ZS5jYW5jZWxMb2FkKCk7ay5ndWFyYW50ZWVSYW5nZShiLG0pfWVsc2V7ZS5hdHRlbXB0TG9hZChiLG0pfX19fSxnZXRGaXJzdFZpc2libGVSb3dJbmRleDpmdW5jdGlvbigpe3ZhciBkPXRoaXMsYT1kLnZpZXcsaD1hLmVsLmRvbS5zY3JvbGxUb3AsZSxjLGIsZztpZihkLnZhcmlhYmxlUm93SGVpZ2h0KXtlPWEuZ2V0Tm9kZXMoKTtjPWUubGVuZ3RoO2lmKCFjKXtyZXR1cm59Zz1FeHQuZmx5KGVbMF0pLmdldE9mZnNldHNUbyhhLmVsKVsxXTtmb3IoYj0wO2I8YztiKyspe2crPWVbYl0ub2Zmc2V0SGVpZ2h0O2lmKGc+YS5lbC5kb20uY2xpZW50SGVpZ2h0KXtyZXR1cm59aWYoZz4wKXtyZXR1cm4gYS5nZXRSZWNvcmQoZVtiXSkuaW5kZXh9fX1lbHNle3JldHVybiBNYXRoLmZsb29yKGgvZC5yb3dIZWlnaHQpfX0sZ2V0TGFzdFZpc2libGVSb3dJbmRleDpmdW5jdGlvbigpe3ZhciBoPXRoaXMsYz1oLnN0b3JlLGE9aC52aWV3LGI9YS5lbC5kb20uY2xpZW50SGVpZ2h0LGosZyxlLGQ7aWYoaC52YXJpYWJsZVJvd0hlaWdodCl7aj1hLmdldE5vZGVzKCk7aWYoIWoubGVuZ3RoKXtyZXR1cm59Zz1jLmdldENvdW50KCktMTtkPUV4dC5mbHkoaltnXSkuZ2V0T2Zmc2V0c1RvKGEuZWwpWzFdK2pbZ10ub2Zmc2V0SGVpZ2h0O2ZvcihlPWc7ZT49MDtlLS0pe2QtPWpbZV0ub2Zmc2V0SGVpZ2h0O2lmKGQ8MCl7cmV0dXJufWlmKGQ8Yil7cmV0dXJuIGEuZ2V0UmVjb3JkKGpbZV0pLmluZGV4fX19ZWxzZXtyZXR1cm4gaC5nZXRGaXJzdFZpc2libGVSb3dJbmRleCgpK01hdGguY2VpbChiL2gucm93SGVpZ2h0KSsxfX0sZ2V0U2Nyb2xsSGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxhPWUudmlldyxkLGgsYj1lLnN0b3JlLGc9MCxjPSFlLmhhc093blByb3BlcnR5KCJyb3dIZWlnaHQiKTtpZihlLnZhcmlhYmxlUm93SGVpZ2h0KXtkPWUudmlldy50YWJsZS5kb207aWYoYyl7ZS5pbml0aWFsVGFibGVIZWlnaHQ9ZC5vZmZzZXRIZWlnaHQ7ZS5yb3dIZWlnaHQ9ZS5pbml0aWFsVGFibGVIZWlnaHQvZS5zdG9yZS5nZXRDb3VudCgpfWVsc2V7Zz1kLm9mZnNldEhlaWdodC1lLmluaXRpYWxUYWJsZUhlaWdodDtpZihiLmdldENvdW50KCk+ZS52aWV3U2l6ZSl7Zy09ZS5yb3dIZWlnaHR9fX1lbHNle2lmKGMpe2g9YS5lbC5kb3duKGEuZ2V0SXRlbVNlbGVjdG9yKCkpO2lmKGgpe2Uucm93SGVpZ2h0PWguZ2V0SGVpZ2h0KGZhbHNlLHRydWUpfX19cmV0dXJuIE1hdGguZmxvb3IoYi5nZXRUb3RhbENvdW50KCkqZS5yb3dIZWlnaHQpK2d9LGF0dGVtcHRMb2FkOmZ1bmN0aW9uKGMsYSl7dmFyIGI9dGhpcztpZihiLnNjcm9sbFRvTG9hZEJ1ZmZlcil7aWYoIWIubG9hZFRhc2spe2IubG9hZFRhc2s9bmV3IEV4dC51dGlsLkRlbGF5ZWRUYXNrKGIuZG9BdHRlbXB0TG9hZCxiLFtdKX1iLmxvYWRUYXNrLmRlbGF5KGIuc2Nyb2xsVG9Mb2FkQnVmZmVyLGIuZG9BdHRlbXB0TG9hZCxiLFtjLGFdKX1lbHNle2Iuc3RvcmUuZ3VhcmFudGVlUmFuZ2UoYyxhKX19LGNhbmNlbExvYWQ6ZnVuY3Rpb24oKXtpZih0aGlzLmxvYWRUYXNrKXt0aGlzLmxvYWRUYXNrLmNhbmNlbCgpfX0sZG9BdHRlbXB0TG9hZDpmdW5jdGlvbihiLGEpe3RoaXMuc3RvcmUuZ3VhcmFudGVlUmFuZ2UoYixhKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLnZpZXdMaXN0ZW5lcnMuc2Nyb2xsO2Iuc3RvcmUudW4oe2d1YXJhbnRlZWRyYW5nZTpiLm9uR3VhcmFudGVlZFJhbmdlLHNjb3BlOmJ9KTtiLnZpZXcudW4oYi52aWV3TGlzdGVuZXJzKTtpZihiLnZpZXcucmVuZGVyZWQpe2Iuc3RyZXRjaGVyLnJlbW92ZSgpO2Iudmlldy5lbC51bigic2Nyb2xsIixhLmZuLGEuc2NvcGUpfX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbnRhaW5lci5GaXQiLHtleHRlbmQ6IkV4dC5sYXlvdXQuY29udGFpbmVyLkNvbnRhaW5lciIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQubGF5b3V0LkZpdExheW91dCIsYWxpYXM6ImxheW91dC5maXQiLGl0ZW1DbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZpdC1pdGVtIix0YXJnZXRDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImxheW91dC1maXQiLHR5cGU6ImZpdCIsZGVmYXVsdE1hcmdpbnM6e3RvcDowLHJpZ2h0OjAsYm90dG9tOjAsbGVmdDowfSxtYW5hZ2VNYXJnaW5zOnRydWUsc2l6ZVBvbGljaWVzOnswOntzZXRzV2lkdGg6MCxzZXRzSGVpZ2h0OjB9LDE6e3NldHNXaWR0aDoxLHNldHNIZWlnaHQ6MH0sMjp7c2V0c1dpZHRoOjAsc2V0c0hlaWdodDoxfSwzOntzZXRzV2lkdGg6MSxzZXRzSGVpZ2h0OjF9fSxnZXRJdGVtU2l6ZVBvbGljeTpmdW5jdGlvbihiLGMpe3ZhciBhPWN8fHRoaXMub3duZXIuZ2V0U2l6ZU1vZGVsKCksZD0oYS53aWR0aC5zaHJpbmtXcmFwPzA6MSl8KGEuaGVpZ2h0LnNocmlua1dyYXA/MDoyKTtyZXR1cm4gdGhpcy5zaXplUG9saWNpZXNbZF19LGJlZ2luTGF5b3V0Q3ljbGU6ZnVuY3Rpb24oayxnKXt2YXIgdD10aGlzLHU9dC5sYXN0SGVpZ2h0TW9kZWwmJnQubGFzdEhlaWdodE1vZGVsLmNhbGN1bGF0ZWQsaD10Lmxhc3RXaWR0aE1vZGVsJiZ0Lmxhc3RXaWR0aE1vZGVsLmNhbGN1bGF0ZWQsbz1ofHx1LGw9MCxtPTAscyxiLHAscixlLGEsaixuLHEsZDt0LmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihvJiZrLnRhcmdldENvbnRleHQuZWwuZG9tLnRhZ05hbWUudG9VcHBlckNhc2UoKSE9IlREIil7bz1oPXU9ZmFsc2V9Yj1rLmNoaWxkSXRlbXM7ZT1iLmxlbmd0aDtmb3IocD0wO3A8ZTsrK3Ape3I9YltwXTtpZihnKXtzPXIudGFyZ2V0O2o9cy5taW5IZWlnaHQ7bj1zLm1pbldpZHRoO2lmKG58fGope2E9ci5tYXJnaW5JbmZvfHxyLmdldE1hcmdpbkluZm8oKTtqKz1hLmhlaWdodDtuKz1hLmhlaWdodDtpZihsPGope2w9an1pZihtPG4pe209bn19fWlmKG8pe3E9ci5lbC5kb20uc3R5bGU7aWYodSl7cS5oZWlnaHQ9IiJ9aWYoaCl7cS53aWR0aD0iIn19fWlmKGcpe2subWF4Q2hpbGRNaW5IZWlnaHQ9bDtrLm1heENoaWxkTWluV2lkdGg9bX1zPWsudGFyZ2V0O2sub3ZlcmZsb3dYPSghay53aWR0aE1vZGVsLnNocmlua1dyYXAmJmsubWF4Q2hpbGRNaW5XaWR0aCYmKHMuYXV0b1Njcm9sbHx8cy5vdmVyZmxvd1gpKXx8ZDtrLm92ZXJmbG93WT0oIWsuaGVpZ2h0TW9kZWwuc2hyaW5rV3JhcCYmay5tYXhDaGlsZE1pbkhlaWdodCYmKHMuYXV0b1Njcm9sbHx8cy5vdmVyZmxvd1kpKXx8ZH0sY2FsY3VsYXRlOmZ1bmN0aW9uKGcpe3ZhciBvPXRoaXMsbD1nLmNoaWxkSXRlbXMsZD1sLmxlbmd0aCxjPW8uZ2V0Q29udGFpbmVyU2l6ZShnKSxlPXtsZW5ndGg6ZCxvd25lckNvbnRleHQ6Zyx0YXJnZXRTaXplOmN9LHI9Zy53aWR0aE1vZGVsLnNocmlua1dyYXAsbT1nLmhlaWdodE1vZGVsLnNocmlua1dyYXAsaz1nLm92ZXJmbG93WCxoPWcub3ZlcmZsb3dZLG4sYixwLGosYSxxO2lmKGt8fGgpe249by5nZXRTY3JvbGxiYXJzTmVlZGVkKGsmJmMud2lkdGgsaCYmYy5oZWlnaHQsZy5tYXhDaGlsZE1pbldpZHRoLGcubWF4Q2hpbGRNaW5IZWlnaHQpO2lmKG4pe2I9RXh0LmdldFNjcm9sbGJhclNpemUoKTtpZihuJjEpe2MuaGVpZ2h0LT1iLmhlaWdodH1pZihuJjIpe2Mud2lkdGgtPWIud2lkdGh9fX1mb3Ioaj0wO2o8ZDsrK2ope2UuaW5kZXg9ajtvLmZpdEl0ZW0obFtqXSxlKX1pZihtfHxyKXtwPWcudGFyZ2V0Q29udGV4dC5nZXRQYWRkaW5nSW5mbygpO2lmKHIpe2lmKGgmJiFjLmdvdEhlaWdodCl7by5kb25lPWZhbHNlfWVsc2V7YT1lLmNvbnRlbnRXaWR0aCtwLndpZHRoO2lmKG4mMil7YSs9Yi53aWR0aH1pZighZy5zZXRDb250ZW50V2lkdGgoYSkpe28uZG9uZT1mYWxzZX19fWlmKG0pe2lmKGsmJiFjLmdvdFdpZHRoKXtvLmRvbmU9ZmFsc2V9ZWxzZXtxPWUuY29udGVudEhlaWdodCtwLmhlaWdodDtpZihuJjEpe3ErPWIuaGVpZ2h0fWlmKCFnLnNldENvbnRlbnRIZWlnaHQocSkpe28uZG9uZT1mYWxzZX19fX19LGZpdEl0ZW06ZnVuY3Rpb24oYixjKXt2YXIgYT10aGlzO2lmKGIuaW52YWxpZCl7YS5kb25lPWZhbHNlO3JldHVybn1jLm1hcmdpbnM9Yi5nZXRNYXJnaW5JbmZvKCk7Yy5uZWVkZWQ9Yy5nb3Q9MDthLmZpdEl0ZW1XaWR0aChiLGMpO2EuZml0SXRlbUhlaWdodChiLGMpO2lmKGMuZ290IT1jLm5lZWRlZCl7YS5kb25lPWZhbHNlfX0sZml0SXRlbVdpZHRoOmZ1bmN0aW9uKGMsZCl7dmFyIGEsYjtpZihkLm93bmVyQ29udGV4dC53aWR0aE1vZGVsLnNocmlua1dyYXApe2I9Yy5nZXRQcm9wKCJ3aWR0aCIpK2QubWFyZ2lucy53aWR0aDthPWQuY29udGVudFdpZHRoO2lmKGE9PT11bmRlZmluZWQpe2QuY29udGVudFdpZHRoPWJ9ZWxzZXtkLmNvbnRlbnRXaWR0aD1NYXRoLm1heChhLGIpfX1lbHNle2lmKGMud2lkdGhNb2RlbC5jYWxjdWxhdGVkKXsrK2QubmVlZGVkO2lmKGQudGFyZ2V0U2l6ZS5nb3RXaWR0aCl7KytkLmdvdDt0aGlzLnNldEl0ZW1XaWR0aChjLGQpfX19dGhpcy5wb3NpdGlvbkl0ZW1YKGMsZCl9LGZpdEl0ZW1IZWlnaHQ6ZnVuY3Rpb24oYyxkKXt2YXIgYixhO2lmKGQub3duZXJDb250ZXh0LmhlaWdodE1vZGVsLnNocmlua1dyYXApe2E9Yy5nZXRQcm9wKCJoZWlnaHQiKStkLm1hcmdpbnMuaGVpZ2h0O2I9ZC5jb250ZW50SGVpZ2h0O2lmKGI9PT11bmRlZmluZWQpe2QuY29udGVudEhlaWdodD1hfWVsc2V7ZC5jb250ZW50SGVpZ2h0PU1hdGgubWF4KGIsYSl9fWVsc2V7aWYoYy5oZWlnaHRNb2RlbC5jYWxjdWxhdGVkKXsrK2QubmVlZGVkO2lmKGQudGFyZ2V0U2l6ZS5nb3RIZWlnaHQpeysrZC5nb3Q7dGhpcy5zZXRJdGVtSGVpZ2h0KGMsZCl9fX10aGlzLnBvc2l0aW9uSXRlbVkoYyxkKX0scG9zaXRpb25JdGVtWDpmdW5jdGlvbihhLGMpe3ZhciBiPWMubWFyZ2lucztpZihjLmluZGV4fHxiLmxlZnQpe2Euc2V0UHJvcCgieCIsYi5sZWZ0KX1pZihiLndpZHRoKXthLnNldFByb3AoIm1hcmdpbi1yaWdodCIsYi53aWR0aCl9fSxwb3NpdGlvbkl0ZW1ZOmZ1bmN0aW9uKGEsYyl7dmFyIGI9Yy5tYXJnaW5zO2lmKGMuaW5kZXh8fGIudG9wKXthLnNldFByb3AoInkiLGIudG9wKX1pZihiLmhlaWdodCl7YS5zZXRQcm9wKCJtYXJnaW4tYm90dG9tIixiLmhlaWdodCl9fSxzZXRJdGVtSGVpZ2h0OmZ1bmN0aW9uKGEsYil7YS5zZXRIZWlnaHQoYi50YXJnZXRTaXplLmhlaWdodC1iLm1hcmdpbnMuaGVpZ2h0KX0sc2V0SXRlbVdpZHRoOmZ1bmN0aW9uKGEsYil7YS5zZXRXaWR0aChiLnRhcmdldFNpemUud2lkdGgtYi5tYXJnaW5zLndpZHRoKX19KTtFeHQuZGVmaW5lKCJFeHQucGFuZWwuVGFibGUiLHtleHRlbmQ6IkV4dC5wYW5lbC5QYW5lbCIsYWxpYXM6IndpZGdldC50YWJsZXBhbmVsIix1c2VzOlsiRXh0LnNlbGVjdGlvbi5Sb3dNb2RlbCIsIkV4dC5zZWxlY3Rpb24uQ2VsbE1vZGVsIiwiRXh0LnNlbGVjdGlvbi5DaGVja2JveE1vZGVsIiwiRXh0LmdyaWQuUGFnaW5nU2Nyb2xsZXIiLCJFeHQuZ3JpZC5oZWFkZXIuQ29udGFpbmVyIiwiRXh0LmdyaWQuTG9ja2FibGUiXSxleHRyYUJhc2VDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImdyaWQiLGV4dHJhQm9keUNsczpFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1ib2R5IixsYXlvdXQ6ImZpdCIsaGFzVmlldzpmYWxzZSx2aWV3VHlwZTpudWxsLHNlbFR5cGU6InJvd21vZGVsIixzY3JvbGw6dHJ1ZSxkZWZlclJvd1JlbmRlcjp0cnVlLHNvcnRhYmxlQ29sdW1uczp0cnVlLGVuYWJsZUxvY2tpbmc6ZmFsc2Usc2Nyb2xsZXJPd25lcjp0cnVlLGVuYWJsZUNvbHVtbk1vdmU6dHJ1ZSxzZWFsZWRDb2x1bW5zOmZhbHNlLGVuYWJsZUNvbHVtblJlc2l6ZTp0cnVlLGVuYWJsZUNvbHVtbkhpZGU6dHJ1ZSxyb3dMaW5lczp0cnVlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgaD10aGlzLGs9aC5zY3JvbGwsYj1mYWxzZSxhPWZhbHNlLGc9aC5jb2x1bW5zfHxoLmNvbE1vZGVsLGosYz1oLmJvcmRlcixkLGU7aWYoaC5jb2x1bW5MaW5lcyl7aC5hZGRDbHMoRXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtd2l0aC1jb2wtbGluZXMiKX1pZihoLnJvd0xpbmVzKXtoLmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC13aXRoLXJvdy1saW5lcyIpfWguc3RvcmU9RXh0LmRhdGEuU3RvcmVNYW5hZ2VyLmxvb2t1cChoLnN0b3JlfHwiZXh0LWVtcHR5LXN0b3JlIik7aWYoZyBpbnN0YW5jZW9mIEV4dC5ncmlkLmhlYWRlci5Db250YWluZXIpe2guaGVhZGVyQ3Q9ZztoLmhlYWRlckN0LmJvcmRlcj1jO2guY29sdW1ucz1oLmhlYWRlckN0Lml0ZW1zLml0ZW1zfWVsc2V7aWYoRXh0LmlzQXJyYXkoZykpe2c9e2l0ZW1zOmcsYm9yZGVyOmN9fUV4dC5hcHBseShnLHtmb3JjZUZpdDpoLmZvcmNlRml0LHNvcnRhYmxlOmguc29ydGFibGVDb2x1bW5zLGVuYWJsZUNvbHVtbk1vdmU6aC5lbmFibGVDb2x1bW5Nb3ZlLGVuYWJsZUNvbHVtblJlc2l6ZTpoLmVuYWJsZUNvbHVtblJlc2l6ZSxlbmFibGVDb2x1bW5IaWRlOmguZW5hYmxlQ29sdW1uSGlkZSxib3JkZXI6YyxzZWFsZWQ6aC5zZWFsZWRDb2x1bW5zfSk7aC5jb2x1bW5zPWcuaXRlbXM7aWYoaC5lbmFibGVMb2NraW5nfHxFeHQuQ29tcG9uZW50UXVlcnkucXVlcnkoIntsb2NrZWQgIT09IHVuZGVmaW5lZH17cHJvY2Vzc2VkICE9IHRydWV9IixoLmNvbHVtbnMpLmxlbmd0aCl7aC5zZWxmLm1peGluKCJsb2NrYWJsZSIsRXh0LmdyaWQuTG9ja2FibGUpO2guaW5qZWN0TG9ja2FibGUoKX19aC5zY3JvbGxUYXNrPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzayhoLnN5bmNIb3Jpem9udGFsU2Nyb2xsLGgpO2guYWRkRXZlbnRzKCJyZWNvbmZpZ3VyZSIsInZpZXdyZWFkeSIpO2guYm9keUNscz1oLmJvZHlDbHN8fCIiO2guYm9keUNscys9KCIgIitoLmV4dHJhQm9keUNscyk7aC5jbHM9aC5jbHN8fCIiO2guY2xzKz0oIiAiK2guZXh0cmFCYXNlQ2xzKTtkZWxldGUgaC5hdXRvU2Nyb2xsO2lmKCFoLmhhc1ZpZXcpe2lmKCFoLmhlYWRlckN0KXtoLmhlYWRlckN0PW5ldyBFeHQuZ3JpZC5oZWFkZXIuQ29udGFpbmVyKGcpfWguY29sdW1ucz1oLmhlYWRlckN0Lml0ZW1zLml0ZW1zO2lmKGguc3RvcmUuYnVmZmVyZWQmJiFoLnN0b3JlLnJlbW90ZVNvcnQpe2ZvcihkPTAsZT1oLmNvbHVtbnMubGVuZ3RoO2Q8ZTtkKyspe2guY29sdW1uc1tkXS5zb3J0YWJsZT1mYWxzZX19aWYoaC5oaWRlSGVhZGVycyl7aC5oZWFkZXJDdC5oZWlnaHQ9MDtoLmhlYWRlckN0LmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1oZWFkZXItY3QtaGlkZGVuIik7aC5hZGRDbHMoRXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtaGVhZGVyLWhpZGRlbiIpO2lmKEV4dC5pc0lFUXVpcmtzKXtoLmhlYWRlckN0LnN0eWxlPXtkaXNwbGF5OiJub25lIn19fWlmKGs9PT10cnVlfHxrPT09ImJvdGgiKXtiPWE9dHJ1ZX1lbHNle2lmKGs9PT0iaG9yaXpvbnRhbCIpe2E9dHJ1ZX1lbHNle2lmKGs9PT0idmVydGljYWwiKXtiPXRydWV9fX1oLnJlbGF5SGVhZGVyQ3RFdmVudHMoaC5oZWFkZXJDdCk7aC5mZWF0dXJlcz1oLmZlYXR1cmVzfHxbXTtpZighRXh0LmlzQXJyYXkoaC5mZWF0dXJlcykpe2guZmVhdHVyZXM9W2guZmVhdHVyZXNdfWguZG9ja2VkSXRlbXM9W10uY29uY2F0KGguZG9ja2VkSXRlbXN8fFtdKTtoLmRvY2tlZEl0ZW1zLnVuc2hpZnQoaC5oZWFkZXJDdCk7aC52aWV3Q29uZmlnPWgudmlld0NvbmZpZ3x8e307aWYoaC5zdG9yZSYmaC5zdG9yZS5idWZmZXJlZCl7aC52aWV3Q29uZmlnLnByZXNlcnZlU2Nyb2xsT25SZWZyZXNoPXRydWV9ZWxzZXtpZihoLmludmFsaWRhdGVTY3JvbGxlck9uUmVmcmVzaCE9PXVuZGVmaW5lZCl7aC52aWV3Q29uZmlnLnByZXNlcnZlU2Nyb2xsT25SZWZyZXNoPSFoLmludmFsaWRhdGVTY3JvbGxlck9uUmVmcmVzaH19aj1oLmdldFZpZXcoKTtoLml0ZW1zPVtqXTtoLmhhc1ZpZXc9dHJ1ZTtpZihiKXtpZihoLnN0b3JlLmJ1ZmZlcmVkKXtoLnZlcnRpY2FsU2Nyb2xsZXI9bmV3IEV4dC5ncmlkLlBhZ2luZ1Njcm9sbGVyKEV4dC5hcHBseSh7cGFuZWw6aCxzdG9yZTpoLnN0b3JlLHZpZXc6aC52aWV3fSxoLnZlcnRpY2FsU2Nyb2xsZXIpKX19aWYoYSl7aWYoIWguaGlkZUhlYWRlcnMpe2oub24oe3Njcm9sbDp7Zm46aC5vbkhvcml6b250YWxTY3JvbGwsZWxlbWVudDoiZWwiLHNjb3BlOmh9fSl9fWgubW9uKGouc3RvcmUse2xvYWQ6aC5vblN0b3JlTG9hZCxzY29wZTpofSk7aC5tb24oaix7dmlld3JlYWR5Omgub25WaWV3UmVhZHkscmVmcmVzaDpoLm9uUmVzdG9yZUhvcnpTY3JvbGwsc2NvcGU6aH0pfXRoaXMucmVsYXlFdmVudHMoaC52aWV3LFsiYmVmb3JlaXRlbW1vdXNlZG93biIsImJlZm9yZWl0ZW1tb3VzZXVwIiwiYmVmb3JlaXRlbW1vdXNlZW50ZXIiLCJiZWZvcmVpdGVtbW91c2VsZWF2ZSIsImJlZm9yZWl0ZW1jbGljayIsImJlZm9yZWl0ZW1kYmxjbGljayIsImJlZm9yZWl0ZW1jb250ZXh0bWVudSIsIml0ZW1tb3VzZWRvd24iLCJpdGVtbW91c2V1cCIsIml0ZW1tb3VzZWVudGVyIiwiaXRlbW1vdXNlbGVhdmUiLCJpdGVtY2xpY2siLCJpdGVtZGJsY2xpY2siLCJpdGVtY29udGV4dG1lbnUiLCJiZWZvcmVjb250YWluZXJtb3VzZWRvd24iLCJiZWZvcmVjb250YWluZXJtb3VzZXVwIiwiYmVmb3JlY29udGFpbmVybW91c2VvdmVyIiwiYmVmb3JlY29udGFpbmVybW91c2VvdXQiLCJiZWZvcmVjb250YWluZXJjbGljayIsImJlZm9yZWNvbnRhaW5lcmRibGNsaWNrIiwiYmVmb3JlY29udGFpbmVyY29udGV4dG1lbnUiLCJjb250YWluZXJtb3VzZXVwIiwiY29udGFpbmVybW91c2VvdmVyIiwiY29udGFpbmVybW91c2VvdXQiLCJjb250YWluZXJjbGljayIsImNvbnRhaW5lcmRibGNsaWNrIiwiY29udGFpbmVyY29udGV4dG1lbnUiLCJzZWxlY3Rpb25jaGFuZ2UiLCJiZWZvcmVzZWxlY3QiLCJzZWxlY3QiLCJiZWZvcmVkZXNlbGVjdCIsImRlc2VsZWN0Il0pO2guY2FsbFBhcmVudChhcmd1bWVudHMpO2guYWRkU3RhdGVFdmVudHMoWyJjb2x1bW5yZXNpemUiLCJjb2x1bW5tb3ZlIiwiY29sdW1uaGlkZSIsImNvbHVtbnNob3ciLCJzb3J0Y2hhbmdlIl0pO2lmKGguaGVhZGVyQ3Qpe2guaGVhZGVyQ3Qub24oImFmdGVybGF5b3V0IixoLm9uUmVzdG9yZUhvcnpTY3JvbGwsaCl9fSxyZWxheUhlYWRlckN0RXZlbnRzOmZ1bmN0aW9uKGEpe3RoaXMucmVsYXlFdmVudHMoYSxbImNvbHVtbnJlc2l6ZSIsImNvbHVtbm1vdmUiLCJjb2x1bW5oaWRlIiwiY29sdW1uc2hvdyIsInNvcnRjaGFuZ2UiXSl9LGdldFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY2FsbFBhcmVudCgpLGM9YS5zdG9yZS5zb3J0ZXJzLmZpcnN0KCk7Yj1hLmFkZFByb3BlcnR5VG9TdGF0ZShiLCJjb2x1bW5zIiwoYS5oZWFkZXJDdHx8YSkuZ2V0Q29sdW1uc1N0YXRlKCkpO2lmKGMpe2I9YS5hZGRQcm9wZXJ0eVRvU3RhdGUoYiwic29ydCIse3Byb3BlcnR5OmMucHJvcGVydHksZGlyZWN0aW9uOmMuZGlyZWN0aW9uLHJvb3Q6Yy5yb290fSl9cmV0dXJuIGJ9LGFwcGx5U3RhdGU6ZnVuY3Rpb24oZCl7dmFyIGM9dGhpcyxlPWQuc29ydCxhPWMuc3RvcmUsYj1kLmNvbHVtbnM7ZGVsZXRlIGQuY29sdW1ucztjLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihiKXsoYy5oZWFkZXJDdHx8YykuYXBwbHlDb2x1bW5zU3RhdGUoYil9aWYoZSl7aWYoYS5yZW1vdGVTb3J0KXthLnNvcnQoe3Byb3BlcnR5OmUucHJvcGVydHksZGlyZWN0aW9uOmUuZGlyZWN0aW9uLHJvb3Q6ZS5yb290fSxudWxsLGZhbHNlKX1lbHNle2Euc29ydChlLnByb3BlcnR5LGUuZGlyZWN0aW9uKX19fSxnZXRTdG9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlfSxnZXRWaWV3OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiO2lmKCFhLnZpZXcpe2I9YS5nZXRTZWxlY3Rpb25Nb2RlbCgpO2Eudmlldz1FeHQud2lkZ2V0KEV4dC5hcHBseSh7fSxhLnZpZXdDb25maWcse2dyaWQ6YSxkZWZlckluaXRpYWxSZWZyZXNoOmEuZGVmZXJSb3dSZW5kZXIhPT1mYWxzZSxzY3JvbGw6YS5zY3JvbGwseHR5cGU6YS52aWV3VHlwZSxzdG9yZTphLnN0b3JlLGhlYWRlckN0OmEuaGVhZGVyQ3Qsc2VsTW9kZWw6YixmZWF0dXJlczphLmZlYXR1cmVzLHBhbmVsOmEsZW1wdHlUZXh0OmEuZW1wdHlUZXh0Pyc8ZGl2IGNsYXNzPSInK0V4dC5iYXNlQ1NTUHJlZml4KydncmlkLWVtcHR5Ij4nK2EuZW1wdHlUZXh0KyI8L2Rpdj4iOiIifSkpO2Eudmlldy5nZXRDb21wb25lbnRMYXlvdXQoKS5oZWFkZXJDdD1hLmhlYWRlckN0O2EubW9uKGEudmlldyx7dWlldmVudDphLnByb2Nlc3NFdmVudCxzY29wZTphfSk7Yi52aWV3PWEudmlldzthLmhlYWRlckN0LnZpZXc9YS52aWV3O2EucmVsYXlFdmVudHMoYS52aWV3LFsiY2VsbGNsaWNrIiwiY2VsbGRibGNsaWNrIl0pfXJldHVybiBhLnZpZXd9LHNldEF1dG9TY3JvbGw6RXh0LmVtcHR5Rm4scHJvY2Vzc0V2ZW50OmZ1bmN0aW9uKGcsYixhLGMsZCxpKXt2YXIgaD10aGlzLGo7aWYoZCE9PS0xKXtqPWguaGVhZGVyQ3QuZ2V0R3JpZENvbHVtbnMoKVtkXTtyZXR1cm4gai5wcm9jZXNzRXZlbnQuYXBwbHkoaixhcmd1bWVudHMpfX0sZGV0ZXJtaW5lU2Nyb2xsYmFyczpmdW5jdGlvbigpe30saW52YWxpZGF0ZVNjcm9sbGVyOmZ1bmN0aW9uKCl7fSxzY3JvbGxCeURlbHRhWTpmdW5jdGlvbihiLGEpe3RoaXMuZ2V0VmlldygpLnNjcm9sbEJ5KDAsYixhKX0sc2Nyb2xsQnlEZWx0YVg6ZnVuY3Rpb24oYixhKXt0aGlzLmdldFZpZXcoKS5zY3JvbGxCeShiLDAsYSl9LGFmdGVyQ29sbGFwc2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2Euc2F2ZVNjcm9sbFBvcygpO2Euc2F2ZVNjcm9sbFBvcygpO2EuY2FsbFBhcmVudChhcmd1bWVudHMpfSxhZnRlckV4cGFuZDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YS5yZXN0b3JlU2Nyb2xsUG9zKCk7YS5yZXN0b3JlU2Nyb2xsUG9zKCl9LHNhdmVTY3JvbGxQb3M6RXh0LmVtcHR5Rm4scmVzdG9yZVNjcm9sbFBvczpFeHQuZW1wdHlGbixvbkhlYWRlclJlc2l6ZTpmdW5jdGlvbigpe3RoaXMuZGVsYXlTY3JvbGwoKX0sb25IZWFkZXJNb3ZlOmZ1bmN0aW9uKGUsZyxhLGIsZCl7dmFyIGM9dGhpcztpZihjLm9wdGltaXplZENvbHVtbk1vdmU9PT1mYWxzZSl7Yy52aWV3LnJlZnJlc2goKX1lbHNle2Mudmlldy5tb3ZlQ29sdW1uKGIsZCxhKX1jLmRlbGF5U2Nyb2xsKCl9LG9uSGVhZGVySGlkZTpmdW5jdGlvbihhLGIpe3RoaXMuZGVsYXlTY3JvbGwoKX0sb25IZWFkZXJTaG93OmZ1bmN0aW9uKGEsYil7dGhpcy5kZWxheVNjcm9sbCgpfSxkZWxheVNjcm9sbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0U2Nyb2xsVGFyZ2V0KCkuZWw7aWYoYSl7dGhpcy5zY3JvbGxUYXNrLmRlbGF5KDEwLG51bGwsbnVsbCxbYS5kb20uc2Nyb2xsTGVmdF0pfX0sb25WaWV3UmVhZHk6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgidmlld3JlYWR5Iix0aGlzKX0sb25SZXN0b3JlSG9yelNjcm9sbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2Nyb2xsTGVmdFBvcztpZihhKXt0aGlzLnN5bmNIb3Jpem9udGFsU2Nyb2xsKGEsdHJ1ZSl9fSxnZXRTY3JvbGxlck93bmVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZighdGhpcy5zY3JvbGxlck93bmVyKXthPXRoaXMudXAoIltzY3JvbGxlck93bmVyXSIpfXJldHVybiBhfSxnZXRMaHNNYXJrZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiBhLmxoc01hcmtlcnx8KGEubGhzTWFya2VyPUV4dC5Eb21IZWxwZXIuYXBwZW5kKGEuZWwse2NsczpFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1yZXNpemUtbWFya2VyIn0sdHJ1ZSkpfSxnZXRSaHNNYXJrZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiBhLnJoc01hcmtlcnx8KGEucmhzTWFya2VyPUV4dC5Eb21IZWxwZXIuYXBwZW5kKGEuZWwse2NsczpFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1yZXNpemUtbWFya2VyIn0sdHJ1ZSkpfSxnZXRTZWxlY3Rpb25Nb2RlbDpmdW5jdGlvbigpe2lmKCF0aGlzLnNlbE1vZGVsKXt0aGlzLnNlbE1vZGVsPXt9fXZhciBiPSJTSU5HTEUiLGE7aWYodGhpcy5zaW1wbGVTZWxlY3Qpe2I9IlNJTVBMRSJ9ZWxzZXtpZih0aGlzLm11bHRpU2VsZWN0KXtiPSJNVUxUSSJ9fUV4dC5hcHBseUlmKHRoaXMuc2VsTW9kZWwse2FsbG93RGVzZWxlY3Q6dGhpcy5hbGxvd0Rlc2VsZWN0LG1vZGU6Yn0pO2lmKCF0aGlzLnNlbE1vZGVsLmV2ZW50cyl7YT10aGlzLnNlbE1vZGVsLnNlbFR5cGV8fHRoaXMuc2VsVHlwZTt0aGlzLnNlbE1vZGVsPUV4dC5jcmVhdGUoInNlbGVjdGlvbi4iK2EsdGhpcy5zZWxNb2RlbCl9aWYoIXRoaXMuc2VsTW9kZWwuaGFzUmVsYXlTZXR1cCl7dGhpcy5yZWxheUV2ZW50cyh0aGlzLnNlbE1vZGVsLFsic2VsZWN0aW9uY2hhbmdlIiwiYmVmb3Jlc2VsZWN0IiwiYmVmb3JlZGVzZWxlY3QiLCJzZWxlY3QiLCJkZXNlbGVjdCJdKTt0aGlzLnNlbE1vZGVsLmhhc1JlbGF5U2V0dXA9dHJ1ZX1pZih0aGlzLmRpc2FibGVTZWxlY3Rpb24pe3RoaXMuc2VsTW9kZWwubG9ja2VkPXRydWV9cmV0dXJuIHRoaXMuc2VsTW9kZWx9LGdldFNjcm9sbFRhcmdldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0U2Nyb2xsZXJPd25lcigpLGI9YS5xdWVyeSgidGFibGV2aWV3Iik7cmV0dXJuIGJbMV18fGJbMF19LG9uSG9yaXpvbnRhbFNjcm9sbDpmdW5jdGlvbihhLGIpe3RoaXMuc3luY0hvcml6b250YWxTY3JvbGwoYi5zY3JvbGxMZWZ0KX0sc3luY0hvcml6b250YWxTY3JvbGw6ZnVuY3Rpb24oZCxiKXt2YXIgYz10aGlzLGE7Yj1iPT09dHJ1ZTtpZihjLnJlbmRlcmVkJiYoYnx8ZCE9PWMuc2Nyb2xsTGVmdFBvcykpe2lmKGIpe2E9Yy5nZXRTY3JvbGxUYXJnZXQoKTthLmVsLmRvbS5zY3JvbGxMZWZ0PWR9Yy5oZWFkZXJDdC5lbC5kb20uc2Nyb2xsTGVmdD1kO2Muc2Nyb2xsTGVmdFBvcz1kfX0sb25TdG9yZUxvYWQ6RXh0LmVtcHR5Rm4sZ2V0RWRpdG9yUGFyZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keX0sYmluZFN0b3JlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5zdG9yZT1hO2IuZ2V0VmlldygpLmJpbmRTdG9yZShhKX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95KHRoaXMudmVydGljYWxTY3JvbGxlcik7dGhpcy5jYWxsUGFyZW50KCl9LHJlY29uZmlndXJlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuaGVhZGVyQ3Q7aWYoYy5sb2NrYWJsZSl7Yy5yZWNvbmZpZ3VyZUxvY2thYmxlKGEsYil9ZWxzZXtFeHQuc3VzcGVuZExheW91dHMoKTtpZihiKXtkZWxldGUgYy5zY3JvbGxMZWZ0UG9zO2QucmVtb3ZlQWxsKCk7ZC5hZGQoYil9aWYoYSl7YT1FeHQuU3RvcmVNYW5hZ2VyLmxvb2t1cChhKTtjLmJpbmRTdG9yZShhKX1lbHNle2MuZ2V0VmlldygpLnJlZnJlc2goKX1kLnNldFNvcnRTdGF0ZSgpO0V4dC5yZXN1bWVMYXlvdXRzKHRydWUpfWMuZmlyZUV2ZW50KCJyZWNvbmZpZ3VyZSIsYyxhLGIpfX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLlZpZXciLHtleHRlbmQ6IkV4dC52aWV3LlRhYmxlIixhbGlhczoid2lkZ2V0LmdyaWR2aWV3IixzdHJpcGVSb3dzOnRydWUsYXV0b1Njcm9sbDp0cnVlfSk7RXh0LmRlZmluZSgiRXh0LmdyaWQuUGFuZWwiLHtleHRlbmQ6IkV4dC5wYW5lbC5UYWJsZSIscmVxdWlyZXM6WyJFeHQuZ3JpZC5WaWV3Il0sYWxpYXM6WyJ3aWRnZXQuZ3JpZHBhbmVsIiwid2lkZ2V0LmdyaWQiXSxhbHRlcm5hdGVDbGFzc05hbWU6WyJFeHQubGlzdC5MaXN0VmlldyIsIkV4dC5MaXN0VmlldyIsIkV4dC5ncmlkLkdyaWRQYW5lbCJdLHZpZXdUeXBlOiJncmlkdmlldyIsbG9ja2FibGU6ZmFsc2UsYm90aENmZ0NvcHk6WyJpbnZhbGlkYXRlU2Nyb2xsZXJPblJlZnJlc2giLCJoaWRlSGVhZGVycyIsImVuYWJsZUNvbHVtbkhpZGUiLCJlbmFibGVDb2x1bW5Nb3ZlIiwiZW5hYmxlQ29sdW1uUmVzaXplIiwic29ydGFibGVDb2x1bW5zIl0sbm9ybWFsQ2ZnQ29weTpbInZlcnRpY2FsU2Nyb2xsZXIiLCJ2ZXJ0aWNhbFNjcm9sbERvY2siLCJ2ZXJ0aWNhbFNjcm9sbGVyVHlwZSIsInNjcm9sbCJdLGxvY2tlZENmZ0NvcHk6W10scm93TGluZXM6dHJ1ZX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLlJvd0VkaXRvciIse2V4dGVuZDoiRXh0LmZvcm0uUGFuZWwiLHJlcXVpcmVzOlsiRXh0LnRpcC5Ub29sVGlwIiwiRXh0LnV0aWwuSGFzaE1hcCIsIkV4dC51dGlsLktleU5hdiJdLHNhdmVCdG5UZXh0OiJVcGRhdGUiLGNhbmNlbEJ0blRleHQ6IkNhbmNlbCIsZXJyb3JzVGV4dDoiRXJyb3JzIixkaXJ0eVRleHQ6IllvdSBuZWVkIHRvIGNvbW1pdCBvciBjYW5jZWwgeW91ciBjaGFuZ2VzIixsYXN0U2Nyb2xsTGVmdDowLGxhc3RTY3JvbGxUb3A6MCxib3JkZXI6ZmFsc2UsaGlkZU1vZGU6Im9mZnNldHMiLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE7Yi5jbHM9RXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtcm93LWVkaXRvciI7Yi5sYXlvdXQ9e3R5cGU6Imhib3giLGFsaWduOiJtaWRkbGUifTtiLmNvbHVtbnM9bmV3IEV4dC51dGlsLkhhc2hNYXAoKTtiLmNvbHVtbnMuZ2V0S2V5PWZ1bmN0aW9uKGQpe3ZhciBjO2lmKGQuZ2V0RWRpdG9yKXtjPWQuZ2V0RWRpdG9yKCk7aWYoYyl7cmV0dXJuIGMuaWR9fXJldHVybiBkLmlkfTtiLm1vbihiLmNvbHVtbnMse2FkZDpiLm9uRmllbGRBZGQscmVtb3ZlOmIub25GaWVsZFJlbW92ZSxyZXBsYWNlOmIub25GaWVsZFJlcGxhY2Usc2NvcGU6Yn0pO2IuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGIuZmllbGRzKXtiLnNldEZpZWxkKGIuZmllbGRzKTtkZWxldGUgYi5maWVsZHN9Yi5tb24oRXh0LmNvbnRhaW5lci5Db250YWluZXIuaGllcmFyY2h5RXZlbnRTb3VyY2Use3Njb3BlOmIsc2hvdzpiLnJlcG9zaXRpb25JZlZpc2libGV9KTthPWIuZ2V0Rm9ybSgpO2EudHJhY2tSZXNldE9uTG9hZD10cnVlfSxvbkZpZWxkQ2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxiPWMuZ2V0Rm9ybSgpLGE9Yi5pc1ZhbGlkKCk7aWYoYy5lcnJvclN1bW1hcnkmJmMuaXNWaXNpYmxlKCkpe2NbYT8iaGlkZVRvb2xUaXAiOiJzaG93VG9vbFRpcCJdKCl9Yy51cGRhdGVCdXR0b24oYSk7Yy5pc1ZhbGlkPWF9LHVwZGF0ZUJ1dHRvbjpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmZsb2F0aW5nQnV0dG9ucztpZihhKXthLmNoaWxkKCIjdXBkYXRlIikuc2V0RGlzYWJsZWQoIWIpfX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5lZGl0aW5nUGx1Z2luO2IuY2FsbFBhcmVudChhcmd1bWVudHMpO2IubW9uKGIucmVuZGVyVG8sInNjcm9sbCIsYi5vbkN0U2Nyb2xsLGIse2J1ZmZlcjoxMDB9KTtiLm1vbihiLmVsLHtjbGljazpFeHQuZW1wdHlGbixzdG9wUHJvcGFnYXRpb246dHJ1ZX0pO2IuZWwuc3dhbGxvd0V2ZW50KFsia2V5cHJlc3MiLCJrZXlkb3duIl0pO2Iua2V5TmF2PW5ldyBFeHQudXRpbC5LZXlOYXYoYi5lbCx7ZW50ZXI6YS5jb21wbGV0ZUVkaXQsZXNjOmEub25Fc2NLZXksc2NvcGU6YX0pO2IubW9uKGEudmlldyx7YmVmb3JlcmVmcmVzaDpiLm9uQmVmb3JlVmlld1JlZnJlc2gscmVmcmVzaDpiLm9uVmlld1JlZnJlc2gsaXRlbXJlbW92ZTpiLm9uVmlld0l0ZW1SZW1vdmUsc2NvcGU6Yn0pfSxvbkJlZm9yZVZpZXdSZWZyZXNoOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMsYT1iLmVsLmRvbTtpZihjLmVsLmRvbS5wYXJlbnROb2RlPT09YSl7YS5yZW1vdmVDaGlsZChjLmVsLmRvbSl9fSxvblZpZXdSZWZyZXNoOmZ1bmN0aW9uKGMpe3ZhciBlPXRoaXMsYj1jLmVsLmRvbSxkPWUuY29udGV4dCxhO2IuYXBwZW5kQ2hpbGQoZS5lbC5kb20pO2lmKGQmJihhPWQuc3RvcmUuaW5kZXhPZihkLnJlY29yZCkpPj0wKXtkLnJvdz1jLmdldE5vZGUoYSk7ZS5yZXBvc2l0aW9uKCk7aWYoZS50b29sdGlwJiZlLnRvb2x0aXAuaXNWaXNpYmxlKCkpe2UudG9vbHRpcC5zZXRUYXJnZXQoZC5yb3cpfX1lbHNle2UuZWRpdGluZ1BsdWdpbi5jYW5jZWxFZGl0KCl9fSxvblZpZXdJdGVtUmVtb3ZlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jb250ZXh0O2lmKGMmJmE9PT1jLnJlY29yZCl7dGhpcy5lZGl0aW5nUGx1Z2luLmNhbmNlbEVkaXQoKX19LG9uQ3RTY3JvbGw6ZnVuY3Rpb24oZCxjKXt2YXIgYT10aGlzLGI9Yy5zY3JvbGxUb3AsZz1jLnNjcm9sbExlZnQ7aWYoYiE9PWEubGFzdFNjcm9sbFRvcCl7YS5sYXN0U2Nyb2xsVG9wPWI7aWYoKGEudG9vbHRpcCYmYS50b29sdGlwLmlzVmlzaWJsZSgpKXx8YS5oaWRkZW5UaXApe2EucmVwb3NpdGlvblRpcCgpfX1pZihnIT09YS5sYXN0U2Nyb2xsTGVmdCl7YS5sYXN0U2Nyb2xsTGVmdD1nO2EucmVwb3NpdGlvbigpfX0sb25Db2x1bW5BZGQ6ZnVuY3Rpb24oYSl7aWYoIWEuaXNHcm91cEhlYWRlcil7dGhpcy5zZXRGaWVsZChhKX19LG9uQ29sdW1uUmVtb3ZlOmZ1bmN0aW9uKGEpe3RoaXMuY29sdW1ucy5yZW1vdmUoYSl9LG9uQ29sdW1uUmVzaXplOmZ1bmN0aW9uKGIsYSl7aWYoIWIuaXNHcm91cEhlYWRlcil7Yi5nZXRFZGl0b3IoKS5zZXRXaWR0aChhLTIpO3RoaXMucmVwb3NpdGlvbklmVmlzaWJsZSgpfX0sb25Db2x1bW5IaWRlOmZ1bmN0aW9uKGEpe2lmKCFhLmlzR3JvdXBIZWFkZXIpe2EuZ2V0RWRpdG9yKCkuaGlkZSgpO3RoaXMucmVwb3NpdGlvbklmVmlzaWJsZSgpfX0sb25Db2x1bW5TaG93OmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0RWRpdG9yKCk7Yi5zZXRXaWR0aChhLmdldFdpZHRoKCktMikuc2hvdygpO3RoaXMucmVwb3NpdGlvbklmVmlzaWJsZSgpfSxvbkNvbHVtbk1vdmU6ZnVuY3Rpb24oYixhLGMpe2lmKCFiLmlzR3JvdXBIZWFkZXIpe3ZhciBkPWIuZ2V0RWRpdG9yKCk7aWYodGhpcy5pdGVtcy5pbmRleE9mKGQpIT1jKXt0aGlzLm1vdmUoYSxjKX19fSxvbkZpZWxkQWRkOmZ1bmN0aW9uKGUsYSxiKXt2YXIgYz10aGlzLGcsZDtpZighYi5pc0dyb3VwSGVhZGVyKXtnPWMuZWRpdGluZ1BsdWdpbi5ncmlkLmhlYWRlckN0LmdldEhlYWRlckluZGV4KGIpO2Q9Yi5nZXRFZGl0b3Ioe3h0eXBlOiJkaXNwbGF5ZmllbGQifSk7Yy5pbnNlcnQoZyxkKX19LG9uRmllbGRSZW1vdmU6ZnVuY3Rpb24oZyxhLGIpe3ZhciBjPXRoaXMsZSxkO2lmKCFiLmlzR3JvdXBIZWFkZXIpe2U9Yi5nZXRFZGl0b3IoKTtkPWUuZWw7Yy5yZW1vdmUoZSxmYWxzZSk7aWYoZCl7ZC5yZW1vdmUoKX19fSxvbkZpZWxkUmVwbGFjZTpmdW5jdGlvbihkLGEsYyxiKXt0aGlzLm9uRmllbGRSZW1vdmUoZCxhLGIpfSxjbGVhckZpZWxkczpmdW5jdGlvbigpe3ZhciBiPXRoaXMuY29sdW1ucyxhO2ZvcihhIGluIGIpe2lmKGIuaGFzT3duUHJvcGVydHkoYSkpe2IucmVtb3ZlQXRLZXkoYSl9fX0sZ2V0RmxvYXRpbmdCdXR0b25zOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxnPUV4dC5iYXNlQ1NTUHJlZml4LGQ9ZysiZ3JpZC1yb3ctZWRpdG9yLWJ1dHRvbnMiLGM9ZS5lZGl0aW5nUGx1Z2luLGE9RXh0LnBhbmVsLlBhbmVsLnByb3RvdHlwZS5taW5CdXR0b25XaWR0aCxiO2lmKCFlLmZsb2F0aW5nQnV0dG9ucyl7Yj1lLmZsb2F0aW5nQnV0dG9ucz1uZXcgRXh0LkNvbnRhaW5lcih7cmVuZGVyVHBsOlsnPGRpdiBjbGFzcz0ie2Jhc2VDbHN9LW1sIj48L2Rpdj4nLCc8ZGl2IGNsYXNzPSJ7YmFzZUNsc30tbXIiPjwvZGl2PicsJzxkaXYgY2xhc3M9IntiYXNlQ2xzfS1ibCI+PC9kaXY+JywnPGRpdiBjbGFzcz0ie2Jhc2VDbHN9LWJyIj48L2Rpdj4nLCc8ZGl2IGNsYXNzPSJ7YmFzZUNsc30tYmMiPjwvZGl2PicsInsldGhpcy5yZW5kZXJDb250YWluZXIob3V0LHZhbHVlcyklfSJdLHdpZHRoOjIwMCxyZW5kZXJUbzplLmVsLGJhc2VDbHM6ZCxsYXlvdXQ6e3R5cGU6Imhib3giLGFsaWduOiJtaWRkbGUifSxkZWZhdWx0czp7ZmxleDoxLG1hcmdpbnM6IjAgMSAwIDEifSxpdGVtczpbe2l0ZW1JZDoidXBkYXRlIix4dHlwZToiYnV0dG9uIixoYW5kbGVyOmMuY29tcGxldGVFZGl0LHNjb3BlOmMsdGV4dDplLnNhdmVCdG5UZXh0LG1pbldpZHRoOmF9LHt4dHlwZToiYnV0dG9uIixoYW5kbGVyOmMuY2FuY2VsRWRpdCxzY29wZTpjLHRleHQ6ZS5jYW5jZWxCdG5UZXh0LG1pbldpZHRoOmF9XX0pO2UubW9uKGIuZWwse21vdXNlZG93bjpFeHQuZW1wdHlGbixjbGljazpFeHQuZW1wdHlGbixzdG9wRXZlbnQ6dHJ1ZX0pfXJldHVybiBlLmZsb2F0aW5nQnV0dG9uc30scmVwb3NpdGlvbklmVmlzaWJsZTpmdW5jdGlvbihkKXt2YXIgYj10aGlzLGE9Yi52aWV3O2lmKGQmJihkPT1ifHwhYS5pc0Rlc2NlbmRhbnRPZihkKSkpe3JldHVybn1pZihiLmlzVmlzaWJsZSgpJiZhLmlzVmlzaWJsZSh0cnVlKSl7Yi5yZXBvc2l0aW9uKCl9fSxyZXBvc2l0aW9uOmZ1bmN0aW9uKHIpe3ZhciBzPXRoaXMsYz1zLmNvbnRleHQsZT1jJiZFeHQuZ2V0KGMucm93KSxwPXMuZ2V0RmxvYXRpbmdCdXR0b25zKCkscT1wLmVsLGE9cy5lZGl0aW5nUGx1Z2luLmdyaWQsZz1hLnZpZXcuZWwsbz1hLmhlYWRlckN0LmdldEZ1bGxXaWR0aCgpLHQ9YS5nZXRXaWR0aCgpLGw9TWF0aC5taW4obyx0KSxuPWEudmlldy5lbC5kb20uc2Nyb2xsTGVmdCxpPXAuZ2V0V2lkdGgoKSxkPShsLWkpLzIrbixqLGgsbSxrPWZ1bmN0aW9uKCl7cS5zY3JvbGxJbnRvVmlldyhnLGZhbHNlKTtpZihyJiZyLmNhbGxiYWNrKXtyLmNhbGxiYWNrLmNhbGwoci5zY29wZXx8cyl9fSxiO2lmKGUmJkV4dC5pc0VsZW1lbnQoZS5kb20pKXtlLnNjcm9sbEludG9WaWV3KGcsZmFsc2UpO2o9ZS5nZXRYWSgpWzFdLTU7aD1lLmdldEhlaWdodCgpO209aCsocy5lZGl0aW5nUGx1Z2luLmdyaWQucm93TGluZXM/OToxMCk7aWYocy5nZXRIZWlnaHQoKSE9bSl7cy5zZXRIZWlnaHQobSk7cy5lbC5zZXRMZWZ0KDApfWlmKHIpe2I9e3RvOnt5Omp9LGR1cmF0aW9uOnIuZHVyYXRpb258fDEyNSxsaXN0ZW5lcnM6e2FmdGVyYW5pbWF0ZTpmdW5jdGlvbigpe2soKTtqPWUuZ2V0WFkoKVsxXS01fX19O3MuZWwuYW5pbWF0ZShiKX1lbHNle3MuZWwuc2V0WShqKTtrKCl9fWlmKHMuZ2V0V2lkdGgoKSE9byl7cy5zZXRXaWR0aChvKX1xLnNldExlZnQoZCl9LGdldEVkaXRvcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKEV4dC5pc051bWJlcihhKSl7cmV0dXJuIGIucXVlcnkoIj5baXNGb3JtRmllbGRdIilbYV19ZWxzZXtpZihhLmlzSGVhZGVyJiYhYS5pc0dyb3VwSGVhZGVyKXtyZXR1cm4gYS5nZXRFZGl0b3IoKX19fSxyZW1vdmVGaWVsZDpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2I9YS5nZXRFZGl0b3IoYik7YS5tdW4oYiwidmFsaWRpdHljaGFuZ2UiLGEub25WYWxpZGl0eUNoYW5nZSxhKTthLmNvbHVtbnMucmVtb3ZlQXRLZXkoYi5pZCk7RXh0LmRlc3Ryb3koYil9LHNldEZpZWxkOmZ1bmN0aW9uKGIpe3ZhciBkPXRoaXMsYSxjLGU7aWYoRXh0LmlzQXJyYXkoYikpe2M9Yi5sZW5ndGg7Zm9yKGE9MDthPGM7YSsrKXtkLnNldEZpZWxkKGJbYV0pfXJldHVybn1lPWIuZ2V0RWRpdG9yKG51bGwse3h0eXBlOiJkaXNwbGF5ZmllbGQiLGdldE1vZGVsRGF0YTpmdW5jdGlvbigpe3JldHVybiBudWxsfX0pO2UubWFyZ2lucz0iMCAwIDAgMiI7ZC5tb24oZSwiY2hhbmdlIixkLm9uRmllbGRDaGFuZ2UsZCk7aWYoZC5pc1Zpc2libGUoKSYmZC5jb250ZXh0KXtpZihlLmlzKCJkaXNwbGF5ZmllbGQiKSl7ZC5yZW5kZXJDb2x1bW5EYXRhKGUsZC5jb250ZXh0LnJlY29yZCxiKX1lbHNle2Uuc3VzcGVuZEV2ZW50cygpO2Uuc2V0VmFsdWUoZC5jb250ZXh0LnJlY29yZC5nZXQoYi5kYXRhSW5kZXgpKTtlLnJlc3VtZUV2ZW50cygpfX1kLmNvbHVtbnMuYWRkKGUuaWQsYik7aWYoYi5oaWRkZW4pe2Qub25Db2x1bW5IaWRlKGIpfWVsc2V7aWYoYi5yZW5kZXJlZCl7ZC5vbkNvbHVtblNob3coYil9fX0sbG9hZFJlY29yZDpmdW5jdGlvbihkKXt2YXIgaj10aGlzLGE9ai5nZXRGb3JtKCksZT1hLmdldEZpZWxkcygpLGg9ZS5pdGVtcyxiPWgubGVuZ3RoLGMsZyxrO2ZvcihjPTA7YzxiO2MrKyl7aFtjXS5zdXNwZW5kRXZlbnRzKCl9YS5sb2FkUmVjb3JkKGQpO2ZvcihjPTA7YzxiO2MrKyl7aFtjXS5yZXN1bWVFdmVudHMoKX1rPWEuaXNWYWxpZCgpO2lmKGouZXJyb3JTdW1tYXJ5KXtpZihrKXtqLmhpZGVUb29sVGlwKCl9ZWxzZXtqLnNob3dUb29sVGlwKCl9fWoudXBkYXRlQnV0dG9uKGspO2c9ai5xdWVyeSgiPmRpc3BsYXlmaWVsZCIpO2I9Zy5sZW5ndGg7Zm9yKGM9MDtjPGI7YysrKXtqLnJlbmRlckNvbHVtbkRhdGEoZ1tjXSxkKX19LHJlbmRlckNvbHVtbkRhdGE6ZnVuY3Rpb24obSxpLGMpe3ZhciBrPXRoaXMsYT1rLmVkaXRpbmdQbHVnaW4uZ3JpZCxlPWEuaGVhZGVyQ3QsbD1hLnZpZXcsbz1sLnN0b3JlLGc9Y3x8ay5jb2x1bW5zLmdldChtLmlkKSxuPWkuZ2V0KGcuZGF0YUluZGV4KSxqPWcuZWRpdFJlbmRlcmVyfHxnLnJlbmRlcmVyLGIsZCxoO2lmKGope2I9e3RkQ2xzOiIiLHN0eWxlOiIifTtkPW8uaW5kZXhPZihpKTtoPWUuZ2V0SGVhZGVySW5kZXgoZyk7bj1qLmNhbGwoZy5zY29wZXx8ZS5vd25lckN0LG4sYixpLGQsaCxvLGwpfW0uc2V0UmF3VmFsdWUobik7bS5yZXNldE9yaWdpbmFsVmFsdWUoKX0sYmVmb3JlRWRpdDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5pc1Zpc2libGUoKSYmYS5lcnJvclN1bW1hcnkmJiFhLmF1dG9DYW5jZWwmJmEuaXNEaXJ0eSgpKXthLnNob3dUb29sVGlwKCk7cmV0dXJuIGZhbHNlfX0sc3RhcnRFZGl0OmZ1bmN0aW9uKGEsZyl7dmFyIGU9dGhpcyxkPWUuZWRpdGluZ1BsdWdpbi5ncmlkLGI9ZC5zdG9yZSxjPWUuY29udGV4dD1FeHQuYXBwbHkoZS5lZGl0aW5nUGx1Z2luLmNvbnRleHQse3ZpZXc6ZC5nZXRWaWV3KCksc3RvcmU6Yn0pO2MuZ3JpZC5nZXRTZWxlY3Rpb25Nb2RlbCgpLnNlbGVjdChhKTtlLmxvYWRSZWNvcmQoYSk7aWYoIWUuaXNWaXNpYmxlKCkpe2Uuc2hvdygpO2UuZm9jdXNDb250ZXh0Q2VsbCgpfWVsc2V7ZS5yZXBvc2l0aW9uKHtjYWxsYmFjazp0aGlzLmZvY3VzQ29udGV4dENlbGx9KX19LGZvY3VzQ29udGV4dENlbGw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEVkaXRvcih0aGlzLmNvbnRleHQuY29sSWR4KTtpZihhJiZhLmZvY3VzKXthLmZvY3VzKCl9fSxjYW5jZWxFZGl0OmZ1bmN0aW9uKCl7dmFyIGc9dGhpcyxlPWcuZ2V0Rm9ybSgpLGE9ZS5nZXRGaWVsZHMoKSxiPWEuaXRlbXMsZD1iLmxlbmd0aCxjO2cuaGlkZSgpO2UuY2xlYXJJbnZhbGlkKCk7Zm9yKGM9MDtjPGQ7YysrKXtiW2NdLnN1c3BlbmRFdmVudHMoKX1lLnJlc2V0KCk7Zm9yKGM9MDtjPGQ7YysrKXtiW2NdLnJlc3VtZUV2ZW50cygpfX0sY29tcGxldGVFZGl0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuZ2V0Rm9ybSgpO2lmKCFhLmlzVmFsaWQoKSl7cmV0dXJufWEudXBkYXRlUmVjb3JkKGIuY29udGV4dC5yZWNvcmQpO2IuaGlkZSgpO3JldHVybiB0cnVlfSxvblNob3c6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLnJlcG9zaXRpb24oKX0sb25IaWRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihhLnRvb2x0aXApe2EuaGlkZVRvb2xUaXAoKX1pZihhLmNvbnRleHQpe2EuY29udGV4dC52aWV3LmZvY3VzKCk7YS5jb250ZXh0PW51bGx9fSxpc0RpcnR5OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuZ2V0Rm9ybSgpO3JldHVybiBhLmlzRGlydHkoKX0sZ2V0VG9vbFRpcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvb2x0aXB8fCh0aGlzLnRvb2x0aXA9bmV3IEV4dC50aXAuVG9vbFRpcCh7Y2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLXJvdy1lZGl0b3ItZXJyb3JzIix0aXRsZTp0aGlzLmVycm9yc1RleHQsYXV0b0hpZGU6ZmFsc2UsY2xvc2FibGU6dHJ1ZSxjbG9zZUFjdGlvbjoiZGlzYWJsZSIsYW5jaG9yOiJsZWZ0In0pKX0saGlkZVRvb2xUaXA6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5nZXRUb29sVGlwKCk7aWYoYi5yZW5kZXJlZCl7Yi5kaXNhYmxlKCl9YS5oaWRkZW5UaXA9ZmFsc2V9LHNob3dUb29sVGlwOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxkPWMuZ2V0VG9vbFRpcCgpLGE9Yy5jb250ZXh0LGU9RXh0LmdldChhLnJvdyksYj1hLmdyaWQudmlldy5lbDtkLnNldFRhcmdldChlKTtkLnNob3dBdChbLTEwMDAwLC0xMDAwMF0pO2QudXBkYXRlKGMuZ2V0RXJyb3JzKCkpO2QubW91c2VPZmZzZXQ9W2IuZ2V0V2lkdGgoKS1lLmdldFdpZHRoKCkrYy5sYXN0U2Nyb2xsTGVmdCsxNSwwXTtjLnJlcG9zaXRpb25UaXAoKTtkLmRvTGF5b3V0KCk7ZC5lbmFibGUoKX0scmVwb3NpdGlvblRpcDpmdW5jdGlvbigpe3ZhciBpPXRoaXMsaj1pLmdldFRvb2xUaXAoKSxjPWkuY29udGV4dCxsPUV4dC5nZXQoYy5yb3cpLGs9Yy5ncmlkLnZpZXcuZWwsZT1rLmdldEhlaWdodCgpLGc9aS5sYXN0U2Nyb2xsVG9wLGg9ZytlLGI9bC5nZXRIZWlnaHQoKSxhPWwuZG9tLm9mZnNldFRvcCxkPWErYjtpZihkPmcmJmE8aCl7ai5zaG93KCk7aS5oaWRkZW5UaXA9ZmFsc2V9ZWxzZXtqLmhpZGUoKTtpLmhpZGRlblRpcD10cnVlfX0sZ2V0RXJyb3JzOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxlPSFkLmF1dG9DYW5jZWwmJmQuaXNEaXJ0eSgpP2QuZGlydHlUZXh0KyI8YnIgLz4iOiIiLGg9W10sYT1kLnF1ZXJ5KCI+W2lzRm9ybUZpZWxkXSIpLGM9YS5sZW5ndGgsYjtmdW5jdGlvbiBnKGkpe3JldHVybiI8bGk+IitpKyI8L2xpPiJ9Zm9yKGI9MDtiPGM7YisrKXtoPWguY29uY2F0KEV4dC5BcnJheS5tYXAoYVtiXS5nZXRFcnJvcnMoKSxnKSl9cmV0dXJuIGUrIjx1bD4iK2guam9pbigiIikrIjwvdWw+In0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95KHRoaXMuZmxvYXRpbmdCdXR0b25zLHRoaXMudG9vbHRpcCk7dGhpcy5jYWxsUGFyZW50KCl9fSk7RXh0LmRlZmluZSgiRXh0LmdyaWQucGx1Z2luLkhlYWRlclJlc2l6ZXIiLHtleHRlbmQ6IkV4dC5BYnN0cmFjdFBsdWdpbiIscmVxdWlyZXM6WyJFeHQuZGQuRHJhZ1RyYWNrZXIiLCJFeHQudXRpbC5SZWdpb24iXSxhbGlhczoicGx1Z2luLmdyaWRoZWFkZXJyZXNpemVyIixkaXNhYmxlZDpmYWxzZSxjb25maWc6e2R5bmFtaWM6ZmFsc2V9LGNvbEhlYWRlckNsczpFeHQuYmFzZUNTU1ByZWZpeCsiY29sdW1uLWhlYWRlciIsbWluQ29sV2lkdGg6NDAsbWF4Q29sV2lkdGg6MTAwMCx3UmVzaXplQ3Vyc29yOiJjb2wtcmVzaXplIixlUmVzaXplQ3Vyc29yOiJjb2wtcmVzaXplIixpbml0OmZ1bmN0aW9uKGEpe3RoaXMuaGVhZGVyQ3Q9YTthLm9uKCJyZW5kZXIiLHRoaXMuYWZ0ZXJIZWFkZXJSZW5kZXIsdGhpcyx7c2luZ2xlOnRydWV9KX0sZGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMudHJhY2tlcil7dGhpcy50cmFja2VyLmRlc3Ryb3koKX19LGFmdGVySGVhZGVyUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5oZWFkZXJDdCxhPWIuZWw7Yi5tb24oYSwibW91c2Vtb3ZlIix0aGlzLm9uSGVhZGVyQ3RNb3VzZU1vdmUsdGhpcyk7dGhpcy50cmFja2VyPW5ldyBFeHQuZGQuRHJhZ1RyYWNrZXIoe2Rpc2FibGVkOnRoaXMuZGlzYWJsZWQsb25CZWZvcmVTdGFydDpFeHQuRnVuY3Rpb24uYmluZCh0aGlzLm9uQmVmb3JlU3RhcnQsdGhpcyksb25TdGFydDpFeHQuRnVuY3Rpb24uYmluZCh0aGlzLm9uU3RhcnQsdGhpcyksb25EcmFnOkV4dC5GdW5jdGlvbi5iaW5kKHRoaXMub25EcmFnLHRoaXMpLG9uRW5kOkV4dC5GdW5jdGlvbi5iaW5kKHRoaXMub25FbmQsdGhpcyksdG9sZXJhbmNlOjMsYXV0b1N0YXJ0OjMwMCxlbDphfSl9LG9uSGVhZGVyQ3RNb3VzZU1vdmU6ZnVuY3Rpb24oYixrKXt2YXIgZD10aGlzLGEsaSxqLGcsYyxoO2lmKGQuaGVhZGVyQ3QuZHJhZ2dpbmcpe2lmKGQuYWN0aXZlSGQpe2QuYWN0aXZlSGQuZWwuZG9tLnN0eWxlLmN1cnNvcj0iIjtkZWxldGUgZC5hY3RpdmVIZH19ZWxzZXtpPWIuZ2V0VGFyZ2V0KCIuIitkLmNvbEhlYWRlckNscywzLHRydWUpO2lmKGkpe2o9RXh0LmdldENtcChpLmlkKTtpZihqLmlzT25MZWZ0RWRnZShiKSl7Zz1qLnByZXZpb3VzTm9kZSgiZ3JpZGNvbHVtbjpub3QoW2hpZGRlbl0pOm5vdChbaXNHcm91cEhlYWRlcl0pIik7aWYoZyl7aD1kLmhlYWRlckN0LnVwKCJ0YWJsZXBhbmVsIik7Yz1nLnVwKCJ0YWJsZXBhbmVsIik7aWYoISgoYz09PWgpfHwoKGgub3duZXJDdC5pc1hUeXBlKCJ0YWJsZXBhbmVsIikpJiZoLm93bmVyQ3Qudmlldy5sb2NrZWRHcmlkPT09YykpKXtnPW51bGx9fX1lbHNle2lmKGouaXNPblJpZ2h0RWRnZShiKSl7Zz1qfWVsc2V7Zz1udWxsfX1pZihnKXtpZihnLmlzR3JvdXBIZWFkZXIpe2E9Zy5nZXRHcmlkQ29sdW1ucygpO2c9YVthLmxlbmd0aC0xXX1pZihnJiYhKGcuZml4ZWR8fChnLnJlc2l6YWJsZT09PWZhbHNlKXx8ZC5kaXNhYmxlZCkpe2QuYWN0aXZlSGQ9ZztqLmVsLmRvbS5zdHlsZS5jdXJzb3I9ZC5lUmVzaXplQ3Vyc29yfX1lbHNle2ouZWwuZG9tLnN0eWxlLmN1cnNvcj0iIjtkZWxldGUgZC5hY3RpdmVIZH19fX0sb25CZWZvcmVTdGFydDpmdW5jdGlvbihiKXt2YXIgYT1iLmdldFRhcmdldCgpO3RoaXMuZHJhZ0hkPXRoaXMuYWN0aXZlSGQ7aWYoISF0aGlzLmRyYWdIZCYmIUV4dC5mbHkoYSkuaGFzQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJjb2x1bW4taGVhZGVyLXRyaWdnZXIiKSYmIXRoaXMuaGVhZGVyQ3QuZHJhZ2dpbmcpe3RoaXMudHJhY2tlci5jb25zdHJhaW5Ubz10aGlzLmdldENvbnN0cmFpblJlZ2lvbigpO3JldHVybiB0cnVlfWVsc2V7dGhpcy5oZWFkZXJDdC5kcmFnZ2luZz1mYWxzZTtyZXR1cm4gZmFsc2V9fSxnZXRDb25zdHJhaW5SZWdpb246ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGE9Yy5kcmFnSGQuZWwsZD1FeHQudXRpbC5SZWdpb24uZ2V0UmVnaW9uKGEpLGI7aWYoYy5oZWFkZXJDdC5mb3JjZUZpdCl7Yj1jLmRyYWdIZC5uZXh0Tm9kZSgiZ3JpZGNvbHVtbjpub3QoW2hpZGRlbl0pOm5vdChbaXNHcm91cEhlYWRlcl0pIil9cmV0dXJuIGQuYWRqdXN0KDAsYy5oZWFkZXJDdC5mb3JjZUZpdD8oYj9iLmdldFdpZHRoKCktYy5taW5Db2xXaWR0aDowKTpjLm1heENvbFdpZHRoLWEuZ2V0V2lkdGgoKSwwLGMubWluQ29sV2lkdGgpfSxvblN0YXJ0OmZ1bmN0aW9uKHUpe3ZhciB2PXRoaXMsaD12LmRyYWdIZCxiPWguZWwsbz1iLmdldFdpZHRoKCksaj12LmhlYWRlckN0LGw9dS5nZXRUYXJnZXQoKSxkLHIsZyxrLGMsbixhLGkscyxxLHAsbTtpZih2LmRyYWdIZCYmIUV4dC5mbHkobCkuaGFzQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJjb2x1bW4taGVhZGVyLXRyaWdnZXIiKSl7ai5kcmFnZ2luZz10cnVlfXYub3JpZ1dpZHRoPW87aWYoIXYuZHluYW1pYyl7ZD1iLmdldFhZKCk7cj1qLnVwKCJbc2Nyb2xsZXJPd25lcl0iKTtnPXYuZHJhZ0hkLnVwKCI6bm90KFtpc0dyb3VwSGVhZGVyXSkiKTtrPWcudXAoKTtjPXIuZ2V0TGhzTWFya2VyKCk7bj1yLmdldFJoc01hcmtlcigpO2E9bi5wYXJlbnQoKTtpPWEuZ2V0TG9jYWxYKCk7cz1hLmdldExvY2FsWSgpO3E9YS50cmFuc2xhdGVQb2ludHMoZCk7cD1rLmJvZHkuZ2V0SGVpZ2h0KCkrai5nZXRIZWlnaHQoKTttPXEudG9wLXM7Yy5zZXRUb3AobSk7bi5zZXRUb3AobSk7Yy5zZXRIZWlnaHQocCk7bi5zZXRIZWlnaHQocCk7Yy5zZXRMZWZ0KHEubGVmdC1pKTtuLnNldExlZnQocS5sZWZ0K28taSl9fSxvbkRyYWc6ZnVuY3Rpb24oaCl7aWYoIXRoaXMuZHluYW1pYyl7dmFyIGc9dGhpcy50cmFja2VyLmdldFhZKCJwb2ludCIpLGE9dGhpcy5oZWFkZXJDdC51cCgiW3Njcm9sbGVyT3duZXJdIiksaT1hLmdldFJoc01hcmtlcigpLGM9aS5wYXJlbnQoKSxiPWMudHJhbnNsYXRlUG9pbnRzKGcpLGQ9Yy5nZXRMb2NhbFgoKTtpLnNldExlZnQoYi5sZWZ0LWQpfWVsc2V7dGhpcy5kb1Jlc2l6ZSgpfX0sb25FbmQ6ZnVuY3Rpb24oZyl7dGhpcy5oZWFkZXJDdC5kcmFnZ2luZz1mYWxzZTtpZih0aGlzLmRyYWdIZCl7aWYoIXRoaXMuZHluYW1pYyl7dmFyIGQ9dGhpcy5kcmFnSGQsYj10aGlzLmhlYWRlckN0LnVwKCJbc2Nyb2xsZXJPd25lcl0iKSxjPWIuZ2V0TGhzTWFya2VyKCksaD1iLmdldFJoc01hcmtlcigpLGE9LTk5OTk7Yy5zZXRMZWZ0KGEpO2guc2V0TGVmdChhKX10aGlzLmRvUmVzaXplKCl9fSxkb1Jlc2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMuZHJhZ0hkKXt2YXIgYj10aGlzLmRyYWdIZCxhLGM9dGhpcy50cmFja2VyLmdldE9mZnNldCgicG9pbnQiKTtpZihiLmZsZXgpe2RlbGV0ZSBiLmZsZXh9RXh0LnN1c3BlbmRMYXlvdXRzKCk7Yi5zZXRXaWR0aCh0aGlzLm9yaWdXaWR0aCtjWzBdKTtpZih0aGlzLmhlYWRlckN0LmZvcmNlRml0KXthPWIubmV4dE5vZGUoImdyaWRjb2x1bW46bm90KFtoaWRkZW5dKTpub3QoW2lzR3JvdXBIZWFkZXJdKSIpO2lmKGEpe2RlbGV0ZSBhLmZsZXg7YS5zZXRXaWR0aChhLmdldFdpZHRoKCktY1swXSl9fUV4dC5yZXN1bWVMYXlvdXRzKHRydWUpfX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9dHJ1ZTtpZih0aGlzLnRyYWNrZXIpe3RoaXMudHJhY2tlci5kaXNhYmxlKCl9fSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPWZhbHNlO2lmKHRoaXMudHJhY2tlcil7dGhpcy50cmFja2VyLmVuYWJsZSgpfX19KTtFeHQuZGVmaW5lKCJFeHQuZ3JpZC5oZWFkZXIuRHJhZ1pvbmUiLHtleHRlbmQ6IkV4dC5kZC5EcmFnWm9uZSIsY29sSGVhZGVyQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJjb2x1bW4taGVhZGVyIixtYXhQcm94eVdpZHRoOjEyMCxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt0aGlzLmhlYWRlckN0PWE7dGhpcy5kZEdyb3VwPXRoaXMuZ2V0RERHcm91cCgpO3RoaXMuY2FsbFBhcmVudChbYS5lbF0pO3RoaXMucHJveHkuZWwuYWRkQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLWNvbC1kZCIpfSxnZXREREdyb3VwOmZ1bmN0aW9uKCl7cmV0dXJuImhlYWRlci1kZC16b25lLSIrdGhpcy5oZWFkZXJDdC51cCgiW3Njcm9sbGVyT3duZXJdIikuaWR9LGdldERyYWdEYXRhOmZ1bmN0aW9uKGIpe3ZhciBkPWIuZ2V0VGFyZ2V0KCIuIit0aGlzLmNvbEhlYWRlckNscyksYSxjO2lmKGQpe2E9RXh0LmdldENtcChkLmlkKTtpZighdGhpcy5oZWFkZXJDdC5kcmFnZ2luZyYmYS5kcmFnZ2FibGUmJiEoYS5pc09uTGVmdEVkZ2UoYil8fGEuaXNPblJpZ2h0RWRnZShiKSkpe2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Yy5pbm5lckhUTUw9RXh0LmdldENtcChkLmlkKS50ZXh0O3JldHVybntkZGVsOmMsaGVhZGVyOmF9fX1yZXR1cm4gZmFsc2V9LG9uQmVmb3JlRHJhZzpmdW5jdGlvbigpe3JldHVybiAhKHRoaXMuaGVhZGVyQ3QuZHJhZ2dpbmd8fHRoaXMuZGlzYWJsZWQpfSxvbkluaXREcmFnOmZ1bmN0aW9uKCl7dGhpcy5oZWFkZXJDdC5kcmFnZ2luZz10cnVlO3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxvbkRyYWdEcm9wOmZ1bmN0aW9uKCl7dGhpcy5oZWFkZXJDdC5kcmFnZ2luZz1mYWxzZTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sYWZ0ZXJSZXBhaXI6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoKTt0aGlzLmhlYWRlckN0LmRyYWdnaW5nPWZhbHNlfSxnZXRSZXBhaXJYWTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRyYWdEYXRhLmhlYWRlci5lbC5nZXRYWSgpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD10cnVlfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPWZhbHNlfX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLmhlYWRlci5Ecm9wWm9uZSIse2V4dGVuZDoiRXh0LmRkLkRyb3Bab25lIixjb2xIZWFkZXJDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImNvbHVtbi1oZWFkZXIiLHByb3h5T2Zmc2V0czpbLTQsLTldLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3RoaXMuaGVhZGVyQ3Q9YTt0aGlzLmRkR3JvdXA9dGhpcy5nZXREREdyb3VwKCk7dGhpcy5jYWxsUGFyZW50KFthLmVsXSl9LGdldERER3JvdXA6ZnVuY3Rpb24oKXtyZXR1cm4iaGVhZGVyLWRkLXpvbmUtIit0aGlzLmhlYWRlckN0LnVwKCJbc2Nyb2xsZXJPd25lcl0iKS5pZH0sZ2V0VGFyZ2V0RnJvbUV2ZW50OmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldFRhcmdldCgiLiIrdGhpcy5jb2xIZWFkZXJDbHMpfSxnZXRUb3BJbmRpY2F0b3I6ZnVuY3Rpb24oKXtpZighdGhpcy50b3BJbmRpY2F0b3Ipe3RoaXMudG9wSW5kaWNhdG9yPUV4dC5Eb21IZWxwZXIuYXBwZW5kKEV4dC5nZXRCb2R5KCkse2NsczoiY29sLW1vdmUtdG9wIixodG1sOiImIzE2MDsifSx0cnVlKX1yZXR1cm4gdGhpcy50b3BJbmRpY2F0b3J9LGdldEJvdHRvbUluZGljYXRvcjpmdW5jdGlvbigpe2lmKCF0aGlzLmJvdHRvbUluZGljYXRvcil7dGhpcy5ib3R0b21JbmRpY2F0b3I9RXh0LkRvbUhlbHBlci5hcHBlbmQoRXh0LmdldEJvZHkoKSx7Y2xzOiJjb2wtbW92ZS1ib3R0b20iLGh0bWw6IiYjMTYwOyJ9LHRydWUpfXJldHVybiB0aGlzLmJvdHRvbUluZGljYXRvcn0sZ2V0TG9jYXRpb246ZnVuY3Rpb24oZCxiKXt2YXIgYT1kLmdldFhZKClbMF0sYz1FeHQuZmx5KGIpLmdldFJlZ2lvbigpLGgsZztpZigoYy5yaWdodC1hKTw9KGMucmlnaHQtYy5sZWZ0KS8yKXtoPSJhZnRlciJ9ZWxzZXtoPSJiZWZvcmUifXJldHVybntwb3M6aCxoZWFkZXI6RXh0LmdldENtcChiLmlkKSxub2RlOmJ9fSxwb3NpdGlvbkluZGljYXRvcjpmdW5jdGlvbih2LG8sdSl7dmFyIGE9dGhpcy5nZXRMb2NhdGlvbih1LG8pLHE9YS5oZWFkZXIsZz1hLnBvcyxkPXYubmV4dFNpYmxpbmcoImdyaWRjb2x1bW46bm90KFtoaWRkZW5dKSIpLHQ9di5wcmV2aW91c1NpYmxpbmcoImdyaWRjb2x1bW46bm90KFtoaWRkZW5dKSIpLGwscixzLGIsYyxrLG0seCx3LG4saixwLGg7aWYoIXEuZHJhZ2dhYmxlJiZxLmdldEluZGV4KCk9PT0wKXtyZXR1cm4gZmFsc2V9dGhpcy5sYXN0TG9jYXRpb249YTtpZigodiE9PXEpJiYoKGc9PT0iYmVmb3JlIiYmZCE9PXEpfHwoZz09PSJhZnRlciImJnQhPT1xKSkmJiFxLmlzRGVzY2VuZGFudE9mKHYpKXtuPUV4dC5kZC5EcmFnRHJvcE1hbmFnZXIuZ2V0UmVsYXRlZCh0aGlzKTtqPW4ubGVuZ3RoO3A9MDtmb3IoO3A8ajtwKyspe2g9bltwXTtpZihoIT09dGhpcyYmaC5pbnZhbGlkYXRlRHJvcCl7aC5pbnZhbGlkYXRlRHJvcCgpfX10aGlzLnZhbGlkPXRydWU7bD10aGlzLmdldFRvcEluZGljYXRvcigpO3I9dGhpcy5nZXRCb3R0b21JbmRpY2F0b3IoKTtpZihnPT09ImJlZm9yZSIpe3M9InRsIjtiPSJibCJ9ZWxzZXtzPSJ0ciI7Yj0iYnIifWM9cS5lbC5nZXRBbmNob3JYWShzKTtrPXEuZWwuZ2V0QW5jaG9yWFkoYik7bT10aGlzLmhlYWRlckN0LmVsO3g9bS5nZXRMZWZ0KCk7dz1tLmdldFJpZ2h0KCk7Y1swXT1FeHQuTnVtYmVyLmNvbnN0cmFpbihjWzBdLHgsdyk7a1swXT1FeHQuTnVtYmVyLmNvbnN0cmFpbihrWzBdLHgsdyk7Y1swXS09NDtjWzFdLT05O2tbMF0tPTQ7bC5zZXRYWShjKTtyLnNldFhZKGspO2wuc2hvdygpO3Iuc2hvdygpfWVsc2V7dGhpcy5pbnZhbGlkYXRlRHJvcCgpfX0saW52YWxpZGF0ZURyb3A6ZnVuY3Rpb24oKXt0aGlzLnZhbGlkPWZhbHNlO3RoaXMuaGlkZUluZGljYXRvcnMoKX0sb25Ob2RlT3ZlcjpmdW5jdGlvbihiLGgsZyxjKXt2YXIgaT10aGlzLGQ9aS5oZWFkZXJDdCxhPXRydWUsaz1jLmhlYWRlcixqO2lmKGMuaGVhZGVyLmVsLmRvbT09PWIpe2E9ZmFsc2V9ZWxzZXtqPWkuZ2V0TG9jYXRpb24oZyxiKS5oZWFkZXI7YT0oay5vd25lckN0PT09ai5vd25lckN0KXx8KCFrLm93bmVyQ3Quc2VhbGVkJiYhai5vd25lckN0LnNlYWxlZCl9aWYoYSl7aS5wb3NpdGlvbkluZGljYXRvcihjLmhlYWRlcixiLGcpfWVsc2V7aS52YWxpZD1mYWxzZX1yZXR1cm4gaS52YWxpZD9pLmRyb3BBbGxvd2VkOmkuZHJvcE5vdEFsbG93ZWR9LGhpZGVJbmRpY2F0b3JzOmZ1bmN0aW9uKCl7dGhpcy5nZXRUb3BJbmRpY2F0b3IoKS5oaWRlKCk7dGhpcy5nZXRCb3R0b21JbmRpY2F0b3IoKS5oaWRlKCl9LG9uTm9kZU91dDpmdW5jdGlvbigpe3RoaXMuaGlkZUluZGljYXRvcnMoKX0sb25Ob2RlRHJvcDpmdW5jdGlvbihvLGQscix1KXtpZih0aGlzLnZhbGlkKXt2YXIgcT11LmhlYWRlcixnPXRoaXMubGFzdExvY2F0aW9uLGs9Zy5oZWFkZXIsdD1xLm93bmVyQ3Qsbj1xLnVwKCJoZWFkZXJjb250YWluZXI6bm90KGdyaWRjb2x1bW4pIiksbD10Lml0ZW1zLmluZGV4T2YocSksYT1rLm93bmVyQ3Qsaj1rLnVwKCJoZWFkZXJjb250YWluZXI6bm90KGdyaWRjb2x1bW4pIikscD1hLml0ZW1zLmluZGV4T2YoayksaT10aGlzLmhlYWRlckN0LGI9aS5nZXRIZWFkZXJJbmRleChxKSxtPXEuaXNHcm91cEhlYWRlcj9xLnF1ZXJ5KCI6bm90KFtpc0dyb3VwSGVhZGVyXSkiKS5sZW5ndGg6MSxzPWkuZ2V0SGVhZGVySW5kZXgoayksYyxoO2lmKGcucG9zPT09ImFmdGVyIil7cCsrO3MrPWsuaXNHcm91cEhlYWRlcj9rLnF1ZXJ5KCI6bm90KFtpc0dyb3VwSGVhZGVyXSkiKS5sZW5ndGg6MX1pZihuIT09aiYmbi5sb2NrYWJsZUluamVjdGVkJiZqLmxvY2thYmxlSW5qZWN0ZWQmJmoubG9ja2VkQ3Qpe2g9dC51cCgiW3Njcm9sbGVyT3duZXJdIik7aC5sb2NrKHEscCk7dGhpcy5vbk5vZGVEcm9wKG8sZCxyLHUpfWVsc2V7aWYobiE9PWomJm4ubG9ja2FibGVJbmplY3RlZCYmai5sb2NrYWJsZUluamVjdGVkJiZuLmxvY2tlZEN0KXtoPXQudXAoIltzY3JvbGxlck93bmVyXSIpO2gudW5sb2NrKHEscCk7dGhpcy5vbk5vZGVEcm9wKG8sZCxyLHUpfWVsc2V7dGhpcy5pbnZhbGlkYXRlRHJvcCgpO2lmKCh0PT09YSkmJihwPmwpKXtwLT0xfUV4dC5zdXNwZW5kTGF5b3V0cygpO2lmKHQhPT1hKXt0LnJlbW92ZShxLGZhbHNlKTtpZih0LmlzR3JvdXBIZWFkZXIpe2lmKCF0Lml0ZW1zLmdldENvdW50KCkpe2M9dC5vd25lckN0O2MucmVtb3ZlKHQsZmFsc2UpO3QuZWwuZG9tLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodC5lbC5kb20pfX19aWYodD09PWEpe2EubW92ZShsLHApfWVsc2V7YS5pbnNlcnQocCxxKX1pZihhLmlzR3JvdXBIZWFkZXIpe2lmKGEhPT10KXtxLnNhdmVkRmxleD1xLmZsZXg7ZGVsZXRlIHEuZmxleDtxLndpZHRoPXEuZ2V0V2lkdGgoKX19ZWxzZXtpZihxLnNhdmVkRmxleCl7cS5mbGV4PXEuc2F2ZWRGbGV4O2RlbGV0ZSBxLndpZHRofX1pLnB1cmdlQ2FjaGUoKTtFeHQucmVzdW1lTGF5b3V0cyh0cnVlKTtpLm9uSGVhZGVyTW92ZWQocSxtLGIscyk7aWYoIXQuaXRlbXMuZ2V0Q291bnQoKSl7dC5kZXN0cm95KCl9fX19fX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLnBsdWdpbi5IZWFkZXJSZW9yZGVyZXIiLHtleHRlbmQ6IkV4dC5BYnN0cmFjdFBsdWdpbiIscmVxdWlyZXM6WyJFeHQuZ3JpZC5oZWFkZXIuRHJhZ1pvbmUiLCJFeHQuZ3JpZC5oZWFkZXIuRHJvcFpvbmUiXSxhbGlhczoicGx1Z2luLmdyaWRoZWFkZXJyZW9yZGVyZXIiLGluaXQ6ZnVuY3Rpb24oYSl7dGhpcy5oZWFkZXJDdD1hO2Eub24oe3JlbmRlcjp0aGlzLm9uSGVhZGVyQ3RSZW5kZXIsc2luZ2xlOnRydWUsc2NvcGU6dGhpc30pfSxkZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy5kcmFnWm9uZSx0aGlzLmRyb3Bab25lKX0sb25IZWFkZXJDdFJlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5kcmFnWm9uZT1uZXcgRXh0LmdyaWQuaGVhZGVyLkRyYWdab25lKGEuaGVhZGVyQ3QpO2EuZHJvcFpvbmU9bmV3IEV4dC5ncmlkLmhlYWRlci5Ecm9wWm9uZShhLmhlYWRlckN0KTtpZihhLmRpc2FibGVkKXthLmRyYWdab25lLmRpc2FibGUoKX19LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9ZmFsc2U7aWYodGhpcy5kcmFnWm9uZSl7dGhpcy5kcmFnWm9uZS5lbmFibGUoKX19LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPXRydWU7aWYodGhpcy5kcmFnWm9uZSl7dGhpcy5kcmFnWm9uZS5kaXNhYmxlKCl9fX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLmhlYWRlci5Db250YWluZXIiLHtleHRlbmQ6IkV4dC5jb250YWluZXIuQ29udGFpbmVyIixyZXF1aXJlczpbIkV4dC5ncmlkLkNvbHVtbkxheW91dCIsIkV4dC5ncmlkLnBsdWdpbi5IZWFkZXJSZXNpemVyIiwiRXh0LmdyaWQucGx1Z2luLkhlYWRlclJlb3JkZXJlciJdLHVzZXM6WyJFeHQuZ3JpZC5jb2x1bW4uQ29sdW1uIiwiRXh0Lm1lbnUuTWVudSIsIkV4dC5tZW51LkNoZWNrSXRlbSIsIkV4dC5tZW51LlNlcGFyYXRvciJdLGJvcmRlcjp0cnVlLGFsaWFzOiJ3aWRnZXQuaGVhZGVyY29udGFpbmVyIixiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLWhlYWRlci1jdCIsZG9jazoidG9wIix3ZWlnaHQ6MTAwLGRlZmF1bHRUeXBlOiJncmlkY29sdW1uIixkZXRhY2hPblJlbW92ZTpmYWxzZSxkZWZhdWx0V2lkdGg6MTAwLHNvcnRBc2NUZXh0OiJTb3J0IEFzY2VuZGluZyIsc29ydERlc2NUZXh0OiJTb3J0IERlc2NlbmRpbmciLHNvcnRDbGVhclRleHQ6IkNsZWFyIFNvcnQiLGNvbHVtbnNUZXh0OiJDb2x1bW5zIixoZWFkZXJPcGVuQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJjb2x1bW4taGVhZGVyLW9wZW4iLHRyaVN0YXRlU29ydDpmYWxzZSxkZExvY2s6ZmFsc2UsZHJhZ2dpbmc6ZmFsc2Usc29ydGFibGU6dHJ1ZSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmhlYWRlckNvdW50ZXI9MDthLnBsdWdpbnM9YS5wbHVnaW5zfHxbXTtpZighYS5pc0hlYWRlcil7aWYoYS5lbmFibGVDb2x1bW5SZXNpemUpe2EucmVzaXplcj1uZXcgRXh0LmdyaWQucGx1Z2luLkhlYWRlclJlc2l6ZXIoKTthLnBsdWdpbnMucHVzaChhLnJlc2l6ZXIpfWlmKGEuZW5hYmxlQ29sdW1uTW92ZSl7YS5yZW9yZGVyZXI9bmV3IEV4dC5ncmlkLnBsdWdpbi5IZWFkZXJSZW9yZGVyZXIoKTthLnBsdWdpbnMucHVzaChhLnJlb3JkZXJlcil9fWlmKGEuaXNIZWFkZXImJiFhLml0ZW1zKXthLmxheW91dD1hLmxheW91dHx8ImF1dG8ifWVsc2V7YS5sYXlvdXQ9RXh0LmFwcGx5KHt0eXBlOiJncmlkY29sdW1uIixhbGlnbjoic3RyZXRjaG1heCJ9LGEuaW5pdGlhbENvbmZpZy5sYXlvdXQpfWEuZGVmYXVsdHM9YS5kZWZhdWx0c3x8e307RXh0LmFwcGx5SWYoYS5kZWZhdWx0cyx7dHJpU3RhdGVTb3J0OmEudHJpU3RhdGVTb3J0LHNvcnRhYmxlOmEuc29ydGFibGV9KTthLm1lbnVUYXNrPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzayhhLnVwZGF0ZU1lbnVEaXNhYmxlZFN0YXRlLGEpO2EuY2FsbFBhcmVudCgpO2EuYWRkRXZlbnRzKCJjb2x1bW5yZXNpemUiLCJoZWFkZXJjbGljayIsImhlYWRlcnRyaWdnZXJjbGljayIsImNvbHVtbm1vdmUiLCJjb2x1bW5oaWRlIiwiY29sdW1uc2hvdyIsInNvcnRjaGFuZ2UiLCJtZW51Y3JlYXRlIil9LG9uRGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5tZW51VGFzay5jYW5jZWwoKTtFeHQuZGVzdHJveShhLnJlc2l6ZXIsYS5yZW9yZGVyZXIpO2EuY2FsbFBhcmVudCgpfSxhcHBseUNvbHVtbnNTdGF0ZTpmdW5jdGlvbihlKXtpZighZXx8IWUubGVuZ3RoKXtyZXR1cm59dmFyIG09dGhpcyxrPW0uaXRlbXMuaXRlbXMsaj1rLmxlbmd0aCxnPTAsYj1lLmxlbmd0aCxsLGQsYSxoO2ZvcihsPTA7bDxiO2wrKyl7YT1lW2xdO2ZvcihoPWo7aC0tOyl7ZD1rW2hdO2lmKGQuZ2V0U3RhdGVJZCYmZC5nZXRTdGF0ZUlkKCk9PWEuaWQpe2lmKGchPT1oKXttLm1vdmVIZWFkZXIoaCxnKX1pZihkLmFwcGx5Q29sdW1uU3RhdGUpe2QuYXBwbHlDb2x1bW5TdGF0ZShhKX0rK2c7YnJlYWt9fX19LGdldENvbHVtbnNTdGF0ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1bXSxjO2IuaXRlbXMuZWFjaChmdW5jdGlvbihkKXtjPWQuZ2V0Q29sdW1uU3RhdGUmJmQuZ2V0Q29sdW1uU3RhdGUoKTtpZihjKXthLnB1c2goYyl9fSk7cmV0dXJuIGF9LG9uQWRkOmZ1bmN0aW9uKGQpe3ZhciBhPXRoaXMsYj1hLmlzSGVhZGVyP2EuZ2V0T3duZXJIZWFkZXJDdCgpOmE7aWYoIWQuaGVhZGVySWQpe2QuaGVhZGVySWQ9ZC5pbml0aWFsQ29uZmlnLmlkfHxFeHQuaWQobnVsbCwiaGVhZGVyLSIpfWlmKCFkLnN0YXRlSWQpe2Quc3RhdGVJZD1kLmluaXRpYWxDb25maWcuaWR8fCgiaCIrKCsrYS5oZWFkZXJDb3VudGVyKSl9YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYil7Yi5wdXJnZUNhY2hlKCl9fSxvblJlbW92ZTpmdW5jdGlvbihkKXt2YXIgYT10aGlzLGI9YS5pc0hlYWRlcj9hLmdldE93bmVySGVhZGVyQ3QoKTphO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGIpe2EucHVyZ2VDYWNoZSgpfX0sYXBwbHlEZWZhdWx0czpmdW5jdGlvbihiKXt2YXIgYTtpZihiJiYhYi5pc0NvbXBvbmVudCYmYi54dHlwZT09InJvd251bWJlcmVyIil7YT1ifWVsc2V7YT10aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZighYi5pc0dyb3VwSGVhZGVyJiYhKCJ3aWR0aCIgaW4gYSkmJiFhLmZsZXgpe2Eud2lkdGg9dGhpcy5kZWZhdWx0V2lkdGh9fXJldHVybiBhfSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudCgpO3RoaXMuc2V0U29ydFN0YXRlKCl9LHNldFNvcnRTdGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMudXAoIltzdG9yZV0iKS5zdG9yZSxjPWEuZ2V0Rmlyc3RTb3J0ZXIoKSxiO2lmKGMpe2I9dGhpcy5kb3duKCJncmlkY29sdW1uW2RhdGFJbmRleD0iK2MucHJvcGVydHkrIl0iKTtpZihiKXtiLnNldFNvcnRTdGF0ZShjLmRpcmVjdGlvbixmYWxzZSx0cnVlKX19ZWxzZXt0aGlzLmNsZWFyT3RoZXJTb3J0U3RhdGVzKG51bGwpfX0sZ2V0SGVhZGVyTWVudTpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZ2V0TWVudSgpLGE7aWYoYil7YT1iLmNoaWxkKCIjY29sdW1uSXRlbSIpO2lmKGEpe3JldHVybiBhLm1lbnV9fXJldHVybiBudWxsfSxvbkhlYWRlclZpc2liaWxpdHlDaGFuZ2U6ZnVuY3Rpb24oZSxkKXt2YXIgYj10aGlzLGM9Yi5nZXRIZWFkZXJNZW51KCksYTtpZihjKXthPWIuZ2V0TWVudUl0ZW1Gb3JIZWFkZXIoYyxlKTtpZihhKXthLnNldENoZWNrZWQoZCx0cnVlKX1iLm1lbnVUYXNrLmRlbGF5KDUwKX19LGdldExlYWZNZW51SXRlbXM6ZnVuY3Rpb24oKXt2YXIgaD10aGlzLGQ9aC5nZXRHcmlkQ29sdW1ucygpLGI9W10sYz0wLGc9MCxhPWQubGVuZ3RoLGo9aC5nZXRNZW51KCksZTtmb3IoO2M8YTsrK2Mpe2U9ZFtjXTtpZihlLmhpZGVhYmxlKXtlPWguZ2V0TWVudUl0ZW1Gb3JIZWFkZXIoaixlKTtpZihlKXtiLnB1c2goZSk7aWYoZS5jaGVja2VkKXsrK2d9fX1lbHNle2lmKCFlLmhpZGRlbiYmIWUubWVudURpc2FibGVkKXsrK2d9fX1yZXR1cm57aXRlbXM6YixjaGVja2VkQ291bnQ6Z319LHVwZGF0ZU1lbnVEaXNhYmxlZFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxiPWguZ2V0TGVhZk1lbnVJdGVtcygpLGc9Yi5jaGVja2VkQ291bnQsZD1iLml0ZW1zLGE9ZC5sZW5ndGgsZT0wLGM9aC5nZXRNZW51KCkuY2hpbGQoIiNjb2x1bW5JdGVtIik7aWYoZzw9MSl7aC5kaXNhYmxlTWVudUl0ZW1zKGMsRXh0LkNvbXBvbmVudFF1ZXJ5LnF1ZXJ5KCJbY2hlY2tlZD10cnVlXSIsZClbMF0pfWVsc2V7Zm9yKDtlPGE7KytlKXtoLnNldE1lbnVJdGVtU3RhdGUoZyxjLGRbZV0pfX19LGRpc2FibGVNZW51SXRlbXM6ZnVuY3Rpb24oYSxiKXt3aGlsZShiJiZiIT1hKXtiLmRpc2FibGVDaGVja0NoYW5nZSgpO2I9Yi5wYXJlbnRNZW51Lm93bmVySXRlbX19LHNldE1lbnVJdGVtU3RhdGU6ZnVuY3Rpb24oZSxhLGQpe3ZhciBjLGI7d2hpbGUoZCYmZCE9YSl7Yz1kLnBhcmVudE1lbnU7Yj1kLnBhcmVudE1lbnUucXVlcnkoIltjaGVja2VkPXRydWVdOm5vdChbbWVudV0pIikubGVuZ3RoO2QuZW5hYmxlQ2hlY2tDaGFuZ2UoKTtkPWMub3duZXJJdGVtO2lmKGI9PT1lKXticmVha319dGhpcy5kaXNhYmxlTWVudUl0ZW1zKGEsZCl9LGdldE1lbnVJdGVtRm9ySGVhZGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/YS5kb3duKCJtZW51Y2hlY2tpdGVtW2hlYWRlcklkPSIrYi5pZCsiXSIpOm51bGx9LG9uSGVhZGVyU2hvdzpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE9Yi5vd25lckN0O2Iub25IZWFkZXJWaXNpYmlsaXR5Q2hhbmdlKGMsdHJ1ZSk7aWYoIWMuaXNHcm91cEhlYWRlcil7aWYoYSl7YS5vbkhlYWRlclNob3coYixjKX19Yi5maXJlRXZlbnQoImNvbHVtbnNob3ciLGIsYyl9LG9uSGVhZGVySGlkZTpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE9Yi5vd25lckN0O2Iub25IZWFkZXJWaXNpYmlsaXR5Q2hhbmdlKGMsZmFsc2UpO2lmKCFjLmlzR3JvdXBIZWFkZXIpe2lmKGEpe2Eub25IZWFkZXJIaWRlKGIsYyl9fWIuZmlyZUV2ZW50KCJjb2x1bW5oaWRlIixiLGMpfSx0ZW1wTG9jazpmdW5jdGlvbigpe3RoaXMuZGRMb2NrPXRydWU7RXh0LkZ1bmN0aW9uLmRlZmVyKGZ1bmN0aW9uKCl7dGhpcy5kZExvY2s9ZmFsc2V9LDIwMCx0aGlzKX0sb25IZWFkZXJSZXNpemU6ZnVuY3Rpb24oZyxiLGUpe3ZhciBkPXRoaXMsYT1kLnZpZXcsYz1kLm93bmVyQ3Q7aWYoYSYmYS50YWJsZS5kb20pe2QudGVtcExvY2soKTtpZihjKXtjLm9uSGVhZGVyUmVzaXplKGQsZyxiKX19ZC5maXJlRXZlbnQoImNvbHVtbnJlc2l6ZSIsdGhpcyxnLGIpfSxvbkhlYWRlckNsaWNrOmZ1bmN0aW9uKGMsYixhKXtjLmZpcmVFdmVudCgiaGVhZGVyY2xpY2siLHRoaXMsYyxiLGEpO3RoaXMuZmlyZUV2ZW50KCJoZWFkZXJjbGljayIsdGhpcyxjLGIsYSl9LG9uSGVhZGVyVHJpZ2dlckNsaWNrOmZ1bmN0aW9uKGQsYyxhKXt2YXIgYj10aGlzO2lmKGQuZmlyZUV2ZW50KCJoZWFkZXJ0cmlnZ2VyY2xpY2siLGIsZCxjLGEpIT09ZmFsc2UmJmIuZmlyZUV2ZW50KCJoZWFkZXJ0cmlnZ2VyY2xpY2siLGIsZCxjLGEpIT09ZmFsc2Upe2Iuc2hvd01lbnVCeShhLGQpfX0sc2hvd01lbnVCeTpmdW5jdGlvbihiLGcpe3ZhciBkPXRoaXMuZ2V0TWVudSgpLGU9ZC5kb3duKCIjYXNjSXRlbSIpLGM9ZC5kb3duKCIjZGVzY0l0ZW0iKSxhO2QuYWN0aXZlSGVhZGVyPWQub3duZXJDdD1nO2Quc2V0RmxvYXRQYXJlbnQoZyk7Zy50aXRsZUVsLmFkZENscyh0aGlzLmhlYWRlck9wZW5DbHMpO2E9Zy5zb3J0YWJsZT8iZW5hYmxlIjoiZGlzYWJsZSI7aWYoZSl7ZVthXSgpfWlmKGMpe2NbYV0oKX1kLnNob3dCeShiKX0sb25NZW51RGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0TWVudSgpO2EuYWN0aXZlSGVhZGVyLnRpdGxlRWwucmVtb3ZlQ2xzKHRoaXMuaGVhZGVyT3BlbkNscyl9LG1vdmVIZWFkZXI6ZnVuY3Rpb24oYSxiKXt0aGlzLnRlbXBMb2NrKCk7dGhpcy5vbkhlYWRlck1vdmVkKHRoaXMubW92ZShhLGIpLDEsYSxiKX0scHVyZ2VDYWNoZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7ZGVsZXRlIGEuZ3JpZERhdGFDb2x1bW5zO2RlbGV0ZSBhLmhpZGVhYmxlQ29sdW1ucztpZihhLm1lbnUpe2EubWVudS5oaWRlKCk7YS5tZW51LmRlc3Ryb3koKTtkZWxldGUgYS5tZW51fX0sb25IZWFkZXJNb3ZlZDpmdW5jdGlvbihnLGEsYyxlKXt2YXIgZD10aGlzLGI9ZC5vd25lckN0O2lmKGImJmIub25IZWFkZXJNb3ZlKXtiLm9uSGVhZGVyTW92ZShkLGcsYSxjLGUpfWQuZmlyZUV2ZW50KCJjb2x1bW5tb3ZlIixkLGcsYyxlKX0sZ2V0TWVudTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoIWEubWVudSl7YS5tZW51PW5ldyBFeHQubWVudS5NZW51KHtoaWRlT25QYXJlbnRIaWRlOmZhbHNlLGl0ZW1zOmEuZ2V0TWVudUl0ZW1zKCksbGlzdGVuZXJzOntkZWFjdGl2YXRlOmEub25NZW51RGVhY3RpdmF0ZSxzY29wZTphfX0pO2EudXBkYXRlTWVudURpc2FibGVkU3RhdGUoKTthLmZpcmVFdmVudCgibWVudWNyZWF0ZSIsYSxhLm1lbnUpfXJldHVybiBhLm1lbnV9LGdldE1lbnVJdGVtczpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYj1bXSxhPWMuZW5hYmxlQ29sdW1uSGlkZT9jLmdldENvbHVtbk1lbnUoYyk6bnVsbDtpZihjLnNvcnRhYmxlKXtiPVt7aXRlbUlkOiJhc2NJdGVtIix0ZXh0OmMuc29ydEFzY1RleHQsY2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJobWVudS1zb3J0LWFzYyIsaGFuZGxlcjpjLm9uU29ydEFzY0NsaWNrLHNjb3BlOmN9LHtpdGVtSWQ6ImRlc2NJdGVtIix0ZXh0OmMuc29ydERlc2NUZXh0LGNsczpFeHQuYmFzZUNTU1ByZWZpeCsiaG1lbnUtc29ydC1kZXNjIixoYW5kbGVyOmMub25Tb3J0RGVzY0NsaWNrLHNjb3BlOmN9XX1pZihhJiZhLmxlbmd0aCl7Yi5wdXNoKCItIix7aXRlbUlkOiJjb2x1bW5JdGVtIix0ZXh0OmMuY29sdW1uc1RleHQsY2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJjb2xzLWljb24iLG1lbnU6YX0pfXJldHVybiBifSxvblNvcnRBc2NDbGljazpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZ2V0TWVudSgpLGE9Yi5hY3RpdmVIZWFkZXI7YS5zZXRTb3J0U3RhdGUoIkFTQyIpfSxvblNvcnREZXNjQ2xpY2s6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldE1lbnUoKSxhPWIuYWN0aXZlSGVhZGVyO2Euc2V0U29ydFN0YXRlKCJERVNDIil9LGdldENvbHVtbk1lbnU6ZnVuY3Rpb24oZyl7dmFyIGM9W10sYj0wLGUsYT1nLnF1ZXJ5KCI+Z3JpZGNvbHVtbltoaWRlYWJsZV0iKSxoPWEubGVuZ3RoLGQ7Zm9yKDtiPGg7YisrKXtlPWFbYl07ZD1uZXcgRXh0Lm1lbnUuQ2hlY2tJdGVtKHt0ZXh0OmUubWVudVRleHR8fGUudGV4dCxjaGVja2VkOiFlLmhpZGRlbixoaWRlT25DbGljazpmYWxzZSxoZWFkZXJJZDplLmlkLG1lbnU6ZS5pc0dyb3VwSGVhZGVyP3RoaXMuZ2V0Q29sdW1uTWVudShlKTp1bmRlZmluZWQsY2hlY2tIYW5kbGVyOnRoaXMub25Db2x1bW5DaGVja0NoYW5nZSxzY29wZTp0aGlzfSk7Yy5wdXNoKGQpO2Uub24oe2Rlc3Ryb3k6RXh0LkZ1bmN0aW9uLmJpbmQoZC5kZXN0cm95LGQpfSl9cmV0dXJuIGN9LG9uQ29sdW1uQ2hlY2tDaGFuZ2U6ZnVuY3Rpb24oYSxiKXt2YXIgYz1FeHQuZ2V0Q21wKGEuaGVhZGVySWQpO2NbYj8ic2hvdyI6ImhpZGUiXSgpfSxnZXRDb2x1bW5zRm9yVHBsOmZ1bmN0aW9uKGUpe3ZhciBjPVtdLGQ9dGhpcy5nZXRHcmlkQ29sdW1ucyhlKSxoPWQubGVuZ3RoLGE9MCxnLGI7Zm9yKDthPGg7YSsrKXtnPWRbYV07aWYoZy5oaWRkZW58fGcudXAoImhlYWRlcmNvbnRhaW5lcltoaWRkZW49dHJ1ZV0iKSl7Yj0wfWVsc2V7Yj1nLmdldERlc2lyZWRXaWR0aCgpfWMucHVzaCh7ZGF0YUluZGV4OmcuZGF0YUluZGV4LGFsaWduOmcuYWxpZ24sd2lkdGg6YixpZDpnLmlkLGNsczpnLnRkQ2xzLGNvbHVtbklkOmcuZ2V0SXRlbUlkKCl9KX1yZXR1cm4gY30sZ2V0Q29sdW1uQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRHcmlkQ29sdW1ucygpLmxlbmd0aH0sZ2V0RnVsbFdpZHRoOmZ1bmN0aW9uKGQpe3ZhciBjPTAsYj10aGlzLmdldFZpc2libGVHcmlkQ29sdW1ucyhkKSxnPWIubGVuZ3RoLGE9MCxlO2Zvcig7YTxnO2ErKyl7ZT1iW2FdO2lmKGUuZ2V0RGVzaXJlZFdpZHRoKXtjKz1lLmdldERlc2lyZWRXaWR0aCgpfHwwfWVsc2V7Yys9ZS5nZXRXaWR0aCgpfX1yZXR1cm4gY30sY2xlYXJPdGhlclNvcnRTdGF0ZXM6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5nZXRHcmlkQ29sdW1ucygpLGQ9Yy5sZW5ndGgsYj0wO2Zvcig7YjxkO2IrKyl7aWYoY1tiXSE9PWEpe2NbYl0uc2V0U29ydFN0YXRlKG51bGwsdHJ1ZSl9fX0sZ2V0VmlzaWJsZUdyaWRDb2x1bW5zOmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuQ29tcG9uZW50UXVlcnkucXVlcnkoIjpub3QoW2hpZGRlbl0pIix0aGlzLmdldEdyaWRDb2x1bW5zKGEpKX0sZ2V0R3JpZENvbHVtbnM6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxhPWI/bnVsbDpjLmdyaWREYXRhQ29sdW1ucztpZighYSl7Yy5ncmlkRGF0YUNvbHVtbnM9YT1bXTtjLmNhc2NhZGUoZnVuY3Rpb24oZCl7aWYoKGQhPT1jKSYmIWQuaXNHcm91cEhlYWRlcil7YS5wdXNoKGQpfX0pfXJldHVybiBhfSxnZXRIaWRlYWJsZUNvbHVtbnM6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxhPWI/bnVsbDpjLmhpZGVhYmxlQ29sdW1ucztpZighYSl7YT1jLmhpZGVhYmxlQ29sdW1ucz1jLnF1ZXJ5KCJbaGlkZWFibGVdIil9cmV0dXJuIGF9LGdldEhlYWRlckluZGV4OmZ1bmN0aW9uKGEpe2lmKGEuaXNHcm91cEhlYWRlcil7YT1hLmRvd24oIjpub3QoW2lzZ3JvdXBIZWFkZXJdKSIpfXJldHVybiBFeHQuQXJyYXkuaW5kZXhPZih0aGlzLmdldEdyaWRDb2x1bW5zKCksYSl9LGdldEhlYWRlckF0SW5kZXg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRHcmlkQ29sdW1ucygpO3JldHVybiBiLmxlbmd0aD9iW2FdOm51bGx9LGdldFZpc2libGVIZWFkZXJDbG9zZXN0VG9JbmRleDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldEhlYWRlckF0SW5kZXgoYik7aWYoYSYmYS5oaWRkZW4pe2E9YS5uZXh0KCI6bm90KFtoaWRkZW5dKSIpfHxhLnByZXYoIjpub3QoW2hpZGRlbl0pIil9cmV0dXJuIGF9LHByZXBhcmVEYXRhOmZ1bmN0aW9uKGksYyxrLG4sYSl7dmFyIG09dGhpcyxoPXt9LGQ9bS5ncmlkRGF0YUNvbHVtbnN8fG0uZ2V0R3JpZENvbHVtbnMoKSxlPWQubGVuZ3RoLGc9MCxqLHEsbCxwLGIsbz1hLnN0b3JlO2Zvcig7ZzxlO2crKyl7Yj17dGRDbHM6IiIsc3R5bGU6IiJ9O2o9ZFtnXTtxPWouaWQ7bD1qLnJlbmRlcmVyO3A9aVtqLmRhdGFJbmRleF07aWYodHlwZW9mIGw9PSJmdW5jdGlvbiIpe3A9bC5jYWxsKGouc2NvcGV8fG0ub3duZXJDdCxwLGIsayxjLGcsbyxuKX1pZihtLm1hcmtEaXJ0eSl7aFtxKyItbW9kaWZpZWQiXT1rLmlzTW9kaWZpZWQoai5kYXRhSW5kZXgpP0V4dC5iYXNlQ1NTUHJlZml4KyJncmlkLWRpcnR5LWNlbGwiOiIifWhbcSsiLXRkQ2xzIl09Yi50ZENscztoW3ErIi10ZEF0dHIiXT1iLnRkQXR0cjtoW3ErIi1zdHlsZSJdPWIuc3R5bGU7aWYodHlwZW9mIHA9PT0idW5kZWZpbmVkInx8cD09PW51bGx8fHA9PT0iIil7cD1qLmVtcHR5Q2VsbFRleHR9aFtxXT1wfXJldHVybiBofSxleHBhbmRUb0ZpdDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLnZpZXc7aWYoYSl7YS5leHBhbmRUb0ZpdChiKX19fSk7RXh0LmRlZmluZSgiRXh0LmdyaWQuY29sdW1uLkNvbHVtbiIse2V4dGVuZDoiRXh0LmdyaWQuaGVhZGVyLkNvbnRhaW5lciIsYWxpYXM6IndpZGdldC5ncmlkY29sdW1uIixyZXF1aXJlczpbIkV4dC51dGlsLktleU5hdiIsIkV4dC5ncmlkLkNvbHVtbkNvbXBvbmVudExheW91dCIsIkV4dC5ncmlkLkNvbHVtbkxheW91dCJdLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmdyaWQuQ29sdW1uIixiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJjb2x1bW4taGVhZGVyICIrRXh0LmJhc2VDU1NQcmVmaXgrInVuc2VsZWN0YWJsZSIsaG92ZXJDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImNvbHVtbi1oZWFkZXItb3ZlciIsaGFuZGxlV2lkdGg6NSxzb3J0U3RhdGU6bnVsbCxwb3NzaWJsZVNvcnRTdGF0ZXM6WyJBU0MiLCJERVNDIl0sY2hpbGRFbHM6WyJ0aXRsZUVsIiwidHJpZ2dlckVsIiwidGV4dEVsIl0scmVuZGVyVHBsOic8ZGl2IGlkPSJ7aWR9LXRpdGxlRWwiIHt0aXBNYXJrdXB9Y2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrJ2NvbHVtbi1oZWFkZXItaW5uZXIiPjxzcGFuIGlkPSJ7aWR9LXRleHRFbCIgY2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrJ2NvbHVtbi1oZWFkZXItdGV4dCI+e3RleHR9PC9zcGFuPjx0cGwgaWY9IiFtZW51RGlzYWJsZWQiPjxkaXYgaWQ9IntpZH0tdHJpZ2dlckVsIiBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsnY29sdW1uLWhlYWRlci10cmlnZ2VyIj48L2Rpdj48L3RwbD48L2Rpdj57JXRoaXMucmVuZGVyQ29udGFpbmVyKG91dCx2YWx1ZXMpJX0nLGRhdGFJbmRleDpudWxsLHRleHQ6IiYjMTYwOyIsbWVudVRleHQ6bnVsbCxlbXB0eUNlbGxUZXh0OiImIzE2MDsiLHNvcnRhYmxlOnRydWUscmVzaXphYmxlOnRydWUsaGlkZWFibGU6dHJ1ZSxtZW51RGlzYWJsZWQ6ZmFsc2UscmVuZGVyZXI6ZmFsc2UsZWRpdFJlbmRlcmVyOmZhbHNlLGFsaWduOiJsZWZ0IixkcmFnZ2FibGU6dHJ1ZSx0b29sdGlwVHlwZToicXRpcCIsaW5pdERyYWdnYWJsZTpFeHQuZW1wdHlGbixpc0hlYWRlcjp0cnVlLGNvbXBvbmVudExheW91dDoiY29sdW1uY29tcG9uZW50Iixpbml0UmVzaXphYmxlOkV4dC5lbXB0eUZuLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI7aWYoRXh0LmlzRGVmaW5lZChhLmhlYWRlcikpe2EudGV4dD1hLmhlYWRlcjtkZWxldGUgYS5oZWFkZXJ9aWYoIWEudHJpU3RhdGVTb3J0KXthLnBvc3NpYmxlU29ydFN0YXRlcy5sZW5ndGg9Mn1pZihFeHQuaXNEZWZpbmVkKGEuY29sdW1ucykpe2EuaXNHcm91cEhlYWRlcj10cnVlO2EuaXRlbXM9YS5jb2x1bW5zO2RlbGV0ZSBhLmNvbHVtbnM7ZGVsZXRlIGEuZmxleDtkZWxldGUgYS53aWR0aDthLmNscz0oYS5jbHN8fCIiKSsiICIrRXh0LmJhc2VDU1NQcmVmaXgrImdyb3VwLWhlYWRlciI7YS5zb3J0YWJsZT1mYWxzZTthLnJlc2l6YWJsZT1mYWxzZTthLmFsaWduPSJjZW50ZXIifWVsc2V7YS5pc0NvbnRhaW5lcj1mYWxzZTtpZihhLmZsZXgpe2EubWluV2lkdGg9YS5taW5XaWR0aHx8RXh0LmdyaWQucGx1Z2luLkhlYWRlclJlc2l6ZXIucHJvdG90eXBlLm1pbkNvbFdpZHRofX1hLmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsiY29sdW1uLWhlYWRlci1hbGlnbi0iK2EuYWxpZ24pO2I9YS5yZW5kZXJlcjtpZihiKXtpZih0eXBlb2YgYj09InN0cmluZyIpe2EucmVuZGVyZXI9RXh0LnV0aWwuRm9ybWF0W2JdfWEuaGFzQ3VzdG9tUmVuZGVyZXI9dHJ1ZX1lbHNle2lmKGEuZGVmYXVsdFJlbmRlcmVyKXthLnNjb3BlPWE7YS5yZW5kZXJlcj1hLmRlZmF1bHRSZW5kZXJlcn19YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YS5vbih7ZWxlbWVudDoiZWwiLGNsaWNrOmEub25FbENsaWNrLGRibGNsaWNrOmEub25FbERibENsaWNrLHNjb3BlOmF9KTthLm9uKHtlbGVtZW50OiJ0aXRsZUVsIixtb3VzZWVudGVyOmEub25UaXRsZU1vdXNlT3Zlcixtb3VzZWxlYXZlOmEub25UaXRsZU1vdXNlT3V0LHNjb3BlOmF9KX0sb25BZGQ6ZnVuY3Rpb24oYSl7YS5pc1N1YkhlYWRlcj10cnVlO2EuYWRkQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJncm91cC1zdWItaGVhZGVyIik7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LG9uUmVtb3ZlOmZ1bmN0aW9uKGEpe2EuaXNTdWJIZWFkZXI9ZmFsc2U7YS5yZW1vdmVDbHMoRXh0LmJhc2VDU1NQcmVmaXgrImdyb3VwLXN1Yi1oZWFkZXIiKTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0saW5pdFJlbmRlckRhdGE6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGQ9IiIsYz1iLnRvb2x0aXAsYT1iLnRvb2x0aXBUeXBlPT0icXRpcCI/ImRhdGEtcXRpcCI6InRpdGxlIjtpZighRXh0LmlzRW1wdHkoYykpe2Q9YSsnPSInK2MrJyIgJ31yZXR1cm4gRXh0LmFwcGx5SWYoYi5jYWxsUGFyZW50KGFyZ3VtZW50cykse3RleHQ6Yi50ZXh0LG1lbnVEaXNhYmxlZDpiLm1lbnVEaXNhYmxlZCx0aXBNYXJrdXA6ZH0pfSxhcHBseUNvbHVtblN0YXRlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMsYz1FeHQuaXNEZWZpbmVkO2EuYXBwbHlDb2x1bW5zU3RhdGUoYi5jb2x1bW5zKTtpZihjKGIuaGlkZGVuKSl7YS5oaWRkZW49Yi5oaWRkZW59aWYoYyhiLmxvY2tlZCkpe2EubG9ja2VkPWIubG9ja2VkfWlmKGMoYi5zb3J0YWJsZSkpe2Euc29ydGFibGU9Yi5zb3J0YWJsZX1pZihjKGIud2lkdGgpKXtkZWxldGUgYS5mbGV4O2Eud2lkdGg9Yi53aWR0aH1lbHNle2lmKGMoYi5mbGV4KSl7ZGVsZXRlIGEud2lkdGg7YS5mbGV4PWIuZmxleH19fSxnZXRDb2x1bW5TdGF0ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsYj1lLml0ZW1zLml0ZW1zLGE9Yj9iLmxlbmd0aDowLGQsYz1bXSxnPXtpZDplLmdldFN0YXRlSWQoKX07ZS5zYXZlUHJvcHNUb1N0YXRlKFsiaGlkZGVuIiwic29ydGFibGUiLCJsb2NrZWQiLCJmbGV4Iiwid2lkdGgiXSxnKTtpZihlLmlzR3JvdXBIZWFkZXIpe2ZvcihkPTA7ZDxhO2QrKyl7Yy5wdXNoKGJbZF0uZ2V0Q29sdW1uU3RhdGUoKSl9aWYoYy5sZW5ndGgpe2cuY29sdW1ucz1jfX1lbHNle2lmKGUuaXNTdWJIZWFkZXImJmUub3duZXJDdC5oaWRkZW4pe2RlbGV0ZSBlLmhpZGRlbn19aWYoIndpZHRoIiBpbiBnKXtkZWxldGUgZy5mbGV4fXJldHVybiBnfSxnZXRTdGF0ZUlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGVJZHx8dGhpcy5oZWFkZXJJZH0sc2V0VGV4dDpmdW5jdGlvbihhKXt0aGlzLnRleHQ9YTtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLnRleHRFbC51cGRhdGUoYSl9fSxnZXRPd25lckhlYWRlckN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXAoIjpub3QoW2lzSGVhZGVyXSkiKX0sZ2V0SW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0dyb3VwQ29sdW1uP2ZhbHNlOnRoaXMuZ2V0T3duZXJIZWFkZXJDdCgpLmdldEhlYWRlckluZGV4KHRoaXMpfSxnZXRWaXNpYmxlSW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0dyb3VwQ29sdW1uP2ZhbHNlOkV4dC5BcnJheS5pbmRleE9mKHRoaXMuZ2V0T3duZXJIZWFkZXJDdCgpLmdldFZpc2libGVHcmlkQ29sdW1ucygpLHRoaXMpfSxiZWZvcmVSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi51cCgidGFibGVwYW5lbCIpO2IuY2FsbFBhcmVudCgpO2lmKGEmJighYi5zb3J0YWJsZXx8YS5zb3J0YWJsZUNvbHVtbnM9PT1mYWxzZSkmJiFiLmdyb3VwYWJsZSYmIWIubG9ja2FibGUmJihhLmVuYWJsZUNvbHVtbkhpZGU9PT1mYWxzZXx8IWIuZ2V0T3duZXJIZWFkZXJDdCgpLmdldEhpZGVhYmxlQ29sdW1ucygpLmxlbmd0aCkpe2IubWVudURpc2FibGVkPXRydWV9fSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmVsO2IuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGIub3ZlckNscyl7YS5hZGRDbHNPbk92ZXIoYi5vdmVyQ2xzKX1pZighRXh0LmlzSUU4fHwhRXh0LmlzU3RyaWN0KXtiLm1vbihiLmdldEZvY3VzRWwoKSx7Zm9jdXM6Yi5vblRpdGxlTW91c2VPdmVyLGJsdXI6Yi5vblRpdGxlTW91c2VPdXQsc2NvcGU6Yn0pfWIua2V5TmF2PW5ldyBFeHQudXRpbC5LZXlOYXYoYSx7ZW50ZXI6Yi5vbkVudGVyS2V5LGRvd246Yi5vbkRvd25LZXksc2NvcGU6Yn0pfSxhZnRlckNvbXBvbmVudExheW91dDpmdW5jdGlvbihkLGEsYyxnKXt2YXIgZT10aGlzLGI9ZS5nZXRPd25lckhlYWRlckN0KCk7ZS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYiYmKGMhPW51bGx8fGUuZmxleCkmJmQhPT1jKXtiLm9uSGVhZGVyUmVzaXplKGUsZCx0cnVlKX19LHNldFBhZGRpbmc6ZnVuY3Rpb24oYSl7dmFyIGU9dGhpcyxkPXBhcnNlSW50KGUudGV4dEVsLmdldFN0eWxlKCJsaW5lLWhlaWdodCIpLDEwKSxoPWUudGV4dEVsLmRvbS5vZmZzZXRIZWlnaHQsYj1lLnRpdGxlRWwsZz1hLWUuZWwuZ2V0Qm9yZGVyV2lkdGgoInRiIiksYztpZighZS5pc0dyb3VwSGVhZGVyKXtpZihiLmdldEhlaWdodCgpPGcpe2Iuc2V0SGVpZ2h0KGcpO2Uub3duZXJDdC5sYXlvdXQuaW5uZXJDdC5zZXRIZWlnaHQoYSl9fWM9Yi5nZXRWaWV3U2l6ZSgpLmhlaWdodDtpZihoKXtpZihkKXtoPU1hdGguY2VpbChoL2QpKmR9Yi5zZXRTdHlsZSh7cGFkZGluZ1RvcDpNYXRoLmZsb29yKE1hdGgubWF4KCgoYy1oKS8yKSwwKSkrInB4In0pfWlmKEV4dC5pc0lFJiZlLnRyaWdnZXJFbCl7ZS50cmlnZ2VyRWwuc2V0SGVpZ2h0KGMpfX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztFeHQuZGVzdHJveShhLnRleHRFbCxhLmtleU5hdixhLmZpZWxkKTtkZWxldGUgYS5rZXlOYXY7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LG9uVGl0bGVNb3VzZU92ZXI6ZnVuY3Rpb24oKXt0aGlzLnRpdGxlRWwuYWRkQ2xzKHRoaXMuaG92ZXJDbHMpfSxvblRpdGxlTW91c2VPdXQ6ZnVuY3Rpb24oKXt0aGlzLnRpdGxlRWwucmVtb3ZlQ2xzKHRoaXMuaG92ZXJDbHMpfSxvbkRvd25LZXk6ZnVuY3Rpb24oYSl7aWYodGhpcy50cmlnZ2VyRWwpe3RoaXMub25FbENsaWNrKGEsdGhpcy50cmlnZ2VyRWwuZG9tfHx0aGlzLmVsLmRvbSl9fSxvbkVudGVyS2V5OmZ1bmN0aW9uKGEpe3RoaXMub25FbENsaWNrKGEsdGhpcy5lbC5kb20pfSxvbkVsRGJsQ2xpY2s6ZnVuY3Rpb24oZCxhKXt2YXIgYz10aGlzLGI9Yy5vd25lckN0O2lmKGImJkV4dC5BcnJheS5pbmRleE9mKGIuaXRlbXMsYykhPT0wJiZjLmlzT25MZWZ0RWRnZShkKSl7Yi5leHBhbmRUb0ZpdChjLnByZXZpb3VzU2libGluZygiZ3JpZGNvbHVtbiIpKX19LG9uRWxDbGljazpmdW5jdGlvbihkLGIpe3ZhciBjPXRoaXMsYT1jLmdldE93bmVySGVhZGVyQ3QoKTtpZihhJiYhYS5kZExvY2spe2lmKGMudHJpZ2dlckVsJiYoZC50YXJnZXQ9PT1jLnRyaWdnZXJFbC5kb218fGI9PT1jLnRyaWdnZXJFbC5kb218fGQud2l0aGluKGMudHJpZ2dlckVsKSkpe2Eub25IZWFkZXJUcmlnZ2VyQ2xpY2soYyxkLGIpfWVsc2V7aWYoZC5nZXRLZXkoKXx8KCFjLmlzT25MZWZ0RWRnZShkKSYmIWMuaXNPblJpZ2h0RWRnZShkKSkpe2MudG9nZ2xlU29ydFN0YXRlKCk7YS5vbkhlYWRlckNsaWNrKGMsZCxiKX19fX0scHJvY2Vzc0V2ZW50OmZ1bmN0aW9uKGcsYixhLGMsZCxoKXtyZXR1cm4gdGhpcy5maXJlRXZlbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx0b2dnbGVTb3J0U3RhdGU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGEsYztpZihiLnNvcnRhYmxlKXthPUV4dC5BcnJheS5pbmRleE9mKGIucG9zc2libGVTb3J0U3RhdGVzLGIuc29ydFN0YXRlKTtjPShhKzEpJWIucG9zc2libGVTb3J0U3RhdGVzLmxlbmd0aDtiLnNldFNvcnRTdGF0ZShiLnBvc3NpYmxlU29ydFN0YXRlc1tjXSl9fSxkb1NvcnQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy51cCgidGFibGVwYW5lbCIpLnN0b3JlO2Euc29ydCh7cHJvcGVydHk6dGhpcy5nZXRTb3J0UGFyYW0oKSxkaXJlY3Rpb246Yn0pfSxnZXRTb3J0UGFyYW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhSW5kZXh9LHNldFNvcnRTdGF0ZTpmdW5jdGlvbihhLGssZyl7dmFyIGg9dGhpcyxpPUV4dC5iYXNlQ1NTUHJlZml4KyJjb2x1bW4taGVhZGVyLXNvcnQtIixqPWkrIkFTQyIsYz1pKyJERVNDIixiPWkrIm51bGwiLGU9aC5nZXRPd25lckhlYWRlckN0KCksZD1oLnNvcnRTdGF0ZTtpZihkIT09YSYmaC5nZXRTb3J0UGFyYW0oKSl7aC5hZGRDbHMoaSthKTtpZihhJiYhZyl7aC5kb1NvcnQoYSl9c3dpdGNoKGEpe2Nhc2UiREVTQyI6aC5yZW1vdmVDbHMoW2osYl0pO2JyZWFrO2Nhc2UiQVNDIjpoLnJlbW92ZUNscyhbYyxiXSk7YnJlYWs7Y2FzZSBudWxsOmgucmVtb3ZlQ2xzKFtqLGNdKTticmVha31pZihlJiYhaC50cmlTdGF0ZVNvcnQmJiFrKXtlLmNsZWFyT3RoZXJTb3J0U3RhdGVzKGgpfWguc29ydFN0YXRlPWE7aWYoaC50cmlTdGF0ZVNvcnR8fGEhPW51bGwpe2UuZmlyZUV2ZW50KCJzb3J0Y2hhbmdlIixlLGgsYSl9fX0saGlkZTpmdW5jdGlvbihjKXt2YXIgaj10aGlzLGU9ai5nZXRPd25lckhlYWRlckN0KCksYj1qLm93bmVyQ3QsYT1iLmlzR3JvdXBIZWFkZXIsayxoLGcsZDtpZihhJiYhYyl7aD1iLnF1ZXJ5KCI+Om5vdChbaGlkZGVuXSkiKTtpZihoLmxlbmd0aD09PTEmJmhbMF09PWope2oub3duZXJDdC5oaWRlKCk7cmV0dXJufX1FeHQuc3VzcGVuZExheW91dHMoKTtpZihqLmlzR3JvdXBIZWFkZXIpe2g9ai5pdGVtcy5pdGVtcztmb3IoZD0wLGc9aC5sZW5ndGg7ZDxnO2QrKyl7az1oW2RdO2lmKCFrLmhpZGRlbil7ay5oaWRlKHRydWUpfX19ai5jYWxsUGFyZW50KCk7ZS5vbkhlYWRlckhpZGUoaik7RXh0LnJlc3VtZUxheW91dHModHJ1ZSl9LHNob3c6ZnVuY3Rpb24oZCxiKXt2YXIgaj10aGlzLGc9ai5vd25lckN0LGMsYSxlLGg7RXh0LnN1c3BlbmRMYXlvdXRzKCk7aWYoai5pc1N1YkhlYWRlciYmZy5oaWRkZW4pe2cuc2hvdyhmYWxzZSx0cnVlKX1qLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihqLmlzR3JvdXBIZWFkZXImJmIhPT10cnVlJiYhai5xdWVyeSgiOm5vdChbaGlkZGVuXSkiKS5sZW5ndGgpe2M9ai5xdWVyeSgiPioiKTtmb3IoZT0wLGE9Yy5sZW5ndGg7ZTxhO2UrKyl7aD1jW2VdO2lmKGguaGlkZGVuKXtoLnNob3codHJ1ZSl9fX1FeHQucmVzdW1lTGF5b3V0cyh0cnVlKTtnPWouZ2V0T3duZXJIZWFkZXJDdCgpO2lmKGcpe2cub25IZWFkZXJTaG93KGopfX0sZ2V0RGVzaXJlZFdpZHRoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnJlbmRlcmVkJiZhLmNvbXBvbmVudExheW91dCYmYS5jb21wb25lbnRMYXlvdXQubGFzdENvbXBvbmVudFNpemUpe3JldHVybiBhLmNvbXBvbmVudExheW91dC5sYXN0Q29tcG9uZW50U2l6ZS53aWR0aH1lbHNle2lmKGEuZmxleCl7cmV0dXJuIGEud2lkdGh9ZWxzZXtyZXR1cm4gYS53aWR0aH19fSxnZXRDZWxsU2VsZWN0b3I6ZnVuY3Rpb24oKXtyZXR1cm4iLiIrRXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtY2VsbC0iK3RoaXMuZ2V0SXRlbUlkKCl9LGdldENlbGxJbm5lclNlbGVjdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0Q2VsbFNlbGVjdG9yKCkrIiAuIitFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1jZWxsLWlubmVyIn0saXNPbkxlZnRFZGdlOmZ1bmN0aW9uKGEpe3JldHVybihhLmdldFhZKClbMF0tdGhpcy5lbC5nZXRMZWZ0KCk8PXRoaXMuaGFuZGxlV2lkdGgpfSxpc09uUmlnaHRFZGdlOmZ1bmN0aW9uKGEpe3JldHVybih0aGlzLmVsLmdldFJpZ2h0KCktYS5nZXRYWSgpWzBdPD10aGlzLmhhbmRsZVdpZHRoKX19KTtFeHQuZGVmaW5lKCJFeHQuZ3JpZC5Sb3dOdW1iZXJlciIse2V4dGVuZDoiRXh0LmdyaWQuY29sdW1uLkNvbHVtbiIsYWxpYXM6IndpZGdldC5yb3dudW1iZXJlciIsdGV4dDoiJiMxNjAiLHdpZHRoOjIzLHNvcnRhYmxlOmZhbHNlLGRyYWdnYWJsZTpmYWxzZSxhbGlnbjoicmlnaHQiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3RoaXMud2lkdGg9dGhpcy53aWR0aDt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZih0aGlzLnJvd3NwYW4pe3RoaXMucmVuZGVyZXI9RXh0LkZ1bmN0aW9uLmJpbmQodGhpcy5yZW5kZXJlcix0aGlzKX19LHJlc2l6YWJsZTpmYWxzZSxoaWRlYWJsZTpmYWxzZSxtZW51RGlzYWJsZWQ6dHJ1ZSxkYXRhSW5kZXg6IiIsY2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJyb3ctbnVtYmVyZXIiLHJvd3NwYW46dW5kZWZpbmVkLHJlbmRlcmVyOmZ1bmN0aW9uKGUsYixhLGQsZyxjKXtpZih0aGlzLnJvd3NwYW4pe2IuY2VsbEF0dHI9J3Jvd3NwYW49IicrdGhpcy5yb3dzcGFuKyciJ31iLnRkQ2xzPUV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLWNlbGwtc3BlY2lhbCI7cmV0dXJuIGMuaW5kZXhPZlRvdGFsKGEpKzF9fSk7RXh0LmRlZmluZSgiRXh0LnZpZXcuRHJvcFpvbmUiLHtleHRlbmQ6IkV4dC5kZC5Ecm9wWm9uZSIsaW5kaWNhdG9ySHRtbDonPGRpdiBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsnZ3JpZC1kcm9wLWluZGljYXRvci1sZWZ0Ij48L2Rpdj48ZGl2IGNsYXNzPSInK0V4dC5iYXNlQ1NTUHJlZml4KydncmlkLWRyb3AtaW5kaWNhdG9yLXJpZ2h0Ij48L2Rpdj4nLGluZGljYXRvckNsczpFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1kcm9wLWluZGljYXRvciIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztFeHQuYXBwbHkoYixhKTtpZighYi5kZEdyb3VwKXtiLmRkR3JvdXA9InZpZXctZGQtem9uZS0iK2Iudmlldy5pZH1iLmNhbGxQYXJlbnQoW2Iudmlldy5lbF0pfSxmaXJlVmlld0V2ZW50OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhO2IubG9jaygpO2E9Yi52aWV3LmZpcmVFdmVudC5hcHBseShiLnZpZXcsYXJndW1lbnRzKTtiLnVubG9jaygpO3JldHVybiBhfSxnZXRUYXJnZXRGcm9tRXZlbnQ6ZnVuY3Rpb24oayl7dmFyIGo9ay5nZXRUYXJnZXQodGhpcy52aWV3LmdldEl0ZW1TZWxlY3RvcigpKSxkLGMsYixnLGEsaDtpZighail7ZD1rLmdldFBhZ2VZKCk7Zm9yKGc9MCxjPXRoaXMudmlldy5nZXROb2RlcygpLGE9Yy5sZW5ndGg7ZzxhO2crKyl7Yj1jW2ddO2g9RXh0LmZseShiKS5nZXRCb3goKTtpZihkPD1oLmJvdHRvbSl7cmV0dXJuIGJ9fX1yZXR1cm4gan0sZ2V0SW5kaWNhdG9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZighYS5pbmRpY2F0b3Ipe2EuaW5kaWNhdG9yPW5ldyBFeHQuQ29tcG9uZW50KHtodG1sOmEuaW5kaWNhdG9ySHRtbCxjbHM6YS5pbmRpY2F0b3JDbHMsb3duZXJDdDphLnZpZXcsZmxvYXRpbmc6dHJ1ZSxzaGFkb3c6ZmFsc2V9KX1yZXR1cm4gYS5pbmRpY2F0b3J9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGMsYSl7dmFyIGc9Yy5nZXRYWSgpWzFdLGI9RXh0LmZseShhKS5nZXRSZWdpb24oKSxkO2lmKChiLmJvdHRvbS1nKT49KGIuYm90dG9tLWIudG9wKS8yKXtkPSJiZWZvcmUifWVsc2V7ZD0iYWZ0ZXIifXJldHVybiBkfSxjb250YWluc1JlY29yZEF0T2Zmc2V0OmZ1bmN0aW9uKGQsYixnKXtpZighYil7cmV0dXJuIGZhbHNlfXZhciBhPXRoaXMudmlldyxjPWEuaW5kZXhPZihiKSxlPWEuZ2V0Tm9kZShjK2cpLGg9ZT9hLmdldFJlY29yZChlKTpudWxsO3JldHVybiBoJiZFeHQuQXJyYXkuY29udGFpbnMoZCxoKX0scG9zaXRpb25JbmRpY2F0b3I6ZnVuY3Rpb24oYixjLGQpe3ZhciBnPXRoaXMsaT1nLnZpZXcsaD1nLmdldFBvc2l0aW9uKGQsYiksaz1pLmdldFJlY29yZChiKSxhPWMucmVjb3JkcyxqO2lmKCFFeHQuQXJyYXkuY29udGFpbnMoYSxrKSYmKGg9PSJiZWZvcmUiJiYhZy5jb250YWluc1JlY29yZEF0T2Zmc2V0KGEsaywtMSl8fGg9PSJhZnRlciImJiFnLmNvbnRhaW5zUmVjb3JkQXRPZmZzZXQoYSxrLDEpKSl7Zy52YWxpZD10cnVlO2lmKGcub3ZlclJlY29yZCE9a3x8Zy5jdXJyZW50UG9zaXRpb24hPWgpe2o9RXh0LmZseShiKS5nZXRZKCktaS5lbC5nZXRZKCktMTtpZihoPT0iYWZ0ZXIiKXtqKz1FeHQuZmx5KGIpLmdldEhlaWdodCgpfWcuZ2V0SW5kaWNhdG9yKCkuc2V0V2lkdGgoRXh0LmZseShpLmVsKS5nZXRXaWR0aCgpKS5zaG93QXQoMCxqKTtnLm92ZXJSZWNvcmQ9aztnLmN1cnJlbnRQb3NpdGlvbj1ofX1lbHNle2cuaW52YWxpZGF0ZURyb3AoKX19LGludmFsaWRhdGVEcm9wOmZ1bmN0aW9uKCl7aWYodGhpcy52YWxpZCl7dGhpcy52YWxpZD1mYWxzZTt0aGlzLmdldEluZGljYXRvcigpLmhpZGUoKX19LG9uTm9kZU92ZXI6ZnVuY3Rpb24oYyxhLGcsZCl7dmFyIGI9dGhpcztpZighRXh0LkFycmF5LmNvbnRhaW5zKGQucmVjb3JkcyxiLnZpZXcuZ2V0UmVjb3JkKGMpKSl7Yi5wb3NpdGlvbkluZGljYXRvcihjLGQsZyl9cmV0dXJuIGIudmFsaWQ/Yi5kcm9wQWxsb3dlZDpiLmRyb3BOb3RBbGxvd2VkfSxub3RpZnlPdXQ6ZnVuY3Rpb24oYyxhLGcsZCl7dmFyIGI9dGhpcztiLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtkZWxldGUgYi5vdmVyUmVjb3JkO2RlbGV0ZSBiLmN1cnJlbnRQb3NpdGlvbjtpZihiLmluZGljYXRvcil7Yi5pbmRpY2F0b3IuaGlkZSgpfX0sb25Db250YWluZXJPdmVyOmZ1bmN0aW9uKGEsaCxnKXt2YXIgZD10aGlzLGI9ZC52aWV3LGM9Yi5zdG9yZS5nZXRDb3VudCgpO2lmKGMpe2QucG9zaXRpb25JbmRpY2F0b3IoYi5nZXROb2RlKGMtMSksZyxoKX1lbHNle2RlbGV0ZSBkLm92ZXJSZWNvcmQ7ZGVsZXRlIGQuY3VycmVudFBvc2l0aW9uO2QuZ2V0SW5kaWNhdG9yKCkuc2V0V2lkdGgoRXh0LmZseShiLmVsKS5nZXRXaWR0aCgpKS5zaG93QXQoMCwwKTtkLnZhbGlkPXRydWV9cmV0dXJuIGQuZHJvcEFsbG93ZWR9LG9uQ29udGFpbmVyRHJvcDpmdW5jdGlvbihhLGMsYil7cmV0dXJuIHRoaXMub25Ob2RlRHJvcChhLG51bGwsYyxiKX0sb25Ob2RlRHJvcDpmdW5jdGlvbihnLGEsaSxoKXt2YXIgZD10aGlzLGM9ZmFsc2UsYj17d2FpdDpmYWxzZSxwcm9jZXNzRHJvcDpmdW5jdGlvbigpe2QuaW52YWxpZGF0ZURyb3AoKTtkLmhhbmRsZU5vZGVEcm9wKGgsZC5vdmVyUmVjb3JkLGQuY3VycmVudFBvc2l0aW9uKTtjPXRydWU7ZC5maXJlVmlld0V2ZW50KCJkcm9wIixnLGgsZC5vdmVyUmVjb3JkLGQuY3VycmVudFBvc2l0aW9uKX0sY2FuY2VsRHJvcDpmdW5jdGlvbigpe2QuaW52YWxpZGF0ZURyb3AoKTtjPXRydWV9fSxqPWZhbHNlO2lmKGQudmFsaWQpe2o9ZC5maXJlVmlld0V2ZW50KCJiZWZvcmVkcm9wIixnLGgsZC5vdmVyUmVjb3JkLGQuY3VycmVudFBvc2l0aW9uLGIpO2lmKGIud2FpdCl7cmV0dXJufWlmKGohPT1mYWxzZSl7aWYoIWMpe2IucHJvY2Vzc0Ryb3AoKX19fXJldHVybiBqfSxkZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy5pbmRpY2F0b3IpO2RlbGV0ZSB0aGlzLmluZGljYXRvcjt0aGlzLmNhbGxQYXJlbnQoKX19KTtFeHQuZGVmaW5lKCJFeHQuZ3JpZC5WaWV3RHJvcFpvbmUiLHtleHRlbmQ6IkV4dC52aWV3LkRyb3Bab25lIixpbmRpY2F0b3JIdG1sOic8ZGl2IGNsYXNzPSInK0V4dC5iYXNlQ1NTUHJlZml4KydncmlkLWRyb3AtaW5kaWNhdG9yLWxlZnQiPjwvZGl2PjxkaXYgY2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrJ2dyaWQtZHJvcC1pbmRpY2F0b3ItcmlnaHQiPjwvZGl2PicsaW5kaWNhdG9yQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLWRyb3AtaW5kaWNhdG9yIixoYW5kbGVOb2RlRHJvcDpmdW5jdGlvbihiLGQsZSl7dmFyIGo9dGhpcy52aWV3LGs9ai5nZXRTdG9yZSgpLGgsYSxjLGc7aWYoYi5jb3B5KXthPWIucmVjb3JkcztiLnJlY29yZHM9W107Zm9yKGM9MCxnPWEubGVuZ3RoO2M8ZztjKyspe2IucmVjb3Jkcy5wdXNoKGFbY10uY29weShhW2NdLmdldElkKCkpKX19ZWxzZXtiLnZpZXcuc3RvcmUucmVtb3ZlKGIucmVjb3JkcyxiLnZpZXc9PT1qKX1oPWsuaW5kZXhPZihkKTtpZihlIT09ImJlZm9yZSIpe2grK31rLmluc2VydChoLGIucmVjb3Jkcyk7ai5nZXRTZWxlY3Rpb25Nb2RlbCgpLnNlbGVjdChiLnJlY29yZHMpfX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLmNvbHVtbi5BY3Rpb24iLHtleHRlbmQ6IkV4dC5ncmlkLmNvbHVtbi5Db2x1bW4iLGFsaWFzOlsid2lkZ2V0LmFjdGlvbmNvbHVtbiJdLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmdyaWQuQWN0aW9uQ29sdW1uIixhY3Rpb25JZFJlOm5ldyBSZWdFeHAoRXh0LmJhc2VDU1NQcmVmaXgrImFjdGlvbi1jb2wtKFxcZCspIiksYWx0VGV4dDoiIixtZW51VGV4dDoiPGk+QWN0aW9uczwvaT4iLHNvcnRhYmxlOmZhbHNlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGQpe3ZhciBnPXRoaXMsYj1FeHQuYXBwbHkoe30sZCksYz1iLml0ZW1zfHxbZ10saCxlLGE7Zy5vcmlnUmVuZGVyZXI9Yi5yZW5kZXJlcnx8Zy5yZW5kZXJlcjtnLm9yaWdTY29wZT1iLnNjb3BlfHxnLnNjb3BlO2RlbGV0ZSBnLnJlbmRlcmVyO2RlbGV0ZSBnLnNjb3BlO2RlbGV0ZSBiLnJlbmRlcmVyO2RlbGV0ZSBiLnNjb3BlO2RlbGV0ZSBiLml0ZW1zO2cuY2FsbFBhcmVudChbYl0pO2cuaXRlbXM9Yztmb3IoZT0wLGE9Yy5sZW5ndGg7ZTxhOysrZSl7aWYoY1tlXS5nZXRDbGFzcyl7aD10cnVlO2JyZWFrfX1pZihnLm9yaWdSZW5kZXJlcnx8aCl7Zy5oYXNDdXN0b21SZW5kZXJlcj10cnVlfX0sZGVmYXVsdFJlbmRlcmVyOmZ1bmN0aW9uKGcsail7dmFyIGU9dGhpcyxiPUV4dC5iYXNlQ1NTUHJlZml4LGs9ZS5vcmlnU2NvcGV8fGUsZD1lLml0ZW1zLGM9ZC5sZW5ndGgsYT0wLGg7Zz1FeHQuaXNGdW5jdGlvbihlLm9yaWdSZW5kZXJlcik/ZS5vcmlnUmVuZGVyZXIuYXBwbHkoayxhcmd1bWVudHMpfHwiIjoiIjtqLnRkQ2xzKz0iICIrRXh0LmJhc2VDU1NQcmVmaXgrImFjdGlvbi1jb2wtY2VsbCI7Zm9yKDthPGM7YSsrKXtoPWRbYV07aWYoIWguaGFzQWN0aW9uQ29uZmlndXJhdGlvbil7aC5zdG9wU2VsZWN0aW9uPWUuc3RvcFNlbGVjdGlvbjtoLmRpc2FibGU9RXh0LkZ1bmN0aW9uLmJpbmQoZS5kaXNhYmxlQWN0aW9uLGUsW2FdLDApO2guZW5hYmxlPUV4dC5GdW5jdGlvbi5iaW5kKGUuZW5hYmxlQWN0aW9uLGUsW2FdLDApO2guaGFzQWN0aW9uQ29uZmlndXJhdGlvbj10cnVlfWcrPSc8aW1nIGFsdD0iJysoaC5hbHRUZXh0fHxlLmFsdFRleHQpKyciIHNyYz0iJysoaC5pY29ufHxFeHQuQkxBTktfSU1BR0VfVVJMKSsnIiBjbGFzcz0iJytiKyJhY3Rpb24tY29sLWljb24gIitiKyJhY3Rpb24tY29sLSIrU3RyaW5nKGEpKyIgIisoaC5kaXNhYmxlZD9iKyJpdGVtLWRpc2FibGVkIjoiICIpKyIgIisoRXh0LmlzRnVuY3Rpb24oaC5nZXRDbGFzcyk/aC5nZXRDbGFzcy5hcHBseShoLnNjb3BlfHxrLGFyZ3VtZW50cyk6KGguaWNvbkNsc3x8ZS5pY29uQ2xzfHwiIikpKyciJysoKGgudG9vbHRpcCk/JyBkYXRhLXF0aXA9IicraC50b29sdGlwKyciJzoiIikrIiAvPiJ9cmV0dXJuIGd9LGVuYWJsZUFjdGlvbjpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXM7aWYoIWIpe2I9MH1lbHNle2lmKCFFeHQuaXNOdW1iZXIoYikpe2I9RXh0LkFycmF5LmluZGV4T2YoYy5pdGVtcyxiKX19Yy5pdGVtc1tiXS5kaXNhYmxlZD1mYWxzZTtjLnVwKCJ0YWJsZXBhbmVsIikuZWwuc2VsZWN0KCIuIitFeHQuYmFzZUNTU1ByZWZpeCsiYWN0aW9uLWNvbC0iK2IpLnJlbW92ZUNscyhjLmRpc2FibGVkQ2xzKTtpZighYSl7Yy5maXJlRXZlbnQoImVuYWJsZSIsYyl9fSxkaXNhYmxlQWN0aW9uOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcztpZighYil7Yj0wfWVsc2V7aWYoIUV4dC5pc051bWJlcihiKSl7Yj1FeHQuQXJyYXkuaW5kZXhPZihjLml0ZW1zLGIpfX1jLml0ZW1zW2JdLmRpc2FibGVkPXRydWU7Yy51cCgidGFibGVwYW5lbCIpLmVsLnNlbGVjdCgiLiIrRXh0LmJhc2VDU1NQcmVmaXgrImFjdGlvbi1jb2wtIitiKS5hZGRDbHMoYy5kaXNhYmxlZENscyk7aWYoIWEpe2MuZmlyZUV2ZW50KCJkaXNhYmxlIixjKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5pdGVtcztkZWxldGUgdGhpcy5yZW5kZXJlcjtyZXR1cm4gdGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LHByb2Nlc3NFdmVudDpmdW5jdGlvbihpLGwsbixhLGosZyxjLHApe3ZhciBoPXRoaXMsZD1nLmdldFRhcmdldCgpLGIsbyxrLG09aT09ImtleWRvd24iJiZnLmdldEtleSgpO2lmKG0mJiFFeHQuZmx5KGQpLmZpbmRQYXJlbnQobC5jZWxsU2VsZWN0b3IpKXtkPUV4dC5mbHkobikuZG93bigiLiIrRXh0LmJhc2VDU1NQcmVmaXgrImFjdGlvbi1jb2wtaWNvbiIsdHJ1ZSl9aWYoZCYmKGI9ZC5jbGFzc05hbWUubWF0Y2goaC5hY3Rpb25JZFJlKSkpe289aC5pdGVtc1twYXJzZUludChiWzFdLDEwKV07aWYobyl7aWYoaT09ImNsaWNrInx8KG09PWcuRU5URVJ8fG09PWcuU1BBQ0UpKXtrPW8uaGFuZGxlcnx8aC5oYW5kbGVyO2lmKGsmJiFvLmRpc2FibGVkKXtrLmNhbGwoby5zY29wZXx8aC5vcmlnU2NvcGV8fGgsbCxhLGosbyxnLGMscCl9fWVsc2V7aWYoaT09Im1vdXNlZG93biImJm8uc3RvcFNlbGVjdGlvbiE9PWZhbHNlKXtyZXR1cm4gZmFsc2V9fX19cmV0dXJuIGguY2FsbFBhcmVudChhcmd1bWVudHMpfSxjYXNjYWRlOmZ1bmN0aW9uKGIsYSl7Yi5jYWxsKGF8fHRoaXMsdGhpcyl9LGdldFJlZkl0ZW1zOmZ1bmN0aW9uKCl7cmV0dXJuW119fSk7RXh0LmRlZmluZSgiRXh0LmdyaWQuY29sdW1uLkJvb2xlYW4iLHtleHRlbmQ6IkV4dC5ncmlkLmNvbHVtbi5Db2x1bW4iLGFsaWFzOlsid2lkZ2V0LmJvb2xlYW5jb2x1bW4iXSxhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5ncmlkLkJvb2xlYW5Db2x1bW4iLHRydWVUZXh0OiJ0cnVlIixmYWxzZVRleHQ6ImZhbHNlIix1bmRlZmluZWRUZXh0OiImIzE2MDsiLGRlZmF1bHRSZW5kZXJlcjpmdW5jdGlvbihhKXtpZihhPT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy51bmRlZmluZWRUZXh0fWlmKCFhfHxhPT09ImZhbHNlIil7cmV0dXJuIHRoaXMuZmFsc2VUZXh0fXJldHVybiB0aGlzLnRydWVUZXh0fX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLmNvbHVtbi5EYXRlIix7ZXh0ZW5kOiJFeHQuZ3JpZC5jb2x1bW4uQ29sdW1uIixhbGlhczpbIndpZGdldC5kYXRlY29sdW1uIl0scmVxdWlyZXM6WyJFeHQuRGF0ZSJdLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmdyaWQuRGF0ZUNvbHVtbiIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe2lmKCF0aGlzLmZvcm1hdCl7dGhpcy5mb3JtYXQ9RXh0LkRhdGUuZGVmYXVsdEZvcm1hdH10aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sZGVmYXVsdFJlbmRlcmVyOmZ1bmN0aW9uKGEpe3JldHVybiBFeHQudXRpbC5Gb3JtYXQuZGF0ZShhLHRoaXMuZm9ybWF0KX19KTtFeHQuZGVmaW5lKCJFeHQuZ3JpZC5jb2x1bW4uTnVtYmVyIix7ZXh0ZW5kOiJFeHQuZ3JpZC5jb2x1bW4uQ29sdW1uIixhbGlhczpbIndpZGdldC5udW1iZXJjb2x1bW4iXSxyZXF1aXJlczpbIkV4dC51dGlsLkZvcm1hdCJdLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmdyaWQuTnVtYmVyQ29sdW1uIixmb3JtYXQ6IjAsMDAwLjAwIixkZWZhdWx0UmVuZGVyZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC51dGlsLkZvcm1hdC5udW1iZXIoYSx0aGlzLmZvcm1hdCl9fSk7RXh0LmRlZmluZSgiRXh0LmdyaWQuY29sdW1uLlRlbXBsYXRlIix7ZXh0ZW5kOiJFeHQuZ3JpZC5jb2x1bW4uQ29sdW1uIixhbGlhczpbIndpZGdldC50ZW1wbGF0ZWNvbHVtbiJdLHJlcXVpcmVzOlsiRXh0LlhUZW1wbGF0ZSJdLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmdyaWQuVGVtcGxhdGVDb2x1bW4iLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EudHBsPSghRXh0LmlzUHJpbWl0aXZlKGEudHBsKSYmYS50cGwuY29tcGlsZSk/YS50cGw6bmV3IEV4dC5YVGVtcGxhdGUoYS50cGwpO2EuaGFzQ3VzdG9tUmVuZGVyZXI9dHJ1ZTthLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sZGVmYXVsdFJlbmRlcmVyOmZ1bmN0aW9uKGMsZCxhKXt2YXIgYj1FeHQuYXBwbHkoe30sYS5kYXRhLGEuZ2V0QXNzb2NpYXRlZERhdGEoKSk7cmV0dXJuIHRoaXMudHBsLmFwcGx5KGIpfX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLmZlYXR1cmUuRmVhdHVyZSIse2V4dGVuZDoiRXh0LnV0aWwuT2JzZXJ2YWJsZSIsYWxpYXM6ImZlYXR1cmUuZmVhdHVyZSIsaXNGZWF0dXJlOnRydWUsZGlzYWJsZWQ6ZmFsc2UsaGFzRmVhdHVyZUV2ZW50OnRydWUsZXZlbnRQcmVmaXg6bnVsbCxldmVudFNlbGVjdG9yOm51bGwsdmlldzpudWxsLGdyaWQ6bnVsbCxjb2xsZWN0RGF0YTpmYWxzZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt0aGlzLmluaXRpYWxDb25maWc9YTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHRoaXMuc2VsZih0aGlzLmluaXRpYWxDb25maWcpfSxpbml0OkV4dC5lbXB0eUZuLGdldEZlYXR1cmVUcGw6ZnVuY3Rpb24oKXtyZXR1cm4iIn0sZ2V0RmlyZUV2ZW50QXJnczpmdW5jdGlvbihiLGEsYyxkKXtyZXR1cm5bYixhLGMsZF19LGF0dGFjaEV2ZW50czpmdW5jdGlvbigpe30sZ2V0RnJhZ21lbnRUcGw6RXh0LmVtcHR5Rm4sbXV0YXRlTWV0YVJvd1RwbDpFeHQuZW1wdHlGbixnZXRNZXRhUm93VHBsRnJhZ21lbnRzOmZ1bmN0aW9uKCl7cmV0dXJue319LGdldFRhYmxlRnJhZ21lbnRzOmZ1bmN0aW9uKCl7cmV0dXJue319LGdldEFkZGl0aW9uYWxEYXRhOmZ1bmN0aW9uKGMsYSxiLGQpe3JldHVybnt9fSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPWZhbHNlfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD10cnVlfX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLmZlYXR1cmUuQWJzdHJhY3RTdW1tYXJ5Iix7ZXh0ZW5kOiJFeHQuZ3JpZC5mZWF0dXJlLkZlYXR1cmUiLGFsaWFzOiJmZWF0dXJlLmFic3RyYWN0c3VtbWFyeSIsc2hvd1N1bW1hcnlSb3c6dHJ1ZSxuZXN0ZWRJZFJlOi9ce1x7aWRcfShbXHdcLV0qKVx9L2csaW5pdDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5ncmlkLm9wdGltaXplZENvbHVtbk1vdmU9ZmFsc2U7YS52aWV3Lm1vbihhLnZpZXcuc3RvcmUse3VwZGF0ZTphLm9uU3RvcmVVcGRhdGUsc2NvcGU6YX0pfSxvblN0b3JlVXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy52aWV3O2lmKHRoaXMuc2hvd1N1bW1hcnlSb3cpe2Euc2F2ZVNjcm9sbFN0YXRlKCk7YS5yZWZyZXNoKCk7YS5yZXN0b3JlU2Nyb2xsU3RhdGUoKX19LHRvZ2dsZVN1bW1hcnlSb3c6ZnVuY3Rpb24oYSl7dGhpcy5zaG93U3VtbWFyeVJvdz0hIWF9LGdldFN1bW1hcnlGcmFnbWVudHM6ZnVuY3Rpb24oKXt2YXIgYT17fTtpZih0aGlzLnNob3dTdW1tYXJ5Um93KXtFeHQuYXBwbHkoYSx7cHJpbnRTdW1tYXJ5Um93OkV4dC5iaW5kKHRoaXMucHJpbnRTdW1tYXJ5Um93LHRoaXMpfSl9cmV0dXJuIGF9LHByaW50U3VtbWFyeVJvdzpmdW5jdGlvbihiKXt2YXIgYT10aGlzLnZpZXcuZ2V0VGFibGVDaHVua2VyKCkubWV0YVJvd1RwbC5qb2luKCIiKSxjPUV4dC5iYXNlQ1NTUHJlZml4O2E9YS5yZXBsYWNlKGMrImdyaWQtcm93IixjKyJncmlkLXJvdy1zdW1tYXJ5Iik7YT1hLnJlcGxhY2UoInt7aWR9fSIsIntncmlkU3VtbWFyeVZhbHVlfSIpO2E9YS5yZXBsYWNlKHRoaXMubmVzdGVkSWRSZSwie2lkJDF9Iik7YT1hLnJlcGxhY2UoIntbdGhpcy5lbWJlZFJvd0NscygpXX0iLCJ7cm93Q2xzfSIpO2E9YS5yZXBsYWNlKCJ7W3RoaXMuZW1iZWRSb3dBdHRyKCldfSIsIntyb3dBdHRyfSIpO2E9bmV3IEV4dC5YVGVtcGxhdGUoYSx7Zmlyc3RPckxhc3RDbHM6RXh0LnZpZXcuVGFibGVDaHVua2VyLmZpcnN0T3JMYXN0Q2xzfSk7cmV0dXJuIGEuYXBwbHlUZW1wbGF0ZSh7Y29sdW1uczp0aGlzLmdldFByaW50RGF0YShiKX0pfSxnZXRDb2x1bW5WYWx1ZTpmdW5jdGlvbihjLGEpe3ZhciBiPUV4dC5nZXRDbXAoYy5pZCksZT1hW2MuaWRdLGQ9Yi5zdW1tYXJ5UmVuZGVyZXI7aWYoIWUmJmUhPT0wKXtlPSJcdTAwYTAifWlmKGQpe2U9ZC5jYWxsKGIuc2NvcGV8fHRoaXMsZSxhLGMuZGF0YUluZGV4KX1yZXR1cm4gZX0sZ2V0U3VtbWFyeTpmdW5jdGlvbihhLGIsZCxjKXtpZihiKXtpZihFeHQuaXNGdW5jdGlvbihiKSl7cmV0dXJuIGEuYWdncmVnYXRlKGIsbnVsbCxjKX1zd2l0Y2goYil7Y2FzZSJjb3VudCI6cmV0dXJuIGEuY291bnQoYyk7Y2FzZSJtaW4iOnJldHVybiBhLm1pbihkLGMpO2Nhc2UibWF4IjpyZXR1cm4gYS5tYXgoZCxjKTtjYXNlInN1bSI6cmV0dXJuIGEuc3VtKGQsYyk7Y2FzZSJhdmVyYWdlIjpyZXR1cm4gYS5hdmVyYWdlKGQsYyk7ZGVmYXVsdDpyZXR1cm4gYz97fToiIn19fX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLmZlYXR1cmUuQ2h1bmtpbmciLHtleHRlbmQ6IkV4dC5ncmlkLmZlYXR1cmUuRmVhdHVyZSIsYWxpYXM6ImZlYXR1cmUuY2h1bmtpbmciLGNodW5rU2l6ZToyMCxyb3dIZWlnaHQ6RXh0LmlzSUU/Mjc6MjYsdmlzaWJsZUNodW5rOjAsaGFzRmVhdHVyZUV2ZW50OmZhbHNlLGF0dGFjaEV2ZW50czpmdW5jdGlvbigpe3RoaXMudmlldy5lbC5vbigic2Nyb2xsIix0aGlzLm9uQm9keVNjcm9sbCx0aGlzLHtidWZmZXI6MzAwfSl9LG9uQm9keVNjcm9sbDpmdW5jdGlvbihnLGMpe3ZhciBiPXRoaXMudmlldyxkPWMuc2Nyb2xsVG9wLGE9TWF0aC5mbG9vcihkL3RoaXMucm93SGVpZ2h0L3RoaXMuY2h1bmtTaXplKTtpZihhIT09dGhpcy52aXNpYmxlQ2h1bmspe3RoaXMudmlzaWJsZUNodW5rPWE7Yi5yZWZyZXNoKCk7Yi5lbC5kb20uc2Nyb2xsVG9wPWQ7Yi5lbC5kb20uc2Nyb2xsVG9wPWR9fSxjb2xsZWN0RGF0YTpmdW5jdGlvbihkLG0sbCxrLGMpe3ZhciBqPXRoaXMsZT1jLnJvd3MubGVuZ3RoLGI9MCxnPTAsYT1qLnZpc2libGVDaHVuayxwLG4saD1jLnJvd3M7ZGVsZXRlIGMucm93cztjLmNodW5rcz1bXTtmb3IoO2I8ZTtiKz1qLmNodW5rU2l6ZSxnKyspe2lmKGIrai5jaHVua1NpemU+ZSl7bj1lLWJ9ZWxzZXtuPWouY2h1bmtTaXplfWlmKGc+PWEtMSYmZzw9YSsxKXtwPWguc2xpY2UoYixiK2ouY2h1bmtTaXplKX1lbHNle3A9W119Yy5jaHVua3MucHVzaCh7cm93czpwLGZ1bGxXaWR0aDprLGNodW5rSGVpZ2h0Om4qai5yb3dIZWlnaHR9KX1yZXR1cm4gY30sZ2V0VGFibGVGcmFnbWVudHM6ZnVuY3Rpb24oKXtyZXR1cm57b3BlblRhYmxlV3JhcDpmdW5jdGlvbigpe3JldHVybic8dHBsIGZvcj0iY2h1bmtzIj48ZGl2IGNsYXNzPSInK0V4dC5iYXNlQ1NTUHJlZml4KydncmlkLWNodW5rIiBzdHlsZT0iaGVpZ2h0OiB7Y2h1bmtIZWlnaHR9cHg7Ij4nfSxjbG9zZVRhYmxlV3JhcDpmdW5jdGlvbigpe3JldHVybiI8L2Rpdj48L3RwbD4ifX19fSk7RXh0LmRlZmluZSgiRXh0LmdyaWQuZmVhdHVyZS5Hcm91cGluZyIse2V4dGVuZDoiRXh0LmdyaWQuZmVhdHVyZS5GZWF0dXJlIixhbGlhczoiZmVhdHVyZS5ncm91cGluZyIsZXZlbnRQcmVmaXg6Imdyb3VwIixldmVudFNlbGVjdG9yOiIuIitFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1ncm91cC1oZCIsYm9keVNlbGVjdG9yOiIuIitFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1ncm91cC1ib2R5Iixjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jb2xsYXBzZWRTdGF0ZT17fTthLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sZ3JvdXBIZWFkZXJUcGw6Intjb2x1bW5OYW1lfToge25hbWV9IixkZXB0aFRvSW5kZW50OjE3LGNvbGxhcHNlZENsczpFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1ncm91cC1jb2xsYXBzZWQiLGhkQ29sbGFwc2VkQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLWdyb3VwLWhkLWNvbGxhcHNlZCIsaGRDb2xsYXBzaWJsZUNsczpFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1ncm91cC1oZC1jb2xsYXBzaWJsZSIsZ3JvdXBCeVRleHQ6Ikdyb3VwIGJ5IHRoaXMgZmllbGQiLHNob3dHcm91cHNUZXh0OiJTaG93IGluIGdyb3VwcyIsaGlkZUdyb3VwZWRIZWFkZXI6ZmFsc2Usc3RhcnRDb2xsYXBzZWQ6ZmFsc2UsZW5hYmxlR3JvdXBpbmdNZW51OnRydWUsZW5hYmxlTm9Hcm91cHM6dHJ1ZSxjb2xsYXBzaWJsZTp0cnVlLGVuYWJsZTpmdW5jdGlvbigpe3ZhciBjPXRoaXMsYT1jLnZpZXcsYj1hLnN0b3JlLGQ7Yy5sYXN0R3JvdXBGaWVsZD1jLmdldEdyb3VwRmllbGQoKTtpZihjLmxhc3RHcm91cEluZGV4KXtjLmJsb2NrKCk7Yi5ncm91cChjLmxhc3RHcm91cEluZGV4KTtjLnVuYmxvY2soKX1jLmNhbGxQYXJlbnQoKTtkPWMudmlldy5oZWFkZXJDdC5nZXRNZW51KCkuZG93bigiI2dyb3VwVG9nZ2xlTWVudUl0ZW0iKTtkLnNldENoZWNrZWQodHJ1ZSx0cnVlKTtjLnJlZnJlc2hJZigpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxhPWQudmlldyxiPWEuc3RvcmUsZz1iLnJlbW90ZUdyb3VwLGUsYztjPWIuZ3JvdXBlcnMuZmlyc3QoKTtpZihjKXtkLmxhc3RHcm91cEluZGV4PWMucHJvcGVydHk7ZC5ibG9jaygpO2IuY2xlYXJHcm91cGluZygpO2QudW5ibG9jaygpfWQuY2FsbFBhcmVudCgpO2U9ZC52aWV3LmhlYWRlckN0LmdldE1lbnUoKS5kb3duKCIjZ3JvdXBUb2dnbGVNZW51SXRlbSIpO2Uuc2V0Q2hlY2tlZCh0cnVlLHRydWUpO2Uuc2V0Q2hlY2tlZChmYWxzZSx0cnVlKTtkLnJlZnJlc2hJZigpfSxyZWZyZXNoSWY6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdyaWQub3duZXJDdCxhPXRoaXMudmlldztpZighYS5zdG9yZS5yZW1vdGVHcm91cCYmIXRoaXMuYmxvY2tSZWZyZXNoKXtpZihiJiZiLmxvY2thYmxlKXtiLnZpZXcucmVmcmVzaCgpfWVsc2V7YS5yZWZyZXNoKCl9fX0sZ2V0RmVhdHVyZVRwbDpmdW5jdGlvbihiLGMsYSxkKXtyZXR1cm5bIjx0cGwgaWY9XCJ0eXBlb2Ygcm93cyAhPT0gJ3VuZGVmaW5lZCdcIj4iLCc8dHIgaWQ9Intncm91cEhlYWRlcklkfSIgY2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrJ2dyaWQtZ3JvdXAtaGQge2hkQ29sbGFwc2VkQ2xzfSB7Y29sbGFwc2libGVDbGFzc30iPjx0ZCBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsnZ3JpZC1jZWxsIiBjb2xzcGFuPSInK2MuY29sdW1ucy5sZW5ndGgrJyIge1t0aGlzLmluZGVudEJ5RGVwdGgodmFsdWVzKV19PjxkaXYgY2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrJ2dyaWQtY2VsbC1pbm5lciI+PGRpdiBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsnZ3JpZC1ncm91cC10aXRsZSI+e2NvbGxhcHNlZH17W3RoaXMucmVuZGVyR3JvdXBIZWFkZXJUcGwodmFsdWVzLCBwYXJlbnQpXX08L2Rpdj48L2Rpdj48L3RkPjwvdHI+JywnPHRyIGlkPSJ7Z3JvdXBCb2R5SWR9IiBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsnZ3JpZC1ncm91cC1ib2R5IHtjb2xsYXBzZWRDbHN9Ij48dGQgY29sc3Bhbj0iJytjLmNvbHVtbnMubGVuZ3RoKyciPntbdGhpcy5yZWN1cnNlKHZhbHVlcyldfTwvdGQ+PC90cj4nLCI8L3RwbD4iXS5qb2luKCIiKX0sZ2V0RnJhZ21lbnRUcGw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybntpbmRlbnRCeURlcHRoOmEuaW5kZW50QnlEZXB0aCxkZXB0aFRvSW5kZW50OmEuZGVwdGhUb0luZGVudCxyZW5kZXJHcm91cEhlYWRlclRwbDpmdW5jdGlvbihiLGMpe3JldHVybiBFeHQuWFRlbXBsYXRlLmdldFRwbChhLCJncm91cEhlYWRlclRwbCIpLmFwcGx5KGIsYyl9fX0saW5kZW50QnlEZXB0aDpmdW5jdGlvbihhKXtyZXR1cm4nc3R5bGU9InBhZGRpbmctbGVmdDonKygoYS5kZXB0aHx8MCkqdGhpcy5kZXB0aFRvSW5kZW50KSsncHg7Iid9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy52aWV3O2RlbGV0ZSB0aGlzLnBydW5lZEhlYWRlcn0sYXR0YWNoRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIudmlldzthLm9uKHtzY29wZTpiLGdyb3VwY2xpY2s6Yi5vbkdyb3VwQ2xpY2sscm93Zm9jdXM6Yi5vblJvd0ZvY3VzfSk7YS5tb24oYS5zdG9yZSx7c2NvcGU6Yixncm91cGNoYW5nZTpiLm9uR3JvdXBDaGFuZ2UscmVtb3ZlOmIub25SZW1vdmUsYWRkOmIub25BZGQsdXBkYXRlOmIub25VcGRhdGV9KTtpZihiLmVuYWJsZUdyb3VwaW5nTWVudSl7Yi5pbmplY3RHcm91cGluZ01lbnUoKX1iLnBydW5lR3JvdXBlZEhlYWRlcigpO2IubGFzdEdyb3VwRmllbGQ9Yi5nZXRHcm91cEZpZWxkKCk7Yi5ibG9jaygpO2Iub25Hcm91cENoYW5nZSgpO2IudW5ibG9jaygpfSxvbkFkZDpmdW5jdGlvbihsLGMpe3ZhciBqPXRoaXMsaz1qLnZpZXcsYT1qLmdldEdyb3VwRmllbGQoKSxnPTAsaD1jLmxlbmd0aCxuLGQsYixlLG07aWYoay5yZW5kZXJlZCl7ZD17fTtuPXt9O2Zvcig7ZzxoOysrZyl7bT1jW2ddLmdldChhKTtpZihkW21dPT09dW5kZWZpbmVkKXtkW21dPTB9ZFttXSs9MX1iPWwuZ2V0R3JvdXBzKCk7Zm9yKGc9MCxoPWIubGVuZ3RoO2c8aDsrK2cpe209YltnXTtuW20ubmFtZV09bS5jaGlsZHJlbi5sZW5ndGh9Zm9yKG0gaW4gZCl7aWYoZFttXT09PW5bbV0pe2U9dHJ1ZTticmVha319aWYoZSl7ay5yZWZyZXNoKCl9fX0sb25VcGRhdGU6ZnVuY3Rpb24oYyxiLGQsZSl7dmFyIGE9dGhpcy52aWV3O2lmKGEucmVuZGVyZWQmJiFlfHxFeHQuQXJyYXkuY29udGFpbnMoZSx0aGlzLmdldEdyb3VwRmllbGQoKSkpe2EucmVmcmVzaCgpfX0sb25SZW1vdmU6ZnVuY3Rpb24oZCxjKXt2YXIgZT10aGlzLGI9ZS5nZXRHcm91cEZpZWxkKCksZz1jLmdldChiKSxhPWUudmlldztpZihhLnJlbmRlcmVkKXtpZihkLmZpbmRFeGFjdChiLGcpPT09LTEpe2Uudmlldy5yZWZyZXNoKCl9fX0saW5qZWN0R3JvdXBpbmdNZW51OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEudmlldy5oZWFkZXJDdDtiLnNob3dNZW51Qnk9YS5zaG93TWVudUJ5O2IuZ2V0TWVudUl0ZW1zPWEuZ2V0TWVudUl0ZW1zKCl9LHNob3dNZW51Qnk6ZnVuY3Rpb24oYixlKXt2YXIgZD10aGlzLmdldE1lbnUoKSxjPWQuZG93bigiI2dyb3VwTWVudUl0ZW0iKSxhPWUuZ3JvdXBhYmxlPT09ZmFsc2U/ImRpc2FibGUiOiJlbmFibGUiO2NbYV0oKTtFeHQuZ3JpZC5oZWFkZXIuQ29udGFpbmVyLnByb3RvdHlwZS5zaG93TWVudUJ5LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZ2V0TWVudUl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcyxjPWcuZ3JvdXBCeVRleHQsZT1nLmRpc2FibGVkfHwhZy5nZXRHcm91cEZpZWxkKCksYT1nLnNob3dHcm91cHNUZXh0LGQ9Zy5lbmFibGVOb0dyb3VwcyxiPWcudmlldy5oZWFkZXJDdC5nZXRNZW51SXRlbXM7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGg9Yi5jYWxsKHRoaXMpO2gucHVzaCgiLSIse2ljb25DbHM6RXh0LmJhc2VDU1NQcmVmaXgrImdyb3VwLWJ5LWljb24iLGl0ZW1JZDoiZ3JvdXBNZW51SXRlbSIsdGV4dDpjLGhhbmRsZXI6Zy5vbkdyb3VwTWVudUl0ZW1DbGljayxzY29wZTpnfSk7aWYoZCl7aC5wdXNoKHtpdGVtSWQ6Imdyb3VwVG9nZ2xlTWVudUl0ZW0iLHRleHQ6YSxjaGVja2VkOiFlLGNoZWNrSGFuZGxlcjpnLm9uR3JvdXBUb2dnbGVNZW51SXRlbUNsaWNrLHNjb3BlOmd9KX1yZXR1cm4gaH19LG9uR3JvdXBNZW51SXRlbUNsaWNrOmZ1bmN0aW9uKGMsZyl7dmFyIGQ9dGhpcyxoPWMucGFyZW50TWVudSxpPWguYWN0aXZlSGVhZGVyLGE9ZC52aWV3LGI9YS5zdG9yZTtkZWxldGUgZC5sYXN0R3JvdXBJbmRleDtkLmJsb2NrKCk7ZC5lbmFibGUoKTtiLmdyb3VwKGkuZGF0YUluZGV4KTtkLnBydW5lR3JvdXBlZEhlYWRlcigpO2QudW5ibG9jaygpO2QucmVmcmVzaElmKCl9LGJsb2NrOmZ1bmN0aW9uKCl7dGhpcy5ibG9ja1JlZnJlc2g9dGhpcy52aWV3LmJsb2NrUmVmcmVzaD10cnVlfSx1bmJsb2NrOmZ1bmN0aW9uKCl7dGhpcy5ibG9ja1JlZnJlc2g9dGhpcy52aWV3LmJsb2NrUmVmcmVzaD1mYWxzZX0sb25Hcm91cFRvZ2dsZU1lbnVJdGVtQ2xpY2s6ZnVuY3Rpb24oYSxiKXt0aGlzW2I/ImVuYWJsZSI6ImRpc2FibGUiXSgpfSxwcnVuZUdyb3VwZWRIZWFkZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5nZXRHcm91cGVkSGVhZGVyKCk7aWYoYS5oaWRlR3JvdXBlZEhlYWRlciYmYil7aWYoYS5wcnVuZWRIZWFkZXIpe2EucHJ1bmVkSGVhZGVyLnNob3coKX1hLnBydW5lZEhlYWRlcj1iO2IuaGlkZSgpfX0sZ2V0R3JvdXBlZEhlYWRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0R3JvdXBGaWVsZCgpLGI9dGhpcy52aWV3LmhlYWRlckN0O3JldHVybiBhP2IuZG93bigiW2RhdGFJbmRleD0iK2ErIl0iKTpudWxsfSxnZXRHcm91cEZpZWxkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy52aWV3LnN0b3JlLmdyb3VwZXJzLmZpcnN0KCk7aWYoYSl7cmV0dXJuIGEucHJvcGVydHl9cmV0dXJuIiJ9LG9uUm93Rm9jdXM6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcy52aWV3LmdldE5vZGUoYyksYT1FeHQuZmx5KGIpLnVwKCIuIit0aGlzLmNvbGxhcHNlZENscyk7aWYoYSl7dGhpcy5leHBhbmQoYSl9fSxpc0V4cGFuZGVkOmZ1bmN0aW9uKGEpe3JldHVybih0aGlzLmNvbGxhcHNlZFN0YXRlW2FdPT09ZmFsc2UpfSxleHBhbmQ6ZnVuY3Rpb24oaSxiLGgpe3ZhciBlPXRoaXMsYT1lLnZpZXcsYyxnLGQ9ZS5sb2NraW5nUGFydG5lcjtpZihFeHQuaXNTdHJpbmcoaSkpe2c9RXh0LmZseShlLmdldEdyb3VwQm9keUlkKGkpLCJfZ3JvdXBpbmciKX1lbHNle2c9RXh0LmZseShpLCJfZ3JvdXBpbmciKTtpPWUuZ2V0R3JvdXBOYW1lKGcpfWM9RXh0LmdldChlLmdldEdyb3VwSGVhZGVySWQoaSkpO2lmKGUuY29sbGFwc2VkU3RhdGVbaV0pe2cucmVtb3ZlQ2xzKGUuY29sbGFwc2VkQ2xzKTtnLnByZXYoKS5yZW1vdmVDbHMoZS5oZENvbGxhcHNlZENscyk7aWYoaCE9PXRydWUpe2EucmVmcmVzaFNpemUoKX1hLmZpcmVFdmVudCgiZ3JvdXBleHBhbmQiLGEsYyxpKTtlLmNvbGxhcHNlZFN0YXRlW2ldPWZhbHNlO2lmKGQpe2QuZXhwYW5kKGksYixoKX1pZihiKXtnLnNjcm9sbEludG9WaWV3KGEuZWwsbnVsbCx0cnVlKX19fSxleHBhbmRBbGw6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGI9ZC52aWV3LGM9Yi5lbC5zZWxlY3QoZC5ldmVudFNlbGVjdG9yKS5lbGVtZW50cyxnLGE9Yy5sZW5ndGg7Zm9yKGc9MDtnPGE7ZysrKXtkLmV4cGFuZChFeHQuZmx5KGNbZ10pLm5leHQoKSxmYWxzZSx0cnVlKX1iLnJlZnJlc2hTaXplKCl9LGNvbGxhcHNlOmZ1bmN0aW9uKGksYixoKXt2YXIgZT10aGlzLGE9ZS52aWV3LGMsZyxkPWUubG9ja2luZ1BhcnRuZXI7aWYoRXh0LmlzU3RyaW5nKGkpKXtnPUV4dC5mbHkoZS5nZXRHcm91cEJvZHlJZChpKSwiX2dyb3VwaW5nIil9ZWxzZXtnPUV4dC5mbHkoaSwiX2dyb3VwaW5nIik7aT1lLmdldEdyb3VwTmFtZShnKX1jPUV4dC5nZXQoZS5nZXRHcm91cEhlYWRlcklkKGkpKTtpZighZS5jb2xsYXBzZWRTdGF0ZVtpXSl7Zy5hZGRDbHMoZS5jb2xsYXBzZWRDbHMpO2cucHJldigpLmFkZENscyhlLmhkQ29sbGFwc2VkQ2xzKTtpZihoIT09dHJ1ZSl7YS5yZWZyZXNoU2l6ZSgpfWEuZmlyZUV2ZW50KCJncm91cGNvbGxhcHNlIixhLGMsaSk7ZS5jb2xsYXBzZWRTdGF0ZVtpXT10cnVlO2lmKGQpe2QuY29sbGFwc2UoaSxiLGgpfWlmKGIpe2Muc2Nyb2xsSW50b1ZpZXcoYS5lbCxudWxsLHRydWUpfX19LGNvbGxhcHNlQWxsOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxiPWQudmlldyxjPWIuZWwuc2VsZWN0KGQuZXZlbnRTZWxlY3RvcikuZWxlbWVudHMsZyxhPWMubGVuZ3RoO2ZvcihnPTA7ZzxhO2crKyl7ZC5jb2xsYXBzZShFeHQuZmx5KGNbZ10pLm5leHQoKSxmYWxzZSx0cnVlKX1iLnJlZnJlc2hTaXplKCl9LG9uR3JvdXBDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGU9ZC5nZXRHcm91cEZpZWxkKCksYyxhLGI7aWYoZC5oaWRlR3JvdXBlZEhlYWRlcil7aWYoZC5sYXN0R3JvdXBGaWVsZCl7Yz1kLmdldE1lbnVJdGVtKGQubGFzdEdyb3VwRmllbGQpO2lmKGMpe2Muc2V0Q2hlY2tlZCh0cnVlKX19aWYoZSl7YT1kLnZpZXcuaGVhZGVyQ3QuZ2V0VmlzaWJsZUdyaWRDb2x1bW5zKCk7Yj0oKGEubGVuZ3RoPT09MSkmJihhWzBdLmRhdGFJbmRleD09ZSkpO2M9ZC5nZXRNZW51SXRlbShlKTtpZihjJiYhYil7Yy5zZXRDaGVja2VkKGZhbHNlKX19fWQucmVmcmVzaElmKCk7ZC5sYXN0R3JvdXBGaWVsZD1lfSxnZXRNZW51SXRlbTpmdW5jdGlvbihiKXt2YXIgYT10aGlzLnZpZXcsZD1hLmhlYWRlckN0LmRvd24oImdyaWRjb2x1bW5bZGF0YUluZGV4PSIrYisiXSIpLGM9YS5oZWFkZXJDdC5nZXRNZW51KCk7cmV0dXJuIGQ/Yy5kb3duKCJtZW51aXRlbVtoZWFkZXJJZD0iK2QuaWQrIl0iKTpudWxsfSxvbkdyb3VwQ2xpY2s6ZnVuY3Rpb24oYSxjLGcsZCl7dmFyIGI9dGhpcztpZihiLmNvbGxhcHNpYmxlKXtpZihiLmNvbGxhcHNlZFN0YXRlW2ddKXtiLmV4cGFuZChnKX1lbHNle2IuY29sbGFwc2UoZyl9fX0sZ2V0TWV0YVJvd1RwbEZyYWdtZW50czpmdW5jdGlvbigpe3JldHVybntpc1Jvdzp0aGlzLmlzUm93LGNsb3NlUm93OnRoaXMuY2xvc2VSb3d9fSxpc1JvdzpmdW5jdGlvbigpe3JldHVybiI8dHBsIGlmPVwidHlwZW9mIHJvd3MgPT09ICd1bmRlZmluZWQnXCI+In0sY2xvc2VSb3c6ZnVuY3Rpb24oKXtyZXR1cm4iPC90cGw+In0sbXV0YXRlTWV0YVJvd1RwbDpmdW5jdGlvbihhKXthLnVuc2hpZnQoIntbdGhpcy5pc1JvdygpXX0iKTthLnB1c2goIntbdGhpcy5jbG9zZVJvdygpXX0iKX0sZ2V0QWRkaXRpb25hbERhdGE6ZnVuY3Rpb24oZSxqLGcsaSl7dmFyIGg9dGhpcy52aWV3LGQ9aC5oZWFkZXJDdCxjPWQuaXRlbXMuZ2V0QXQoMCksYj17fSxhO2lmKGMpe2E9Yy5pZCsiLXRkQXR0ciI7YlthXT10aGlzLmluZGVudEJ5RGVwdGgoZSkrIiAiKyhpW2FdP2lbYV06IiIpO2IuY29sbGFwc2VkPSJ0cnVlIjtiLmRhdGE9Zy5nZXREYXRhKCl9cmV0dXJuIGJ9LGdldEdyb3VwUm93czpmdW5jdGlvbihtLGQsbixrKXt2YXIgaT10aGlzLGM9bS5jaGlsZHJlbixvPW0ucm93cz1bXSxqPWkudmlldyxnPWkuZ2V0R3JvdXBlZEhlYWRlcigpLGI9aS5nZXRHcm91cEZpZWxkKCksaD0tMSxhLGw9ZC5sZW5ndGgsZTtpZihqLnN0b3JlLmJ1ZmZlcmVkKXtpLmNvbGxhcHNpYmxlPWZhbHNlfW0udmlld0lkPWouaWQ7Zm9yKGE9MDthPGw7YSsrKXtlPWRbYV07aWYoZS5nZXQoYik9PW0ubmFtZSl7aD1hfWlmKEV4dC5BcnJheS5pbmRleE9mKGMsZSkhPS0xKXtvLnB1c2goRXh0LmFwcGx5KG5bYV0se2RlcHRoOjF9KSl9fW0uZ3JvdXBGaWVsZD1iLG0uZ3JvdXBIZWFkZXJJZD1pLmdldEdyb3VwSGVhZGVySWQobS5uYW1lKTttLmdyb3VwQm9keUlkPWkuZ2V0R3JvdXBCb2R5SWQobS5uYW1lKTttLmZ1bGxXaWR0aD1rO20uY29sdW1uTmFtZT1nP2cudGV4dDpiO20uZ3JvdXBWYWx1ZT1tLm5hbWU7aWYoZyYmaD4tMSl7bS5uYW1lPW0ucmVuZGVyZWRWYWx1ZT1uW2hdW2cuaWRdfWlmKGkuY29sbGFwc2VkU3RhdGVbbS5uYW1lXSl7bS5jb2xsYXBzZWRDbHM9aS5jb2xsYXBzZWRDbHM7bS5oZENvbGxhcHNlZENscz1pLmhkQ29sbGFwc2VkQ2xzfWVsc2V7bS5jb2xsYXBzZWRDbHM9bS5oZENvbGxhcHNlZENscz0iIn1pZihpLmNvbGxhcHNpYmxlKXttLmNvbGxhcHNpYmxlQ2xhc3M9aS5oZENvbGxhcHNpYmxlQ2xzfWVsc2V7bS5jb2xsYXBzaWJsZUNsYXNzPSIifXJldHVybiBtfSxnZXRHcm91cEhlYWRlcklkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnZpZXcuaWQrIi1oZC0iK2F9LGdldEdyb3VwQm9keUlkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnZpZXcuaWQrIi1iZC0iK2F9LGdldEdyb3VwTmFtZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM7Yz1FeHQuZmx5KGEpLmZpbmRQYXJlbnQoYi5ldmVudFNlbGVjdG9yKTtpZihjKXtyZXR1cm4gYy5pZC5zcGxpdCh0aGlzLnZpZXcuaWQrIi1oZC0iKVsxXX1jPUV4dC5mbHkoYSkuZmluZFBhcmVudChiLmJvZHlTZWxlY3Rvcik7aWYoYyl7cmV0dXJuIGMuaWQuc3BsaXQodGhpcy52aWV3LmlkKyItYmQtIilbMV19fSxjb2xsZWN0RGF0YTpmdW5jdGlvbihjLHAsbixrLGEpe3ZhciBoPXRoaXMsbD1oLnZpZXcuc3RvcmUsaj1oLmNvbGxhcHNlZFN0YXRlLGUsZCxiLGksbTtpZihoLnN0YXJ0Q29sbGFwc2VkKXtoLnN0YXJ0Q29sbGFwc2VkPWZhbHNlO2U9dHJ1ZX1pZighaC5kaXNhYmxlZCYmbC5pc0dyb3VwZWQoKSl7YS5yb3dzPWI9bC5nZXRHcm91cHMoKTtpPWIubGVuZ3RoO2ZvcihkPTA7ZDxpO2QrKyl7bT1iW2RdO2lmKGUpe2pbbS5uYW1lXT10cnVlfWguZ2V0R3JvdXBSb3dzKG0sYyxwLGspfX1yZXR1cm4gYX0sZ2V0RmlyZUV2ZW50QXJnczpmdW5jdGlvbihiLGEsZCxjKXtyZXR1cm5bYixhLGQsdGhpcy5nZXRHcm91cE5hbWUoZCksY119fSk7RXh0LmRlZmluZSgiRXh0LmdyaWQuZmVhdHVyZS5Hcm91cGluZ1N1bW1hcnkiLHtleHRlbmQ6IkV4dC5ncmlkLmZlYXR1cmUuR3JvdXBpbmciLGFsaWFzOiJmZWF0dXJlLmdyb3VwaW5nc3VtbWFyeSIsbWl4aW5zOntzdW1tYXJ5OiJFeHQuZ3JpZC5mZWF0dXJlLkFic3RyYWN0U3VtbWFyeSJ9LGluaXQ6ZnVuY3Rpb24oKXt0aGlzLm1peGlucy5zdW1tYXJ5LmluaXQuY2FsbCh0aGlzKX0sZ2V0RmVhdHVyZVRwbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKHRoaXMuc2hvd1N1bW1hcnlSb3cpe2E9YS5yZXBsYWNlKCI8L3RwbD4iLCIiKTthKz0ie1t0aGlzLnByaW50U3VtbWFyeVJvdyh4aW5kZXgpXX08L3RwbD4ifXJldHVybiBhfSxnZXRGcmFnbWVudFRwbDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmNhbGxQYXJlbnQoKTtFeHQuYXBwbHkoYSxiLmdldFN1bW1hcnlGcmFnbWVudHMoKSk7aWYoYi5zaG93U3VtbWFyeVJvdyl7Yi5zdW1tYXJ5R3JvdXBzPWIudmlldy5zdG9yZS5nZXRHcm91cHMoKTtiLnN1bW1hcnlEYXRhPWIuZ2VuZXJhdGVTdW1tYXJ5RGF0YSgpfXJldHVybiBhfSxnZXRQcmludERhdGE6ZnVuY3Rpb24oail7dmFyIGs9dGhpcyxlPWsudmlldy5oZWFkZXJDdC5nZXRDb2x1bW5zRm9yVHBsKCksaD0wLGI9ZS5sZW5ndGgsZz1bXSxhPWsuc3VtbWFyeUdyb3Vwc1tqLTFdLm5hbWUsZD1rLnN1bW1hcnlEYXRhW2FdLGM7Zm9yKDtoPGI7KytoKXtjPWVbaF07Yy5ncmlkU3VtbWFyeVZhbHVlPXRoaXMuZ2V0Q29sdW1uVmFsdWUoYyxkKTtnLnB1c2goYyl9cmV0dXJuIGd9LGdlbmVyYXRlU3VtbWFyeURhdGE6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLHU9e30sbj17fSxoPXQudmlldy5zdG9yZSxyPXRoaXMuZ2V0R3JvdXBGaWVsZCgpLGE9aC5wcm94eS5yZWFkZXIscT10LnN1bW1hcnlHcm91cHMsYj10LnZpZXcuaGVhZGVyQ3QuZ2V0Q29sdW1uc0ZvclRwbCgpLGosbyxlLGMsbSx2LHAsayxsLGcsZDtmb3Iobz0wLGU9cS5sZW5ndGg7bzxlOysrbyl7dVtxW29dLm5hbWVdPXt9fWlmKHQucmVtb3RlUm9vdCYmYS5yYXdEYXRhKXttPWEucm9vdDthLnJvb3Q9dC5yZW1vdGVSb290O2EuYnVpbGRFeHRyYWN0b3JzKHRydWUpO2s9YS5nZXRSb290KGEucmF3RGF0YSk7Zz1rLmxlbmd0aDtpZighYS5jb252ZXJ0UmVjb3JkRGF0YSl7YS5idWlsZEV4dHJhY3RvcnMoKX1mb3IobD0wO2w8ZztsKyspe2Q9e307YS5jb252ZXJ0UmVjb3JkRGF0YShkLGtbbF0pO25bZFtyXV09ZH1hLnJvb3Q9bTthLmJ1aWxkRXh0cmFjdG9ycyh0cnVlKX1mb3Iobz0wLGU9Yi5sZW5ndGg7bzxlOysrbyl7cD1FeHQuZ2V0Q21wKGJbb10uaWQpO2M9dC5nZXRTdW1tYXJ5KGgscC5zdW1tYXJ5VHlwZSxwLmRhdGFJbmRleCx0cnVlKTtmb3IodiBpbiBjKXtpZihjLmhhc093blByb3BlcnR5KHYpKXt1W3ZdW3AuaWRdPWNbdl19fWZvcih2IGluIG4pe2lmKG4uaGFzT3duUHJvcGVydHkodikpe2o9blt2XVtwLmRhdGFJbmRleF07aWYoaiE9PXVuZGVmaW5lZCYmdVt2XSE9PXVuZGVmaW5lZCl7dVt2XVtwLmlkXT1qfX19fXJldHVybiB1fX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLmZlYXR1cmUuUm93Qm9keSIse2V4dGVuZDoiRXh0LmdyaWQuZmVhdHVyZS5GZWF0dXJlIixhbGlhczoiZmVhdHVyZS5yb3dib2R5Iixyb3dCb2R5SGlkZGVuQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLXJvdy1ib2R5LWhpZGRlbiIscm93Qm9keVRyQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLXJvd2JvZHktdHIiLHJvd0JvZHlUZENsczpFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1jZWxsLXJvd2JvZHkiLHJvd0JvZHlEaXZDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtcm93Ym9keSIsZXZlbnRQcmVmaXg6InJvd2JvZHkiLGV2ZW50U2VsZWN0b3I6Ii4iK0V4dC5iYXNlQ1NTUHJlZml4KyJncmlkLXJvd2JvZHktdHIiLGdldFJvd0JvZHk6ZnVuY3Rpb24oYSl7cmV0dXJuWyc8dHIgY2xhc3M9IicrdGhpcy5yb3dCb2R5VHJDbHMrJyB7cm93Qm9keUNsc30iPicsJzx0ZCBjbGFzcz0iJyt0aGlzLnJvd0JvZHlUZENscysnIiBjb2xzcGFuPSJ7cm93Qm9keUNvbHNwYW59Ij4nLCc8ZGl2IGNsYXNzPSInK3RoaXMucm93Qm9keURpdkNscysnIj57cm93Qm9keX08L2Rpdj4nLCI8L3RkPiIsIjwvdHI+Il0uam9pbigiIil9LGdldE1ldGFSb3dUcGxGcmFnbWVudHM6ZnVuY3Rpb24oKXtyZXR1cm57Z2V0Um93Qm9keTp0aGlzLmdldFJvd0JvZHkscm93Qm9keVRyQ2xzOnRoaXMucm93Qm9keVRyQ2xzLHJvd0JvZHlUZENsczp0aGlzLnJvd0JvZHlUZENscyxyb3dCb2R5RGl2Q2xzOnRoaXMucm93Qm9keURpdkNsc319LG11dGF0ZU1ldGFSb3dUcGw6ZnVuY3Rpb24oYSl7YS5wdXNoKCJ7W3RoaXMuZ2V0Um93Qm9keSh2YWx1ZXMpXX0iKX0sZ2V0QWRkaXRpb25hbERhdGE6ZnVuY3Rpb24oYyxhLGIsZyl7dmFyIGQ9dGhpcy52aWV3LmhlYWRlckN0LGU9ZC5nZXRDb2x1bW5Db3VudCgpO3JldHVybntyb3dCb2R5OiIiLHJvd0JvZHlDbHM6dGhpcy5yb3dCb2R5Q2xzLHJvd0JvZHlDb2xzcGFuOmV9fX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLmZlYXR1cmUuUm93V3JhcCIse2V4dGVuZDoiRXh0LmdyaWQuZmVhdHVyZS5GZWF0dXJlIixhbGlhczoiZmVhdHVyZS5yb3d3cmFwIixoYXNGZWF0dXJlRXZlbnQ6ZmFsc2UsaW5pdDpmdW5jdGlvbigpe2lmKCF0aGlzLmRpc2FibGVkKXt0aGlzLmVuYWJsZSgpfX0sZ2V0Um93U2VsZWN0b3I6ZnVuY3Rpb24oKXtyZXR1cm4idHI6aGFzKD4gIit0aGlzLnZpZXcuY2VsbFNlbGVjdG9yKyIpIn0sZW5hYmxlOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIudmlldztiLmNhbGxQYXJlbnQoKTtiLnNhdmVkUm93U2VsZWN0b3I9YS5yb3dTZWxlY3RvcjthLnJvd1NlbGVjdG9yPWIuZ2V0Um93U2VsZWN0b3IoKTthLmdldENvbXBvbmVudExheW91dCgpLmdldENvbHVtblNlbGVjdG9yPWIuZ2V0Q29sdW1uU2VsZWN0b3J9LGRpc2FibGU6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGE9Yy52aWV3LGI9Yy5zYXZlZFJvd1NlbGVjdG9yO2MuY2FsbFBhcmVudCgpO2lmKGIpe2Eucm93U2VsZWN0b3I9Yn1kZWxldGUgYy5zYXZlZFJvd1NlbGVjdG9yfSxtdXRhdGVNZXRhUm93VHBsOmZ1bmN0aW9uKGEpe3ZhciBiPUV4dC5iYXNlQ1NTUHJlZml4O2FbMF09YVswXS5yZXBsYWNlKGIrImdyaWQtcm93IiwiIik7YVswXT1hWzBdLnJlcGxhY2UoIntbdGhpcy5lbWJlZFJvd0NscygpXX0iLCIiKTthLnVuc2hpZnQoJzx0YWJsZSBjbGFzcz0iJytiKyJncmlkLXRhYmxlICIrYisnZ3JpZC10YWJsZS1yZXNpemVyIiBzdHlsZT0id2lkdGg6IHtbdGhpcy5lbWJlZEZ1bGxXaWR0aCgpXX1weDsiPicpO2EudW5zaGlmdCgnPHRyIGNsYXNzPSInK2IrJ2dyaWQtcm93IHtbdGhpcy5lbWJlZFJvd0NscygpXX0iPjx0ZCBjb2xzcGFuPSJ7W3RoaXMuZW1iZWRDb2xTcGFuKCldfSI+PGRpdiBjbGFzcz0iJytiKydncmlkLXJvd3dyYXAtZGl2Ij4nKTthLnB1c2goIjwvdGFibGU+Iik7YS5wdXNoKCI8L2Rpdj48L3RkPjwvdHI+Iil9LGVtYmVkQ29sU3BhbjpmdW5jdGlvbigpe3JldHVybiJ7Y29sc3Bhbn0ifSxlbWJlZEZ1bGxXaWR0aDpmdW5jdGlvbigpe3JldHVybiJ7ZnVsbFdpZHRofSJ9LGdldEFkZGl0aW9uYWxEYXRhOmZ1bmN0aW9uKGgscCxrLG0pe3ZhciBkPXRoaXMudmlldy5oZWFkZXJDdCxjPWQuZ2V0Q29sdW1uQ291bnQoKSxuPWQuZ2V0RnVsbFdpZHRoKCksbD1kLnF1ZXJ5KCJncmlkY29sdW1uIikscT1sLmxlbmd0aCxnPTAsYj17Y29sc3BhbjpjLGZ1bGxXaWR0aDpufSxhLGosZTtmb3IoO2c8cTtnKyspe2E9bFtnXS5pZDtqPWErIi10ZENscyI7ZT1FeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1jb2wtcmVzaXplci0iK2E7YltqXT1lKyIgIisobVtqXT9tW2pdOiIiKTtiW2ErIi10ZEF0dHIiXT0nIHN0eWxlPSJ3aWR0aDogJysobFtnXS5oaWRkZW4/MDpsW2ddLmdldERlc2lyZWRXaWR0aCgpKSsncHg7IiAnO2lmKG1bYSsiLXRkQXR0ciJdKXtiW2ErIi10ZEF0dHIiXSs9bVthKyItdGRBdHRyIl19fXJldHVybiBifSxnZXRNZXRhUm93VHBsRnJhZ21lbnRzOmZ1bmN0aW9uKCl7cmV0dXJue2VtYmVkRnVsbFdpZHRoOnRoaXMuZW1iZWRGdWxsV2lkdGgsZW1iZWRDb2xTcGFuOnRoaXMuZW1iZWRDb2xTcGFufX0sZ2V0Q29sdW1uU2VsZWN0b3I6ZnVuY3Rpb24oYil7dmFyIGE9RXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtY29sLXJlc2l6ZXItIitiLmlkO3JldHVybiJ0aC4iK2ErIix0ZC4iK2F9fSk7RXh0LmRlZmluZSgiRXh0LmdyaWQuZmVhdHVyZS5TdW1tYXJ5Iix7ZXh0ZW5kOiJFeHQuZ3JpZC5mZWF0dXJlLkFic3RyYWN0U3VtbWFyeSIsYWxpYXM6ImZlYXR1cmUuc3VtbWFyeSIsZ2V0RnJhZ21lbnRUcGw6ZnVuY3Rpb24oKXt0aGlzLnN1bW1hcnlEYXRhPXRoaXMuZ2VuZXJhdGVTdW1tYXJ5RGF0YSgpO3JldHVybiB0aGlzLmdldFN1bW1hcnlGcmFnbWVudHMoKX0sZ2V0VGFibGVGcmFnbWVudHM6ZnVuY3Rpb24oKXtpZih0aGlzLnNob3dTdW1tYXJ5Um93KXtyZXR1cm57Y2xvc2VSb3dzOnRoaXMuY2xvc2VSb3dzfX19LGNsb3NlUm93czpmdW5jdGlvbigpe3JldHVybiI8L3RwbD57W3RoaXMucHJpbnRTdW1tYXJ5Um93KCldfSJ9LGdldFByaW50RGF0YTpmdW5jdGlvbihhKXt2YXIgZz10aGlzLGM9Zy52aWV3LmhlYWRlckN0LmdldENvbHVtbnNGb3JUcGwoKSxiPTAsZT1jLmxlbmd0aCxoPVtdLGo9Zy5zdW1tYXJ5RGF0YSxkO2Zvcig7YjxlOysrYil7ZD1jW2JdO2QuZ3JpZFN1bW1hcnlWYWx1ZT10aGlzLmdldENvbHVtblZhbHVlKGQsaik7aC5wdXNoKGQpfXJldHVybiBofSxnZW5lcmF0ZVN1bW1hcnlEYXRhOmZ1bmN0aW9uKCl7dmFyIGg9dGhpcyxkPXt9LGo9aC52aWV3LnN0b3JlLGM9aC52aWV3LmhlYWRlckN0LmdldENvbHVtbnNGb3JUcGwoKSxlPTAsYT1jLmxlbmd0aCxiLGssZztmb3IoZT0wLGE9Yy5sZW5ndGg7ZTxhOysrZSl7Zz1FeHQuZ2V0Q21wKGNbZV0uaWQpO2RbZy5pZF09aC5nZXRTdW1tYXJ5KGosZy5zdW1tYXJ5VHlwZSxnLmRhdGFJbmRleCxmYWxzZSl9cmV0dXJuIGR9fSk7RXh0LmRlZmluZSgiRXh0LmdyaWQucGx1Z2luLkVkaXRpbmciLHthbGlhczoiZWRpdGluZy5lZGl0aW5nIixleHRlbmQ6IkV4dC5BYnN0cmFjdFBsdWdpbiIscmVxdWlyZXM6WyJFeHQuZ3JpZC5jb2x1bW4uQ29sdW1uIiwiRXh0LnV0aWwuS2V5TmF2Il0sbWl4aW5zOntvYnNlcnZhYmxlOiJFeHQudXRpbC5PYnNlcnZhYmxlIn0sY2xpY2tzVG9FZGl0OjIsdHJpZ2dlckV2ZW50OnVuZGVmaW5lZCxkZWZhdWx0RmllbGRYVHlwZToidGV4dGZpZWxkIixlZGl0U3R5bGU6IiIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLmFkZEV2ZW50cygiYmVmb3JlZWRpdCIsImVkaXQiLCJ2YWxpZGF0ZWVkaXQiLCJjYW5jZWxlZGl0Iik7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7Yi5taXhpbnMub2JzZXJ2YWJsZS5jb25zdHJ1Y3Rvci5jYWxsKGIpO2Iub24oImVkaXQiLGZ1bmN0aW9uKGMsZCl7Yi5maXJlRXZlbnQoImFmdGVyZWRpdCIsYyxkKX0pfSxpbml0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5ncmlkPWE7Yi52aWV3PWEudmlldztiLmluaXRFdmVudHMoKTtiLm1vbihhLCJyZWNvbmZpZ3VyZSIsYi5vblJlY29uZmlndXJlLGIpO2Iub25SZWNvbmZpZ3VyZSgpO2EucmVsYXlFdmVudHMoYixbImJlZm9yZWVkaXQiLCJlZGl0IiwidmFsaWRhdGVlZGl0IiwiY2FuY2VsZWRpdCJdKTthLmlzRWRpdGFibGU9dHJ1ZTthLmVkaXRpbmdQbHVnaW49YS52aWV3LmVkaXRpbmdQbHVnaW49Yn0sb25SZWNvbmZpZ3VyZTpmdW5jdGlvbigpe3RoaXMuaW5pdEZpZWxkQWNjZXNzb3JzKHRoaXMudmlldy5nZXRHcmlkQ29sdW1ucygpKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmdyaWQ7RXh0LmRlc3Ryb3koYi5rZXlOYXYpO2IucmVtb3ZlRmllbGRBY2Nlc3NvcnMoYS5nZXRWaWV3KCkuZ2V0R3JpZENvbHVtbnMoKSk7Yi5jbGVhckxpc3RlbmVycygpO2RlbGV0ZSBiLmdyaWQuZWRpdGluZ1BsdWdpbjtkZWxldGUgYi5ncmlkLnZpZXcuZWRpdGluZ1BsdWdpbjtkZWxldGUgYi5ncmlkO2RlbGV0ZSBiLnZpZXc7ZGVsZXRlIGIuZWRpdG9yO2RlbGV0ZSBiLmtleU5hdn0sZ2V0RWRpdFN0eWxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWRpdFN0eWxlfSxpbml0RmllbGRBY2Nlc3NvcnM6ZnVuY3Rpb24oYSl7YT1bXS5jb25jYXQoYSk7dmFyIGQ9dGhpcyxnLGU9YS5sZW5ndGgsYjtmb3IoZz0wO2c8ZTtnKyspe2I9YVtnXTtFeHQuYXBwbHlJZihiLHtnZXRFZGl0b3I6ZnVuY3Rpb24oYyxoKXtyZXR1cm4gZC5nZXRDb2x1bW5GaWVsZCh0aGlzLGgpfSxzZXRFZGl0b3I6ZnVuY3Rpb24oYyl7ZC5zZXRDb2x1bW5GaWVsZCh0aGlzLGMpfX0pfX0scmVtb3ZlRmllbGRBY2Nlc3NvcnM6ZnVuY3Rpb24oYSl7YT1bXS5jb25jYXQoYSk7dmFyIGUsZD1hLmxlbmd0aCxiO2ZvcihlPTA7ZTxkO2UrKyl7Yj1hW2VdO2RlbGV0ZSBiLmdldEVkaXRvcjtkZWxldGUgYi5zZXRFZGl0b3J9fSxnZXRDb2x1bW5GaWVsZDpmdW5jdGlvbihiLGEpe3ZhciBjPWIuZmllbGQ7aWYoIWMmJmIuZWRpdG9yKXtjPWIuZWRpdG9yO2RlbGV0ZSBiLmVkaXRvcn1pZighYyYmYSl7Yz1hfWlmKGMpe2lmKEV4dC5pc1N0cmluZyhjKSl7Yz17eHR5cGU6Y319aWYoIWMuaXNGb3JtRmllbGQpe2M9RXh0LkNvbXBvbmVudE1hbmFnZXIuY3JlYXRlKGMsdGhpcy5kZWZhdWx0RmllbGRYVHlwZSl9Yi5maWVsZD1jO0V4dC5hcHBseShjLHtuYW1lOmIuZGF0YUluZGV4fSk7cmV0dXJuIGN9fSxzZXRDb2x1bW5GaWVsZDpmdW5jdGlvbihhLGIpe2lmKEV4dC5pc09iamVjdChiKSYmIWIuaXNGb3JtRmllbGQpe2I9RXh0LkNvbXBvbmVudE1hbmFnZXIuY3JlYXRlKGIsdGhpcy5kZWZhdWx0RmllbGRYVHlwZSl9YS5maWVsZD1ifSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmluaXRFZGl0VHJpZ2dlcnMoKTthLmluaXRDYW5jZWxUcmlnZ2VycygpfSxpbml0Q2FuY2VsVHJpZ2dlcnM6RXh0LmVtcHR5Rm4saW5pdEVkaXRUcmlnZ2VyczpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLnZpZXc7aWYoYi50cmlnZ2VyRXZlbnQ9PSJjZWxsZm9jdXMiKXtiLm1vbihhLCJjZWxsZm9jdXMiLGIub25DZWxsRm9jdXMsYil9ZWxzZXtpZihiLnRyaWdnZXJFdmVudD09InJvd2ZvY3VzIil7Yi5tb24oYSwicm93Zm9jdXMiLGIub25Sb3dGb2N1cyxiKX1lbHNle2lmKGEuc2VsTW9kZWwuaXNDZWxsTW9kZWwpe2Eub25DZWxsRm9jdXM9RXh0LkZ1bmN0aW9uLmJpbmQoYi5iZWZvcmVWaWV3Q2VsbEZvY3VzLGIpfWIubW9uKGEsYi50cmlnZ2VyRXZlbnR8fCgiY2VsbCIrKGIuY2xpY2tzVG9FZGl0PT09MT8iY2xpY2siOiJkYmxjbGljayIpKSxiLm9uQ2VsbENsaWNrLGIpfX1iLmluaXRBZGRSZW1vdmVIZWFkZXJFdmVudHMoKTthLm9uKCJyZW5kZXIiLGIuaW5pdEtleU5hdkhlYWRlckV2ZW50cyxiLHtzaW5nbGU6dHJ1ZX0pfSxiZWZvcmVWaWV3Q2VsbEZvY3VzOmZ1bmN0aW9uKGEpe2lmKHRoaXMudmlldy5zZWxNb2RlbC5rZXlOYXZpZ2F0aW9ufHwhdGhpcy5lZGl0aW5nfHwhdGhpcy5pc0NlbGxFZGl0YWJsZXx8IXRoaXMuaXNDZWxsRWRpdGFibGUoYS5yb3csYS5jb2x1bW5IZWFkZXIpKXt0aGlzLnZpZXcuZm9jdXNDZWxsLmFwcGx5KHRoaXMudmlldyxhcmd1bWVudHMpfX0sb25Sb3dGb2N1czpmdW5jdGlvbihhLGMsYil7dGhpcy5zdGFydEVkaXQoYywwKX0sb25DZWxsRm9jdXM6ZnVuY3Rpb24oYyxiLGEpe3RoaXMuc3RhcnRFZGl0KGEucm93LGEuY29sdW1uKX0sb25DZWxsQ2xpY2s6ZnVuY3Rpb24oYyxhLGksYixoLGQsZyl7aWYoIWMuZXhwYW5kZXJTZWxlY3Rvcnx8IWcuZ2V0VGFyZ2V0KGMuZXhwYW5kZXJTZWxlY3Rvcikpe3RoaXMuc3RhcnRFZGl0KGIsYy5nZXRIZWFkZXJBdEluZGV4KGkpKX19LGluaXRBZGRSZW1vdmVIZWFkZXJFdmVudHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EubW9uKGEuZ3JpZC5oZWFkZXJDdCx7c2NvcGU6YSxhZGQ6YS5vbkNvbHVtbkFkZCxyZW1vdmU6YS5vbkNvbHVtblJlbW92ZX0pfSxpbml0S2V5TmF2SGVhZGVyRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmtleU5hdj1FeHQuY3JlYXRlKCJFeHQudXRpbC5LZXlOYXYiLGEudmlldy5lbCx7ZW50ZXI6YS5vbkVudGVyS2V5LGVzYzphLm9uRXNjS2V5LHNjb3BlOmF9KX0sb25Db2x1bW5BZGQ6ZnVuY3Rpb24oYSxiKXtpZihiLmlzSGVhZGVyKXt0aGlzLmluaXRGaWVsZEFjY2Vzc29ycyhiKX19LG9uQ29sdW1uUmVtb3ZlOmZ1bmN0aW9uKGEsYil7aWYoYi5pc0hlYWRlcil7dGhpcy5yZW1vdmVGaWVsZEFjY2Vzc29ycyhiKX19LG9uRW50ZXJLZXk6ZnVuY3Rpb24oaCl7dmFyIGQ9dGhpcyxjPWQuZ3JpZCxiPWMuZ2V0U2VsZWN0aW9uTW9kZWwoKSxhLGksZz1jLmhlYWRlckN0LmdldEhlYWRlckF0SW5kZXgoMCk7aWYoYi5nZXRDdXJyZW50UG9zaXRpb24pe2k9Yi5nZXRDdXJyZW50UG9zaXRpb24oKTtpZihpKXthPWMuc3RvcmUuZ2V0QXQoaS5yb3cpO2c9Yy5oZWFkZXJDdC5nZXRIZWFkZXJBdEluZGV4KGkuY29sdW1uKX19ZWxzZXthPWIuZ2V0TGFzdFNlbGVjdGVkKCl9aWYoYSYmZyl7ZC5zdGFydEVkaXQoYSxnKX19LG9uRXNjS2V5OmZ1bmN0aW9uKGEpe3RoaXMuY2FuY2VsRWRpdCgpfSxiZWZvcmVFZGl0OkV4dC5lbXB0eUZuLHN0YXJ0RWRpdDpmdW5jdGlvbihhLGQpe3ZhciBjPXRoaXMsYj1jLmdldEVkaXRpbmdDb250ZXh0KGEsZCk7aWYoYj09bnVsbHx8Yy5iZWZvcmVFZGl0KGIpPT09ZmFsc2V8fGMuZmlyZUV2ZW50KCJiZWZvcmVlZGl0IixjLGIpPT09ZmFsc2V8fGIuY2FuY2VsfHwhYy5ncmlkLnZpZXcuaXNWaXNpYmxlKHRydWUpKXtyZXR1cm4gZmFsc2V9Yy5jb250ZXh0PWI7Yy5lZGl0aW5nPXRydWV9LGdldEVkaXRpbmdDb250ZXh0OmZ1bmN0aW9uKGIsaCl7dmFyIGc9dGhpcyxjPWcuZ3JpZCxhPWMuZ2V0VmlldygpLGU9YS5nZXROb2RlKGIpLGQsaTtpZighZSl7cmV0dXJufWg9Yy5oZWFkZXJDdC5nZXRWaXNpYmxlSGVhZGVyQ2xvc2VzdFRvSW5kZXgoRXh0LmlzTnVtYmVyKGgpP2g6aC5nZXRJbmRleCgpKTtpZighaCl7cmV0dXJufWk9aC5nZXRJbmRleCgpO2lmKEV4dC5pc051bWJlcihiKSl7ZD1iO2I9YS5nZXRSZWNvcmQoZSl9ZWxzZXtkPWEuaW5kZXhPZihlKX1yZXR1cm57Z3JpZDpjLHJlY29yZDpiLGZpZWxkOmguZGF0YUluZGV4LHZhbHVlOmIuZ2V0KGguZGF0YUluZGV4KSxyb3c6YS5nZXROb2RlKGQpLGNvbHVtbjpoLHJvd0lkeDpkLGNvbElkeDppfX0sY2FuY2VsRWRpdDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5lZGl0aW5nPWZhbHNlO2EuZmlyZUV2ZW50KCJjYW5jZWxlZGl0IixhLGEuY29udGV4dCl9LGNvbXBsZXRlRWRpdDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5lZGl0aW5nJiZhLnZhbGlkYXRlRWRpdCgpKXthLmZpcmVFdmVudCgiZWRpdCIsYSxhLmNvbnRleHQpfWRlbGV0ZSBhLmNvbnRleHQ7YS5lZGl0aW5nPWZhbHNlfSx2YWxpZGF0ZUVkaXQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5jb250ZXh0O3JldHVybiBiLmZpcmVFdmVudCgidmFsaWRhdGVlZGl0IixiLGEpIT09ZmFsc2UmJiFhLmNhbmNlbH19KTtFeHQuZGVmaW5lKCJFeHQuZ3JpZC5wbHVnaW4uQ2VsbEVkaXRpbmciLHthbGlhczoicGx1Z2luLmNlbGxlZGl0aW5nIixleHRlbmQ6IkV4dC5ncmlkLnBsdWdpbi5FZGl0aW5nIixyZXF1aXJlczpbIkV4dC5ncmlkLkNlbGxFZGl0b3IiLCJFeHQudXRpbC5EZWxheWVkVGFzayJdLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5lZGl0b3JzPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oZmFsc2UsZnVuY3Rpb24oYSl7cmV0dXJuIGEuZWRpdG9ySWR9KTt0aGlzLmVkaXRUYXNrPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzaygpfSxvblJlY29uZmlndXJlOmZ1bmN0aW9uKCl7dGhpcy5lZGl0b3JzLmNsZWFyKCk7dGhpcy5jYWxsUGFyZW50KCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuZWRpdFRhc2suY2FuY2VsKCk7YS5lZGl0b3JzLmVhY2goRXh0LmRlc3Ryb3ksRXh0KTthLmVkaXRvcnMuY2xlYXIoKTthLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sb25Cb2R5U2Nyb2xsOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxiPWMuZ2V0QWN0aXZlRWRpdG9yKCksYT1jLnZpZXcuZWwuZ2V0U2Nyb2xsKCk7aWYoYiYmYi5lZGl0aW5nKXtpZihhLnRvcCE9PWMuc2Nyb2xsLnRvcCl7aWYoYi5maWVsZCl7aWYoYi5maWVsZC50cmlnZ2VyQmx1cil7Yi5maWVsZC50cmlnZ2VyQmx1cigpfWVsc2V7Yi5maWVsZC5ibHVyKCl9fX1lbHNle2IucmVhbGlnbigpfX1jLnNjcm9sbD1hfSxpbml0Q2FuY2VsVHJpZ2dlcnM6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9Yy5ncmlkLGE9Yi52aWV3O2EuYWRkRWxMaXN0ZW5lcigibW91c2V3aGVlbCIsYy5jYW5jZWxFZGl0LGMpO2MubW9uKGEsImJvZHlzY3JvbGwiLGMub25Cb2R5U2Nyb2xsLGMpO2MubW9uKGIse2NvbHVtbnJlc2l6ZTpjLmNhbmNlbEVkaXQsY29sdW1ubW92ZTpjLmNhbmNlbEVkaXQsc2NvcGU6Y30pfSxpc0NlbGxFZGl0YWJsZTpmdW5jdGlvbihhLGQpe3ZhciBjPXRoaXMsYj1jLmdldEVkaXRpbmdDb250ZXh0KGEsZCk7aWYoYy5ncmlkLnZpZXcuaXNWaXNpYmxlKHRydWUpJiZiKXtkPWIuY29sdW1uO2E9Yi5yZWNvcmQ7aWYoZCYmYy5nZXRFZGl0b3IoYSxkKSl7cmV0dXJuIHRydWV9fX0sc3RhcnRFZGl0OmZ1bmN0aW9uKGEsZyl7dmFyIGQ9dGhpcyxjPWQuZ2V0RWRpdGluZ0NvbnRleHQoYSxnKSxlLGI7ZC5jb21wbGV0ZUVkaXQoKTtpZighY3x8IWQuZ3JpZC52aWV3LmlzVmlzaWJsZSh0cnVlKSl7cmV0dXJuIGZhbHNlfWE9Yy5yZWNvcmQ7Zz1jLmNvbHVtbjtpZihnJiYhZy5nZXRFZGl0b3IoYSkpe3JldHVybiBmYWxzZX1lPWEuZ2V0KGcuZGF0YUluZGV4KTtjLm9yaWdpbmFsVmFsdWU9Yy52YWx1ZT1lO2lmKGQuYmVmb3JlRWRpdChjKT09PWZhbHNlfHxkLmZpcmVFdmVudCgiYmVmb3JlZWRpdCIsZCxjKT09PWZhbHNlfHxjLmNhbmNlbCl7cmV0dXJuIGZhbHNlfWI9ZC5nZXRFZGl0b3IoYSxnKTtkLmdyaWQudmlldy5jYW5jZWxGb2N1cygpO2Qudmlldy5mb2N1c0NlbGwoe3JvdzpjLnJvd0lkeCxjb2x1bW46Yy5jb2xJZHh9KTtpZihiKXtkLmVkaXRUYXNrLmRlbGF5KDE1LGQuc2hvd0VkaXRvcixkLFtiLGMsZV0pO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX0sc2hvd0VkaXRvcjpmdW5jdGlvbihiLGMsaCl7dmFyIGU9dGhpcyxhPWMucmVjb3JkLGc9Yy5jb2x1bW4saT1lLmdyaWQuZ2V0U2VsZWN0aW9uTW9kZWwoKSxkPWkuZ2V0Q3VycmVudFBvc2l0aW9uKCk7ZS5jb250ZXh0PWM7ZS5zZXRBY3RpdmVFZGl0b3IoYik7ZS5zZXRBY3RpdmVSZWNvcmQoYSk7ZS5zZXRBY3RpdmVDb2x1bW4oZyk7aWYoaS5zZWxlY3RCeVBvc2l0aW9uJiYoIWR8fGQuY29sdW1uIT09Yy5jb2xJZHh8fGQucm93IT09Yy5yb3dJZHgpKXtpLnNlbGVjdEJ5UG9zaXRpb24oe3JvdzpjLnJvd0lkeCxjb2x1bW46Yy5jb2xJZHh9KX1iLnN0YXJ0RWRpdChlLmdldENlbGwoYSxnKSxoKTtlLmVkaXRpbmc9dHJ1ZTtlLnNjcm9sbD1lLnZpZXcuZWwuZ2V0U2Nyb2xsKCl9LGNvbXBsZXRlRWRpdDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0QWN0aXZlRWRpdG9yKCk7aWYoYSl7YS5jb21wbGV0ZUVkaXQoKTt0aGlzLmVkaXRpbmc9ZmFsc2V9fSxzZXRBY3RpdmVFZGl0b3I6ZnVuY3Rpb24oYSl7dGhpcy5hY3RpdmVFZGl0b3I9YX0sZ2V0QWN0aXZlRWRpdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlRWRpdG9yfSxzZXRBY3RpdmVDb2x1bW46ZnVuY3Rpb24oYSl7dGhpcy5hY3RpdmVDb2x1bW49YX0sZ2V0QWN0aXZlQ29sdW1uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlQ29sdW1ufSxzZXRBY3RpdmVSZWNvcmQ6ZnVuY3Rpb24oYSl7dGhpcy5hY3RpdmVSZWNvcmQ9YX0sZ2V0QWN0aXZlUmVjb3JkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWN0aXZlUmVjb3JkfSxnZXRFZGl0b3I6ZnVuY3Rpb24oYSxkKXt2YXIgZz10aGlzLGU9Zy5lZGl0b3JzLGM9ZC5nZXRJdGVtSWQoKSxiPWUuZ2V0QnlLZXkoYyk7aWYoYil7cmV0dXJuIGJ9ZWxzZXtiPWQuZ2V0RWRpdG9yKGEpO2lmKCFiKXtyZXR1cm4gZmFsc2V9aWYoIShiIGluc3RhbmNlb2YgRXh0LmdyaWQuQ2VsbEVkaXRvcikpe2I9bmV3IEV4dC5ncmlkLkNlbGxFZGl0b3Ioe2VkaXRvcklkOmMsZmllbGQ6Yixvd25lckN0OmcuZ3JpZH0pfWVsc2V7Yi5vd25lckN0PWcuZ3JpZH1iLmVkaXRpbmdQbHVnaW49ZztiLmlzRm9yVHJlZT1nLmdyaWQuaXNUcmVlO2Iub24oe3Njb3BlOmcsc3BlY2lhbGtleTpnLm9uU3BlY2lhbEtleSxjb21wbGV0ZTpnLm9uRWRpdENvbXBsZXRlLGNhbmNlbGVkaXQ6Zy5jYW5jZWxFZGl0fSk7ZS5hZGQoYik7cmV0dXJuIGJ9fSxzZXRDb2x1bW5GaWVsZDpmdW5jdGlvbihiLGMpe3ZhciBhPXRoaXMuZWRpdG9ycy5nZXRCeUtleShiLmdldEl0ZW1JZCgpKTtFeHQuZGVzdHJveShhLGIuZmllbGQpO3RoaXMuZWRpdG9ycy5yZW1vdmVBdEtleShiLmdldEl0ZW1JZCgpKTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sZ2V0Q2VsbDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmdyaWQuZ2V0VmlldygpLmdldENlbGwoYSxiKX0sb25TcGVjaWFsS2V5OmZ1bmN0aW9uKGEsZyxkKXt2YXIgYz10aGlzLGI9Yy5ncmlkLGg7aWYoZC5nZXRLZXkoKT09PWQuVEFCKXtkLnN0b3BFdmVudCgpO2lmKGEpe2Eub25FZGl0b3JUYWIoZCl9aD1iLmdldFNlbGVjdGlvbk1vZGVsKCk7aWYoaC5vbkVkaXRvclRhYil7aC5vbkVkaXRvclRhYihjLGQpfX19LG9uRWRpdENvbXBsZXRlOmZ1bmN0aW9uKGMsaCxiKXt2YXIgZz10aGlzLGQ9Zy5ncmlkLGU9Zy5nZXRBY3RpdmVDb2x1bW4oKSxpPWQuZ2V0U2VsZWN0aW9uTW9kZWwoKSxhO2lmKGUpe2E9Zy5jb250ZXh0LnJlY29yZDtnLnNldEFjdGl2ZUVkaXRvcihudWxsKTtnLnNldEFjdGl2ZUNvbHVtbihudWxsKTtnLnNldEFjdGl2ZVJlY29yZChudWxsKTtpZighZy52YWxpZGF0ZUVkaXQoKSl7cmV0dXJufWlmKCFhLmlzRXF1YWwoaCxiKSl7YS5zZXQoZS5kYXRhSW5kZXgsaCl9aWYoaS5zZXRDdXJyZW50UG9zaXRpb24pe2kuc2V0Q3VycmVudFBvc2l0aW9uKGkuZ2V0Q3VycmVudFBvc2l0aW9uKCkpfWQuZ2V0VmlldygpLmdldEVsKGUpLmZvY3VzKCk7Zy5jb250ZXh0LnZhbHVlPWg7Zy5maXJlRXZlbnQoImVkaXQiLGcsZy5jb250ZXh0KX19LGNhbmNlbEVkaXQ6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9Yy5nZXRBY3RpdmVFZGl0b3IoKSxhPWMuZ3JpZC5nZXRWaWV3KCkuZ2V0RWwoYy5nZXRBY3RpdmVDb2x1bW4oKSk7Yy5zZXRBY3RpdmVFZGl0b3IobnVsbCk7Yy5zZXRBY3RpdmVDb2x1bW4obnVsbCk7Yy5zZXRBY3RpdmVSZWNvcmQobnVsbCk7aWYoYil7Yi5jYW5jZWxFZGl0KCk7YS5mb2N1cygpO2MuY2FsbFBhcmVudChhcmd1bWVudHMpfX0sc3RhcnRFZGl0QnlQb3NpdGlvbjpmdW5jdGlvbihhKXthLmNvbHVtbj10aGlzLnZpZXcuZ2V0SGVhZGVyQ3QoKS5nZXRWaXNpYmxlSGVhZGVyQ2xvc2VzdFRvSW5kZXgoYS5jb2x1bW4pLmdldEluZGV4KCk7cmV0dXJuIHRoaXMuc3RhcnRFZGl0KGEucm93LGEuY29sdW1uKX19KTtFeHQuZGVmaW5lKCJFeHQuZ3JpZC5wbHVnaW4uRHJhZ0Ryb3AiLHtleHRlbmQ6IkV4dC5BYnN0cmFjdFBsdWdpbiIsYWxpYXM6InBsdWdpbi5ncmlkdmlld2RyYWdkcm9wIix1c2VzOlsiRXh0LnZpZXcuRHJhZ1pvbmUiLCJFeHQuZ3JpZC5WaWV3RHJvcFpvbmUiXSxkcmFnVGV4dDoiezB9IHNlbGVjdGVkIHJvd3sxfSIsZGRHcm91cDoiR3JpZEREIixlbmFibGVEcm9wOnRydWUsZW5hYmxlRHJhZzp0cnVlLGluaXQ6ZnVuY3Rpb24oYSl7YS5vbigicmVuZGVyIix0aGlzLm9uVmlld1JlbmRlcix0aGlzLHtzaW5nbGU6dHJ1ZX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy5kcmFnWm9uZSx0aGlzLmRyb3Bab25lKX0sZW5hYmxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLmRyYWdab25lKXthLmRyYWdab25lLnVubG9jaygpfWlmKGEuZHJvcFpvbmUpe2EuZHJvcFpvbmUudW5sb2NrKCl9YS5jYWxsUGFyZW50KCl9LGRpc2FibGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuZHJhZ1pvbmUpe2EuZHJhZ1pvbmUubG9jaygpfWlmKGEuZHJvcFpvbmUpe2EuZHJvcFpvbmUubG9jaygpfWEuY2FsbFBhcmVudCgpfSxvblZpZXdSZW5kZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihiLmVuYWJsZURyYWcpe2IuZHJhZ1pvbmU9bmV3IEV4dC52aWV3LkRyYWdab25lKHt2aWV3OmEsZGRHcm91cDpiLmRyYWdHcm91cHx8Yi5kZEdyb3VwLGRyYWdUZXh0OmIuZHJhZ1RleHR9KX1pZihiLmVuYWJsZURyb3Ape2IuZHJvcFpvbmU9bmV3IEV4dC5ncmlkLlZpZXdEcm9wWm9uZSh7dmlldzphLGRkR3JvdXA6Yi5kcm9wR3JvdXB8fGIuZGRHcm91cH0pfX19KTtFeHQuZGVmaW5lKCJFeHQuZ3JpZC5wbHVnaW4uUm93RWRpdGluZyIse2V4dGVuZDoiRXh0LmdyaWQucGx1Z2luLkVkaXRpbmciLGFsaWFzOiJwbHVnaW4ucm93ZWRpdGluZyIscmVxdWlyZXM6WyJFeHQuZ3JpZC5Sb3dFZGl0b3IiXSxlZGl0U3R5bGU6InJvdyIsYXV0b0NhbmNlbDp0cnVlLGVycm9yU3VtbWFyeTp0cnVlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZighYS5jbGlja3NUb01vdmVFZGl0b3Ipe2EuY2xpY2tzVG9Nb3ZlRWRpdG9yPWEuY2xpY2tzVG9FZGl0fWEuYXV0b0NhbmNlbD0hIWEuYXV0b0NhbmNlbH0saW5pdDpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoW2FdKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7RXh0LmRlc3Ryb3koYS5lZGl0b3IpO2EuY2FsbFBhcmVudChhcmd1bWVudHMpfSxzdGFydEVkaXQ6ZnVuY3Rpb24oYSxkKXt2YXIgYz10aGlzLGI9Yy5nZXRFZGl0b3IoKTtpZigoYi5iZWZvcmVFZGl0KCkhPT1mYWxzZSkmJihjLmNhbGxQYXJlbnQoYXJndW1lbnRzKSE9PWZhbHNlKSl7Yi5zdGFydEVkaXQoYy5jb250ZXh0LnJlY29yZCxjLmNvbnRleHQuY29sdW1uKTtyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9LGNhbmNlbEVkaXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuZWRpdGluZyl7YS5nZXRFZGl0b3IoKS5jYW5jZWxFZGl0KCk7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyl9fSxjb21wbGV0ZUVkaXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKGEuZWRpdGluZyYmYS52YWxpZGF0ZUVkaXQoKSl7YS5lZGl0aW5nPWZhbHNlO2EuZmlyZUV2ZW50KCJlZGl0IixhLGEuY29udGV4dCl9fSx2YWxpZGF0ZUVkaXQ6ZnVuY3Rpb24oKXt2YXIgaz10aGlzLGg9ay5lZGl0b3IsYj1rLmNvbnRleHQsZz1iLnJlY29yZCxtPXt9LGQ9e30saj1oLml0ZW1zLml0ZW1zLGksYz1qLmxlbmd0aCxhLGw7Zm9yKGk9MDtpPGM7aSsrKXtsPWpbaV07YT1sLm5hbWU7bVthXT1sLmdldFZhbHVlKCk7ZFthXT1nLmdldChhKX1FeHQuYXBwbHkoYix7bmV3VmFsdWVzOm0sb3JpZ2luYWxWYWx1ZXM6ZH0pO3JldHVybiBrLmNhbGxQYXJlbnQoYXJndW1lbnRzKSYmay5nZXRFZGl0b3IoKS5jb21wbGV0ZUVkaXQoKX0sZ2V0RWRpdG9yOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZighYS5lZGl0b3Ipe2EuZWRpdG9yPWEuaW5pdEVkaXRvcigpfXJldHVybiBhLmVkaXRvcn0saW5pdEVkaXRvcjpmdW5jdGlvbigpe3ZhciBoPXRoaXMsYz1oLmdyaWQsaT1oLnZpZXcsZD1jLmhlYWRlckN0LGU9WyJzYXZlQnRuVGV4dCIsImNhbmNlbEJ0blRleHQiLCJlcnJvcnNUZXh0IiwiZGlydHlUZXh0Il0saixhPWUubGVuZ3RoLGc9e2F1dG9DYW5jZWw6aC5hdXRvQ2FuY2VsLGVycm9yU3VtbWFyeTpoLmVycm9yU3VtbWFyeSxmaWVsZHM6ZC5nZXRHcmlkQ29sdW1ucygpLGhpZGRlbjp0cnVlLHZpZXc6aSxlZGl0aW5nUGx1Z2luOmgscmVuZGVyVG86aS5lbH0saztmb3Ioaj0wO2o8YTtqKyspe2s9ZVtqXTtpZihFeHQuaXNEZWZpbmVkKGhba10pKXtnW2tdPWhba119fXJldHVybiBFeHQuY3JlYXRlKCJFeHQuZ3JpZC5Sb3dFZGl0b3IiLGcpfSxpbml0RWRpdFRyaWdnZXJzOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIudmlldyxjPWIuY2xpY2tzVG9Nb3ZlRWRpdG9yPT09MT8iY2xpY2siOiJkYmxjbGljayI7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYi5jbGlja3NUb01vdmVFZGl0b3IhPT1iLmNsaWNrc1RvRWRpdCl7Yi5tb24oYSwiY2VsbCIrYyxiLm1vdmVFZGl0b3JCeUNsaWNrLGIpfWEub24oe3JlbmRlcjpmdW5jdGlvbigpe2IubW9uKGIuZ3JpZC5oZWFkZXJDdCx7c2NvcGU6Yixjb2x1bW5yZXNpemU6Yi5vbkNvbHVtblJlc2l6ZSxjb2x1bW5oaWRlOmIub25Db2x1bW5IaWRlLGNvbHVtbnNob3c6Yi5vbkNvbHVtblNob3csY29sdW1ubW92ZTpiLm9uQ29sdW1uTW92ZX0pfSxzaW5nbGU6dHJ1ZX0pfSxzdGFydEVkaXRCeUNsaWNrOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZighYS5lZGl0aW5nfHxhLmNsaWNrc1RvTW92ZUVkaXRvcj09PWEuY2xpY2tzVG9FZGl0KXthLmNhbGxQYXJlbnQoYXJndW1lbnRzKX19LG1vdmVFZGl0b3JCeUNsaWNrOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLmVkaXRpbmcpe2Euc3VwZXJjbGFzcy5vbkNlbGxDbGljay5hcHBseShhLGFyZ3VtZW50cyl9fSxvbkNvbHVtbkFkZDpmdW5jdGlvbihhLGMpe2lmKGMuaXNIZWFkZXIpe3ZhciBkPXRoaXMsYjtkLmluaXRGaWVsZEFjY2Vzc29ycyhjKTtiPWQuZWRpdG9yO2lmKGImJmIub25Db2x1bW5BZGQpe2Iub25Db2x1bW5BZGQoYyl9fX0sb25Db2x1bW5SZW1vdmU6ZnVuY3Rpb24oYSxjKXtpZihjLmlzSGVhZGVyKXt2YXIgZD10aGlzLGI9ZC5nZXRFZGl0b3IoKTtpZihiJiZiLm9uQ29sdW1uUmVtb3ZlKXtiLm9uQ29sdW1uUmVtb3ZlKGMpfWQucmVtb3ZlRmllbGRBY2Nlc3NvcnMoYyl9fSxvbkNvbHVtblJlc2l6ZTpmdW5jdGlvbihhLGQsYyl7aWYoZC5pc0hlYWRlcil7dmFyIGU9dGhpcyxiPWUuZ2V0RWRpdG9yKCk7aWYoYiYmYi5vbkNvbHVtblJlc2l6ZSl7Yi5vbkNvbHVtblJlc2l6ZShkLGMpfX19LG9uQ29sdW1uSGlkZTpmdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMsYj1kLmdldEVkaXRvcigpO2lmKGImJmIub25Db2x1bW5IaWRlKXtiLm9uQ29sdW1uSGlkZShjKX19LG9uQ29sdW1uU2hvdzpmdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMsYj1kLmdldEVkaXRvcigpO2lmKGImJmIub25Db2x1bW5TaG93KXtiLm9uQ29sdW1uU2hvdyhjKX19LG9uQ29sdW1uTW92ZTpmdW5jdGlvbihhLGQsYyxnKXt2YXIgZT10aGlzLGI9ZS5nZXRFZGl0b3IoKTtpZihiJiZiLm9uQ29sdW1uTW92ZSl7Yi5vbkNvbHVtbk1vdmUoZCxjLGctKGc+Yz8xOjApKX19LHNldENvbHVtbkZpZWxkOmZ1bmN0aW9uKGIsZCl7dmFyIGM9dGhpcyxhPWMuZ2V0RWRpdG9yKCk7YS5yZW1vdmVGaWVsZChiKTtjLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtjLmdldEVkaXRvcigpLnNldEZpZWxkKGIpfX0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLnByb3BlcnR5LkdyaWQiLHtleHRlbmQ6IkV4dC5ncmlkLlBhbmVsIixhbGlhczoid2lkZ2V0LnByb3BlcnR5Z3JpZCIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuZ3JpZC5Qcm9wZXJ0eUdyaWQiLHVzZXM6WyJFeHQuZ3JpZC5wbHVnaW4uQ2VsbEVkaXRpbmciLCJFeHQuZ3JpZC5wcm9wZXJ0eS5TdG9yZSIsIkV4dC5ncmlkLnByb3BlcnR5LkhlYWRlckNvbnRhaW5lciIsIkV4dC5YVGVtcGxhdGUiLCJFeHQuZ3JpZC5DZWxsRWRpdG9yIiwiRXh0LmZvcm0uZmllbGQuRGF0ZSIsIkV4dC5mb3JtLmZpZWxkLlRleHQiLCJFeHQuZm9ybS5maWVsZC5OdW1iZXIiLCJFeHQuZm9ybS5maWVsZC5Db21ib0JveCJdLHZhbHVlRmllbGQ6InZhbHVlIixuYW1lRmllbGQ6Im5hbWUiLGVuYWJsZUNvbHVtbk1vdmU6ZmFsc2UsY29sdW1uTGluZXM6dHJ1ZSxzdHJpcGVSb3dzOmZhbHNlLHRyYWNrTW91c2VPdmVyOmZhbHNlLGNsaWNrc1RvRWRpdDoxLGVuYWJsZUhkTWVudTpmYWxzZSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsicHJvcGVydHktZ3JpZCIpO2EucGx1Z2lucz1hLnBsdWdpbnN8fFtdO2EucGx1Z2lucy5wdXNoKG5ldyBFeHQuZ3JpZC5wbHVnaW4uQ2VsbEVkaXRpbmcoe2NsaWNrc1RvRWRpdDphLmNsaWNrc1RvRWRpdCxzdGFydEVkaXQ6ZnVuY3Rpb24oYixjKXtyZXR1cm4gdGhpcy5zZWxmLnByb3RvdHlwZS5zdGFydEVkaXQuY2FsbCh0aGlzLGIsYS5oZWFkZXJDdC5jaGlsZCgiIyIrYS52YWx1ZUZpZWxkKSl9fSkpO2Euc2VsTW9kZWw9e3NlbFR5cGU6ImNlbGxtb2RlbCIsb25DZWxsU2VsZWN0OmZ1bmN0aW9uKGIpe2lmKGIuY29sdW1uIT0xKXtiLmNvbHVtbj0xfXJldHVybiB0aGlzLnNlbGYucHJvdG90eXBlLm9uQ2VsbFNlbGVjdC5jYWxsKHRoaXMsYil9fTthLmN1c3RvbVJlbmRlcmVycz1hLmN1c3RvbVJlbmRlcmVyc3x8e307YS5jdXN0b21FZGl0b3JzPWEuY3VzdG9tRWRpdG9yc3x8e307aWYoIWEuc3RvcmUpe2EucHJvcFN0b3JlPWEuc3RvcmU9bmV3IEV4dC5ncmlkLnByb3BlcnR5LlN0b3JlKGEsYS5zb3VyY2UpfWlmKGEuc29ydGFibGVDb2x1bW5zKXthLnN0b3JlLnNvcnQoIm5hbWUiLCJBU0MiKX1hLmNvbHVtbnM9bmV3IEV4dC5ncmlkLnByb3BlcnR5LkhlYWRlckNvbnRhaW5lcihhLGEuc3RvcmUpO2EuYWRkRXZlbnRzKCJiZWZvcmVwcm9wZXJ0eWNoYW5nZSIsInByb3BlcnR5Y2hhbmdlIik7YS5jYWxsUGFyZW50KCk7YS5nZXRWaWV3KCkud2Fsa0NlbGxzPXRoaXMud2Fsa0NlbGxzO2EuZWRpdG9ycz17ZGF0ZTpuZXcgRXh0LmdyaWQuQ2VsbEVkaXRvcih7ZmllbGQ6bmV3IEV4dC5mb3JtLmZpZWxkLkRhdGUoe3NlbGVjdE9uRm9jdXM6dHJ1ZX0pfSksc3RyaW5nOm5ldyBFeHQuZ3JpZC5DZWxsRWRpdG9yKHtmaWVsZDpuZXcgRXh0LmZvcm0uZmllbGQuVGV4dCh7c2VsZWN0T25Gb2N1czp0cnVlfSl9KSxudW1iZXI6bmV3IEV4dC5ncmlkLkNlbGxFZGl0b3Ioe2ZpZWxkOm5ldyBFeHQuZm9ybS5maWVsZC5OdW1iZXIoe3NlbGVjdE9uRm9jdXM6dHJ1ZX0pfSksImJvb2xlYW4iOm5ldyBFeHQuZ3JpZC5DZWxsRWRpdG9yKHtmaWVsZDpuZXcgRXh0LmZvcm0uZmllbGQuQ29tYm9Cb3goe2VkaXRhYmxlOmZhbHNlLHN0b3JlOltbdHJ1ZSxhLmhlYWRlckN0LnRydWVUZXh0XSxbZmFsc2UsYS5oZWFkZXJDdC5mYWxzZVRleHRdXX0pfSl9O2Euc3RvcmUub24oInVwZGF0ZSIsYS5vblVwZGF0ZSxhKX0sb25VcGRhdGU6ZnVuY3Rpb24oZCxhLGMpe3ZhciBnPXRoaXMsYixlO2lmKGcucmVuZGVyZWQmJmM9PUV4dC5kYXRhLk1vZGVsLkVESVQpe2I9YS5nZXQoZy52YWx1ZUZpZWxkKTtlPWEubW9kaWZpZWQudmFsdWU7aWYoZy5maXJlRXZlbnQoImJlZm9yZXByb3BlcnR5Y2hhbmdlIixnLnNvdXJjZSxhLmdldElkKCksYixlKSE9PWZhbHNlKXtpZihnLnNvdXJjZSl7Zy5zb3VyY2VbYS5nZXRJZCgpXT1ifWEuY29tbWl0KCk7Zy5maXJlRXZlbnQoInByb3BlcnR5Y2hhbmdlIixnLnNvdXJjZSxhLmdldElkKCksYixlKX1lbHNle2EucmVqZWN0KCl9fX0sd2Fsa0NlbGxzOmZ1bmN0aW9uKGgsZyxkLGMsYSxiKXtpZihnPT0ibGVmdCIpe2c9InVwIn1lbHNle2lmKGc9PSJyaWdodCIpe2c9ImRvd24ifX1oPUV4dC52aWV3LlRhYmxlLnByb3RvdHlwZS53YWxrQ2VsbHMuY2FsbCh0aGlzLGgsZyxkLGMsYSxiKTtpZighaC5jb2x1bW4pe2guY29sdW1uPTF9cmV0dXJuIGh9LGdldENlbGxFZGl0b3I6ZnVuY3Rpb24oYSxjKXt2YXIgZD10aGlzLGU9YS5nZXQoZC5uYW1lRmllbGQpLGc9YS5nZXQoZC52YWx1ZUZpZWxkKSxiPWQuY3VzdG9tRWRpdG9yc1tlXTtpZihiKXtpZighKGIgaW5zdGFuY2VvZiBFeHQuZ3JpZC5DZWxsRWRpdG9yKSl7aWYoIShiIGluc3RhbmNlb2YgRXh0LmZvcm0uZmllbGQuQmFzZSkpe2I9RXh0LkNvbXBvbmVudE1hbmFnZXIuY3JlYXRlKGIsInRleHRmaWVsZCIpfWI9ZC5jdXN0b21FZGl0b3JzW2VdPW5ldyBFeHQuZ3JpZC5DZWxsRWRpdG9yKHtmaWVsZDpifSl9fWVsc2V7aWYoRXh0LmlzRGF0ZShnKSl7Yj1kLmVkaXRvcnMuZGF0ZX1lbHNle2lmKEV4dC5pc051bWJlcihnKSl7Yj1kLmVkaXRvcnMubnVtYmVyfWVsc2V7aWYoRXh0LmlzQm9vbGVhbihnKSl7Yj1kLmVkaXRvcnNbImJvb2xlYW4iXX1lbHNle2I9ZC5lZGl0b3JzLnN0cmluZ319fX1iLmVkaXRvcklkPWU7cmV0dXJuIGJ9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudCgpO2EuZGVzdHJveUVkaXRvcnMoYS5lZGl0b3JzKTthLmRlc3Ryb3lFZGl0b3JzKGEuY3VzdG9tRWRpdG9ycyk7ZGVsZXRlIGEuc291cmNlfSxkZXN0cm95RWRpdG9yczpmdW5jdGlvbihiKXtmb3IodmFyIGEgaW4gYil7aWYoYi5oYXNPd25Qcm9wZXJ0eShhKSl7RXh0LmRlc3Ryb3koYlthXSl9fX0sc2V0U291cmNlOmZ1bmN0aW9uKGEpe3RoaXMuc291cmNlPWE7dGhpcy5wcm9wU3RvcmUuc2V0U291cmNlKGEpfSxnZXRTb3VyY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wU3RvcmUuZ2V0U291cmNlKCl9LHNldFByb3BlcnR5OmZ1bmN0aW9uKGMsYixhKXt0aGlzLnByb3BTdG9yZS5zZXRWYWx1ZShjLGIsYSl9LHJlbW92ZVByb3BlcnR5OmZ1bmN0aW9uKGEpe3RoaXMucHJvcFN0b3JlLnJlbW92ZShhKX19KTtFeHQuZGVmaW5lKCJFeHQuZ3JpZC5wcm9wZXJ0eS5IZWFkZXJDb250YWluZXIiLHtleHRlbmQ6IkV4dC5ncmlkLmhlYWRlci5Db250YWluZXIiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmdyaWQuUHJvcGVydHlDb2x1bW5Nb2RlbCIsbmFtZVdpZHRoOjExNSxuYW1lVGV4dDoiTmFtZSIsdmFsdWVUZXh0OiJWYWx1ZSIsZGF0ZUZvcm1hdDoibS9qL1kiLHRydWVUZXh0OiJ0cnVlIixmYWxzZVRleHQ6ImZhbHNlIixuYW1lQ29sdW1uQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLXByb3BlcnR5LW5hbWUiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcztjLmdyaWQ9YjtjLnN0b3JlPWE7Yy5jYWxsUGFyZW50KFt7aXRlbXM6W3toZWFkZXI6Yy5uYW1lVGV4dCx3aWR0aDpiLm5hbWVDb2x1bW5XaWR0aHx8Yy5uYW1lV2lkdGgsc29ydGFibGU6Yi5zb3J0YWJsZUNvbHVtbnMsZGF0YUluZGV4OmIubmFtZUZpZWxkLHJlbmRlcmVyOkV4dC5GdW5jdGlvbi5iaW5kKGMucmVuZGVyUHJvcCxjKSxpdGVtSWQ6Yi5uYW1lRmllbGQsbWVudURpc2FibGVkOnRydWUsdGRDbHM6Yy5uYW1lQ29sdW1uQ2xzfSx7aGVhZGVyOmMudmFsdWVUZXh0LHJlbmRlcmVyOkV4dC5GdW5jdGlvbi5iaW5kKGMucmVuZGVyQ2VsbCxjKSxnZXRFZGl0b3I6RXh0LkZ1bmN0aW9uLmJpbmQoYy5nZXRDZWxsRWRpdG9yLGMpLHNvcnRhYmxlOmIuc29ydGFibGVDb2x1bW5zLGZsZXg6MSxmaXhlZDp0cnVlLGRhdGFJbmRleDpiLnZhbHVlRmllbGQsaXRlbUlkOmIudmFsdWVGaWVsZCxtZW51RGlzYWJsZWQ6dHJ1ZX1dfV0pfSxnZXRDZWxsRWRpdG9yOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdyaWQuZ2V0Q2VsbEVkaXRvcihhLHRoaXMpfSxyZW5kZXJQcm9wOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFByb3BlcnR5TmFtZShhKX0scmVuZGVyQ2VsbDpmdW5jdGlvbihnLGQsZSl7dmFyIGI9dGhpcyxjPWIuZ3JpZC5jdXN0b21SZW5kZXJlcnNbZS5nZXQoYi5ncmlkLm5hbWVGaWVsZCldLGE9ZztpZihjKXtyZXR1cm4gYy5hcHBseShiLGFyZ3VtZW50cyl9aWYoRXh0LmlzRGF0ZShnKSl7YT1iLnJlbmRlckRhdGUoZyl9ZWxzZXtpZihFeHQuaXNCb29sZWFuKGcpKXthPWIucmVuZGVyQm9vbChnKX19cmV0dXJuIEV4dC51dGlsLkZvcm1hdC5odG1sRW5jb2RlKGEpfSxyZW5kZXJEYXRlOkV4dC51dGlsLkZvcm1hdC5kYXRlLHJlbmRlckJvb2w6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYT8idHJ1ZVRleHQiOiJmYWxzZVRleHQiXX0sZ2V0UHJvcGVydHlOYW1lOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ3JpZC5wcm9wZXJ0eU5hbWVzO3JldHVybiBhJiZhW2JdP2FbYl06Yn19KTtFeHQuZGVmaW5lKCJFeHQuZ3JpZC5wcm9wZXJ0eS5Qcm9wZXJ0eSIse2V4dGVuZDoiRXh0LmRhdGEuTW9kZWwiLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LlByb3BHcmlkUHJvcGVydHkiLGZpZWxkczpbe25hbWU6Im5hbWUiLHR5cGU6InN0cmluZyJ9LHtuYW1lOiJ2YWx1ZSJ9XSxpZFByb3BlcnR5OiJuYW1lIn0pO0V4dC5kZWZpbmUoIkV4dC5ncmlkLnByb3BlcnR5LlN0b3JlIix7ZXh0ZW5kOiJFeHQuZGF0YS5TdG9yZSIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuZ3JpZC5Qcm9wZXJ0eVN0b3JlIixzb3J0T25Mb2FkOmZhbHNlLHVzZXM6WyJFeHQuZGF0YS5yZWFkZXIuUmVhZGVyIiwiRXh0LmRhdGEucHJveHkuUHJveHkiLCJFeHQuZGF0YS5SZXN1bHRTZXQiLCJFeHQuZ3JpZC5wcm9wZXJ0eS5Qcm9wZXJ0eSJdLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcztiLmdyaWQ9YTtiLnNvdXJjZT1jO2IuY2FsbFBhcmVudChbe2RhdGE6Yyxtb2RlbDpFeHQuZ3JpZC5wcm9wZXJ0eS5Qcm9wZXJ0eSxwcm94eTpiLmdldFByb3h5KCl9XSl9LGdldFByb3h5OmZ1bmN0aW9uKCl7aWYoIXRoaXMucHJveHkpe0V4dC5ncmlkLnByb3BlcnR5LlN0b3JlLnByb3RvdHlwZS5wcm94eT1uZXcgRXh0LmRhdGEucHJveHkuTWVtb3J5KHttb2RlbDpFeHQuZ3JpZC5wcm9wZXJ0eS5Qcm9wZXJ0eSxyZWFkZXI6dGhpcy5nZXRSZWFkZXIoKX0pfXJldHVybiB0aGlzLnByb3h5fSxnZXRSZWFkZXI6ZnVuY3Rpb24oKXtpZighdGhpcy5yZWFkZXIpe0V4dC5ncmlkLnByb3BlcnR5LlN0b3JlLnByb3RvdHlwZS5yZWFkZXI9bmV3IEV4dC5kYXRhLnJlYWRlci5SZWFkZXIoe21vZGVsOkV4dC5ncmlkLnByb3BlcnR5LlByb3BlcnR5LGJ1aWxkRXh0cmFjdG9yczpFeHQuZW1wdHlGbixyZWFkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlYWRSZWNvcmRzKGEpfSxyZWFkUmVjb3JkczpmdW5jdGlvbihiKXt2YXIgZCxjLGE9e3JlY29yZHM6W10sc3VjY2Vzczp0cnVlfTtmb3IoYyBpbiBiKXtpZihiLmhhc093blByb3BlcnR5KGMpKXtkPWJbY107aWYodGhpcy5pc0VkaXRhYmxlVmFsdWUoZCkpe2EucmVjb3Jkcy5wdXNoKG5ldyBFeHQuZ3JpZC5wcm9wZXJ0eS5Qcm9wZXJ0eSh7bmFtZTpjLHZhbHVlOmR9LGMpKX19fWEudG90YWw9YS5jb3VudD1hLnJlY29yZHMubGVuZ3RoO3JldHVybiBuZXcgRXh0LmRhdGEuUmVzdWx0U2V0KGEpfSxpc0VkaXRhYmxlVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5pc1ByaW1pdGl2ZShhKXx8RXh0LmlzRGF0ZShhKX19KX1yZXR1cm4gdGhpcy5yZWFkZXJ9LHNldFNvdXJjZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2Iuc291cmNlPWE7Yi5zdXNwZW5kRXZlbnRzKCk7Yi5yZW1vdmVBbGwoKTtiLnByb3h5LmRhdGE9YTtiLmxvYWQoKTtiLnJlc3VtZUV2ZW50cygpO2IuZmlyZUV2ZW50KCJkYXRhY2hhbmdlZCIsYik7Yi5maXJlRXZlbnQoInJlZnJlc2giLGIpfSxnZXRQcm9wZXJ0eTpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LmlzTnVtYmVyKGEpP3RoaXMuZ2V0QXQoYSk6dGhpcy5nZXRCeUlkKGEpfSxzZXRWYWx1ZTpmdW5jdGlvbihlLGMsYSl7dmFyIGI9dGhpcyxkPWIuZ2V0UmVjKGUpO2lmKGQpe2Quc2V0KCJ2YWx1ZSIsYyk7Yi5zb3VyY2VbZV09Y31lbHNle2lmKGEpe2Iuc291cmNlW2VdPWM7ZD1uZXcgRXh0LmdyaWQucHJvcGVydHkuUHJvcGVydHkoe25hbWU6ZSx2YWx1ZTpjfSxlKTtiLmFkZChkKX19fSxyZW1vdmU6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5nZXRSZWMoYik7aWYoYSl7dGhpcy5jYWxsUGFyZW50KFthXSk7ZGVsZXRlIHRoaXMuc291cmNlW2JdfX0sZ2V0UmVjOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldEJ5SWQoYSl9LGdldFNvdXJjZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvdXJjZX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LkNsYXNzTGlzdCIsKGZ1bmN0aW9uKCl7dmFyIGI9RXh0LlN0cmluZy5zcGxpdFdvcmRzLGE9RXh0LkFycmF5LnRvTWFwO3JldHVybntkaXJ0eTpmYWxzZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihjKXt0aGlzLm93bmVyPWM7dGhpcy5tYXA9YSh0aGlzLmNsYXNzZXM9YihjLmVsLmNsYXNzTmFtZSkpfSxhZGQ6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcztpZighZC5tYXBbY10pe2QubWFwW2NdPXRydWU7ZC5jbGFzc2VzLnB1c2goYyk7aWYoIWQuZGlydHkpe2QuZGlydHk9dHJ1ZTtkLm93bmVyLm1hcmtEaXJ0eSgpfX19LGFkZE1hbnk6ZnVuY3Rpb24oYyl7RXh0LmVhY2goYihjKSx0aGlzLmFkZCx0aGlzKX0sY29udGFpbnM6ZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMubWFwW2NdfSxmbHVzaDpmdW5jdGlvbigpe3RoaXMub3duZXIuZWwuY2xhc3NOYW1lPXRoaXMuY2xhc3Nlcy5qb2luKCIgIik7dGhpcy5kaXJ0eT1mYWxzZX0scmVtb3ZlOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXM7aWYoZC5tYXBbY10pe2RlbGV0ZSBkLm1hcFtjXTtkLmNsYXNzZXM9RXh0LkFycmF5LmZpbHRlcihkLmNsYXNzZXMsZnVuY3Rpb24oZSl7cmV0dXJuIGUhPWN9KTtpZighZC5kaXJ0eSl7ZC5kaXJ0eT10cnVlO2Qub3duZXIubWFya0RpcnR5KCl9fX0scmVtb3ZlTWFueTpmdW5jdGlvbihkKXt2YXIgZT10aGlzLGM9YShiKGQpKTtlLmNsYXNzZXM9RXh0LkFycmF5LmZpbHRlcihlLmNsYXNzZXMsZnVuY3Rpb24oZyl7aWYoIWNbZ10pe3JldHVybiB0cnVlfWRlbGV0ZSBlLm1hcFtnXTtpZighZS5kaXJ0eSl7ZS5kaXJ0eT10cnVlO2Uub3duZXIubWFya0RpcnR5KCl9cmV0dXJuIGZhbHNlfSl9fX0oKSkpO0V4dC5kZWZpbmUoIkV4dC51dGlsLlF1ZXVlIix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCl9LGFkZDpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE9Yi5nZXRLZXkoYyk7aWYoIWIubWFwW2FdKXsrK2IubGVuZ3RoO2IuaXRlbXMucHVzaChjKTtiLm1hcFthXT1jfXJldHVybiBjfSxjbGVhcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLml0ZW1zO2IuaXRlbXM9W107Yi5tYXA9e307Yi5sZW5ndGg9MDtyZXR1cm4gYX0sY29udGFpbnM6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5nZXRLZXkoYik7cmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KGEpfSxnZXRDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sZ2V0S2V5OmZ1bmN0aW9uKGEpe3JldHVybiBhLmlkfSxyZW1vdmU6ZnVuY3Rpb24oZSl7dmFyIGQ9dGhpcyxjPWQuZ2V0S2V5KGUpLGE9ZC5pdGVtcyxiO2lmKGQubWFwW2NdKXtiPUV4dC5BcnJheS5pbmRleE9mKGEsZSk7RXh0LkFycmF5LmVyYXNlKGEsYiwxKTtkZWxldGUgZC5tYXBbY107LS1kLmxlbmd0aH1yZXR1cm4gZX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LkNvbnRleHRJdGVtIix7cmVxdWlyZXM6WyJFeHQubGF5b3V0LkNsYXNzTGlzdCJdLGhlaWdodE1vZGVsOm51bGwsd2lkdGhNb2RlbDpudWxsLHNpemVNb2RlbDpudWxsLGJveENoaWxkcmVuOm51bGwsYm94UGFyZW50Om51bGwsY2hpbGRyZW46W10sZGlydHk6bnVsbCxkaXJ0eUNvdW50OjAsaGFzUmF3Q29udGVudDp0cnVlLGlzQ29udGV4dEl0ZW06dHJ1ZSxpc1RvcExldmVsOmZhbHNlLGNvbnN1bWVyc0NvbnRlbnRIZWlnaHQ6MCxjb25zdW1lcnNDb250ZW50V2lkdGg6MCxjb25zdW1lcnNDb250YWluZXJIZWlnaHQ6MCxjb25zdW1lcnNDb250YWluZXJXaWR0aDowLGNvbnN1bWVyc0hlaWdodDowLGNvbnN1bWVyc1dpZHRoOjAsb3duZXJDdENvbnRleHQ6bnVsbCxyZW1haW5pbmdDaGlsZExheW91dHM6MCxyZW1haW5pbmdDb21wb25lbnRDaGlsZExheW91dHM6MCxyZW1haW5pbmdDb250YWluZXJDaGlsZExheW91dHM6MCxwcm9wczpudWxsLHN0YXRlOm51bGwsd3JhcHNDb21wb25lbnQ6ZmFsc2UsY29uc3RydWN0b3I6ZnVuY3Rpb24oYil7dmFyIGc9dGhpcyxlLGQsYSxjLGg7RXh0LmFwcGx5KGcsYik7ZT1nLmVsO2cuaWQ9ZS5pZDtnLmxhc3RCb3g9ZS5sYXN0Qm94O2cuZmx1c2hlZFByb3BzPXt9O2cucHJvcHM9e307Zy5zdHlsZXM9e307aD1nLnRhcmdldDtpZihoLmlzQ29tcG9uZW50KXtnLndyYXBzQ29tcG9uZW50PXRydWU7ZD1oLm93bmVyQ3Q7aWYoZCYmKGE9Zy5jb250ZXh0Lml0ZW1zW2QuZWwuaWRdKSl7Zy5vd25lckN0Q29udGV4dD1hfWcuc2l6ZU1vZGVsPWM9aC5nZXRTaXplTW9kZWwoYSYmYS53aWR0aE1vZGVsLnBhaXJzQnlIZWlnaHRPcmRpbmFsW2EuaGVpZ2h0TW9kZWwub3JkaW5hbF0pO2cud2lkdGhNb2RlbD1jLndpZHRoO2cuaGVpZ2h0TW9kZWw9Yy5oZWlnaHR9fSxpbml0OmZ1bmN0aW9uKGosYyl7dmFyIHM9dGhpcyxhPXMucHJvcHMsZD1zLmRpcnR5LGw9cy5vd25lckN0Q29udGV4dCxwPXMudGFyZ2V0Lm93bmVyTGF5b3V0LGg9IXMuc3RhdGUsdD1qfHxoLGUsbyxtLHEsYix1LHY9cy5oZWlnaHRNb2RlbCxnPXMud2lkdGhNb2RlbCxrLHI7cy5kaXJ0eT1zLmludmFsaWQ9ZmFsc2U7cy5wcm9wcz17fTtpZihzLmJveENoaWxkcmVuKXtzLmJveENoaWxkcmVuLmxlbmd0aD0wfWlmKCFoKXtzLmNsZWFyQWxsQmxvY2tzKCJibG9ja3MiKTtzLmNsZWFyQWxsQmxvY2tzKCJkb21CbG9ja3MiKX1pZighcy53cmFwc0NvbXBvbmVudCl7cmV0dXJuIHR9dT1zLnRhcmdldDtzLnN0YXRlPXt9O2lmKGgpe2lmKHUuYmVmb3JlTGF5b3V0KXt1LmJlZm9yZUxheW91dCgpfWlmKCFsJiYocT11Lm93bmVyQ3QpKXtsPXMuY29udGV4dC5pdGVtc1txLmVsLmlkXX1pZihsKXtzLm93bmVyQ3RDb250ZXh0PWw7cy5pc0JveFBhcmVudD11Lm93bmVyTGF5b3V0LmlzSXRlbUJveFBhcmVudChzKX1lbHNle3MuaXNUb3BMZXZlbD10cnVlfXMuZnJhbWVCb2R5Q29udGV4dD1zLmdldEVsKCJmcmFtZUJvZHkiKX1lbHNle2w9cy5vd25lckN0Q29udGV4dDtzLmlzVG9wTGV2ZWw9IWw7ZT1zLmNoaWxkcmVuO2ZvcihvPTAsbT1lLmxlbmd0aDtvPG07KytvKXtlW29dLmluaXQodHJ1ZSl9fXMuaGFzUmF3Q29udGVudD0hKHUuaXNDb250YWluZXImJnUuaXRlbXMuaXRlbXMubGVuZ3RoPjApO2lmKGope3Mud2lkdGhNb2RlbD1zLmhlaWdodE1vZGVsPW51bGw7Yj11LmdldFNpemVNb2RlbChsJiZsLndpZHRoTW9kZWwucGFpcnNCeUhlaWdodE9yZGluYWxbbC5oZWlnaHRNb2RlbC5vcmRpbmFsXSk7aWYoaCl7cy5zaXplTW9kZWw9Yn1zLndpZHRoTW9kZWw9Yi53aWR0aDtzLmhlaWdodE1vZGVsPWIuaGVpZ2h0fWVsc2V7aWYoYSl7cy5yZWNvdmVyUHJvcCgieCIsYSxkKTtzLnJlY292ZXJQcm9wKCJ5IixhLGQpO2lmKHMud2lkdGhNb2RlbC5jYWxjdWxhdGVkKXtzLnJlY292ZXJQcm9wKCJ3aWR0aCIsYSxkKX1pZihzLmhlaWdodE1vZGVsLmNhbGN1bGF0ZWQpe3MucmVjb3ZlclByb3AoImhlaWdodCIsYSxkKX19fWlmKGEmJnAmJnAubWFuYWdlTWFyZ2lucyl7cy5yZWNvdmVyUHJvcCgibWFyZ2luLXRvcCIsYSxkKTtzLnJlY292ZXJQcm9wKCJtYXJnaW4tcmlnaHQiLGEsZCk7cy5yZWNvdmVyUHJvcCgibWFyZ2luLWJvdHRvbSIsYSxkKTtzLnJlY292ZXJQcm9wKCJtYXJnaW4tbGVmdCIsYSxkKX1pZihjKXtrPWMuaGVpZ2h0TW9kZWw7cj1jLndpZHRoTW9kZWw7aWYociYmayYmZyYmdil7aWYoZy5zaHJpbmtXcmFwJiZ2LnNocmlua1dyYXApe2lmKHIuY29uc3RyYWluZWRNYXgmJmsuY29uc3RyYWluZWRNaW4pe2s9bnVsbH19fWlmKHIpe3Mud2lkdGhNb2RlbD1yfWlmKGspe3MuaGVpZ2h0TW9kZWw9a31pZihjLnN0YXRlKXtFeHQuYXBwbHkocy5zdGF0ZSxjLnN0YXRlKX19cmV0dXJuIHR9LGluaXRDb250aW51ZTpmdW5jdGlvbihkKXt2YXIgZT10aGlzLGM9ZS5vd25lckN0Q29udGV4dCxiPWUud2lkdGhNb2RlbCxhO2lmKGQpe2lmKGMmJmIuc2hyaW5rV3JhcCl7YT1jLmlzQm94UGFyZW50P2M6Yy5ib3hQYXJlbnQ7aWYoYSl7YS5hZGRCb3hDaGlsZChlKX19ZWxzZXtpZihiLm5hdHVyYWwpe2UuYm94UGFyZW50PWN9fX1yZXR1cm4gZH0saW5pdERvbmU6ZnVuY3Rpb24oYixnLGEsaCl7dmFyIGQ9dGhpcyxjPWQucHJvcHMsZT1kLnN0YXRlO2lmKGcpe2MuY29tcG9uZW50Q2hpbGRyZW5Eb25lPXRydWV9aWYoYSl7Yy5jb250YWluZXJDaGlsZHJlbkRvbmU9dHJ1ZX1pZihoKXtjLmNvbnRhaW5lckxheW91dERvbmU9dHJ1ZX1pZihkLmJveENoaWxkcmVuJiZkLmJveENoaWxkcmVuLmxlbmd0aCYmZC53aWR0aE1vZGVsLnNocmlua1dyYXApe2QuZWwuc2V0V2lkdGgoMTAwMDApO2UuYmxvY2tzPShlLmJsb2Nrc3x8MCkrMX19LGluaXRBbmltYXRpb246ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGM9Yi50YXJnZXQsYT1iLm93bmVyQ3RDb250ZXh0O2lmKGEmJmEuaXNUb3BMZXZlbCl7Yi5hbmltYXRlUG9saWN5PWMub3duZXJMYXlvdXQuZ2V0QW5pbWF0ZVBvbGljeShiKX1lbHNle2lmKCFhJiZjLmlzQ29sbGFwc2luZ09yRXhwYW5kaW5nJiZjLmFuaW1Db2xsYXBzZSl7Yi5hbmltYXRlUG9saWN5PWMuY29tcG9uZW50TGF5b3V0LmdldEFuaW1hdGVQb2xpY3koYil9fWlmKGIuYW5pbWF0ZVBvbGljeSl7Yi5jb250ZXh0LnF1ZXVlQW5pbWF0aW9uKGIpfX0sbm9GcmFtaW5nOntsZWZ0OjAsdG9wOjAscmlnaHQ6MCxib3R0b206MCx3aWR0aDowLGhlaWdodDowfSxhZGRDbHM6ZnVuY3Rpb24oYSl7dGhpcy5nZXRDbGFzc0xpc3QoKS5hZGRNYW55KGEpfSxyZW1vdmVDbHM6ZnVuY3Rpb24oYSl7dGhpcy5nZXRDbGFzc0xpc3QoKS5yZW1vdmVNYW55KGEpfSxhZGRCbG9jazpmdW5jdGlvbihiLGQsZSl7dmFyIGM9dGhpcyxnPWNbYl18fChjW2JdPXt9KSxhPWdbZV18fChnW2VdPXt9KTtpZighYVtkLmlkXSl7YVtkLmlkXT1kOysrZC5ibG9ja0NvdW50OysrYy5jb250ZXh0LmJsb2NrQ291bnR9fSxhZGRCb3hDaGlsZDpmdW5jdGlvbihkKXt2YXIgYz10aGlzLGIsYT1kLndpZHRoTW9kZWw7ZC5ib3hQYXJlbnQ9dGhpcztkLm1lYXN1cmVzQm94PWEuc2hyaW5rV3JhcD9kLmhhc1Jhd0NvbnRlbnQ6YS5uYXR1cmFsO2lmKGQubWVhc3VyZXNCb3gpe2I9Yy5ib3hDaGlsZHJlbjtpZihiKXtiLnB1c2goZCl9ZWxzZXtjLmJveENoaWxkcmVuPVtkXX19fSxhZGRUcmlnZ2VyOmZ1bmN0aW9uKGcsaCl7dmFyIGU9dGhpcyxhPWg/ImRvbVRyaWdnZXJzIjoidHJpZ2dlcnMiLGk9ZVthXXx8KGVbYV09e30pLGI9ZS5jb250ZXh0LGQ9Yi5jdXJyZW50TGF5b3V0LGM9aVtnXXx8KGlbZ109e30pO2lmKCFjW2QuaWRdKXtjW2QuaWRdPWQ7KytkLnRyaWdnZXJDb3VudDtjPWIudHJpZ2dlcnNbaD8iZG9tIjoiZGF0YSJdOyhjW2QuaWRdfHwoY1tkLmlkXT1bXSkpLnB1c2goe2l0ZW06dGhpcyxwcm9wOmd9KTtpZihlLnByb3BzW2ddIT09dW5kZWZpbmVkKXtpZighaHx8IShlLmRpcnR5JiYoZyBpbiBlLmRpcnR5KSkpeysrZC5maXJlZFRyaWdnZXJzfX19fSxib3hDaGlsZE1lYXN1cmVkOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPWIuc3RhdGUsYT0oYy5ib3hlc01lYXN1cmVkPShjLmJveGVzTWVhc3VyZWR8fDApKzEpO2lmKGE9PWIuYm94Q2hpbGRyZW4ubGVuZ3RoKXtjLmNsZWFyQm94V2lkdGg9MTsrK2IuY29udGV4dC5wcm9ncmVzc0NvdW50O2IubWFya0RpcnR5KCl9fSxib3JkZXJOYW1lczpbImJvcmRlci10b3Atd2lkdGgiLCJib3JkZXItcmlnaHQtd2lkdGgiLCJib3JkZXItYm90dG9tLXdpZHRoIiwiYm9yZGVyLWxlZnQtd2lkdGgiXSxtYXJnaW5OYW1lczpbIm1hcmdpbi10b3AiLCJtYXJnaW4tcmlnaHQiLCJtYXJnaW4tYm90dG9tIiwibWFyZ2luLWxlZnQiXSxwYWRkaW5nTmFtZXM6WyJwYWRkaW5nLXRvcCIsInBhZGRpbmctcmlnaHQiLCJwYWRkaW5nLWJvdHRvbSIsInBhZGRpbmctbGVmdCJdLHRyYmxOYW1lczpbInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCJdLGNhY2hlTWlzc0hhbmRsZXJzOntib3JkZXJJbmZvOmZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0U3R5bGVzKGEuYm9yZGVyTmFtZXMsYS50cmJsTmFtZXMpO2Iud2lkdGg9Yi5sZWZ0K2IucmlnaHQ7Yi5oZWlnaHQ9Yi50b3ArYi5ib3R0b207cmV0dXJuIGJ9LG1hcmdpbkluZm86ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRTdHlsZXMoYS5tYXJnaW5OYW1lcyxhLnRyYmxOYW1lcyk7Yi53aWR0aD1iLmxlZnQrYi5yaWdodDtiLmhlaWdodD1iLnRvcCtiLmJvdHRvbTtyZXR1cm4gYn0scGFkZGluZ0luZm86ZnVuY3Rpb24oYil7dmFyIGE9Yi5mcmFtZUJvZHlDb250ZXh0fHxiLGM9YS5nZXRTdHlsZXMoYi5wYWRkaW5nTmFtZXMsYi50cmJsTmFtZXMpO2Mud2lkdGg9Yy5sZWZ0K2MucmlnaHQ7Yy5oZWlnaHQ9Yy50b3ArYy5ib3R0b207cmV0dXJuIGN9fSxjaGVja0NhY2hlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNhY2hlTWlzc0hhbmRsZXJzW2FdKHRoaXMpfSxjbGVhckFsbEJsb2NrczpmdW5jdGlvbihhKXt2YXIgYz10aGlzW2FdLGI7aWYoYyl7Zm9yKGIgaW4gYyl7dGhpcy5jbGVhckJsb2NrcyhhLGIpfX19LGNsZWFyQmxvY2tzOmZ1bmN0aW9uKGMsZyl7dmFyIGg9dGhpc1tjXSxiPWgmJmhbZ10sZCxlLGE7aWYoYil7ZGVsZXRlIGhbZ107ZD10aGlzLmNvbnRleHQ7Zm9yKGEgaW4gYil7ZT1iW2FdOy0tZC5ibG9ja0NvdW50O2lmKCEtLWUuYmxvY2tDb3VudCYmIWUucGVuZGluZyYmIWUuZG9uZSl7ZC5xdWV1ZUxheW91dChlKX19fX0sYmxvY2s6ZnVuY3Rpb24oYSxiKXt0aGlzLmFkZEJsb2NrKCJibG9ja3MiLGEsYil9LGRvbUJsb2NrOmZ1bmN0aW9uKGEsYil7dGhpcy5hZGRCbG9jaygiZG9tQmxvY2tzIixhLGIpfSxmaXJlVHJpZ2dlcnM6ZnVuY3Rpb24oYixnKXt2YXIgaD10aGlzW2JdLGQ9aCYmaFtnXSxjPXRoaXMuY29udGV4dCxlLGE7aWYoZCl7Zm9yKGEgaW4gZCl7ZT1kW2FdOysrZS5maXJlZFRyaWdnZXJzO2lmKCFlLmRvbmUmJiFlLmJsb2NrQ291bnQmJiFlLnBlbmRpbmcpe2MucXVldWVMYXlvdXQoZSl9fX19LGZsdXNoOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuZGlydHksYz1iLnN0YXRlLGQ9Yi5lbDtiLmRpcnR5Q291bnQ9MDtpZihiLmNsYXNzTGlzdCYmYi5jbGFzc0xpc3QuZGlydHkpe2IuY2xhc3NMaXN0LmZsdXNoKCl9aWYoImF0dHJpYnV0ZXMiIGluIGIpe2Quc2V0KGIuYXR0cmlidXRlcyk7ZGVsZXRlIGIuYXR0cmlidXRlc31pZigiaW5uZXJIVE1MIiBpbiBiKXtkLmlubmVySFRNTD1iLmlubmVySFRNTDtkZWxldGUgYi5pbm5lckhUTUx9aWYoYyYmYy5jbGVhckJveFdpZHRoKXtjLmNsZWFyQm94V2lkdGg9MDtiLmVsLnNldFN0eWxlKCJ3aWR0aCIsbnVsbCk7aWYoIS0tYy5ibG9ja3Mpe2IuY29udGV4dC5xdWV1ZUl0ZW1MYXlvdXRzKGIpfX1pZihhKXtkZWxldGUgYi5kaXJ0eTtiLndyaXRlUHJvcHMoYSx0cnVlKX19LGZsdXNoQW5pbWF0aW9uczpmdW5jdGlvbigpe3ZhciBvPXRoaXMsYz1vLmxhc3RCb3gsbCxuLGUsaCxnLGQsaSxtLGssYSxiO2lmKGMpe2w9by50YXJnZXQ7bj1sLmxheW91dCYmbC5sYXlvdXQuYW5pbWF0ZTtpZihuKXtlPUV4dC5pc051bWJlcihuKT9uOm4uZHVyYXRpb259aD1FeHQuT2JqZWN0LmdldEtleXMoby5hbmltYXRlUG9saWN5KTtnPUV4dC5hcHBseSh7fSx7ZnJvbTp7fSx0bzp7fSxkdXJhdGlvbjplfHxFeHQuZnguQW5pbS5wcm90b3R5cGUuZHVyYXRpb259LG4pO2ZvcihkPTAsaT0wLG09aC5sZW5ndGg7aTxtO2krKyl7az1oW2ldO2E9Y1trXTtiPW8ucGVlayhrKTtpZihhIT1iKXtrPW8udHJhbnNsYXRlUHJvcHNba118fGs7Zy5mcm9tW2tdPWE7Zy50b1trXT1iOysrZH19aWYoZCl7aWYoby5pc0NvbGxhcHNpbmdPckV4cGFuZGluZz09PTEpe2wuY29tcG9uZW50TGF5b3V0LnVuZG9MYXlvdXQobyl9ZWxzZXtvLndyaXRlUHJvcHMoZy5mcm9tKX1vLmVsLmFuaW1hdGUoZyk7RXh0LmZ4Lk1hbmFnZXIuZ2V0RnhRdWV1ZShvLmVsLmlkKVswXS5vbih7YWZ0ZXJhbmltYXRlOmZ1bmN0aW9uKCl7aWYoby5pc0NvbGxhcHNpbmdPckV4cGFuZGluZz09PTEpe2wuY29tcG9uZW50TGF5b3V0LnJlZG9MYXlvdXQobyk7bC5hZnRlckNvbGxhcHNlKHRydWUpfWVsc2V7aWYoby5pc0NvbGxhcHNpbmdPckV4cGFuZGluZz09PTIpe2wuYWZ0ZXJFeHBhbmQodHJ1ZSl9fX19KX19fSxnZXRCb3JkZXJJbmZvOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuYm9yZGVySW5mbztpZighYil7YS5ib3JkZXJJbmZvPWI9YS5jaGVja0NhY2hlKCJib3JkZXJJbmZvIil9cmV0dXJuIGJ9LGdldENsYXNzTGlzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsYXNzTGlzdHx8KHRoaXMuY2xhc3NMaXN0PW5ldyBFeHQubGF5b3V0LkNsYXNzTGlzdCh0aGlzKSl9LGdldEVsOmZ1bmN0aW9uKGMsYSl7dmFyIGU9dGhpcyxnLGQsYjtpZihjKXtpZihjLmRvbSl7ZD1jfWVsc2V7Zz1lLnRhcmdldDtpZihhKXtnPWF9ZD1nW2NdO2lmKHR5cGVvZiBkPT0iZnVuY3Rpb24iKXtkPWQuY2FsbChnKTtpZihkPT09ZS5lbCl7cmV0dXJuIHRoaXN9fX1pZihkKXtiPWUuY29udGV4dC5nZXRFbChlLGQpfX1yZXR1cm4gYnx8bnVsbH0sZ2V0RnJhbWluZzpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoIWEuZnJhbWluZ0luZm8pe2EuZnJhbWluZ0luZm89YS50YXJnZXQuZnJhbWVTaXplfHxhLm5vRnJhbWluZ31yZXR1cm4gYS5mcmFtaW5nSW5mb30sZ2V0RnJhbWVJbmZvOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPWIuZnJhbWVJbmZvLGQsYTtpZighYyl7ZD1iLmdldEZyYW1pbmcoKTthPWIuZ2V0Qm9yZGVySW5mbygpO2IuZnJhbWVJbmZvPWM9e3RvcDpkLnRvcCthLnRvcCxyaWdodDpkLnJpZ2h0K2EucmlnaHQsYm90dG9tOmQuYm90dG9tK2EuYm90dG9tLGxlZnQ6ZC5sZWZ0K2EubGVmdCx3aWR0aDpkLndpZHRoK2Eud2lkdGgsaGVpZ2h0OmQuaGVpZ2h0K2EuaGVpZ2h0fX1yZXR1cm4gY30sZ2V0TWFyZ2luSW5mbzpmdW5jdGlvbigpe3ZhciBkPXRoaXMsaD1kLm1hcmdpbkluZm8sYixhLGcsZSxjO2lmKCFoKXtpZighZC53cmFwc0NvbXBvbmVudCl7aD1kLmNoZWNrQ2FjaGUoIm1hcmdpbkluZm8iKX1lbHNle2I9ZC50YXJnZXQ7ZT1iLm93bmVyTGF5b3V0O2M9ZT9lLmlkOm51bGw7YT1lJiZlLm1hbmFnZU1hcmdpbnM7aD1iLm1hcmdpbiQ7aWYoaCYmaC5vd25lcklkIT09Yyl7aD1udWxsfWlmKCFoKXtoPWQucGFyc2VNYXJnaW5zKGIubWFyZ2luKXx8ZC5jaGVja0NhY2hlKCJtYXJnaW5JbmZvIik7aWYoYSl7Zz1kLnBhcnNlTWFyZ2lucyhiLm1hcmdpbnMsZS5kZWZhdWx0TWFyZ2lucyk7aWYoZyl7aD17dG9wOmgudG9wK2cudG9wLHJpZ2h0OmgucmlnaHQrZy5yaWdodCxib3R0b206aC5ib3R0b20rZy5ib3R0b20sbGVmdDpoLmxlZnQrZy5sZWZ0fX1kLnNldFByb3AoIm1hcmdpbi10b3AiLDApO2Quc2V0UHJvcCgibWFyZ2luLXJpZ2h0IiwwKTtkLnNldFByb3AoIm1hcmdpbi1ib3R0b20iLDApO2Quc2V0UHJvcCgibWFyZ2luLWxlZnQiLDApfWgub3duZXJJZD1jO2IubWFyZ2luJD1ofWgud2lkdGg9aC5sZWZ0K2gucmlnaHQ7aC5oZWlnaHQ9aC50b3AraC5ib3R0b219ZC5tYXJnaW5JbmZvPWh9cmV0dXJuIGh9LGNsZWFyTWFyZ2luQ2FjaGU6ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5tYXJnaW5JbmZvO2RlbGV0ZSB0aGlzLnRhcmdldC5tYXJnaW4kfSxnZXRQYWRkaW5nSW5mbzpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLnBhZGRpbmdJbmZvO2lmKCFiKXthLnBhZGRpbmdJbmZvPWI9YS5jaGVja0NhY2hlKCJwYWRkaW5nSW5mbyIpfXJldHVybiBifSxnZXRQcm9wOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLnByb3BzW2NdO2IuYWRkVHJpZ2dlcihjKTtyZXR1cm4gYX0sZ2V0RG9tUHJvcDpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGE9KGIuZGlydHkmJihjIGluIGIuZGlydHkpKT91bmRlZmluZWQ6Yi5wcm9wc1tjXTtiLmFkZFRyaWdnZXIoYyx0cnVlKTtyZXR1cm4gYX0sZ2V0U3R5bGU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxiPWMuc3R5bGVzLGUsZDtpZihhIGluIGIpe2Q9YlthXX1lbHNle2U9Yy5zdHlsZUluZm9bYV07ZD1jLmVsLmdldFN0eWxlKGEpO2lmKGUmJmUucGFyc2VJbnQpe2Q9cGFyc2VJbnQoZCwxMCl8fDB9YlthXT1kfXJldHVybiBkfSxnZXRTdHlsZXM6ZnVuY3Rpb24ocCxiKXt2YXIgbT10aGlzLGU9bS5zdHlsZXMscT17fSxnPTAsZD1wLmxlbmd0aCxrLGosbCxhLGMsaCxyLG87Yj1ifHxwO2ZvcihrPTA7azxkOysrayl7YT1wW2tdO2lmKGEgaW4gZSl7cVtiW2tdXT1lW2FdOysrZztpZihrJiZnPT0xKXtqPXAuc2xpY2UoMCxrKTtsPWIuc2xpY2UoMCxrKX19ZWxzZXtpZihnKXsoanx8KGo9W10pKS5wdXNoKGEpOyhsfHwobD1bXSkpLnB1c2goYltrXSl9fX1pZihnPGQpe2o9anx8cDtsPWx8fGI7aD1tLnN0eWxlSW5mbztyPW0uZWwuZ2V0U3R5bGUoaik7Zm9yKGs9ai5sZW5ndGg7ay0tOyl7YT1qW2tdO2M9aFthXTtvPXJbYV07aWYoYyYmYy5wYXJzZUludCl7bz1wYXJzZUludChvLDEwKXx8MH1xW2xba11dPW87ZVthXT1vfX1yZXR1cm4gcX0saGFzUHJvcDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldFByb3AoYik7cmV0dXJuIHR5cGVvZiBhIT0idW5kZWZpbmVkIn0saGFzRG9tUHJvcDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldERvbVByb3AoYik7cmV0dXJuIHR5cGVvZiBhIT0idW5kZWZpbmVkIn0saW52YWxpZGF0ZTpmdW5jdGlvbihhKXt0aGlzLmNvbnRleHQucXVldWVJbnZhbGlkYXRlKHRoaXMsYSl9LG1hcmtEaXJ0eTpmdW5jdGlvbigpe2lmKCsrdGhpcy5kaXJ0eUNvdW50PT0xKXt0aGlzLmNvbnRleHQucXVldWVGbHVzaCh0aGlzKX19LG9uQm94TWVhc3VyZWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJveFBhcmVudCxiPXRoaXMuc3RhdGU7aWYoYSYmYS53aWR0aE1vZGVsLnNocmlua1dyYXAmJiFiLmJveE1lYXN1cmVkJiZ0aGlzLm1lYXN1cmVzQm94KXtiLmJveE1lYXN1cmVkPTE7YS5ib3hDaGlsZE1lYXN1cmVkKCl9fSxwYXJzZU1hcmdpbnM6ZnVuY3Rpb24oZCxjKXtpZihkPT09dHJ1ZSl7ZD01fXZhciBiPXR5cGVvZiBkLGE7aWYoYj09InN0cmluZyJ8fGI9PSJudW1iZXIiKXthPUV4dC51dGlsLkZvcm1hdC5wYXJzZUJveChkKX1lbHNle2lmKGR8fGMpe2E9e3RvcDowLHJpZ2h0OjAsYm90dG9tOjAsbGVmdDowfTtpZihjKXtFeHQuYXBwbHkoYSx0aGlzLnBhcnNlTWFyZ2lucyhjKSl9RXh0LmFwcGx5KGEsZCl9fXJldHVybiBhfSxwZWVrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnByb3BzW2FdfSxyZWNvdmVyUHJvcDpmdW5jdGlvbihnLGIsYSl7dmFyIGU9dGhpcyxkPWUucHJvcHMsYztpZihnIGluIGIpe2RbZ109YltnXTtpZihhJiZnIGluIGEpe2M9ZS5kaXJ0eXx8KGUuZGlydHk9e30pO2NbZ109YVtnXX19fSxyZWRvOmZ1bmN0aW9uKGIpe3ZhciBlPXRoaXMsYyxhLGQ7ZS5yZXZlcnRQcm9wcyhlLnByb3BzKTtpZihiJiZlLndyYXBzQ29tcG9uZW50KXtpZihlLmNoaWxkSXRlbXMpe2ZvcihkPTAsYz1lLmNoaWxkSXRlbXMsYT1jLmxlbmd0aDtkPGE7ZCsrKXtjW2RdLnJlZG8oYil9fWZvcihkPTAsYz1lLmNoaWxkcmVuLGE9Yy5sZW5ndGg7ZDxhO2QrKyl7Y1tkXS5yZWRvKCl9fX0scmV2ZXJ0UHJvcHM6ZnVuY3Rpb24oZCl7dmFyIGEsYj10aGlzLmZsdXNoZWRQcm9wcyxjPXt9O2ZvcihhIGluIGQpe2lmKGIuaGFzT3duUHJvcGVydHkoYSkpe2NbYV09ZFthXX19dGhpcy53cml0ZVByb3BzKGMpfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSxjKXt2YXIgYj10aGlzO2lmKCFiLmF0dHJpYnV0ZXMpe2IuYXR0cmlidXRlcz17fX1iLmF0dHJpYnV0ZXNbYV09YztiLm1hcmtEaXJ0eSgpfSxzZXRCb3g6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZigibGVmdCIgaW4gYil7YS5zZXRQcm9wKCJ4IixiLmxlZnQpfWlmKCJ0b3AiIGluIGIpe2Euc2V0UHJvcCgieSIsYi50b3ApfWEuc2V0U2l6ZShiLndpZHRoLGIuaGVpZ2h0KX0sc2V0Q29udGVudEhlaWdodDpmdW5jdGlvbihhLGIpe2lmKCFiJiZ0aGlzLmhhc1Jhd0NvbnRlbnQpe3JldHVybiAxfXJldHVybiB0aGlzLnNldFByb3AoImNvbnRlbnRIZWlnaHQiLGEpfSxzZXRDb250ZW50V2lkdGg6ZnVuY3Rpb24oYixhKXtpZighYSYmdGhpcy5oYXNSYXdDb250ZW50KXtyZXR1cm4gMX1yZXR1cm4gdGhpcy5zZXRQcm9wKCJjb250ZW50V2lkdGgiLGIpfSxzZXRDb250ZW50U2l6ZTpmdW5jdGlvbihjLGEsYil7cmV0dXJuIHRoaXMuc2V0Q29udGVudFdpZHRoKGMsYikrdGhpcy5zZXRDb250ZW50SGVpZ2h0KGEsYik9PTJ9LHNldFByb3A6ZnVuY3Rpb24oZCxjLGEpe3ZhciBiPXRoaXMsaD10eXBlb2YgYyxnLGU7aWYoaD09InVuZGVmaW5lZCJ8fChoPT09Im51bWJlciImJmlzTmFOKGMpKSl7cmV0dXJuIDB9aWYoYi5wcm9wc1tkXT09PWMpe3JldHVybiAxfWIucHJvcHNbZF09YzsrK2IuY29udGV4dC5wcm9ncmVzc0NvdW50O2lmKGE9PT1mYWxzZSl7Yi5maXJlVHJpZ2dlcnMoImRvbVRyaWdnZXJzIixkKTtiLmNsZWFyQmxvY2tzKCJkb21CbG9ja3MiLGQpfWVsc2V7ZT1iLnN0eWxlSW5mb1tkXTtpZihlKXtpZighYi5kaXJ0eSl7Yi5kaXJ0eT17fX1pZihkPT0id2lkdGgifHxkPT0iaGVpZ2h0Iil7Zz1iLmlzQm9yZGVyQm94VmFsdWU7aWYoZz09bnVsbCl7Yi5pc0JvcmRlckJveFZhbHVlPWc9ISFiLmVsLmlzQm9yZGVyQm94KCl9aWYoIWcpe2IuYm9yZGVySW5mb3x8Yi5nZXRCb3JkZXJJbmZvKCk7Yi5wYWRkaW5nSW5mb3x8Yi5nZXRQYWRkaW5nSW5mbygpfX1iLmRpcnR5W2RdPWM7Yi5tYXJrRGlydHkoKX19Yi5maXJlVHJpZ2dlcnMoInRyaWdnZXJzIixkKTtiLmNsZWFyQmxvY2tzKCJibG9ja3MiLGQpO3JldHVybiAxfSxzZXRIZWlnaHQ6ZnVuY3Rpb24oYSxjKXt2YXIgZT10aGlzLGI9ZS50YXJnZXQsaCxkLGc7aWYoYTwwKXthPTB9aWYoIWUud3JhcHNDb21wb25lbnQpe2lmKCFlLnNldFByb3AoImhlaWdodCIsYSxjKSl7cmV0dXJuIE5hTn19ZWxzZXthPUV4dC5OdW1iZXIuY29uc3RyYWluKGEsYi5taW5IZWlnaHR8fDAsYi5tYXhIZWlnaHQpO2lmKCFlLnNldFByb3AoImhlaWdodCIsYSxjKSl7cmV0dXJuIE5hTn1oPWUuZnJhbWVCb2R5Q29udGV4dDtpZihoKXtkPWUuZ2V0RnJhbWVJbmZvKCk7aC5zZXRIZWlnaHQoYS1kLmhlaWdodCxjKX19cmV0dXJuIGF9LHNldFdpZHRoOmZ1bmN0aW9uKGMsYil7dmFyIGU9dGhpcyxhPWUudGFyZ2V0LGgsZCxnO2lmKGM8MCl7Yz0wfWlmKCFlLndyYXBzQ29tcG9uZW50KXtpZighZS5zZXRQcm9wKCJ3aWR0aCIsYyxiKSl7cmV0dXJuIE5hTn19ZWxzZXtjPUV4dC5OdW1iZXIuY29uc3RyYWluKGMsYS5taW5XaWR0aHx8MCxhLm1heFdpZHRoKTtpZighZS5zZXRQcm9wKCJ3aWR0aCIsYyxiKSl7cmV0dXJuIE5hTn1oPWUuZnJhbWVCb2R5Q29udGV4dDtpZihoKXtkPWUuZ2V0RnJhbWVJbmZvKCk7aC5zZXRXaWR0aChjLWQud2lkdGgsYil9fXJldHVybiBjfSxzZXRTaXplOmZ1bmN0aW9uKGMsYSxiKXt0aGlzLnNldFdpZHRoKGMsYik7dGhpcy5zZXRIZWlnaHQoYSxiKX0sdHJhbnNsYXRlUHJvcHM6e3g6ImxlZnQiLHk6InRvcCJ9LHVuZG86ZnVuY3Rpb24oYil7dmFyIGU9dGhpcyxjLGEsZDtlLnJldmVydFByb3BzKGUubGFzdEJveCk7aWYoYiYmZS53cmFwc0NvbXBvbmVudCl7aWYoZS5jaGlsZEl0ZW1zKXtmb3IoZD0wLGM9ZS5jaGlsZEl0ZW1zLGE9Yy5sZW5ndGg7ZDxhO2QrKyl7Y1tkXS51bmRvKGIpfX1mb3IoZD0wLGM9ZS5jaGlsZHJlbixhPWMubGVuZ3RoO2Q8YTtkKyspe2NbZF0udW5kbygpfX19LHVuc2V0UHJvcDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmRpcnR5O2RlbGV0ZSB0aGlzLnByb3BzW2JdO2lmKGEpe2RlbGV0ZSBhW2JdfX0sd3JpdGVQcm9wczpmdW5jdGlvbihlLGQpe2lmKCEoZSYmdHlwZW9mIGU9PSJvYmplY3QiKSl7cmV0dXJufXZhciBDPXRoaXMsYz1DLmVsLGk9e30saD0wLGI9Qy5zdHlsZUluZm8sQixuLHIsbT0ieCIgaW4gZSxsPSJ5IiBpbiBlLGs9ZS54LGo9ZS55LHQ9ZS53aWR0aCxwPWUuaGVpZ2h0LEE9Qy5pc0JvcmRlckJveFZhbHVlLEQ9Qy50YXJnZXQsdj1NYXRoLm1heCx6PTAsbz0wLGcsYSxzLHUsdyxxO2lmKCJkaXNwbGF5ZWQiIGluIGUpe2Muc2V0RGlzcGxheWVkKGUuZGlzcGxheWVkKX1mb3IobiBpbiBlKXtpZihkKXtDLmZpcmVUcmlnZ2VycygiZG9tVHJpZ2dlcnMiLG4pO0MuY2xlYXJCbG9ja3MoImRvbUJsb2NrcyIsbik7Qy5mbHVzaGVkUHJvcHNbbl09MX1CPWJbbl07aWYoQiYmQi5kb20pe2lmKEIuc3VmZml4JiYocj1wYXJzZUludChlW25dLDEwKSkpe2lbbl09citCLnN1ZmZpeH1lbHNle2lbbl09ZVtuXX0rK2h9fWlmKG18fGwpe2lmKEQuaXNDb21wb25lbnQpe0Quc2V0UG9zaXRpb24oa3x8Qy5wcm9wcy54LGp8fEMucHJvcHMueSl9ZWxzZXtpZihtKXtpLmxlZnQ9aysicHgiOysraH1pZihsKXtpLnRvcD1qKyJweCI7KytofX19aWYoIUEmJih0PjB8fHA+MCkpe2lmKCFDLmZyYW1lQm9keUNvbnRleHQpe3o9Qy5wYWRkaW5nSW5mby53aWR0aDtvPUMucGFkZGluZ0luZm8uaGVpZ2h0fWlmKHQpe3Q9dihwYXJzZUludCh0LDEwKS0oQy5ib3JkZXJJbmZvLndpZHRoK3opLDApO2kud2lkdGg9dCsicHgiOysraH1pZihwKXtwPXYocGFyc2VJbnQocCwxMCktKEMuYm9yZGVySW5mby5oZWlnaHQrbyksMCk7aS5oZWlnaHQ9cCsicHgiOysraH19aWYoQy53cmFwc0NvbXBvbmVudCYmRXh0LmlzSUU5JiZFeHQuaXNTdHJpY3Qpe2lmKChnPXQhPT11bmRlZmluZWQmJkMuaGFzT3ZlcmZsb3dZKXx8KGE9cCE9PXVuZGVmaW5lZCYmQy5oYXNPdmVyZmxvd1gpKXtzPUMuaXNBYnNvbHV0ZTtpZihzPT09dW5kZWZpbmVkKXtzPWZhbHNlO3E9Qy50YXJnZXQuZ2V0VGFyZ2V0RWwoKTt3PXEuZ2V0U3R5bGUoInBvc2l0aW9uIik7aWYodz09ImFic29sdXRlIil7dz1xLmdldFN0eWxlKCJib3gtc2l6aW5nIik7cz0odz09ImJvcmRlci1ib3giKX1DLmlzQWJzb2x1dGU9c31pZihzKXt1PUV4dC5nZXRTY3JvbGxiYXJTaXplKCk7aWYoZyl7dD1wYXJzZUludCh0LDEwKSt1LndpZHRoO2kud2lkdGg9dCsicHgiOysraH1pZihhKXtwPXBhcnNlSW50KHAsMTApK3UuaGVpZ2h0O2kuaGVpZ2h0PXArInB4IjsrK2h9fX19aWYoaCl7Yy5zZXRTdHlsZShpKX19fSxmdW5jdGlvbigpe3ZhciBjPXtkb206dHJ1ZSxwYXJzZUludDp0cnVlLHN1ZmZpeDoicHgifSxiPXtkb206dHJ1ZX0sYT17ZG9tOmZhbHNlfTt0aGlzLnByb3RvdHlwZS5zdHlsZUluZm89e2NoaWxkcmVuRG9uZTphLGNvbXBvbmVudENoaWxkcmVuRG9uZTphLGNvbnRhaW5lckNoaWxkcmVuRG9uZTphLGNvbnRhaW5lckxheW91dERvbmU6YSxkaXNwbGF5ZWQ6YSxkb25lOmEseDphLHk6YSxjb2x1bW5XaWR0aHNEb25lOmEsbGVmdDpjLHRvcDpjLHJpZ2h0OmMsYm90dG9tOmMsd2lkdGg6YyxoZWlnaHQ6YywiYm9yZGVyLXRvcC13aWR0aCI6YywiYm9yZGVyLXJpZ2h0LXdpZHRoIjpjLCJib3JkZXItYm90dG9tLXdpZHRoIjpjLCJib3JkZXItbGVmdC13aWR0aCI6YywibWFyZ2luLXRvcCI6YywibWFyZ2luLXJpZ2h0IjpjLCJtYXJnaW4tYm90dG9tIjpjLCJtYXJnaW4tbGVmdCI6YywicGFkZGluZy10b3AiOmMsInBhZGRpbmctcmlnaHQiOmMsInBhZGRpbmctYm90dG9tIjpjLCJwYWRkaW5nLWxlZnQiOmMsImxpbmUtaGVpZ2h0IjpiLGRpc3BsYXk6Yn19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LkNvbnRleHQiLHtyZXF1aXJlczpbIkV4dC51dGlsLlF1ZXVlIiwiRXh0LmxheW91dC5Db250ZXh0SXRlbSIsIkV4dC5sYXlvdXQuTGF5b3V0IiwiRXh0LmZ4LkFuaW0iLCJFeHQuZnguTWFuYWdlciJdLHJlbWFpbmluZ0xheW91dHM6MCxzdGF0ZTowLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7RXh0LmFwcGx5KGIsYSk7Yi5pdGVtcz17fTtiLmxheW91dHM9e307Yi5ibG9ja0NvdW50PTA7Yi5jeWNsZUNvdW50PTA7Yi5mbHVzaENvdW50PTA7Yi5jYWxjQ291bnQ9MDtiLmFuaW1hdGVRdWV1ZT1iLm5ld1F1ZXVlKCk7Yi5jb21wbGV0aW9uUXVldWU9Yi5uZXdRdWV1ZSgpO2IuZmluYWxpemVRdWV1ZT1iLm5ld1F1ZXVlKCk7Yi5maW5pc2hRdWV1ZT1iLm5ld1F1ZXVlKCk7Yi5mbHVzaFF1ZXVlPWIubmV3UXVldWUoKTtiLmludmFsaWRhdGVEYXRhPXt9O2IubGF5b3V0UXVldWU9Yi5uZXdRdWV1ZSgpO2IuaW52YWxpZFF1ZXVlPVtdO2IudHJpZ2dlcnM9e2RhdGE6e30sZG9tOnt9fX0sY2FsbExheW91dDpmdW5jdGlvbihiLGEpe3RoaXMuY3VycmVudExheW91dD1iO2JbYV0odGhpcy5nZXRDbXAoYi5vd25lcikpfSxjYW5jZWxDb21wb25lbnQ6ZnVuY3Rpb24oaixhLG0pe3ZhciBwPXRoaXMsaD1qLGw9IWouaXNDb21wb25lbnQsYj1sP2gubGVuZ3RoOjEsZCxjLG8sbixnLHMscSxyLHQsZTtmb3IoZD0wO2Q8YjsrK2Qpe2lmKGwpe2o9aFtkXX1pZihtJiZqLm93bmVyQ3Qpe2U9dGhpcy5pdGVtc1tqLm93bmVyQ3QuZWwuaWRdO2lmKGUpe0V4dC5BcnJheS5yZW1vdmUoZS5jaGlsZEl0ZW1zLHAuZ2V0Q21wKGopKX19aWYoIWEpe3E9cC5pbnZhbGlkUXVldWU7bz1xLmxlbmd0aDtpZihvKXtwLmludmFsaWRRdWV1ZT1zPVtdO2ZvcihjPTA7YzxvOysrYyl7cj1xW2NdO3Q9ci5pdGVtLnRhcmdldDtpZih0IT1qJiYhdC5pc0Rlc2NlbmRhbnQoaikpe3MucHVzaChyKX19fX1nPWouY29tcG9uZW50TGF5b3V0O3AuY2FuY2VsTGF5b3V0KGcpO2lmKGcuZ2V0TGF5b3V0SXRlbXMpe249Zy5nZXRMYXlvdXRJdGVtcygpO2lmKG4ubGVuZ3RoKXtwLmNhbmNlbENvbXBvbmVudChuLHRydWUpfX1pZihqLmlzQ29udGFpbmVyJiYhai5jb2xsYXBzZWQpe2c9ai5sYXlvdXQ7cC5jYW5jZWxMYXlvdXQoZyk7bj1nLmdldFZpc2libGVJdGVtcygpO2lmKG4ubGVuZ3RoKXtwLmNhbmNlbENvbXBvbmVudChuLHRydWUpfX19fSxjYW5jZWxMYXlvdXQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpczthLmNvbXBsZXRpb25RdWV1ZS5yZW1vdmUoYik7YS5maW5hbGl6ZVF1ZXVlLnJlbW92ZShiKTthLmZpbmlzaFF1ZXVlLnJlbW92ZShiKTthLmxheW91dFF1ZXVlLnJlbW92ZShiKTtpZihiLnJ1bm5pbmcpe2EubGF5b3V0RG9uZShiKX1iLm93bmVyQ29udGV4dD1udWxsfSxjbGVhclRyaWdnZXJzOmZ1bmN0aW9uKGcsaCl7dmFyIGE9Zy5pZCxlPXRoaXMudHJpZ2dlcnNbaD8iZG9tIjoiZGF0YSJdLGo9ZSYmZVthXSxiPShqJiZqLmxlbmd0aCl8fDAsZSxkLGssYztmb3IoZD0wO2Q8YjsrK2Qpe2M9altkXTtrPWMuaXRlbTtlPWg/ay5kb21UcmlnZ2VyczprLnRyaWdnZXJzO2RlbGV0ZSBlW2MucHJvcF1bYV19fSxmbHVzaDpmdW5jdGlvbigpe3ZhciBkPXRoaXMsYT1kLmZsdXNoUXVldWUuY2xlYXIoKSxjPWEubGVuZ3RoLGI7aWYoYyl7KytkLmZsdXNoQ291bnQ7Zm9yKGI9MDtiPGM7KytiKXthW2JdLmZsdXNoKCl9fX0sZmx1c2hBbmltYXRpb25zOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxiPWQuYW5pbWF0ZVF1ZXVlLmNsZWFyKCksYT1iLmxlbmd0aCxjO2lmKGEpe2ZvcihjPTA7YzxhO2MrKyl7aWYoYltjXS50YXJnZXQuYW5pbWF0ZSE9PWZhbHNlKXtiW2NdLmZsdXNoQW5pbWF0aW9ucygpfX1FeHQuZnguTWFuYWdlci5ydW5uZXIoKX19LGZsdXNoSW52YWxpZGF0ZXM6ZnVuY3Rpb24oKXt2YXIgaD10aGlzLGE9aC5pbnZhbGlkUXVldWUsZz1hJiZhLmxlbmd0aCxiLGUsZCxjO2guaW52YWxpZFF1ZXVlPVtdO2lmKGcpe2U9W107Zm9yKGM9MDtjPGc7KytjKXtiPShkPWFbY10pLml0ZW0udGFyZ2V0O2lmKCFiLmNvbnRhaW5lci5pc0RldGFjaGVkQm9keSl7ZS5wdXNoKGIpO2lmKGQub3B0aW9ucyl7aC5pbnZhbGlkYXRlRGF0YVtiLmlkXT1kLm9wdGlvbnN9fX1oLmludmFsaWRhdGUoZSxudWxsKX19LGZsdXNoTGF5b3V0czpmdW5jdGlvbihoLGEsYyl7dmFyIGc9dGhpcyxqPWM/Z1toXS5pdGVtczpnW2hdLmNsZWFyKCksZT1qLmxlbmd0aCxiLGQ7aWYoZSl7Zm9yKGI9MDtiPGU7KytiKXtkPWpbYl07aWYoIWQucnVubmluZyl7Zy5jYWxsTGF5b3V0KGQsYSl9fWcuY3VycmVudExheW91dD1udWxsfX0sZ2V0Q21wOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldEl0ZW0oYSxhLmVsKX0sZ2V0RWw6ZnVuY3Rpb24oYixhKXt2YXIgYz10aGlzLmdldEl0ZW0oYSxhKTtpZighYy5wYXJlbnQpe2MucGFyZW50PWI7aWYoYi5jaGlsZHJlbi5sZW5ndGgpe2IuY2hpbGRyZW4ucHVzaChjKX1lbHNle2IuY2hpbGRyZW49W2NdfX1yZXR1cm4gY30sZ2V0SXRlbTpmdW5jdGlvbihkLGIpe3ZhciBlPWIuaWQsYT10aGlzLml0ZW1zLGM9YVtlXXx8KGFbZV09bmV3IEV4dC5sYXlvdXQuQ29udGV4dEl0ZW0oe2NvbnRleHQ6dGhpcyx0YXJnZXQ6ZCxlbDpifSkpO3JldHVybiBjfSxoYW5kbGVGYWlsdXJlOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5sYXlvdXRzLGIsYTtFeHQuZmFpbGVkTGF5b3V0cz0oRXh0LmZhaWxlZExheW91dHN8fDApKzE7Zm9yKGEgaW4gYyl7Yj1jW2FdO2lmKGMuaGFzT3duUHJvcGVydHkoYSkpe2IucnVubmluZz1mYWxzZTtiLm93bmVyQ29udGV4dD1udWxsfX19LGludmFsaWRhdGU6ZnVuY3Rpb24obixwKXt2YXIgcj10aGlzLG89IW4uaXNDb21wb25lbnQsZSxnLGMsYSxqLG0scyxxLGIsayxsLGgsZDtmb3Ioaj0wLGI9bz9uLmxlbmd0aDoxO2o8YjsrK2ope209bz9uW2pdOm47aWYobS5yZW5kZXJlZCYmIW0uaGlkZGVuKXtzPXIuZ2V0Q21wKG0pO2s9bS5jb21wb25lbnRMYXlvdXQ7YT0hay5vd25lckNvbnRleHQ7bD0obS5pc0NvbnRhaW5lciYmIW0uY29sbGFwc2VkKT9tLmxheW91dDpudWxsO2g9ci5pbnZhbGlkYXRlRGF0YVtzLmlkXTtkZWxldGUgci5pbnZhbGlkYXRlRGF0YVtzLmlkXTtkPXMuaW5pdChwLGgpO2lmKGgpe3IucHJvY2Vzc0ludmFsaWRhdGUoaCxzLCJiZWZvcmUiKX1pZihrLmJlZm9yZUxheW91dEN5Y2xlKXtrLmJlZm9yZUxheW91dEN5Y2xlKHMpfWQ9cy5pbml0Q29udGludWUoZCk7ZT1nPWM9dHJ1ZTtpZihrLmdldExheW91dEl0ZW1zKXtrLnJlbmRlckNoaWxkcmVuKCk7cT1rLmdldExheW91dEl0ZW1zKCk7aWYocS5sZW5ndGgpe3IuaW52YWxpZGF0ZShxLHRydWUpO2U9ZmFsc2V9fWlmKGwpe2M9ZmFsc2U7bC5yZW5kZXJDaGlsZHJlbigpO3E9bC5nZXRWaXNpYmxlSXRlbXMoKTtpZihxLmxlbmd0aCl7ci5pbnZhbGlkYXRlKHEsdHJ1ZSk7Zz1mYWxzZX19cy5pbml0RG9uZShkLGUsZyxjKTtyLnJlc2V0TGF5b3V0KGsscyxhKTtpZihsKXtyLnJlc2V0TGF5b3V0KGwscyxhKX1zLmluaXRBbmltYXRpb24oKTtpZihoKXtyLnByb2Nlc3NJbnZhbGlkYXRlKGgscywiYWZ0ZXIiKX19fXIuY3VycmVudExheW91dD1udWxsfSxsYXlvdXREb25lOmZ1bmN0aW9uKGIpe3ZhciBjPWIub3duZXJDb250ZXh0LGE7Yi5ydW5uaW5nPWZhbHNlO2lmKGIuaXNDb21wb25lbnRMYXlvdXQpe2lmKGMubWVhc3VyZXNCb3gpe2Mub25Cb3hNZWFzdXJlZCgpfWMuc2V0UHJvcCgiZG9uZSIsdHJ1ZSk7YT1jLm93bmVyQ3RDb250ZXh0O2lmKGEpe2lmKGMudGFyZ2V0Lm93bmVyTGF5b3V0LmlzQ29tcG9uZW50TGF5b3V0KXtpZighLS1hLnJlbWFpbmluZ0NvbXBvbmVudENoaWxkTGF5b3V0cyl7YS5zZXRQcm9wKCJjb21wb25lbnRDaGlsZHJlbkRvbmUiLHRydWUpfX1lbHNle2lmKCEtLWEucmVtYWluaW5nQ29udGFpbmVyQ2hpbGRMYXlvdXRzKXthLnNldFByb3AoImNvbnRhaW5lckNoaWxkcmVuRG9uZSIsdHJ1ZSl9fWlmKCEtLWEucmVtYWluaW5nQ2hpbGRMYXlvdXRzKXthLnNldFByb3AoImNoaWxkcmVuRG9uZSIsdHJ1ZSl9fX1lbHNle2Muc2V0UHJvcCgiY29udGFpbmVyTGF5b3V0RG9uZSIsdHJ1ZSl9LS10aGlzLnJlbWFpbmluZ0xheW91dHM7Kyt0aGlzLnByb2dyZXNzQ291bnR9LG5ld1F1ZXVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBFeHQudXRpbC5RdWV1ZSgpfSxwcm9jZXNzSW52YWxpZGF0ZTpmdW5jdGlvbihiLGUsYSl7aWYoYlthXSl7dmFyIGQ9dGhpcyxjPWQuY3VycmVudExheW91dDtkLmN1cnJlbnRMYXlvdXQ9Yi5sYXlvdXR8fG51bGw7YlthXShlLGIpO2QuY3VycmVudExheW91dD1jfX0scXVldWVBbmltYXRpb246ZnVuY3Rpb24oYSl7dGhpcy5hbmltYXRlUXVldWUuYWRkKGEpfSxxdWV1ZUNvbXBsZXRpb246ZnVuY3Rpb24oYSl7dGhpcy5jb21wbGV0aW9uUXVldWUuYWRkKGEpfSxxdWV1ZUZpbmFsaXplOmZ1bmN0aW9uKGEpe3RoaXMuZmluYWxpemVRdWV1ZS5hZGQoYSl9LHF1ZXVlRmx1c2g6ZnVuY3Rpb24oYSl7dGhpcy5mbHVzaFF1ZXVlLmFkZChhKX0sY2hhaW5GbnM6ZnVuY3Rpb24oYSxpLGcpe3ZhciBkPXRoaXMsYz1hLmxheW91dCxlPWkubGF5b3V0LGI9YVtnXSxoPWlbZ107cmV0dXJuIGZ1bmN0aW9uKGope3ZhciBrPWQuY3VycmVudExheW91dDtpZihiKXtkLmN1cnJlbnRMYXlvdXQ9YztiLmNhbGwoYS5zY29wZXx8YSxqLGEpfWQuY3VycmVudExheW91dD1lO2guY2FsbChpLnNjb3BlfHxpLGosaSk7ZC5jdXJyZW50TGF5b3V0PWt9fSxxdWV1ZUludmFsaWRhdGU6ZnVuY3Rpb24oayxsKXt2YXIgaD10aGlzLGo9W10saT1oLmludmFsaWRRdWV1ZSxnPWkubGVuZ3RoLGQsYixlLGEsYztpZihrLmlzQ29tcG9uZW50KXtrPWguZ2V0Q21wKGQ9ayl9ZWxzZXtkPWsudGFyZ2V0fWsuaW52YWxpZD10cnVlO3doaWxlKGctLSl7Yj1pW2ddO2U9Yi5pdGVtLnRhcmdldDtpZihkLmlzRGVzY2VuZGFudChlKSl7cmV0dXJufWlmKGU9PWQpe2lmKCEoYT1iLm9wdGlvbnMpKXtiLm9wdGlvbnM9bH1lbHNle2lmKGwpe2lmKGwud2lkdGhNb2RlbCl7YS53aWR0aE1vZGVsPWwud2lkdGhNb2RlbH1pZihsLmhlaWdodE1vZGVsKXthLmhlaWdodE1vZGVsPWwuaGVpZ2h0TW9kZWx9aWYoIShjPWEuc3RhdGUpKXthLnN0YXRlPWwuc3RhdGV9ZWxzZXtpZihsLnN0YXRlKXtFeHQuYXBwbHkoYyxsLnN0YXRlKX19aWYobC5iZWZvcmUpe2EuYmVmb3JlPWguY2hhaW5GbnMoYSxsLCJiZWZvcmUiKX1pZihsLmFmdGVyKXthLmFmdGVyPWguY2hhaW5GbnMoYSxsLCJhZnRlciIpfX19cmV0dXJufWlmKCFlLmlzRGVzY2VuZGFudChkKSl7ai5wdXNoKGIpfX1qLnB1c2goe2l0ZW06ayxvcHRpb25zOmx9KTtoLmludmFsaWRRdWV1ZT1qfSxxdWV1ZUl0ZW1MYXlvdXRzOmZ1bmN0aW9uKGMpe3ZhciBhPWMuaXNDb21wb25lbnQ/YzpjLnRhcmdldCxiPWEuY29tcG9uZW50TGF5b3V0O2lmKCFiLnBlbmRpbmcmJiFiLmludmFsaWQmJiFiLmRvbmUpe3RoaXMucXVldWVMYXlvdXQoYil9Yj1hLmxheW91dDtpZihiJiYhYi5wZW5kaW5nJiYhYi5pbnZhbGlkJiYhYi5kb25lKXt0aGlzLnF1ZXVlTGF5b3V0KGIpfX0scXVldWVMYXlvdXQ6ZnVuY3Rpb24oYSl7dGhpcy5sYXlvdXRRdWV1ZS5hZGQoYSk7YS5wZW5kaW5nPXRydWV9LHJlc2V0TGF5b3V0OmZ1bmN0aW9uKGMsZCxlKXt2YXIgYj10aGlzLGE7Yi5jdXJyZW50TGF5b3V0PWM7Yy5kb25lPWZhbHNlO2MucGVuZGluZz10cnVlO2MuZmlyZWRUcmlnZ2Vycz0wO2IubGF5b3V0UXVldWUuYWRkKGMpO2lmKGUpe2IubGF5b3V0c1tjLmlkXT1jO2MucnVubmluZz10cnVlO2lmKGMuZmluaXNoZWRMYXlvdXQpe2IuZmluaXNoUXVldWUuYWRkKGMpfSsrYi5yZW1haW5pbmdMYXlvdXRzOysrYy5sYXlvdXRDb3VudDtjLm93bmVyQ29udGV4dD1kO2MuYmVnaW5Db3VudD0wO2MuYmxvY2tDb3VudD0wO2MuY2FsY0NvdW50PTA7Yy50cmlnZ2VyQ291bnQ9MDtpZihjLmlzQ29tcG9uZW50TGF5b3V0JiYoYT1kLm93bmVyQ3RDb250ZXh0KSl7aWYoZC50YXJnZXQub3duZXJMYXlvdXQuaXNDb21wb25lbnRMYXlvdXQpeysrYS5yZW1haW5pbmdDb21wb25lbnRDaGlsZExheW91dHN9ZWxzZXsrK2EucmVtYWluaW5nQ29udGFpbmVyQ2hpbGRMYXlvdXRzfSsrYS5yZW1haW5pbmdDaGlsZExheW91dHN9aWYoIWMuaW5pdGlhbGl6ZWQpe2MuaW5pdExheW91dCgpfWMuYmVnaW5MYXlvdXQoZCl9ZWxzZXsrK2MuYmVnaW5Db3VudDtpZighYy5ydW5uaW5nKXsrK2IucmVtYWluaW5nTGF5b3V0cztjLnJ1bm5pbmc9dHJ1ZTtpZihjLmlzQ29tcG9uZW50TGF5b3V0KXtkLnVuc2V0UHJvcCgiZG9uZSIpO2E9ZC5vd25lckN0Q29udGV4dDtpZihhKXtpZihkLnRhcmdldC5vd25lckxheW91dC5pc0NvbXBvbmVudExheW91dCl7aWYoKythLnJlbWFpbmluZ0NvbXBvbmVudENoaWxkTGF5b3V0cz09MSl7YS51bnNldFByb3AoImNvbXBvbmVudENoaWxkcmVuRG9uZSIpfX1lbHNle2lmKCsrYS5yZW1haW5pbmdDb250YWluZXJDaGlsZExheW91dHM9PTEpe2EudW5zZXRQcm9wKCJjb250YWluZXJDaGlsZHJlbkRvbmUiKX19aWYoKythLnJlbWFpbmluZ0NoaWxkTGF5b3V0cz09MSl7YS51bnNldFByb3AoImNoaWxkcmVuRG9uZSIpfX19Yi5jb21wbGV0aW9uUXVldWUucmVtb3ZlKGMpO2IuZmluYWxpemVRdWV1ZS5yZW1vdmUoYyl9fWMuYmVnaW5MYXlvdXRDeWNsZShkLGUpfSxydW46ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9ZmFsc2UsYT0xMDA7Yy5mbHVzaEludmFsaWRhdGVzKCk7Yy5zdGF0ZT0xO2MudG90YWxDb3VudD1jLmxheW91dFF1ZXVlLmdldENvdW50KCk7Yy5mbHVzaCgpO3doaWxlKChjLnJlbWFpbmluZ0xheW91dHN8fGMuaW52YWxpZFF1ZXVlLmxlbmd0aCkmJmEtLSl7aWYoYy5pbnZhbGlkUXVldWUubGVuZ3RoKXtjLmZsdXNoSW52YWxpZGF0ZXMoKX1pZihjLnJ1bkN5Y2xlKCkpe2I9ZmFsc2V9ZWxzZXtpZighYil7Yy5mbHVzaCgpO2I9dHJ1ZTtjLmZsdXNoTGF5b3V0cygiY29tcGxldGlvblF1ZXVlIiwiY29tcGxldGVMYXlvdXQiKX1lbHNle2Muc3RhdGU9MjticmVha319aWYoIShjLnJlbWFpbmluZ0xheW91dHN8fGMuaW52YWxpZFF1ZXVlLmxlbmd0aCkpe2MuZmx1c2goKTtjLmZsdXNoTGF5b3V0cygiY29tcGxldGlvblF1ZXVlIiwiY29tcGxldGVMYXlvdXQiKTtjLmZsdXNoTGF5b3V0cygiZmluYWxpemVRdWV1ZSIsImZpbmFsaXplTGF5b3V0Iil9fXJldHVybiBjLnJ1bkNvbXBsZXRlKCl9LHJ1bkNvbXBsZXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLnN0YXRlPTI7aWYoYS5yZW1haW5pbmdMYXlvdXRzKXthLmhhbmRsZUZhaWx1cmUoKTtyZXR1cm4gZmFsc2V9YS5mbHVzaCgpO2EuZmx1c2hMYXlvdXRzKCJmaW5pc2hRdWV1ZSIsImZpbmlzaGVkTGF5b3V0Iix0cnVlKTthLmZsdXNoTGF5b3V0cygiZmluaXNoUXVldWUiLCJub3RpZnlPd25lciIpO2EuZmx1c2goKTthLmZsdXNoQW5pbWF0aW9ucygpO3JldHVybiB0cnVlfSxydW5DeWNsZTpmdW5jdGlvbigpe3ZhciBjPXRoaXMsZD1jLmxheW91dFF1ZXVlLmNsZWFyKCksYj1kLmxlbmd0aCxhOysrYy5jeWNsZUNvdW50O2MucHJvZ3Jlc3NDb3VudD0wO2ZvcihhPTA7YTxiOysrYSl7Yy5ydW5MYXlvdXQoYy5jdXJyZW50TGF5b3V0PWRbYV0pfWMuY3VycmVudExheW91dD1udWxsO3JldHVybiBjLnByb2dyZXNzQ291bnQ+MH0scnVuTGF5b3V0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMsYz1hLmdldENtcChiLm93bmVyKTtiLnBlbmRpbmc9ZmFsc2U7aWYoYy5zdGF0ZS5ibG9ja3Mpe3JldHVybn1iLmRvbmU9dHJ1ZTsrK2IuY2FsY0NvdW50OysrYS5jYWxjQ291bnQ7Yi5jYWxjdWxhdGUoYyk7aWYoYi5kb25lKXthLmxheW91dERvbmUoYik7aWYoYi5jb21wbGV0ZUxheW91dCl7YS5xdWV1ZUNvbXBsZXRpb24oYil9aWYoYi5maW5hbGl6ZUxheW91dCl7YS5xdWV1ZUZpbmFsaXplKGIpfX1lbHNle2lmKCFiLnBlbmRpbmcmJiFiLmludmFsaWQmJiEoYi5ibG9ja0NvdW50K2IudHJpZ2dlckNvdW50LWIuZmlyZWRUcmlnZ2Vycykpe2EucXVldWVMYXlvdXQoYil9fX0sc2V0SXRlbVNpemU6ZnVuY3Rpb24oaCxnLGIpe3ZhciBkPWgsYT0xLGMsZTtpZihoLmlzQ29tcG9zaXRlKXtkPWguZWxlbWVudHM7YT1kLmxlbmd0aDtoPWRbMF19ZWxzZXtpZighaC5kb20mJiFoLmVsKXthPWQubGVuZ3RoO2g9ZFswXX19Zm9yKGU9MDtlPGE7KXtjPXRoaXMuZ2V0KGgpO2Muc2V0U2l6ZShnLGIpO2g9ZFsrK2VdfX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbXBvbmVudC5UYWIiLHtleHRlbmQ6IkV4dC5sYXlvdXQuY29tcG9uZW50LkJ1dHRvbiIsYWxpYXM6ImxheW91dC50YWIiLGJlZ2luTGF5b3V0OmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLm93bmVyLmNsb3NhYmxlO2lmKGIubGFzdENsb3NhYmxlIT09YSl7Yi5sYXN0Q2xvc2FibGU9YTtiLmNsZWFyVGFyZ2V0Q2FjaGUoKX1iLmNhbGxQYXJlbnQoYXJndW1lbnRzKX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbXBvbmVudC5maWVsZC5TbGlkZXIiLHthbGlhczpbImxheW91dC5zbGlkZXJmaWVsZCJdLGV4dGVuZDoiRXh0LmxheW91dC5jb21wb25lbnQuZmllbGQuRmllbGQiLHR5cGU6InNsaWRlcmZpZWxkIixiZWdpbkxheW91dDpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLmVuZEVsQ29udGV4dD1hLmdldEVsKCJlbmRFbCIpO2EuaW5uZXJFbENvbnRleHQ9YS5nZXRFbCgiaW5uZXJFbCIpO2EuYm9keUVsQ29udGV4dD1hLmdldEVsKCJib2R5RWwiKX0scHVibGlzaElubmVySGVpZ2h0OmZ1bmN0aW9uKGQsYSl7dmFyIGU9YS10aGlzLm1lYXN1cmVMYWJlbEVycm9ySGVpZ2h0KGQpLGMsYjtpZih0aGlzLm93bmVyLnZlcnRpY2FsKXtjPWQuZW5kRWxDb250ZXh0LmdldFBhZGRpbmdJbmZvKCk7Yj1kLmlucHV0Q29udGV4dC5nZXRQYWRkaW5nSW5mbygpO2QuaW5uZXJFbENvbnRleHQuc2V0SGVpZ2h0KGUtYi5oZWlnaHQtYy5oZWlnaHQpfWVsc2V7ZC5ib2R5RWxDb250ZXh0LnNldEhlaWdodChlKX19LHB1Ymxpc2hJbm5lcldpZHRoOmZ1bmN0aW9uKGQsYyl7aWYoIXRoaXMub3duZXIudmVydGljYWwpe3ZhciBiPWQuZW5kRWxDb250ZXh0LmdldFBhZGRpbmdJbmZvKCksYT1kLmlucHV0Q29udGV4dC5nZXRQYWRkaW5nSW5mbygpO2QuaW5uZXJFbENvbnRleHQuc2V0V2lkdGgoYy1hLmxlZnQtYi5yaWdodC1kLmxhYmVsQ29udGV4dC5nZXRQcm9wKCJ3aWR0aCIpKX19LGJlZ2luTGF5b3V0Rml4ZWQ6ZnVuY3Rpb24oZCxhLGUpe3ZhciBiPXRoaXMsYz1iLmllSW5wdXRXaWR0aEFkanVzdG1lbnQ7aWYoYyl7Yi5vd25lci5ib2R5RWwuc2V0U3R5bGUoInBhZGRpbmctcmlnaHQiLGMrInB4Iil9Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyl9fSk7RXh0LmRlZmluZSgiRXh0LmxheW91dC5jb250YWluZXIuQWJzb2x1dGUiLHthbGlhczoibGF5b3V0LmFic29sdXRlIixleHRlbmQ6IkV4dC5sYXlvdXQuY29udGFpbmVyLkFuY2hvciIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQubGF5b3V0LkFic29sdXRlTGF5b3V0Iix0YXJnZXRDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImFicy1sYXlvdXQtY3QiLGl0ZW1DbHM6RXh0LmJhc2VDU1NQcmVmaXgrImFicy1sYXlvdXQtaXRlbSIsaWdub3JlT25Db250ZW50Q2hhbmdlOnRydWUsdHlwZToiYWJzb2x1dGUiLGFkanVzdFdpZHRoQW5jaG9yOmZ1bmN0aW9uKGMsYil7dmFyIGQ9dGhpcy50YXJnZXRQYWRkaW5nLGE9Yi5nZXRTdHlsZSgibGVmdCIpO3JldHVybiBjLWErZC5sZWZ0fSxhZGp1c3RIZWlnaHRBbmNob3I6ZnVuY3Rpb24oYixhKXt2YXIgYz10aGlzLnRhcmdldFBhZGRpbmcsZD1hLmdldFN0eWxlKCJ0b3AiKTtyZXR1cm4gYi1kK2MudG9wfSxpc0l0ZW1MYXlvdXRSb290OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlnbm9yZU9uQ29udGVudENoYW5nZXx8dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGlzSXRlbVNocmlua1dyYXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRydWV9LGJlZ2luTGF5b3V0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMsYz1hLmdldFRhcmdldCgpO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGMuZG9tIT09ZG9jdW1lbnQuYm9keSl7Yy5wb3NpdGlvbigpfWEudGFyZ2V0UGFkZGluZz1iLnRhcmdldENvbnRleHQuZ2V0UGFkZGluZ0luZm8oKX0saXNJdGVtQm94UGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybiB0cnVlfSxvbkNvbnRlbnRDaGFuZ2U6ZnVuY3Rpb24oKXtpZih0aGlzLmlnbm9yZU9uQ29udGVudENoYW5nZSl7cmV0dXJuIGZhbHNlfXJldHVybiB0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbnRhaW5lci5BY2NvcmRpb24iLHtleHRlbmQ6IkV4dC5sYXlvdXQuY29udGFpbmVyLlZCb3giLGFsaWFzOlsibGF5b3V0LmFjY29yZGlvbiJdLGFsdGVybmF0ZUNsYXNzTmFtZToiRXh0LmxheW91dC5BY2NvcmRpb25MYXlvdXQiLGl0ZW1DbHM6W0V4dC5iYXNlQ1NTUHJlZml4KyJib3gtaXRlbSIsRXh0LmJhc2VDU1NQcmVmaXgrImFjY29yZGlvbi1pdGVtIl0sYWxpZ246InN0cmV0Y2giLGZpbGw6dHJ1ZSx0aXRsZUNvbGxhcHNlOnRydWUsaGlkZUNvbGxhcHNlVG9vbDpmYWxzZSxjb2xsYXBzZUZpcnN0OmZhbHNlLGFuaW1hdGU6dHJ1ZSxhY3RpdmVPblRvcDpmYWxzZSxtdWx0aTpmYWxzZSxkZWZhdWx0QW5pbWF0ZVBvbGljeTp7eTp0cnVlLGhlaWdodDp0cnVlfSxjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYS5hbmltYXRlKXthLmFuaW1hdGVQb2xpY3k9RXh0LmFwcGx5KHt9LGEuZGVmYXVsdEFuaW1hdGVQb2xpY3kpfWVsc2V7YS5hbmltYXRlUG9saWN5PW51bGx9fSxiZWZvcmVSZW5kZXJJdGVtczpmdW5jdGlvbihiKXt2YXIgZT10aGlzLGQ9Yi5sZW5ndGgsYz0wLGE7Zm9yKDtjPGQ7YysrKXthPWJbY107aWYoIWEucmVuZGVyZWQpe2lmKGUuY29sbGFwc2VGaXJzdCl7YS5jb2xsYXBzZUZpcnN0PWUuY29sbGFwc2VGaXJzdH1pZihlLmhpZGVDb2xsYXBzZVRvb2wpe2EuaGlkZUNvbGxhcHNlVG9vbD1lLmhpZGVDb2xsYXBzZVRvb2w7YS50aXRsZUNvbGxhcHNlPXRydWV9ZWxzZXtpZihlLnRpdGxlQ29sbGFwc2Upe2EudGl0bGVDb2xsYXBzZT1lLnRpdGxlQ29sbGFwc2V9fWRlbGV0ZSBhLmhpZGVIZWFkZXI7ZGVsZXRlIGEud2lkdGg7YS5jb2xsYXBzaWJsZT10cnVlO2EudGl0bGU9YS50aXRsZXx8IiYjMTYwOyI7YS5hZGRCb2R5Q2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJhY2NvcmRpb24tYm9keSIpO2lmKCFlLm11bHRpKXtpZihlLmV4cGFuZGVkSXRlbSE9PXVuZGVmaW5lZCl7YS5jb2xsYXBzZWQ9dHJ1ZX1lbHNle2lmKGEuaGFzT3duUHJvcGVydHkoImNvbGxhcHNlZCIpJiZhLmNvbGxhcHNlZD09PWZhbHNlKXtlLmV4cGFuZGVkSXRlbT1jfWVsc2V7YS5jb2xsYXBzZWQ9dHJ1ZX19ZS5vd25lci5tb24oYSx7c2hvdzplLm9uQ29tcG9uZW50U2hvdyxiZWZvcmVleHBhbmQ6ZS5vbkNvbXBvbmVudEV4cGFuZCxzY29wZTplfSl9aWYoZS5maWxsKXtlLm93bmVyLm1vbihhLHtiZWZvcmVjb2xsYXBzZTplLm9uQ29tcG9uZW50Q29sbGFwc2Usc2NvcGU6ZX0pfX19aWYoZCYmZS5leHBhbmRlZEl0ZW09PT11bmRlZmluZWQpe2UuZXhwYW5kZWRJdGVtPTA7YlswXS5jb2xsYXBzZWQ9ZmFsc2V9fSxnZXRJdGVtc1JlbmRlclRyZWU6ZnVuY3Rpb24oYSl7dGhpcy5iZWZvcmVSZW5kZXJJdGVtcyhhKTtyZXR1cm4gdGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LHJlbmRlckl0ZW1zOmZ1bmN0aW9uKGEsYil7dGhpcy5iZWZvcmVSZW5kZXJJdGVtcyhhKTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sY29uZmlndXJlSXRlbTpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTthLmFuaW1Db2xsYXBzZT1hLmJvcmRlcj1mYWxzZTtpZih0aGlzLmZpbGwpe2EuZmxleD0xfX0sb25DaGlsZFBhbmVsUmVuZGVyOmZ1bmN0aW9uKGEpe2EuaGVhZGVyLmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsiYWNjb3JkaW9uLWhkIil9LGJlZ2luTGF5b3V0OmZ1bmN0aW9uKGEpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3RoaXMudXBkYXRlUGFuZWxDbGFzc2VzKGEpfSx1cGRhdGVQYW5lbENsYXNzZXM6ZnVuY3Rpb24oZSl7dmFyIGM9ZS52aXNpYmxlSXRlbXMsZD1jLmxlbmd0aCxhPXRydWUsYixoLGc7Zm9yKGI9MDtiPGQ7YisrKXtoPWNbYl07Zz1oLmhlYWRlcjtnLmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsiYWNjb3JkaW9uLWhkIik7aWYoYSl7Zy5yZW1vdmVDbHMoRXh0LmJhc2VDU1NQcmVmaXgrImFjY29yZGlvbi1oZC1zaWJsaW5nLWV4cGFuZGVkIil9ZWxzZXtnLmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsiYWNjb3JkaW9uLWhkLXNpYmxpbmctZXhwYW5kZWQiKX1pZihiKzE9PWQmJmguY29sbGFwc2VkKXtnLmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsiYWNjb3JkaW9uLWhkLWxhc3QtY29sbGFwc2VkIil9ZWxzZXtnLnJlbW92ZUNscyhFeHQuYmFzZUNTU1ByZWZpeCsiYWNjb3JkaW9uLWhkLWxhc3QtY29sbGFwc2VkIil9YT1oLmNvbGxhcHNlZH19LG9uQ29tcG9uZW50RXhwYW5kOmZ1bmN0aW9uKGgpe3ZhciBlPXRoaXMsYT1lLm93bmVyLGMsZyxkLGI7aWYoIWUucHJvY2Vzc2luZyl7ZS5wcm9jZXNzaW5nPXRydWU7Yj1hLmRlZmVyTGF5b3V0czthLmRlZmVyTGF5b3V0cz10cnVlO2M9ZS5tdWx0aT9bXTphLnF1ZXJ5KCI+cGFuZWw6bm90KFtjb2xsYXBzZWRdKSIpO2c9Yy5sZW5ndGg7Zm9yKGQ9MDtkPGc7ZCsrKXtjW2RdLmNvbGxhcHNlKCl9YS5kZWZlckxheW91dHM9YjtlLnByb2Nlc3Npbmc9ZmFsc2V9fSxvbkNvbXBvbmVudENvbGxhcHNlOmZ1bmN0aW9uKGQpe3ZhciBlPXRoaXMsYT1lLm93bmVyLGcsYyxiO2lmKGUub3duZXIuaXRlbXMuZ2V0Q291bnQoKT09PTEpe3JldHVybiBmYWxzZX1pZighZS5wcm9jZXNzaW5nKXtlLnByb2Nlc3Npbmc9dHJ1ZTtiPWEuZGVmZXJMYXlvdXRzO2EuZGVmZXJMYXlvdXRzPXRydWU7Zz1kLm5leHQoKXx8ZC5wcmV2KCk7aWYoZS5tdWx0aSl7Yz1lLm93bmVyLnF1ZXJ5KCI+cGFuZWw6bm90KFtjb2xsYXBzZWRdKSIpO2lmKGMubGVuZ3RoPT09MSl7Zy5leHBhbmQoKX19ZWxzZXtpZihnKXtnLmV4cGFuZCgpfX1hLmRlZmVyTGF5b3V0cz1iO2UucHJvY2Vzc2luZz1mYWxzZX19LG9uQ29tcG9uZW50U2hvdzpmdW5jdGlvbihhKXt0aGlzLm9uQ29tcG9uZW50RXhwYW5kKGEpfX0pO0V4dC5kZWZpbmUoIkV4dC5yZXNpemVyLlNwbGl0dGVyIix7ZXh0ZW5kOiJFeHQuQ29tcG9uZW50IixyZXF1aXJlczpbIkV4dC5YVGVtcGxhdGUiXSx1c2VzOlsiRXh0LnJlc2l6ZXIuU3BsaXR0ZXJUcmFja2VyIl0sYWxpYXM6IndpZGdldC5zcGxpdHRlciIsY2hpbGRFbHM6WyJjb2xsYXBzZUVsIl0scmVuZGVyVHBsOlsnPHRwbCBpZj0iY29sbGFwc2libGU9PT10cnVlIj4nLCc8ZGl2IGlkPSJ7aWR9LWNvbGxhcHNlRWwiIGNsYXNzPSInLEV4dC5iYXNlQ1NTUHJlZml4LCJjb2xsYXBzZS1lbCAiLEV4dC5iYXNlQ1NTUHJlZml4LCdsYXlvdXQtc3BsaXQte2NvbGxhcHNlRGlyfSI+JiMxNjA7PC9kaXY+JywiPC90cGw+Il0sYmFzZUNsczpFeHQuYmFzZUNTU1ByZWZpeCsic3BsaXR0ZXIiLGNvbGxhcHNlZENsc0ludGVybmFsOkV4dC5iYXNlQ1NTUHJlZml4KyJzcGxpdHRlci1jb2xsYXBzZWQiLGNhblJlc2l6ZTp0cnVlLGNvbGxhcHNpYmxlOmZhbHNlLGNvbGxhcHNlT25EYmxDbGljazp0cnVlLGRlZmF1bHRTcGxpdE1pbjo0MCxkZWZhdWx0U3BsaXRNYXg6MTAwMCxjb2xsYXBzZVRhcmdldDoibmV4dCIsaG9yaXpvbnRhbDpmYWxzZSx2ZXJ0aWNhbDpmYWxzZSxnZXRUcmFja2VyQ29uZmlnOmZ1bmN0aW9uKCl7cmV0dXJue3hjbGFzczoiRXh0LnJlc2l6ZXIuU3BsaXR0ZXJUcmFja2VyIixlbDp0aGlzLmVsLHNwbGl0dGVyOnRoaXN9fSxiZWZvcmVSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGU9ZC5nZXRDb2xsYXBzZVRhcmdldCgpLGc9ZC5nZXRDb2xsYXBzZURpcmVjdGlvbigpLGM9ZC52ZXJ0aWNhbCxiPWM/IndpZHRoIjoiaGVpZ2h0IixoPWM/ImhlaWdodCI6IndpZHRoIixhO2QuY2FsbFBhcmVudCgpO2lmKCFkLmhhc093blByb3BlcnR5KGgpKXtkW2hdPSIxMDAlIn1pZighZC5oYXNPd25Qcm9wZXJ0eShiKSl7ZFtiXT01fWlmKGUuY29sbGFwc2VkKXtkLmFkZENscyhkLmNvbGxhcHNlZENsc0ludGVybmFsKX1hPWQuYmFzZUNscysiLSIrZC5vcmllbnRhdGlvbjtkLmFkZENscyhhKTtpZighZC5jYW5SZXNpemUpe2QuYWRkQ2xzKGErIi1ub3Jlc2l6ZSIpfUV4dC5hcHBseUlmKGQucmVuZGVyRGF0YSx7Y29sbGFwc2VEaXI6Zyxjb2xsYXBzaWJsZTpkLmNvbGxhcHNpYmxlfHxlLmNvbGxhcHNpYmxlfSl9LG9uUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihhLnBlcmZvcm1Db2xsYXBzZSE9PWZhbHNlKXtpZihhLnJlbmRlckRhdGEuY29sbGFwc2libGUpe2EubW9uKGEuY29sbGFwc2VFbCwiY2xpY2siLGEudG9nZ2xlVGFyZ2V0Q21wLGEpfWlmKGEuY29sbGFwc2VPbkRibENsaWNrKXthLm1vbihhLmVsLCJkYmxjbGljayIsYS50b2dnbGVUYXJnZXRDbXAsYSl9fWEubW9uKGEuZ2V0Q29sbGFwc2VUYXJnZXQoKSx7Y29sbGFwc2U6YS5vblRhcmdldENvbGxhcHNlLGV4cGFuZDphLm9uVGFyZ2V0RXhwYW5kLHNjb3BlOmF9KTthLmVsLnVuc2VsZWN0YWJsZSgpO2lmKGEuY2FuUmVzaXplKXthLnRyYWNrZXI9RXh0LmNyZWF0ZShhLmdldFRyYWNrZXJDb25maWcoKSk7YS5yZWxheUV2ZW50cyhhLnRyYWNrZXIsWyJiZWZvcmVkcmFnc3RhcnQiLCJkcmFnc3RhcnQiLCJkcmFnZW5kIl0pfX0sZ2V0Q29sbGFwc2VEaXJlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZz10aGlzLGM9Zy5jb2xsYXBzZURpcmVjdGlvbixlLGEsYixkO2lmKCFjKXtlPWcuY29sbGFwc2VUYXJnZXQ7aWYoZS5pc0NvbXBvbmVudCl7Yz1lLmNvbGxhcHNlRGlyZWN0aW9ufWlmKCFjKXtkPWcub3duZXJDdC5sYXlvdXQudHlwZTtpZihlLmlzQ29tcG9uZW50KXtiPWcub3duZXJDdC5pdGVtczthPU51bWJlcihiLmluZGV4T2YoZSk9PWIuaW5kZXhPZihnKS0xKTw8MXxOdW1iZXIoZD09Imhib3giKX1lbHNle2E9TnVtYmVyKGcuY29sbGFwc2VUYXJnZXQ9PSJwcmV2Iik8PDF8TnVtYmVyKGQ9PSJoYm94Iil9Yz1bImJvdHRvbSIsInJpZ2h0IiwidG9wIiwibGVmdCJdW2FdfWcuY29sbGFwc2VEaXJlY3Rpb249Y31nLm9yaWVudGF0aW9uPShjPT0idG9wInx8Yz09ImJvdHRvbSIpPyJob3Jpem9udGFsIjoidmVydGljYWwiO2dbZy5vcmllbnRhdGlvbl09dHJ1ZTtyZXR1cm4gY30sZ2V0Q29sbGFwc2VUYXJnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiBhLmNvbGxhcHNlVGFyZ2V0LmlzQ29tcG9uZW50P2EuY29sbGFwc2VUYXJnZXQ6YS5jb2xsYXBzZVRhcmdldD09InByZXYiP2EucHJldmlvdXNTaWJsaW5nKCk6YS5uZXh0U2libGluZygpfSxvblRhcmdldENvbGxhcHNlOmZ1bmN0aW9uKGEpe3RoaXMuZWwuYWRkQ2xzKFt0aGlzLmNvbGxhcHNlZENsc0ludGVybmFsLHRoaXMuY29sbGFwc2VkQ2xzXSl9LG9uVGFyZ2V0RXhwYW5kOmZ1bmN0aW9uKGEpe3RoaXMuZWwucmVtb3ZlQ2xzKFt0aGlzLmNvbGxhcHNlZENsc0ludGVybmFsLHRoaXMuY29sbGFwc2VkQ2xzXSl9LHRvZ2dsZVRhcmdldENtcDpmdW5jdGlvbihkLGIpe3ZhciBjPXRoaXMuZ2V0Q29sbGFwc2VUYXJnZXQoKSxnPWMucGxhY2Vob2xkZXIsYTtpZihnJiYhZy5oaWRkZW4pe2E9dHJ1ZX1lbHNle2E9IWMuaGlkZGVufWlmKGEpe2lmKGMuY29sbGFwc2VkKXtjLmV4cGFuZCgpfWVsc2V7aWYoYy5jb2xsYXBzZURpcmVjdGlvbil7Yy5jb2xsYXBzZSgpfWVsc2V7Yy5jb2xsYXBzZSh0aGlzLnJlbmRlckRhdGEuY29sbGFwc2VEaXIpfX19fSxzZXRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihFeHQuaXNJRSYmYS5lbCl7YS5lbC5yZXBhaW50KCl9fSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy50cmFja2VyKTt0aGlzLmNhbGxQYXJlbnQoKX19KTtFeHQuZGVmaW5lKCJFeHQucmVzaXplci5Cb3JkZXJTcGxpdHRlciIse2V4dGVuZDoiRXh0LnJlc2l6ZXIuU3BsaXR0ZXIiLHVzZXM6WyJFeHQucmVzaXplci5Cb3JkZXJTcGxpdHRlclRyYWNrZXIiXSxhbGlhczoid2lkZ2V0LmJvcmRlcnNwbGl0dGVyIixjb2xsYXBzZVRhcmdldDpudWxsLGdldFRyYWNrZXJDb25maWc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNhbGxQYXJlbnQoKTthLnhjbGFzcz0iRXh0LnJlc2l6ZXIuQm9yZGVyU3BsaXR0ZXJUcmFja2VyIjtyZXR1cm4gYX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbnRhaW5lci5Cb3JkZXIiLHthbGlhczoibGF5b3V0LmJvcmRlciIsZXh0ZW5kOiJFeHQubGF5b3V0LmNvbnRhaW5lci5Db250YWluZXIiLHJlcXVpcmVzOlsiRXh0LnJlc2l6ZXIuQm9yZGVyU3BsaXR0ZXIiLCJFeHQuQ29tcG9uZW50IiwiRXh0LmZ4LkFuaW0iXSxhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5sYXlvdXQuQm9yZGVyTGF5b3V0Iix0YXJnZXRDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImJvcmRlci1sYXlvdXQtY3QiLGl0ZW1DbHM6W0V4dC5iYXNlQ1NTUHJlZml4KyJib3JkZXItaXRlbSIsRXh0LmJhc2VDU1NQcmVmaXgrImJveC1pdGVtIl0sdHlwZToiYm9yZGVyIixwYWRkaW5nOnVuZGVmaW5lZCxwZXJjZW50YWdlUmU6LyhcZCspJS8sYXhpc1Byb3BzOntob3J6Ontib3JkZXJCZWdpbjoid2VzdCIsYm9yZGVyRW5kOiJlYXN0Iixob3Jpem9udGFsOnRydWUscG9zUHJvcDoieCIsc2l6ZVByb3A6IndpZHRoIixzaXplUHJvcENhcDoiV2lkdGgifSx2ZXJ0Ontib3JkZXJCZWdpbjoibm9ydGgiLGJvcmRlckVuZDoic291dGgiLGhvcml6b250YWw6ZmFsc2UscG9zUHJvcDoieSIsc2l6ZVByb3A6ImhlaWdodCIsc2l6ZVByb3BDYXA6IkhlaWdodCJ9fSxjZW50ZXJSZWdpb246bnVsbCxjb2xsYXBzZURpcmVjdGlvbnM6e25vcnRoOiJ0b3AiLHNvdXRoOiJib3R0b20iLGVhc3Q6InJpZ2h0Iix3ZXN0OiJsZWZ0In0sbWFuYWdlTWFyZ2luczp0cnVlLHBhbmVsQ29sbGFwc2VBbmltYXRlOnRydWUscGFuZWxDb2xsYXBzZU1vZGU6InBsYWNlaG9sZGVyIixyZWdpb25XZWlnaHRzOntub3J0aDoyMCxzb3V0aDoxMCxjZW50ZXI6MCx3ZXN0Oi0xMCxlYXN0Oi0yMH0sYmVnaW5BeGlzOmZ1bmN0aW9uKG0sYix3KXt2YXIgdT10aGlzLGM9dS5heGlzUHJvcHNbd10scj0hYy5ob3Jpem9udGFsLGw9Yy5zaXplUHJvcCxwPTAsYT1tLmNoaWxkSXRlbXMsZz1hLmxlbmd0aCx0LHEsbyxoLHMsZSxrLG4sZCx2LGo7Zm9yKHE9MDtxPGc7KytxKXtvPWFbcV07cz1vLnRhcmdldDtvLmxheW91dFBvcz17fTtpZihzLnJlZ2lvbil7by5yZWdpb249ZT1zLnJlZ2lvbjtvLmlzQ2VudGVyPXMuaXNDZW50ZXI7by5pc0hvcno9cy5pc0hvcno7by5pc1ZlcnQ9cy5pc1ZlcnQ7by53ZWlnaHQ9cy53ZWlnaHR8fHUucmVnaW9uV2VpZ2h0c1tlXXx8MDtiW3MuaWRdPW87aWYocy5pc0NlbnRlcil7dD1vO2g9cy5mbGV4O20uY2VudGVyUmVnaW9uPXQ7Y29udGludWV9aWYociE9PW8uaXNWZXJ0KXtjb250aW51ZX1vLnJldmVyc2VXZWlnaHRpbmc9KGU9PWMuYm9yZGVyRW5kKTtuPXNbbF07ZD10eXBlb2YgbjtpZighcy5jb2xsYXBzZWQpe2lmKGQ9PSJzdHJpbmciJiYoaz11LnBlcmNlbnRhZ2VSZS5leGVjKG4pKSl7by5wZXJjZW50YWdlPXBhcnNlSW50KGtbMV0sMTApfWVsc2V7aWYocy5mbGV4KXtwKz1vLmZsZXg9cy5mbGV4fX19fX1pZih0KXt2PXQudGFyZ2V0O2lmKGo9di5wbGFjZWhvbGRlckZvcil7aWYoIWgmJnI9PT1qLmNvbGxhcHNlZFZlcnRpY2FsKCkpe2g9MDt0LmNvbGxhcHNlQXhpcz13fX1lbHNle2lmKHYuY29sbGFwc2VkJiYocj09PXYuY29sbGFwc2VkVmVydGljYWwoKSkpe2g9MDt0LmNvbGxhcHNlQXhpcz13fX19aWYoaD09bnVsbCl7aD0xfXArPWg7cmV0dXJuIEV4dC5hcHBseSh7YmVmb3JlOnI/InRvcCI6ImxlZnQiLHRvdGFsRmxleDpwfSxjKX0sYmVnaW5MYXlvdXQ6ZnVuY3Rpb24oZCl7dmFyIGw9dGhpcyxrPWwuZ2V0TGF5b3V0SXRlbXMoKSxlPWwucGFkZGluZyxtPXR5cGVvZiBlLHA9ZmFsc2UscSxvLGIsaCxnLGEsYyxqLG47aWYoZSl7aWYobT09InN0cmluZyJ8fG09PSJudW1iZXIiKXtlPUV4dC51dGlsLkZvcm1hdC5wYXJzZUJveChlKX19ZWxzZXtlPWQuZ2V0RWwoImdldFRhcmdldEVsIikuZ2V0UGFkZGluZ0luZm8oKTtwPXRydWV9ZC5vdXRlclBhZD1lO2QucGFkT25Db250YWluZXI9cDtmb3IoaD0wLGI9ay5sZW5ndGg7aDxiOysraCl7bz1rW2hdO2E9bC5nZXRTcGxpdHRlclRhcmdldChvKTtpZihhKXtqPSEhby5oaWRkZW47aWYoIWEuc3BsaXQpe2lmKGEuaXNDb2xsYXBzaW5nT3JFeHBhbmRpbmcpe2M9ISFhLmNvbGxhcHNlZH19ZWxzZXtpZihqIT09YS5oaWRkZW4pe2M9IWEuaGlkZGVufX1pZihjPT09dHJ1ZSl7by5zaG93KCl9ZWxzZXtpZihjPT09ZmFsc2Upe28uaGlkZSgpfX19fWwuY2FsbFBhcmVudChhcmd1bWVudHMpO2s9ZC5jaGlsZEl0ZW1zO2I9ay5sZW5ndGg7Zz17fTtkLmJvcmRlckF4aXNIb3J6PWwuYmVnaW5BeGlzKGQsZywiaG9yeiIpO2QuYm9yZGVyQXhpc1ZlcnQ9bC5iZWdpbkF4aXMoZCxnLCJ2ZXJ0Iik7Zm9yKGg9MDtoPGI7KytoKXtxPWtbaF07YT1sLmdldFNwbGl0dGVyVGFyZ2V0KHEudGFyZ2V0KTtpZihhKXtuPWdbYS5pZF07aWYoIW4pe249ZC5nZXRFbChhLmVsLGwpO24ucmVnaW9uPWEucmVnaW9ufXEuY29sbGFwc2VUYXJnZXQ9YT1uO3Eud2VpZ2h0PWEud2VpZ2h0O3EucmV2ZXJzZVdlaWdodGluZz1hLnJldmVyc2VXZWlnaHRpbmc7YS5zcGxpdHRlcj1xO3EuaXNIb3J6PWEuaXNIb3J6O3EuaXNWZXJ0PWEuaXNWZXJ0fX1sLnNvcnRXZWlnaHRlZEl0ZW1zKGssInJldmVyc2VXZWlnaHRpbmciKTtsLnNldHVwU3BsaXR0ZXJOZWlnaGJvcnMoayl9LGNhbGN1bGF0ZTpmdW5jdGlvbihkKXt2YXIgbT10aGlzLGE9bS5nZXRDb250YWluZXJTaXplKGQpLGo9ZC5jaGlsZEl0ZW1zLGM9ai5sZW5ndGgsYj1kLmJvcmRlckF4aXNIb3J6LGs9ZC5ib3JkZXJBeGlzVmVydCxlPWQub3V0ZXJQYWQsbz1kLnBhZE9uQ29udGFpbmVyLGgscSxsLHAsbixnO2IuYmVnaW49ZS5sZWZ0O2suYmVnaW49ZS50b3A7bj1iLmVuZD1iLmZsZXhTcGFjZT1hLndpZHRoKyhvP2UubGVmdDotZS5yaWdodCk7Zz1rLmVuZD1rLmZsZXhTcGFjZT1hLmhlaWdodCsobz9lLnRvcDotZS5ib3R0b20pO2ZvcihoPTA7aDxjOysraCl7cT1qW2hdO2w9cS5nZXRNYXJnaW5JbmZvKCk7aWYocS5pc0hvcnp8fHEuaXNDZW50ZXIpe2IuYWRkVW5mbGV4ZWQobC53aWR0aCk7bi09bC53aWR0aH1pZihxLmlzVmVydHx8cS5pc0NlbnRlcil7ay5hZGRVbmZsZXhlZChsLmhlaWdodCk7Zy09bC5oZWlnaHR9aWYoIXEuZmxleCYmIXEucGVyY2VudGFnZSl7aWYocS5pc0hvcnp8fChxLmlzQ2VudGVyJiZxLmNvbGxhcHNlQXhpcz09PSJob3J6Iikpe3A9cS5nZXRQcm9wKCJ3aWR0aCIpO2IuYWRkVW5mbGV4ZWQocCk7aWYocS5jb2xsYXBzZVRhcmdldCl7bi09cH19ZWxzZXtpZihxLmlzVmVydHx8KHEuaXNDZW50ZXImJnEuY29sbGFwc2VBeGlzPT09InZlcnQiKSl7cD1xLmdldFByb3AoImhlaWdodCIpO2suYWRkVW5mbGV4ZWQocCk7aWYocS5jb2xsYXBzZVRhcmdldCl7Zy09cH19fX19Zm9yKGg9MDtoPGM7KytoKXtxPWpbaF07bD1xLmdldE1hcmdpbkluZm8oKTtpZihxLnBlcmNlbnRhZ2Upe2lmKHEuaXNIb3J6KXtwPU1hdGguY2VpbChuKnEucGVyY2VudGFnZS8xMDApO3A9cS5zZXRXaWR0aChwKTtiLmFkZFVuZmxleGVkKHApfWVsc2V7aWYocS5pc1ZlcnQpe3A9TWF0aC5jZWlsKGcqcS5wZXJjZW50YWdlLzEwMCk7cD1xLnNldEhlaWdodChwKTtrLmFkZFVuZmxleGVkKHApfX19fWZvcihoPTA7aDxjOysraCl7cT1qW2hdO2lmKCFxLmlzQ2VudGVyKXttLmNhbGN1bGF0ZUNoaWxkQXhpcyhxLGIpO20uY2FsY3VsYXRlQ2hpbGRBeGlzKHEsayl9fWlmKG0uZmluaXNoQXhpcyhkLGspK20uZmluaXNoQXhpcyhkLGIpPDIpe20uZG9uZT1mYWxzZX1lbHNle20uZmluaXNoUG9zaXRpb25zKGopfX0sY2FsY3VsYXRlQ2hpbGRBeGlzOmZ1bmN0aW9uKGwsYyl7dmFyIGE9bC5jb2xsYXBzZVRhcmdldCxoPSJzZXQiK2Muc2l6ZVByb3BDYXAsZT1jLnNpemVQcm9wLGQ9bC5nZXRNYXJnaW5JbmZvKClbZV0saixiLGcsaSxrO2lmKGEpe2o9YS5yZWdpb259ZWxzZXtqPWwucmVnaW9uO2c9bC5mbGV4fWI9aj09Yy5ib3JkZXJCZWdpbjtpZighYiYmaiE9Yy5ib3JkZXJFbmQpe2xbaF0oYy5lbmQtYy5iZWdpbi1kKTtpPWMuYmVnaW59ZWxzZXtpZihnKXtrPU1hdGguY2VpbChjLmZsZXhTcGFjZSooZy9jLnRvdGFsRmxleCkpO2s9bFtoXShrKX1lbHNle2lmKGwucGVyY2VudGFnZSl7az1sLnBlZWsoZSl9ZWxzZXtrPWwuZ2V0UHJvcChlKX19ays9ZDtpZihiKXtpPWMuYmVnaW47Yy5iZWdpbis9a31lbHNle2MuZW5kPWk9Yy5lbmQta319bC5sYXlvdXRQb3NbYy5wb3NQcm9wXT1pfSxmaW5pc2hBeGlzOmZ1bmN0aW9uKGQsYyl7dmFyIGI9Yy5lbmQtYy5iZWdpbixhPWQuY2VudGVyUmVnaW9uO2lmKGEpe2FbInNldCIrYy5zaXplUHJvcENhcF0oYi1hLmdldE1hcmdpbkluZm8oKVtjLnNpemVQcm9wXSk7YS5sYXlvdXRQb3NbYy5wb3NQcm9wXT1jLmJlZ2lufXJldHVybiBFeHQuaXNOdW1iZXIoYik/MTowfSxmaW5pc2hQb3NpdGlvbnM6ZnVuY3Rpb24oZCl7dmFyIGM9ZC5sZW5ndGgsYixhO2ZvcihiPTA7YjxjOysrYil7YT1kW2JdO2Euc2V0UHJvcCgieCIsYS5sYXlvdXRQb3MueCthLm1hcmdpbkluZm8ubGVmdCk7YS5zZXRQcm9wKCJ5IixhLmxheW91dFBvcy55K2EubWFyZ2luSW5mby50b3ApfX0sZ2V0UGxhY2Vob2xkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0UGxhY2Vob2xkZXImJmEuZ2V0UGxhY2Vob2xkZXIoKX0sZ2V0U3BsaXR0ZXJUYXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGE9Yi5jb2xsYXBzZVRhcmdldDtpZihhJiZhLmNvbGxhcHNlZCl7cmV0dXJuIGEucGxhY2Vob2xkZXJ8fGF9cmV0dXJuIGF9LGlzSXRlbUJveFBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4gdHJ1ZX0saXNJdGVtU2hyaW5rV3JhcDpmdW5jdGlvbihhKXtyZXR1cm4gdHJ1ZX0saW5zZXJ0U3BsaXR0ZXI6ZnVuY3Rpb24oYyxiLGUpe3ZhciBnPWMucmVnaW9uLGQ9e3h0eXBlOiJib3JkZXJzcGxpdHRlciIsY29sbGFwc2VUYXJnZXQ6YyxpZDpjLmlkKyItc3BsaXR0ZXIiLGhpZGRlbjplLGNhblJlc2l6ZTpjLnNwbGl0dGVyUmVzaXplIT09ZmFsc2V9LGE9YisoKGc9PSJzb3V0aCJ8fGc9PSJlYXN0Iik/MDoxKTtpZihjLmlzSG9yeil7ZC5oZWlnaHQ9bnVsbH1lbHNle2Qud2lkdGg9bnVsbH1pZihjLmNvbGxhcHNlTW9kZT09Im1pbmkiKXtkLmNvbGxhcHNlZENscz1jLmNvbGxhcHNlZENsc31jLnNwbGl0dGVyPXRoaXMub3duZXIuYWRkKGEsZCl9LG9uQWRkOmZ1bmN0aW9uKGQsYSl7dmFyIGM9dGhpcyxoPWQucGxhY2Vob2xkZXJGb3IsZz1kLnJlZ2lvbixiLGU7Yy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoZyl7RXh0LmFwcGx5KGQsYy5yZWdpb25GbGFnc1tnXSk7aWYoZz09ImNlbnRlciIpe2MuY2VudGVyUmVnaW9uPWR9ZWxzZXtkLmNvbGxhcHNlRGlyZWN0aW9uPXRoaXMuY29sbGFwc2VEaXJlY3Rpb25zW2ddO2I9ZC5zcGxpdDtlPSEhZC5oaWRkZW47aWYoKGQuaXNIb3J6fHxkLmlzVmVydCkmJihifHxkLmNvbGxhcHNlTW9kZT09Im1pbmkiKSl7Yy5pbnNlcnRTcGxpdHRlcihkLGEsZXx8IWIpfX1pZighZC5oYXNPd25Qcm9wZXJ0eSgiY29sbGFwc2VNb2RlIikpe2QuY29sbGFwc2VNb2RlPWMucGFuZWxDb2xsYXBzZU1vZGV9aWYoIWQuaGFzT3duUHJvcGVydHkoImFuaW1Db2xsYXBzZSIpKXtpZihkLmNvbGxhcHNlTW9kZSE9InBsYWNlaG9sZGVyIil7ZC5hbmltQ29sbGFwc2U9ZmFsc2V9ZWxzZXtkLmFuaW1Db2xsYXBzZT1jLnBhbmVsQ29sbGFwc2VBbmltYXRlfX19ZWxzZXtpZihoKXtFeHQuYXBwbHkoZCxjLnJlZ2lvbkZsYWdzW2gucmVnaW9uXSk7ZC5yZWdpb249aC5yZWdpb247ZC53ZWlnaHQ9aC53ZWlnaHR9fX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jZW50ZXJSZWdpb249bnVsbDt0aGlzLmNhbGxQYXJlbnQoKX0sb25SZW1vdmU6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcyxkPWIucmVnaW9uLGM9Yi5zcGxpdHRlcjtpZihkKXtpZihiLmlzQ2VudGVyKXthLmNlbnRlclJlZ2lvbj1udWxsfWRlbGV0ZSBiLmlzQ2VudGVyO2RlbGV0ZSBiLmlzSG9yejtkZWxldGUgYi5pc1ZlcnQ7aWYoYyl7YS5vd25lci5kb1JlbW92ZShjLHRydWUpO2RlbGV0ZSBiLnNwbGl0dGVyfX1hLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0scmVnaW9uRmxhZ3M6e2NlbnRlcjp7aXNDZW50ZXI6dHJ1ZSxpc0hvcno6ZmFsc2UsaXNWZXJ0OmZhbHNlfSxub3J0aDp7aXNDZW50ZXI6ZmFsc2UsaXNIb3J6OmZhbHNlLGlzVmVydDp0cnVlfSxzb3V0aDp7aXNDZW50ZXI6ZmFsc2UsaXNIb3J6OmZhbHNlLGlzVmVydDp0cnVlfSx3ZXN0Ontpc0NlbnRlcjpmYWxzZSxpc0hvcno6dHJ1ZSxpc1ZlcnQ6ZmFsc2V9LGVhc3Q6e2lzQ2VudGVyOmZhbHNlLGlzSG9yejp0cnVlLGlzVmVydDpmYWxzZX19LHNldHVwU3BsaXR0ZXJOZWlnaGJvcnM6ZnVuY3Rpb24obSl7dmFyIHA9e30sZT1tLmxlbmd0aCxvPXRoaXMudG91Y2hlZFJlZ2lvbnMsaCxnLGEsbCxkLGssbixiLGM7Zm9yKGg9MDtoPGU7KytoKXtrPW1baF0udGFyZ2V0O249ay5yZWdpb247aWYoay5pc0NlbnRlcil7YT1rfWVsc2V7aWYobil7Yz1vW25dO2ZvcihnPTAsbD1jLmxlbmd0aDtnPGw7KytnKXtkPXBbY1tnXV07aWYoZCl7ZC5uZWlnaGJvcnMucHVzaChrKX19aWYoay5wbGFjZWhvbGRlckZvcil7Yj1rLnBsYWNlaG9sZGVyRm9yLnNwbGl0dGVyfWVsc2V7Yj1rLnNwbGl0dGVyfWlmKGIpe2IubmVpZ2hib3JzPVtdfXBbbl09Yn19fWlmKGEpe2M9by5jZW50ZXI7Zm9yKGc9MCxsPWMubGVuZ3RoO2c8bDsrK2cpe2Q9cFtjW2ddXTtpZihkKXtkLm5laWdoYm9ycy5wdXNoKGEpfX19fSx0b3VjaGVkUmVnaW9uczp7Y2VudGVyOlsibm9ydGgiLCJzb3V0aCIsImVhc3QiLCJ3ZXN0Il0sbm9ydGg6WyJub3J0aCIsImVhc3QiLCJ3ZXN0Il0sc291dGg6WyJzb3V0aCIsImVhc3QiLCJ3ZXN0Il0sZWFzdDpbImVhc3QiLCJub3J0aCIsInNvdXRoIl0sd2VzdDpbIndlc3QiLCJub3J0aCIsInNvdXRoIl19LHNpemVQb2xpY2llczp7dmVydDp7c2V0c1dpZHRoOjEsc2V0c0hlaWdodDowfSxob3J6OntzZXRzV2lkdGg6MCxzZXRzSGVpZ2h0OjF9LGZsZXhBbGw6e3NldHNXaWR0aDoxLHNldHNIZWlnaHQ6MX19LGdldEl0ZW1TaXplUG9saWN5OmZ1bmN0aW9uKGUpe3ZhciBkPXRoaXMsYT10aGlzLnNpemVQb2xpY2llcyxjLGIsZyxoO2lmKGUuaXNDZW50ZXIpe2g9ZS5wbGFjZWhvbGRlckZvcjtpZihoKXtpZihoLmNvbGxhcHNlZFZlcnRpY2FsKCkpe3JldHVybiBhLnZlcnR9cmV0dXJuIGEuaG9yen1pZihlLmNvbGxhcHNlZCl7aWYoZS5jb2xsYXBzZWRWZXJ0aWNhbCgpKXtyZXR1cm4gYS52ZXJ0fXJldHVybiBhLmhvcnp9cmV0dXJuIGEuZmxleEFsbH1jPWUuY29sbGFwc2VUYXJnZXQ7aWYoYyl7cmV0dXJuIGMuaXNWZXJ0P2EudmVydDphLmhvcnp9aWYoZS5yZWdpb24pe2lmKGUuaXNWZXJ0KXtiPWUuaGVpZ2h0O2c9YS52ZXJ0fWVsc2V7Yj1lLndpZHRoO2c9YS5ob3J6fWlmKGUuZmxleHx8KHR5cGVvZiBiPT0ic3RyaW5nIiYmZC5wZXJjZW50YWdlUmUudGVzdChiKSkpe3JldHVybiBhLmZsZXhBbGx9cmV0dXJuIGd9cmV0dXJuIGQuYXV0b1NpemVQb2xpY3l9fSxmdW5jdGlvbigpe3ZhciBhPXthZGRVbmZsZXhlZDpmdW5jdGlvbihjKXt0aGlzLmZsZXhTcGFjZT1NYXRoLm1heCh0aGlzLmZsZXhTcGFjZS1jLDApfX0sYj10aGlzLnByb3RvdHlwZS5heGlzUHJvcHM7RXh0LmFwcGx5KGIuaG9yeixhKTtFeHQuYXBwbHkoYi52ZXJ0LGEpfSk7RXh0LmRlZmluZSgiRXh0LmxheW91dC5jb250YWluZXIuQ2FyZCIse2V4dGVuZDoiRXh0LmxheW91dC5jb250YWluZXIuRml0IixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5sYXlvdXQuQ2FyZExheW91dCIsYWxpYXM6ImxheW91dC5jYXJkIix0eXBlOiJjYXJkIixoaWRlSW5hY3RpdmU6dHJ1ZSxkZWZlcnJlZFJlbmRlcjpmYWxzZSxnZXRSZW5kZXJUcmVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuZ2V0QWN0aXZlSXRlbSgpO2lmKGIpe2lmKGIuaGFzTGlzdGVuZXJzLmJlZm9yZWFjdGl2YXRlJiZiLmZpcmVFdmVudCgiYmVmb3JlYWN0aXZhdGUiLGIpPT09ZmFsc2Upe2I9YS5hY3RpdmVJdGVtPWEub3duZXIuYWN0aXZlSXRlbT1udWxsfWVsc2V7aWYoYi5oYXNMaXN0ZW5lcnMuYWN0aXZhdGUpe2Iub24oe2JveHJlYWR5OmZ1bmN0aW9uKCl7Yi5maXJlRXZlbnQoImFjdGl2YXRlIixiKX0sc2luZ2xlOnRydWV9KX19aWYoYS5kZWZlcnJlZFJlbmRlcil7aWYoYil7cmV0dXJuIGEuZ2V0SXRlbXNSZW5kZXJUcmVlKFtiXSl9fWVsc2V7cmV0dXJuIGEuY2FsbFBhcmVudChhcmd1bWVudHMpfX19LHJlbmRlckNoaWxkcmVuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuZ2V0QWN0aXZlSXRlbSgpO2lmKCFhLmRlZmVycmVkUmVuZGVyKXthLmNhbGxQYXJlbnQoKX1lbHNle2lmKGIpe2EucmVuZGVySXRlbXMoW2JdLGEuZ2V0UmVuZGVyVGFyZ2V0KCkpfX19LGlzVmFsaWRQYXJlbnQ6ZnVuY3Rpb24oYyxkLGEpe3ZhciBiPWMuZWw/Yy5lbC5kb206RXh0LmdldERvbShjKTtyZXR1cm4oYiYmYi5wYXJlbnROb2RlPT09KGQuZG9tfHxkKSl8fGZhbHNlfSxnZXRBY3RpdmVJdGVtOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIucGFyc2VBY3RpdmVJdGVtKGIuYWN0aXZlSXRlbXx8KGIub3duZXImJmIub3duZXIuYWN0aXZlSXRlbSkpO2lmKGEmJmIub3duZXIuaXRlbXMuaW5kZXhPZihhKSE9LTEpe2IuYWN0aXZlSXRlbT1hfWVsc2V7Yi5hY3RpdmVJdGVtPW51bGx9cmV0dXJuIGIuYWN0aXZlSXRlbX0scGFyc2VBY3RpdmVJdGVtOmZ1bmN0aW9uKGEpe2lmKGEmJmEuaXNDb21wb25lbnQpe3JldHVybiBhfWVsc2V7aWYodHlwZW9mIGE9PSJudW1iZXIifHxhPT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5nZXRMYXlvdXRJdGVtcygpW2F8fDBdfWVsc2V7cmV0dXJuIHRoaXMub3duZXIuZ2V0Q29tcG9uZW50KGEpfX19LGNvbmZpZ3VyZUl0ZW06ZnVuY3Rpb24oYSl7aWYoYT09PXRoaXMuZ2V0QWN0aXZlSXRlbSgpKXthLmhpZGRlbj1mYWxzZX1lbHNle2EuaGlkZGVuPXRydWV9dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LG9uUmVtb3ZlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYT09PWIuYWN0aXZlSXRlbSl7Yi5hY3RpdmVJdGVtPW51bGx9fSxnZXRBbmltYXRpb246ZnVuY3Rpb24oYixhKXt2YXIgYz0oYnx8e30pLmNhcmRTd2l0Y2hBbmltYXRpb247aWYoYz09PWZhbHNlKXtyZXR1cm4gZmFsc2V9cmV0dXJuIGN8fGEuY2FyZFN3aXRjaEFuaW1hdGlvbn0sZ2V0TmV4dDpmdW5jdGlvbigpe3ZhciBjPWFyZ3VtZW50c1swXSxhPXRoaXMuZ2V0TGF5b3V0SXRlbXMoKSxiPUV4dC5BcnJheS5pbmRleE9mKGEsdGhpcy5hY3RpdmVJdGVtKTtyZXR1cm4gYVtiKzFdfHwoYz9hWzBdOmZhbHNlKX0sbmV4dDpmdW5jdGlvbigpe3ZhciBiPWFyZ3VtZW50c1swXSxhPWFyZ3VtZW50c1sxXTtyZXR1cm4gdGhpcy5zZXRBY3RpdmVJdGVtKHRoaXMuZ2V0TmV4dChhKSxiKX0sZ2V0UHJldjpmdW5jdGlvbigpe3ZhciBjPWFyZ3VtZW50c1swXSxhPXRoaXMuZ2V0TGF5b3V0SXRlbXMoKSxiPUV4dC5BcnJheS5pbmRleE9mKGEsdGhpcy5hY3RpdmVJdGVtKTtyZXR1cm4gYVtiLTFdfHwoYz9hW2EubGVuZ3RoLTFdOmZhbHNlKX0scHJldjpmdW5jdGlvbigpe3ZhciBiPWFyZ3VtZW50c1swXSxhPWFyZ3VtZW50c1sxXTtyZXR1cm4gdGhpcy5zZXRBY3RpdmVJdGVtKHRoaXMuZ2V0UHJldihhKSxiKX0sc2V0QWN0aXZlSXRlbTpmdW5jdGlvbihiKXt2YXIgZT10aGlzLGE9ZS5vd25lcixkPWUuYWN0aXZlSXRlbSxnPWEucmVuZGVyZWQsYztiPWUucGFyc2VBY3RpdmVJdGVtKGIpO2M9YS5pdGVtcy5pbmRleE9mKGIpO2lmKGM9PS0xKXtjPWEuaXRlbXMuaXRlbXMubGVuZ3RoO0V4dC5zdXNwZW5kTGF5b3V0cygpO2I9YS5hZGQoYik7RXh0LnJlc3VtZUxheW91dHMoKX1pZihiJiZkIT1iKXtpZihiLmZpcmVFdmVudCgiYmVmb3JlYWN0aXZhdGUiLGIsZCk9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfWlmKGQmJmQuZmlyZUV2ZW50KCJiZWZvcmVkZWFjdGl2YXRlIixkLGIpPT09ZmFsc2Upe3JldHVybiBmYWxzZX1pZihnKXtFeHQuc3VzcGVuZExheW91dHMoKTtpZighYi5yZW5kZXJlZCl7ZS5yZW5kZXJJdGVtKGIsZS5nZXRSZW5kZXJUYXJnZXQoKSxhLml0ZW1zLmxlbmd0aCl9aWYoZCl7aWYoZS5oaWRlSW5hY3RpdmUpe2QuaGlkZSgpO2QuaGlkZGVuQnlMYXlvdXQ9dHJ1ZX1kLmZpcmVFdmVudCgiZGVhY3RpdmF0ZSIsZCxiKX1pZihiLmhpZGRlbil7Yi5zaG93KCl9aWYoIWIuaGlkZGVuKXtlLmFjdGl2ZUl0ZW09Yn1FeHQucmVzdW1lTGF5b3V0cyh0cnVlKX1lbHNle2UuYWN0aXZlSXRlbT1ifWIuZmlyZUV2ZW50KCJhY3RpdmF0ZSIsYixkKTtyZXR1cm4gZS5hY3RpdmVJdGVtfXJldHVybiBmYWxzZX19KTtFeHQuZGVmaW5lKCJFeHQubGF5b3V0LmNvbnRhaW5lci5Db2x1bW4iLHtleHRlbmQ6IkV4dC5sYXlvdXQuY29udGFpbmVyLkNvbnRhaW5lciIsYWxpYXM6WyJsYXlvdXQuY29sdW1uIl0sYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQubGF5b3V0LkNvbHVtbkxheW91dCIsdHlwZToiY29sdW1uIixpdGVtQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJjb2x1bW4iLHRhcmdldENsczpFeHQuYmFzZUNTU1ByZWZpeCsiY29sdW1uLWxheW91dC1jdCIsY29sdW1uV2lkdGhTaXplUG9saWN5OntzZXRzV2lkdGg6MSxzZXRzSGVpZ2h0OjB9LGNoaWxkRWxzOlsiaW5uZXJDdCJdLG1hbmFnZU92ZXJmbG93OjIscmVuZGVyVHBsOlsnPGRpdiBpZD0ie293bmVySWR9LWlubmVyQ3QiIGNsYXNzPSInLEV4dC5iYXNlQ1NTUHJlZml4LCdjb2x1bW4taW5uZXIiPicsInsldGhpcy5yZW5kZXJCb2R5KG91dCx2YWx1ZXMpJX0iLCc8ZGl2IGNsYXNzPSInLEV4dC5iYXNlQ1NTUHJlZml4LCdjbGVhciI+PC9kaXY+JywiPC9kaXY+IiwieyV0aGlzLnJlbmRlclBhZGRlcihvdXQsdmFsdWVzKSV9Il0sZ2V0SXRlbVNpemVQb2xpY3k6ZnVuY3Rpb24oYSl7aWYoYS5jb2x1bW5XaWR0aCl7cmV0dXJuIHRoaXMuY29sdW1uV2lkdGhTaXplUG9saWN5fXJldHVybiB0aGlzLmF1dG9TaXplUG9saWN5fSxiZWdpbkxheW91dDpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3RoaXMuaW5uZXJDdC5kb20uc3R5bGUud2lkdGg9IiJ9LGNhbGN1bGF0ZTpmdW5jdGlvbihjKXt2YXIgYT10aGlzLGQ9YS5nZXRDb250YWluZXJTaXplKGMpLGI9Yy5zdGF0ZTtpZihiLmNhbGN1bGF0ZWRDb2x1bW5zfHwoYi5jYWxjdWxhdGVkQ29sdW1ucz1hLmNhbGN1bGF0ZUNvbHVtbnMoYykpKXtpZihhLmNhbGN1bGF0ZUhlaWdodHMoYykpe2EuY2FsY3VsYXRlT3ZlcmZsb3coYyxkKTtyZXR1cm59fWEuZG9uZT1mYWxzZX0sY2FsY3VsYXRlQ29sdW1uczpmdW5jdGlvbihkKXt2YXIgbT10aGlzLGE9bS5nZXRDb250YWluZXJTaXplKGQpLG89ZC5nZXRFbCgiaW5uZXJDdCIsbSksbD1kLmNoaWxkSXRlbXMsaj1sLmxlbmd0aCxiPTAsZyxuLGUsYyxoLGs7aWYoIWQuaGVpZ2h0TW9kZWwuc2hyaW5rV3JhcCYmIWQudGFyZ2V0Q29udGV4dC5oYXNQcm9wKCJoZWlnaHQiKSl7cmV0dXJuIGZhbHNlfWlmKCFhLmdvdFdpZHRoKXtkLnRhcmdldENvbnRleHQuYmxvY2sobSwid2lkdGgiKTtnPXRydWV9ZWxzZXtuPWEud2lkdGg7by5zZXRXaWR0aChuKX1mb3IoZT0wO2U8ajsrK2Upe2M9bFtlXTtoPWMuZ2V0TWFyZ2luSW5mbygpLndpZHRoO2lmKCFjLndpZHRoTW9kZWwuY2FsY3VsYXRlZCl7az1jLmdldFByb3AoIndpZHRoIik7aWYodHlwZW9mIGshPSJudW1iZXIiKXtjLmJsb2NrKG0sIndpZHRoIik7Zz10cnVlfWIrPWsraH19aWYoIWcpe249KG48Yik/MDpuLWI7Zm9yKGU9MDtlPGo7KytlKXtjPWxbZV07aWYoYy53aWR0aE1vZGVsLmNhbGN1bGF0ZWQpe2g9Yy5tYXJnaW5JbmZvLndpZHRoO2s9Yy50YXJnZXQuY29sdW1uV2lkdGg7az1NYXRoLmZsb29yKGsqbiktaDtrPWMuc2V0V2lkdGgoayk7Yis9aytofX1kLnNldENvbnRlbnRXaWR0aChiKX1yZXR1cm4gIWd9LGNhbGN1bGF0ZUhlaWdodHM6ZnVuY3Rpb24oaCl7dmFyIGc9dGhpcyxiPWguY2hpbGRJdGVtcyxhPWIubGVuZ3RoLGMsZCxlO2M9ZmFsc2U7Zm9yKGQ9MDtkPGE7KytkKXtlPWJbZF07aWYoIWUuaGFzRG9tUHJvcCgiaGVpZ2h0Iikpe2UuZG9tQmxvY2soZywiaGVpZ2h0Iik7Yz10cnVlfX1pZighYyl7aC5zZXRDb250ZW50SGVpZ2h0KGcuaW5uZXJDdC5nZXRIZWlnaHQoKStoLnRhcmdldENvbnRleHQuZ2V0UGFkZGluZ0luZm8oKS5oZWlnaHQpfXJldHVybiAhY30sZmluaXNoZWRMYXlvdXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ib2R5Q29udGV4dDtpZihiJiYoRXh0LmlzSUU2fHxFeHQuaXNJRTd8fEV4dC5pc0lFUXVpcmtzKSl7Yi5lbC5yZXBhaW50KCl9dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGdldFJlbmRlclRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlubmVyQ3R9fSk7RXh0LmRlZmluZSgiRXh0LmxheW91dC5jb250YWluZXIuRm9ybSIse2FsaWFzOiJsYXlvdXQuZm9ybSIsZXh0ZW5kOiJFeHQubGF5b3V0LmNvbnRhaW5lci5BdXRvIixhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5sYXlvdXQuRm9ybUxheW91dCIsdGFibGVDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImZvcm0tbGF5b3V0LXRhYmxlIix0eXBlOiJmb3JtIixtYW5hZ2VPdmVyZmxvdzoyLGNoaWxkRWxzOlsiZm9ybVRhYmxlIl0scGFkUm93Oic8dHI+PHRkIGNsYXNzPSInK0V4dC5iYXNlQ1NTUHJlZml4Kydmb3JtLWl0ZW0tcGFkIiBjb2xzcGFuPSIzIj48L3RkPjwvdHI+JyxyZW5kZXJUcGw6Wyc8dGFibGUgaWQ9Intvd25lcklkfS1mb3JtVGFibGUiIGNsYXNzPSJ7dGFibGVDbHN9IiBzdHlsZT0id2lkdGg6MTAwJSIgY2VsbHBhZGRpbmc9IjAiPicsInsldGhpcy5yZW5kZXJCb2R5KG91dCx2YWx1ZXMpJX0iLCI8L3RhYmxlPiIsInsldGhpcy5yZW5kZXJQYWRkZXIob3V0LHZhbHVlcyklfSJdLGdldFJlbmRlckRhdGE6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNhbGxQYXJlbnQoKTthLnRhYmxlQ2xzPXRoaXMudGFibGVDbHM7cmV0dXJuIGF9LGNhbGN1bGF0ZTpmdW5jdGlvbihlKXt2YXIgZD10aGlzLGg9ZC5nZXRDb250YWluZXJTaXplKGUsdHJ1ZSksYSxnLGI9MCxjO2lmKGguZ290V2lkdGgpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO2E9ZC5mb3JtVGFibGUuZG9tLm9mZnNldFdpZHRoO2c9ZS5jaGlsZEl0ZW1zO2ZvcihjPWcubGVuZ3RoO2I8YzsrK2Ipe2dbYl0uc2V0V2lkdGgoYSxmYWxzZSl9fWVsc2V7ZC5kb25lPWZhbHNlfX0sZ2V0UmVuZGVyVGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm9ybVRhYmxlfSxnZXRSZW5kZXJUcmVlOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxiPWQuY2FsbFBhcmVudChhcmd1bWVudHMpLGMsYTtmb3IoYz0wLGE9Yi5sZW5ndGg7YzxhO2MrKyl7YltjXT1kLnRyYW5zZm9ybUl0ZW1SZW5kZXJUcmVlKGJbY10pfXJldHVybiBifSx0cmFuc2Zvcm1JdGVtUmVuZGVyVHJlZTpmdW5jdGlvbihhKXtpZihhLnRhZyYmYS50YWc9PSJ0YWJsZSIpe2EudGFnPSJ0Ym9keSI7ZGVsZXRlIGEuY2VsbHNwYWNpbmc7ZGVsZXRlIGEuY2VsbHBhZGRpbmc7aWYoRXh0LmlzSUU2KXthLmNuPXRoaXMucGFkUm93fXJldHVybiBhfXJldHVybnt0YWc6InRib2R5Iixjbjp7dGFnOiJ0ciIsY246e3RhZzoidGQiLGNvbHNwYW46MyxzdHlsZToid2lkdGg6MTAwJSIsY246YX19fX0saXNWYWxpZFBhcmVudDpmdW5jdGlvbihiLGMsYSl7cmV0dXJuIHRydWV9LGlzSXRlbVNocmlua1dyYXA6ZnVuY3Rpb24oYSl7cmV0dXJuKChhLnNocmlua1dyYXA9PT10cnVlKT8zOmEuc2hyaW5rV3JhcHx8MCkmMn0sZ2V0SXRlbVNpemVQb2xpY3k6ZnVuY3Rpb24oYSl7cmV0dXJue3NldHNXaWR0aDoxLHNldHNIZWlnaHQ6MH19fSk7RXh0LmRlZmluZSgiRXh0Lm1lbnUuSXRlbSIse2V4dGVuZDoiRXh0LkNvbXBvbmVudCIsYWxpYXM6IndpZGdldC5tZW51aXRlbSIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQubWVudS5UZXh0SXRlbSIsYWN0aXZlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJtZW51LWl0ZW0tYWN0aXZlIixhcmlhUm9sZToibWVudWl0ZW0iLGNhbkFjdGl2YXRlOnRydWUsY2xpY2tIaWRlRGVsYXk6MSxkZXN0cm95TWVudTp0cnVlLGRpc2FibGVkQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJtZW51LWl0ZW0tZGlzYWJsZWQiLGhpZGVPbkNsaWNrOnRydWUsaXNNZW51SXRlbTp0cnVlLG1lbnVBbGlnbjoidGwtdHI/IixtZW51RXhwYW5kRGVsYXk6MjAwLG1lbnVIaWRlRGVsYXk6MjAwLHRvb2x0aXBUeXBlOiJxdGlwIixhcnJvd0NsczpFeHQuYmFzZUNTU1ByZWZpeCsibWVudS1pdGVtLWFycm93IixjaGlsZEVsczpbIml0ZW1FbCIsImljb25FbCIsInRleHRFbCIsImFycm93RWwiXSxyZW5kZXJUcGw6Wyc8dHBsIGlmPSJwbGFpbiI+Jywie3RleHR9IiwiPHRwbCBlbHNlPiIsJzxhIGlkPSJ7aWR9LWl0ZW1FbCIgY2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrJ21lbnUtaXRlbS1saW5rIiBocmVmPSJ7aHJlZn0iIDx0cGwgaWY9ImhyZWZUYXJnZXQiPnRhcmdldD0ie2hyZWZUYXJnZXR9IjwvdHBsPiBoaWRlZm9jdXM9InRydWUiIHVuc2VsZWN0YWJsZT0ib24iPicsJzxpbWcgaWQ9IntpZH0taWNvbkVsIiBzcmM9IntpY29ufSIgY2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrJ21lbnUtaXRlbS1pY29uIHtpY29uQ2xzfSIgLz4nLCc8c3BhbiBpZD0ie2lkfS10ZXh0RWwiIGNsYXNzPSInK0V4dC5iYXNlQ1NTUHJlZml4KydtZW51LWl0ZW0tdGV4dCIgPHRwbCBpZj0iYXJyb3dDbHMiPnN0eWxlPSJtYXJnaW4tcmlnaHQ6IDE3cHg7IjwvdHBsPiA+e3RleHR9PC9zcGFuPicsJzxpbWcgaWQ9IntpZH0tYXJyb3dFbCIgc3JjPSJ7Ymxhbmt9IiBjbGFzcz0ie2Fycm93Q2xzfSIgLz4nLCI8L2E+IiwiPC90cGw+Il0sbWFza09uRGlzYWJsZTpmYWxzZSxhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoIWEuYWN0aXZhdGVkJiZhLmNhbkFjdGl2YXRlJiZhLnJlbmRlcmVkJiYhYS5pc0Rpc2FibGVkKCkmJmEuaXNWaXNpYmxlKCkpe2EuZWwuYWRkQ2xzKGEuYWN0aXZlQ2xzKTthLmZvY3VzKCk7YS5hY3RpdmF0ZWQ9dHJ1ZTthLmZpcmVFdmVudCgiYWN0aXZhdGUiLGEpfX0sZ2V0Rm9jdXNFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1FbH0sZGVhY3RpdmF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoYS5hY3RpdmF0ZWQpe2EuZWwucmVtb3ZlQ2xzKGEuYWN0aXZlQ2xzKTthLmJsdXIoKTthLmhpZGVNZW51KCk7YS5hY3RpdmF0ZWQ9ZmFsc2U7YS5maXJlRXZlbnQoImRlYWN0aXZhdGUiLGEpfX0sZGVmZXJFeHBhbmRNZW51OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLmFjdGl2YXRlZCYmKCFhLm1lbnUucmVuZGVyZWR8fCFhLm1lbnUuaXNWaXNpYmxlKCkpKXthLnBhcmVudE1lbnUuYWN0aXZlQ2hpbGQ9YS5tZW51O2EubWVudS5wYXJlbnRJdGVtPWE7YS5tZW51LnBhcmVudE1lbnU9YS5tZW51Lm93bmVyQ3Q9YS5wYXJlbnRNZW51O2EubWVudS5zaG93QnkoYSxhLm1lbnVBbGlnbil9fSxkZWZlckhpZGVNZW51OmZ1bmN0aW9uKCl7aWYodGhpcy5tZW51LmlzVmlzaWJsZSgpKXt0aGlzLm1lbnUuaGlkZSgpfX0sY2FuY2VsRGVmZXJIaWRlOmZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuaGlkZU1lbnVUaW1lcil9LGRlZmVySGlkZVBhcmVudE1lbnVzOmZ1bmN0aW9uKCl7dmFyIGE7RXh0Lm1lbnUuTWFuYWdlci5oaWRlQWxsKCk7aWYoIUV4dC5FbGVtZW50LmdldEFjdGl2ZUVsZW1lbnQoKSl7YT10aGlzLnVwKCI6bm90KFtoaWRkZW5dKSIpO2lmKGEpe2EuZm9jdXMoKX19fSxleHBhbmRNZW51OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7aWYoYi5tZW51KXtiLmNhbmNlbERlZmVySGlkZSgpO2lmKGE9PT0wKXtiLmRlZmVyRXhwYW5kTWVudSgpfWVsc2V7Yi5leHBhbmRNZW51VGltZXI9RXh0LmRlZmVyKGIuZGVmZXJFeHBhbmRNZW51LEV4dC5pc051bWJlcihhKT9hOmIubWVudUV4cGFuZERlbGF5LGIpfX19LGdldFJlZkl0ZW1zOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMubWVudSxiO2lmKGMpe2I9Yy5nZXRSZWZJdGVtcyhhKTtiLnVuc2hpZnQoYyl9cmV0dXJuIGJ8fFtdfSxoaWRlTWVudTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGIubWVudSl7Y2xlYXJUaW1lb3V0KGIuZXhwYW5kTWVudVRpbWVyKTtiLmhpZGVNZW51VGltZXI9RXh0LmRlZmVyKGIuZGVmZXJIaWRlTWVudSxFeHQuaXNOdW1iZXIoYSk/YTpiLm1lbnVIaWRlRGVsYXksYil9fSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPUV4dC5iYXNlQ1NTUHJlZml4LGE9W2MrIm1lbnUtaXRlbSJdLGQ7Yi5hZGRFdmVudHMoImFjdGl2YXRlIiwiY2xpY2siLCJkZWFjdGl2YXRlIik7aWYoYi5wbGFpbil7YS5wdXNoKGMrIm1lbnUtaXRlbS1wbGFpbiIpfWlmKGIuY2xzKXthLnB1c2goYi5jbHMpfWIuY2xzPWEuam9pbigiICIpO2lmKGIubWVudSl7ZD1iLm1lbnU7ZGVsZXRlIGIubWVudTtiLnNldE1lbnUoZCl9Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LG9uQ2xpY2s6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcztpZighYS5ocmVmKXtiLnN0b3BFdmVudCgpfWlmKGEuZGlzYWJsZWQpe3JldHVybn1pZihhLmhpZGVPbkNsaWNrKXthLmRlZmVySGlkZVBhcmVudE1lbnVzVGltZXI9RXh0LmRlZmVyKGEuZGVmZXJIaWRlUGFyZW50TWVudXMsYS5jbGlja0hpZGVEZWxheSxhKX1FeHQuY2FsbGJhY2soYS5oYW5kbGVyLGEuc2NvcGV8fGEsW2EsYl0pO2EuZmlyZUV2ZW50KCJjbGljayIsYSxiKTtpZighYS5oaWRlT25DbGljayl7YS5mb2N1cygpfX0sb25SZW1vdmVkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLmFjdGl2YXRlZCYmYS5wYXJlbnRNZW51LmFjdGl2ZUl0ZW09PT1hKXthLnBhcmVudE1lbnUuZGVhY3RpdmF0ZUFjdGl2ZUl0ZW0oKX1hLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtkZWxldGUgYS5wYXJlbnRNZW51O2RlbGV0ZSBhLm93bmVyQnV0dG9ufSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnJlbmRlcmVkKXthLmNsZWFyVGlwKCl9YS5jYWxsUGFyZW50KCl9LG9uRGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7Y2xlYXJUaW1lb3V0KGEuZXhwYW5kTWVudVRpbWVyKTthLmNhbmNlbERlZmVySGlkZSgpO2NsZWFyVGltZW91dChhLmRlZmVySGlkZVBhcmVudE1lbnVzVGltZXIpO2Euc2V0TWVudShudWxsKTthLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sYmVmb3JlUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxkPUV4dC5CTEFOS19JTUFHRV9VUkwsYSxjO2IuY2FsbFBhcmVudCgpO2lmKGIuaWNvbkFsaWduPT09InJpZ2h0Iil7YT1iLmNoZWNrQ2hhbmdlRGlzYWJsZWQ/Yi5kaXNhYmxlZENsczoiIjtjPUV4dC5iYXNlQ1NTUHJlZml4KyJtZW51LWl0ZW0taWNvbi1yaWdodCAiK2IuaWNvbkNsc31lbHNle2E9Yi5pY29uQ2xzKyhiLmNoZWNrQ2hhbmdlRGlzYWJsZWQ/IiAiK2IuZGlzYWJsZWRDbHM6IiIpO2M9Yi5tZW51P2IuYXJyb3dDbHM6IiJ9RXh0LmFwcGx5SWYoYi5yZW5kZXJEYXRhLHtocmVmOmIuaHJlZnx8IiMiLGhyZWZUYXJnZXQ6Yi5ocmVmVGFyZ2V0LGljb246Yi5pY29ufHxkLGljb25DbHM6YSxwbGFpbjpiLnBsYWluLHRleHQ6Yi50ZXh0LGFycm93Q2xzOmMsYmxhbms6ZH0pfSxvblJlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYS50b29sdGlwKXthLnNldFRvb2x0aXAoYS50b29sdGlwLHRydWUpfX0sc2V0TWVudTpmdW5jdGlvbihlLGQpe3ZhciBjPXRoaXMsYj1jLm1lbnUsYT1jLmFycm93RWw7aWYoYil7ZGVsZXRlIGIucGFyZW50SXRlbTtkZWxldGUgYi5wYXJlbnRNZW51O2RlbGV0ZSBiLm93bmVyQ3Q7ZGVsZXRlIGIub3duZXJJdGVtO2lmKGQ9PT10cnVlfHwoZCE9PWZhbHNlJiZjLmRlc3Ryb3lNZW51KSl7RXh0LmRlc3Ryb3koYil9fWlmKGUpe2MubWVudT1FeHQubWVudS5NYW5hZ2VyLmdldChlKTtjLm1lbnUub3duZXJJdGVtPWN9ZWxzZXtjLm1lbnU9bnVsbH1pZihjLnJlbmRlcmVkJiYhYy5kZXN0cm95aW5nJiZhKXthW2MubWVudT8iYWRkQ2xzIjoicmVtb3ZlQ2xzIl0oYy5hcnJvd0Nscyl9fSxzZXRIYW5kbGVyOmZ1bmN0aW9uKGIsYSl7dGhpcy5oYW5kbGVyPWJ8fG51bGw7dGhpcy5zY29wZT1hfSxzZXRJY29uOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuaWNvbkVsO2lmKGEpe2Euc3JjPWJ8fEV4dC5CTEFOS19JTUFHRV9VUkx9dGhpcy5pY29uPWJ9LHNldEljb25DbHM6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxhPWMuaWNvbkVsO2lmKGEpe2lmKGMuaWNvbkNscyl7YS5yZW1vdmVDbHMoYy5pY29uQ2xzKX1pZihiKXthLmFkZENscyhiKX19Yy5pY29uQ2xzPWJ9LHNldFRleHQ6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhPWIudGV4dEVsfHxiLmVsO2IudGV4dD1jO2lmKGIucmVuZGVyZWQpe2EudXBkYXRlKGN8fCIiKTtiLm93bmVyQ3QudXBkYXRlTGF5b3V0KCl9fSxnZXRUaXBBdHRyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9vbHRpcFR5cGU9PSJxdGlwIj8iZGF0YS1xdGlwIjoidGl0bGUifSxjbGVhclRpcDpmdW5jdGlvbigpe2lmKEV4dC5pc09iamVjdCh0aGlzLnRvb2x0aXApKXtFeHQudGlwLlF1aWNrVGlwTWFuYWdlci51bnJlZ2lzdGVyKHRoaXMuaXRlbUVsKX19LHNldFRvb2x0aXA6ZnVuY3Rpb24oYyxhKXt2YXIgYj10aGlzO2lmKGIucmVuZGVyZWQpe2lmKCFhKXtiLmNsZWFyVGlwKCl9aWYoRXh0LmlzT2JqZWN0KGMpKXtFeHQudGlwLlF1aWNrVGlwTWFuYWdlci5yZWdpc3RlcihFeHQuYXBwbHkoe3RhcmdldDpiLml0ZW1FbC5pZH0sYykpO2IudG9vbHRpcD1jfWVsc2V7Yi5pdGVtRWwuZG9tLnNldEF0dHJpYnV0ZShiLmdldFRpcEF0dHIoKSxjKX19ZWxzZXtiLnRvb2x0aXA9Y31yZXR1cm4gYn19KTtFeHQuZGVmaW5lKCJFeHQubWVudS5DaGVja0l0ZW0iLHtleHRlbmQ6IkV4dC5tZW51Lkl0ZW0iLGFsaWFzOiJ3aWRnZXQubWVudWNoZWNraXRlbSIsY2hlY2tlZENsczpFeHQuYmFzZUNTU1ByZWZpeCsibWVudS1pdGVtLWNoZWNrZWQiLHVuY2hlY2tlZENsczpFeHQuYmFzZUNTU1ByZWZpeCsibWVudS1pdGVtLXVuY2hlY2tlZCIsZ3JvdXBDbHM6RXh0LmJhc2VDU1NQcmVmaXgrIm1lbnUtZ3JvdXAtaWNvbiIsaGlkZU9uQ2xpY2s6ZmFsc2UsY2hlY2tDaGFuZ2VEaXNhYmxlZDpmYWxzZSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KCk7YS5jaGVja2VkPSFhLmNoZWNrZWQ7YS5zZXRDaGVja2VkKCFhLmNoZWNrZWQsdHJ1ZSk7aWYoYS5jaGVja0NoYW5nZURpc2FibGVkKXthLmRpc2FibGVDaGVja0NoYW5nZSgpfX0saW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5hZGRFdmVudHMoImJlZm9yZWNoZWNrY2hhbmdlIiwiY2hlY2tjaGFuZ2UiKTthLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtFeHQubWVudS5NYW5hZ2VyLnJlZ2lzdGVyQ2hlY2thYmxlKGEpO2lmKGEuZ3JvdXApe2lmKCFhLmljb25DbHMpe2EuaWNvbkNscz1hLmdyb3VwQ2xzfWlmKGEuaW5pdGlhbENvbmZpZy5oaWRlT25DbGljayE9PWZhbHNlKXthLmhpZGVPbkNsaWNrPXRydWV9fX0sZGlzYWJsZUNoZWNrQ2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPWIuaWNvbkVsO2lmKGEpe2EuYWRkQ2xzKGIuZGlzYWJsZWRDbHMpfWlmKCEoRXh0LmlzSUU5JiZFeHQuaXNTdHJpY3QpJiZiLnJlbmRlcmVkKXtiLmVsLnJlcGFpbnQoKX1iLmNoZWNrQ2hhbmdlRGlzYWJsZWQ9dHJ1ZX0sZW5hYmxlQ2hlY2tDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5pY29uRWw7aWYoYSl7YS5yZW1vdmVDbHMoYi5kaXNhYmxlZENscyl9Yi5jaGVja0NoYW5nZURpc2FibGVkPWZhbHNlfSxvbkNsaWNrOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoIWEuZGlzYWJsZWQmJiFhLmNoZWNrQ2hhbmdlRGlzYWJsZWQmJiEoYS5jaGVja2VkJiZhLmdyb3VwKSl7YS5zZXRDaGVja2VkKCFhLmNoZWNrZWQpfXRoaXMuY2FsbFBhcmVudChbYl0pfSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQubWVudS5NYW5hZ2VyLnVucmVnaXN0ZXJDaGVja2FibGUodGhpcyk7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LHNldENoZWNrZWQ6ZnVuY3Rpb24oYyxhKXt2YXIgYj10aGlzO2lmKGIuY2hlY2tlZCE9PWMmJihhfHxiLmZpcmVFdmVudCgiYmVmb3JlY2hlY2tjaGFuZ2UiLGIsYykhPT1mYWxzZSkpe2lmKGIuZWwpe2IuZWxbYz8iYWRkQ2xzIjoicmVtb3ZlQ2xzIl0oYi5jaGVja2VkQ2xzKVshYz8iYWRkQ2xzIjoicmVtb3ZlQ2xzIl0oYi51bmNoZWNrZWRDbHMpfWIuY2hlY2tlZD1jO0V4dC5tZW51Lk1hbmFnZXIub25DaGVja0NoYW5nZShiLGMpO2lmKCFhKXtFeHQuY2FsbGJhY2soYi5jaGVja0hhbmRsZXIsYi5zY29wZSxbYixjXSk7Yi5maXJlRXZlbnQoImNoZWNrY2hhbmdlIixiLGMpfX19fSk7RXh0LmRlZmluZSgiRXh0Lm1lbnUuS2V5TmF2Iix7ZXh0ZW5kOiJFeHQudXRpbC5LZXlOYXYiLHJlcXVpcmVzOlsiRXh0LkZvY3VzTWFuYWdlciJdLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5tZW51PWI7YS5jYWxsUGFyZW50KFtiLmVsLHtkb3duOmEuZG93bixlbnRlcjphLmVudGVyLGVzYzphLmVzY2FwZSxsZWZ0OmEubGVmdCxyaWdodDphLnJpZ2h0LHNwYWNlOmEuZW50ZXIsdGFiOmEudGFiLHVwOmEudXB9XSl9LGRvd246ZnVuY3Rpb24oYil7dmFyIGE9dGhpcyxjPWEubWVudS5mb2N1c2VkSXRlbTtpZihjJiZiLmdldEtleSgpPT1FeHQuRXZlbnRPYmplY3QuRE9XTiYmYS5pc1doaXRlbGlzdGVkKGMpKXtyZXR1cm4gdHJ1ZX1hLmZvY3VzTmV4dEl0ZW0oMSl9LGVudGVyOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMubWVudSxhPWMuZm9jdXNlZEl0ZW07aWYoYy5hY3RpdmVJdGVtKXtjLm9uQ2xpY2soYil9ZWxzZXtpZihhJiZhLmlzRm9ybUZpZWxkKXtyZXR1cm4gdHJ1ZX19fSxlc2NhcGU6ZnVuY3Rpb24oYSl7RXh0Lm1lbnUuTWFuYWdlci5oaWRlQWxsKCl9LGZvY3VzTmV4dEl0ZW06ZnVuY3Rpb24oZyl7dmFyIGg9dGhpcy5tZW51LGI9aC5pdGVtcyxkPWguZm9jdXNlZEl0ZW0sYz1kP2IuaW5kZXhPZihkKTotMSxhPWMrZyxlO3doaWxlKGEhPWMpe2lmKGE8MCl7YT1iLmxlbmd0aC0xfWVsc2V7aWYoYT49Yi5sZW5ndGgpe2E9MH19ZT1iLmdldEF0KGEpO2lmKGguY2FuQWN0aXZhdGVJdGVtKGUpKXtoLnNldEFjdGl2ZUl0ZW0oZSk7YnJlYWt9YSs9Z319LGlzV2hpdGVsaXN0ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5Gb2N1c01hbmFnZXIuaXNXaGl0ZWxpc3RlZChhKX0sbGVmdDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLm1lbnUsZD1jLmZvY3VzZWRJdGVtLGE9Yy5hY3RpdmVJdGVtO2lmKGQmJnRoaXMuaXNXaGl0ZWxpc3RlZChkKSl7cmV0dXJuIHRydWV9Yy5oaWRlKCk7aWYoYy5wYXJlbnRNZW51KXtjLnBhcmVudE1lbnUuZm9jdXMoKX19LHJpZ2h0OmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMubWVudSxnPWQuZm9jdXNlZEl0ZW0sYT1kLmFjdGl2ZUl0ZW0sYjtpZihnJiZ0aGlzLmlzV2hpdGVsaXN0ZWQoZykpe3JldHVybiB0cnVlfWlmKGEpe2I9ZC5hY3RpdmVJdGVtLm1lbnU7aWYoYil7YS5leHBhbmRNZW51KDApO0V4dC5kZWZlcihmdW5jdGlvbigpe2Iuc2V0QWN0aXZlSXRlbShiLml0ZW1zLmdldEF0KDApKX0sMjUpfX19LHRhYjpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKGIuc2hpZnRLZXkpe2EudXAoYil9ZWxzZXthLmRvd24oYil9fSx1cDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLGM9YS5tZW51LmZvY3VzZWRJdGVtO2lmKGMmJmIuZ2V0S2V5KCk9PUV4dC5FdmVudE9iamVjdC5VUCYmYS5pc1doaXRlbGlzdGVkKGMpKXtyZXR1cm4gdHJ1ZX1hLmZvY3VzTmV4dEl0ZW0oLTEpfX0pO0V4dC5kZWZpbmUoIkV4dC5tZW51LlNlcGFyYXRvciIse2V4dGVuZDoiRXh0Lm1lbnUuSXRlbSIsYWxpYXM6IndpZGdldC5tZW51c2VwYXJhdG9yIixjYW5BY3RpdmF0ZTpmYWxzZSxmb2N1c2FibGU6ZmFsc2UsaGlkZU9uQ2xpY2s6ZmFsc2UscGxhaW46dHJ1ZSxzZXBhcmF0b3JDbHM6RXh0LmJhc2VDU1NQcmVmaXgrIm1lbnUtaXRlbS1zZXBhcmF0b3IiLHRleHQ6IiYjMTYwOyIsYmVmb3JlUmVuZGVyOmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcztiLmNhbGxQYXJlbnQoKTtiLmFkZENscyhiLnNlcGFyYXRvckNscyl9fSk7RXh0LmRlZmluZSgiRXh0Lm1lbnUuTWVudSIse2V4dGVuZDoiRXh0LnBhbmVsLlBhbmVsIixhbGlhczoid2lkZ2V0Lm1lbnUiLHJlcXVpcmVzOlsiRXh0LmxheW91dC5jb250YWluZXIuRml0IiwiRXh0LmxheW91dC5jb250YWluZXIuVkJveCIsIkV4dC5tZW51LkNoZWNrSXRlbSIsIkV4dC5tZW51Lkl0ZW0iLCJFeHQubWVudS5LZXlOYXYiLCJFeHQubWVudS5NYW5hZ2VyIiwiRXh0Lm1lbnUuU2VwYXJhdG9yIl0sZW5hYmxlS2V5TmF2OnRydWUsYWxsb3dPdGhlck1lbnVzOmZhbHNlLGFyaWFSb2xlOiJtZW51IixkZWZhdWx0QWxpZ246InRsLWJsPyIsZmxvYXRpbmc6dHJ1ZSxjb25zdHJhaW46dHJ1ZSxoaWRkZW46dHJ1ZSxoaWRlTW9kZToidmlzaWJpbGl0eSIsaWdub3JlUGFyZW50Q2xpY2tzOmZhbHNlLGlzTWVudTp0cnVlLHNob3dTZXBhcmF0b3I6dHJ1ZSxtaW5XaWR0aDp1bmRlZmluZWQsZGVmYXVsdE1pbldpZHRoOjEyMCxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxkPUV4dC5iYXNlQ1NTUHJlZml4LGE9W2QrIm1lbnUiXSxjPWIuYm9keUNscz9bYi5ib2R5Q2xzXTpbXSxlPWIuZmxvYXRpbmchPT1mYWxzZTtiLmFkZEV2ZW50cygiY2xpY2siLCJtb3VzZWVudGVyIiwibW91c2VsZWF2ZSIsIm1vdXNlb3ZlciIpO0V4dC5tZW51Lk1hbmFnZXIucmVnaXN0ZXIoYik7aWYoYi5wbGFpbil7YS5wdXNoKGQrIm1lbnUtcGxhaW4iKX1iLmNscz1hLmpvaW4oIiAiKTtjLnVuc2hpZnQoZCsibWVudS1ib2R5Iik7Yi5ib2R5Q2xzPWMuam9pbigiICIpO2lmKCFiLmxheW91dCl7Yi5sYXlvdXQ9e3R5cGU6InZib3giLGFsaWduOiJzdHJldGNobWF4IixvdmVyZmxvd0hhbmRsZXI6IlNjcm9sbGVyIn19aWYoZSYmYi5taW5XaWR0aD09PXVuZGVmaW5lZCl7Yi5taW5XaWR0aD1iLmRlZmF1bHRNaW5XaWR0aH1pZighZSYmYi5pbml0aWFsQ29uZmlnLmhpZGRlbiE9PXRydWUpe2IuaGlkZGVuPWZhbHNlfWIuY2FsbFBhcmVudChhcmd1bWVudHMpO2Iub24oImJlZm9yZXNob3ciLGZ1bmN0aW9uKCl7dmFyIGc9ISFiLml0ZW1zLmxlbmd0aDtpZihnJiZiLnJlbmRlcmVkKXtiLmVsLnNldFN0eWxlKCJ2aXNpYmlsaXR5IixudWxsKX1yZXR1cm4gZ30pfSxiZWZvcmVSZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZighdGhpcy5nZXRTaXplTW9kZWwoKS53aWR0aC5zaHJpbmtXcmFwKXt0aGlzLmxheW91dC5hbGlnbj0ic3RyZXRjaCJ9fSxvbkJveFJlYWR5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGEuc2hvd1NlcGFyYXRvcil7Yj17Y2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJtZW51LWljb24tc2VwYXJhdG9yIixodG1sOiImIzE2MDsifTtpZigoIUV4dC5pc1N0cmljdCYmRXh0LmlzSUUpfHxFeHQuaXNJRTYpe2Iuc3R5bGU9ImhlaWdodDoiK2EuZWwuZ2V0SGVpZ2h0KCkrInB4In1hLmljb25TZXBFbD1hLmxheW91dC5nZXRFbGVtZW50VGFyZ2V0KCkuaW5zZXJ0Rmlyc3QoYil9YS5tb24oYS5lbCx7Y2xpY2s6YS5vbkNsaWNrLG1vdXNlb3ZlcjphLm9uTW91c2VPdmVyLHNjb3BlOmF9KTthLm1vdXNlTW9uaXRvcj1hLmVsLm1vbml0b3JNb3VzZUxlYXZlKDEwMCxhLm9uTW91c2VMZWF2ZSxhKTtpZihhLmVuYWJsZUtleU5hdil7YS5rZXlOYXY9bmV3IEV4dC5tZW51LktleU5hdihhKX19LGdldEJ1YmJsZVRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudE1lbnV8fHRoaXMub3duZXJCdXR0b258fHRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxjYW5BY3RpdmF0ZUl0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJiFhLmlzRGlzYWJsZWQoKSYmYS5pc1Zpc2libGUoKSYmKGEuY2FuQWN0aXZhdGV8fGEuZ2V0WFR5cGVzKCkuaW5kZXhPZigibWVudWl0ZW0iKTwwKX0sZGVhY3RpdmF0ZUFjdGl2ZUl0ZW06ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxkPWMuYWN0aXZlSXRlbSxhPWMuZm9jdXNlZEl0ZW07aWYoZCl7ZC5kZWFjdGl2YXRlKCk7aWYoIWQuYWN0aXZhdGVkKXtkZWxldGUgYy5hY3RpdmVJdGVtfX1pZihhJiZiKXthLmJsdXIoKTtkZWxldGUgYy5mb2N1c2VkSXRlbX19LGdldEZvY3VzRWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mb2N1c2VkSXRlbXx8dGhpcy5lbH0saGlkZTpmdW5jdGlvbigpe3RoaXMuZGVhY3RpdmF0ZUFjdGl2ZUl0ZW0odHJ1ZSk7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGdldEl0ZW1Gcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Q2hpbGRCeUVsZW1lbnQoYS5nZXRUYXJnZXQoKSl9LGxvb2t1cENvbXBvbmVudDpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2lmKHR5cGVvZiBiPT0ic3RyaW5nIil7Yj1hLmxvb2t1cEl0ZW1Gcm9tU3RyaW5nKGIpfWVsc2V7aWYoRXh0LmlzT2JqZWN0KGIpKXtiPWEubG9va3VwSXRlbUZyb21PYmplY3QoYil9fWIubWluV2lkdGg9Yi5taW5XaWR0aHx8YS5taW5XaWR0aDtyZXR1cm4gYn0sbG9va3VwSXRlbUZyb21PYmplY3Q6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxkPUV4dC5iYXNlQ1NTUHJlZml4LGE7aWYoIWMuaXNDb21wb25lbnQpe2lmKCFjLnh0eXBlKXtjPUV4dC5jcmVhdGUoIkV4dC5tZW51LiIrKEV4dC5pc0Jvb2xlYW4oYy5jaGVja2VkKT8iQ2hlY2siOiIiKSsiSXRlbSIsYyl9ZWxzZXtjPUV4dC5Db21wb25lbnRNYW5hZ2VyLmNyZWF0ZShjLGMueHR5cGUpfX1pZihjLmlzTWVudUl0ZW0pe2MucGFyZW50TWVudT1ifWlmKCFjLmlzTWVudUl0ZW0mJiFjLmRvY2spe2E9W2QrIm1lbnUtaXRlbSIsZCsibWVudS1pdGVtLWNtcCJdO2lmKCFiLnBsYWluJiYoYy5pbmRlbnQ9PT10cnVlfHxjLmljb25DbHM9PT0ibm8taWNvbiIpKXthLnB1c2goZCsibWVudS1pdGVtLWluZGVudCIpfWlmKGMucmVuZGVyZWQpe2MuZWwuYWRkQ2xzKGEpfWVsc2V7Yy5jbHM9KGMuY2xzP2MuY2xzOiIiKSsiICIrYS5qb2luKCIgIil9fXJldHVybiBjfSxsb29rdXBJdGVtRnJvbVN0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4oYT09InNlcGFyYXRvciJ8fGE9PSItIik/bmV3IEV4dC5tZW51LlNlcGFyYXRvcigpOm5ldyBFeHQubWVudS5JdGVtKHtjYW5BY3RpdmF0ZTpmYWxzZSxoaWRlT25DbGljazpmYWxzZSxwbGFpbjp0cnVlLHRleHQ6YX0pfSxvbkNsaWNrOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYTtpZihiLmRpc2FibGVkKXtjLnN0b3BFdmVudCgpO3JldHVybn1hPShjLnR5cGU9PT0iY2xpY2siKT9iLmdldEl0ZW1Gcm9tRXZlbnQoYyk6Yi5hY3RpdmVJdGVtO2lmKGEmJmEuaXNNZW51SXRlbSl7aWYoIWEubWVudXx8IWIuaWdub3JlUGFyZW50Q2xpY2tzKXthLm9uQ2xpY2soYyl9ZWxzZXtjLnN0b3BFdmVudCgpfX1pZighYXx8YS5kaXNhYmxlZCl7YT11bmRlZmluZWR9Yi5maXJlRXZlbnQoImNsaWNrIixiLGEsYyl9LG9uRGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7RXh0Lm1lbnUuTWFuYWdlci51bnJlZ2lzdGVyKGEpO2RlbGV0ZSBhLnBhcmVudE1lbnU7ZGVsZXRlIGEub3duZXJCdXR0b247aWYoYS5yZW5kZXJlZCl7YS5lbC51bihhLm1vdXNlTW9uaXRvcik7RXh0LmRlc3Ryb3koYS5rZXlOYXYpO2RlbGV0ZSBhLmtleU5hdn1hLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sb25Nb3VzZUxlYXZlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5kZWFjdGl2YXRlQWN0aXZlSXRlbSgpO2lmKGEuZGlzYWJsZWQpe3JldHVybn1hLmZpcmVFdmVudCgibW91c2VsZWF2ZSIsYSxiKX0sb25Nb3VzZU92ZXI6ZnVuY3Rpb24oaCl7dmFyIGc9dGhpcyxpPWguZ2V0UmVsYXRlZFRhcmdldCgpLGI9IWcuZWwuY29udGFpbnMoaSksZD1nLmdldEl0ZW1Gcm9tRXZlbnQoaCksYz1nLnBhcmVudE1lbnUsYT1nLnBhcmVudEl0ZW07aWYoYiYmYyl7Yy5zZXRBY3RpdmVJdGVtKGEpO2EuY2FuY2VsRGVmZXJIaWRlKCk7Yy5tb3VzZU1vbml0b3IubW91c2VlbnRlcigpfWlmKGcuZGlzYWJsZWQpe3JldHVybn1pZihkJiYhZC5hY3RpdmF0ZWQpe2cuc2V0QWN0aXZlSXRlbShkKTtpZihkLmFjdGl2YXRlZCYmZC5leHBhbmRNZW51KXtkLmV4cGFuZE1lbnUoKX19aWYoYil7Zy5maXJlRXZlbnQoIm1vdXNlZW50ZXIiLGcsaCl9Zy5maXJlRXZlbnQoIm1vdXNlb3ZlciIsZyxkLGgpfSxzZXRBY3RpdmVJdGVtOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoYiYmKGIhPWEuYWN0aXZlSXRlbSkpe2EuZGVhY3RpdmF0ZUFjdGl2ZUl0ZW0oKTtpZihhLmNhbkFjdGl2YXRlSXRlbShiKSl7aWYoYi5hY3RpdmF0ZSl7Yi5hY3RpdmF0ZSgpO2lmKGIuYWN0aXZhdGVkKXthLmFjdGl2ZUl0ZW09YjthLmZvY3VzZWRJdGVtPWI7YS5mb2N1cygpfX1lbHNle2IuZm9jdXMoKTthLmZvY3VzZWRJdGVtPWJ9fWIuZWwuc2Nyb2xsSW50b1ZpZXcoYS5sYXlvdXQuZ2V0UmVuZGVyVGFyZ2V0KCkpfX0sc2hvd0J5OmZ1bmN0aW9uKGIsZCxjKXt2YXIgYT10aGlzO2lmKGEuZmxvYXRpbmcmJmIpe2Euc2hvdygpO2Euc2V0UGFnZVBvc2l0aW9uKGEuZWwuZ2V0QWxpZ25Ub1hZKGIuZWx8fGIsZHx8YS5kZWZhdWx0QWxpZ24sYykpO2Euc2V0VmVydGljYWxQb3NpdGlvbigpfXJldHVybiBhfSxzaG93OmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxjLGIsYSxlPWQubWF4SGVpZ2h0O2lmKCFkLnJlbmRlcmVkKXtkLmRvQXV0b1JlbmRlcigpfWlmKGQuZmxvYXRpbmcpe2M9RXh0LmZseShkLmVsLmdldFNjb3BlUGFyZW50KCkpO2I9Yy5nZXRWaWV3U2l6ZSgpLmhlaWdodDtkLm1heEhlaWdodD1NYXRoLm1pbihlfHxiLGIpfWE9ZC5jYWxsUGFyZW50KGFyZ3VtZW50cyk7ZC5tYXhIZWlnaHQ9ZTtyZXR1cm4gYX0sYWZ0ZXJDb21wb25lbnRMYXlvdXQ6ZnVuY3Rpb24oYyxhLGIsZSl7dmFyIGQ9dGhpcztkLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihkLnNob3dTZXBhcmF0b3Ipe2QuaWNvblNlcEVsLnNldEhlaWdodChkLmNvbXBvbmVudExheW91dC5sYXN0Q29tcG9uZW50U2l6ZS5jb250ZW50SGVpZ2h0KX19LHNldFZlcnRpY2FsUG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLGcsZT1kLmVsLmdldFkoKSxoPWUsaj1kLmdldEhlaWdodCgpLGI9RXh0LkVsZW1lbnQuZ2V0Vmlld3BvcnRIZWlnaHQoKS5oZWlnaHQsYz1FeHQuZmx5KGQuZWwuZ2V0U2NvcGVQYXJlbnQoKSksYT1jLmdldFZpZXdTaXplKCkuaGVpZ2h0LGk9ZS1jLmdldFNjcm9sbCgpLnRvcDtjPW51bGw7aWYoZC5mbG9hdGluZyl7Zz1kLm1heEhlaWdodD9kLm1heEhlaWdodDphLWk7aWYoaj5hKXtoPWUtaX1lbHNle2lmKGc8ail7aD1lLShqLWcpfWVsc2V7aWYoKGUraik+Yil7aD1iLWp9fX19ZC5lbC5zZXRZKGgpfX0pO0V4dC5kZWZpbmUoIkV4dC5tZW51LkNvbG9yUGlja2VyIix7ZXh0ZW5kOiJFeHQubWVudS5NZW51IixhbGlhczoid2lkZ2V0LmNvbG9ybWVudSIscmVxdWlyZXM6WyJFeHQucGlja2VyLkNvbG9yIl0saGlkZU9uQ2xpY2s6dHJ1ZSxwaWNrZXJJZDpudWxsLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9RXh0LmFwcGx5KHt9LGIuaW5pdGlhbENvbmZpZyk7ZGVsZXRlIGEubGlzdGVuZXJzO0V4dC5hcHBseShiLHtwbGFpbjp0cnVlLHNob3dTZXBhcmF0b3I6ZmFsc2UsaXRlbXM6RXh0LmFwcGx5SWYoe2NsczpFeHQuYmFzZUNTU1ByZWZpeCsibWVudS1jb2xvci1pdGVtIixpZDpiLnBpY2tlcklkLHh0eXBlOiJjb2xvcnBpY2tlciJ9LGEpfSk7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7Yi5waWNrZXI9Yi5kb3duKCJjb2xvcnBpY2tlciIpO2IucmVsYXlFdmVudHMoYi5waWNrZXIsWyJzZWxlY3QiXSk7aWYoYi5oaWRlT25DbGljayl7Yi5vbigic2VsZWN0IixiLmhpZGVQaWNrZXJPblNlbGVjdCxiKX19LGhpZGVQaWNrZXJPblNlbGVjdDpmdW5jdGlvbigpe0V4dC5tZW51Lk1hbmFnZXIuaGlkZUFsbCgpfX0pO0V4dC5kZWZpbmUoIkV4dC5tZW51LkRhdGVQaWNrZXIiLHtleHRlbmQ6IkV4dC5tZW51Lk1lbnUiLGFsaWFzOiJ3aWRnZXQuZGF0ZW1lbnUiLHJlcXVpcmVzOlsiRXh0LnBpY2tlci5EYXRlIl0saGlkZU9uQ2xpY2s6dHJ1ZSxwaWNrZXJJZDpudWxsLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9RXh0LmFwcGx5KHt9LGIuaW5pdGlhbENvbmZpZyk7ZGVsZXRlIGEubGlzdGVuZXJzO0V4dC5hcHBseShiLHtzaG93U2VwYXJhdG9yOmZhbHNlLHBsYWluOnRydWUsYm9yZGVyOmZhbHNlLGJvZHlQYWRkaW5nOjAsaXRlbXM6RXh0LmFwcGx5SWYoe2NsczpFeHQuYmFzZUNTU1ByZWZpeCsibWVudS1kYXRlLWl0ZW0iLGlkOmIucGlja2VySWQseHR5cGU6ImRhdGVwaWNrZXIifSxhKX0pO2IuY2FsbFBhcmVudChhcmd1bWVudHMpO2IucGlja2VyPWIuZG93bigiZGF0ZXBpY2tlciIpO2IucmVsYXlFdmVudHMoYi5waWNrZXIsWyJzZWxlY3QiXSk7aWYoYi5oaWRlT25DbGljayl7Yi5vbigic2VsZWN0IixiLmhpZGVQaWNrZXJPblNlbGVjdCxiKX19LGhpZGVQaWNrZXJPblNlbGVjdDpmdW5jdGlvbigpe0V4dC5tZW51Lk1hbmFnZXIuaGlkZUFsbCgpfX0pO0V4dC5kZWZpbmUoIkV4dC5wYW5lbC5Ub29sIix7ZXh0ZW5kOiJFeHQuQ29tcG9uZW50IixyZXF1aXJlczpbIkV4dC50aXAuUXVpY2tUaXBNYW5hZ2VyIl0sYWxpYXM6IndpZGdldC50b29sIixiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ0b29sIixkaXNhYmxlZENsczpFeHQuYmFzZUNTU1ByZWZpeCsidG9vbC1kaXNhYmxlZCIsdG9vbFByZXNzZWRDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInRvb2wtcHJlc3NlZCIsdG9vbE92ZXJDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInRvb2wtb3ZlciIsYXJpYVJvbGU6ImJ1dHRvbiIsY2hpbGRFbHM6WyJ0b29sRWwiXSxyZW5kZXJUcGw6Wyc8aW1nIGlkPSJ7aWR9LXRvb2xFbCIgc3JjPSJ7Ymxhbmt9IiBjbGFzcz0ie2Jhc2VDbHN9LXt0eXBlfSIgcm9sZT0icHJlc2VudGF0aW9uIi8+J10sdG9vbHRpcFR5cGU6InF0aXAiLHN0b3BFdmVudDp0cnVlLGhlaWdodDoxNSx3aWR0aDoxNSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmFkZEV2ZW50cygiY2xpY2siKTthLnR5cGU9YS50eXBlfHxhLmlkO0V4dC5hcHBseUlmKGEucmVuZGVyRGF0YSx7YmFzZUNsczphLmJhc2VDbHMsYmxhbms6RXh0LkJMQU5LX0lNQUdFX1VSTCx0eXBlOmEudHlwZX0pO2EudG9vbHRpcD1hLnRvb2x0aXB8fGEucXRpcDthLmNhbGxQYXJlbnQoKTthLm9uKHtlbGVtZW50OiJ0b29sRWwiLGNsaWNrOmEub25DbGljayxtb3VzZWRvd246YS5vbk1vdXNlRG93bixtb3VzZW92ZXI6YS5vbk1vdXNlT3Zlcixtb3VzZW91dDphLm9uTW91c2VPdXQsc2NvcGU6YX0pfSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYTtiLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihiLnRvb2x0aXApe2lmKEV4dC5pc09iamVjdChiLnRvb2x0aXApKXtFeHQudGlwLlF1aWNrVGlwTWFuYWdlci5yZWdpc3RlcihFeHQuYXBwbHkoe3RhcmdldDpiLmlkfSxiLnRvb2x0aXApKX1lbHNle2E9Yi50b29sdGlwVHlwZT09InF0aXAiPyJkYXRhLXF0aXAiOiJ0aXRsZSI7Yi50b29sRWwuZG9tLnNldEF0dHJpYnV0ZShhLGIudG9vbHRpcCl9fX0sZ2V0Rm9jdXNFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSxzZXRUeXBlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi50eXBlPWE7aWYoYi5yZW5kZXJlZCl7Yi50b29sRWwuZG9tLmNsYXNzTmFtZT1iLmJhc2VDbHMrIi0iK2F9cmV0dXJuIGJ9LGJpbmRUbzpmdW5jdGlvbihhKXt0aGlzLm93bmVyPWF9LG9uQ2xpY2s6ZnVuY3Rpb24oZCxjKXt2YXIgYj10aGlzLGE7aWYoYi5kaXNhYmxlZCl7cmV0dXJuIGZhbHNlfWE9Yi5vd25lcnx8Yi5vd25lckN0O2IuZWwucmVtb3ZlQ2xzKGIudG9vbFByZXNzZWRDbHMpO2IuZWwucmVtb3ZlQ2xzKGIudG9vbE92ZXJDbHMpO2lmKGIuc3RvcEV2ZW50IT09ZmFsc2Upe2Quc3RvcEV2ZW50KCl9RXh0LmNhbGxiYWNrKGIuaGFuZGxlcixiLnNjb3BlfHxiLFtkLGMsYSxiXSk7Yi5maXJlRXZlbnQoImNsaWNrIixiLGQpO3JldHVybiB0cnVlfSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXtpZihFeHQuaXNPYmplY3QodGhpcy50b29sdGlwKSl7RXh0LnRpcC5RdWlja1RpcE1hbmFnZXIudW5yZWdpc3Rlcih0aGlzLmlkKX10aGlzLmNhbGxQYXJlbnQoKX0sb25Nb3VzZURvd246ZnVuY3Rpb24oKXtpZih0aGlzLmRpc2FibGVkKXtyZXR1cm4gZmFsc2V9dGhpcy5lbC5hZGRDbHModGhpcy50b29sUHJlc3NlZENscyl9LG9uTW91c2VPdmVyOmZ1bmN0aW9uKCl7aWYodGhpcy5kaXNhYmxlZCl7cmV0dXJuIGZhbHNlfXRoaXMuZWwuYWRkQ2xzKHRoaXMudG9vbE92ZXJDbHMpfSxvbk1vdXNlT3V0OmZ1bmN0aW9uKCl7dGhpcy5lbC5yZW1vdmVDbHModGhpcy50b29sT3ZlckNscyl9fSk7RXh0LmRlZmluZSgiRXh0LnJlc2l6ZXIuU3BsaXR0ZXJUcmFja2VyIix7ZXh0ZW5kOiJFeHQuZGQuRHJhZ1RyYWNrZXIiLHJlcXVpcmVzOlsiRXh0LnV0aWwuUmVnaW9uIl0sZW5hYmxlZDp0cnVlLG92ZXJsYXlDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInJlc2l6YWJsZS1vdmVybGF5IixjcmVhdGVEcmFnT3ZlcmxheTpmdW5jdGlvbigpe3ZhciBhO2E9dGhpcy5vdmVybGF5PUV4dC5nZXRCb2R5KCkuY3JlYXRlQ2hpbGQoe2Nsczp0aGlzLm92ZXJsYXlDbHMsaHRtbDoiJiMxNjA7In0pO2EudW5zZWxlY3RhYmxlKCk7YS5zZXRTaXplKEV4dC5FbGVtZW50LmdldFZpZXdXaWR0aCh0cnVlKSxFeHQuRWxlbWVudC5nZXRWaWV3SGVpZ2h0KHRydWUpKTthLnNob3coKX0sZ2V0UHJldkNtcDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0U3BsaXR0ZXIoKTtyZXR1cm4gYS5wcmV2aW91c1NpYmxpbmcoKX0sZ2V0TmV4dENtcDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0U3BsaXR0ZXIoKTtyZXR1cm4gYS5uZXh0U2libGluZygpfSxvbkJlZm9yZVN0YXJ0OmZ1bmN0aW9uKGkpe3ZhciBkPXRoaXMsZz1kLmdldFByZXZDbXAoKSxhPWQuZ2V0TmV4dENtcCgpLGM9ZC5nZXRTcGxpdHRlcigpLmNvbGxhcHNlRWwsaD1pLmdldFRhcmdldCgpLGI7aWYoYyYmaD09PWQuZ2V0U3BsaXR0ZXIoKS5jb2xsYXBzZUVsLmRvbSl7cmV0dXJuIGZhbHNlfWlmKGEuY29sbGFwc2VkfHxnLmNvbGxhcHNlZCl7cmV0dXJuIGZhbHNlfWQucHJldkJveD1nLmdldEVsKCkuZ2V0Qm94KCk7ZC5uZXh0Qm94PWEuZ2V0RWwoKS5nZXRCb3goKTtkLmNvbnN0cmFpblRvPWI9ZC5jYWxjdWxhdGVDb25zdHJhaW5SZWdpb24oKTtpZighYil7cmV0dXJuIGZhbHNlfWQuY3JlYXRlRHJhZ092ZXJsYXkoKTtyZXR1cm4gYn0sb25TdGFydDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldFNwbGl0dGVyKCk7YS5hZGRDbHMoYS5iYXNlQ2xzKyItYWN0aXZlIil9LGNhbGN1bGF0ZUNvbnN0cmFpblJlZ2lvbjpmdW5jdGlvbigpe3ZhciBnPXRoaXMsYT1nLmdldFNwbGl0dGVyKCksaD1hLmdldFdpZHRoKCksaT1hLmRlZmF1bHRTcGxpdE1pbixiPWEub3JpZW50YXRpb24sZD1nLnByZXZCb3gsaj1nLmdldFByZXZDbXAoKSxjPWcubmV4dEJveCxlPWcuZ2V0TmV4dENtcCgpLGwsaztpZihiPT09InZlcnRpY2FsIil7bD1uZXcgRXh0LnV0aWwuUmVnaW9uKGQueSwoai5tYXhXaWR0aD9kLngrai5tYXhXaWR0aDpjLnJpZ2h0LShlLm1pbldpZHRofHxpKSkraCxkLmJvdHRvbSxkLngrKGoubWluV2lkdGh8fGkpKTtrPW5ldyBFeHQudXRpbC5SZWdpb24oYy55LGMucmlnaHQtKGUubWluV2lkdGh8fGkpLGMuYm90dG9tLChlLm1heFdpZHRoP2MucmlnaHQtZS5tYXhXaWR0aDpkLngrKGQubWluV2lkdGh8fGkpKS1oKX1lbHNle2w9bmV3IEV4dC51dGlsLlJlZ2lvbihkLnkrKGoubWluSGVpZ2h0fHxpKSxkLnJpZ2h0LChqLm1heEhlaWdodD9kLnkrai5tYXhIZWlnaHQ6Yy5ib3R0b20tKGUubWluSGVpZ2h0fHxpKSkraCxkLngpO2s9bmV3IEV4dC51dGlsLlJlZ2lvbigoZS5tYXhIZWlnaHQ/Yy5ib3R0b20tZS5tYXhIZWlnaHQ6ZC55KyhqLm1pbkhlaWdodHx8aSkpLWgsYy5yaWdodCxjLmJvdHRvbS0oZS5taW5IZWlnaHR8fGkpLGMueCl9cmV0dXJuIGwuaW50ZXJzZWN0KGspfSxwZXJmb3JtUmVzaXplOmZ1bmN0aW9uKG0sZyl7dmFyIG89dGhpcyxhPW8uZ2V0U3BsaXR0ZXIoKSxoPWEub3JpZW50YXRpb24scD1vLmdldFByZXZDbXAoKSxuPW8uZ2V0TmV4dENtcCgpLGI9YS5vd25lckN0LGs9Yi5xdWVyeSgiPltmbGV4XSIpLGw9ay5sZW5ndGgsaj0wLGQscSxjPTA7Zm9yKDtqPGw7aisrKXtxPWtbal0uZ2V0V2lkdGgoKTtjKz1xO2tbal0uZmxleD1xfWc9Z3x8by5nZXRPZmZzZXQoImRyYWdUYXJnZXQiKTtpZihoPT09InZlcnRpY2FsIil7Zz1nWzBdO2Q9IndpZHRoIn1lbHNle2Q9ImhlaWdodCI7Zz1nWzFdfWlmKHApe3E9by5wcmV2Qm94W2RdK2c7aWYocC5mbGV4KXtwLmZsZXg9cX1lbHNle3BbZF09cX19aWYobil7cT1vLm5leHRCb3hbZF0tZztpZihuLmZsZXgpe24uZmxleD1xfWVsc2V7bltkXT1xfX1iLnVwZGF0ZUxheW91dCgpfSxlbmREcmFnOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLm92ZXJsYXkpe2Eub3ZlcmxheS5yZW1vdmUoKTtkZWxldGUgYS5vdmVybGF5fWEuY2FsbFBhcmVudChhcmd1bWVudHMpfSxvbkVuZDpmdW5jdGlvbihjKXt2YXIgYT10aGlzLGI9YS5nZXRTcGxpdHRlcigpO2IucmVtb3ZlQ2xzKGIuYmFzZUNscysiLWFjdGl2ZSIpO2EucGVyZm9ybVJlc2l6ZShjLGEuZ2V0T2Zmc2V0KCJkcmFnVGFyZ2V0IikpfSxvbkRyYWc6ZnVuY3Rpb24oZyl7dmFyIGM9dGhpcyxoPWMuZ2V0T2Zmc2V0KCJkcmFnVGFyZ2V0IiksZD1jLmdldFNwbGl0dGVyKCksYj1kLmdldEVsKCksYT1kLm9yaWVudGF0aW9uO2lmKGE9PT0idmVydGljYWwiKXtiLnNldFgoYy5zdGFydFJlZ2lvbi5sZWZ0K2hbMF0pfWVsc2V7Yi5zZXRZKGMuc3RhcnRSZWdpb24udG9wK2hbMV0pfX0sZ2V0U3BsaXR0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcGxpdHRlcn19KTtFeHQuZGVmaW5lKCJFeHQucmVzaXplci5Cb3JkZXJTcGxpdHRlclRyYWNrZXIiLHtleHRlbmQ6IkV4dC5yZXNpemVyLlNwbGl0dGVyVHJhY2tlciIscmVxdWlyZXM6WyJFeHQudXRpbC5SZWdpb24iXSxnZXRQcmV2Q21wOm51bGwsZ2V0TmV4dENtcDpudWxsLGNhbGN1bGF0ZUNvbnN0cmFpblJlZ2lvbjpmdW5jdGlvbigpe3ZhciB5PXRoaXMsYT15LnNwbGl0dGVyLG89YS5jb2xsYXBzZVRhcmdldCxkPWEuZGVmYXVsdFNwbGl0TWluLGg9YS52ZXJ0aWNhbD8iV2lkdGgiOiJIZWlnaHQiLGM9Im1pbiIraCx1PSJtYXgiK2gsaj0iZ2V0IitoLHQ9YS5uZWlnaGJvcnMsZT10Lmxlbmd0aCxuPW8uZWwuZ2V0Qm94KCksZz1uLngscD1uLnkseD1uLnJpZ2h0LGs9bi5ib3R0b20scj1hLnZlcnRpY2FsPyh4LWcpOihrLXApLHcsbCxtLHYscyxxLGI7bT0ob1tjXXx8TWF0aC5taW4ocixkKSktcjt2PW9bdV07aWYoIXYpe3Y9MTAwMDAwMDAwMH1lbHNle3YtPXJ9Yj1yO2Zvcih3PTA7dzxlOysrdyl7bD10W3ddO3I9bFtqXSgpO3M9ci1sW3VdO3E9ci0obFtjXXx8TWF0aC5taW4ocixkKSk7aWYoIWlzTmFOKHMpKXtpZihtPHMpe209c319aWYodj5xKXt2PXF9fWlmKHYtbTwyKXtyZXR1cm4gbnVsbH1uPW5ldyBFeHQudXRpbC5SZWdpb24ocCx4LGssZyk7eS5jb25zdHJhaW50QWRqdXN0ZXJzW2EuY29sbGFwc2VEaXJlY3Rpb25dKG4sbSx2LGEpO3kuZHJhZ0luZm89e21pblJhbmdlOm0sbWF4UmFuZ2U6dix0YXJnZXRTaXplOmJ9O3JldHVybiBufSxjb25zdHJhaW50QWRqdXN0ZXJzOntsZWZ0OmZ1bmN0aW9uKGMsYSxiLGQpe2NbMF09Yy54PWMubGVmdD1jLnJpZ2h0K2E7Yy5yaWdodCs9YitkLmdldFdpZHRoKCl9LHRvcDpmdW5jdGlvbihjLGEsYixkKXtjWzFdPWMueT1jLnRvcD1jLmJvdHRvbSthO2MuYm90dG9tKz1iK2QuZ2V0SGVpZ2h0KCl9LGJvdHRvbTpmdW5jdGlvbihjLGEsYixkKXtjLmJvdHRvbT1jLnRvcC1hO2MudG9wLT1iK2QuZ2V0SGVpZ2h0KCl9LHJpZ2h0OmZ1bmN0aW9uKGMsYSxiLGQpe2MucmlnaHQ9Yy5sZWZ0LWE7Yy5sZWZ0LT1iK2QuZ2V0V2lkdGgoKX19LG9uQmVmb3JlU3RhcnQ6ZnVuY3Rpb24oaCl7dmFyIGs9dGhpcyxiPWsuc3BsaXR0ZXIsYT1iLmNvbGxhcHNlVGFyZ2V0LG09Yi5uZWlnaGJvcnMsZD1rLmdldFNwbGl0dGVyKCkuY29sbGFwc2VFbCxqPWguZ2V0VGFyZ2V0KCksYz1tLmxlbmd0aCxnLGw7aWYoZCYmaj09PWIuY29sbGFwc2VFbC5kb20pe3JldHVybiBmYWxzZX1pZihhLmNvbGxhcHNlZCl7cmV0dXJuIGZhbHNlfWZvcihnPTA7ZzxjOysrZyl7bD1tW2ddO2lmKGwuY29sbGFwc2VkJiZsLmlzSG9yej09PWEuaXNIb3J6KXtyZXR1cm4gZmFsc2V9fWlmKCEoay5jb25zdHJhaW5Ubz1rLmNhbGN1bGF0ZUNvbnN0cmFpblJlZ2lvbigpKSl7cmV0dXJuIGZhbHNlfWsuY3JlYXRlRHJhZ092ZXJsYXkoKTtyZXR1cm4gdHJ1ZX0scGVyZm9ybVJlc2l6ZTpmdW5jdGlvbihqLGkpe3ZhciBrPXRoaXMsYj1rLnNwbGl0dGVyLGg9Yi5jb2xsYXBzZURpcmVjdGlvbixhPWIuY29sbGFwc2VUYXJnZXQsZz1rLnNwbGl0QWRqdXN0ZXJzW2IudmVydGljYWw/ImhvcnoiOiJ2ZXJ0Il0sbD1pW2cuaW5kZXhdLGQ9ay5kcmFnSW5mbyxjO2lmKGg9PSJyaWdodCJ8fGg9PSJib3R0b20iKXtsPS1sfWw9TWF0aC5taW4oTWF0aC5tYXgoZC5taW5SYW5nZSxsKSxkLm1heFJhbmdlKTtpZihsKXsoYz1iLm93bmVyQ3QpLnN1c3BlbmRMYXlvdXRzKCk7Zy5hZGp1c3RUYXJnZXQoYSxkLnRhcmdldFNpemUsbCk7Yy5yZXN1bWVMYXlvdXRzKHRydWUpfX0sc3BsaXRBZGp1c3RlcnM6e2hvcno6e2luZGV4OjAsYWRqdXN0VGFyZ2V0OmZ1bmN0aW9uKGIsYSxjKXtiLmZsZXg9bnVsbDtiLnNldFNpemUoYStjKX19LHZlcnQ6e2luZGV4OjEsYWRqdXN0VGFyZ2V0OmZ1bmN0aW9uKGIsYSxjKXtiLmZsZXg9bnVsbDtiLnNldFNpemUodW5kZWZpbmVkLGErYyl9fX19KTtFeHQuZGVmaW5lKCJFeHQucmVzaXplci5IYW5kbGUiLHtleHRlbmQ6IkV4dC5Db21wb25lbnQiLGhhbmRsZUNsczoiIixiYXNlSGFuZGxlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJyZXNpemFibGUtaGFuZGxlIixyZWdpb246IiIsYmVmb3JlUmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmNhbGxQYXJlbnQoKTthLmFkZENscyhhLmJhc2VIYW5kbGVDbHMsYS5iYXNlSGFuZGxlQ2xzKyItIithLnJlZ2lvbixhLmhhbmRsZUNscyl9LG9uUmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7dGhpcy5lbC51bnNlbGVjdGFibGUoKX19KTtFeHQuZGVmaW5lKCJFeHQucmVzaXplci5SZXNpemVUcmFja2VyIix7ZXh0ZW5kOiJFeHQuZGQuRHJhZ1RyYWNrZXIiLGR5bmFtaWM6dHJ1ZSxwcmVzZXJ2ZVJhdGlvOmZhbHNlLGNvbnN0cmFpblRvOm51bGwscHJveHlDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInJlc2l6YWJsZS1wcm94eSIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcyxjLGEsZTtpZighYi5lbCl7aWYoYi50YXJnZXQuaXNDb21wb25lbnQpe2QuZWw9Yi50YXJnZXQuZ2V0RWwoKX1lbHNle2QuZWw9Yi50YXJnZXR9fXRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKGQucHJlc2VydmVSYXRpbyYmZC5taW5XaWR0aCYmZC5taW5IZWlnaHQpe2M9ZC5taW5XaWR0aC9kLmVsLmdldFdpZHRoKCk7YT1kLm1pbkhlaWdodC9kLmVsLmdldEhlaWdodCgpO2lmKGE+Yyl7ZC5taW5XaWR0aD1kLmVsLmdldFdpZHRoKCkqYX1lbHNle2QubWluSGVpZ2h0PWQuZWwuZ2V0SGVpZ2h0KCkqY319aWYoZC50aHJvdHRsZSl7ZT1FeHQuRnVuY3Rpb24uY3JlYXRlVGhyb3R0bGVkKGZ1bmN0aW9uKCl7RXh0LnJlc2l6ZXIuUmVzaXplVHJhY2tlci5wcm90b3R5cGUucmVzaXplLmFwcGx5KGQsYXJndW1lbnRzKX0sZC50aHJvdHRsZSk7ZC5yZXNpemU9ZnVuY3Rpb24oaCxpLGcpe2lmKGcpe0V4dC5yZXNpemVyLlJlc2l6ZVRyYWNrZXIucHJvdG90eXBlLnJlc2l6ZS5hcHBseShkLGFyZ3VtZW50cyl9ZWxzZXtlLmFwcGx5KG51bGwsYXJndW1lbnRzKX19fX0sb25CZWZvcmVTdGFydDpmdW5jdGlvbihhKXt0aGlzLnN0YXJ0Qm94PXRoaXMuZWwuZ2V0Qm94KCl9LGdldER5bmFtaWNUYXJnZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS50YXJnZXQ7aWYoYS5keW5hbWljKXtyZXR1cm4gYn1lbHNle2lmKCFhLnByb3h5KXthLnByb3h5PWEuY3JlYXRlUHJveHkoYil9fWEucHJveHkuc2hvdygpO3JldHVybiBhLnByb3h5fSxjcmVhdGVQcm94eTpmdW5jdGlvbihjKXt2YXIgYixhPXRoaXMucHJveHlDbHMsZDtpZihjLmlzQ29tcG9uZW50KXtiPWMuZ2V0UHJveHkoKS5hZGRDbHMoYSl9ZWxzZXtkPUV4dC5nZXRCb2R5KCk7aWYoRXh0LnNjb3BlUmVzZXRDU1Mpe2Q9RXh0LmdldEJvZHkoKS5jcmVhdGVDaGlsZCh7Y2xzOkV4dC5yZXNldENsc30pfWI9Yy5jcmVhdGVQcm94eSh7dGFnOiJkaXYiLGNsczphLGlkOmMuaWQrIi1yenByb3h5In0sZCl9Yi5yZW1vdmVDbHMoRXh0LmJhc2VDU1NQcmVmaXgrInByb3h5LWVsIik7cmV0dXJuIGJ9LG9uU3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5hY3RpdmVSZXNpemVIYW5kbGU9RXh0LmdldCh0aGlzLmdldERyYWdUYXJnZXQoKS5pZCk7aWYoIXRoaXMuZHluYW1pYyl7dGhpcy5yZXNpemUodGhpcy5zdGFydEJveCx7aG9yaXpvbnRhbDoibm9uZSIsdmVydGljYWw6Im5vbmUifSl9fSxvbkRyYWc6ZnVuY3Rpb24oYSl7aWYodGhpcy5keW5hbWljfHx0aGlzLnByb3h5KXt0aGlzLnVwZGF0ZURpbWVuc2lvbnMoYSl9fSx1cGRhdGVEaW1lbnNpb25zOmZ1bmN0aW9uKHMsbSl7dmFyIHQ9dGhpcyxjPXQuYWN0aXZlUmVzaXplSGFuZGxlLnJlZ2lvbixnPXQuZ2V0T2Zmc2V0KHQuY29uc3RyYWluVG8/ImRyYWdUYXJnZXQiOm51bGwpLGs9dC5zdGFydEJveCxoLHA9MCx1PTAsaixxLGE9MCx3PTAsdixuPWdbMF08MD8icmlnaHQiOiJsZWZ0IixyPWdbMV08MD8iZG93biI6InVwIixpLGIsZCxvLGw7c3dpdGNoKGMpe2Nhc2Uic291dGgiOnU9Z1sxXTtiPTI7YnJlYWs7Y2FzZSJub3J0aCI6dT0tZ1sxXTt3PS11O2I9MjticmVhaztjYXNlImVhc3QiOnA9Z1swXTtiPTE7YnJlYWs7Y2FzZSJ3ZXN0IjpwPS1nWzBdO2E9LXA7Yj0xO2JyZWFrO2Nhc2Uibm9ydGhlYXN0Ijp1PS1nWzFdO3c9LXU7cD1nWzBdO2k9W2sueCxrLnkray5oZWlnaHRdO2I9MzticmVhaztjYXNlInNvdXRoZWFzdCI6dT1nWzFdO3A9Z1swXTtpPVtrLngsay55XTtiPTM7YnJlYWs7Y2FzZSJzb3V0aHdlc3QiOnA9LWdbMF07YT0tcDt1PWdbMV07aT1bay54K2sud2lkdGgsay55XTtiPTM7YnJlYWs7Y2FzZSJub3J0aHdlc3QiOnU9LWdbMV07dz0tdTtwPS1nWzBdO2E9LXA7aT1bay54K2sud2lkdGgsay55K2suaGVpZ2h0XTtiPTM7YnJlYWt9ZD17d2lkdGg6ay53aWR0aCtwLGhlaWdodDprLmhlaWdodCt1LHg6ay54K2EseTprLnkrd307aj1FeHQuTnVtYmVyLnNuYXAoZC53aWR0aCx0LndpZHRoSW5jcmVtZW50KTtxPUV4dC5OdW1iZXIuc25hcChkLmhlaWdodCx0LmhlaWdodEluY3JlbWVudCk7aWYoaiE9ZC53aWR0aHx8cSE9ZC5oZWlnaHQpe3N3aXRjaChjKXtjYXNlIm5vcnRoZWFzdCI6ZC55LT1xLWQuaGVpZ2h0O2JyZWFrO2Nhc2Uibm9ydGgiOmQueS09cS1kLmhlaWdodDticmVhaztjYXNlInNvdXRod2VzdCI6ZC54LT1qLWQud2lkdGg7YnJlYWs7Y2FzZSJ3ZXN0IjpkLngtPWotZC53aWR0aDticmVhaztjYXNlIm5vcnRod2VzdCI6ZC54LT1qLWQud2lkdGg7ZC55LT1xLWQuaGVpZ2h0fWQud2lkdGg9ajtkLmhlaWdodD1xfWlmKGQud2lkdGg8dC5taW5XaWR0aHx8ZC53aWR0aD50Lm1heFdpZHRoKXtkLndpZHRoPUV4dC5OdW1iZXIuY29uc3RyYWluKGQud2lkdGgsdC5taW5XaWR0aCx0Lm1heFdpZHRoKTtpZihhKXtkLng9ay54KyhrLndpZHRoLWQud2lkdGgpfX1lbHNle3QubGFzdFg9ZC54fWlmKGQuaGVpZ2h0PHQubWluSGVpZ2h0fHxkLmhlaWdodD50Lm1heEhlaWdodCl7ZC5oZWlnaHQ9RXh0Lk51bWJlci5jb25zdHJhaW4oZC5oZWlnaHQsdC5taW5IZWlnaHQsdC5tYXhIZWlnaHQpO2lmKHcpe2QueT1rLnkrKGsuaGVpZ2h0LWQuaGVpZ2h0KX19ZWxzZXt0Lmxhc3RZPWQueX1pZih0LnByZXNlcnZlUmF0aW98fHMuc2hpZnRLZXkpe2g9dC5zdGFydEJveC53aWR0aC90LnN0YXJ0Qm94LmhlaWdodDtvPU1hdGgubWluKE1hdGgubWF4KHQubWluSGVpZ2h0LGQud2lkdGgvaCksdC5tYXhIZWlnaHQpO2w9TWF0aC5taW4oTWF0aC5tYXgodC5taW5XaWR0aCxkLmhlaWdodCpoKSx0Lm1heFdpZHRoKTtpZihiPT0xKXtkLmhlaWdodD1vfWVsc2V7aWYoYj09Mil7ZC53aWR0aD1sfWVsc2V7dj1NYXRoLmFicyhpWzBdLXRoaXMubGFzdFhZWzBdKS9NYXRoLmFicyhpWzFdLXRoaXMubGFzdFhZWzFdKTtpZih2Pmgpe2QuaGVpZ2h0PW99ZWxzZXtkLndpZHRoPWx9aWYoYz09Im5vcnRoZWFzdCIpe2QueT1rLnktKGQuaGVpZ2h0LWsuaGVpZ2h0KX1lbHNle2lmKGM9PSJub3J0aHdlc3QiKXtkLnk9ay55LShkLmhlaWdodC1rLmhlaWdodCk7ZC54PWsueC0oZC53aWR0aC1rLndpZHRoKX1lbHNle2lmKGM9PSJzb3V0aHdlc3QiKXtkLng9ay54LShkLndpZHRoLWsud2lkdGgpfX19fX19aWYodT09PTApe3I9Im5vbmUifWlmKHA9PT0wKXtuPSJub25lIn10LnJlc2l6ZShkLHtob3Jpem9udGFsOm4sdmVydGljYWw6cn0sbSl9LGdldFJlc2l6ZVRhcmdldDpmdW5jdGlvbihhKXtyZXR1cm4gYT90aGlzLnRhcmdldDp0aGlzLmdldER5bmFtaWNUYXJnZXQoKX0scmVzaXplOmZ1bmN0aW9uKGIsZCxhKXt2YXIgYz10aGlzLmdldFJlc2l6ZVRhcmdldChhKTtpZihjLmlzQ29tcG9uZW50KXtjLnNldFNpemUoYi53aWR0aCxiLmhlaWdodCk7aWYoYy5mbG9hdGluZyl7Yy5zZXRQYWdlUG9zaXRpb24oYi54LGIueSl9fWVsc2V7Yy5zZXRCb3goYil9Yz10aGlzLm9yaWdpbmFsVGFyZ2V0O2lmKGMmJih0aGlzLmR5bmFtaWN8fGEpKXtpZihjLmlzQ29tcG9uZW50KXtjLnNldFNpemUoYi53aWR0aCxiLmhlaWdodCk7aWYoYy5mbG9hdGluZyl7Yy5zZXRQYWdlUG9zaXRpb24oYi54LGIueSl9fWVsc2V7Yy5zZXRCb3goYil9fX0sb25FbmQ6ZnVuY3Rpb24oYSl7dGhpcy51cGRhdGVEaW1lbnNpb25zKGEsdHJ1ZSk7aWYodGhpcy5wcm94eSl7dGhpcy5wcm94eS5oaWRlKCl9fX0pO0V4dC5kZWZpbmUoIkV4dC5yZXNpemVyLlJlc2l6ZXIiLHttaXhpbnM6e29ic2VydmFibGU6IkV4dC51dGlsLk9ic2VydmFibGUifSx1c2VzOlsiRXh0LnJlc2l6ZXIuUmVzaXplVHJhY2tlciIsIkV4dC5Db21wb25lbnQiXSxhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5SZXNpemFibGUiLGhhbmRsZUNsczpFeHQuYmFzZUNTU1ByZWZpeCsicmVzaXphYmxlLWhhbmRsZSIscGlubmVkQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJyZXNpemFibGUtcGlubmVkIixvdmVyQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJyZXNpemFibGUtb3ZlciIsd3JhcENsczpFeHQuYmFzZUNTU1ByZWZpeCsicmVzaXphYmxlLXdyYXAiLGR5bmFtaWM6dHJ1ZSxoYW5kbGVzOiJzIGUgc2UiLGhlaWdodDpudWxsLHdpZHRoOm51bGwsaGVpZ2h0SW5jcmVtZW50OjAsd2lkdGhJbmNyZW1lbnQ6MCxtaW5IZWlnaHQ6MjAsbWluV2lkdGg6MjAsbWF4SGVpZ2h0OjEwMDAwLG1heFdpZHRoOjEwMDAwLHBpbm5lZDpmYWxzZSxwcmVzZXJ2ZVJhdGlvOmZhbHNlLHRyYW5zcGFyZW50OmZhbHNlLHBvc3NpYmxlUG9zaXRpb25zOntuOiJub3J0aCIsczoic291dGgiLGU6ImVhc3QiLHc6Indlc3QiLHNlOiJzb3V0aGVhc3QiLHN3OiJzb3V0aHdlc3QiLG53OiJub3J0aHdlc3QiLG5lOiJub3J0aGVhc3QifSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihiKXt2YXIgaz10aGlzLGosbyxxLHA9ay5oYW5kbGVzLGMsbixnLGQ9MCxtLGw9W10saCxhLGU7ay5hZGRFdmVudHMoImJlZm9yZXJlc2l6ZSIsInJlc2l6ZWRyYWciLCJyZXNpemUiKTtpZihFeHQuaXNTdHJpbmcoYil8fEV4dC5pc0VsZW1lbnQoYil8fGIuZG9tKXtqPWI7Yj1hcmd1bWVudHNbMV18fHt9O2IudGFyZ2V0PWp9ay5taXhpbnMub2JzZXJ2YWJsZS5jb25zdHJ1Y3Rvci5jYWxsKGssYik7aj1rLnRhcmdldDtpZihqKXtpZihqLmlzQ29tcG9uZW50KXtrLmVsPWouZ2V0RWwoKTtpZihqLm1pbldpZHRoKXtrLm1pbldpZHRoPWoubWluV2lkdGh9aWYoai5taW5IZWlnaHQpe2subWluSGVpZ2h0PWoubWluSGVpZ2h0fWlmKGoubWF4V2lkdGgpe2subWF4V2lkdGg9ai5tYXhXaWR0aH1pZihqLm1heEhlaWdodCl7ay5tYXhIZWlnaHQ9ai5tYXhIZWlnaHR9aWYoai5mbG9hdGluZyl7aWYoIWsuaGFzT3duUHJvcGVydHkoImhhbmRsZXMiKSl7ay5oYW5kbGVzPSJuIG5lIGUgc2UgcyBzdyB3IG53In19fWVsc2V7ay5lbD1rLnRhcmdldD1FeHQuZ2V0KGopfX1lbHNle2sudGFyZ2V0PWsuZWw9RXh0LmdldChrLmVsKX1xPWsuZWwuZG9tLnRhZ05hbWUudG9VcHBlckNhc2UoKTtpZihxPT0iVEVYVEFSRUEifHxxPT0iSU1HInx8cT09IlRBQkxFIil7ay5vcmlnaW5hbFRhcmdldD1rLnRhcmdldDtvPWsuZWw7ZT1vLmdldEJveCgpO2sudGFyZ2V0PWsuZWw9ay5lbC53cmFwKHtjbHM6ay53cmFwQ2xzLGlkOmsuZWwuaWQrIi1yendyYXAiLHN0eWxlOm8uZ2V0U3R5bGVzKCJtYXJnaW4tdG9wIiwibWFyZ2luLWJvdHRvbSIpfSk7ay5lbC5zZXRQb3NpdGlvbmluZyhvLmdldFBvc2l0aW9uaW5nKCkpO28uY2xlYXJQb3NpdGlvbmluZygpO2suZWwuc2V0Qm94KGUpO28uc2V0U3R5bGUoInBvc2l0aW9uIiwiYWJzb2x1dGUiKX1rLmVsLnBvc2l0aW9uKCk7aWYoay5waW5uZWQpe2suZWwuYWRkQ2xzKGsucGlubmVkQ2xzKX1rLnJlc2l6ZVRyYWNrZXI9bmV3IEV4dC5yZXNpemVyLlJlc2l6ZVRyYWNrZXIoe2Rpc2FibGVkOmsuZGlzYWJsZWQsdGFyZ2V0OmsudGFyZ2V0LGNvbnN0cmFpblRvOmsuY29uc3RyYWluVG8sb3ZlckNsczprLm92ZXJDbHMsdGhyb3R0bGU6ay50aHJvdHRsZSxvcmlnaW5hbFRhcmdldDprLm9yaWdpbmFsVGFyZ2V0LGRlbGVnYXRlOiIuIitrLmhhbmRsZUNscyxkeW5hbWljOmsuZHluYW1pYyxwcmVzZXJ2ZVJhdGlvOmsucHJlc2VydmVSYXRpbyxoZWlnaHRJbmNyZW1lbnQ6ay5oZWlnaHRJbmNyZW1lbnQsd2lkdGhJbmNyZW1lbnQ6ay53aWR0aEluY3JlbWVudCxtaW5IZWlnaHQ6ay5taW5IZWlnaHQsbWF4SGVpZ2h0OmsubWF4SGVpZ2h0LG1pbldpZHRoOmsubWluV2lkdGgsbWF4V2lkdGg6ay5tYXhXaWR0aH0pO2sucmVzaXplVHJhY2tlci5vbih7bW91c2Vkb3duOmsub25CZWZvcmVSZXNpemUsZHJhZzprLm9uUmVzaXplLGRyYWdlbmQ6ay5vblJlc2l6ZUVuZCxzY29wZTprfSk7aWYoay5oYW5kbGVzPT0iYWxsIil7ay5oYW5kbGVzPSJuIHMgZSB3IG5lIG53IHNlIHN3In1wPWsuaGFuZGxlcz1rLmhhbmRsZXMuc3BsaXQoLyB8XHMqP1ssO11ccyo/Lyk7bj1rLnBvc3NpYmxlUG9zaXRpb25zO2c9cC5sZW5ndGg7Yz1rLmhhbmRsZUNscysiICIrKGsudGFyZ2V0LmlzQ29tcG9uZW50PyhrLnRhcmdldC5iYXNlQ2xzKyItaGFuZGxlICIpOiIiKStrLmhhbmRsZUNscysiLSI7aD1FeHQuaXNJRTY/JyBzdHlsZT0iaGVpZ2h0Oicray5lbC5nZXRIZWlnaHQoKSsncHgiJzoiIjtmb3IoO2Q8ZztkKyspe2lmKHBbZF0mJm5bcFtkXV0pe209bltwW2RdXTtpZihtPT09ImVhc3QifHxtPT09Indlc3QiKXthPWh9ZWxzZXthPSIifWwucHVzaCgnPGRpdiBpZD0iJytrLmVsLmlkKyItIittKyctaGFuZGxlIiBjbGFzcz0iJytjK20rIiAiK0V4dC5iYXNlQ1NTUHJlZml4Kyd1bnNlbGVjdGFibGUiJythKyI+PC9kaXY+Iil9fUV4dC5Eb21IZWxwZXIuYXBwZW5kKGsuZWwsbC5qb2luKCIiKSk7Zm9yKGQ9MDtkPGc7ZCsrKXtpZihwW2RdJiZuW3BbZF1dKXttPW5bcFtkXV07a1ttXT1rLmVsLmdldEJ5SWQoay5lbC5pZCsiLSIrbSsiLWhhbmRsZSIpO2tbbV0ucmVnaW9uPW07a1ttXS51bnNlbGVjdGFibGUoKTtpZihrLnRyYW5zcGFyZW50KXtrW21dLnNldE9wYWNpdHkoMCl9fX1pZihFeHQuaXNOdW1iZXIoay53aWR0aCkpe2sud2lkdGg9RXh0Lk51bWJlci5jb25zdHJhaW4oay53aWR0aCxrLm1pbldpZHRoLGsubWF4V2lkdGgpfWlmKEV4dC5pc051bWJlcihrLmhlaWdodCkpe2suaGVpZ2h0PUV4dC5OdW1iZXIuY29uc3RyYWluKGsuaGVpZ2h0LGsubWluSGVpZ2h0LGsubWF4SGVpZ2h0KX1pZihrLndpZHRoIT09bnVsbHx8ay5oZWlnaHQhPT1udWxsKXtpZihrLm9yaWdpbmFsVGFyZ2V0KXtrLm9yaWdpbmFsVGFyZ2V0LnNldFdpZHRoKGsud2lkdGgpO2sub3JpZ2luYWxUYXJnZXQuc2V0SGVpZ2h0KGsuaGVpZ2h0KX1rLnJlc2l6ZVRvKGsud2lkdGgsay5oZWlnaHQpfWsuZm9yY2VIYW5kbGVzSGVpZ2h0KCl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLnJlc2l6ZVRyYWNrZXIuZGlzYWJsZSgpfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLnJlc2l6ZVRyYWNrZXIuZW5hYmxlKCl9LG9uQmVmb3JlUmVzaXplOmZ1bmN0aW9uKGIsYyl7dmFyIGE9dGhpcy5lbC5nZXRCb3goKTtyZXR1cm4gdGhpcy5maXJlRXZlbnQoImJlZm9yZXJlc2l6ZSIsdGhpcyxhLndpZHRoLGEuaGVpZ2h0LGMpfSxvblJlc2l6ZTpmdW5jdGlvbihjLGQpe3ZhciBiPXRoaXMsYT1iLmVsLmdldEJveCgpO2IuZm9yY2VIYW5kbGVzSGVpZ2h0KCk7cmV0dXJuIGIuZmlyZUV2ZW50KCJyZXNpemVkcmFnIixiLGEud2lkdGgsYS5oZWlnaHQsZCl9LG9uUmVzaXplRW5kOmZ1bmN0aW9uKGMsZCl7dmFyIGI9dGhpcyxhPWIuZWwuZ2V0Qm94KCk7Yi5mb3JjZUhhbmRsZXNIZWlnaHQoKTtyZXR1cm4gYi5maXJlRXZlbnQoInJlc2l6ZSIsYixhLndpZHRoLGEuaGVpZ2h0LGQpfSxyZXNpemVUbzpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXM7Yy50YXJnZXQuc2V0U2l6ZShiLGEpO2MuZmlyZUV2ZW50KCJyZXNpemUiLGMsYixhLG51bGwpfSxnZXRFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSxnZXRUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50YXJnZXR9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgZD0wLGM9dGhpcy5oYW5kbGVzLGE9Yy5sZW5ndGgsYj10aGlzLnBvc3NpYmxlUG9zaXRpb25zO2Zvcig7ZDxhO2QrKyl7dGhpc1tiW2NbZF1dXS5yZW1vdmUoKX19LGZvcmNlSGFuZGxlc0hlaWdodDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYjtpZihFeHQuaXNJRTYpe2I9YS5lYXN0O2lmKGIpe2Iuc2V0SGVpZ2h0KGEuZWwuZ2V0SGVpZ2h0KCkpfWI9YS53ZXN0O2lmKGIpe2Iuc2V0SGVpZ2h0KGEuZWwuZ2V0SGVpZ2h0KCkpfWEuZWwucmVwYWludCgpfX19KTtFeHQuZGVmaW5lKCJFeHQuc2VsZWN0aW9uLkNlbGxNb2RlbCIse2V4dGVuZDoiRXh0LnNlbGVjdGlvbi5Nb2RlbCIsYWxpYXM6InNlbGVjdGlvbi5jZWxsbW9kZWwiLHJlcXVpcmVzOlsiRXh0LnV0aWwuS2V5TmF2Il0saXNDZWxsTW9kZWw6dHJ1ZSxlbmFibGVLZXlOYXY6dHJ1ZSxwcmV2ZW50V3JhcDpmYWxzZSxub1NlbGVjdGlvbjp7cm93Oi0xLGNvbHVtbjotMX0sY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt0aGlzLmFkZEV2ZW50cygiZGVzZWxlY3QiLCJzZWxlY3QiKTt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sYmluZENvbXBvbmVudDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGI9YS5vd25lckN0O2MucHJpbWFyeVZpZXc9YTtjLnZpZXdzPWMudmlld3N8fFtdO2Mudmlld3MucHVzaChhKTtjLmJpbmRTdG9yZShhLmdldFN0b3JlKCksdHJ1ZSk7YS5vbih7Y2VsbG1vdXNlZG93bjpjLm9uTW91c2VEb3duLHJlZnJlc2g6Yy5vblZpZXdSZWZyZXNoLHNjb3BlOmN9KTtpZihiLm9wdGltaXplZENvbHVtbk1vdmUhPT1mYWxzZSl7Yi5vbigiY29sdW1ubW92ZSIsYy5vbkNvbHVtbk1vdmUsYyl9aWYoYy5lbmFibGVLZXlOYXYpe2MuaW5pdEtleU5hdihhKX19LGluaXRLZXlOYXY6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZighYS5yZW5kZXJlZCl7YS5vbigicmVuZGVyIixFeHQuRnVuY3Rpb24uYmluZChiLmluaXRLZXlOYXYsYixbYV0sMCksYix7c2luZ2xlOnRydWV9KTtyZXR1cm59YS5lbC5zZXQoe3RhYkluZGV4Oi0xfSk7Yi5rZXlOYXY9bmV3IEV4dC51dGlsLktleU5hdih7dGFyZ2V0OmEuZWwsaWdub3JlSW5wdXRGaWVsZHM6dHJ1ZSx1cDpiLm9uS2V5VXAsZG93bjpiLm9uS2V5RG93bixyaWdodDpiLm9uS2V5UmlnaHQsbGVmdDpiLm9uS2V5TGVmdCx0YWI6Yi5vbktleVRhYixzY29wZTpifSl9LGdldEhlYWRlckN0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRDdXJyZW50UG9zaXRpb24oKSxhPWI/Yi52aWV3OnRoaXMucHJpbWFyeVZpZXc7cmV0dXJuIGEuaGVhZGVyQ3R9LG9uS2V5VXA6ZnVuY3Rpb24oYixhKXt0aGlzLmtleU5hdmlnYXRpb249dHJ1ZTt0aGlzLm1vdmUoInVwIixiKTt0aGlzLmtleU5hdmlnYXRpb249ZmFsc2V9LG9uS2V5RG93bjpmdW5jdGlvbihiLGEpe3RoaXMua2V5TmF2aWdhdGlvbj10cnVlO3RoaXMubW92ZSgiZG93biIsYik7dGhpcy5rZXlOYXZpZ2F0aW9uPWZhbHNlfSxvbktleUxlZnQ6ZnVuY3Rpb24oYixhKXt0aGlzLmtleU5hdmlnYXRpb249dHJ1ZTt0aGlzLm1vdmUoImxlZnQiLGIpO3RoaXMua2V5TmF2aWdhdGlvbj1mYWxzZX0sb25LZXlSaWdodDpmdW5jdGlvbihiLGEpe3RoaXMua2V5TmF2aWdhdGlvbj10cnVlO3RoaXMubW92ZSgicmlnaHQiLGIpO3RoaXMua2V5TmF2aWdhdGlvbj1mYWxzZX0sbW92ZTpmdW5jdGlvbihhLGQpe3ZhciBjPXRoaXMsZz1jLmdldEN1cnJlbnRQb3NpdGlvbigpLGI9Zy52aWV3LndhbGtDZWxscyhnLGEsZCxjLnByZXZlbnRXcmFwKTtpZihiKXtiLnZpZXc9Zy52aWV3O3JldHVybiBjLnNldEN1cnJlbnRQb3NpdGlvbihiKX19LGdldEN1cnJlbnRQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGlvbn0sc2V0Q3VycmVudFBvc2l0aW9uOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5sYXN0U2VsZWN0aW9uPWEuc2VsZWN0aW9uO2lmKGEuc2VsZWN0aW9uKXthLm9uQ2VsbERlc2VsZWN0KGEuc2VsZWN0aW9uKX1pZihiKXthLm5leHRTZWxlY3Rpb249bmV3IGEuU2VsZWN0aW9uKGEpO2EubmV4dFNlbGVjdGlvbi5zZXRQb3NpdGlvbihiKTthLm9uQ2VsbFNlbGVjdChhLm5leHRTZWxlY3Rpb24pO3JldHVybiBhLnNlbGVjdGlvbj1hLm5leHRTZWxlY3Rpb259fSxvblN0b3JlUmVtb3ZlOmZ1bmN0aW9uKGIsYSxjKXt2YXIgZD10aGlzLGU9ZC5nZXRDdXJyZW50UG9zaXRpb24oKTtkLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtpZihlKXtpZihlLnJvdz09Yyl7aWYoYzxiLmdldENvdW50KCktMSl7ZS5zZXRQb3NpdGlvbihjLGUuY29sdW1uKTtkLnNldEN1cnJlbnRQb3NpdGlvbihlKX1lbHNle2RlbGV0ZSBkLnNlbGVjdGlvbn19ZWxzZXtpZihjPGUucm93KXtlLnNldFBvc2l0aW9uKGUucm93LTEsZS5jb2x1bW4pO2Quc2V0Q3VycmVudFBvc2l0aW9uKGUpfX19fSxvbk1vdXNlRG93bjpmdW5jdGlvbihjLGEsZCxiLGgsaSxnKXt0aGlzLnNldEN1cnJlbnRQb3NpdGlvbih7dmlldzpjLHJvdzppLGNvbHVtbjpkfSl9LG9uQ2VsbFNlbGVjdDpmdW5jdGlvbihhLGIpe2lmKGEmJmEucm93IT09dW5kZWZpbmVkJiZhLnJvdz4tMSl7dGhpcy5kb1NlbGVjdChhLnZpZXcuZ2V0U3RvcmUoKS5nZXRBdChhLnJvdyksZmFsc2UsYil9fSxvbkNlbGxEZXNlbGVjdDpmdW5jdGlvbihhLGIpe2lmKGEmJmEucm93IT09dW5kZWZpbmVkKXt0aGlzLmRvRGVzZWxlY3QoYS52aWV3LmdldFN0b3JlKCkuZ2V0QXQoYS5yb3cpLGIpfX0sb25TZWxlY3RDaGFuZ2U6ZnVuY3Rpb24oYixlLGQsaCl7dmFyIGc9dGhpcyxpLGMsYTtpZihlKXtpPWcubmV4dFNlbGVjdGlvbjtjPSJzZWxlY3QifWVsc2V7aT1nLmxhc3RTZWxlY3Rpb258fGcubm9TZWxlY3Rpb247Yz0iZGVzZWxlY3QifWE9aS52aWV3fHxnLnByaW1hcnlWaWV3O2lmKChkfHxnLmZpcmVFdmVudCgiYmVmb3JlIitjLGcsYixpLnJvdyxpLmNvbHVtbikpIT09ZmFsc2UmJmgoKSE9PWZhbHNlKXtpZihlKXthLm9uQ2VsbFNlbGVjdChpKTthLm9uQ2VsbEZvY3VzKGkpfWVsc2V7YS5vbkNlbGxEZXNlbGVjdChpKTtkZWxldGUgZy5zZWxlY3Rpb259aWYoIWQpe2cuZmlyZUV2ZW50KGMsZyxiLGkucm93LGkuY29sdW1uKX19fSxvbktleVRhYjpmdW5jdGlvbihkLGIpe3ZhciBjPXRoaXMsYT1jLmdldEN1cnJlbnRQb3NpdGlvbigpLnZpZXcuZWRpdGluZ1BsdWdpbjtpZihhJiZjLndhc0VkaXRpbmcpe2Mub25FZGl0b3JUYWIoYSxkKX1lbHNle2MubW92ZShkLnNoaWZ0S2V5PyJsZWZ0IjoicmlnaHQiLGQpfX0sb25FZGl0b3JUYWI6ZnVuY3Rpb24oYixnKXt2YXIgYz10aGlzLGQ9Zy5zaGlmdEtleT8ibGVmdCI6InJpZ2h0IixhPWMubW92ZShkLGcpO2lmKGEpe2lmKGIuc3RhcnRFZGl0QnlQb3NpdGlvbihhKSl7Yy53YXNFZGl0aW5nPWZhbHNlfWVsc2V7Yy53YXNFZGl0aW5nPXRydWU7aWYoIWEuY29sdW1uSGVhZGVyLmRhdGFJbmRleCl7Yy5vbkVkaXRvclRhYihiLGcpfX19fSxyZWZyZXNoOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5nZXRDdXJyZW50UG9zaXRpb24oKSxhO2lmKGImJihhPXRoaXMuc3RvcmUuaW5kZXhPZih0aGlzLnNlbGVjdGVkLmxhc3QoKSkpIT09LTEpe2Iucm93PWF9fSxvbkNvbHVtbk1vdmU6ZnVuY3Rpb24oZCxlLGIsYyl7dmFyIGE9ZC51cCgidGFibGVwYW5lbCIpO2lmKGEpe3RoaXMub25WaWV3UmVmcmVzaChhLnZpZXcpfX0sb25WaWV3UmVmcmVzaDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLGc9Yy5nZXRDdXJyZW50UG9zaXRpb24oKSxlPWIuaGVhZGVyQ3QsYSxkO2lmKGcmJmcudmlldz09PWIpe2E9Zy5yZWNvcmQ7ZD1nLmNvbHVtbkhlYWRlcjtpZighZC5pc0Rlc2NlbmRhbnRPZihlKSl7ZD1lLnF1ZXJ5QnlJZChkLmlkKXx8ZS5kb3duKCdbdGV4dD0iJytkLnRleHQrJyJdJyl8fGUuZG93bignW2RhdGFJbmRleD0iJytkLmRhdGFJbmRleCsnIl0nKX1pZihkJiYoYi5zdG9yZS5pbmRleE9mSWQoYS5nZXRJZCgpKSE9PS0xKSl7Yy5zZXRDdXJyZW50UG9zaXRpb24oe3JvdzphLGNvbHVtbjpkLHZpZXc6Yn0pfX19LHNlbGVjdEJ5UG9zaXRpb246ZnVuY3Rpb24oYSl7dGhpcy5zZXRDdXJyZW50UG9zaXRpb24oYSl9fSxmdW5jdGlvbigpe3ZhciBhPXRoaXMucHJvdG90eXBlLlNlbGVjdGlvbj1mdW5jdGlvbihiKXt0aGlzLm1vZGVsPWJ9O2EucHJvdG90eXBlLnNldFBvc2l0aW9uPWZ1bmN0aW9uKGUsYyl7dmFyIGQ9dGhpcyxiO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXtpZihlLnZpZXcpe2Qudmlldz1iPWUudmlld31jPWUuY29sdW1uO2U9ZS5yb3d9aWYoIWIpe2Qudmlldz1iPWQubW9kZWwucHJpbWFyeVZpZXd9aWYodHlwZW9mIGU9PT0ibnVtYmVyIil7ZC5yb3c9ZTtkLnJlY29yZD1iLnN0b3JlLmdldEF0KGUpfWVsc2V7aWYoZS5pc01vZGVsKXtkLnJlY29yZD1lO2Qucm93PWIuaW5kZXhPZihlKX1lbHNle2lmKGUudGFnTmFtZSl7ZC5yZWNvcmQ9Yi5nZXRSZWNvcmQoZSk7ZC5yb3c9Yi5pbmRleE9mKGQucmVjb3JkKX19fWlmKHR5cGVvZiBjPT09Im51bWJlciIpe2QuY29sdW1uPWM7ZC5jb2x1bW5IZWFkZXI9Yi5nZXRIZWFkZXJBdEluZGV4KGMpfWVsc2V7ZC5jb2x1bW5IZWFkZXI9YztkLmNvbHVtbj1jLmdldEluZGV4KCl9cmV0dXJuIGR9fSk7RXh0LmRlZmluZSgiRXh0LnNlbGVjdGlvbi5Sb3dNb2RlbCIse2V4dGVuZDoiRXh0LnNlbGVjdGlvbi5Nb2RlbCIsYWxpYXM6InNlbGVjdGlvbi5yb3dtb2RlbCIscmVxdWlyZXM6WyJFeHQudXRpbC5LZXlOYXYiXSxkZWx0YVNjcm9sbDo1LGVuYWJsZUtleU5hdjp0cnVlLGlnbm9yZVJpZ2h0TW91c2VTZWxlY3Rpb246ZmFsc2UsY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt0aGlzLmFkZEV2ZW50cygiYmVmb3JlZGVzZWxlY3QiLCJiZWZvcmVzZWxlY3QiLCJkZXNlbGVjdCIsInNlbGVjdCIpO3RoaXMudmlld3M9W107dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGJpbmRDb21wb25lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLnZpZXdzPWIudmlld3N8fFtdO2Iudmlld3MucHVzaChhKTtiLmJpbmRTdG9yZShhLmdldFN0b3JlKCksdHJ1ZSk7YS5vbih7aXRlbW1vdXNlZG93bjpiLm9uUm93TW91c2VEb3duLHNjb3BlOmJ9KTtpZihiLmVuYWJsZUtleU5hdil7Yi5pbml0S2V5TmF2KGEpfX0saW5pdEtleU5hdjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKCFhLnJlbmRlcmVkKXthLm9uKCJyZW5kZXIiLEV4dC5GdW5jdGlvbi5iaW5kKGIuaW5pdEtleU5hdixiLFthXSwwKSxiLHtzaW5nbGU6dHJ1ZX0pO3JldHVybn1hLmVsLnNldCh7dGFiSW5kZXg6LTF9KTtiLmtleU5hdj1uZXcgRXh0LnV0aWwuS2V5TmF2KHt0YXJnZXQ6YSxpZ25vcmVJbnB1dEZpZWxkczp0cnVlLGV2ZW50TmFtZToiaXRlbWtleWRvd24iLHByb2Nlc3NFdmVudDpmdW5jdGlvbihkLGMsaCxlLGcpe2cucmVjb3JkPWM7Zy5yZWNvcmRJbmRleD1lO3JldHVybiBnfSx1cDpiLm9uS2V5VXAsZG93bjpiLm9uS2V5RG93bixyaWdodDpiLm9uS2V5UmlnaHQsbGVmdDpiLm9uS2V5TGVmdCxwYWdlRG93bjpiLm9uS2V5UGFnZURvd24scGFnZVVwOmIub25LZXlQYWdlVXAsaG9tZTpiLm9uS2V5SG9tZSxlbmQ6Yi5vbktleUVuZCxzcGFjZTpiLm9uS2V5U3BhY2UsZW50ZXI6Yi5vbktleUVudGVyLHNjb3BlOmJ9KX0sZ2V0Um93c1Zpc2libGU6ZnVuY3Rpb24oKXt2YXIgZT1mYWxzZSxhPXRoaXMudmlld3NbMF0sZD1hLmdldE5vZGUoMCksYixjO2lmKGQpe2I9RXh0LmZseShkKS5nZXRIZWlnaHQoKTtjPWEuZWwuZ2V0SGVpZ2h0KCk7ZT1NYXRoLmZsb29yKGMvYil9cmV0dXJuIGV9LG9uS2V5RW5kOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLnN0b3JlLmdldEF0KGIuc3RvcmUuZ2V0Q291bnQoKS0xKTtpZihhKXtpZihjLnNoaWZ0S2V5KXtiLnNlbGVjdFJhbmdlKGEsYi5sYXN0Rm9jdXNlZHx8MCk7Yi5zZXRMYXN0Rm9jdXNlZChhKX1lbHNle2lmKGMuY3RybEtleSl7Yi5zZXRMYXN0Rm9jdXNlZChhKX1lbHNle2IuZG9TZWxlY3QoYSl9fX19LG9uS2V5SG9tZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzLGM9YS5zdG9yZS5nZXRBdCgwKTtpZihjKXtpZihiLnNoaWZ0S2V5KXthLnNlbGVjdFJhbmdlKGMsYS5sYXN0Rm9jdXNlZHx8MCk7YS5zZXRMYXN0Rm9jdXNlZChjKX1lbHNle2lmKGIuY3RybEtleSl7YS5zZXRMYXN0Rm9jdXNlZChjKX1lbHNle2EuZG9TZWxlY3QoYyxmYWxzZSl9fX19LG9uS2V5UGFnZVVwOmZ1bmN0aW9uKGcpe3ZhciBkPXRoaXMsaD1kLmdldFJvd3NWaXNpYmxlKCksYixjLGE7aWYoaCl7Yj1nLnJlY29yZEluZGV4O2M9Yi1oO2lmKGM8MCl7Yz0wfWE9ZC5zdG9yZS5nZXRBdChjKTtpZihnLnNoaWZ0S2V5KXtkLnNlbGVjdFJhbmdlKGEsZy5yZWNvcmQsZy5jdHJsS2V5LCJ1cCIpO2Quc2V0TGFzdEZvY3VzZWQoYSl9ZWxzZXtpZihnLmN0cmxLZXkpe2cucHJldmVudERlZmF1bHQoKTtkLnNldExhc3RGb2N1c2VkKGEpfWVsc2V7ZC5kb1NlbGVjdChhKX19fX0sb25LZXlQYWdlRG93bjpmdW5jdGlvbihnKXt2YXIgYz10aGlzLGg9Yy5nZXRSb3dzVmlzaWJsZSgpLGEsZCxiO2lmKGgpe2E9Zy5yZWNvcmRJbmRleDtkPWEraDtpZihkPj1jLnN0b3JlLmdldENvdW50KCkpe2Q9Yy5zdG9yZS5nZXRDb3VudCgpLTF9Yj1jLnN0b3JlLmdldEF0KGQpO2lmKGcuc2hpZnRLZXkpe2Muc2VsZWN0UmFuZ2UoYixnLnJlY29yZCxnLmN0cmxLZXksImRvd24iKTtjLnNldExhc3RGb2N1c2VkKGIpfWVsc2V7aWYoZy5jdHJsS2V5KXtnLnByZXZlbnREZWZhdWx0KCk7Yy5zZXRMYXN0Rm9jdXNlZChiKX1lbHNle2MuZG9TZWxlY3QoYil9fX19LG9uS2V5U3BhY2U6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhPWIubGFzdEZvY3VzZWQ7aWYoYSl7aWYoYi5pc1NlbGVjdGVkKGEpKXtiLmRvRGVzZWxlY3QoYSxmYWxzZSl9ZWxzZXtiLmRvU2VsZWN0KGEsdHJ1ZSl9fX0sb25LZXlFbnRlcjpFeHQuZW1wdHlGbixvbktleVVwOmZ1bmN0aW9uKGQpe3ZhciBjPXRoaXMsYT1jLnN0b3JlLmluZGV4T2YoYy5sYXN0Rm9jdXNlZCksYjtpZihhPjApe2I9Yy5zdG9yZS5nZXRBdChhLTEpO2lmKGQuc2hpZnRLZXkmJmMubGFzdEZvY3VzZWQpe2lmKGMuaXNTZWxlY3RlZChjLmxhc3RGb2N1c2VkKSYmYy5pc1NlbGVjdGVkKGIpKXtjLmRvRGVzZWxlY3QoYy5sYXN0Rm9jdXNlZCx0cnVlKTtjLnNldExhc3RGb2N1c2VkKGIpfWVsc2V7aWYoIWMuaXNTZWxlY3RlZChjLmxhc3RGb2N1c2VkKSl7Yy5kb1NlbGVjdChjLmxhc3RGb2N1c2VkLHRydWUpO2MuZG9TZWxlY3QoYix0cnVlKX1lbHNle2MuZG9TZWxlY3QoYix0cnVlKX19fWVsc2V7aWYoZC5jdHJsS2V5KXtjLnNldExhc3RGb2N1c2VkKGIpfWVsc2V7Yy5kb1NlbGVjdChiKX19fX0sb25LZXlEb3duOmZ1bmN0aW9uKGQpe3ZhciBjPXRoaXMsYT1jLnN0b3JlLmluZGV4T2YoYy5sYXN0Rm9jdXNlZCksYjtpZihhKzE8Yy5zdG9yZS5nZXRDb3VudCgpKXtiPWMuc3RvcmUuZ2V0QXQoYSsxKTtpZihjLnNlbGVjdGVkLmdldENvdW50KCk9PT0wKXtpZighZC5jdHJsS2V5KXtjLmRvU2VsZWN0KGIpfWVsc2V7Yy5zZXRMYXN0Rm9jdXNlZChiKX19ZWxzZXtpZihkLnNoaWZ0S2V5JiZjLmxhc3RGb2N1c2VkKXtpZihjLmlzU2VsZWN0ZWQoYy5sYXN0Rm9jdXNlZCkmJmMuaXNTZWxlY3RlZChiKSl7Yy5kb0Rlc2VsZWN0KGMubGFzdEZvY3VzZWQsdHJ1ZSk7Yy5zZXRMYXN0Rm9jdXNlZChiKX1lbHNle2lmKCFjLmlzU2VsZWN0ZWQoYy5sYXN0Rm9jdXNlZCkpe2MuZG9TZWxlY3QoYy5sYXN0Rm9jdXNlZCx0cnVlKTtjLmRvU2VsZWN0KGIsdHJ1ZSl9ZWxzZXtjLmRvU2VsZWN0KGIsdHJ1ZSl9fX1lbHNle2lmKGQuY3RybEtleSl7Yy5zZXRMYXN0Rm9jdXNlZChiKX1lbHNle2MuZG9TZWxlY3QoYil9fX19fSxzY3JvbGxCeURlbHRhWDpmdW5jdGlvbihkKXt2YXIgYT10aGlzLnZpZXdzWzBdLGM9YS51cCgpLGI9Yy5ob3Jpem9udGFsU2Nyb2xsZXI7aWYoYil7Yi5zY3JvbGxCeURlbHRhWChkKX19LG9uS2V5TGVmdDpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbEJ5RGVsdGFYKC10aGlzLmRlbHRhU2Nyb2xsKX0sb25LZXlSaWdodDpmdW5jdGlvbihhKXt0aGlzLnNjcm9sbEJ5RGVsdGFYKHRoaXMuZGVsdGFTY3JvbGwpfSxvblJvd01vdXNlRG93bjpmdW5jdGlvbihiLGEsZCxjLGcpe2lmKCF0aGlzLmFsbG93UmlnaHRNb3VzZVNlbGVjdGlvbihnKSl7cmV0dXJufWlmKGcuYnV0dG9uPT09MHx8IXRoaXMuaXNTZWxlY3RlZChhKSl7dGhpcy5zZWxlY3RXaXRoRXZlbnQoYSxnKX19LGFsbG93UmlnaHRNb3VzZVNlbGVjdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmlnbm9yZVJpZ2h0TW91c2VTZWxlY3Rpb24mJmEuYnV0dG9uIT09MDtpZihiKXtiPXRoaXMuaGFzU2VsZWN0aW9uKCl9cmV0dXJuICFifSxvblNlbGVjdENoYW5nZTpmdW5jdGlvbihnLGMsbCxhKXt2YXIgaj10aGlzLG09ai52aWV3cyxkPW0ubGVuZ3RoLGs9ai5zdG9yZSxiPWsuaW5kZXhPZihnKSxoPWM/InNlbGVjdCI6ImRlc2VsZWN0IixlPTA7aWYoKGx8fGouZmlyZUV2ZW50KCJiZWZvcmUiK2gsaixnLGIpKSE9PWZhbHNlJiZhKCkhPT1mYWxzZSl7Zm9yKDtlPGQ7ZSsrKXtpZihjKXttW2VdLm9uUm93U2VsZWN0KGIsbCl9ZWxzZXttW2VdLm9uUm93RGVzZWxlY3QoYixsKX19aWYoIWwpe2ouZmlyZUV2ZW50KGgsaixnLGIpfX19LG9uTGFzdEZvY3VzQ2hhbmdlZDpmdW5jdGlvbihqLGQsYil7dmFyIGE9dGhpcy52aWV3cyxoPWEubGVuZ3RoLGM9dGhpcy5zdG9yZSxnLGU9MDtpZihqKXtnPWMuaW5kZXhPZihqKTtpZihnIT0tMSl7Zm9yKDtlPGg7ZSsrKXthW2VdLm9uUm93Rm9jdXMoZyxmYWxzZSl9fX1pZihkKXtnPWMuaW5kZXhPZihkKTtpZihnIT0tMSl7Zm9yKGU9MDtlPGg7ZSsrKXthW2VdLm9uUm93Rm9jdXMoZyx0cnVlLGIpfX19dGhpcy5jYWxsUGFyZW50KCl9LG9uRWRpdG9yVGFiOmZ1bmN0aW9uKGQsaSl7dmFyIGc9dGhpcyxjPWcudmlld3NbMF0sYj1kLmdldEFjdGl2ZVJlY29yZCgpLGo9ZC5nZXRBY3RpdmVDb2x1bW4oKSxhPWMuZ2V0UG9zaXRpb24oYixqKSxoPWkuc2hpZnRLZXk/ImxlZnQiOiJyaWdodCI7ZG97YT1jLndhbGtDZWxscyhhLGgsaSxnLnByZXZlbnRXcmFwKX13aGlsZShhJiYhYy5oZWFkZXJDdC5nZXRIZWFkZXJBdEluZGV4KGEuY29sdW1uKS5nZXRFZGl0b3IoKSk7aWYoYSl7ZC5zdGFydEVkaXRCeVBvc2l0aW9uKGEpfX0sZ2V0Q3VycmVudFBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zZWxlY3RlZC5pdGVtc1swXTtpZihhKXtyZXR1cm57cm93OnRoaXMuc3RvcmUuaW5kZXhPZihhKSxjb2x1bW46MH19fSxzZWxlY3RCeVBvc2l0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc3RvcmUuZ2V0QXQoYS5yb3cpO3RoaXMuc2VsZWN0KGIpfSxzZWxlY3ROZXh0OmZ1bmN0aW9uKGgsYyl7dmFyIGc9dGhpcyxiPWcuc3RvcmUsZT1nLmdldFNlbGVjdGlvbigpLGE9ZVtlLmxlbmd0aC0xXSxkPWIuaW5kZXhPZihhKSsxLGk7aWYoZD09PWIuZ2V0Q291bnQoKXx8ZD09PTApe2k9ZmFsc2V9ZWxzZXtnLmRvU2VsZWN0KGQsaCxjKTtpPXRydWV9cmV0dXJuIGl9LHNlbGVjdFByZXZpb3VzOmZ1bmN0aW9uKGcsYil7dmFyIGU9dGhpcyxkPWUuZ2V0U2VsZWN0aW9uKCksYT1kWzBdLGM9ZS5zdG9yZS5pbmRleE9mKGEpLTEsaDtpZihjPDApe2g9ZmFsc2V9ZWxzZXtlLmRvU2VsZWN0KGMsZyxiKTtoPXRydWV9cmV0dXJuIGh9fSk7RXh0LmRlZmluZSgiRXh0LnNlbGVjdGlvbi5DaGVja2JveE1vZGVsIix7YWxpYXM6InNlbGVjdGlvbi5jaGVja2JveG1vZGVsIixleHRlbmQ6IkV4dC5zZWxlY3Rpb24uUm93TW9kZWwiLG1vZGU6Ik1VTFRJIixpbmplY3RDaGVja2JveDowLGNoZWNrT25seTpmYWxzZSxzaG93SGVhZGVyQ2hlY2tib3g6dHJ1ZSxoZWFkZXJXaWR0aDoyNCxjaGVja2VyT25DbHM6RXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtaGQtY2hlY2tlci1vbiIscmVmcmVzaE9uUmVtb3ZlOnRydWUsYmVmb3JlVmlld1JlbmRlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2IuY2FsbFBhcmVudChhcmd1bWVudHMpO2lmKCFiLmhhc0xvY2tlZEhlYWRlcigpfHxhLmhlYWRlckN0LmxvY2tlZEN0KXtpZihiLnNob3dIZWFkZXJDaGVja2JveCE9PWZhbHNlKXthLmhlYWRlckN0Lm9uKCJoZWFkZXJjbGljayIsYi5vbkhlYWRlckNsaWNrLGIpfWIuYWRkQ2hlY2tib3goYSx0cnVlKTtiLm1vbihhLm93bmVyQ3QsInJlY29uZmlndXJlIixiLm9uUmVjb25maWd1cmUsYil9fSxiaW5kQ29tcG9uZW50OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5zb3J0YWJsZT1mYWxzZTtiLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0saGFzTG9ja2VkSGVhZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy52aWV3cyxjPWEubGVuZ3RoLGI7Zm9yKGI9MDtiPGM7YisrKXtpZihhW2JdLmhlYWRlckN0LmxvY2tlZEN0KXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfSxhZGRDaGVja2JveDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLmluamVjdENoZWNrYm94LGU9YS5oZWFkZXJDdDtpZihkIT09ZmFsc2Upe2lmKGQ9PSJmaXJzdCIpe2Q9MH1lbHNle2lmKGQ9PSJsYXN0Iil7ZD1lLmdldENvbHVtbkNvdW50KCl9fUV4dC5zdXNwZW5kTGF5b3V0cygpO2UuYWRkKGQsYy5nZXRIZWFkZXJDb25maWcoKSk7RXh0LnJlc3VtZUxheW91dHMoKX1pZihiIT09dHJ1ZSl7YS5yZWZyZXNoKCl9fSxvblJlY29uZmlndXJlOmZ1bmN0aW9uKGMsYSxiKXtpZihiKXt0aGlzLmFkZENoZWNrYm94KHRoaXMudmlld3NbMF0pfX0sdG9nZ2xlVWlIZWFkZXI6ZnVuY3Rpb24oZCl7dmFyIGE9dGhpcy52aWV3c1swXSxjPWEuaGVhZGVyQ3QsYj1jLmNoaWxkKCJncmlkY29sdW1uW2lzQ2hlY2tlckhkXSIpO2lmKGIpe2lmKGQpe2IuZWwuYWRkQ2xzKHRoaXMuY2hlY2tlck9uQ2xzKX1lbHNle2IuZWwucmVtb3ZlQ2xzKHRoaXMuY2hlY2tlck9uQ2xzKX19fSxvbkhlYWRlckNsaWNrOmZ1bmN0aW9uKGMsZyxiKXtpZihnLmlzQ2hlY2tlckhkKXtiLnN0b3BFdmVudCgpO3ZhciBhPXRoaXMsZD1nLmVsLmhhc0NscyhFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1oZC1jaGVja2VyLW9uIik7YS5wcmV2ZW50Rm9jdXM9dHJ1ZTtpZihkKXthLmRlc2VsZWN0QWxsKCl9ZWxzZXthLnNlbGVjdEFsbCgpfWRlbGV0ZSBhLnByZXZlbnRGb2N1c319LGdldEhlYWRlckNvbmZpZzpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLnNob3dIZWFkZXJDaGVja2JveCE9PWZhbHNlO3JldHVybntpc0NoZWNrZXJIZDpiLHRleHQ6IiYjMTYwOyIsd2lkdGg6YS5oZWFkZXJXaWR0aCxzb3J0YWJsZTpmYWxzZSxkcmFnZ2FibGU6ZmFsc2UscmVzaXphYmxlOmZhbHNlLGhpZGVhYmxlOmZhbHNlLG1lbnVEaXNhYmxlZDp0cnVlLGRhdGFJbmRleDoiIixjbHM6Yj9FeHQuYmFzZUNTU1ByZWZpeCsiY29sdW1uLWhlYWRlci1jaGVja2JveCAiOiIiLHJlbmRlcmVyOkV4dC5GdW5jdGlvbi5iaW5kKGEucmVuZGVyZXIsYSksZWRpdFJlbmRlcmVyOmEuZWRpdFJlbmRlcmVyfHxhLnJlbmRlckVtcHR5LGxvY2tlZDphLmhhc0xvY2tlZEhlYWRlcigpfX0scmVuZGVyRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4iJiMxNjA7In0scmVuZGVyZXI6ZnVuY3Rpb24oaCxjLGIsaSxlLGQsYSl7dmFyIGc9RXh0LmJhc2VDU1NQcmVmaXg7Yy50ZENscz1nKyJncmlkLWNlbGwtc3BlY2lhbCAiK2crImdyaWQtY2VsbC1yb3ctY2hlY2tlciI7cmV0dXJuJzxkaXYgY2xhc3M9IicrZysnZ3JpZC1yb3ctY2hlY2tlciI+JiMxNjA7PC9kaXY+J30sb25Sb3dNb3VzZURvd246ZnVuY3Rpb24oYixhLGgsZCxpKXtiLmVsLmZvY3VzKCk7dmFyIGc9dGhpcyxjPWkuZ2V0VGFyZ2V0KCIuIitFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1yb3ctY2hlY2tlciIpLGo7aWYoIWcuYWxsb3dSaWdodE1vdXNlU2VsZWN0aW9uKGkpKXtyZXR1cm59aWYoZy5jaGVja09ubHkmJiFjKXtyZXR1cm59aWYoYyl7aj1nLmdldFNlbGVjdGlvbk1vZGUoKTtpZihqIT09IlNJTkdMRSIpe2cuc2V0U2VsZWN0aW9uTW9kZSgiU0lNUExFIil9Zy5zZWxlY3RXaXRoRXZlbnQoYSxpKTtnLnNldFNlbGVjdGlvbk1vZGUoail9ZWxzZXtnLnNlbGVjdFdpdGhFdmVudChhLGkpfX0sb25TZWxlY3RDaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2EudXBkYXRlSGVhZGVyU3RhdGUoKX0sb25TdG9yZUxvYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2EudXBkYXRlSGVhZGVyU3RhdGUoKX0sdXBkYXRlSGVhZGVyU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlbGVjdGVkLmdldENvdW50KCk9PT10aGlzLnN0b3JlLmdldENvdW50KCk7dGhpcy50b2dnbGVVaUhlYWRlcihhKX19KTtFeHQuZGVmaW5lKCJFeHQuc2VsZWN0aW9uLlRyZWVNb2RlbCIse2V4dGVuZDoiRXh0LnNlbGVjdGlvbi5Sb3dNb2RlbCIsYWxpYXM6InNlbGVjdGlvbi50cmVlbW9kZWwiLHBydW5lUmVtb3ZlZDpmYWxzZSxvbktleVJpZ2h0OmZ1bmN0aW9uKGQsYil7dmFyIGM9dGhpcy5nZXRMYXN0Rm9jdXNlZCgpLGE9dGhpcy52aWV3O2lmKGMpe2lmKGMuaXNFeHBhbmRlZCgpKXt0aGlzLm9uS2V5RG93bihkLGIpfWVsc2V7aWYoYy5pc0V4cGFuZGFibGUoKSl7YS5leHBhbmQoYyl9fX19LG9uS2V5TGVmdDpmdW5jdGlvbihpLGQpe3ZhciBoPXRoaXMuZ2V0TGFzdEZvY3VzZWQoKSxjPXRoaXMudmlldyxiPWMuZ2V0U2VsZWN0aW9uTW9kZWwoKSxhLGc7aWYoaCl7YT1oLnBhcmVudE5vZGU7aWYoaC5pc0V4cGFuZGVkKCkpe2MuY29sbGFwc2UoaCl9ZWxzZXtpZihhJiYhYS5pc1Jvb3QoKSl7aWYoaS5zaGlmdEtleSl7Yi5zZWxlY3RSYW5nZShhLGgsaS5jdHJsS2V5LCJ1cCIpO2Iuc2V0TGFzdEZvY3VzZWQoYSl9ZWxzZXtpZihpLmN0cmxLZXkpe2Iuc2V0TGFzdEZvY3VzZWQoYSl9ZWxzZXtiLnNlbGVjdChhKX19fX19fSxvbktleVNwYWNlOmZ1bmN0aW9uKGIsYSl7dGhpcy50b2dnbGVDaGVjayhiKX0sb25LZXlFbnRlcjpmdW5jdGlvbihiLGEpe3RoaXMudG9nZ2xlQ2hlY2soYil9LHRvZ2dsZUNoZWNrOmZ1bmN0aW9uKGIpe2Iuc3RvcEV2ZW50KCk7dmFyIGE9dGhpcy5nZXRMYXN0U2VsZWN0ZWQoKTtpZihhKXt0aGlzLnZpZXcub25DaGVja0NoYW5nZShhKX19fSk7RXh0LmRlZmluZSgiRXh0LnNsaWRlci5UaHVtYiIse3JlcXVpcmVzOlsiRXh0LmRkLkRyYWdUcmFja2VyIiwiRXh0LnV0aWwuRm9ybWF0Il0sdG9wWkluZGV4OjEwMDAwLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7RXh0LmFwcGx5KGIsYXx8e30se2NsczpFeHQuYmFzZUNTU1ByZWZpeCsic2xpZGVyLXRodW1iIixjb25zdHJhaW46ZmFsc2V9KTtiLmNhbGxQYXJlbnQoW2FdKX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmVsPWEuc2xpZGVyLmlubmVyRWwuaW5zZXJ0Rmlyc3QoYS5nZXRFbENvbmZpZygpKTthLm9uUmVuZGVyKCl9LG9uUmVuZGVyOmZ1bmN0aW9uKCl7aWYodGhpcy5kaXNhYmxlZCl7dGhpcy5kaXNhYmxlKCl9dGhpcy5pbml0RXZlbnRzKCl9LGdldEVsQ29uZmlnOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxiPWMuc2xpZGVyLGE9e307YVtiLnZlcnRpY2FsPyJib3R0b20iOiJsZWZ0Il09Yi5jYWxjdWxhdGVUaHVtYlBvc2l0aW9uKGIubm9ybWFsaXplVmFsdWUoYy52YWx1ZSkpKyIlIjtyZXR1cm57c3R5bGU6YSxpZDp0aGlzLmlkLGNsczp0aGlzLmNsc319LG1vdmU6ZnVuY3Rpb24oYyxiKXt2YXIgZD10aGlzLmVsLGE9dGhpcy5zbGlkZXIudmVydGljYWw/ImJvdHRvbSI6ImxlZnQiLGcsZTtjKz0iJSI7aWYoIWIpe2QuZG9tLnN0eWxlW2FdPWN9ZWxzZXtnPXt9O2dbYV09YztpZighRXh0LnN1cHBvcnRzLkdldFBvc2l0aW9uUGVyY2VudGFnZSl7ZT17fTtlW2FdPWQuZG9tLnN0eWxlW2FdfW5ldyBFeHQuZnguQW5pbSh7dGFyZ2V0OmQsZHVyYXRpb246MzUwLGZyb206ZSx0bzpnfSl9fSxicmluZ1RvRnJvbnQ6ZnVuY3Rpb24oKXt0aGlzLmVsLnNldFN0eWxlKCJ6SW5kZXgiLHRoaXMudG9wWkluZGV4KX0sc2VuZFRvQmFjazpmdW5jdGlvbigpe3RoaXMuZWwuc2V0U3R5bGUoInpJbmRleCIsIiIpfSxlbmFibGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuZGlzYWJsZWQ9ZmFsc2U7aWYoYS5lbCl7YS5lbC5yZW1vdmVDbHMoYS5zbGlkZXIuZGlzYWJsZWRDbHMpfX0sZGlzYWJsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5kaXNhYmxlZD10cnVlO2lmKGEuZWwpe2EuZWwuYWRkQ2xzKGEuc2xpZGVyLmRpc2FibGVkQ2xzKX19LGluaXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5lbDtiLnRyYWNrZXI9bmV3IEV4dC5kZC5EcmFnVHJhY2tlcih7b25CZWZvcmVTdGFydDpFeHQuRnVuY3Rpb24uYmluZChiLm9uQmVmb3JlRHJhZ1N0YXJ0LGIpLG9uU3RhcnQ6RXh0LkZ1bmN0aW9uLmJpbmQoYi5vbkRyYWdTdGFydCxiKSxvbkRyYWc6RXh0LkZ1bmN0aW9uLmJpbmQoYi5vbkRyYWcsYiksb25FbmQ6RXh0LkZ1bmN0aW9uLmJpbmQoYi5vbkRyYWdFbmQsYiksdG9sZXJhbmNlOjMsYXV0b1N0YXJ0OjMwMCxvdmVyQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJzbGlkZXItdGh1bWItb3ZlciJ9KTtiLnRyYWNrZXIuaW5pdEVsKGEpfSxvbkJlZm9yZURyYWdTdGFydDpmdW5jdGlvbihhKXtpZih0aGlzLmRpc2FibGVkKXtyZXR1cm4gZmFsc2V9ZWxzZXt0aGlzLnNsaWRlci5wcm9tb3RlVGh1bWIodGhpcyk7cmV0dXJuIHRydWV9fSxvbkRyYWdTdGFydDpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2EuZWwuYWRkQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJzbGlkZXItdGh1bWItZHJhZyIpO2EuZHJhZ2dpbmc9YS5zbGlkZXIuZHJhZ2dpbmc9dHJ1ZTthLmRyYWdTdGFydFZhbHVlPWEudmFsdWU7YS5zbGlkZXIuZmlyZUV2ZW50KCJkcmFnc3RhcnQiLGEuc2xpZGVyLGIsYSl9LG9uRHJhZzpmdW5jdGlvbihoKXt2YXIgZD10aGlzLGM9ZC5zbGlkZXIsYj1kLmluZGV4LGc9ZC5nZXRWYWx1ZUZyb21UcmFja2VyKCksYSxpO2lmKGchPT11bmRlZmluZWQpe2lmKGQuY29uc3RyYWluKXthPWMudGh1bWJzW2IrMV07aT1jLnRodW1ic1tiLTFdO2lmKGkhPT11bmRlZmluZWQmJmc8PWkudmFsdWUpe2c9aS52YWx1ZX1pZihhIT09dW5kZWZpbmVkJiZnPj1hLnZhbHVlKXtnPWEudmFsdWV9fWMuc2V0VmFsdWUoYixnLGZhbHNlKTtjLmZpcmVFdmVudCgiZHJhZyIsYyxoLGQpfX0sZ2V0VmFsdWVGcm9tVHJhY2tlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2xpZGVyLGI9YS5nZXRUcmFja3BvaW50KHRoaXMudHJhY2tlci5nZXRYWSgpKTtpZihiIT09dW5kZWZpbmVkKXtyZXR1cm4gYS5yZXZlcnNlUGl4ZWxWYWx1ZShiKX19LG9uRHJhZ0VuZDpmdW5jdGlvbihkKXt2YXIgYj10aGlzLGE9Yi5zbGlkZXIsYz1iLnZhbHVlO2IuZWwucmVtb3ZlQ2xzKEV4dC5iYXNlQ1NTUHJlZml4KyJzbGlkZXItdGh1bWItZHJhZyIpO2IuZHJhZ2dpbmc9YS5kcmFnZ2luZz1mYWxzZTthLmZpcmVFdmVudCgiZHJhZ2VuZCIsYSxkKTtpZihiLmRyYWdTdGFydFZhbHVlIT1jKXthLmZpcmVFdmVudCgiY2hhbmdlY29tcGxldGUiLGEsYyxiKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuZGVzdHJveSh0aGlzLnRyYWNrZXIpfX0pO0V4dC5kZWZpbmUoIkV4dC5zbGlkZXIuVGlwIix7ZXh0ZW5kOiJFeHQudGlwLlRpcCIsbWluV2lkdGg6MTAsYWxpYXM6IndpZGdldC5zbGlkZXJ0aXAiLG9mZnNldHM6bnVsbCxhbGlnbjpudWxsLHBvc2l0aW9uOiIiLGRlZmF1bHRWZXJ0aWNhbFBvc2l0aW9uOiJsZWZ0IixkZWZhdWx0SG9yaXpvbnRhbFBvc2l0aW9uOiJ0b3AiLGlzU2xpZGVyVGlwOnRydWUsaW5pdDpmdW5jdGlvbihjKXt2YXIgYj10aGlzLGQsYTtpZighYi5wb3NpdGlvbil7Yi5wb3NpdGlvbj1jLnZlcnRpY2FsP2IuZGVmYXVsdFZlcnRpY2FsUG9zaXRpb246Yi5kZWZhdWx0SG9yaXpvbnRhbFBvc2l0aW9ufXN3aXRjaChiLnBvc2l0aW9uKXtjYXNlInRvcCI6YT1bMCwtMTBdO2Q9ImItdD8iO2JyZWFrO2Nhc2UiYm90dG9tIjphPVswLDEwXTtkPSJ0LWI/IjticmVhaztjYXNlImxlZnQiOmE9Wy0xMCwwXTtkPSJyLWw/IjticmVhaztjYXNlInJpZ2h0IjphPVsxMCwwXTtkPSJsLXI/In1pZighYi5hbGlnbil7Yi5hbGlnbj1kfWlmKCFiLm9mZnNldHMpe2Iub2Zmc2V0cz1hfWMub24oe3Njb3BlOmIsZHJhZ3N0YXJ0OmIub25TbGlkZSxkcmFnOmIub25TbGlkZSxkcmFnZW5kOmIuaGlkZSxkZXN0cm95OmIuZGVzdHJveX0pfSxvblNsaWRlOmZ1bmN0aW9uKGMsZCxhKXt2YXIgYj10aGlzO2Iuc2hvdygpO2IudXBkYXRlKGIuZ2V0VGV4dChhKSk7Yi5lbC5hbGlnblRvKGEuZWwsYi5hbGlnbixiLm9mZnNldHMpfSxnZXRUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBTdHJpbmcoYS52YWx1ZSl9fSk7RXh0LmRlZmluZSgiRXh0LnNsaWRlci5NdWx0aSIse2V4dGVuZDoiRXh0LmZvcm0uZmllbGQuQmFzZSIsYWxpYXM6IndpZGdldC5tdWx0aXNsaWRlciIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuc2xpZGVyLk11bHRpU2xpZGVyIixyZXF1aXJlczpbIkV4dC5zbGlkZXIuVGh1bWIiLCJFeHQuc2xpZGVyLlRpcCIsIkV4dC5OdW1iZXIiLCJFeHQudXRpbC5Gb3JtYXQiLCJFeHQuVGVtcGxhdGUiLCJFeHQubGF5b3V0LmNvbXBvbmVudC5maWVsZC5TbGlkZXIiXSxjaGlsZEVsczpbImVuZEVsIiwiaW5uZXJFbCJdLGZpZWxkU3ViVHBsOlsnPGRpdiBpZD0ie2lkfSIgY2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrJ3NsaWRlciB7ZmllbGRDbHN9IHt2ZXJ0aWNhbH0iIGFyaWEtdmFsdWVtaW49InttaW5WYWx1ZX0iIGFyaWEtdmFsdWVtYXg9InttYXhWYWx1ZX0iIGFyaWEtdmFsdWVub3c9Int2YWx1ZX0iIGFyaWEtdmFsdWV0ZXh0PSJ7dmFsdWV9Ij4nLCc8ZGl2IGlkPSJ7Y21wSWR9LWVuZEVsIiBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsnc2xpZGVyLWVuZCIgcm9sZT0icHJlc2VudGF0aW9uIj4nLCc8ZGl2IGlkPSJ7Y21wSWR9LWlubmVyRWwiIGNsYXNzPSInK0V4dC5iYXNlQ1NTUHJlZml4KydzbGlkZXItaW5uZXIiIHJvbGU9InByZXNlbnRhdGlvbiI+JywieyV0aGlzLnJlbmRlclRodW1icyhvdXQsIHZhbHVlcyklfSIsIjwvZGl2PiIsIjwvZGl2PiIsIjwvZGl2PiIse3JlbmRlclRodW1iczpmdW5jdGlvbihnLGUpe3ZhciBqPWUuJGNvbXAsaD0wLGM9ai50aHVtYnMsYj1jLmxlbmd0aCxkLGE7Zm9yKDtoPGI7aCsrKXtkPWNbaF07YT1kLmdldEVsQ29uZmlnKCk7YS5pZD1qLmlkKyItdGh1bWItIitoO0V4dC5Eb21IZWxwZXIuZ2VuZXJhdGVNYXJrdXAoYSxnKX19LGRpc2FibGVGb3JtYXRzOnRydWV9XSx2ZXJ0aWNhbDpmYWxzZSxtaW5WYWx1ZTowLG1heFZhbHVlOjEwMCxkZWNpbWFsUHJlY2lzaW9uOjAsa2V5SW5jcmVtZW50OjEsaW5jcmVtZW50OjAsY2xpY2tSYW5nZTpbNSwxNV0sY2xpY2tUb0NoYW5nZTp0cnVlLGFuaW1hdGU6dHJ1ZSxkcmFnZ2luZzpmYWxzZSxjb25zdHJhaW5UaHVtYnM6dHJ1ZSxjb21wb25lbnRMYXlvdXQ6InNsaWRlcmZpZWxkIix1c2VUaXBzOnRydWUsdGlwVGV4dDpudWxsLGFyaWFSb2xlOiJzbGlkZXIiLGluaXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsYz1FeHQudmFsdWUsYj1jKGUudmFsdWVzLFtjKGUudmFsdWUsYyhlLm1pblZhbHVlLDApKV0pLGQ9MCxhPWIubGVuZ3RoO2Uub3JpZ2luYWxWYWx1ZT1iO2Zvcig7ZDxhO2QrKyl7ZS5hZGRUaHVtYihiW2RdKX19LGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLGMsZCxnLGIsYTtlLnRodW1icz1bXTtlLmtleUluY3JlbWVudD1NYXRoLm1heChlLmluY3JlbWVudCxlLmtleUluY3JlbWVudCk7ZS5hZGRFdmVudHMoImJlZm9yZWNoYW5nZSIsImNoYW5nZSIsImNoYW5nZWNvbXBsZXRlIiwiZHJhZ3N0YXJ0IiwiZHJhZyIsImRyYWdlbmQiKTtpZihlLmluY3JlbWVudCl7ZS5tYXhWYWx1ZT1FeHQuTnVtYmVyLnNuYXBJblJhbmdlKGUubWF4VmFsdWUsZS5pbmNyZW1lbnQsZS5taW5WYWx1ZSk7ZS52YWx1ZT1lLm5vcm1hbGl6ZVZhbHVlKGUudmFsdWUpfWUuY2FsbFBhcmVudCgpO2lmKGUudXNlVGlwcyl7aWYoRXh0LmlzT2JqZWN0KGUudXNlVGlwcykpe2M9RXh0LmFwcGx5KHt9LGUudXNlVGlwcyl9ZWxzZXtjPWUudGlwVGV4dD97Z2V0VGV4dDplLnRpcFRleHR9Ont9fWE9ZS5wbHVnaW5zPWUucGx1Z2luc3x8W107Yj1hLmxlbmd0aDtmb3IoZz0wO2c8YjtnKyspe2lmKGFbZ10uaXNTbGlkZXJUaXApe2Q9dHJ1ZTticmVha319aWYoIWQpe2UucGx1Z2lucy5wdXNoKG5ldyBFeHQuc2xpZGVyLlRpcChjKSl9fX0sYWRkVGh1bWI6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcyxhPW5ldyBFeHQuc2xpZGVyLlRodW1iKHtvd25lckN0OmIsb3duZXJMYXlvdXQ6Yi5nZXRDb21wb25lbnRMYXlvdXQoKSx2YWx1ZTpjLHNsaWRlcjpiLGluZGV4OmIudGh1bWJzLmxlbmd0aCxjb25zdHJhaW46Yi5jb25zdHJhaW5UaHVtYnMsZGlzYWJsZWQ6ISFiLnJlYWRPbmx5fSk7Yi50aHVtYnMucHVzaChhKTtpZihiLnJlbmRlcmVkKXthLnJlbmRlcigpfXJldHVybiBhfSxwcm9tb3RlVGh1bWI6ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcy50aHVtYnMsZT1hLmxlbmd0aCxnLGIsZDtmb3IoZD0wO2Q8ZTtkKyspe2I9YVtkXTtpZihiPT1jKXtiLmJyaW5nVG9Gcm9udCgpfWVsc2V7Yi5zZW5kVG9CYWNrKCl9fX0sZ2V0U3ViVHBsRGF0YTpmdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIEV4dC5hcHBseShhLmNhbGxQYXJlbnQoKSx7JGNvbXA6YSx2ZXJ0aWNhbDphLnZlcnRpY2FsP0V4dC5iYXNlQ1NTUHJlZml4KyJzbGlkZXItdmVydCI6RXh0LmJhc2VDU1NQcmVmaXgrInNsaWRlci1ob3J6IixtaW5WYWx1ZTphLm1pblZhbHVlLG1heFZhbHVlOmEubWF4VmFsdWUsdmFsdWU6YS52YWx1ZX0pfSxvblJlbmRlcjpmdW5jdGlvbigpe3ZhciBlPXRoaXMsYj1lLnRodW1icyxhPWIubGVuZ3RoLGQ9MCxjO2UuY2FsbFBhcmVudChhcmd1bWVudHMpO2ZvcihkPTA7ZDxhO2QrKyl7Yz1iW2RdO2MuZWw9ZS5lbC5nZXRCeUlkKGUuaWQrIi10aHVtYi0iK2QpO2Mub25SZW5kZXIoKX19LGluaXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EubW9uKGEuZWwse3Njb3BlOmEsbW91c2Vkb3duOmEub25Nb3VzZURvd24sa2V5ZG93bjphLm9uS2V5RG93bn0pfSxnZXRUcmFja3BvaW50OmZ1bmN0aW9uKGcpe3ZhciBlPXRoaXMsYixkLGM9ZS5pbm5lckVsLGE7aWYoZS52ZXJ0aWNhbCl7ZD0idG9wIjthPWMuZ2V0SGVpZ2h0KCl9ZWxzZXtkPSJsZWZ0IjthPWMuZ2V0V2lkdGgoKX1iPUV4dC5OdW1iZXIuY29uc3RyYWluKGMudHJhbnNsYXRlUG9pbnRzKGcpW2RdLDAsYSk7cmV0dXJuIGUudmVydGljYWw/YS1iOmJ9LG9uTW91c2VEb3duOmZ1bmN0aW9uKGope3ZhciBkPXRoaXMsaD1mYWxzZSxjPTAsYj1kLnRodW1icyxhPWIubGVuZ3RoLGc7aWYoZC5kaXNhYmxlZCl7cmV0dXJufWZvcig7YzxhO2MrKyl7aD1ofHxqLnRhcmdldD09YltjXS5lbC5kb219aWYoZC5jbGlja1RvQ2hhbmdlJiYhaCl7Zz1kLmdldFRyYWNrcG9pbnQoai5nZXRYWSgpKTtpZihnIT09dW5kZWZpbmVkKXtkLm9uQ2xpY2tDaGFuZ2UoZyl9fWQuZm9jdXMoKX0sb25DbGlja0NoYW5nZTpmdW5jdGlvbihkKXt2YXIgYz10aGlzLGEsYjthPWMuZ2V0TmVhcmVzdChkKTtpZighYS5kaXNhYmxlZCl7Yj1hLmluZGV4O2Muc2V0VmFsdWUoYixFeHQudXRpbC5Gb3JtYXQucm91bmQoYy5yZXZlcnNlUGl4ZWxWYWx1ZShkKSxjLmRlY2ltYWxQcmVjaXNpb24pLHVuZGVmaW5lZCx0cnVlKX19LGdldE5lYXJlc3Q6ZnVuY3Rpb24oail7dmFyIGs9dGhpcyxnPWsucmV2ZXJzZVBpeGVsVmFsdWUoaiksbD0oay5tYXhWYWx1ZS1rLm1pblZhbHVlKSs1LGI9bnVsbCxlPWsudGh1bWJzLGM9MCxkPWUubGVuZ3RoLGEsbSxoO2Zvcig7YzxkO2MrKyl7YT1rLnRodW1ic1tjXTttPWEudmFsdWU7aD1NYXRoLmFicyhtLWcpO2lmKE1hdGguYWJzKGg8PWwpKXtiPWE7bD1ofX1yZXR1cm4gYn0sb25LZXlEb3duOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYSxkO2lmKGIuZGlzYWJsZWR8fGIudGh1bWJzLmxlbmd0aCE9PTEpe2MucHJldmVudERlZmF1bHQoKTtyZXR1cm59YT1jLmdldEtleSgpO3N3aXRjaChhKXtjYXNlIGMuVVA6Y2FzZSBjLlJJR0hUOmMuc3RvcEV2ZW50KCk7ZD1jLmN0cmxLZXk/Yi5tYXhWYWx1ZTpiLmdldFZhbHVlKDApK2Iua2V5SW5jcmVtZW50O2Iuc2V0VmFsdWUoMCxkLHVuZGVmaW5lZCx0cnVlKTticmVhaztjYXNlIGMuRE9XTjpjYXNlIGMuTEVGVDpjLnN0b3BFdmVudCgpO2Q9Yy5jdHJsS2V5P2IubWluVmFsdWU6Yi5nZXRWYWx1ZSgwKS1iLmtleUluY3JlbWVudDtiLnNldFZhbHVlKDAsZCx1bmRlZmluZWQsdHJ1ZSk7YnJlYWs7ZGVmYXVsdDpjLnByZXZlbnREZWZhdWx0KCl9fSxub3JtYWxpemVWYWx1ZTpmdW5jdGlvbihiKXt2YXIgYz10aGlzLGQ9RXh0Lk51bWJlcixhPWRbYy56ZXJvQmFzZWRTbmFwcGluZz8ic25hcCI6InNuYXBJblJhbmdlIl07Yj1hLmNhbGwoZCxiLGMuaW5jcmVtZW50LGMubWluVmFsdWUsYy5tYXhWYWx1ZSk7Yj1FeHQudXRpbC5Gb3JtYXQucm91bmQoYixjLmRlY2ltYWxQcmVjaXNpb24pO2I9RXh0Lk51bWJlci5jb25zdHJhaW4oYixjLm1pblZhbHVlLGMubWF4VmFsdWUpO3JldHVybiBifSxzZXRNaW5WYWx1ZTpmdW5jdGlvbihnKXt2YXIgZT10aGlzLGQ9MCxiPWUudGh1bWJzLGE9Yi5sZW5ndGgsYztlLm1pblZhbHVlPWc7aWYoZS5yZW5kZXJlZCl7ZS5pbnB1dEVsLmRvbS5zZXRBdHRyaWJ1dGUoImFyaWEtdmFsdWVtaW4iLGcpfWZvcig7ZDxhOysrZCl7Yz1iW2RdO2MudmFsdWU9Yy52YWx1ZTxnP2c6Yy52YWx1ZX1lLnN5bmNUaHVtYnMoKX0sc2V0TWF4VmFsdWU6ZnVuY3Rpb24oZyl7dmFyIGU9dGhpcyxkPTAsYj1lLnRodW1icyxhPWIubGVuZ3RoLGM7ZS5tYXhWYWx1ZT1nO2lmKGUucmVuZGVyZWQpe2UuaW5wdXRFbC5kb20uc2V0QXR0cmlidXRlKCJhcmlhLXZhbHVlbWF4IixnKX1mb3IoO2Q8YTsrK2Qpe2M9YltkXTtjLnZhbHVlPWMudmFsdWU+Zz9nOmMudmFsdWV9ZS5zeW5jVGh1bWJzKCl9LHNldFZhbHVlOmZ1bmN0aW9uKGMsZyxiLGUpe3ZhciBkPXRoaXMsYT1kLnRodW1ic1tjXTtnPWQubm9ybWFsaXplVmFsdWUoZyk7aWYoZyE9PWEudmFsdWUmJmQuZmlyZUV2ZW50KCJiZWZvcmVjaGFuZ2UiLGQsZyxhLnZhbHVlLGEpIT09ZmFsc2Upe2EudmFsdWU9ZztpZihkLnJlbmRlcmVkKXtkLmlucHV0RWwuc2V0KHsiYXJpYS12YWx1ZW5vdyI6ZywiYXJpYS12YWx1ZXRleHQiOmd9KTthLm1vdmUoZC5jYWxjdWxhdGVUaHVtYlBvc2l0aW9uKGcpLEV4dC5pc0RlZmluZWQoYik/YiE9PWZhbHNlOmQuYW5pbWF0ZSk7ZC5maXJlRXZlbnQoImNoYW5nZSIsZCxnLGEpO2QuY2hlY2tEaXJ0eSgpO2lmKGUpe2QuZmlyZUV2ZW50KCJjaGFuZ2Vjb21wbGV0ZSIsZCxnLGEpfX19fSxjYWxjdWxhdGVUaHVtYlBvc2l0aW9uOmZ1bmN0aW9uKGEpe3JldHVybihhLXRoaXMubWluVmFsdWUpLyh0aGlzLm1heFZhbHVlLXRoaXMubWluVmFsdWUpKjEwMH0sZ2V0UmF0aW86ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9dGhpcy52ZXJ0aWNhbD90aGlzLmlubmVyRWwuZ2V0SGVpZ2h0KCk6dGhpcy5pbm5lckVsLmdldFdpZHRoKCksYz10aGlzLm1heFZhbHVlLXRoaXMubWluVmFsdWU7cmV0dXJuIGM9PT0wP2E6KGEvYyl9LHJldmVyc2VQaXhlbFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1pblZhbHVlKyhhL3RoaXMuZ2V0UmF0aW8oKSl9LHJldmVyc2VQZXJjZW50YWdlVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWluVmFsdWUrKHRoaXMubWF4VmFsdWUtdGhpcy5taW5WYWx1ZSkqKGEvMTAwKX0sb25EaXNhYmxlOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcyxkPTAsYj1nLnRodW1icyxhPWIubGVuZ3RoLGMsZSxoO2cuY2FsbFBhcmVudCgpO2Zvcig7ZDxhO2QrKyl7Yz1iW2RdO2U9Yy5lbDtjLmRpc2FibGUoKTtpZihFeHQuaXNJRSl7aD1lLmdldFhZKCk7ZS5oaWRlKCk7Zy5pbm5lckVsLmFkZENscyhnLmRpc2FibGVkQ2xzKS5kb20uZGlzYWJsZWQ9dHJ1ZTtpZighZy50aHVtYkhvbGRlcil7Zy50aHVtYkhvbGRlcj1nLmVuZEVsLmNyZWF0ZUNoaWxkKHtjbHM6RXh0LmJhc2VDU1NQcmVmaXgrInNsaWRlci10aHVtYiAiK2cuZGlzYWJsZWRDbHN9KX1nLnRodW1iSG9sZGVyLnNob3coKS5zZXRYWShoKX19fSxvbkVuYWJsZTpmdW5jdGlvbigpe3ZhciBnPXRoaXMsZD0wLGI9Zy50aHVtYnMsYT1iLmxlbmd0aCxjLGU7dGhpcy5jYWxsUGFyZW50KCk7Zm9yKDtkPGE7ZCsrKXtjPWJbZF07ZT1jLmVsO2MuZW5hYmxlKCk7aWYoRXh0LmlzSUUpe2cuaW5uZXJFbC5yZW1vdmVDbHMoZy5kaXNhYmxlZENscykuZG9tLmRpc2FibGVkPWZhbHNlO2lmKGcudGh1bWJIb2xkZXIpe2cudGh1bWJIb2xkZXIuaGlkZSgpfWUuc2hvdygpO2cuc3luY1RodW1icygpfX19LHN5bmNUaHVtYnM6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkKXt2YXIgYT10aGlzLnRodW1icyxjPWEubGVuZ3RoLGI9MDtmb3IoO2I8YztiKyspe2FbYl0ubW92ZSh0aGlzLmNhbGN1bGF0ZVRodW1iUG9zaXRpb24oYVtiXS52YWx1ZSkpfX19LGdldFZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuaXNOdW1iZXIoYSk/dGhpcy50aHVtYnNbYV0udmFsdWU6dGhpcy5nZXRWYWx1ZXMoKX0sZ2V0VmFsdWVzOmZ1bmN0aW9uKCl7dmFyIGM9W10sZD0wLGI9dGhpcy50aHVtYnMsYT1iLmxlbmd0aDtmb3IoO2Q8YTtkKyspe2MucHVzaChiW2RdLnZhbHVlKX1yZXR1cm4gY30sZ2V0U3VibWl0VmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybihhLmRpc2FibGVkfHwhYS5zdWJtaXRWYWx1ZSk/bnVsbDphLmdldFZhbHVlKCl9LHJlc2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxiPVtdLmNvbmNhdChlLm9yaWdpbmFsVmFsdWUpLGM9MCxkPWIubGVuZ3RoLGc7Zm9yKDtjPGQ7YysrKXtnPWJbY107ZS5zZXRWYWx1ZShjLGcpfWUuY2xlYXJJbnZhbGlkKCk7ZGVsZXRlIGUud2FzVmFsaWR9LHNldFJlYWRPbmx5OmZ1bmN0aW9uKGUpe3ZhciBkPXRoaXMsYj1kLnRodW1icyxhPWIubGVuZ3RoLGM9MDtkLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtlPWQucmVhZE9ubHk7Zm9yKDtjPGE7KytjKXtpZihlKXtiW2NdLmRpc2FibGUoKX1lbHNle2JbY10uZW5hYmxlKCl9fX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3ZhciBlPXRoaXMsYj1lLnRodW1icyxkPTAsYT1iLmxlbmd0aCxjO0V4dC5kZXN0cm95KGUuaW5uZXJFbCxlLmVuZEVsLGUuZm9jdXNFbCk7Zm9yKDtkPGE7ZCsrKXtjPWJbZF07RXh0LmRlc3Ryb3koYyl9ZS5jYWxsUGFyZW50KCl9fSk7RXh0LmRlZmluZSgiRXh0LnNsaWRlci5TaW5nbGUiLHtleHRlbmQ6IkV4dC5zbGlkZXIuTXVsdGkiLGFsaWFzOlsid2lkZ2V0LnNsaWRlciIsIndpZGdldC5zbGlkZXJmaWVsZCJdLGFsdGVybmF0ZUNsYXNzTmFtZTpbIkV4dC5TbGlkZXIiLCJFeHQuZm9ybS5TbGlkZXJGaWVsZCIsIkV4dC5zbGlkZXIuU2luZ2xlU2xpZGVyIiwiRXh0LnNsaWRlci5TbGlkZXIiXSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbGxQYXJlbnQoWzBdKX0sc2V0VmFsdWU6ZnVuY3Rpb24oZCxiKXt2YXIgYz1hcmd1bWVudHMsYT1jLmxlbmd0aDtpZihhPT0xfHwoYTw9MyYmdHlwZW9mIGNbMV0hPSJudW1iZXIiKSl7Yz1FeHQudG9BcnJheShjKTtjLnVuc2hpZnQoMCl9cmV0dXJuIHRoaXMuY2FsbFBhcmVudChjKX0sZ2V0TmVhcmVzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRodW1ic1swXX19KTtFeHQuZGVmaW5lKCJFeHQuc3RhdGUuQ29va2llUHJvdmlkZXIiLHtleHRlbmQ6IkV4dC5zdGF0ZS5Qcm92aWRlciIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLnBhdGg9Ii8iO2IuZXhwaXJlcz1uZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSsoMTAwMCo2MCo2MCoyNCo3KSk7Yi5kb21haW49bnVsbDtiLnNlY3VyZT1mYWxzZTtiLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtiLnN0YXRlPWIucmVhZENvb2tpZXMoKX0sc2V0OmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcztpZih0eXBlb2YgYz09InVuZGVmaW5lZCJ8fGM9PT1udWxsKXtiLmNsZWFyKGEpO3JldHVybn1iLnNldENvb2tpZShhLGMpO2IuY2FsbFBhcmVudChhcmd1bWVudHMpfSxjbGVhcjpmdW5jdGlvbihhKXt0aGlzLmNsZWFyQ29va2llKGEpO3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxyZWFkQ29va2llczpmdW5jdGlvbigpe3ZhciBlPXt9LGo9ZG9jdW1lbnQuY29va2llKyI7IixkPS9ccz8oLio/KT0oLio/KTsvZyxpPXRoaXMucHJlZml4LGE9aS5sZW5ndGgsaCxiLGc7d2hpbGUoKGg9ZC5leGVjKGopKSE9bnVsbCl7Yj1oWzFdO2c9aFsyXTtpZihiJiZiLnN1YnN0cmluZygwLGEpPT1pKXtlW2Iuc3Vic3RyKGEpXT10aGlzLmRlY29kZVZhbHVlKGcpfX1yZXR1cm4gZX0sc2V0Q29va2llOmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcztkb2N1bWVudC5jb29raWU9Yi5wcmVmaXgrYSsiPSIrYi5lbmNvZGVWYWx1ZShjKSsoKGIuZXhwaXJlcz09bnVsbCk/IiI6KCI7IGV4cGlyZXM9IitiLmV4cGlyZXMudG9HTVRTdHJpbmcoKSkpKygoYi5wYXRoPT1udWxsKT8iIjooIjsgcGF0aD0iK2IucGF0aCkpKygoYi5kb21haW49PW51bGwpPyIiOigiOyBkb21haW49IitiLmRvbWFpbikpKygoYi5zZWN1cmU9PXRydWUpPyI7IHNlY3VyZSI6IiIpfSxjbGVhckNvb2tpZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2RvY3VtZW50LmNvb2tpZT1iLnByZWZpeCthKyI9bnVsbDsgZXhwaXJlcz1UaHUsIDAxLUphbi03MCAwMDowMDowMSBHTVQiKygoYi5wYXRoPT1udWxsKT8iIjooIjsgcGF0aD0iK2IucGF0aCkpKygoYi5kb21haW49PW51bGwpPyIiOigiOyBkb21haW49IitiLmRvbWFpbikpKygoYi5zZWN1cmU9PXRydWUpPyI7IHNlY3VyZSI6IiIpfX0pO0V4dC5kZWZpbmUoIkV4dC5zdGF0ZS5Mb2NhbFN0b3JhZ2VQcm92aWRlciIse2V4dGVuZDoiRXh0LnN0YXRlLlByb3ZpZGVyIixhbGlhczoic3RhdGUubG9jYWxzdG9yYWdlIixjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7YS5zdG9yZT1hLmdldFN0b3JhZ2VPYmplY3QoKTthLnN0YXRlPWEucmVhZExvY2FsU3RvcmFnZSgpfSxyZWFkTG9jYWxTdG9yYWdlOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5zdG9yZSxlPTAsYT1jLmxlbmd0aCxoPXRoaXMucHJlZml4LGI9aC5sZW5ndGgsZz17fSxkO2Zvcig7ZTxhOysrZSl7ZD1jLmtleShlKTtpZihkLnN1YnN0cmluZygwLGIpPT1oKXtnW2Quc3Vic3RyKGIpXT10aGlzLmRlY29kZVZhbHVlKGMuZ2V0SXRlbShkKSl9fXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxjKXt2YXIgYj10aGlzO2IuY2xlYXIoYSk7aWYodHlwZW9mIGM9PSJ1bmRlZmluZWQifHxjPT09bnVsbCl7cmV0dXJufWIuc3RvcmUuc2V0SXRlbShiLnByZWZpeCthLGIuZW5jb2RlVmFsdWUoYykpO2IuY2FsbFBhcmVudChhcmd1bWVudHMpfSxjbGVhcjpmdW5jdGlvbihhKXt0aGlzLnN0b3JlLnJlbW92ZUl0ZW0odGhpcy5wcmVmaXgrYSk7dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LGdldFN0b3JhZ2VPYmplY3Q6ZnVuY3Rpb24oKXt0cnl7dmFyIGE9ImxvY2FsU3RvcmFnZSIgaW4gd2luZG93JiZ3aW5kb3cubG9jYWxTdG9yYWdlIT09bnVsbDtpZihhKXtyZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZX19Y2F0Y2goYil7cmV0dXJuIGZhbHNlfX19KTtFeHQuZGVmaW5lKCJFeHQudGFiLlRhYiIse2V4dGVuZDoiRXh0LmJ1dHRvbi5CdXR0b24iLGFsaWFzOiJ3aWRnZXQudGFiIixyZXF1aXJlczpbIkV4dC5sYXlvdXQuY29tcG9uZW50LlRhYiIsIkV4dC51dGlsLktleU5hdiJdLGNvbXBvbmVudExheW91dDoidGFiIixpc1RhYjp0cnVlLGJhc2VDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInRhYiIsYWN0aXZlQ2xzOiJhY3RpdmUiLGNsb3NhYmxlQ2xzOiJjbG9zYWJsZSIsY2xvc2FibGU6dHJ1ZSxjbG9zZVRleHQ6IkNsb3NlIFRhYiIsYWN0aXZlOmZhbHNlLGNoaWxkRWxzOlsiY2xvc2VFbCJdLHNjYWxlOmZhbHNlLHBvc2l0aW9uOiJ0b3AiLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuYWRkRXZlbnRzKCJhY3RpdmF0ZSIsImRlYWN0aXZhdGUiLCJiZWZvcmVjbG9zZSIsImNsb3NlIik7YS5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoYS5jYXJkKXthLnNldENhcmQoYS5jYXJkKX19LGdldFRlbXBsYXRlQXJnczpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLmNhbGxQYXJlbnQoKTthLmNsb3NhYmxlPWIuY2xvc2FibGU7YS5jbG9zZVRleHQ9Yi5jbG9zZVRleHQ7cmV0dXJuIGF9LGJlZm9yZVJlbmRlcjpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYT1iLnVwKCJ0YWJiYXIiKSxjPWIudXAoInRhYnBhbmVsIik7Yi5jYWxsUGFyZW50KCk7Yi5hZGRDbHNXaXRoVUkoYi5wb3NpdGlvbik7Yi5zeW5jQ2xvc2FibGVVSSgpO2lmKCFiLm1pbldpZHRoKXtiLm1pbldpZHRoPShhKT9hLm1pblRhYldpZHRoOmIubWluV2lkdGg7aWYoIWIubWluV2lkdGgmJmMpe2IubWluV2lkdGg9Yy5taW5UYWJXaWR0aH1pZihiLm1pbldpZHRoJiZiLmljb25DbHMpe2IubWluV2lkdGgrPTI1fX1pZighYi5tYXhXaWR0aCl7Yi5tYXhXaWR0aD0oYSk/YS5tYXhUYWJXaWR0aDpiLm1heFdpZHRoO2lmKCFiLm1heFdpZHRoJiZjKXtiLm1heFdpZHRoPWMubWF4VGFiV2lkdGh9fX0sb25SZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2Eua2V5TmF2PW5ldyBFeHQudXRpbC5LZXlOYXYoYS5lbCx7ZW50ZXI6YS5vbkVudGVyS2V5LGRlbDphLm9uRGVsZXRlS2V5LHNjb3BlOmF9KX0sZW5hYmxlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5jYWxsUGFyZW50KGFyZ3VtZW50cyk7Yi5yZW1vdmVDbHNXaXRoVUkoYi5wb3NpdGlvbisiLWRpc2FibGVkIik7cmV0dXJuIGJ9LGRpc2FibGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtiLmFkZENsc1dpdGhVSShiLnBvc2l0aW9uKyItZGlzYWJsZWQiKTtyZXR1cm4gYn0sb25EZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztFeHQuZGVzdHJveShhLmtleU5hdik7ZGVsZXRlIGEua2V5TmF2O2EuY2FsbFBhcmVudChhcmd1bWVudHMpfSxzZXRDbG9zYWJsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2E9KCFhcmd1bWVudHMubGVuZ3RofHwhIWEpO2lmKGIuY2xvc2FibGUhPWEpe2IuY2xvc2FibGU9YTtpZihiLmNhcmQpe2IuY2FyZC5jbG9zYWJsZT1hfWIuc3luY0Nsb3NhYmxlVUkoKTtpZihiLnJlbmRlcmVkKXtiLnN5bmNDbG9zYWJsZUVsZW1lbnRzKCk7Yi51cGRhdGVMYXlvdXQoKX19fSxzeW5jQ2xvc2FibGVFbGVtZW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNsb3NlRWw7aWYoYS5jbG9zYWJsZSl7aWYoIWIpe2EuY2xvc2VFbD1hLmJ0bldyYXAuaW5zZXJ0U2libGluZyh7dGFnOiJhIixjbHM6YS5iYXNlQ2xzKyItY2xvc2UtYnRuIixocmVmOiIjIix0aXRsZTphLmNsb3NlVGV4dH0sImFmdGVyIil9fWVsc2V7aWYoYil7Yi5yZW1vdmUoKTtkZWxldGUgYS5jbG9zZUVsfX19LHN5bmNDbG9zYWJsZVVJOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPVtiLmNsb3NhYmxlQ2xzLGIuY2xvc2FibGVDbHMrIi0iK2IucG9zaXRpb25dO2lmKGIuY2xvc2FibGUpe2IuYWRkQ2xzV2l0aFVJKGEpfWVsc2V7Yi5yZW1vdmVDbHNXaXRoVUkoYSl9fSxzZXRDYXJkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5jYXJkPWE7Yi5zZXRUZXh0KGIudGl0bGV8fGEudGl0bGUpO2Iuc2V0SWNvbkNscyhiLmljb25DbHN8fGEuaWNvbkNscyk7Yi5zZXRJY29uKGIuaWNvbnx8YS5pY29uKX0sb25DbG9zZUNsaWNrOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLmZpcmVFdmVudCgiYmVmb3JlY2xvc2UiLGEpIT09ZmFsc2Upe2lmKGEudGFiQmFyKXtpZihhLnRhYkJhci5jbG9zZVRhYihhKT09PWZhbHNlKXtyZXR1cm59fWVsc2V7YS5maXJlQ2xvc2UoKX19fSxmaXJlQ2xvc2U6ZnVuY3Rpb24oKXt0aGlzLmZpcmVFdmVudCgiY2xvc2UiLHRoaXMpfSxvbkVudGVyS2V5OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7aWYoYS50YWJCYXIpe2EudGFiQmFyLm9uQ2xpY2soYixhLmVsKX19LG9uRGVsZXRlS2V5OmZ1bmN0aW9uKGEpe2lmKHRoaXMuY2xvc2FibGUpe3RoaXMub25DbG9zZUNsaWNrKCl9fSxhY3RpdmF0ZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2EuYWN0aXZlPXRydWU7YS5hZGRDbHNXaXRoVUkoW2EuYWN0aXZlQ2xzLGEucG9zaXRpb24rIi0iK2EuYWN0aXZlQ2xzXSk7aWYoYiE9PXRydWUpe2EuZmlyZUV2ZW50KCJhY3RpdmF0ZSIsYSl9fSxkZWFjdGl2YXRlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7YS5hY3RpdmU9ZmFsc2U7YS5yZW1vdmVDbHNXaXRoVUkoW2EuYWN0aXZlQ2xzLGEucG9zaXRpb24rIi0iK2EuYWN0aXZlQ2xzXSk7aWYoYiE9PXRydWUpe2EuZmlyZUV2ZW50KCJkZWFjdGl2YXRlIixhKX19fSk7RXh0LmRlZmluZSgiRXh0LnRhYi5CYXIiLHtleHRlbmQ6IkV4dC5wYW5lbC5IZWFkZXIiLGFsaWFzOiJ3aWRnZXQudGFiYmFyIixiYXNlQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ0YWItYmFyIixyZXF1aXJlczpbIkV4dC50YWIuVGFiIl0saXNUYWJCYXI6dHJ1ZSxkZWZhdWx0VHlwZToidGFiIixwbGFpbjpmYWxzZSxjaGlsZEVsczpbImJvZHkiLCJzdHJpcCJdLHJlbmRlclRwbDpbJzxkaXYgaWQ9IntpZH0tYm9keSIgY2xhc3M9IntiYXNlQ2xzfS1ib2R5IHtib2R5Q2xzfTx0cGwgaWY9InVpIj4ge2Jhc2VDbHN9LWJvZHkte3VpfTx0cGwgZm9yPSJ1aUNscyI+IHtwYXJlbnQuYmFzZUNsc30tYm9keS17cGFyZW50LnVpfS17Ln08L3RwbD48L3RwbD4iPHRwbCBpZj0iYm9keVN0eWxlIj4gc3R5bGU9Intib2R5U3R5bGV9IjwvdHBsPj4nLCJ7JXRoaXMucmVuZGVyQ29udGFpbmVyKG91dCx2YWx1ZXMpJX0iLCI8L2Rpdj4iLCc8ZGl2IGlkPSJ7aWR9LXN0cmlwIiBjbGFzcz0ie2Jhc2VDbHN9LXN0cmlwPHRwbCBpZj0idWkiPiB7YmFzZUNsc30tc3RyaXAte3VpfTx0cGwgZm9yPSJ1aUNscyI+IHtwYXJlbnQuYmFzZUNsc30tc3RyaXAte3BhcmVudC51aX0tey59PC90cGw+PC90cGw+Ij48L2Rpdj4nXSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZihhLnBsYWluKXthLnNldFVJKGEudWkrIi1wbGFpbiIpfWEuYWRkQ2xzV2l0aFVJKGEuZG9jayk7YS5hZGRFdmVudHMoImNoYW5nZSIpO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2EubGF5b3V0LmFsaWduPShhLm9yaWVudGF0aW9uPT0idmVydGljYWwiKT8ibGVmdCI6InRvcCI7YS5sYXlvdXQub3ZlcmZsb3dIYW5kbGVyPW5ldyBFeHQubGF5b3V0LmNvbnRhaW5lci5ib3hPdmVyZmxvdy5TY3JvbGxlcihhLmxheW91dCk7YS5yZW1vdmUoYS50aXRsZUNtcCk7ZGVsZXRlIGEudGl0bGVDbXA7RXh0LmFwcGx5KGEucmVuZGVyRGF0YSx7Ym9keUNsczphLmJvZHlDbHN9KX0sZ2V0TGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmxheW91dC50eXBlPShhLmRvY2s9PT0idG9wInx8YS5kb2NrPT09ImJvdHRvbSIpPyJoYm94IjoidmJveCI7cmV0dXJuIGEuY2FsbFBhcmVudChhcmd1bWVudHMpfSxvbkFkZDpmdW5jdGlvbihhKXthLnBvc2l0aW9uPXRoaXMuZG9jazt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sb25SZW1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztpZihhPT09Yi5wcmV2aW91c1RhYil7Yi5wcmV2aW91c1RhYj1udWxsfWIuY2FsbFBhcmVudChhcmd1bWVudHMpfSxhZnRlckNvbXBvbmVudExheW91dDpmdW5jdGlvbihhKXt0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKTt0aGlzLnN0cmlwLnNldFdpZHRoKGEpfSxvbkNsaWNrOmZ1bmN0aW9uKGcsZCl7dmFyIGM9dGhpcyxpPWcuZ2V0VGFyZ2V0KCIuIitFeHQudGFiLlRhYi5wcm90b3R5cGUuYmFzZUNscyksYj1pJiZFeHQuZ2V0Q21wKGkuaWQpLGg9Yy50YWJQYW5lbCxhPWImJmIuY2xvc2VFbCYmKGQ9PT1iLmNsb3NlRWwuZG9tKTtpZihhKXtnLnByZXZlbnREZWZhdWx0KCl9aWYoYiYmYi5pc0Rpc2FibGVkJiYhYi5pc0Rpc2FibGVkKCkpe2lmKGIuY2xvc2FibGUmJmEpe2Iub25DbG9zZUNsaWNrKCl9ZWxzZXtpZihoKXtoLnNldEFjdGl2ZVRhYihiLmNhcmQpfWVsc2V7Yy5zZXRBY3RpdmVUYWIoYil9Yi5mb2N1cygpfX19LGNsb3NlVGFiOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMsYj1jLmNhcmQsZT1kLnRhYlBhbmVsLGE7aWYoYiYmYi5maXJlRXZlbnQoImJlZm9yZWNsb3NlIixiKT09PWZhbHNlKXtyZXR1cm4gZmFsc2V9YT1kLmZpbmROZXh0QWN0aXZhdGFibGUoYyk7RXh0LnN1c3BlbmRMYXlvdXRzKCk7aWYoZSYmYil7ZGVsZXRlIGMub3duZXJDdDtiLmZpcmVFdmVudCgiY2xvc2UiLGIpO2UucmVtb3ZlKGIpO2lmKCFlLmdldENvbXBvbmVudChiKSl7Yy5maXJlQ2xvc2UoKTtkLnJlbW92ZShjKX1lbHNle2Mub3duZXJDdD1kO0V4dC5yZXN1bWVMYXlvdXRzKHRydWUpO3JldHVybiBmYWxzZX19aWYoYSl7aWYoZSl7ZS5zZXRBY3RpdmVUYWIoYS5jYXJkKX1lbHNle2Quc2V0QWN0aXZlVGFiKGEpfWEuZm9jdXMoKX1FeHQucmVzdW1lTGF5b3V0cyh0cnVlKX0sZmluZE5leHRBY3RpdmF0YWJsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGEuYWN0aXZlJiZiLml0ZW1zLmdldENvdW50KCk+MSl7cmV0dXJuKGIucHJldmlvdXNUYWImJmIucHJldmlvdXNUYWIhPT1hJiYhYi5wcmV2aW91c1RhYi5kaXNhYmxlZCk/Yi5wcmV2aW91c1RhYjooYS5uZXh0KCJ0YWJbZGlzYWJsZWQ9ZmFsc2VdIil8fGEucHJldigidGFiW2Rpc2FibGVkPWZhbHNlXSIpKX19LHNldEFjdGl2ZVRhYjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKCFhLmRpc2FibGVkJiZhIT09Yi5hY3RpdmVUYWIpe2lmKGIuYWN0aXZlVGFiKXtpZihiLmFjdGl2ZVRhYi5pc0Rlc3Ryb3llZCl7Yi5wcmV2aW91c1RhYj1udWxsfWVsc2V7Yi5wcmV2aW91c1RhYj1iLmFjdGl2ZVRhYjtiLmFjdGl2ZVRhYi5kZWFjdGl2YXRlKCl9fWEuYWN0aXZhdGUoKTtiLmFjdGl2ZVRhYj1hO2IuZmlyZUV2ZW50KCJjaGFuZ2UiLGIsYSxhLmNhcmQpO2Iub24oe2FmdGVybGF5b3V0OmIuYWZ0ZXJUYWJBY3RpdmF0ZSxzY29wZTpiLHNpbmdsZTp0cnVlfSk7Yi51cGRhdGVMYXlvdXQoKX19LGFmdGVyVGFiQWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLmxheW91dC5vdmVyZmxvd0hhbmRsZXIuc2Nyb2xsVG9JdGVtKHRoaXMuYWN0aXZlVGFiKX19KTtFeHQuZGVmaW5lKCJFeHQudGFiLlBhbmVsIix7ZXh0ZW5kOiJFeHQucGFuZWwuUGFuZWwiLGFsaWFzOiJ3aWRnZXQudGFicGFuZWwiLGFsdGVybmF0ZUNsYXNzTmFtZTpbIkV4dC5UYWJQYW5lbCJdLHJlcXVpcmVzOlsiRXh0LmxheW91dC5jb250YWluZXIuQ2FyZCIsIkV4dC50YWIuQmFyIl0sdGFiUG9zaXRpb246InRvcCIscmVtb3ZlUGFuZWxIZWFkZXI6dHJ1ZSxwbGFpbjpmYWxzZSxpdGVtQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ0YWJwYW5lbC1jaGlsZCIsbWluVGFiV2lkdGg6dW5kZWZpbmVkLG1heFRhYldpZHRoOnVuZGVmaW5lZCxkZWZlcnJlZFJlbmRlcjp0cnVlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLGI9W10uY29uY2F0KGMuZG9ja2VkSXRlbXN8fFtdKSxhPWMuYWN0aXZlVGFifHwoYy5hY3RpdmVUYWI9MCk7Yy5sYXlvdXQ9bmV3IEV4dC5sYXlvdXQuY29udGFpbmVyLkNhcmQoRXh0LmFwcGx5KHtvd25lcjpjLGRlZmVycmVkUmVuZGVyOmMuZGVmZXJyZWRSZW5kZXIsaXRlbUNsczpjLml0ZW1DbHMsYWN0aXZlSXRlbTpjLmFjdGl2ZVRhYn0sYy5sYXlvdXQpKTtjLnRhYkJhcj1uZXcgRXh0LnRhYi5CYXIoRXh0LmFwcGx5KHtkb2NrOmMudGFiUG9zaXRpb24scGxhaW46Yy5wbGFpbixib3JkZXI6Yy5ib3JkZXIsY2FyZExheW91dDpjLmxheW91dCx0YWJQYW5lbDpjfSxjLnRhYkJhcikpO2IucHVzaChjLnRhYkJhcik7Yy5kb2NrZWRJdGVtcz1iO2MuYWRkRXZlbnRzKCJiZWZvcmV0YWJjaGFuZ2UiLCJ0YWJjaGFuZ2UiKTtjLmNhbGxQYXJlbnQoYXJndW1lbnRzKTtjLmFjdGl2ZVRhYj1jLmdldENvbXBvbmVudChhKTtpZihjLmFjdGl2ZVRhYil7Yy5hY3RpdmVUYWIudGFiLmFjdGl2YXRlKHRydWUpO2MudGFiQmFyLmFjdGl2ZVRhYj1jLmFjdGl2ZVRhYi50YWJ9fSxzZXRBY3RpdmVUYWI6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxiO2E9Yy5nZXRDb21wb25lbnQoYSk7aWYoYSl7Yj1jLmdldEFjdGl2ZVRhYigpO2lmKGIhPT1hJiZjLmZpcmVFdmVudCgiYmVmb3JldGFiY2hhbmdlIixjLGEsYik9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfWlmKCFhLmlzQ29tcG9uZW50KXtFeHQuc3VzcGVuZExheW91dHMoKTthPWMuYWRkKGEpO0V4dC5yZXN1bWVMYXlvdXRzKCl9Yy5hY3RpdmVUYWI9YTtFeHQuc3VzcGVuZExheW91dHMoKTtjLmxheW91dC5zZXRBY3RpdmVJdGVtKGEpO2E9Yy5hY3RpdmVUYWI9Yy5sYXlvdXQuZ2V0QWN0aXZlSXRlbSgpO2lmKGEmJmEhPT1iKXtjLnRhYkJhci5zZXRBY3RpdmVUYWIoYS50YWIpO0V4dC5yZXN1bWVMYXlvdXRzKHRydWUpO2lmKGIhPT1hKXtjLmZpcmVFdmVudCgidGFiY2hhbmdlIixjLGEsYil9fWVsc2V7RXh0LnJlc3VtZUxheW91dHModHJ1ZSl9cmV0dXJuIGF9fSxnZXRBY3RpdmVUYWI6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9Yi5nZXRDb21wb25lbnQoYi5hY3RpdmVUYWIpO2lmKGEmJmIuaXRlbXMuaW5kZXhPZihhKSE9LTEpe2IuYWN0aXZlVGFiPWF9ZWxzZXtiLmFjdGl2ZVRhYj1udWxsfXJldHVybiBiLmFjdGl2ZVRhYn0sZ2V0VGFiQmFyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFiQmFyfSxvbkFkZDpmdW5jdGlvbihlLGMpe3ZhciBkPXRoaXMsYj1lLnRhYkNvbmZpZ3x8e30sYT17eHR5cGU6InRhYiIsY2FyZDplLGRpc2FibGVkOmUuZGlzYWJsZWQsY2xvc2FibGU6ZS5jbG9zYWJsZSxoaWRkZW46ZS5oaWRkZW4mJiFlLmhpZGRlbkJ5TGF5b3V0LHRvb2x0aXA6ZS50b29sdGlwLHRhYkJhcjpkLnRhYkJhcixjbG9zZVRleHQ6ZS5jbG9zZVRleHR9O2I9RXh0LmFwcGx5SWYoYixhKTtlLnRhYj1kLnRhYkJhci5pbnNlcnQoYyxiKTtlLm9uKHtzY29wZTpkLGVuYWJsZTpkLm9uSXRlbUVuYWJsZSxkaXNhYmxlOmQub25JdGVtRGlzYWJsZSxiZWZvcmVzaG93OmQub25JdGVtQmVmb3JlU2hvdyxpY29uY2hhbmdlOmQub25JdGVtSWNvbkNoYW5nZSxpY29uY2xzY2hhbmdlOmQub25JdGVtSWNvbkNsc0NoYW5nZSx0aXRsZWNoYW5nZTpkLm9uSXRlbVRpdGxlQ2hhbmdlfSk7aWYoZS5pc1BhbmVsKXtpZihkLnJlbW92ZVBhbmVsSGVhZGVyKXtpZihlLnJlbmRlcmVkKXtpZihlLmhlYWRlcil7ZS5oZWFkZXIuaGlkZSgpfX1lbHNle2UuaGVhZGVyPWZhbHNlfX1pZihlLmlzUGFuZWwmJmQuYm9yZGVyKXtlLnNldEJvcmRlcihmYWxzZSl9fX0sb25JdGVtRW5hYmxlOmZ1bmN0aW9uKGEpe2EudGFiLmVuYWJsZSgpfSxvbkl0ZW1EaXNhYmxlOmZ1bmN0aW9uKGEpe2EudGFiLmRpc2FibGUoKX0sb25JdGVtQmVmb3JlU2hvdzpmdW5jdGlvbihhKXtpZihhIT09dGhpcy5hY3RpdmVUYWIpe3RoaXMuc2V0QWN0aXZlVGFiKGEpO3JldHVybiBmYWxzZX19LG9uSXRlbUljb25DaGFuZ2U6ZnVuY3Rpb24oYixhKXtiLnRhYi5zZXRJY29uKGEpfSxvbkl0ZW1JY29uQ2xzQ2hhbmdlOmZ1bmN0aW9uKGIsYSl7Yi50YWIuc2V0SWNvbkNscyhhKX0sb25JdGVtVGl0bGVDaGFuZ2U6ZnVuY3Rpb24oYSxiKXthLnRhYi5zZXRUZXh0KGIpfSxkb1JlbW92ZTpmdW5jdGlvbihkLGIpe3ZhciBjPXRoaXMsYTtpZihjLmRlc3Ryb3lpbmd8fGMuaXRlbXMuZ2V0Q291bnQoKT09MSl7Yy5hY3RpdmVUYWI9bnVsbH1lbHNle2lmKChhPWMudGFiQmFyLml0ZW1zLmluZGV4T2YoYy50YWJCYXIuZmluZE5leHRBY3RpdmF0YWJsZShkLnRhYikpKSE9PS0xKXtjLnNldEFjdGl2ZVRhYihhKX19dGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyk7ZGVsZXRlIGQudGFiLmNhcmQ7ZGVsZXRlIGQudGFifSxvblJlbW92ZTpmdW5jdGlvbihiLGMpe3ZhciBhPXRoaXM7Yi51bih7c2NvcGU6YSxlbmFibGU6YS5vbkl0ZW1FbmFibGUsZGlzYWJsZTphLm9uSXRlbURpc2FibGUsYmVmb3Jlc2hvdzphLm9uSXRlbUJlZm9yZVNob3d9KTtpZighYS5kZXN0cm95aW5nJiZiLnRhYi5vd25lckN0PT09YS50YWJCYXIpe2EudGFiQmFyLnJlbW92ZShiLnRhYil9fX0pO0V4dC5kZWZpbmUoIkV4dC50b29sYmFyLlNwYWNlciIse2V4dGVuZDoiRXh0LkNvbXBvbmVudCIsYWxpYXM6IndpZGdldC50YnNwYWNlciIsYWx0ZXJuYXRlQ2xhc3NOYW1lOiJFeHQuVG9vbGJhci5TcGFjZXIiLGJhc2VDbHM6RXh0LmJhc2VDU1NQcmVmaXgrInRvb2xiYXItc3BhY2VyIixmb2N1c2FibGU6ZmFsc2V9KTtFeHQuZGVmaW5lKCJFeHQudHJlZS5Db2x1bW4iLHtleHRlbmQ6IkV4dC5ncmlkLmNvbHVtbi5Db2x1bW4iLGFsaWFzOiJ3aWRnZXQudHJlZWNvbHVtbiIsdGRDbHM6RXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtY2VsbC10cmVlY29sdW1uIix0cmVlUHJlZml4OkV4dC5iYXNlQ1NTUHJlZml4KyJ0cmVlLSIsZWxib3dQcmVmaXg6RXh0LmJhc2VDU1NQcmVmaXgrInRyZWUtZWxib3ctIixleHBhbmRlckNsczpFeHQuYmFzZUNTU1ByZWZpeCsidHJlZS1leHBhbmRlciIsaW1nVGV4dDonPGltZyBzcmM9InsxfSIgY2xhc3M9InswfSIgLz4nLGNoZWNrYm94VGV4dDonPGlucHV0IHR5cGU9ImJ1dHRvbiIgcm9sZT0iY2hlY2tib3giIGNsYXNzPSJ7MH0iIHsxfSAvPicsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5vcmlnUmVuZGVyZXI9YS5yZW5kZXJlcnx8YS5kZWZhdWx0UmVuZGVyZXI7YS5vcmlnU2NvcGU9YS5zY29wZXx8d2luZG93O2EucmVuZGVyZXI9YS50cmVlUmVuZGVyZXI7YS5zY29wZT1hO2EuY2FsbFBhcmVudCgpfSx0cmVlUmVuZGVyZXI6ZnVuY3Rpb24obCxuLGMsYixrLGUsail7dmFyIHM9dGhpcyxyPVtdLHA9RXh0LlN0cmluZy5mb3JtYXQsdT1jLmdldERlcHRoKCkscT1zLnRyZWVQcmVmaXgsZD1zLmVsYm93UHJlZml4LG09cy5leHBhbmRlckNscyxpPXMuaW1nVGV4dCx2PXMuY2hlY2tib3hUZXh0LGg9cy5vcmlnUmVuZGVyZXIuYXBwbHkocy5vcmlnU2NvcGUsYXJndW1lbnRzKSxnPUV4dC5CTEFOS19JTUFHRV9VUkwsbz1jLmdldCgiaHJlZiIpLHQ9Yy5nZXQoImhyZWZUYXJnZXQiKSxhPWMuZ2V0KCJjbHMiKTt3aGlsZShjKXtpZighYy5pc1Jvb3QoKXx8KGMuaXNSb290KCkmJmoucm9vdFZpc2libGUpKXtpZihjLmdldERlcHRoKCk9PT11KXtyLnVuc2hpZnQocChpLHErImljb24gIitxKyJpY29uIisoYy5nZXQoImljb24iKT8iLWlubGluZSAiOihjLmlzTGVhZigpPyItbGVhZiAiOiItcGFyZW50ICIpKSsoYy5nZXQoImljb25DbHMiKXx8IiIpLGMuZ2V0KCJpY29uIil8fGcpKTtpZihjLmdldCgiY2hlY2tlZCIpIT09bnVsbCl7ci51bnNoaWZ0KHAodiwocSsiY2hlY2tib3giKSsoYy5nZXQoImNoZWNrZWQiKT8iICIrcSsiY2hlY2tib3gtY2hlY2tlZCI6IiIpLGMuZ2V0KCJjaGVja2VkIik/J2FyaWEtY2hlY2tlZD0idHJ1ZSInOiIiKSk7aWYoYy5nZXQoImNoZWNrZWQiKSl7bi50ZENscys9KCIgIitxKyJjaGVja2VkIil9fWlmKGMuaXNMYXN0KCkpe2lmKGMuaXNFeHBhbmRhYmxlKCkpe3IudW5zaGlmdChwKGksKGQrImVuZC1wbHVzICIrbSksZykpfWVsc2V7ci51bnNoaWZ0KHAoaSwoZCsiZW5kIiksZykpfX1lbHNle2lmKGMuaXNFeHBhbmRhYmxlKCkpe3IudW5zaGlmdChwKGksKGQrInBsdXMgIittKSxnKSl9ZWxzZXtyLnVuc2hpZnQocChpLChxKyJlbGJvdyIpLGcpKX19fWVsc2V7aWYoYy5pc0xhc3QoKXx8Yy5nZXREZXB0aCgpPT09MCl7ci51bnNoaWZ0KHAoaSwoZCsiZW1wdHkiKSxnKSl9ZWxzZXtpZihjLmdldERlcHRoKCkhPT0wKXtyLnVuc2hpZnQocChpLChkKyJsaW5lIiksZykpfX19fWM9Yy5wYXJlbnROb2RlfWlmKG8pe3IucHVzaCgnPGEgaHJlZj0iJyxvLCciIHRhcmdldD0iJyx0LCciPicsaCwiPC9hPiIpfWVsc2V7ci5wdXNoKGgpfWlmKGEpe24udGRDbHMrPSIgIithfXJldHVybiByLmpvaW4oIiIpfSxkZWZhdWx0UmVuZGVyZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9fSk7RXh0LmRlZmluZSgiRXh0LnRyZWUuVmlldyIse2V4dGVuZDoiRXh0LnZpZXcuVGFibGUiLGFsaWFzOiJ3aWRnZXQudHJlZXZpZXciLHJlcXVpcmVzOlsiRXh0LmRhdGEuTm9kZVN0b3JlIl0sbG9hZGluZ0NsczpFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC10cmVlLWxvYWRpbmciLGV4cGFuZGVkQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJncmlkLXRyZWUtbm9kZS1leHBhbmRlZCIsbGVhZkNsczpFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC10cmVlLW5vZGUtbGVhZiIsZXhwYW5kZXJTZWxlY3RvcjoiLiIrRXh0LmJhc2VDU1NQcmVmaXgrInRyZWUtZXhwYW5kZXIiLGNoZWNrYm94U2VsZWN0b3I6Ii4iK0V4dC5iYXNlQ1NTUHJlZml4KyJ0cmVlLWNoZWNrYm94IixleHBhbmRlckljb25PdmVyQ2xzOkV4dC5iYXNlQ1NTUHJlZml4KyJ0cmVlLWV4cGFuZGVyLW92ZXIiLG5vZGVBbmltV3JhcENsczpFeHQuYmFzZUNTU1ByZWZpeCsidHJlZS1hbmltYXRvci13cmFwIixibG9ja1JlZnJlc2g6dHJ1ZSxsb2FkTWFzazpmYWxzZSxyb290VmlzaWJsZTp0cnVlLGRlZmVySW5pdGlhbFJlZnJlc2g6ZmFsc2UsZXhwYW5kRHVyYXRpb246MjUwLGNvbGxhcHNlRHVyYXRpb246MjUwLHRvZ2dsZU9uRGJsQ2xpY2s6dHJ1ZSxzdHJpcGVSb3dzOmZhbHNlLHVpRmllbGRzOlsiZXhwYW5kZWQiLCJsb2FkZWQiLCJjaGVja2VkIiwiZXhwYW5kYWJsZSIsImxlYWYiLCJpY29uIiwiaWNvbkNscyIsImxvYWRpbmciLCJxdGlwIiwicXRpdGxlIl0saW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLnBhbmVsLmdldFN0b3JlKCk7aWYoYS5pbml0aWFsQ29uZmlnLmFuaW1hdGU9PT11bmRlZmluZWQpe2EuYW5pbWF0ZT1FeHQuZW5hYmxlRnh9YS5zdG9yZT1uZXcgRXh0LmRhdGEuTm9kZVN0b3JlKHt0cmVlU3RvcmU6YixyZWN1cnNpdmU6dHJ1ZSxyb290VmlzaWJsZTphLnJvb3RWaXNpYmxlLGxpc3RlbmVyczp7YmVmb3JlZXhwYW5kOmEub25CZWZvcmVFeHBhbmQsZXhwYW5kOmEub25FeHBhbmQsYmVmb3JlY29sbGFwc2U6YS5vbkJlZm9yZUNvbGxhcHNlLGNvbGxhcHNlOmEub25Db2xsYXBzZSx3cml0ZTphLm9uU3RvcmVXcml0ZSxkYXRhY2hhbmdlZDphLm9uU3RvcmVEYXRhQ2hhbmdlZCxzY29wZTphfX0pO2lmKGEubm9kZSl7YS5zZXRSb290Tm9kZShhLm5vZGUpfWEuYW5pbVF1ZXVlPXt9O2EuYW5pbVdyYXBzPXt9O2EuYWRkRXZlbnRzKCJhZnRlcml0ZW1leHBhbmQiLCJhZnRlcml0ZW1jb2xsYXBzZSIpO2EuY2FsbFBhcmVudChhcmd1bWVudHMpO2Eub24oe2VsZW1lbnQ6ImVsIixzY29wZTphLGRlbGVnYXRlOmEuZXhwYW5kZXJTZWxlY3Rvcixtb3VzZW92ZXI6YS5vbkV4cGFuZGVyTW91c2VPdmVyLG1vdXNlb3V0OmEub25FeHBhbmRlck1vdXNlT3V0fSk7YS5vbih7ZWxlbWVudDoiZWwiLHNjb3BlOmEsZGVsZWdhdGU6YS5jaGVja2JveFNlbGVjdG9yLGNsaWNrOmEub25DaGVja2JveENoYW5nZX0pfSxnZXRNYXNrU3RvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYW5lbC5nZXRTdG9yZSgpfSxhZnRlckNvbXBvbmVudExheW91dDpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3ZhciBhPXRoaXMuc3RyZXRjaGVyO2lmKGEpe2Euc2V0V2lkdGgoKHRoaXMuZ2V0V2lkdGgoKS1FeHQuZ2V0U2Nyb2xsYmFyU2l6ZSgpLndpZHRoKSl9fSxwcm9jZXNzVUlFdmVudDpmdW5jdGlvbihhKXtpZihhLmdldFRhcmdldCgiLiIrdGhpcy5ub2RlQW5pbVdyYXBDbHMsdGhpcy5lbCkpe3JldHVybiBmYWxzZX1yZXR1cm4gdGhpcy5jYWxsUGFyZW50KGFyZ3VtZW50cyl9LG9uQ2xlYXI6ZnVuY3Rpb24oKXt0aGlzLnN0b3JlLnJlbW92ZUFsbCgpfSxzZXRSb290Tm9kZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2Euc3RvcmUuc2V0Tm9kZShiKTthLm5vZGU9Yn0sb25DaGVja2JveENoYW5nZTpmdW5jdGlvbihkLGEpe3ZhciBjPXRoaXMsYj1kLmdldFRhcmdldChjLmdldEl0ZW1TZWxlY3RvcigpLGMuZ2V0VGFyZ2V0RWwoKSk7aWYoYil7Yy5vbkNoZWNrQ2hhbmdlKGMuZ2V0UmVjb3JkKGIpKX19LG9uQ2hlY2tDaGFuZ2U6ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXQoImNoZWNrZWQiKTtpZihFeHQuaXNCb29sZWFuKGIpKXtiPSFiO2Euc2V0KCJjaGVja2VkIixiKTt0aGlzLmZpcmVFdmVudCgiY2hlY2tjaGFuZ2UiLGEsYil9fSxnZXRDaGVja2VkOmZ1bmN0aW9uKCl7dmFyIGE9W107dGhpcy5ub2RlLmNhc2NhZGVCeShmdW5jdGlvbihiKXtpZihiLmdldCgiY2hlY2tlZCIpKXthLnB1c2goYil9fSk7cmV0dXJuIGF9LGlzSXRlbUNoZWNrZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0KCJjaGVja2VkIil9LGNyZWF0ZUFuaW1XcmFwOmZ1bmN0aW9uKGosayl7dmFyIGc9IiIsZT10aGlzLnBhbmVsLmhlYWRlckN0LGI9ZS5nZXRHcmlkQ29sdW1ucygpLGg9MCxsPWIubGVuZ3RoLG0sZD10aGlzLmdldE5vZGUoaiksYSxjO2Zvcig7aDxsO2grKyl7bT1iW2hdO2crPSc8dGggc3R5bGU9IndpZHRoOiAnKyhtLmhpZGRlbj8wOm0uZ2V0RGVzaXJlZFdpZHRoKCkpKydweDsgaGVpZ2h0OiAwcHg7Ij48L3RoPid9Yz1FeHQuZ2V0KGQpO2E9Yy5pbnNlcnRTaWJsaW5nKHt0YWc6InRyIixodG1sOlsnPHRkIGNvbHNwYW49IicrZS5nZXRDb2x1bW5Db3VudCgpKyciPicsJzxkaXYgY2xhc3M9IicrdGhpcy5ub2RlQW5pbVdyYXBDbHMrJyI+JywnPHRhYmxlIGNsYXNzPSInK0V4dC5iYXNlQ1NTUHJlZml4KydncmlkLXRhYmxlIiBzdHlsZT0id2lkdGg6ICcrZS5nZXRGdWxsV2lkdGgoKSsncHg7Ij48dGJvZHk+JyxnLCI8L3Rib2R5PjwvdGFibGU+IiwiPC9kaXY+IiwiPC90ZD4iXS5qb2luKCIiKX0sImFmdGVyIik7cmV0dXJue3JlY29yZDpqLG5vZGU6ZCxlbDphLGV4cGFuZGluZzpmYWxzZSxjb2xsYXBzaW5nOmZhbHNlLGFuaW1hdGluZzpmYWxzZSxhbmltYXRlRWw6YS5kb3duKCJkaXYiKSx0YXJnZXRFbDphLmRvd24oInRib2R5Iil9fSxnZXRBbmltV3JhcDpmdW5jdGlvbihkLGEpe2lmKCF0aGlzLmFuaW1hdGUpe3JldHVybiBudWxsfXZhciBiPXRoaXMuYW5pbVdyYXBzLGM9YltkLmludGVybmFsSWRdO2lmKGEhPT1mYWxzZSl7d2hpbGUoIWMmJmQpe2Q9ZC5wYXJlbnROb2RlO2lmKGQpe2M9YltkLmludGVybmFsSWRdfX19cmV0dXJuIGN9LGRvQWRkOmZ1bmN0aW9uKGIsZCxpKXt2YXIgaj10aGlzLGc9ZFswXSxsPWcucGFyZW50Tm9kZSxrPWouYWxsLmVsZW1lbnRzLG49MCxlPWouZ2V0QW5pbVdyYXAobCksbSxjLGg7aWYoIWV8fCFlLmV4cGFuZGluZyl7cmV0dXJuIGouY2FsbFBhcmVudChhcmd1bWVudHMpfWw9ZS5yZWNvcmQ7bT1lLnRhcmdldEVsO2M9bS5kb20uY2hpbGROb2RlcztoPWMubGVuZ3RoLTE7bj1pLWouaW5kZXhPZihsKS0xO2lmKCFofHxuPj1oKXttLmFwcGVuZENoaWxkKGIpfWVsc2V7RXh0LmZseShjW24rMV0pLmluc2VydFNpYmxpbmcoYiwiYmVmb3JlIix0cnVlKX1FeHQuQXJyYXkuaW5zZXJ0KGssaSxiKTtpZihlLmlzQW5pbWF0aW5nKXtqLm9uRXhwYW5kKGwpfX0sYmVnaW5CdWxrVXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5idWxrVXBkYXRlPXRydWV9LGVuZEJ1bGtVcGRhdGU6ZnVuY3Rpb24oKXt0aGlzLmJ1bGtVcGRhdGU9ZmFsc2V9LG9uUmVtb3ZlOmZ1bmN0aW9uKGUsYSxiKXt2YXIgZD10aGlzLGM9ZC5idWxrVXBkYXRlO2lmKGQudmlld1JlYWR5KXtkLmRvUmVtb3ZlKGEsYik7aWYoIWMpe2QudXBkYXRlSW5kZXhlcyhiKX1pZihkLnN0b3JlLmdldENvdW50KCk9PT0wKXtkLnJlZnJlc2goKX1pZighYyl7ZC5maXJlRXZlbnQoIml0ZW1yZW1vdmUiLGEsYil9fX0sZG9SZW1vdmU6ZnVuY3Rpb24oYSxjKXt2YXIgaD10aGlzLGQ9aC5hbGwsYj1oLmdldEFuaW1XcmFwKGEpLGc9ZC5pdGVtKGMpLGU9Zz9nLmRvbTpudWxsO2lmKCFlfHwhYnx8IWIuY29sbGFwc2luZyl7cmV0dXJuIGguY2FsbFBhcmVudChhcmd1bWVudHMpfWIudGFyZ2V0RWwuYXBwZW5kQ2hpbGQoZSk7ZC5yZW1vdmVFbGVtZW50KGMpfSxvbkJlZm9yZUV4cGFuZDpmdW5jdGlvbihkLGIsYyl7dmFyIGU9dGhpcyxhO2lmKCFlLnJlbmRlcmVkfHwhZS5hbmltYXRlKXtyZXR1cm59aWYoZS5nZXROb2RlKGQpKXthPWUuZ2V0QW5pbVdyYXAoZCxmYWxzZSk7aWYoIWEpe2E9ZS5hbmltV3JhcHNbZC5pbnRlcm5hbElkXT1lLmNyZWF0ZUFuaW1XcmFwKGQpO2EuYW5pbWF0ZUVsLnNldEhlaWdodCgwKX1lbHNle2lmKGEuY29sbGFwc2luZyl7YS50YXJnZXRFbC5zZWxlY3QoZS5pdGVtU2VsZWN0b3IpLnJlbW92ZSgpfX1hLmV4cGFuZGluZz10cnVlO2EuY29sbGFwc2luZz1mYWxzZX19LG9uRXhwYW5kOmZ1bmN0aW9uKGkpe3ZhciBoPXRoaXMsZT1oLmFuaW1RdWV1ZSxhPWkuZ2V0SWQoKSxjPWguZ2V0Tm9kZShpKSxnPWM/aC5pbmRleE9mKGMpOi0xLGQsYixqO2lmKGguc2luZ2xlRXhwYW5kKXtoLmVuc3VyZVNpbmdsZUV4cGFuZChpKX1pZihnPT09LTEpe3JldHVybn1kPWguZ2V0QW5pbVdyYXAoaSxmYWxzZSk7aWYoIWQpe2guaXNFeHBhbmRpbmdPckNvbGxhcHNpbmc9ZmFsc2U7aC5maXJlRXZlbnQoImFmdGVyaXRlbWV4cGFuZCIsaSxnLGMpO3JldHVybn1iPWQuYW5pbWF0ZUVsO2o9ZC50YXJnZXRFbDtiLnN0b3BBbmltYXRpb24oKTtlW2FdPXRydWU7Yi5zbGlkZUluKCJ0Iix7ZHVyYXRpb246aC5leHBhbmREdXJhdGlvbixsaXN0ZW5lcnM6e3Njb3BlOmgsbGFzdGZyYW1lOmZ1bmN0aW9uKCl7ZC5lbC5pbnNlcnRTaWJsaW5nKGoucXVlcnkoaC5pdGVtU2VsZWN0b3IpLCJiZWZvcmUiKTtkLmVsLnJlbW92ZSgpO2gucmVmcmVzaFNpemUoKTtkZWxldGUgaC5hbmltV3JhcHNbZC5yZWNvcmQuaW50ZXJuYWxJZF07ZGVsZXRlIGVbYV19fSxjYWxsYmFjazpmdW5jdGlvbigpe2guaXNFeHBhbmRpbmdPckNvbGxhcHNpbmc9ZmFsc2U7aC5maXJlRXZlbnQoImFmdGVyaXRlbWV4cGFuZCIsaSxnLGMpfX0pO2QuaXNBbmltYXRpbmc9dHJ1ZX0sb25CZWZvcmVDb2xsYXBzZTpmdW5jdGlvbihkLGIsYyl7dmFyIGU9dGhpcyxhO2lmKCFlLnJlbmRlcmVkfHwhZS5hbmltYXRlKXtyZXR1cm59aWYoZS5nZXROb2RlKGQpKXthPWUuZ2V0QW5pbVdyYXAoZCk7aWYoIWEpe2E9ZS5hbmltV3JhcHNbZC5pbnRlcm5hbElkXT1lLmNyZWF0ZUFuaW1XcmFwKGQsYyl9ZWxzZXtpZihhLmV4cGFuZGluZyl7YS50YXJnZXRFbC5zZWxlY3QodGhpcy5pdGVtU2VsZWN0b3IpLnJlbW92ZSgpfX1hLmV4cGFuZGluZz1mYWxzZTthLmNvbGxhcHNpbmc9dHJ1ZX19LG9uQ29sbGFwc2U6ZnVuY3Rpb24oaSl7dmFyIGg9dGhpcyxlPWguYW5pbVF1ZXVlLGE9aS5nZXRJZCgpLGM9aC5nZXROb2RlKGkpLGc9Yz9oLmluZGV4T2YoYyk6LTEsZD1oLmdldEFuaW1XcmFwKGkpLGIsajtpZihnPT09LTEpe3JldHVybn1pZighZCl7aC5pc0V4cGFuZGluZ09yQ29sbGFwc2luZz1mYWxzZTtoLmZpcmVFdmVudCgiYWZ0ZXJpdGVtY29sbGFwc2UiLGksZyxjKTtyZXR1cm59Yj1kLmFuaW1hdGVFbDtqPWQudGFyZ2V0RWw7ZVthXT10cnVlO2Iuc3RvcEFuaW1hdGlvbigpO2Iuc2xpZGVPdXQoInQiLHtkdXJhdGlvbjpoLmNvbGxhcHNlRHVyYXRpb24sbGlzdGVuZXJzOntzY29wZTpoLGxhc3RmcmFtZTpmdW5jdGlvbigpe2QuZWwucmVtb3ZlKCk7aC5yZWZyZXNoU2l6ZSgpO2RlbGV0ZSBoLmFuaW1XcmFwc1tkLnJlY29yZC5pbnRlcm5hbElkXTtkZWxldGUgZVthXX19LGNhbGxiYWNrOmZ1bmN0aW9uKCl7aC5pc0V4cGFuZGluZ09yQ29sbGFwc2luZz1mYWxzZTtoLmZpcmVFdmVudCgiYWZ0ZXJpdGVtY29sbGFwc2UiLGksZyxjKX19KTtkLmlzQW5pbWF0aW5nPXRydWV9LGlzQW5pbWF0aW5nOmZ1bmN0aW9uKGEpe3JldHVybiAhIXRoaXMuYW5pbVF1ZXVlW2EuZ2V0SWQoKV19LGNvbGxlY3REYXRhOmZ1bmN0aW9uKGMpe3ZhciBnPXRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpLGU9Zy5yb3dzLGE9ZS5sZW5ndGgsZD0wLGgsYjtmb3IoO2Q8YTtkKyspe2g9ZVtkXTtiPWNbZF07aWYoYi5nZXQoInF0aXAiKSl7aC5yb3dBdHRyPSdkYXRhLXF0aXA9IicrYi5nZXQoInF0aXAiKSsnIic7aWYoYi5nZXQoInF0aXRsZSIpKXtoLnJvd0F0dHIrPScgZGF0YS1xdGl0bGU9IicrYi5nZXQoInF0aXRsZSIpKyciJ319aWYoYi5pc0V4cGFuZGVkKCkpe2gucm93Q2xzPShoLnJvd0Nsc3x8IiIpKyIgIit0aGlzLmV4cGFuZGVkQ2xzfWlmKGIuaXNMZWFmKCkpe2gucm93Q2xzPShoLnJvd0Nsc3x8IiIpKyIgIit0aGlzLmxlYWZDbHN9aWYoYi5pc0xvYWRpbmcoKSl7aC5yb3dDbHM9KGgucm93Q2xzfHwiIikrIiAiK3RoaXMubG9hZGluZ0Nsc319cmV0dXJuIGd9LGV4cGFuZDpmdW5jdGlvbihiLGEsZCxjKXtyZXR1cm4gYi5leHBhbmQoYSxkLGMpfSxjb2xsYXBzZTpmdW5jdGlvbihiLGEsZCxjKXtyZXR1cm4gYi5jb2xsYXBzZShhLGQsYyl9LHRvZ2dsZTpmdW5jdGlvbihjLGIsZyxkKXt2YXIgZT10aGlzLGE9ISF0aGlzLmFuaW1hdGU7aWYoIWF8fCF0aGlzLmlzRXhwYW5kaW5nT3JDb2xsYXBzaW5nKXtpZighYy5pc0xlYWYoKSl7dGhpcy5pc0V4cGFuZGluZ09yQ29sbGFwc2luZz1hfWlmKGMuaXNFeHBhbmRlZCgpKXtlLmNvbGxhcHNlKGMsYixnLGQpfWVsc2V7ZS5leHBhbmQoYyxiLGcsZCl9fX0sb25JdGVtRGJsQ2xpY2s6ZnVuY3Rpb24oYSxlLGMpe3ZhciBkPXRoaXMsYj1kLmVkaXRpbmdQbHVnaW47ZC5jYWxsUGFyZW50KGFyZ3VtZW50cyk7aWYoZC50b2dnbGVPbkRibENsaWNrJiZhLmlzRXhwYW5kYWJsZSgpJiYhKGImJmIuY2xpY2tzVG9FZGl0PT09Mikpe2QudG9nZ2xlKGEpfX0sb25CZWZvcmVJdGVtTW91c2VEb3duOmZ1bmN0aW9uKGEsYyxiLGQpe2lmKGQuZ2V0VGFyZ2V0KHRoaXMuZXhwYW5kZXJTZWxlY3RvcixjKSl7cmV0dXJuIGZhbHNlfXJldHVybiB0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sb25JdGVtQ2xpY2s6ZnVuY3Rpb24oYSxjLGIsZCl7aWYoZC5nZXRUYXJnZXQodGhpcy5leHBhbmRlclNlbGVjdG9yLGMpJiZhLmlzRXhwYW5kYWJsZSgpKXt0aGlzLnRvZ2dsZShhLGQuY3RybEtleSk7cmV0dXJuIGZhbHNlfXJldHVybiB0aGlzLmNhbGxQYXJlbnQoYXJndW1lbnRzKX0sb25FeHBhbmRlck1vdXNlT3ZlcjpmdW5jdGlvbihiLGEpe2IuZ2V0VGFyZ2V0KHRoaXMuY2VsbFNlbGVjdG9yLDEwLHRydWUpLmFkZENscyh0aGlzLmV4cGFuZGVySWNvbk92ZXJDbHMpfSxvbkV4cGFuZGVyTW91c2VPdXQ6ZnVuY3Rpb24oYixhKXtiLmdldFRhcmdldCh0aGlzLmNlbGxTZWxlY3RvciwxMCx0cnVlKS5yZW1vdmVDbHModGhpcy5leHBhbmRlckljb25PdmVyQ2xzKX0sZ2V0VHJlZVN0b3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFuZWwuc3RvcmV9LGVuc3VyZVNpbmdsZUV4cGFuZDpmdW5jdGlvbihiKXt2YXIgYT1iLnBhcmVudE5vZGU7aWYoYSl7YS5lYWNoQ2hpbGQoZnVuY3Rpb24oYyl7aWYoYyE9PWImJmMuaXNFeHBhbmRlZCgpKXtjLmNvbGxhcHNlKCl9fSl9fSxzaG91bGRVcGRhdGVDZWxsOmZ1bmN0aW9uKGQsYyl7aWYoYyl7dmFyIGI9MCxhPWMubGVuZ3RoO2Zvcig7YjxhOysrYil7aWYoRXh0LkFycmF5LmNvbnRhaW5zKHRoaXMudWlGaWVsZHMsY1tiXSkpe3JldHVybiB0cnVlfX19cmV0dXJuIHRoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpfSxvblN0b3JlV3JpdGU6ZnVuY3Rpb24oYixhKXt2YXIgYz10aGlzLnBhbmVsLnN0b3JlO2MuZmlyZUV2ZW50KCJ3cml0ZSIsYyxhKX0sb25TdG9yZURhdGFDaGFuZ2VkOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcy5wYW5lbC5zdG9yZTtjLmZpcmVFdmVudCgiZGF0YWNoYW5nZWQiLGMpfX0pO0V4dC5kZWZpbmUoIkV4dC50cmVlLlBhbmVsIix7ZXh0ZW5kOiJFeHQucGFuZWwuVGFibGUiLGFsaWFzOiJ3aWRnZXQudHJlZXBhbmVsIixhbHRlcm5hdGVDbGFzc05hbWU6WyJFeHQudHJlZS5UcmVlUGFuZWwiLCJFeHQuVHJlZVBhbmVsIl0scmVxdWlyZXM6WyJFeHQudHJlZS5WaWV3IiwiRXh0LnNlbGVjdGlvbi5UcmVlTW9kZWwiLCJFeHQudHJlZS5Db2x1bW4iLCJFeHQuZGF0YS5UcmVlU3RvcmUiXSx2aWV3VHlwZToidHJlZXZpZXciLHNlbFR5cGU6InRyZWVtb2RlbCIsdHJlZUNsczpFeHQuYmFzZUNTU1ByZWZpeCsidHJlZS1wYW5lbCIsZGVmZXJSb3dSZW5kZXI6ZmFsc2Uscm93TGluZXM6ZmFsc2UsbGluZXM6dHJ1ZSx1c2VBcnJvd3M6ZmFsc2Usc2luZ2xlRXhwYW5kOmZhbHNlLGRkQ29uZmlnOntlbmFibGVEcmFnOnRydWUsZW5hYmxlRHJvcDp0cnVlfSxyb290VmlzaWJsZTp0cnVlLGRpc3BsYXlGaWVsZDoidGV4dCIscm9vdDpudWxsLG5vcm1hbENmZ0NvcHk6WyJkaXNwbGF5RmllbGQiLCJyb290Iiwic2luZ2xlRXhwYW5kIiwidXNlQXJyb3dzIiwibGluZXMiLCJyb290VmlzaWJsZSIsInNjcm9sbCJdLGxvY2tlZENmZ0NvcHk6WyJkaXNwbGF5RmllbGQiLCJyb290Iiwic2luZ2xlRXhwYW5kIiwidXNlQXJyb3dzIiwibGluZXMiLCJyb290VmlzaWJsZSJdLGlzVHJlZTp0cnVlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe2E9YXx8e307aWYoYS5hbmltYXRlPT09dW5kZWZpbmVkKXthLmFuaW1hdGU9RXh0LmlzRGVmaW5lZCh0aGlzLmFuaW1hdGUpP3RoaXMuYW5pbWF0ZTpFeHQuZW5hYmxlRnh9dGhpcy5lbmFibGVBbmltYXRpb25zPWEuYW5pbWF0ZTtkZWxldGUgYS5hbmltYXRlO3RoaXMuY2FsbFBhcmVudChbYV0pfSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGM9dGhpcyxiPVtjLnRyZWVDbHNdLGE7aWYoYy51c2VBcnJvd3Mpe2IucHVzaChFeHQuYmFzZUNTU1ByZWZpeCsidHJlZS1hcnJvd3MiKTtjLmxpbmVzPWZhbHNlfWlmKGMubGluZXMpe2IucHVzaChFeHQuYmFzZUNTU1ByZWZpeCsidHJlZS1saW5lcyIpfWVsc2V7aWYoIWMudXNlQXJyb3dzKXtiLnB1c2goRXh0LmJhc2VDU1NQcmVmaXgrInRyZWUtbm8tbGluZXMiKX19aWYoRXh0LmlzU3RyaW5nKGMuc3RvcmUpKXtjLnN0b3JlPUV4dC5TdG9yZU1nci5sb29rdXAoYy5zdG9yZSl9ZWxzZXtpZighYy5zdG9yZXx8RXh0LmlzT2JqZWN0KGMuc3RvcmUpJiYhYy5zdG9yZS5pc1N0b3JlKXtjLnN0b3JlPW5ldyBFeHQuZGF0YS5UcmVlU3RvcmUoRXh0LmFwcGx5KHt9LGMuc3RvcmV8fHt9LHtyb290OmMucm9vdCxmaWVsZHM6Yy5maWVsZHMsbW9kZWw6Yy5tb2RlbCxmb2xkZXJTb3J0OmMuZm9sZGVyU29ydH0pKX1lbHNle2lmKGMucm9vdCl7Yy5zdG9yZT1FeHQuZGF0YS5TdG9yZU1hbmFnZXIubG9va3VwKGMuc3RvcmUpO2Muc3RvcmUuc2V0Um9vdE5vZGUoYy5yb290KTtpZihjLmZvbGRlclNvcnQhPT11bmRlZmluZWQpe2Muc3RvcmUuZm9sZGVyU29ydD1jLmZvbGRlclNvcnQ7Yy5zdG9yZS5zb3J0KCl9fX19Yy52aWV3Q29uZmlnPUV4dC5hcHBseSh7fSxjLnZpZXdDb25maWcpO2Mudmlld0NvbmZpZz1FeHQuYXBwbHlJZihjLnZpZXdDb25maWcse3Jvb3RWaXNpYmxlOmMucm9vdFZpc2libGUsYW5pbWF0ZTpjLmVuYWJsZUFuaW1hdGlvbnMsc2luZ2xlRXhwYW5kOmMuc2luZ2xlRXhwYW5kLG5vZGU6Yy5zdG9yZS5nZXRSb290Tm9kZSgpLGhpZGVIZWFkZXJzOmMuaGlkZUhlYWRlcnN9KTtjLm1vbihjLnN0b3JlLHtzY29wZTpjLHJvb3RjaGFuZ2U6Yy5vblJvb3RDaGFuZ2UsY2xlYXI6Yy5vbkNsZWFyfSk7Yy5yZWxheUV2ZW50cyhjLnN0b3JlLFsiYmVmb3JlbG9hZCIsImxvYWQiXSk7Yy5tb24oYy5zdG9yZSx7YXBwZW5kOmMuY3JlYXRlUmVsYXllcigiaXRlbWFwcGVuZCIpLHJlbW92ZTpjLmNyZWF0ZVJlbGF5ZXIoIml0ZW1yZW1vdmUiKSxtb3ZlOmMuY3JlYXRlUmVsYXllcigiaXRlbW1vdmUiLFswLDRdKSxpbnNlcnQ6Yy5jcmVhdGVSZWxheWVyKCJpdGVtaW5zZXJ0IiksYmVmb3JlYXBwZW5kOmMuY3JlYXRlUmVsYXllcigiYmVmb3JlaXRlbWFwcGVuZCIpLGJlZm9yZXJlbW92ZTpjLmNyZWF0ZVJlbGF5ZXIoImJlZm9yZWl0ZW1yZW1vdmUiKSxiZWZvcmVtb3ZlOmMuY3JlYXRlUmVsYXllcigiYmVmb3JlaXRlbW1vdmUiKSxiZWZvcmVpbnNlcnQ6Yy5jcmVhdGVSZWxheWVyKCJiZWZvcmVpdGVtaW5zZXJ0IiksZXhwYW5kOmMuY3JlYXRlUmVsYXllcigiaXRlbWV4cGFuZCIsWzAsMV0pLGNvbGxhcHNlOmMuY3JlYXRlUmVsYXllcigiaXRlbWNvbGxhcHNlIixbMCwxXSksYmVmb3JlZXhwYW5kOmMuY3JlYXRlUmVsYXllcigiYmVmb3JlaXRlbWV4cGFuZCIsWzAsMV0pLGJlZm9yZWNvbGxhcHNlOmMuY3JlYXRlUmVsYXllcigiYmVmb3JlaXRlbWNvbGxhcHNlIixbMCwxXSl9KTtpZighYy5jb2x1bW5zKXtpZihjLmluaXRpYWxDb25maWcuaGlkZUhlYWRlcnM9PT11bmRlZmluZWQpe2MuaGlkZUhlYWRlcnM9dHJ1ZX1jLmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsiYXV0b3dpZHRoLXRhYmxlIik7Yy5jb2x1bW5zPVt7eHR5cGU6InRyZWVjb2x1bW4iLHRleHQ6Ik5hbWUiLHdpZHRoOkV4dC5pc0lFNj9udWxsOjEwMDAwLGRhdGFJbmRleDpjLmRpc3BsYXlGaWVsZH1dfWlmKGMuY2xzKXtiLnB1c2goYy5jbHMpfWMuY2xzPWIuam9pbigiICIpO2MuY2FsbFBhcmVudCgpO2E9Yy5nZXRWaWV3KCk7Yy5yZWxheUV2ZW50cyhhLFsiY2hlY2tjaGFuZ2UiLCJhZnRlcml0ZW1leHBhbmQiLCJhZnRlcml0ZW1jb2xsYXBzZSJdKTtpZighYS5yb290VmlzaWJsZSYmIWMuZ2V0Um9vdE5vZGUoKSl7Yy5zZXRSb290Tm9kZSh7ZXhwYW5kZWQ6dHJ1ZX0pfX0sb25DbGVhcjpmdW5jdGlvbigpe3RoaXMudmlldy5vbkNsZWFyKCl9LHNldFJvb3ROb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RvcmUuc2V0Um9vdE5vZGUuYXBwbHkodGhpcy5zdG9yZSxhcmd1bWVudHMpfSxnZXRSb290Tm9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlLmdldFJvb3ROb2RlKCl9LG9uUm9vdENoYW5nZTpmdW5jdGlvbihhKXt0aGlzLnZpZXcuc2V0Um9vdE5vZGUoYSl9LGdldENoZWNrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRWaWV3KCkuZ2V0Q2hlY2tlZCgpfSxpc0l0ZW1DaGVja2VkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmdldCgiY2hlY2tlZCIpfSxleHBhbmROb2RlOmZ1bmN0aW9uKGIsYSxkLGMpe3JldHVybiB0aGlzLmdldFZpZXcoKS5leHBhbmQoYixhLGQsY3x8dGhpcyl9LGNvbGxhcHNlTm9kZTpmdW5jdGlvbihiLGEsZCxjKXtyZXR1cm4gdGhpcy5nZXRWaWV3KCkuY29sbGFwc2UoYixhLGQsY3x8dGhpcyl9LGV4cGFuZEFsbDpmdW5jdGlvbihnLGQpe3ZhciBlPXRoaXMsYj1lLmdldFJvb3ROb2RlKCksYz1lLmVuYWJsZUFuaW1hdGlvbnMsYT1lLmdldFZpZXcoKTtpZihiKXtpZighYyl7YS5iZWdpbkJ1bGtVcGRhdGUoKX1iLmV4cGFuZCh0cnVlLGcsZHx8ZSk7aWYoIWMpe2EuZW5kQnVsa1VwZGF0ZSgpfX19LGNvbGxhcHNlQWxsOmZ1bmN0aW9uKGcsZCl7dmFyIGU9dGhpcyxiPWUuZ2V0Um9vdE5vZGUoKSxjPWUuZW5hYmxlQW5pbWF0aW9ucyxhPWUuZ2V0VmlldygpO2lmKGIpe2lmKCFjKXthLmJlZ2luQnVsa1VwZGF0ZSgpfWQ9ZHx8ZTtpZihhLnJvb3RWaXNpYmxlKXtiLmNvbGxhcHNlKHRydWUsZyxkKX1lbHNle2IuY29sbGFwc2VDaGlsZHJlbih0cnVlLGcsZCl9aWYoIWMpe2EuZW5kQnVsa1VwZGF0ZSgpfX19LGV4cGFuZFBhdGg6ZnVuY3Rpb24obCxnLGEsaCxrKXt2YXIgZD10aGlzLGM9ZC5nZXRSb290Tm9kZSgpLGI9MSxlPWQuZ2V0VmlldygpLGosaTtnPWd8fGQuZ2V0Um9vdE5vZGUoKS5pZFByb3BlcnR5O2E9YXx8Ii8iO2lmKEV4dC5pc0VtcHR5KGwpKXtFeHQuY2FsbGJhY2soaCxrfHxkLFtmYWxzZSxudWxsXSk7cmV0dXJufWo9bC5zcGxpdChhKTtpZihjLmdldChnKSE9alsxXSl7RXh0LmNhbGxiYWNrKGgsa3x8ZCxbZmFsc2UsY10pO3JldHVybn1pPWZ1bmN0aW9uKCl7aWYoKytiPT09ai5sZW5ndGgpe0V4dC5jYWxsYmFjayhoLGt8fGQsW3RydWUsY10pO3JldHVybn12YXIgbT1jLmZpbmRDaGlsZChnLGpbYl0pO2lmKCFtKXtFeHQuY2FsbGJhY2soaCxrfHxkLFtmYWxzZSxjXSk7cmV0dXJufWM9bTtjLmV4cGFuZChmYWxzZSxpKX07Yy5leHBhbmQoZmFsc2UsaSl9LHNlbGVjdFBhdGg6ZnVuY3Rpb24oaixkLGEsZyxpKXt2YXIgYj10aGlzLGMsaCxlO2Q9ZHx8Yi5nZXRSb290Tm9kZSgpLmlkUHJvcGVydHk7YT1hfHwiLyI7aD1qLnNwbGl0KGEpO2U9aC5wb3AoKTtpZihoLmxlbmd0aD4xKXtiLmV4cGFuZFBhdGgoaC5qb2luKGEpLGQsYSxmdW5jdGlvbihtLGwpe3ZhciBrPWw7aWYobSYmbCl7bD1sLmZpbmRDaGlsZChkLGUpO2lmKGwpe2IuZ2V0U2VsZWN0aW9uTW9kZWwoKS5zZWxlY3QobCk7RXh0LmNhbGxiYWNrKGcsaXx8YixbdHJ1ZSxsXSk7cmV0dXJufX1FeHQuY2FsbGJhY2soZyxpfHxiLFtmYWxzZSxrXSl9LGIpfWVsc2V7Yz1iLmdldFJvb3ROb2RlKCk7aWYoYy5nZXRJZCgpPT09ZSl7Yi5nZXRTZWxlY3Rpb25Nb2RlbCgpLnNlbGVjdChjKTtFeHQuY2FsbGJhY2soZyxpfHxiLFt0cnVlLGNdKX1lbHNle0V4dC5jYWxsYmFjayhnLGl8fGIsW2ZhbHNlLG51bGxdKX19fX0pO0V4dC5kZWZpbmUoIkV4dC52aWV3LkRyYWdab25lIix7ZXh0ZW5kOiJFeHQuZGQuRHJhZ1pvbmUiLGNvbnRhaW5lclNjcm9sbDpmYWxzZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihiKXt2YXIgZT10aGlzLGEsZCxjO0V4dC5hcHBseShlLGIpO2lmKCFlLmRkR3JvdXApe2UuZGRHcm91cD0idmlldy1kZC16b25lLSIrZS52aWV3LmlkfWE9ZS52aWV3O2Q9YS5vd25lckN0O2lmKGQpe2M9ZC5nZXRUYXJnZXRFbCgpLmRvbX1lbHNle2M9YS5lbC5kb20ucGFyZW50Tm9kZX1lLmNhbGxQYXJlbnQoW2NdKTtlLmRkZWw9RXh0LmdldChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSk7ZS5kZGVsLmFkZENscyhFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC1kZC13cmFwIil9LGluaXQ6ZnVuY3Rpb24oYyxhLGIpe3RoaXMuaW5pdFRhcmdldChjLGEsYik7dGhpcy52aWV3Lm1vbih0aGlzLnZpZXcse2l0ZW1tb3VzZWRvd246dGhpcy5vbkl0ZW1Nb3VzZURvd24sc2NvcGU6dGhpc30pfSxvblZhbGlkRHJvcDpmdW5jdGlvbihiLGEsYyl7dGhpcy5jYWxsUGFyZW50KCk7Yi5lbC5mb2N1cygpfSxvbkl0ZW1Nb3VzZURvd246ZnVuY3Rpb24oYixhLGQsYyxnKXtpZighdGhpcy5pc1ByZXZlbnREcmFnKGcsYSxkLGMpKXt0aGlzLnZpZXcuZm9jdXMoKTt0aGlzLmhhbmRsZU1vdXNlRG93bihnKTtpZihiLmdldFNlbGVjdGlvbk1vZGVsKCkuc2VsZWN0aW9uTW9kZT09Ik1VTFRJIiYmIWcuY3RybEtleSYmYi5nZXRTZWxlY3Rpb25Nb2RlbCgpLmlzU2VsZWN0ZWQoYSkpe3JldHVybiBmYWxzZX19fSxpc1ByZXZlbnREcmFnOmZ1bmN0aW9uKGEpe3JldHVybiBmYWxzZX0sZ2V0RHJhZ0RhdGE6ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcy52aWV3LGI9Yy5nZXRUYXJnZXQoYS5nZXRJdGVtU2VsZWN0b3IoKSk7aWYoYil7cmV0dXJue2NvcHk6YS5jb3B5fHwoYS5hbGxvd0NvcHkmJmMuY3RybEtleSksZXZlbnQ6bmV3IEV4dC5FdmVudE9iamVjdEltcGwoYyksdmlldzphLGRkZWw6dGhpcy5kZGVsLGl0ZW06YixyZWNvcmRzOmEuZ2V0U2VsZWN0aW9uTW9kZWwoKS5nZXRTZWxlY3Rpb24oKSxmcm9tUG9zaXRpb246RXh0LmZseShiKS5nZXRYWSgpfX19LG9uSW5pdERyYWc6ZnVuY3Rpb24oYixqKXt2YXIgZz10aGlzLGg9Zy5kcmFnRGF0YSxkPWgudmlldyxhPWQuZ2V0U2VsZWN0aW9uTW9kZWwoKSxjPWQuZ2V0UmVjb3JkKGguaXRlbSksaT1oLmV2ZW50O2lmKCFhLmlzU2VsZWN0ZWQoYykpe2Euc2VsZWN0KGMsdHJ1ZSl9aC5yZWNvcmRzPWEuZ2V0U2VsZWN0aW9uKCk7Zy5kZGVsLnVwZGF0ZShnLmdldERyYWdUZXh0KCkpO2cucHJveHkudXBkYXRlKGcuZGRlbC5kb20pO2cub25TdGFydERyYWcoYixqKTtyZXR1cm4gdHJ1ZX0sZ2V0RHJhZ1RleHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRyYWdEYXRhLnJlY29yZHMubGVuZ3RoO3JldHVybiBFeHQuU3RyaW5nLmZvcm1hdCh0aGlzLmRyYWdUZXh0LGEsYT09MT8iIjoicyIpfSxnZXRSZXBhaXJYWTpmdW5jdGlvbihiLGEpe3JldHVybiBhP2EuZnJvbVBvc2l0aW9uOmZhbHNlfX0pO0V4dC5kZWZpbmUoIkV4dC50cmVlLlZpZXdEcmFnWm9uZSIse2V4dGVuZDoiRXh0LnZpZXcuRHJhZ1pvbmUiLGlzUHJldmVudERyYWc6ZnVuY3Rpb24oYixhKXtyZXR1cm4oYS5nZXQoImFsbG93RHJhZyIpPT09ZmFsc2UpfHwhIWIuZ2V0VGFyZ2V0KHRoaXMudmlldy5leHBhbmRlclNlbGVjdG9yKX0sYWZ0ZXJSZXBhaXI6ZnVuY3Rpb24oKXt2YXIgaD10aGlzLGE9aC52aWV3LGk9YS5zZWxlY3RlZEl0ZW1DbHMsYj1oLmRyYWdEYXRhLnJlY29yZHMsZyxlPWIubGVuZ3RoLGM9RXh0LmZseSxkO2lmKEV4dC5lbmFibGVGeCYmaC5yZXBhaXJIaWdobGlnaHQpe2ZvcihnPTA7ZzxlO2crKyl7ZD1hLmdldE5vZGUoYltnXSk7YyhkLmZpcnN0Q2hpbGQpLmhpZ2hsaWdodChoLnJlcGFpckhpZ2hsaWdodENvbG9yLHtsaXN0ZW5lcnM6e2JlZm9yZWFuaW1hdGU6ZnVuY3Rpb24oKXtpZihhLmlzU2VsZWN0ZWQoZCkpe2MoZCkucmVtb3ZlQ2xzKGkpfX0sYWZ0ZXJhbmltYXRlOmZ1bmN0aW9uKCl7aWYoYS5pc1NlbGVjdGVkKGQpKXtjKGQpLmFkZENscyhpKX19fX0pfX1oLmRyYWdnaW5nPWZhbHNlfX0pO0V4dC5kZWZpbmUoIkV4dC50cmVlLlZpZXdEcm9wWm9uZSIse2V4dGVuZDoiRXh0LnZpZXcuRHJvcFpvbmUiLGFsbG93UGFyZW50SW5zZXJ0czpmYWxzZSxhbGxvd0NvbnRhaW5lckRyb3BzOmZhbHNlLGFwcGVuZE9ubHk6ZmFsc2UsZXhwYW5kRGVsYXk6NTAwLGluZGljYXRvckNsczpFeHQuYmFzZUNTU1ByZWZpeCsidHJlZS1kZGluZGljYXRvciIsZXhwYW5kTm9kZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzLnZpZXc7aWYoIWIuaXNMZWFmKCkmJiFiLmlzRXhwYW5kZWQoKSl7YS5leHBhbmQoYik7dGhpcy5leHBhbmRQcm9jSWQ9ZmFsc2V9fSxxdWV1ZUV4cGFuZDpmdW5jdGlvbihhKXt0aGlzLmV4cGFuZFByb2NJZD1FeHQuRnVuY3Rpb24uZGVmZXIodGhpcy5leHBhbmROb2RlLHRoaXMuZXhwYW5kRGVsYXksdGhpcyxbYV0pfSxjYW5jZWxFeHBhbmQ6ZnVuY3Rpb24oKXtpZih0aGlzLmV4cGFuZFByb2NJZCl7Y2xlYXJUaW1lb3V0KHRoaXMuZXhwYW5kUHJvY0lkKTt0aGlzLmV4cGFuZFByb2NJZD1mYWxzZX19LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGcsYil7dmFyIGo9dGhpcy52aWV3LGM9ai5nZXRSZWNvcmQoYiksaD1nLmdldFBhZ2VZKCksaz1jLmlzTGVhZigpLGE9ZmFsc2UsaT1FeHQuZmx5KGIpLmdldFJlZ2lvbigpLGQ7aWYoYy5pc1Jvb3QoKSl7cmV0dXJuImFwcGVuZCJ9aWYodGhpcy5hcHBlbmRPbmx5KXtyZXR1cm4gaz9mYWxzZToiYXBwZW5kIn1pZighdGhpcy5hbGxvd1BhcmVudEluc2VydCl7YT1jLmhhc0NoaWxkTm9kZXMoKSYmYy5pc0V4cGFuZGVkKCl9ZD0oaS5ib3R0b20taS50b3ApLyhrPzI6Myk7aWYoaD49aS50b3AmJmg8KGkudG9wK2QpKXtyZXR1cm4iYmVmb3JlIn1lbHNle2lmKCFhJiYoa3x8KGg+PShpLmJvdHRvbS1kKSYmaDw9aS5ib3R0b20pKSl7cmV0dXJuImFmdGVyIn1lbHNle3JldHVybiJhcHBlbmQifX19LGlzVmFsaWREcm9wUG9pbnQ6ZnVuY3Rpb24oYixqLG4sayxnKXtpZighYnx8IWcuaXRlbSl7cmV0dXJuIGZhbHNlfXZhciBvPXRoaXMudmlldyxsPW8uZ2V0UmVjb3JkKGIpLGQ9Zy5yZWNvcmRzLGE9ZC5sZW5ndGgsbT1kLmxlbmd0aCxjLGg7aWYoIShsJiZqJiZhKSl7cmV0dXJuIGZhbHNlfWZvcihjPTA7YzxtO2MrKyl7aD1kW2NdO2lmKGguaXNOb2RlJiZoLmNvbnRhaW5zKGwpKXtyZXR1cm4gZmFsc2V9fWlmKGo9PT0iYXBwZW5kIiYmbC5nZXQoImFsbG93RHJvcCIpPT09ZmFsc2Upe3JldHVybiBmYWxzZX1lbHNle2lmKGohPSJhcHBlbmQiJiZsLnBhcmVudE5vZGUuZ2V0KCJhbGxvd0Ryb3AiKT09PWZhbHNlKXtyZXR1cm4gZmFsc2V9fWlmKEV4dC5BcnJheS5jb250YWlucyhkLGwpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9LG9uTm9kZU92ZXI6ZnVuY3Rpb24oYSxpLGcsYyl7dmFyIGQ9dGhpcy5nZXRQb3NpdGlvbihnLGEpLGI9dGhpcy5kcm9wTm90QWxsb3dlZCxqPXRoaXMudmlldyxoPWouZ2V0UmVjb3JkKGEpLGs9dGhpcy5nZXRJbmRpY2F0b3IoKSxtPTAsbD0wO3RoaXMuY2FuY2VsRXhwYW5kKCk7aWYoZD09ImFwcGVuZCImJiF0aGlzLmV4cGFuZFByb2NJZCYmIUV4dC5BcnJheS5jb250YWlucyhjLnJlY29yZHMsaCkmJiFoLmlzTGVhZigpJiYhaC5pc0V4cGFuZGVkKCkpe3RoaXMucXVldWVFeHBhbmQoaCl9aWYodGhpcy5pc1ZhbGlkRHJvcFBvaW50KGEsZCxpLGcsYykpe3RoaXMudmFsaWQ9dHJ1ZTt0aGlzLmN1cnJlbnRQb3NpdGlvbj1kO3RoaXMub3ZlclJlY29yZD1oO2suc2V0V2lkdGgoRXh0LmZseShhKS5nZXRXaWR0aCgpKTtsPUV4dC5mbHkoYSkuZ2V0WSgpLUV4dC5mbHkoai5lbCkuZ2V0WSgpLTE7aWYoZD09ImJlZm9yZSIpe2I9aC5pc0ZpcnN0KCk/RXh0LmJhc2VDU1NQcmVmaXgrInRyZWUtZHJvcC1vay1hYm92ZSI6RXh0LmJhc2VDU1NQcmVmaXgrInRyZWUtZHJvcC1vay1iZXR3ZWVuIjtrLnNob3dBdCgwLGwpO2kucHJveHkuc2hvdygpfWVsc2V7aWYoZD09ImFmdGVyIil7Yj1oLmlzTGFzdCgpP0V4dC5iYXNlQ1NTUHJlZml4KyJ0cmVlLWRyb3Atb2stYmVsb3ciOkV4dC5iYXNlQ1NTUHJlZml4KyJ0cmVlLWRyb3Atb2stYmV0d2VlbiI7bCs9RXh0LmZseShhKS5nZXRIZWlnaHQoKTtrLnNob3dBdCgwLGwpO2kucHJveHkuc2hvdygpfWVsc2V7Yj1FeHQuYmFzZUNTU1ByZWZpeCsidHJlZS1kcm9wLW9rLWFwcGVuZCI7ay5oaWRlKCl9fX1lbHNle3RoaXMudmFsaWQ9ZmFsc2V9dGhpcy5jdXJyZW50Q2xzPWI7cmV0dXJuIGJ9LG9uQ29udGFpbmVyT3ZlcjpmdW5jdGlvbihhLGMsYil7cmV0dXJuIGMuZ2V0VGFyZ2V0KCIuIit0aGlzLmluZGljYXRvckNscyk/dGhpcy5jdXJyZW50Q2xzOnRoaXMuZHJvcE5vdEFsbG93ZWR9LG5vdGlmeU91dDpmdW5jdGlvbigpe3RoaXMuY2FsbFBhcmVudChhcmd1bWVudHMpO3RoaXMuY2FuY2VsRXhwYW5kKCl9LGhhbmRsZU5vZGVEcm9wOmZ1bmN0aW9uKGQsbCxlKXt2YXIgbj10aGlzLG89bi52aWV3LGc9bC5wYXJlbnROb2RlLHA9by5nZXRTdG9yZSgpLHI9W10sYSxjLGssYixqLG0scSxoO2lmKGQuY29weSl7YT1kLnJlY29yZHM7ZC5yZWNvcmRzPVtdO2ZvcihjPTAsaz1hLmxlbmd0aDtjPGs7YysrKXtkLnJlY29yZHMucHVzaChFeHQuYXBwbHkoe30sYVtjXS5kYXRhKSl9fW4uY2FuY2VsRXhwYW5kKCk7aWYoZT09ImJlZm9yZSIpe2I9Zy5pbnNlcnRCZWZvcmU7aj1bbnVsbCxsXTtsPWd9ZWxzZXtpZihlPT0iYWZ0ZXIiKXtpZihsLm5leHRTaWJsaW5nKXtiPWcuaW5zZXJ0QmVmb3JlO2o9W251bGwsbC5uZXh0U2libGluZ119ZWxzZXtiPWcuYXBwZW5kQ2hpbGQ7aj1bbnVsbF19bD1nfWVsc2V7aWYoIWwuaXNFeHBhbmRlZCgpKXttPXRydWV9Yj1sLmFwcGVuZENoaWxkO2o9W251bGxdfX1xPWZ1bmN0aW9uKCl7dmFyIHUsdCxzLGksdjtmb3IoYz0wLGs9ZC5yZWNvcmRzLmxlbmd0aDtjPGs7YysrKXtqWzBdPWQucmVjb3Jkc1tjXTt1PWIuYXBwbHkobCxqKTtpZihFeHQuZW5hYmxlRngmJm4uZHJvcEhpZ2hsaWdodCl7ci5wdXNoKG8uZ2V0Tm9kZSh1KSl9fWlmKEV4dC5lbmFibGVGeCYmbi5kcm9wSGlnaGxpZ2h0KXtzPXIubGVuZ3RoO2k9bi5kcm9wSGlnaGxpZ2h0Q29sb3I7Zm9yKHQ9MDt0PHM7dCsrKXt2PXJbdF07aWYodil7RXh0LmZseSh2LmZpcnN0Q2hpbGQ/di5maXJzdENoaWxkOnYpLmhpZ2hsaWdodChpKX19fX07aWYobSl7bC5leHBhbmQoZmFsc2UscSl9ZWxzZXtxKCl9fX0pO0V4dC5kZWZpbmUoIkV4dC50cmVlLnBsdWdpbi5UcmVlVmlld0RyYWdEcm9wIix7ZXh0ZW5kOiJFeHQuQWJzdHJhY3RQbHVnaW4iLGFsaWFzOiJwbHVnaW4udHJlZXZpZXdkcmFnZHJvcCIsdXNlczpbIkV4dC50cmVlLlZpZXdEcmFnWm9uZSIsIkV4dC50cmVlLlZpZXdEcm9wWm9uZSJdLGRyYWdUZXh0OiJ7MH0gc2VsZWN0ZWQgbm9kZXsxfSIsYWxsb3dQYXJlbnRJbnNlcnRzOmZhbHNlLGFsbG93Q29udGFpbmVyRHJvcHM6ZmFsc2UsYXBwZW5kT25seTpmYWxzZSxkZEdyb3VwOiJUcmVlREQiLGV4cGFuZERlbGF5OjEwMDAsZW5hYmxlRHJvcDp0cnVlLGVuYWJsZURyYWc6dHJ1ZSxub2RlSGlnaGxpZ2h0Q29sb3I6ImMzZGFmOSIsbm9kZUhpZ2hsaWdodE9uRHJvcDpFeHQuZW5hYmxlRngsbm9kZUhpZ2hsaWdodE9uUmVwYWlyOkV4dC5lbmFibGVGeCxpbml0OmZ1bmN0aW9uKGEpe2Eub24oInJlbmRlciIsdGhpcy5vblZpZXdSZW5kZXIsdGhpcyx7c2luZ2xlOnRydWV9KX0sZGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95KHRoaXMuZHJhZ1pvbmUsdGhpcy5kcm9wWm9uZSl9LG9uVmlld1JlbmRlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO2lmKGIuZW5hYmxlRHJhZyl7Yi5kcmFnWm9uZT1uZXcgRXh0LnRyZWUuVmlld0RyYWdab25lKHt2aWV3OmEsZGRHcm91cDpiLmRyYWdHcm91cHx8Yi5kZEdyb3VwLGRyYWdUZXh0OmIuZHJhZ1RleHQscmVwYWlySGlnaGxpZ2h0Q29sb3I6Yi5ub2RlSGlnaGxpZ2h0Q29sb3IscmVwYWlySGlnaGxpZ2h0OmIubm9kZUhpZ2hsaWdodE9uUmVwYWlyfSl9aWYoYi5lbmFibGVEcm9wKXtiLmRyb3Bab25lPW5ldyBFeHQudHJlZS5WaWV3RHJvcFpvbmUoe3ZpZXc6YSxkZEdyb3VwOmIuZHJvcEdyb3VwfHxiLmRkR3JvdXAsYWxsb3dDb250YWluZXJEcm9wczpiLmFsbG93Q29udGFpbmVyRHJvcHMsYXBwZW5kT25seTpiLmFwcGVuZE9ubHksYWxsb3dQYXJlbnRJbnNlcnRzOmIuYWxsb3dQYXJlbnRJbnNlcnRzLGV4cGFuZERlbGF5OmIuZXhwYW5kRGVsYXksZHJvcEhpZ2hsaWdodENvbG9yOmIubm9kZUhpZ2hsaWdodENvbG9yLGRyb3BIaWdobGlnaHQ6Yi5ub2RlSGlnaGxpZ2h0T25Ecm9wfSl9fX0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLkNTUyIsKGZ1bmN0aW9uKCl7dmFyIGQ9bnVsbCxjPWRvY3VtZW50LGI9LygtW2Etel0pL2dpLGE9ZnVuY3Rpb24oZSxnKXtyZXR1cm4gZy5jaGFyQXQoMSkudG9VcHBlckNhc2UoKX07cmV0dXJue3NpbmdsZXRvbjp0cnVlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dGhpcy5ydWxlcz17fTt0aGlzLmluaXRpYWxpemVkPWZhbHNlfSxjcmVhdGVTdHlsZVNoZWV0OmZ1bmN0aW9uKGksbCl7dmFyIGgsZz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0saz1jLmNyZWF0ZUVsZW1lbnQoInN0eWxlIik7ay5zZXRBdHRyaWJ1dGUoInR5cGUiLCJ0ZXh0L2NzcyIpO2lmKGwpe2suc2V0QXR0cmlidXRlKCJpZCIsbCl9aWYoRXh0LmlzSUUpe2cuYXBwZW5kQ2hpbGQoayk7aD1rLnN0eWxlU2hlZXQ7aC5jc3NUZXh0PWl9ZWxzZXt0cnl7ay5hcHBlbmRDaGlsZChjLmNyZWF0ZVRleHROb2RlKGkpKX1jYXRjaChqKXtrLmNzc1RleHQ9aX1nLmFwcGVuZENoaWxkKGspO2g9ay5zdHlsZVNoZWV0P2suc3R5bGVTaGVldDooay5zaGVldHx8Yy5zdHlsZVNoZWV0c1tjLnN0eWxlU2hlZXRzLmxlbmd0aC0xXSl9dGhpcy5jYWNoZVN0eWxlU2hlZXQoaCk7cmV0dXJuIGh9LHJlbW92ZVN0eWxlU2hlZXQ6ZnVuY3Rpb24oZyl7dmFyIGU9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZyk7aWYoZSl7ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpfX0sc3dhcFN0eWxlU2hlZXQ6ZnVuY3Rpb24oaSxlKXt2YXIgaD1kb2N1bWVudCxnO3RoaXMucmVtb3ZlU3R5bGVTaGVldChpKTtnPWguY3JlYXRlRWxlbWVudCgibGluayIpO2cuc2V0QXR0cmlidXRlKCJyZWwiLCJzdHlsZXNoZWV0Iik7Zy5zZXRBdHRyaWJ1dGUoInR5cGUiLCJ0ZXh0L2NzcyIpO2cuc2V0QXR0cmlidXRlKCJpZCIsaSk7Zy5zZXRBdHRyaWJ1dGUoImhyZWYiLGUpO2guZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZChnKX0scmVmcmVzaENhY2hlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UnVsZXModHJ1ZSl9LGNhY2hlU3R5bGVTaGVldDpmdW5jdGlvbihsKXtpZighZCl7ZD17fX10cnl7dmFyIG89bC5jc3NSdWxlc3x8bC5ydWxlcyxtLGs9by5sZW5ndGgtMSxnLGg7Zm9yKDtrPj0wOy0tayl7bT1vW2tdLnNlbGVjdG9yVGV4dDtpZihtKXttPW0uc3BsaXQoIiwiKTtoPW0ubGVuZ3RoO2ZvcihnPTA7ZzxoO2crKyl7ZFtFeHQuU3RyaW5nLnRyaW0obVtnXSkudG9Mb3dlckNhc2UoKV09b1trXX19fX1jYXRjaChuKXt9fSxnZXRSdWxlczpmdW5jdGlvbihoKXtpZihkPT09bnVsbHx8aCl7ZD17fTt2YXIgaz1jLnN0eWxlU2hlZXRzLGo9MCxnPWsubGVuZ3RoO2Zvcig7ajxnO2orKyl7dHJ5e2lmKCFrW2pdLmRpc2FibGVkKXt0aGlzLmNhY2hlU3R5bGVTaGVldChrW2pdKX19Y2F0Y2gobCl7fX19cmV0dXJuIGR9LGdldFJ1bGU6ZnVuY3Rpb24oZSxoKXt2YXIgZz10aGlzLmdldFJ1bGVzKGgpLGo7aWYoIUV4dC5pc0FycmF5KGUpKXtyZXR1cm4gZ1tlLnRvTG93ZXJDYXNlKCldfWZvcihqPTA7ajxlLmxlbmd0aDtqKyspe2lmKGdbZVtqXV0pe3JldHVybiBnW2Vbal0udG9Mb3dlckNhc2UoKV19fXJldHVybiBudWxsfSx1cGRhdGVSdWxlOmZ1bmN0aW9uKGUsaixoKXt2YXIgayxnO2lmKCFFeHQuaXNBcnJheShlKSl7az10aGlzLmdldFJ1bGUoZSk7aWYoayl7ay5zdHlsZVtqLnJlcGxhY2UoYixhKV09aDtyZXR1cm4gdHJ1ZX19ZWxzZXtmb3IoZz0wO2c8ZS5sZW5ndGg7ZysrKXtpZih0aGlzLnVwZGF0ZVJ1bGUoZVtnXSxqLGgpKXtyZXR1cm4gdHJ1ZX19fXJldHVybiBmYWxzZX19fSgpKSk7RXh0LmRlZmluZSgiRXh0LnV0aWwuQ29va2llcyIse3NpbmdsZXRvbjp0cnVlLHNldDpmdW5jdGlvbihjLGUpe3ZhciBhPWFyZ3VtZW50cyxpPWFyZ3VtZW50cy5sZW5ndGgsYj0oaT4yKT9hWzJdOm51bGwsaD0oaT4zKT9hWzNdOiIvIixkPShpPjQpP2FbNF06bnVsbCxnPShpPjUpP2FbNV06ZmFsc2U7ZG9jdW1lbnQuY29va2llPWMrIj0iK2VzY2FwZShlKSsoKGI9PT1udWxsKT8iIjooIjsgZXhwaXJlcz0iK2IudG9HTVRTdHJpbmcoKSkpKygoaD09PW51bGwpPyIiOigiOyBwYXRoPSIraCkpKygoZD09PW51bGwpPyIiOigiOyBkb21haW49IitkKSkrKChnPT09dHJ1ZSk/Ijsgc2VjdXJlIjoiIil9LGdldDpmdW5jdGlvbihkKXt2YXIgYj1kKyI9IixnPWIubGVuZ3RoLGE9ZG9jdW1lbnQuY29va2llLmxlbmd0aCxlPTAsYz0wO3doaWxlKGU8YSl7Yz1lK2c7aWYoZG9jdW1lbnQuY29va2llLnN1YnN0cmluZyhlLGMpPT1iKXtyZXR1cm4gdGhpcy5nZXRDb29raWVWYWwoYyl9ZT1kb2N1bWVudC5jb29raWUuaW5kZXhPZigiICIsZSkrMTtpZihlPT09MCl7YnJlYWt9fXJldHVybiBudWxsfSxjbGVhcjpmdW5jdGlvbihhLGIpe2lmKHRoaXMuZ2V0KGEpKXtiPWJ8fCIvIjtkb2N1bWVudC5jb29raWU9YSsiPTsgZXhwaXJlcz1UaHUsIDAxLUphbi03MCAwMDowMDowMSBHTVQ7IHBhdGg9IitifX0sZ2V0Q29va2llVmFsOmZ1bmN0aW9uKGIpe3ZhciBhPWRvY3VtZW50LmNvb2tpZS5pbmRleE9mKCI7IixiKTtpZihhPT0tMSl7YT1kb2N1bWVudC5jb29raWUubGVuZ3RofXJldHVybiB1bmVzY2FwZShkb2N1bWVudC5jb29raWUuc3Vic3RyaW5nKGIsYSkpfX0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLkdyb3VwZXIiLHtleHRlbmQ6IkV4dC51dGlsLlNvcnRlciIsaXNHcm91cGVyOnRydWUsZ2V0R3JvdXBTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0KHRoaXMucHJvcGVydHkpfX0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLkhpc3RvcnkiLHtzaW5nbGV0b246dHJ1ZSxhbHRlcm5hdGVDbGFzc05hbWU6IkV4dC5IaXN0b3J5IixtaXhpbnM6e29ic2VydmFibGU6IkV4dC51dGlsLk9ic2VydmFibGUifSx1c2VUb3BXaW5kb3c6dHJ1ZSxmaWVsZElkOkV4dC5iYXNlQ1NTUHJlZml4KyJoaXN0b3J5LWZpZWxkIixpZnJhbWVJZDpFeHQuYmFzZUNTU1ByZWZpeCsiaGlzdG9yeS1mcmFtZSIsY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2Eub2xkSUVNb2RlPUV4dC5pc0lFNnx8RXh0LmlzSUU3fHwhRXh0LmlzU3RyaWN0JiZFeHQuaXNJRTg7YS5pZnJhbWU9bnVsbDthLmhpZGRlbkZpZWxkPW51bGw7YS5yZWFkeT1mYWxzZTthLmN1cnJlbnRUb2tlbj1udWxsO2EubWl4aW5zLm9ic2VydmFibGUuY29uc3RydWN0b3IuY2FsbChhKX0sZ2V0SGFzaDpmdW5jdGlvbigpe3ZhciBhPXdpbmRvdy5sb2NhdGlvbi5ocmVmLGI9YS5pbmRleE9mKCIjIik7cmV0dXJuIGI+PTA/YS5zdWJzdHIoYisxKTpudWxsfSxzZXRIYXNoOmZ1bmN0aW9uKGQpe3ZhciBhPXRoaXMsYz1hLnVzZVRvcFdpbmRvdz93aW5kb3cudG9wOndpbmRvdzt0cnl7Yy5sb2NhdGlvbi5oYXNoPWR9Y2F0Y2goYil7fX0sZG9TYXZlOmZ1bmN0aW9uKCl7dGhpcy5oaWRkZW5GaWVsZC52YWx1ZT10aGlzLmN1cnJlbnRUb2tlbn0saGFuZGxlU3RhdGVDaGFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5jdXJyZW50VG9rZW49YTt0aGlzLmZpcmVFdmVudCgiY2hhbmdlIixhKX0sdXBkYXRlSUZyYW1lOmZ1bmN0aW9uKGIpe3ZhciBhPSc8aHRtbD48Ym9keT48ZGl2IGlkPSJzdGF0ZSI+JytFeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZShiKSsiPC9kaXY+PC9ib2R5PjwvaHRtbD4iLGQ7dHJ5e2Q9dGhpcy5pZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtkLm9wZW4oKTtkLndyaXRlKGEpO2QuY2xvc2UoKTtyZXR1cm4gdHJ1ZX1jYXRjaChjKXtyZXR1cm4gZmFsc2V9fSxjaGVja0lGcmFtZTpmdW5jdGlvbigpe3ZhciBkPXRoaXMsYj1kLmlmcmFtZS5jb250ZW50V2luZG93LGUsYyxhLGc7aWYoIWJ8fCFiLmRvY3VtZW50KXtFeHQuRnVuY3Rpb24uZGVmZXIodGhpcy5jaGVja0lGcmFtZSwxMCx0aGlzKTtyZXR1cm59ZT1iLmRvY3VtZW50O2M9ZS5nZXRFbGVtZW50QnlJZCgic3RhdGUiKTthPWM/Yy5pbm5lclRleHQ6bnVsbDtnPWQuZ2V0SGFzaCgpO0V4dC5UYXNrTWFuYWdlci5zdGFydCh7cnVuOmZ1bmN0aW9uKCl7dmFyIGs9Yi5kb2N1bWVudCxqPWsuZ2V0RWxlbWVudEJ5SWQoInN0YXRlIiksaD1qP2ouaW5uZXJUZXh0Om51bGwsaT1kLmdldEhhc2goKTtpZihoIT09YSl7YT1oO2QuaGFuZGxlU3RhdGVDaGFuZ2UoaCk7ZC5zZXRIYXNoKGgpO2c9aDtkLmRvU2F2ZSgpfWVsc2V7aWYoaSE9PWcpe2c9aTtkLnVwZGF0ZUlGcmFtZShpKX19fSxpbnRlcnZhbDo1MCxzY29wZTpkfSk7ZC5yZWFkeT10cnVlO2QuZmlyZUV2ZW50KCJyZWFkeSIsZCl9LHN0YXJ0VXA6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI7YS5jdXJyZW50VG9rZW49YS5oaWRkZW5GaWVsZC52YWx1ZXx8dGhpcy5nZXRIYXNoKCk7aWYoYS5vbGRJRU1vZGUpe2EuY2hlY2tJRnJhbWUoKX1lbHNle2I9YS5nZXRIYXNoKCk7RXh0LlRhc2tNYW5hZ2VyLnN0YXJ0KHtydW46ZnVuY3Rpb24oKXt2YXIgYz1hLmdldEhhc2goKTtpZihjIT09Yil7Yj1jO2EuaGFuZGxlU3RhdGVDaGFuZ2UoYik7YS5kb1NhdmUoKX19LGludGVydmFsOjUwLHNjb3BlOmF9KTthLnJlYWR5PXRydWU7YS5maXJlRXZlbnQoInJlYWR5IixhKX19LGluaXQ6ZnVuY3Rpb24oZCxiKXt2YXIgYz10aGlzLGE9RXh0LkRvbUhlbHBlcjtpZihjLnJlYWR5KXtFeHQuY2FsbGJhY2soZCxiLFtjXSk7cmV0dXJufWlmKCFFeHQuaXNSZWFkeSl7RXh0Lm9uUmVhZHkoZnVuY3Rpb24oKXtjLmluaXQoZCxiKX0pO3JldHVybn1jLmhpZGRlbkZpZWxkPUV4dC5nZXREb20oYy5maWVsZElkKTtpZighYy5oaWRkZW5GaWVsZCl7Yy5oaWRkZW5GaWVsZD1FeHQuZ2V0Qm9keSgpLmNyZWF0ZUNoaWxkKHtpZDpFeHQuaWQoKSx0YWc6ImZvcm0iLGNsczpFeHQuYmFzZUNTU1ByZWZpeCsiaGlkZS1kaXNwbGF5IixjaGlsZHJlbjpbe3RhZzoiaW5wdXQiLHR5cGU6ImhpZGRlbiIsaWQ6Yy5maWVsZElkfV19LGZhbHNlLHRydWUpLmZpcnN0Q2hpbGR9aWYoYy5vbGRJRU1vZGUpe2MuaWZyYW1lPUV4dC5nZXREb20oYy5pZnJhbWVJZCk7aWYoIWMuaWZyYW1lKXtjLmlmcmFtZT1hLmFwcGVuZChjLmhpZGRlbkZpZWxkLnBhcmVudE5vZGUse3RhZzoiaWZyYW1lIixpZDpjLmlmcmFtZUlkLHNyYzpFeHQuU1NMX1NFQ1VSRV9VUkx9KX19Yy5hZGRFdmVudHMoInJlYWR5IiwiY2hhbmdlIik7aWYoZCl7Yy5vbigicmVhZHkiLGQsYix7c2luZ2xlOnRydWV9KX1jLnN0YXJ0VXAoKX0sYWRkOmZ1bmN0aW9uKGEsYyl7dmFyIGI9dGhpcztpZihjIT09ZmFsc2Upe2lmKGIuZ2V0VG9rZW4oKT09PWEpe3JldHVybiB0cnVlfX1pZihiLm9sZElFTW9kZSl7cmV0dXJuIGIudXBkYXRlSUZyYW1lKGEpfWVsc2V7Yi5zZXRIYXNoKGEpO3JldHVybiB0cnVlfX0sYmFjazpmdW5jdGlvbigpe3dpbmRvdy5oaXN0b3J5LmdvKC0xKX0sZm9yd2FyZDpmdW5jdGlvbigpe3dpbmRvdy5oaXN0b3J5LmdvKDEpfSxnZXRUb2tlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWR5P3RoaXMuY3VycmVudFRva2VuOnRoaXMuZ2V0SGFzaCgpfX0pO0V4dC5kZWZpbmUoIkV4dC51dGlsLlBvaW50Iix7ZXh0ZW5kOiJFeHQudXRpbC5SZWdpb24iLHN0YXRpY3M6e2Zyb21FdmVudDpmdW5jdGlvbihhKXthPShhLmNoYW5nZWRUb3VjaGVzJiZhLmNoYW5nZWRUb3VjaGVzLmxlbmd0aD4wKT9hLmNoYW5nZWRUb3VjaGVzWzBdOmE7cmV0dXJuIG5ldyB0aGlzKGEucGFnZVgsYS5wYWdlWSl9fSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhLGIpe3RoaXMuY2FsbFBhcmVudChbYixhLGIsYV0pfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJQb2ludFsiK3RoaXMueCsiLCIrdGhpcy55KyJdIn0sZXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybih0aGlzLng9PWEueCYmdGhpcy55PT1hLnkpfSxpc1dpdGhpbjpmdW5jdGlvbihiLGEpe2lmKCFFeHQuaXNPYmplY3QoYSkpe2E9e3g6YSx5OmF9fXJldHVybih0aGlzLng8PWIueCthLngmJnRoaXMueD49Yi54LWEueCYmdGhpcy55PD1iLnkrYS55JiZ0aGlzLnk+PWIueS1hLnkpfSxyb3VuZGVkRXF1YWxzOmZ1bmN0aW9uKGEpe3JldHVybihNYXRoLnJvdW5kKHRoaXMueCk9PU1hdGgucm91bmQoYS54KSYmTWF0aC5yb3VuZCh0aGlzLnkpPT1NYXRoLnJvdW5kKGEueSkpfX0sZnVuY3Rpb24oKXt0aGlzLnByb3RvdHlwZS50cmFuc2xhdGU9RXh0LnV0aWwuUmVnaW9uLnByb3RvdHlwZS50cmFuc2xhdGVCeX0pO0V4dC5kZWZpbmUoIkV4dC52aWV3LlRhYmxlQ2h1bmtlciIse3NpbmdsZXRvbjp0cnVlLHJlcXVpcmVzOlsiRXh0LlhUZW1wbGF0ZSJdLG1ldGFUYWJsZVRwbDpbInslaWYgKHRoaXMub3BlblRhYmxlV3JhcClvdXQucHVzaCh0aGlzLm9wZW5UYWJsZVdyYXAoKSklfSIsJzx0YWJsZSBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsiZ3JpZC10YWJsZSAiK0V4dC5iYXNlQ1NTUHJlZml4KydncmlkLXRhYmxlLXJlc2l6ZXIiIGJvcmRlcj0iMCIgY2VsbHNwYWNpbmc9IjAiIGNlbGxwYWRkaW5nPSIwIiB7W3RoaXMuZW1iZWRGdWxsV2lkdGgodmFsdWVzKV19PicsIjx0Ym9keT4iLCc8dHIgY2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrJ2dyaWQtaGVhZGVyLXJvdyI+JywnPHRwbCBmb3I9ImNvbHVtbnMiPicsJzx0aCBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsnZ3JpZC1jb2wtcmVzaXplci17aWR9IiBzdHlsZT0id2lkdGg6IHt3aWR0aH1weDsgaGVpZ2h0OiAwcHg7Ij48L3RoPicsIjwvdHBsPiIsIjwvdHI+Iiwie1t0aGlzLm9wZW5Sb3dzKCldfSIsIntyb3d9IiwnPHRwbCBmb3I9ImZlYXR1cmVzIj4nLCJ7W3RoaXMuZW1iZWRGZWF0dXJlKHZhbHVlcywgcGFyZW50LCB4aW5kZXgsIHhjb3VudCldfSIsIjwvdHBsPiIsIntbdGhpcy5jbG9zZVJvd3MoKV19IiwiPC90Ym9keT4iLCI8L3RhYmxlPiIsInslaWYgKHRoaXMuY2xvc2VUYWJsZVdyYXApb3V0LnB1c2godGhpcy5jbG9zZVRhYmxlV3JhcCgpKSV9Il0sY29uc3RydWN0b3I6ZnVuY3Rpb24oKXtFeHQuWFRlbXBsYXRlLnByb3RvdHlwZS5yZWN1cnNlPWZ1bmN0aW9uKGIsYSl7cmV0dXJuIHRoaXMuYXBwbHkoYT9iW2FdOmIpfX0sZW1iZWRGZWF0dXJlOmZ1bmN0aW9uKGIsZCxhLGUpe3ZhciBjPSIiO2lmKCFiLmRpc2FibGVkKXtjPWIuZ2V0RmVhdHVyZVRwbChiLGQsYSxlKX1yZXR1cm4gY30sZW1iZWRGdWxsV2lkdGg6ZnVuY3Rpb24oYil7dmFyIGE9J3N0eWxlPSJ3aWR0aDp7ZnVsbFdpZHRofXB4Oyc7aWYoIWIucm93Q291bnQpe2ErPSJoZWlnaHQ6MXB4OyJ9cmV0dXJuIGErJyInfSxvcGVuUm93czpmdW5jdGlvbigpe3JldHVybic8dHBsIGZvcj0icm93cyI+J30sY2xvc2VSb3dzOmZ1bmN0aW9uKCl7cmV0dXJuIjwvdHBsPiJ9LG1ldGFSb3dUcGw6Wyc8dHIgY2xhc3M9IicrRXh0LmJhc2VDU1NQcmVmaXgrJ2dyaWQtcm93IHtbdGhpcy5lbWJlZFJvd0NscygpXX0iIHtbdGhpcy5lbWJlZFJvd0F0dHIoKV19PicsJzx0cGwgZm9yPSJjb2x1bW5zIj4nLCc8dGQgY2xhc3M9IntjbHN9ICcrRXh0LmJhc2VDU1NQcmVmaXgrImdyaWQtY2VsbCAiK0V4dC5iYXNlQ1NTUHJlZml4KydncmlkLWNlbGwte2NvbHVtbklkfSB7e2lkfS1tb2RpZmllZH0ge3tpZH0tdGRDbHN9IHtbdGhpcy5maXJzdE9yTGFzdENscyh4aW5kZXgsIHhjb3VudCldfSIge3tpZH0tdGRBdHRyfT4nLCc8ZGl2IHt1bnNlbGVjdGFibGVBdHRyfSBjbGFzcz0iJytFeHQuYmFzZUNTU1ByZWZpeCsnZ3JpZC1jZWxsLWlubmVyIHt1bnNlbGVjdGFibGVDbHN9IiBzdHlsZT0idGV4dC1hbGlnbjoge2FsaWdufTsge3tpZH0tc3R5bGV9OyI+e3tpZH19PC9kaXY+JywiPC90ZD4iLCI8L3RwbD4iLCI8L3RyPiJdLGZpcnN0T3JMYXN0Q2xzOmZ1bmN0aW9uKGEsYil7aWYoYT09PTEpe3JldHVybiBFeHQudmlldy5UYWJsZS5wcm90b3R5cGUuZmlyc3RDbHN9ZWxzZXtpZihhPT09Yil7cmV0dXJuIEV4dC52aWV3LlRhYmxlLnByb3RvdHlwZS5sYXN0Q2xzfX19LGVtYmVkUm93Q2xzOmZ1bmN0aW9uKCl7cmV0dXJuIntyb3dDbHN9In0sZW1iZWRSb3dBdHRyOmZ1bmN0aW9uKCl7cmV0dXJuIntyb3dBdHRyfSJ9LG9wZW5UYWJsZVdyYXA6dW5kZWZpbmVkLGNsb3NlVGFibGVXcmFwOnVuZGVmaW5lZCxnZXRUYWJsZVRwbDpmdW5jdGlvbihrLGIpe3ZhciBqLGg9e29wZW5Sb3dzOnRoaXMub3BlblJvd3MsY2xvc2VSb3dzOnRoaXMuY2xvc2VSb3dzLGVtYmVkRmVhdHVyZTp0aGlzLmVtYmVkRmVhdHVyZSxlbWJlZEZ1bGxXaWR0aDp0aGlzLmVtYmVkRnVsbFdpZHRoLG9wZW5UYWJsZVdyYXA6dGhpcy5vcGVuVGFibGVXcmFwLGNsb3NlVGFibGVXcmFwOnRoaXMuY2xvc2VUYWJsZVdyYXB9LGc9e30sYz1rLmZlYXR1cmVzfHxbXSxtPWMubGVuZ3RoLGU9MCxsPXtlbWJlZFJvd0Nsczp0aGlzLmVtYmVkUm93Q2xzLGVtYmVkUm93QXR0cjp0aGlzLmVtYmVkUm93QXR0cixmaXJzdE9yTGFzdENsczp0aGlzLmZpcnN0T3JMYXN0Q2xzLHVuc2VsZWN0YWJsZUF0dHI6ay5lbmFibGVUZXh0U2VsZWN0aW9uPyIiOid1bnNlbGVjdGFibGU9Im9uIicsdW5zZWxlY3RhYmxlQ2xzOmsuZW5hYmxlVGV4dFNlbGVjdGlvbj8iIjpFeHQuYmFzZUNTU1ByZWZpeCsidW5zZWxlY3RhYmxlIn0sZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLm1ldGFSb3dUcGwsMCksYTtmb3IoO2U8bTtlKyspe2lmKCFjW2VdLmRpc2FibGVkKXtjW2VdLm11dGF0ZU1ldGFSb3dUcGwoZCk7RXh0LmFwcGx5KGwsY1tlXS5nZXRNZXRhUm93VHBsRnJhZ21lbnRzKCkpO0V4dC5hcHBseShnLGNbZV0uZ2V0RnJhZ21lbnRUcGwoKSk7RXh0LmFwcGx5KGgsY1tlXS5nZXRUYWJsZUZyYWdtZW50cygpKX19ZD1uZXcgRXh0LlhUZW1wbGF0ZShkLmpvaW4oIiIpLGwpO2sucm93PWQuYXBwbHlUZW1wbGF0ZShrKTthPW5ldyBFeHQuWFRlbXBsYXRlKHRoaXMubWV0YVRhYmxlVHBsLmpvaW4oIiIpLGgpO2o9YS5hcHBseVRlbXBsYXRlKGspO2lmKCFiKXtqPW5ldyBFeHQuWFRlbXBsYXRlKGosZyl9cmV0dXJuIGp9fSk7RXh0Ll9lbmRUaW1lPW5ldyBEYXRlKCkuZ2V0VGltZSgpO2lmKEV4dC5fYmVmb3JlcmVhZHloYW5kbGVyKXtFeHQuX2JlZm9yZXJlYWR5aGFuZGxlcigpfTs=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>