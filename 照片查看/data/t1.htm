

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1"><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="stylesheet" type="text/css" href="/Framework/css/basic.css" /><link rel="stylesheet" type="text/css" href="/Framework/css/common.css" /><link rel="stylesheet" type="text/css" href="/Framework/css/theme.css" /><link rel="stylesheet" type="text/css" href="/Framework/Javascript/other/validate/css/validate.css" />
    <script type="text/javascript" src="/Framework/Javascript/other/jquery-1.4.2.min.js"></script>
    <title>
	渠道云
</title></head>
<body class="index_wrapper" style="overflow: auto;">
    <!--main start-->
    <div class="main index_main clearfix" style="height: 600px;">
        <!--inner_main end-->
        <div class="inner_main1">
            <div style="height: 30px;">
            </div>
            <img src="/Framework/image/ad.png" class="png_bg fl index_ad" style="margin-top: 0px;"
                alt="" />
            <!--登录框 start-->
            <div class="login_wrap png_bg fr" style="margin-top: 100px;">
                <form id="signin" method="post" onsubmit="return false;">
                <ul>
                    <li class="login_attention colorO"></li>
                    <li class="username1">
                        <input id="txtCustomer" name="customer" type="text" /></li>
                    <li style="height: 15px;"><span id="txtCustomer_succeed"></span><span id="txtCustomer_error">
                    </span></li>
                    <li class="username">
                        <input id="txtUsername" name="username" type="text" /></li>
                    <li style="height: 15px;"><span id="txtUsername_succeed"></span><span id="txtUsername_error">
                    </span></li>
                    <li class="password">
                        <input id="txtUserpwd" name="userpwd" type="password" /></li>
                    <li style="height: 15px;"><span id="txtUserpwd_succeed"></span><span id="txtUserpwd_error">
                    </span></li>
                    <li><a id="btnSubmit" href="javascript:;">
                        <img src="/Framework/image/btn-login.jpg" title="立即登录" alt="" /></a></li>
                </ul>
            </div>
            </form>
            <!--登录框 end-->
            <!--列表 start-->
            <!--列表 end-->
        </div>
        <!--inner_main end-->
    </div>
    <!--main end-->
    <!--footer start-->
    <div style="text-align: center; color: black; padding-top: 10px;">
        上海杰亦特信息科技有限公司版权所有</div>
    <!--footer end-->
    <script type="text/javascript" language="javascript" src="/Framework/Javascript/other/validate/validate.var.cn.js"></script>
    <script type="text/javascript" language="javascript" src="/Framework/Javascript/other/validate/validate.js"></script>
    <script type="text/javascript" language="javascript">
        //重写消息类
        $.extend(validatePrompt, {
            customer: {
                onFocus: "",
                succeed: "",
                isNull: "请输入客户名",
                error: "客户名不正确"
            },
            mail: {
                onFocus: "",
                succeed: "",
                isNull: "请输入正确的用户名",
                error: "用户名不正确"
            },
            pwd: {
                onFocus: "",
                succeed: "",
                isNull: "请输入密码",
                error: "密码不正确"
            }
        });
        //重写事件类
        $.extend(validateFunction, {
            customer: function (option) {
                var format = validateRules.isNull(option.value);
                if (!format) {
                    validateSettings.succeed.run(option);
                }
                else {
                    validateSettings.error.run(option, option.prompts.isNull);
                }
            },
            mail: function (option) {
                var format = validateRules.isNull(option.value);
                if (!format) {
                    validateSettings.succeed.run(option);
                }
                else {
                    validateSettings.error.run(option, option.prompts.isNull);
                }
            },
            pwd: function (option) {
                validateSettings.succeed.run(option);
            },
            FORM_validate: function () {
                $("#txtCustomer").validate(validatePrompt.customer, validateFunction.customer, true);
                $("#txtUsername").validate(validatePrompt.mail, validateFunction.mail, true);
                $("#txtUserpwd").validate(validatePrompt.pwd, validateFunction.pwd, true);

                return validateFunction.FORM_submit(["#txtCustomer", "#txtUsername", "#txtUserpwd"]);
            }
        });
        var pCustomer = "clienttest";
        var pUserName = "021-580001";
        if (pCustomer != null && pCustomer != "" && pUserName != null && pUserName != "") {
            
            $("#txtCustomer").val("clienttest");
            $("#txtUsername").val("021-580001");

            $("#txtCustomer").validate(validatePrompt.customer, validateFunction.customer, "请输入客户名");
            $("#txtUsername").validate(validatePrompt.mail, validateFunction.mail, "请输入用户名");
            $("#txtUserpwd").validate(validatePrompt.pwd, validateFunction.pwd, "请输入密码");

            $("#txtUserpwd").focus();
        } else {
            $("#txtCustomer").validate(validatePrompt.customer, validateFunction.customer, "请输入客户名");
            $("#txtUsername").validate(validatePrompt.mail, validateFunction.mail, "请输入用户名");
            $("#txtUserpwd").validate(validatePrompt.pwd, validateFunction.pwd, "请输入密码");
            $("#txtCustomer").focus();
        }
        $("#btnSubmit").click(function () {
            var flag = validateFunction.FORM_validate();
            if ($("#txtCustomer").val() == "请输入客户名") {
                $("#txtCustomer_error").html("请输入客户名").show();
                flag = false;
                $("#txtCustomer").focus();
            } else if ($("#txtUsername").val() == "请输入用户名") {
                $("#txtUsername_error").html("请输入用户名").show();
                flag = false;
                $("#txtUsername").focus();
            } else if ($("#txtUserpwd").val() == "请输入密码") {
                $("#txtUserpwd_error").html("请输入密码").show();
                flag = false;
                $("#txtUserpwd").focus();
            }
            var res = new Boolean(false);
            //        $("#btnSubmit").attr("disabled", "disabled");
            if (flag) {
                $("#txtUserpwd_error").html("登录中......").show();
                $.post("login.aspx?method=UserLogin&r=" + Math.random(),
                $("#signin").serialize(),
                function (result) {
                    if (result != "") {
                        var obj = eval(result);

                        if (obj[0].success) {
                            window.location = obj[0].msg;
                            return;
                        }
                        if (obj[0].customer) {
                            $("#txtCustomer_error").html(obj[0].msg).show().attr({ "class": "error" });
                            $("#txtUserpwd_error").html("");
                            return;
                        }
                        if (obj[0].username) {
                            $("#txtUsername_error").html(obj[0].msg).show().attr({ "class": "error" });
                            $("#txtUserpwd_error").html("");
                            return;
                        }
                        if (obj[0].userpwd) {
                            $("#txtUserpwd_error").html(obj[0].msg).show().attr({ "class": "error" });
                            return;
                        }
                        alert(obj[0].msg);
                    }
                });
            }
            else {
                res = false;
            }
            return res;
        });

        $("#txtUserpwd").bind('keyup', function (event) {
            if (event.keyCode == 13) {
                $("#btnSubmit").click();
            }
        });
        setTimeout(function () {
            //$("#txtCustomer").focus();
            $("#txtUserpwd_error").ajaxError(function (e, xhr, opt) {
                alert("服务器连接出错");
            });
        }, 100);
    </script>
</body>
</html>
